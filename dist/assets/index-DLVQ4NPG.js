var v7=Object.defineProperty;var w7=(t,e,n)=>e in t?v7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ox=(t,e,n)=>w7(t,typeof e!="symbol"?e+"":e,n);function BM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var k7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gN(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var c1={exports:{}},Pp={},u1={exports:{}},dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function T7(){if(N_)return dn;N_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,y={};function T(F,E,M){this.props=F,this.context=E,this.refs=y,this.updater=M||g}T.prototype.isReactComponent={},T.prototype.setState=function(F,E){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,E,"setState")},T.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function j(){}j.prototype=T.prototype;function _(F,E,M){this.props=F,this.context=E,this.refs=y,this.updater=M||g}var v=_.prototype=new j;v.constructor=_,w(v,T.prototype),v.isPureReactComponent=!0;var P=Array.isArray,D=Object.prototype.hasOwnProperty,$={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function K(F,E,M){var ee,O={},q=null,H=null;if(E!=null)for(ee in E.ref!==void 0&&(H=E.ref),E.key!==void 0&&(q=""+E.key),E)D.call(E,ee)&&!U.hasOwnProperty(ee)&&(O[ee]=E[ee]);var J=arguments.length-2;if(J===1)O.children=M;else if(1<J){for(var Q=Array(J),ne=0;ne<J;ne++)Q[ne]=arguments[ne+2];O.children=Q}if(F&&F.defaultProps)for(ee in J=F.defaultProps,J)O[ee]===void 0&&(O[ee]=J[ee]);return{$$typeof:t,type:F,key:q,ref:H,props:O,_owner:$.current}}function Y(F,E){return{$$typeof:t,type:F.type,key:E,ref:F.ref,props:F.props,_owner:F._owner}}function G(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function X(F){var E={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(M){return E[M]})}var V=/\/+/g;function A(F,E){return typeof F=="object"&&F!==null&&F.key!=null?X(""+F.key):E.toString(36)}function x(F,E,M,ee,O){var q=typeof F;(q==="undefined"||q==="boolean")&&(F=null);var H=!1;if(F===null)H=!0;else switch(q){case"string":case"number":H=!0;break;case"object":switch(F.$$typeof){case t:case e:H=!0}}if(H)return H=F,O=O(H),F=ee===""?"."+A(H,0):ee,P(O)?(M="",F!=null&&(M=F.replace(V,"$&/")+"/"),x(O,E,M,"",function(ne){return ne})):O!=null&&(G(O)&&(O=Y(O,M+(!O.key||H&&H.key===O.key?"":(""+O.key).replace(V,"$&/")+"/")+F)),E.push(O)),1;if(H=0,ee=ee===""?".":ee+":",P(F))for(var J=0;J<F.length;J++){q=F[J];var Q=ee+A(q,J);H+=x(q,E,M,Q,O)}else if(Q=m(F),typeof Q=="function")for(F=Q.call(F),J=0;!(q=F.next()).done;)q=q.value,Q=ee+A(q,J++),H+=x(q,E,M,Q,O);else if(q==="object")throw E=String(F),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.");return H}function C(F,E,M){if(F==null)return F;var ee=[],O=0;return x(F,ee,"","",function(q){return E.call(M,q,O++)}),ee}function L(F){if(F._status===-1){var E=F._result;E=E(),E.then(function(M){(F._status===0||F._status===-1)&&(F._status=1,F._result=M)},function(M){(F._status===0||F._status===-1)&&(F._status=2,F._result=M)}),F._status===-1&&(F._status=0,F._result=E)}if(F._status===1)return F._result.default;throw F._result}var z={current:null},R={transition:null},I={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:R,ReactCurrentOwner:$};function N(){throw Error("act(...) is not supported in production builds of React.")}return dn.Children={map:C,forEach:function(F,E,M){C(F,function(){E.apply(this,arguments)},M)},count:function(F){var E=0;return C(F,function(){E++}),E},toArray:function(F){return C(F,function(E){return E})||[]},only:function(F){if(!G(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},dn.Component=T,dn.Fragment=n,dn.Profiler=s,dn.PureComponent=_,dn.StrictMode=r,dn.Suspense=c,dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,dn.act=N,dn.cloneElement=function(F,E,M){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var ee=w({},F.props),O=F.key,q=F.ref,H=F._owner;if(E!=null){if(E.ref!==void 0&&(q=E.ref,H=$.current),E.key!==void 0&&(O=""+E.key),F.type&&F.type.defaultProps)var J=F.type.defaultProps;for(Q in E)D.call(E,Q)&&!U.hasOwnProperty(Q)&&(ee[Q]=E[Q]===void 0&&J!==void 0?J[Q]:E[Q])}var Q=arguments.length-2;if(Q===1)ee.children=M;else if(1<Q){J=Array(Q);for(var ne=0;ne<Q;ne++)J[ne]=arguments[ne+2];ee.children=J}return{$$typeof:t,type:F.type,key:O,ref:q,props:ee,_owner:H}},dn.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},dn.createElement=K,dn.createFactory=function(F){var E=K.bind(null,F);return E.type=F,E},dn.createRef=function(){return{current:null}},dn.forwardRef=function(F){return{$$typeof:l,render:F}},dn.isValidElement=G,dn.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:L}},dn.memo=function(F,E){return{$$typeof:u,type:F,compare:E===void 0?null:E}},dn.startTransition=function(F){var E=R.transition;R.transition={};try{F()}finally{R.transition=E}},dn.unstable_act=N,dn.useCallback=function(F,E){return z.current.useCallback(F,E)},dn.useContext=function(F){return z.current.useContext(F)},dn.useDebugValue=function(){},dn.useDeferredValue=function(F){return z.current.useDeferredValue(F)},dn.useEffect=function(F,E){return z.current.useEffect(F,E)},dn.useId=function(){return z.current.useId()},dn.useImperativeHandle=function(F,E,M){return z.current.useImperativeHandle(F,E,M)},dn.useInsertionEffect=function(F,E){return z.current.useInsertionEffect(F,E)},dn.useLayoutEffect=function(F,E){return z.current.useLayoutEffect(F,E)},dn.useMemo=function(F,E){return z.current.useMemo(F,E)},dn.useReducer=function(F,E,M){return z.current.useReducer(F,E,M)},dn.useRef=function(F){return z.current.useRef(F)},dn.useState=function(F){return z.current.useState(F)},dn.useSyncExternalStore=function(F,E,M){return z.current.useSyncExternalStore(F,E,M)},dn.useTransition=function(){return z.current.useTransition()},dn.version="18.3.1",dn}var j_;function yN(){return j_||(j_=1,u1.exports=T7()),u1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function N7(){if(C_)return Pp;C_=1;var t=yN(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(l,c,u){var f,p={},m=null,g=null;u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(g=c.ref);for(f in c)r.call(c,f)&&!o.hasOwnProperty(f)&&(p[f]=c[f]);if(l&&l.defaultProps)for(f in c=l.defaultProps,c)p[f]===void 0&&(p[f]=c[f]);return{$$typeof:e,type:l,key:m,ref:g,props:p,_owner:s.current}}return Pp.Fragment=n,Pp.jsx=a,Pp.jsxs=a,Pp}var S_;function j7(){return S_||(S_=1,c1.exports=N7()),c1.exports}var i=j7(),k=yN();const Ae=rc(k),xN=BM({__proto__:null,default:Ae},[k]);var ax={},d1={exports:{}},yi={},f1={exports:{}},h1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function C7(){return E_||(E_=1,function(t){function e(R,I){var N=R.length;R.push(I);e:for(;0<N;){var F=N-1>>>1,E=R[F];if(0<s(E,I))R[F]=I,R[N]=E,N=F;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var I=R[0],N=R.pop();if(N!==I){R[0]=N;e:for(var F=0,E=R.length,M=E>>>1;F<M;){var ee=2*(F+1)-1,O=R[ee],q=ee+1,H=R[q];if(0>s(O,N))q<E&&0>s(H,O)?(R[F]=H,R[q]=N,F=q):(R[F]=O,R[ee]=N,F=ee);else if(q<E&&0>s(H,N))R[F]=H,R[q]=N,F=q;else break e}}return I}function s(R,I){var N=R.sortIndex-I.sortIndex;return N!==0?N:R.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,p=null,m=3,g=!1,w=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=R)r(u),I.sortIndex=I.expirationTime,e(c,I);else break;I=n(u)}}function P(R){if(y=!1,v(R),!w)if(n(c)!==null)w=!0,L(D);else{var I=n(u);I!==null&&z(P,I.startTime-R)}}function D(R,I){w=!1,y&&(y=!1,j(K),K=-1),g=!0;var N=m;try{for(v(I),p=n(c);p!==null&&(!(p.expirationTime>I)||R&&!X());){var F=p.callback;if(typeof F=="function"){p.callback=null,m=p.priorityLevel;var E=F(p.expirationTime<=I);I=t.unstable_now(),typeof E=="function"?p.callback=E:p===n(c)&&r(c),v(I)}else r(c);p=n(c)}if(p!==null)var M=!0;else{var ee=n(u);ee!==null&&z(P,ee.startTime-I),M=!1}return M}finally{p=null,m=N,g=!1}}var $=!1,U=null,K=-1,Y=5,G=-1;function X(){return!(t.unstable_now()-G<Y)}function V(){if(U!==null){var R=t.unstable_now();G=R;var I=!0;try{I=U(!0,R)}finally{I?A():($=!1,U=null)}}else $=!1}var A;if(typeof _=="function")A=function(){_(V)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,C=x.port2;x.port1.onmessage=V,A=function(){C.postMessage(null)}}else A=function(){T(V,0)};function L(R){U=R,$||($=!0,A())}function z(R,I){K=T(function(){R(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,L(D))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(m){case 1:case 2:case 3:var I=3;break;default:I=m}var N=m;m=I;try{return R()}finally{m=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,I){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var N=m;m=R;try{return I()}finally{m=N}},t.unstable_scheduleCallback=function(R,I,N){var F=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?F+N:F):N=F,R){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=N+E,R={id:f++,callback:I,priorityLevel:R,startTime:N,expirationTime:E,sortIndex:-1},N>F?(R.sortIndex=N,e(u,R),n(c)===null&&R===n(u)&&(y?(j(K),K=-1):y=!0,z(P,N-F))):(R.sortIndex=E,e(c,R),w||g||(w=!0,L(D))),R},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(R){var I=m;return function(){var N=m;m=I;try{return R.apply(this,arguments)}finally{m=N}}}}(h1)),h1}var __;function S7(){return __||(__=1,f1.exports=C7()),f1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function E7(){if(A_)return yi;A_=1;var t=yN(),e=S7();function n(d){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+d,b=1;b<arguments.length;b++)h+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(d,h){a(d,h),a(d+"Capture",h)}function a(d,h){for(s[d]=h,d=0;d<h.length;d++)r.add(h[d])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(d){return c.call(p,d)?!0:c.call(f,d)?!1:u.test(d)?p[d]=!0:(f[d]=!0,!1)}function g(d,h,b,S){if(b!==null&&b.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return S?!1:b!==null?!b.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function w(d,h,b,S){if(h===null||typeof h>"u"||g(d,h,b,S))return!0;if(S)return!1;if(b!==null)switch(b.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(d,h,b,S,B,W,Z){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=S,this.attributeNamespace=B,this.mustUseProperty=b,this.propertyName=d,this.type=h,this.sanitizeURL=W,this.removeEmptyString=Z}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){T[d]=new y(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var h=d[0];T[h]=new y(h,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){T[d]=new y(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){T[d]=new y(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){T[d]=new y(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){T[d]=new y(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){T[d]=new y(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){T[d]=new y(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){T[d]=new y(d,5,!1,d.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function _(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var h=d.replace(j,_);T[h]=new y(h,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var h=d.replace(j,_);T[h]=new y(h,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var h=d.replace(j,_);T[h]=new y(h,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){T[d]=new y(d,1,!1,d.toLowerCase(),null,!1,!1)}),T.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){T[d]=new y(d,1,!1,d.toLowerCase(),null,!0,!0)});function v(d,h,b,S){var B=T.hasOwnProperty(h)?T[h]:null;(B!==null?B.type!==0:S||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(w(h,b,B,S)&&(b=null),S||B===null?m(h)&&(b===null?d.removeAttribute(h):d.setAttribute(h,""+b)):B.mustUseProperty?d[B.propertyName]=b===null?B.type===3?!1:"":b:(h=B.attributeName,S=B.attributeNamespace,b===null?d.removeAttribute(h):(B=B.type,b=B===3||B===4&&b===!0?"":""+b,S?d.setAttributeNS(S,h,b):d.setAttribute(h,b))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),$=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),X=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),R=Symbol.iterator;function I(d){return d===null||typeof d!="object"?null:(d=R&&d[R]||d["@@iterator"],typeof d=="function"?d:null)}var N=Object.assign,F;function E(d){if(F===void 0)try{throw Error()}catch(b){var h=b.stack.trim().match(/\n( *(at )?)/);F=h&&h[1]||""}return`
`+F+d}var M=!1;function ee(d,h){if(!d||M)return"";M=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(ke){var S=ke}Reflect.construct(d,[],h)}else{try{h.call()}catch(ke){S=ke}d.call(h.prototype)}else{try{throw Error()}catch(ke){S=ke}d()}}catch(ke){if(ke&&S&&typeof ke.stack=="string"){for(var B=ke.stack.split(`
`),W=S.stack.split(`
`),Z=B.length-1,ae=W.length-1;1<=Z&&0<=ae&&B[Z]!==W[ae];)ae--;for(;1<=Z&&0<=ae;Z--,ae--)if(B[Z]!==W[ae]){if(Z!==1||ae!==1)do if(Z--,ae--,0>ae||B[Z]!==W[ae]){var de=`
`+B[Z].replace(" at new "," at ");return d.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",d.displayName)),de}while(1<=Z&&0<=ae);break}}}finally{M=!1,Error.prepareStackTrace=b}return(d=d?d.displayName||d.name:"")?E(d):""}function O(d){switch(d.tag){case 5:return E(d.type);case 16:return E("Lazy");case 13:return E("Suspense");case 19:return E("SuspenseList");case 0:case 2:case 15:return d=ee(d.type,!1),d;case 11:return d=ee(d.type.render,!1),d;case 1:return d=ee(d.type,!0),d;default:return""}}function q(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case U:return"Fragment";case $:return"Portal";case Y:return"Profiler";case K:return"StrictMode";case A:return"Suspense";case x:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case X:return(d.displayName||"Context")+".Consumer";case G:return(d._context.displayName||"Context")+".Provider";case V:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case C:return h=d.displayName||null,h!==null?h:q(d.type)||"Memo";case L:h=d._payload,d=d._init;try{return q(d(h))}catch{}}return null}function H(d){var h=d.type;switch(d.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=h.render,d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(h);case 8:return h===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function J(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Q(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function ne(d){var h=Q(d)?"checked":"value",b=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),S=""+d[h];if(!d.hasOwnProperty(h)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var B=b.get,W=b.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return B.call(this)},set:function(Z){S=""+Z,W.call(this,Z)}}),Object.defineProperty(d,h,{enumerable:b.enumerable}),{getValue:function(){return S},setValue:function(Z){S=""+Z},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function se(d){d._valueTracker||(d._valueTracker=ne(d))}function ie(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var b=h.getValue(),S="";return d&&(S=Q(d)?d.checked?"true":"false":d.value),d=S,d!==b?(h.setValue(d),!0):!1}function pe(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function le(d,h){var b=h.checked;return N({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??d._wrapperState.initialChecked})}function me(d,h){var b=h.defaultValue==null?"":h.defaultValue,S=h.checked!=null?h.checked:h.defaultChecked;b=J(h.value!=null?h.value:b),d._wrapperState={initialChecked:S,initialValue:b,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function Ee(d,h){h=h.checked,h!=null&&v(d,"checked",h,!1)}function te(d,h){Ee(d,h);var b=J(h.value),S=h.type;if(b!=null)S==="number"?(b===0&&d.value===""||d.value!=b)&&(d.value=""+b):d.value!==""+b&&(d.value=""+b);else if(S==="submit"||S==="reset"){d.removeAttribute("value");return}h.hasOwnProperty("value")?Pe(d,h.type,b):h.hasOwnProperty("defaultValue")&&Pe(d,h.type,J(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(d.defaultChecked=!!h.defaultChecked)}function Ne(d,h,b){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var S=h.type;if(!(S!=="submit"&&S!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+d._wrapperState.initialValue,b||h===d.value||(d.value=h),d.defaultValue=h}b=d.name,b!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,b!==""&&(d.name=b)}function Pe(d,h,b){(h!=="number"||pe(d.ownerDocument)!==d)&&(b==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+b&&(d.defaultValue=""+b))}var et=Array.isArray;function Le(d,h,b,S){if(d=d.options,h){h={};for(var B=0;B<b.length;B++)h["$"+b[B]]=!0;for(b=0;b<d.length;b++)B=h.hasOwnProperty("$"+d[b].value),d[b].selected!==B&&(d[b].selected=B),B&&S&&(d[b].defaultSelected=!0)}else{for(b=""+J(b),h=null,B=0;B<d.length;B++){if(d[B].value===b){d[B].selected=!0,S&&(d[B].defaultSelected=!0);return}h!==null||d[B].disabled||(h=d[B])}h!==null&&(h.selected=!0)}}function Se(d,h){if(h.dangerouslySetInnerHTML!=null)throw Error(n(91));return N({},h,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Te(d,h){var b=h.value;if(b==null){if(b=h.children,h=h.defaultValue,b!=null){if(h!=null)throw Error(n(92));if(et(b)){if(1<b.length)throw Error(n(93));b=b[0]}h=b}h==null&&(h=""),b=h}d._wrapperState={initialValue:J(b)}}function ze(d,h){var b=J(h.value),S=J(h.defaultValue);b!=null&&(b=""+b,b!==d.value&&(d.value=b),h.defaultValue==null&&d.defaultValue!==b&&(d.defaultValue=b)),S!=null&&(d.defaultValue=""+S)}function dt(d){var h=d.textContent;h===d._wrapperState.initialValue&&h!==""&&h!==null&&(d.value=h)}function oe(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(d,h){return d==null||d==="http://www.w3.org/1999/xhtml"?oe(h):d==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var ge,be=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,b,S,B){MSApp.execUnsafeLocalFunction(function(){return d(h,b,S,B)})}:d}(function(d,h){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=h;else{for(ge=ge||document.createElement("div"),ge.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=ge.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;h.firstChild;)d.appendChild(h.firstChild)}});function ve(d,h){if(h){var b=d.firstChild;if(b&&b===d.lastChild&&b.nodeType===3){b.nodeValue=h;return}}d.textContent=h}var Ke={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Me=["Webkit","ms","Moz","O"];Object.keys(Ke).forEach(function(d){Me.forEach(function(h){h=h+d.charAt(0).toUpperCase()+d.substring(1),Ke[h]=Ke[d]})});function He(d,h,b){return h==null||typeof h=="boolean"||h===""?"":b||typeof h!="number"||h===0||Ke.hasOwnProperty(d)&&Ke[d]?(""+h).trim():h+"px"}function ct(d,h){d=d.style;for(var b in h)if(h.hasOwnProperty(b)){var S=b.indexOf("--")===0,B=He(b,h[b],S);b==="float"&&(b="cssFloat"),S?d.setProperty(b,B):d[b]=B}}var Je=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ye(d,h){if(h){if(Je[d]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(n(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(n(61))}if(h.style!=null&&typeof h.style!="object")throw Error(n(62))}}function St(d,h){if(d.indexOf("-")===-1)return typeof h.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function Ze(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var An=null,Dt=null,Ot=null;function wn(d){if(d=gp(d)){if(typeof An!="function")throw Error(n(280));var h=d.stateNode;h&&(h=wy(h),An(d.stateNode,d.type,h))}}function nn(d){Dt?Ot?Ot.push(d):Ot=[d]:Dt=d}function Xe(){if(Dt){var d=Dt,h=Ot;if(Ot=Dt=null,wn(d),h)for(d=0;d<h.length;d++)wn(h[d])}}function Ft(d,h){return d(h)}function yt(){}var Ge=!1;function rt(d,h,b){if(Ge)return d(h,b);Ge=!0;try{return Ft(d,h,b)}finally{Ge=!1,(Dt!==null||Ot!==null)&&(yt(),Xe())}}function st(d,h){var b=d.stateNode;if(b===null)return null;var S=wy(b);if(S===null)return null;b=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(d=d.type,S=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!S;break e;default:d=!1}if(d)return null;if(b&&typeof b!="function")throw Error(n(231,h,typeof b));return b}var Re=!1;if(l)try{var it={};Object.defineProperty(it,"passive",{get:function(){Re=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Re=!1}function Ue(d,h,b,S,B,W,Z,ae,de){var ke=Array.prototype.slice.call(arguments,3);try{h.apply(b,ke)}catch(Oe){this.onError(Oe)}}var tt=!1,Cn=null,at=!1,Rt=null,On={onError:function(d){tt=!0,Cn=d}};function zt(d,h,b,S,B,W,Z,ae,de){tt=!1,Cn=null,Ue.apply(On,arguments)}function Et(d,h,b,S,B,W,Z,ae,de){if(zt.apply(this,arguments),tt){if(tt){var ke=Cn;tt=!1,Cn=null}else throw Error(n(198));at||(at=!0,Rt=ke)}}function Yt(d){var h=d,b=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(b=h.return),d=h.return;while(d)}return h.tag===3?b:null}function Jt(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function Lt(d){if(Yt(d)!==d)throw Error(n(188))}function Kn(d){var h=d.alternate;if(!h){if(h=Yt(d),h===null)throw Error(n(188));return h!==d?null:d}for(var b=d,S=h;;){var B=b.return;if(B===null)break;var W=B.alternate;if(W===null){if(S=B.return,S!==null){b=S;continue}break}if(B.child===W.child){for(W=B.child;W;){if(W===b)return Lt(B),d;if(W===S)return Lt(B),h;W=W.sibling}throw Error(n(188))}if(b.return!==S.return)b=B,S=W;else{for(var Z=!1,ae=B.child;ae;){if(ae===b){Z=!0,b=B,S=W;break}if(ae===S){Z=!0,S=B,b=W;break}ae=ae.sibling}if(!Z){for(ae=W.child;ae;){if(ae===b){Z=!0,b=W,S=B;break}if(ae===S){Z=!0,S=W,b=B;break}ae=ae.sibling}if(!Z)throw Error(n(189))}}if(b.alternate!==S)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?d:h}function Fn(d){return d=Kn(d),d!==null?Sn(d):null}function Sn(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var h=Sn(d);if(h!==null)return h;d=d.sibling}return null}var Tn=e.unstable_scheduleCallback,Pn=e.unstable_cancelCallback,Ws=e.unstable_shouldYield,Oi=e.unstable_requestPaint,Xt=e.unstable_now,zn=e.unstable_getCurrentPriorityLevel,Nr=e.unstable_ImmediatePriority,Li=e.unstable_UserBlockingPriority,ui=e.unstable_NormalPriority,di=e.unstable_LowPriority,tr=e.unstable_IdlePriority,_e=null,Ce=null;function qe(d){if(Ce&&typeof Ce.onCommitFiberRoot=="function")try{Ce.onCommitFiberRoot(_e,d,void 0,(d.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:us,_t=Math.log,Yn=Math.LN2;function us(d){return d>>>=0,d===0?32:31-(_t(d)/Yn|0)|0}var ds=64,Hs=4194304;function Vr(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function yo(d,h){var b=d.pendingLanes;if(b===0)return 0;var S=0,B=d.suspendedLanes,W=d.pingedLanes,Z=b&268435455;if(Z!==0){var ae=Z&~B;ae!==0?S=Vr(ae):(W&=Z,W!==0&&(S=Vr(W)))}else Z=b&~B,Z!==0?S=Vr(Z):W!==0&&(S=Vr(W));if(S===0)return 0;if(h!==0&&h!==S&&(h&B)===0&&(B=S&-S,W=h&-h,B>=W||B===16&&(W&4194240)!==0))return h;if((S&4)!==0&&(S|=b&16),h=d.entangledLanes,h!==0)for(d=d.entanglements,h&=S;0<h;)b=31-vt(h),B=1<<b,S|=d[b],h&=~B;return S}function rn(d,h){switch(d){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wd(d,h){for(var b=d.suspendedLanes,S=d.pingedLanes,B=d.expirationTimes,W=d.pendingLanes;0<W;){var Z=31-vt(W),ae=1<<Z,de=B[Z];de===-1?((ae&b)===0||(ae&S)!==0)&&(B[Z]=rn(ae,h)):de<=h&&(d.expiredLanes|=ae),W&=~ae}}function xr(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function xl(){var d=ds;return ds<<=1,(ds&4194240)===0&&(ds=64),d}function tp(d){for(var h=[],b=0;31>b;b++)h.push(d);return h}function mu(d,h,b){d.pendingLanes|=h,h!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,h=31-vt(h),d[h]=b}function Dv(d,h){var b=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h,h=d.entanglements;var S=d.eventTimes;for(d=d.expirationTimes;0<b;){var B=31-vt(b),W=1<<B;h[B]=0,S[B]=-1,d[B]=-1,b&=~W}}function np(d,h){var b=d.entangledLanes|=h;for(d=d.entanglements;b;){var S=31-vt(b),B=1<<S;B&h|d[S]&h&&(d[S]|=h),b&=~B}}var Mn=0;function oy(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var ay,rp,ly,gu,sp,Hd=!1,Gd=[],Ra=null,xo=null,Ia=null,yu=new Map,xu=new Map,Ma=[],uS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cy(d,h){switch(d){case"focusin":case"focusout":Ra=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":yu.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(h.pointerId)}}function bl(d,h,b,S,B,W){return d===null||d.nativeEvent!==W?(d={blockedOn:h,domEventName:b,eventSystemFlags:S,nativeEvent:W,targetContainers:[B]},h!==null&&(h=gp(h),h!==null&&rp(h)),d):(d.eventSystemFlags|=S,h=d.targetContainers,B!==null&&h.indexOf(B)===-1&&h.push(B),d)}function Ov(d,h,b,S,B){switch(h){case"focusin":return Ra=bl(Ra,d,h,b,S,B),!0;case"dragenter":return xo=bl(xo,d,h,b,S,B),!0;case"mouseover":return Ia=bl(Ia,d,h,b,S,B),!0;case"pointerover":var W=B.pointerId;return yu.set(W,bl(yu.get(W)||null,d,h,b,S,B)),!0;case"gotpointercapture":return W=B.pointerId,xu.set(W,bl(xu.get(W)||null,d,h,b,S,B)),!0}return!1}function bu(d){var h=wu(d.target);if(h!==null){var b=Yt(h);if(b!==null){if(h=b.tag,h===13){if(h=Jt(b),h!==null){d.blockedOn=h,sp(d.priority,function(){ly(b)});return}}else if(h===3&&b.stateNode.current.memoizedState.isDehydrated){d.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}d.blockedOn=null}function vl(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var b=bo(d.domEventName,d.eventSystemFlags,h[0],d.nativeEvent);if(b===null){b=d.nativeEvent;var S=new b.constructor(b.type,b);bt=S,b.target.dispatchEvent(S),bt=null}else return h=gp(b),h!==null&&rp(h),d.blockedOn=b,!1;h.shift()}return!0}function uy(d,h,b){vl(d)&&b.delete(h)}function Lv(){Hd=!1,Ra!==null&&vl(Ra)&&(Ra=null),xo!==null&&vl(xo)&&(xo=null),Ia!==null&&vl(Ia)&&(Ia=null),yu.forEach(uy),xu.forEach(uy)}function Da(d,h){d.blockedOn===h&&(d.blockedOn=null,Hd||(Hd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Lv)))}function vu(d){function h(B){return Da(B,d)}if(0<Gd.length){Da(Gd[0],d);for(var b=1;b<Gd.length;b++){var S=Gd[b];S.blockedOn===d&&(S.blockedOn=null)}}for(Ra!==null&&Da(Ra,d),xo!==null&&Da(xo,d),Ia!==null&&Da(Ia,d),yu.forEach(h),xu.forEach(h),b=0;b<Ma.length;b++)S=Ma[b],S.blockedOn===d&&(S.blockedOn=null);for(;0<Ma.length&&(b=Ma[0],b.blockedOn===null);)bu(b),b.blockedOn===null&&Ma.shift()}var Zo=P.ReactCurrentBatchConfig,wl=!0;function dy(d,h,b,S){var B=Mn,W=Zo.transition;Zo.transition=null;try{Mn=1,fy(d,h,b,S)}finally{Mn=B,Zo.transition=W}}function dS(d,h,b,S){var B=Mn,W=Zo.transition;Zo.transition=null;try{Mn=4,fy(d,h,b,S)}finally{Mn=B,Zo.transition=W}}function fy(d,h,b,S){if(wl){var B=bo(d,h,b,S);if(B===null)Zv(d,h,S,Kd,b),cy(d,S);else if(Ov(B,d,h,b,S))S.stopPropagation();else if(cy(d,S),h&4&&-1<uS.indexOf(d)){for(;B!==null;){var W=gp(B);if(W!==null&&ay(W),W=bo(d,h,b,S),W===null&&Zv(d,h,S,Kd,b),W===B)break;B=W}B!==null&&S.stopPropagation()}else Zv(d,h,S,null,b)}}var Kd=null;function bo(d,h,b,S){if(Kd=null,d=Ze(S),d=wu(d),d!==null)if(h=Yt(d),h===null)d=null;else if(b=h.tag,b===13){if(d=Jt(h),d!==null)return d;d=null}else if(b===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null);return Kd=d,null}function ea(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zn()){case Nr:return 1;case Li:return 4;case ui:case di:return 16;case tr:return 536870912;default:return 16}default:return 16}}var ta=null,nr=null,Qr=null;function na(){if(Qr)return Qr;var d,h=nr,b=h.length,S,B="value"in ta?ta.value:ta.textContent,W=B.length;for(d=0;d<b&&h[d]===B[d];d++);var Z=b-d;for(S=1;S<=Z&&h[b-S]===B[W-S];S++);return Qr=B.slice(d,1<S?1-S:void 0)}function cc(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function ra(){return!0}function fS(){return!1}function Fi(d){function h(b,S,B,W,Z){this._reactName=b,this._targetInst=B,this.type=S,this.nativeEvent=W,this.target=Z,this.currentTarget=null;for(var ae in d)d.hasOwnProperty(ae)&&(b=d[ae],this[ae]=b?b(W):W[ae]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?ra:fS,this.isPropagationStopped=fS,this}return N(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),h}var Yd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fv=Fi(Yd),ip=N({},Yd,{view:0,detail:0}),G8=Fi(ip),zv,$v,op,hy=N({},ip,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uv,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==op&&(op&&d.type==="mousemove"?(zv=d.screenX-op.screenX,$v=d.screenY-op.screenY):$v=zv=0,op=d),zv)},movementY:function(d){return"movementY"in d?d.movementY:$v}}),hS=Fi(hy),K8=N({},hy,{dataTransfer:0}),Y8=Fi(K8),J8=N({},ip,{relatedTarget:0}),Bv=Fi(J8),X8=N({},Yd,{animationName:0,elapsedTime:0,pseudoElement:0}),Q8=Fi(X8),Z8=N({},Yd,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),eU=Fi(Z8),tU=N({},Yd,{data:0}),pS=Fi(tU),nU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iU(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=sU[d])?!!h[d]:!1}function Uv(){return iU}var oU=N({},ip,{key:function(d){if(d.key){var h=nU[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=cc(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?rU[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uv,charCode:function(d){return d.type==="keypress"?cc(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?cc(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),aU=Fi(oU),lU=N({},hy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mS=Fi(lU),cU=N({},ip,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uv}),uU=Fi(cU),dU=N({},Yd,{propertyName:0,elapsedTime:0,pseudoElement:0}),fU=Fi(dU),hU=N({},hy,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),pU=Fi(hU),mU=[9,13,27,32],Vv=l&&"CompositionEvent"in window,ap=null;l&&"documentMode"in document&&(ap=document.documentMode);var gU=l&&"TextEvent"in window&&!ap,gS=l&&(!Vv||ap&&8<ap&&11>=ap),yS=" ",xS=!1;function bS(d,h){switch(d){case"keyup":return mU.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vS(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Jd=!1;function yU(d,h){switch(d){case"compositionend":return vS(h);case"keypress":return h.which!==32?null:(xS=!0,yS);case"textInput":return d=h.data,d===yS&&xS?null:d;default:return null}}function xU(d,h){if(Jd)return d==="compositionend"||!Vv&&bS(d,h)?(d=na(),Qr=nr=ta=null,Jd=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return gS&&h.locale!=="ko"?null:h.data;default:return null}}var bU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wS(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!bU[d.type]:h==="textarea"}function kS(d,h,b,S){nn(S),h=xy(h,"onChange"),0<h.length&&(b=new Fv("onChange","change",null,b,S),d.push({event:b,listeners:h}))}var lp=null,cp=null;function vU(d){$S(d,0)}function py(d){var h=tf(d);if(ie(h))return d}function wU(d,h){if(d==="change")return h}var TS=!1;if(l){var qv;if(l){var Wv="oninput"in document;if(!Wv){var NS=document.createElement("div");NS.setAttribute("oninput","return;"),Wv=typeof NS.oninput=="function"}qv=Wv}else qv=!1;TS=qv&&(!document.documentMode||9<document.documentMode)}function jS(){lp&&(lp.detachEvent("onpropertychange",CS),cp=lp=null)}function CS(d){if(d.propertyName==="value"&&py(cp)){var h=[];kS(h,cp,d,Ze(d)),rt(vU,h)}}function kU(d,h,b){d==="focusin"?(jS(),lp=h,cp=b,lp.attachEvent("onpropertychange",CS)):d==="focusout"&&jS()}function TU(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return py(cp)}function NU(d,h){if(d==="click")return py(h)}function jU(d,h){if(d==="input"||d==="change")return py(h)}function CU(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var sa=typeof Object.is=="function"?Object.is:CU;function up(d,h){if(sa(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var b=Object.keys(d),S=Object.keys(h);if(b.length!==S.length)return!1;for(S=0;S<b.length;S++){var B=b[S];if(!c.call(h,B)||!sa(d[B],h[B]))return!1}return!0}function SS(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function ES(d,h){var b=SS(d);d=0;for(var S;b;){if(b.nodeType===3){if(S=d+b.textContent.length,d<=h&&S>=h)return{node:b,offset:h-d};d=S}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=SS(b)}}function _S(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?_S(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function AS(){for(var d=window,h=pe();h instanceof d.HTMLIFrameElement;){try{var b=typeof h.contentWindow.location.href=="string"}catch{b=!1}if(b)d=h.contentWindow;else break;h=pe(d.document)}return h}function Hv(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}function SU(d){var h=AS(),b=d.focusedElem,S=d.selectionRange;if(h!==b&&b&&b.ownerDocument&&_S(b.ownerDocument.documentElement,b)){if(S!==null&&Hv(b)){if(h=S.start,d=S.end,d===void 0&&(d=h),"selectionStart"in b)b.selectionStart=h,b.selectionEnd=Math.min(d,b.value.length);else if(d=(h=b.ownerDocument||document)&&h.defaultView||window,d.getSelection){d=d.getSelection();var B=b.textContent.length,W=Math.min(S.start,B);S=S.end===void 0?W:Math.min(S.end,B),!d.extend&&W>S&&(B=S,S=W,W=B),B=ES(b,W);var Z=ES(b,S);B&&Z&&(d.rangeCount!==1||d.anchorNode!==B.node||d.anchorOffset!==B.offset||d.focusNode!==Z.node||d.focusOffset!==Z.offset)&&(h=h.createRange(),h.setStart(B.node,B.offset),d.removeAllRanges(),W>S?(d.addRange(h),d.extend(Z.node,Z.offset)):(h.setEnd(Z.node,Z.offset),d.addRange(h)))}}for(h=[],d=b;d=d.parentNode;)d.nodeType===1&&h.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<h.length;b++)d=h[b],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var EU=l&&"documentMode"in document&&11>=document.documentMode,Xd=null,Gv=null,dp=null,Kv=!1;function PS(d,h,b){var S=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Kv||Xd==null||Xd!==pe(S)||(S=Xd,"selectionStart"in S&&Hv(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),dp&&up(dp,S)||(dp=S,S=xy(Gv,"onSelect"),0<S.length&&(h=new Fv("onSelect","select",null,h,b),d.push({event:h,listeners:S}),h.target=Xd)))}function my(d,h){var b={};return b[d.toLowerCase()]=h.toLowerCase(),b["Webkit"+d]="webkit"+h,b["Moz"+d]="moz"+h,b}var Qd={animationend:my("Animation","AnimationEnd"),animationiteration:my("Animation","AnimationIteration"),animationstart:my("Animation","AnimationStart"),transitionend:my("Transition","TransitionEnd")},Yv={},RS={};l&&(RS=document.createElement("div").style,"AnimationEvent"in window||(delete Qd.animationend.animation,delete Qd.animationiteration.animation,delete Qd.animationstart.animation),"TransitionEvent"in window||delete Qd.transitionend.transition);function gy(d){if(Yv[d])return Yv[d];if(!Qd[d])return d;var h=Qd[d],b;for(b in h)if(h.hasOwnProperty(b)&&b in RS)return Yv[d]=h[b];return d}var IS=gy("animationend"),MS=gy("animationiteration"),DS=gy("animationstart"),OS=gy("transitionend"),LS=new Map,FS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uc(d,h){LS.set(d,h),o(h,[d])}for(var Jv=0;Jv<FS.length;Jv++){var Xv=FS[Jv],_U=Xv.toLowerCase(),AU=Xv[0].toUpperCase()+Xv.slice(1);uc(_U,"on"+AU)}uc(IS,"onAnimationEnd"),uc(MS,"onAnimationIteration"),uc(DS,"onAnimationStart"),uc("dblclick","onDoubleClick"),uc("focusin","onFocus"),uc("focusout","onBlur"),uc(OS,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PU=new Set("cancel close invalid load scroll toggle".split(" ").concat(fp));function zS(d,h,b){var S=d.type||"unknown-event";d.currentTarget=b,Et(S,h,void 0,d),d.currentTarget=null}function $S(d,h){h=(h&4)!==0;for(var b=0;b<d.length;b++){var S=d[b],B=S.event;S=S.listeners;e:{var W=void 0;if(h)for(var Z=S.length-1;0<=Z;Z--){var ae=S[Z],de=ae.instance,ke=ae.currentTarget;if(ae=ae.listener,de!==W&&B.isPropagationStopped())break e;zS(B,ae,ke),W=de}else for(Z=0;Z<S.length;Z++){if(ae=S[Z],de=ae.instance,ke=ae.currentTarget,ae=ae.listener,de!==W&&B.isPropagationStopped())break e;zS(B,ae,ke),W=de}}}if(at)throw d=Rt,at=!1,Rt=null,d}function Jn(d,h){var b=h[iw];b===void 0&&(b=h[iw]=new Set);var S=d+"__bubble";b.has(S)||(BS(h,d,2,!1),b.add(S))}function Qv(d,h,b){var S=0;h&&(S|=4),BS(b,d,S,h)}var yy="_reactListening"+Math.random().toString(36).slice(2);function hp(d){if(!d[yy]){d[yy]=!0,r.forEach(function(b){b!=="selectionchange"&&(PU.has(b)||Qv(b,!1,d),Qv(b,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[yy]||(h[yy]=!0,Qv("selectionchange",!1,h))}}function BS(d,h,b,S){switch(ea(h)){case 1:var B=dy;break;case 4:B=dS;break;default:B=fy}b=B.bind(null,h,b,d),B=void 0,!Re||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(B=!0),S?B!==void 0?d.addEventListener(h,b,{capture:!0,passive:B}):d.addEventListener(h,b,!0):B!==void 0?d.addEventListener(h,b,{passive:B}):d.addEventListener(h,b,!1)}function Zv(d,h,b,S,B){var W=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var Z=S.tag;if(Z===3||Z===4){var ae=S.stateNode.containerInfo;if(ae===B||ae.nodeType===8&&ae.parentNode===B)break;if(Z===4)for(Z=S.return;Z!==null;){var de=Z.tag;if((de===3||de===4)&&(de=Z.stateNode.containerInfo,de===B||de.nodeType===8&&de.parentNode===B))return;Z=Z.return}for(;ae!==null;){if(Z=wu(ae),Z===null)return;if(de=Z.tag,de===5||de===6){S=W=Z;continue e}ae=ae.parentNode}}S=S.return}rt(function(){var ke=W,Oe=Ze(b),Fe=[];e:{var De=LS.get(d);if(De!==void 0){var ot=Fv,pt=d;switch(d){case"keypress":if(cc(b)===0)break e;case"keydown":case"keyup":ot=aU;break;case"focusin":pt="focus",ot=Bv;break;case"focusout":pt="blur",ot=Bv;break;case"beforeblur":case"afterblur":ot=Bv;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=hS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Y8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=uU;break;case IS:case MS:case DS:ot=Q8;break;case OS:ot=fU;break;case"scroll":ot=G8;break;case"wheel":ot=pU;break;case"copy":case"cut":case"paste":ot=eU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=mS}var gt=(h&4)!==0,jr=!gt&&d==="scroll",ye=gt?De!==null?De+"Capture":null:De;gt=[];for(var he=ke,xe;he!==null;){xe=he;var We=xe.stateNode;if(xe.tag===5&&We!==null&&(xe=We,ye!==null&&(We=st(he,ye),We!=null&&gt.push(pp(he,We,xe)))),jr)break;he=he.return}0<gt.length&&(De=new ot(De,pt,null,b,Oe),Fe.push({event:De,listeners:gt}))}}if((h&7)===0){e:{if(De=d==="mouseover"||d==="pointerover",ot=d==="mouseout"||d==="pointerout",De&&b!==bt&&(pt=b.relatedTarget||b.fromElement)&&(wu(pt)||pt[kl]))break e;if((ot||De)&&(De=Oe.window===Oe?Oe:(De=Oe.ownerDocument)?De.defaultView||De.parentWindow:window,ot?(pt=b.relatedTarget||b.toElement,ot=ke,pt=pt?wu(pt):null,pt!==null&&(jr=Yt(pt),pt!==jr||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(ot=null,pt=ke),ot!==pt)){if(gt=hS,We="onMouseLeave",ye="onMouseEnter",he="mouse",(d==="pointerout"||d==="pointerover")&&(gt=mS,We="onPointerLeave",ye="onPointerEnter",he="pointer"),jr=ot==null?De:tf(ot),xe=pt==null?De:tf(pt),De=new gt(We,he+"leave",ot,b,Oe),De.target=jr,De.relatedTarget=xe,We=null,wu(Oe)===ke&&(gt=new gt(ye,he+"enter",pt,b,Oe),gt.target=xe,gt.relatedTarget=jr,We=gt),jr=We,ot&&pt)t:{for(gt=ot,ye=pt,he=0,xe=gt;xe;xe=Zd(xe))he++;for(xe=0,We=ye;We;We=Zd(We))xe++;for(;0<he-xe;)gt=Zd(gt),he--;for(;0<xe-he;)ye=Zd(ye),xe--;for(;he--;){if(gt===ye||ye!==null&&gt===ye.alternate)break t;gt=Zd(gt),ye=Zd(ye)}gt=null}else gt=null;ot!==null&&US(Fe,De,ot,gt,!1),pt!==null&&jr!==null&&US(Fe,jr,pt,gt,!0)}}e:{if(De=ke?tf(ke):window,ot=De.nodeName&&De.nodeName.toLowerCase(),ot==="select"||ot==="input"&&De.type==="file")var wt=wU;else if(wS(De))if(TS)wt=jU;else{wt=TU;var $t=kU}else(ot=De.nodeName)&&ot.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(wt=NU);if(wt&&(wt=wt(d,ke))){kS(Fe,wt,b,Oe);break e}$t&&$t(d,De,ke),d==="focusout"&&($t=De._wrapperState)&&$t.controlled&&De.type==="number"&&Pe(De,"number",De.value)}switch($t=ke?tf(ke):window,d){case"focusin":(wS($t)||$t.contentEditable==="true")&&(Xd=$t,Gv=ke,dp=null);break;case"focusout":dp=Gv=Xd=null;break;case"mousedown":Kv=!0;break;case"contextmenu":case"mouseup":case"dragend":Kv=!1,PS(Fe,b,Oe);break;case"selectionchange":if(EU)break;case"keydown":case"keyup":PS(Fe,b,Oe)}var Bt;if(Vv)e:{switch(d){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else Jd?bS(d,b)&&(Ht="onCompositionEnd"):d==="keydown"&&b.keyCode===229&&(Ht="onCompositionStart");Ht&&(gS&&b.locale!=="ko"&&(Jd||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&Jd&&(Bt=na()):(ta=Oe,nr="value"in ta?ta.value:ta.textContent,Jd=!0)),$t=xy(ke,Ht),0<$t.length&&(Ht=new pS(Ht,d,null,b,Oe),Fe.push({event:Ht,listeners:$t}),Bt?Ht.data=Bt:(Bt=vS(b),Bt!==null&&(Ht.data=Bt)))),(Bt=gU?yU(d,b):xU(d,b))&&(ke=xy(ke,"onBeforeInput"),0<ke.length&&(Oe=new pS("onBeforeInput","beforeinput",null,b,Oe),Fe.push({event:Oe,listeners:ke}),Oe.data=Bt))}$S(Fe,h)})}function pp(d,h,b){return{instance:d,listener:h,currentTarget:b}}function xy(d,h){for(var b=h+"Capture",S=[];d!==null;){var B=d,W=B.stateNode;B.tag===5&&W!==null&&(B=W,W=st(d,b),W!=null&&S.unshift(pp(d,W,B)),W=st(d,h),W!=null&&S.push(pp(d,W,B))),d=d.return}return S}function Zd(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function US(d,h,b,S,B){for(var W=h._reactName,Z=[];b!==null&&b!==S;){var ae=b,de=ae.alternate,ke=ae.stateNode;if(de!==null&&de===S)break;ae.tag===5&&ke!==null&&(ae=ke,B?(de=st(b,W),de!=null&&Z.unshift(pp(b,de,ae))):B||(de=st(b,W),de!=null&&Z.push(pp(b,de,ae)))),b=b.return}Z.length!==0&&d.push({event:h,listeners:Z})}var RU=/\r\n?/g,IU=/\u0000|\uFFFD/g;function VS(d){return(typeof d=="string"?d:""+d).replace(RU,`
`).replace(IU,"")}function by(d,h,b){if(h=VS(h),VS(d)!==h&&b)throw Error(n(425))}function vy(){}var ew=null,tw=null;function nw(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var rw=typeof setTimeout=="function"?setTimeout:void 0,MU=typeof clearTimeout=="function"?clearTimeout:void 0,qS=typeof Promise=="function"?Promise:void 0,DU=typeof queueMicrotask=="function"?queueMicrotask:typeof qS<"u"?function(d){return qS.resolve(null).then(d).catch(OU)}:rw;function OU(d){setTimeout(function(){throw d})}function sw(d,h){var b=h,S=0;do{var B=b.nextSibling;if(d.removeChild(b),B&&B.nodeType===8)if(b=B.data,b==="/$"){if(S===0){d.removeChild(B),vu(h);return}S--}else b!=="$"&&b!=="$?"&&b!=="$!"||S++;b=B}while(b);vu(h)}function dc(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return d}function WS(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var b=d.data;if(b==="$"||b==="$!"||b==="$?"){if(h===0)return d;h--}else b==="/$"&&h++}d=d.previousSibling}return null}var ef=Math.random().toString(36).slice(2),Oa="__reactFiber$"+ef,mp="__reactProps$"+ef,kl="__reactContainer$"+ef,iw="__reactEvents$"+ef,LU="__reactListeners$"+ef,FU="__reactHandles$"+ef;function wu(d){var h=d[Oa];if(h)return h;for(var b=d.parentNode;b;){if(h=b[kl]||b[Oa]){if(b=h.alternate,h.child!==null||b!==null&&b.child!==null)for(d=WS(d);d!==null;){if(b=d[Oa])return b;d=WS(d)}return h}d=b,b=d.parentNode}return null}function gp(d){return d=d[Oa]||d[kl],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function tf(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function wy(d){return d[mp]||null}var ow=[],nf=-1;function fc(d){return{current:d}}function Xn(d){0>nf||(d.current=ow[nf],ow[nf]=null,nf--)}function qn(d,h){nf++,ow[nf]=d.current,d.current=h}var hc={},Ts=fc(hc),fi=fc(!1),ku=hc;function rf(d,h){var b=d.type.contextTypes;if(!b)return hc;var S=d.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===h)return S.__reactInternalMemoizedMaskedChildContext;var B={},W;for(W in b)B[W]=h[W];return S&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=h,d.__reactInternalMemoizedMaskedChildContext=B),B}function hi(d){return d=d.childContextTypes,d!=null}function ky(){Xn(fi),Xn(Ts)}function HS(d,h,b){if(Ts.current!==hc)throw Error(n(168));qn(Ts,h),qn(fi,b)}function GS(d,h,b){var S=d.stateNode;if(h=h.childContextTypes,typeof S.getChildContext!="function")return b;S=S.getChildContext();for(var B in S)if(!(B in h))throw Error(n(108,H(d)||"Unknown",B));return N({},b,S)}function Ty(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||hc,ku=Ts.current,qn(Ts,d),qn(fi,fi.current),!0}function KS(d,h,b){var S=d.stateNode;if(!S)throw Error(n(169));b?(d=GS(d,h,ku),S.__reactInternalMemoizedMergedChildContext=d,Xn(fi),Xn(Ts),qn(Ts,d)):Xn(fi),qn(fi,b)}var Tl=null,Ny=!1,aw=!1;function YS(d){Tl===null?Tl=[d]:Tl.push(d)}function zU(d){Ny=!0,YS(d)}function pc(){if(!aw&&Tl!==null){aw=!0;var d=0,h=Mn;try{var b=Tl;for(Mn=1;d<b.length;d++){var S=b[d];do S=S(!0);while(S!==null)}Tl=null,Ny=!1}catch(B){throw Tl!==null&&(Tl=Tl.slice(d+1)),Tn(Nr,pc),B}finally{Mn=h,aw=!1}}return null}var sf=[],of=0,jy=null,Cy=0,vo=[],wo=0,Tu=null,Nl=1,jl="";function Nu(d,h){sf[of++]=Cy,sf[of++]=jy,jy=d,Cy=h}function JS(d,h,b){vo[wo++]=Nl,vo[wo++]=jl,vo[wo++]=Tu,Tu=d;var S=Nl;d=jl;var B=32-vt(S)-1;S&=~(1<<B),b+=1;var W=32-vt(h)+B;if(30<W){var Z=B-B%5;W=(S&(1<<Z)-1).toString(32),S>>=Z,B-=Z,Nl=1<<32-vt(h)+B|b<<B|S,jl=W+d}else Nl=1<<W|b<<B|S,jl=d}function lw(d){d.return!==null&&(Nu(d,1),JS(d,1,0))}function cw(d){for(;d===jy;)jy=sf[--of],sf[of]=null,Cy=sf[--of],sf[of]=null;for(;d===Tu;)Tu=vo[--wo],vo[wo]=null,jl=vo[--wo],vo[wo]=null,Nl=vo[--wo],vo[wo]=null}var zi=null,$i=null,rr=!1,ia=null;function XS(d,h){var b=jo(5,null,null,0);b.elementType="DELETED",b.stateNode=h,b.return=d,h=d.deletions,h===null?(d.deletions=[b],d.flags|=16):h.push(b)}function QS(d,h){switch(d.tag){case 5:var b=d.type;return h=h.nodeType!==1||b.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(d.stateNode=h,zi=d,$i=dc(h.firstChild),!0):!1;case 6:return h=d.pendingProps===""||h.nodeType!==3?null:h,h!==null?(d.stateNode=h,zi=d,$i=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(b=Tu!==null?{id:Nl,overflow:jl}:null,d.memoizedState={dehydrated:h,treeContext:b,retryLane:1073741824},b=jo(18,null,null,0),b.stateNode=h,b.return=d,d.child=b,zi=d,$i=null,!0):!1;default:return!1}}function uw(d){return(d.mode&1)!==0&&(d.flags&128)===0}function dw(d){if(rr){var h=$i;if(h){var b=h;if(!QS(d,h)){if(uw(d))throw Error(n(418));h=dc(b.nextSibling);var S=zi;h&&QS(d,h)?XS(S,b):(d.flags=d.flags&-4097|2,rr=!1,zi=d)}}else{if(uw(d))throw Error(n(418));d.flags=d.flags&-4097|2,rr=!1,zi=d}}}function ZS(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;zi=d}function Sy(d){if(d!==zi)return!1;if(!rr)return ZS(d),rr=!0,!1;var h;if((h=d.tag!==3)&&!(h=d.tag!==5)&&(h=d.type,h=h!=="head"&&h!=="body"&&!nw(d.type,d.memoizedProps)),h&&(h=$i)){if(uw(d))throw eE(),Error(n(418));for(;h;)XS(d,h),h=dc(h.nextSibling)}if(ZS(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8){var b=d.data;if(b==="/$"){if(h===0){$i=dc(d.nextSibling);break e}h--}else b!=="$"&&b!=="$!"&&b!=="$?"||h++}d=d.nextSibling}$i=null}}else $i=zi?dc(d.stateNode.nextSibling):null;return!0}function eE(){for(var d=$i;d;)d=dc(d.nextSibling)}function af(){$i=zi=null,rr=!1}function fw(d){ia===null?ia=[d]:ia.push(d)}var $U=P.ReactCurrentBatchConfig;function yp(d,h,b){if(d=b.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(n(309));var S=b.stateNode}if(!S)throw Error(n(147,d));var B=S,W=""+d;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===W?h.ref:(h=function(Z){var ae=B.refs;Z===null?delete ae[W]:ae[W]=Z},h._stringRef=W,h)}if(typeof d!="string")throw Error(n(284));if(!b._owner)throw Error(n(290,d))}return d}function Ey(d,h){throw d=Object.prototype.toString.call(h),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d))}function tE(d){var h=d._init;return h(d._payload)}function nE(d){function h(ye,he){if(d){var xe=ye.deletions;xe===null?(ye.deletions=[he],ye.flags|=16):xe.push(he)}}function b(ye,he){if(!d)return null;for(;he!==null;)h(ye,he),he=he.sibling;return null}function S(ye,he){for(ye=new Map;he!==null;)he.key!==null?ye.set(he.key,he):ye.set(he.index,he),he=he.sibling;return ye}function B(ye,he){return ye=kc(ye,he),ye.index=0,ye.sibling=null,ye}function W(ye,he,xe){return ye.index=xe,d?(xe=ye.alternate,xe!==null?(xe=xe.index,xe<he?(ye.flags|=2,he):xe):(ye.flags|=2,he)):(ye.flags|=1048576,he)}function Z(ye){return d&&ye.alternate===null&&(ye.flags|=2),ye}function ae(ye,he,xe,We){return he===null||he.tag!==6?(he=r1(xe,ye.mode,We),he.return=ye,he):(he=B(he,xe),he.return=ye,he)}function de(ye,he,xe,We){var wt=xe.type;return wt===U?Oe(ye,he,xe.props.children,We,xe.key):he!==null&&(he.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===L&&tE(wt)===he.type)?(We=B(he,xe.props),We.ref=yp(ye,he,xe),We.return=ye,We):(We=Qy(xe.type,xe.key,xe.props,null,ye.mode,We),We.ref=yp(ye,he,xe),We.return=ye,We)}function ke(ye,he,xe,We){return he===null||he.tag!==4||he.stateNode.containerInfo!==xe.containerInfo||he.stateNode.implementation!==xe.implementation?(he=s1(xe,ye.mode,We),he.return=ye,he):(he=B(he,xe.children||[]),he.return=ye,he)}function Oe(ye,he,xe,We,wt){return he===null||he.tag!==7?(he=Ru(xe,ye.mode,We,wt),he.return=ye,he):(he=B(he,xe),he.return=ye,he)}function Fe(ye,he,xe){if(typeof he=="string"&&he!==""||typeof he=="number")return he=r1(""+he,ye.mode,xe),he.return=ye,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case D:return xe=Qy(he.type,he.key,he.props,null,ye.mode,xe),xe.ref=yp(ye,null,he),xe.return=ye,xe;case $:return he=s1(he,ye.mode,xe),he.return=ye,he;case L:var We=he._init;return Fe(ye,We(he._payload),xe)}if(et(he)||I(he))return he=Ru(he,ye.mode,xe,null),he.return=ye,he;Ey(ye,he)}return null}function De(ye,he,xe,We){var wt=he!==null?he.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return wt!==null?null:ae(ye,he,""+xe,We);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case D:return xe.key===wt?de(ye,he,xe,We):null;case $:return xe.key===wt?ke(ye,he,xe,We):null;case L:return wt=xe._init,De(ye,he,wt(xe._payload),We)}if(et(xe)||I(xe))return wt!==null?null:Oe(ye,he,xe,We,null);Ey(ye,xe)}return null}function ot(ye,he,xe,We,wt){if(typeof We=="string"&&We!==""||typeof We=="number")return ye=ye.get(xe)||null,ae(he,ye,""+We,wt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case D:return ye=ye.get(We.key===null?xe:We.key)||null,de(he,ye,We,wt);case $:return ye=ye.get(We.key===null?xe:We.key)||null,ke(he,ye,We,wt);case L:var $t=We._init;return ot(ye,he,xe,$t(We._payload),wt)}if(et(We)||I(We))return ye=ye.get(xe)||null,Oe(he,ye,We,wt,null);Ey(he,We)}return null}function pt(ye,he,xe,We){for(var wt=null,$t=null,Bt=he,Ht=he=0,ts=null;Bt!==null&&Ht<xe.length;Ht++){Bt.index>Ht?(ts=Bt,Bt=null):ts=Bt.sibling;var Rn=De(ye,Bt,xe[Ht],We);if(Rn===null){Bt===null&&(Bt=ts);break}d&&Bt&&Rn.alternate===null&&h(ye,Bt),he=W(Rn,he,Ht),$t===null?wt=Rn:$t.sibling=Rn,$t=Rn,Bt=ts}if(Ht===xe.length)return b(ye,Bt),rr&&Nu(ye,Ht),wt;if(Bt===null){for(;Ht<xe.length;Ht++)Bt=Fe(ye,xe[Ht],We),Bt!==null&&(he=W(Bt,he,Ht),$t===null?wt=Bt:$t.sibling=Bt,$t=Bt);return rr&&Nu(ye,Ht),wt}for(Bt=S(ye,Bt);Ht<xe.length;Ht++)ts=ot(Bt,ye,Ht,xe[Ht],We),ts!==null&&(d&&ts.alternate!==null&&Bt.delete(ts.key===null?Ht:ts.key),he=W(ts,he,Ht),$t===null?wt=ts:$t.sibling=ts,$t=ts);return d&&Bt.forEach(function(Tc){return h(ye,Tc)}),rr&&Nu(ye,Ht),wt}function gt(ye,he,xe,We){var wt=I(xe);if(typeof wt!="function")throw Error(n(150));if(xe=wt.call(xe),xe==null)throw Error(n(151));for(var $t=wt=null,Bt=he,Ht=he=0,ts=null,Rn=xe.next();Bt!==null&&!Rn.done;Ht++,Rn=xe.next()){Bt.index>Ht?(ts=Bt,Bt=null):ts=Bt.sibling;var Tc=De(ye,Bt,Rn.value,We);if(Tc===null){Bt===null&&(Bt=ts);break}d&&Bt&&Tc.alternate===null&&h(ye,Bt),he=W(Tc,he,Ht),$t===null?wt=Tc:$t.sibling=Tc,$t=Tc,Bt=ts}if(Rn.done)return b(ye,Bt),rr&&Nu(ye,Ht),wt;if(Bt===null){for(;!Rn.done;Ht++,Rn=xe.next())Rn=Fe(ye,Rn.value,We),Rn!==null&&(he=W(Rn,he,Ht),$t===null?wt=Rn:$t.sibling=Rn,$t=Rn);return rr&&Nu(ye,Ht),wt}for(Bt=S(ye,Bt);!Rn.done;Ht++,Rn=xe.next())Rn=ot(Bt,ye,Ht,Rn.value,We),Rn!==null&&(d&&Rn.alternate!==null&&Bt.delete(Rn.key===null?Ht:Rn.key),he=W(Rn,he,Ht),$t===null?wt=Rn:$t.sibling=Rn,$t=Rn);return d&&Bt.forEach(function(b7){return h(ye,b7)}),rr&&Nu(ye,Ht),wt}function jr(ye,he,xe,We){if(typeof xe=="object"&&xe!==null&&xe.type===U&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case D:e:{for(var wt=xe.key,$t=he;$t!==null;){if($t.key===wt){if(wt=xe.type,wt===U){if($t.tag===7){b(ye,$t.sibling),he=B($t,xe.props.children),he.return=ye,ye=he;break e}}else if($t.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===L&&tE(wt)===$t.type){b(ye,$t.sibling),he=B($t,xe.props),he.ref=yp(ye,$t,xe),he.return=ye,ye=he;break e}b(ye,$t);break}else h(ye,$t);$t=$t.sibling}xe.type===U?(he=Ru(xe.props.children,ye.mode,We,xe.key),he.return=ye,ye=he):(We=Qy(xe.type,xe.key,xe.props,null,ye.mode,We),We.ref=yp(ye,he,xe),We.return=ye,ye=We)}return Z(ye);case $:e:{for($t=xe.key;he!==null;){if(he.key===$t)if(he.tag===4&&he.stateNode.containerInfo===xe.containerInfo&&he.stateNode.implementation===xe.implementation){b(ye,he.sibling),he=B(he,xe.children||[]),he.return=ye,ye=he;break e}else{b(ye,he);break}else h(ye,he);he=he.sibling}he=s1(xe,ye.mode,We),he.return=ye,ye=he}return Z(ye);case L:return $t=xe._init,jr(ye,he,$t(xe._payload),We)}if(et(xe))return pt(ye,he,xe,We);if(I(xe))return gt(ye,he,xe,We);Ey(ye,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,he!==null&&he.tag===6?(b(ye,he.sibling),he=B(he,xe),he.return=ye,ye=he):(b(ye,he),he=r1(xe,ye.mode,We),he.return=ye,ye=he),Z(ye)):b(ye,he)}return jr}var lf=nE(!0),rE=nE(!1),_y=fc(null),Ay=null,cf=null,hw=null;function pw(){hw=cf=Ay=null}function mw(d){var h=_y.current;Xn(_y),d._currentValue=h}function gw(d,h,b){for(;d!==null;){var S=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),d===b)break;d=d.return}}function uf(d,h){Ay=d,hw=cf=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&h)!==0&&(pi=!0),d.firstContext=null)}function ko(d){var h=d._currentValue;if(hw!==d)if(d={context:d,memoizedValue:h,next:null},cf===null){if(Ay===null)throw Error(n(308));cf=d,Ay.dependencies={lanes:0,firstContext:d}}else cf=cf.next=d;return h}var ju=null;function yw(d){ju===null?ju=[d]:ju.push(d)}function sE(d,h,b,S){var B=h.interleaved;return B===null?(b.next=b,yw(h)):(b.next=B.next,B.next=b),h.interleaved=b,Cl(d,S)}function Cl(d,h){d.lanes|=h;var b=d.alternate;for(b!==null&&(b.lanes|=h),b=d,d=d.return;d!==null;)d.childLanes|=h,b=d.alternate,b!==null&&(b.childLanes|=h),b=d,d=d.return;return b.tag===3?b.stateNode:null}var mc=!1;function xw(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iE(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Sl(d,h){return{eventTime:d,lane:h,tag:0,payload:null,callback:null,next:null}}function gc(d,h,b){var S=d.updateQueue;if(S===null)return null;if(S=S.shared,(_n&2)!==0){var B=S.pending;return B===null?h.next=h:(h.next=B.next,B.next=h),S.pending=h,Cl(d,b)}return B=S.interleaved,B===null?(h.next=h,yw(S)):(h.next=B.next,B.next=h),S.interleaved=h,Cl(d,b)}function Py(d,h,b){if(h=h.updateQueue,h!==null&&(h=h.shared,(b&4194240)!==0)){var S=h.lanes;S&=d.pendingLanes,b|=S,h.lanes=b,np(d,b)}}function oE(d,h){var b=d.updateQueue,S=d.alternate;if(S!==null&&(S=S.updateQueue,b===S)){var B=null,W=null;if(b=b.firstBaseUpdate,b!==null){do{var Z={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};W===null?B=W=Z:W=W.next=Z,b=b.next}while(b!==null);W===null?B=W=h:W=W.next=h}else B=W=h;b={baseState:S.baseState,firstBaseUpdate:B,lastBaseUpdate:W,shared:S.shared,effects:S.effects},d.updateQueue=b;return}d=b.lastBaseUpdate,d===null?b.firstBaseUpdate=h:d.next=h,b.lastBaseUpdate=h}function Ry(d,h,b,S){var B=d.updateQueue;mc=!1;var W=B.firstBaseUpdate,Z=B.lastBaseUpdate,ae=B.shared.pending;if(ae!==null){B.shared.pending=null;var de=ae,ke=de.next;de.next=null,Z===null?W=ke:Z.next=ke,Z=de;var Oe=d.alternate;Oe!==null&&(Oe=Oe.updateQueue,ae=Oe.lastBaseUpdate,ae!==Z&&(ae===null?Oe.firstBaseUpdate=ke:ae.next=ke,Oe.lastBaseUpdate=de))}if(W!==null){var Fe=B.baseState;Z=0,Oe=ke=de=null,ae=W;do{var De=ae.lane,ot=ae.eventTime;if((S&De)===De){Oe!==null&&(Oe=Oe.next={eventTime:ot,lane:0,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null});e:{var pt=d,gt=ae;switch(De=h,ot=b,gt.tag){case 1:if(pt=gt.payload,typeof pt=="function"){Fe=pt.call(ot,Fe,De);break e}Fe=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=gt.payload,De=typeof pt=="function"?pt.call(ot,Fe,De):pt,De==null)break e;Fe=N({},Fe,De);break e;case 2:mc=!0}}ae.callback!==null&&ae.lane!==0&&(d.flags|=64,De=B.effects,De===null?B.effects=[ae]:De.push(ae))}else ot={eventTime:ot,lane:De,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},Oe===null?(ke=Oe=ot,de=Fe):Oe=Oe.next=ot,Z|=De;if(ae=ae.next,ae===null){if(ae=B.shared.pending,ae===null)break;De=ae,ae=De.next,De.next=null,B.lastBaseUpdate=De,B.shared.pending=null}}while(!0);if(Oe===null&&(de=Fe),B.baseState=de,B.firstBaseUpdate=ke,B.lastBaseUpdate=Oe,h=B.shared.interleaved,h!==null){B=h;do Z|=B.lane,B=B.next;while(B!==h)}else W===null&&(B.shared.lanes=0);Eu|=Z,d.lanes=Z,d.memoizedState=Fe}}function aE(d,h,b){if(d=h.effects,h.effects=null,d!==null)for(h=0;h<d.length;h++){var S=d[h],B=S.callback;if(B!==null){if(S.callback=null,S=b,typeof B!="function")throw Error(n(191,B));B.call(S)}}}var xp={},La=fc(xp),bp=fc(xp),vp=fc(xp);function Cu(d){if(d===xp)throw Error(n(174));return d}function bw(d,h){switch(qn(vp,h),qn(bp,d),qn(La,xp),d=h.nodeType,d){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:ue(null,"");break;default:d=d===8?h.parentNode:h,h=d.namespaceURI||null,d=d.tagName,h=ue(h,d)}Xn(La),qn(La,h)}function df(){Xn(La),Xn(bp),Xn(vp)}function lE(d){Cu(vp.current);var h=Cu(La.current),b=ue(h,d.type);h!==b&&(qn(bp,d),qn(La,b))}function vw(d){bp.current===d&&(Xn(La),Xn(bp))}var ur=fc(0);function Iy(d){for(var h=d;h!==null;){if(h.tag===13){var b=h.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var ww=[];function kw(){for(var d=0;d<ww.length;d++)ww[d]._workInProgressVersionPrimary=null;ww.length=0}var My=P.ReactCurrentDispatcher,Tw=P.ReactCurrentBatchConfig,Su=0,dr=null,qr=null,Zr=null,Dy=!1,wp=!1,kp=0,BU=0;function Ns(){throw Error(n(321))}function Nw(d,h){if(h===null)return!1;for(var b=0;b<h.length&&b<d.length;b++)if(!sa(d[b],h[b]))return!1;return!0}function jw(d,h,b,S,B,W){if(Su=W,dr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,My.current=d===null||d.memoizedState===null?WU:HU,d=b(S,B),wp){W=0;do{if(wp=!1,kp=0,25<=W)throw Error(n(301));W+=1,Zr=qr=null,h.updateQueue=null,My.current=GU,d=b(S,B)}while(wp)}if(My.current=Fy,h=qr!==null&&qr.next!==null,Su=0,Zr=qr=dr=null,Dy=!1,h)throw Error(n(300));return d}function Cw(){var d=kp!==0;return kp=0,d}function Fa(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zr===null?dr.memoizedState=Zr=d:Zr=Zr.next=d,Zr}function To(){if(qr===null){var d=dr.alternate;d=d!==null?d.memoizedState:null}else d=qr.next;var h=Zr===null?dr.memoizedState:Zr.next;if(h!==null)Zr=h,qr=d;else{if(d===null)throw Error(n(310));qr=d,d={memoizedState:qr.memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},Zr===null?dr.memoizedState=Zr=d:Zr=Zr.next=d}return Zr}function Tp(d,h){return typeof h=="function"?h(d):h}function Sw(d){var h=To(),b=h.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=d;var S=qr,B=S.baseQueue,W=b.pending;if(W!==null){if(B!==null){var Z=B.next;B.next=W.next,W.next=Z}S.baseQueue=B=W,b.pending=null}if(B!==null){W=B.next,S=S.baseState;var ae=Z=null,de=null,ke=W;do{var Oe=ke.lane;if((Su&Oe)===Oe)de!==null&&(de=de.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),S=ke.hasEagerState?ke.eagerState:d(S,ke.action);else{var Fe={lane:Oe,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};de===null?(ae=de=Fe,Z=S):de=de.next=Fe,dr.lanes|=Oe,Eu|=Oe}ke=ke.next}while(ke!==null&&ke!==W);de===null?Z=S:de.next=ae,sa(S,h.memoizedState)||(pi=!0),h.memoizedState=S,h.baseState=Z,h.baseQueue=de,b.lastRenderedState=S}if(d=b.interleaved,d!==null){B=d;do W=B.lane,dr.lanes|=W,Eu|=W,B=B.next;while(B!==d)}else B===null&&(b.lanes=0);return[h.memoizedState,b.dispatch]}function Ew(d){var h=To(),b=h.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=d;var S=b.dispatch,B=b.pending,W=h.memoizedState;if(B!==null){b.pending=null;var Z=B=B.next;do W=d(W,Z.action),Z=Z.next;while(Z!==B);sa(W,h.memoizedState)||(pi=!0),h.memoizedState=W,h.baseQueue===null&&(h.baseState=W),b.lastRenderedState=W}return[W,S]}function cE(){}function uE(d,h){var b=dr,S=To(),B=h(),W=!sa(S.memoizedState,B);if(W&&(S.memoizedState=B,pi=!0),S=S.queue,_w(hE.bind(null,b,S,d),[d]),S.getSnapshot!==h||W||Zr!==null&&Zr.memoizedState.tag&1){if(b.flags|=2048,Np(9,fE.bind(null,b,S,B,h),void 0,null),es===null)throw Error(n(349));(Su&30)!==0||dE(b,h,B)}return B}function dE(d,h,b){d.flags|=16384,d={getSnapshot:h,value:b},h=dr.updateQueue,h===null?(h={lastEffect:null,stores:null},dr.updateQueue=h,h.stores=[d]):(b=h.stores,b===null?h.stores=[d]:b.push(d))}function fE(d,h,b,S){h.value=b,h.getSnapshot=S,pE(h)&&mE(d)}function hE(d,h,b){return b(function(){pE(h)&&mE(d)})}function pE(d){var h=d.getSnapshot;d=d.value;try{var b=h();return!sa(d,b)}catch{return!0}}function mE(d){var h=Cl(d,1);h!==null&&ca(h,d,1,-1)}function gE(d){var h=Fa();return typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:d},h.queue=d,d=d.dispatch=qU.bind(null,dr,d),[h.memoizedState,d]}function Np(d,h,b,S){return d={tag:d,create:h,destroy:b,deps:S,next:null},h=dr.updateQueue,h===null?(h={lastEffect:null,stores:null},dr.updateQueue=h,h.lastEffect=d.next=d):(b=h.lastEffect,b===null?h.lastEffect=d.next=d:(S=b.next,b.next=d,d.next=S,h.lastEffect=d)),d}function yE(){return To().memoizedState}function Oy(d,h,b,S){var B=Fa();dr.flags|=d,B.memoizedState=Np(1|h,b,void 0,S===void 0?null:S)}function Ly(d,h,b,S){var B=To();S=S===void 0?null:S;var W=void 0;if(qr!==null){var Z=qr.memoizedState;if(W=Z.destroy,S!==null&&Nw(S,Z.deps)){B.memoizedState=Np(h,b,W,S);return}}dr.flags|=d,B.memoizedState=Np(1|h,b,W,S)}function xE(d,h){return Oy(8390656,8,d,h)}function _w(d,h){return Ly(2048,8,d,h)}function bE(d,h){return Ly(4,2,d,h)}function vE(d,h){return Ly(4,4,d,h)}function wE(d,h){if(typeof h=="function")return d=d(),h(d),function(){h(null)};if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function kE(d,h,b){return b=b!=null?b.concat([d]):null,Ly(4,4,wE.bind(null,h,d),b)}function Aw(){}function TE(d,h){var b=To();h=h===void 0?null:h;var S=b.memoizedState;return S!==null&&h!==null&&Nw(h,S[1])?S[0]:(b.memoizedState=[d,h],d)}function NE(d,h){var b=To();h=h===void 0?null:h;var S=b.memoizedState;return S!==null&&h!==null&&Nw(h,S[1])?S[0]:(d=d(),b.memoizedState=[d,h],d)}function jE(d,h,b){return(Su&21)===0?(d.baseState&&(d.baseState=!1,pi=!0),d.memoizedState=b):(sa(b,h)||(b=xl(),dr.lanes|=b,Eu|=b,d.baseState=!0),h)}function UU(d,h){var b=Mn;Mn=b!==0&&4>b?b:4,d(!0);var S=Tw.transition;Tw.transition={};try{d(!1),h()}finally{Mn=b,Tw.transition=S}}function CE(){return To().memoizedState}function VU(d,h,b){var S=vc(d);if(b={lane:S,action:b,hasEagerState:!1,eagerState:null,next:null},SE(d))EE(h,b);else if(b=sE(d,h,b,S),b!==null){var B=Ks();ca(b,d,S,B),_E(b,h,S)}}function qU(d,h,b){var S=vc(d),B={lane:S,action:b,hasEagerState:!1,eagerState:null,next:null};if(SE(d))EE(h,B);else{var W=d.alternate;if(d.lanes===0&&(W===null||W.lanes===0)&&(W=h.lastRenderedReducer,W!==null))try{var Z=h.lastRenderedState,ae=W(Z,b);if(B.hasEagerState=!0,B.eagerState=ae,sa(ae,Z)){var de=h.interleaved;de===null?(B.next=B,yw(h)):(B.next=de.next,de.next=B),h.interleaved=B;return}}catch{}finally{}b=sE(d,h,B,S),b!==null&&(B=Ks(),ca(b,d,S,B),_E(b,h,S))}}function SE(d){var h=d.alternate;return d===dr||h!==null&&h===dr}function EE(d,h){wp=Dy=!0;var b=d.pending;b===null?h.next=h:(h.next=b.next,b.next=h),d.pending=h}function _E(d,h,b){if((b&4194240)!==0){var S=h.lanes;S&=d.pendingLanes,b|=S,h.lanes=b,np(d,b)}}var Fy={readContext:ko,useCallback:Ns,useContext:Ns,useEffect:Ns,useImperativeHandle:Ns,useInsertionEffect:Ns,useLayoutEffect:Ns,useMemo:Ns,useReducer:Ns,useRef:Ns,useState:Ns,useDebugValue:Ns,useDeferredValue:Ns,useTransition:Ns,useMutableSource:Ns,useSyncExternalStore:Ns,useId:Ns,unstable_isNewReconciler:!1},WU={readContext:ko,useCallback:function(d,h){return Fa().memoizedState=[d,h===void 0?null:h],d},useContext:ko,useEffect:xE,useImperativeHandle:function(d,h,b){return b=b!=null?b.concat([d]):null,Oy(4194308,4,wE.bind(null,h,d),b)},useLayoutEffect:function(d,h){return Oy(4194308,4,d,h)},useInsertionEffect:function(d,h){return Oy(4,2,d,h)},useMemo:function(d,h){var b=Fa();return h=h===void 0?null:h,d=d(),b.memoizedState=[d,h],d},useReducer:function(d,h,b){var S=Fa();return h=b!==void 0?b(h):h,S.memoizedState=S.baseState=h,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:h},S.queue=d,d=d.dispatch=VU.bind(null,dr,d),[S.memoizedState,d]},useRef:function(d){var h=Fa();return d={current:d},h.memoizedState=d},useState:gE,useDebugValue:Aw,useDeferredValue:function(d){return Fa().memoizedState=d},useTransition:function(){var d=gE(!1),h=d[0];return d=UU.bind(null,d[1]),Fa().memoizedState=d,[h,d]},useMutableSource:function(){},useSyncExternalStore:function(d,h,b){var S=dr,B=Fa();if(rr){if(b===void 0)throw Error(n(407));b=b()}else{if(b=h(),es===null)throw Error(n(349));(Su&30)!==0||dE(S,h,b)}B.memoizedState=b;var W={value:b,getSnapshot:h};return B.queue=W,xE(hE.bind(null,S,W,d),[d]),S.flags|=2048,Np(9,fE.bind(null,S,W,b,h),void 0,null),b},useId:function(){var d=Fa(),h=es.identifierPrefix;if(rr){var b=jl,S=Nl;b=(S&~(1<<32-vt(S)-1)).toString(32)+b,h=":"+h+"R"+b,b=kp++,0<b&&(h+="H"+b.toString(32)),h+=":"}else b=BU++,h=":"+h+"r"+b.toString(32)+":";return d.memoizedState=h},unstable_isNewReconciler:!1},HU={readContext:ko,useCallback:TE,useContext:ko,useEffect:_w,useImperativeHandle:kE,useInsertionEffect:bE,useLayoutEffect:vE,useMemo:NE,useReducer:Sw,useRef:yE,useState:function(){return Sw(Tp)},useDebugValue:Aw,useDeferredValue:function(d){var h=To();return jE(h,qr.memoizedState,d)},useTransition:function(){var d=Sw(Tp)[0],h=To().memoizedState;return[d,h]},useMutableSource:cE,useSyncExternalStore:uE,useId:CE,unstable_isNewReconciler:!1},GU={readContext:ko,useCallback:TE,useContext:ko,useEffect:_w,useImperativeHandle:kE,useInsertionEffect:bE,useLayoutEffect:vE,useMemo:NE,useReducer:Ew,useRef:yE,useState:function(){return Ew(Tp)},useDebugValue:Aw,useDeferredValue:function(d){var h=To();return qr===null?h.memoizedState=d:jE(h,qr.memoizedState,d)},useTransition:function(){var d=Ew(Tp)[0],h=To().memoizedState;return[d,h]},useMutableSource:cE,useSyncExternalStore:uE,useId:CE,unstable_isNewReconciler:!1};function oa(d,h){if(d&&d.defaultProps){h=N({},h),d=d.defaultProps;for(var b in d)h[b]===void 0&&(h[b]=d[b]);return h}return h}function Pw(d,h,b,S){h=d.memoizedState,b=b(S,h),b=b==null?h:N({},h,b),d.memoizedState=b,d.lanes===0&&(d.updateQueue.baseState=b)}var zy={isMounted:function(d){return(d=d._reactInternals)?Yt(d)===d:!1},enqueueSetState:function(d,h,b){d=d._reactInternals;var S=Ks(),B=vc(d),W=Sl(S,B);W.payload=h,b!=null&&(W.callback=b),h=gc(d,W,B),h!==null&&(ca(h,d,B,S),Py(h,d,B))},enqueueReplaceState:function(d,h,b){d=d._reactInternals;var S=Ks(),B=vc(d),W=Sl(S,B);W.tag=1,W.payload=h,b!=null&&(W.callback=b),h=gc(d,W,B),h!==null&&(ca(h,d,B,S),Py(h,d,B))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var b=Ks(),S=vc(d),B=Sl(b,S);B.tag=2,h!=null&&(B.callback=h),h=gc(d,B,S),h!==null&&(ca(h,d,S,b),Py(h,d,S))}};function AE(d,h,b,S,B,W,Z){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(S,W,Z):h.prototype&&h.prototype.isPureReactComponent?!up(b,S)||!up(B,W):!0}function PE(d,h,b){var S=!1,B=hc,W=h.contextType;return typeof W=="object"&&W!==null?W=ko(W):(B=hi(h)?ku:Ts.current,S=h.contextTypes,W=(S=S!=null)?rf(d,B):hc),h=new h(b,W),d.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=zy,d.stateNode=h,h._reactInternals=d,S&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=B,d.__reactInternalMemoizedMaskedChildContext=W),h}function RE(d,h,b,S){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(b,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(b,S),h.state!==d&&zy.enqueueReplaceState(h,h.state,null)}function Rw(d,h,b,S){var B=d.stateNode;B.props=b,B.state=d.memoizedState,B.refs={},xw(d);var W=h.contextType;typeof W=="object"&&W!==null?B.context=ko(W):(W=hi(h)?ku:Ts.current,B.context=rf(d,W)),B.state=d.memoizedState,W=h.getDerivedStateFromProps,typeof W=="function"&&(Pw(d,h,W,b),B.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(h=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),h!==B.state&&zy.enqueueReplaceState(B,B.state,null),Ry(d,b,B,S),B.state=d.memoizedState),typeof B.componentDidMount=="function"&&(d.flags|=4194308)}function ff(d,h){try{var b="",S=h;do b+=O(S),S=S.return;while(S);var B=b}catch(W){B=`
Error generating stack: `+W.message+`
`+W.stack}return{value:d,source:h,stack:B,digest:null}}function Iw(d,h,b){return{value:d,source:null,stack:b??null,digest:h??null}}function Mw(d,h){try{console.error(h.value)}catch(b){setTimeout(function(){throw b})}}var KU=typeof WeakMap=="function"?WeakMap:Map;function IE(d,h,b){b=Sl(-1,b),b.tag=3,b.payload={element:null};var S=h.value;return b.callback=function(){Hy||(Hy=!0,Yw=S),Mw(d,h)},b}function ME(d,h,b){b=Sl(-1,b),b.tag=3;var S=d.type.getDerivedStateFromError;if(typeof S=="function"){var B=h.value;b.payload=function(){return S(B)},b.callback=function(){Mw(d,h)}}var W=d.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&(b.callback=function(){Mw(d,h),typeof S!="function"&&(xc===null?xc=new Set([this]):xc.add(this));var Z=h.stack;this.componentDidCatch(h.value,{componentStack:Z!==null?Z:""})}),b}function DE(d,h,b){var S=d.pingCache;if(S===null){S=d.pingCache=new KU;var B=new Set;S.set(h,B)}else B=S.get(h),B===void 0&&(B=new Set,S.set(h,B));B.has(b)||(B.add(b),d=l7.bind(null,d,h,b),h.then(d,d))}function OE(d){do{var h;if((h=d.tag===13)&&(h=d.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return d;d=d.return}while(d!==null);return null}function LE(d,h,b,S,B){return(d.mode&1)===0?(d===h?d.flags|=65536:(d.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(h=Sl(-1,1),h.tag=2,gc(b,h,1))),b.lanes|=1),d):(d.flags|=65536,d.lanes=B,d)}var YU=P.ReactCurrentOwner,pi=!1;function Gs(d,h,b,S){h.child=d===null?rE(h,null,b,S):lf(h,d.child,b,S)}function FE(d,h,b,S,B){b=b.render;var W=h.ref;return uf(h,B),S=jw(d,h,b,S,W,B),b=Cw(),d!==null&&!pi?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~B,El(d,h,B)):(rr&&b&&lw(h),h.flags|=1,Gs(d,h,S,B),h.child)}function zE(d,h,b,S,B){if(d===null){var W=b.type;return typeof W=="function"&&!n1(W)&&W.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(h.tag=15,h.type=W,$E(d,h,W,S,B)):(d=Qy(b.type,null,S,h,h.mode,B),d.ref=h.ref,d.return=h,h.child=d)}if(W=d.child,(d.lanes&B)===0){var Z=W.memoizedProps;if(b=b.compare,b=b!==null?b:up,b(Z,S)&&d.ref===h.ref)return El(d,h,B)}return h.flags|=1,d=kc(W,S),d.ref=h.ref,d.return=h,h.child=d}function $E(d,h,b,S,B){if(d!==null){var W=d.memoizedProps;if(up(W,S)&&d.ref===h.ref)if(pi=!1,h.pendingProps=S=W,(d.lanes&B)!==0)(d.flags&131072)!==0&&(pi=!0);else return h.lanes=d.lanes,El(d,h,B)}return Dw(d,h,b,S,B)}function BE(d,h,b){var S=h.pendingProps,B=S.children,W=d!==null?d.memoizedState:null;if(S.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},qn(pf,Bi),Bi|=b;else{if((b&1073741824)===0)return d=W!==null?W.baseLanes|b:b,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:d,cachePool:null,transitions:null},h.updateQueue=null,qn(pf,Bi),Bi|=d,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=W!==null?W.baseLanes:b,qn(pf,Bi),Bi|=S}else W!==null?(S=W.baseLanes|b,h.memoizedState=null):S=b,qn(pf,Bi),Bi|=S;return Gs(d,h,B,b),h.child}function UE(d,h){var b=h.ref;(d===null&&b!==null||d!==null&&d.ref!==b)&&(h.flags|=512,h.flags|=2097152)}function Dw(d,h,b,S,B){var W=hi(b)?ku:Ts.current;return W=rf(h,W),uf(h,B),b=jw(d,h,b,S,W,B),S=Cw(),d!==null&&!pi?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~B,El(d,h,B)):(rr&&S&&lw(h),h.flags|=1,Gs(d,h,b,B),h.child)}function VE(d,h,b,S,B){if(hi(b)){var W=!0;Ty(h)}else W=!1;if(uf(h,B),h.stateNode===null)By(d,h),PE(h,b,S),Rw(h,b,S,B),S=!0;else if(d===null){var Z=h.stateNode,ae=h.memoizedProps;Z.props=ae;var de=Z.context,ke=b.contextType;typeof ke=="object"&&ke!==null?ke=ko(ke):(ke=hi(b)?ku:Ts.current,ke=rf(h,ke));var Oe=b.getDerivedStateFromProps,Fe=typeof Oe=="function"||typeof Z.getSnapshotBeforeUpdate=="function";Fe||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ae!==S||de!==ke)&&RE(h,Z,S,ke),mc=!1;var De=h.memoizedState;Z.state=De,Ry(h,S,Z,B),de=h.memoizedState,ae!==S||De!==de||fi.current||mc?(typeof Oe=="function"&&(Pw(h,b,Oe,S),de=h.memoizedState),(ae=mc||AE(h,b,ae,S,De,de,ke))?(Fe||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(h.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=de),Z.props=S,Z.state=de,Z.context=ke,S=ae):(typeof Z.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{Z=h.stateNode,iE(d,h),ae=h.memoizedProps,ke=h.type===h.elementType?ae:oa(h.type,ae),Z.props=ke,Fe=h.pendingProps,De=Z.context,de=b.contextType,typeof de=="object"&&de!==null?de=ko(de):(de=hi(b)?ku:Ts.current,de=rf(h,de));var ot=b.getDerivedStateFromProps;(Oe=typeof ot=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ae!==Fe||De!==de)&&RE(h,Z,S,de),mc=!1,De=h.memoizedState,Z.state=De,Ry(h,S,Z,B);var pt=h.memoizedState;ae!==Fe||De!==pt||fi.current||mc?(typeof ot=="function"&&(Pw(h,b,ot,S),pt=h.memoizedState),(ke=mc||AE(h,b,ke,S,De,pt,de)||!1)?(Oe||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(S,pt,de),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(S,pt,de)),typeof Z.componentDidUpdate=="function"&&(h.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof Z.componentDidUpdate!="function"||ae===d.memoizedProps&&De===d.memoizedState||(h.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ae===d.memoizedProps&&De===d.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=pt),Z.props=S,Z.state=pt,Z.context=de,S=ke):(typeof Z.componentDidUpdate!="function"||ae===d.memoizedProps&&De===d.memoizedState||(h.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ae===d.memoizedProps&&De===d.memoizedState||(h.flags|=1024),S=!1)}return Ow(d,h,b,S,W,B)}function Ow(d,h,b,S,B,W){UE(d,h);var Z=(h.flags&128)!==0;if(!S&&!Z)return B&&KS(h,b,!1),El(d,h,W);S=h.stateNode,YU.current=h;var ae=Z&&typeof b.getDerivedStateFromError!="function"?null:S.render();return h.flags|=1,d!==null&&Z?(h.child=lf(h,d.child,null,W),h.child=lf(h,null,ae,W)):Gs(d,h,ae,W),h.memoizedState=S.state,B&&KS(h,b,!0),h.child}function qE(d){var h=d.stateNode;h.pendingContext?HS(d,h.pendingContext,h.pendingContext!==h.context):h.context&&HS(d,h.context,!1),bw(d,h.containerInfo)}function WE(d,h,b,S,B){return af(),fw(B),h.flags|=256,Gs(d,h,b,S),h.child}var Lw={dehydrated:null,treeContext:null,retryLane:0};function Fw(d){return{baseLanes:d,cachePool:null,transitions:null}}function HE(d,h,b){var S=h.pendingProps,B=ur.current,W=!1,Z=(h.flags&128)!==0,ae;if((ae=Z)||(ae=d!==null&&d.memoizedState===null?!1:(B&2)!==0),ae?(W=!0,h.flags&=-129):(d===null||d.memoizedState!==null)&&(B|=1),qn(ur,B&1),d===null)return dw(h),d=h.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((h.mode&1)===0?h.lanes=1:d.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(Z=S.children,d=S.fallback,W?(S=h.mode,W=h.child,Z={mode:"hidden",children:Z},(S&1)===0&&W!==null?(W.childLanes=0,W.pendingProps=Z):W=Zy(Z,S,0,null),d=Ru(d,S,b,null),W.return=h,d.return=h,W.sibling=d,h.child=W,h.child.memoizedState=Fw(b),h.memoizedState=Lw,d):zw(h,Z));if(B=d.memoizedState,B!==null&&(ae=B.dehydrated,ae!==null))return JU(d,h,Z,S,ae,B,b);if(W){W=S.fallback,Z=h.mode,B=d.child,ae=B.sibling;var de={mode:"hidden",children:S.children};return(Z&1)===0&&h.child!==B?(S=h.child,S.childLanes=0,S.pendingProps=de,h.deletions=null):(S=kc(B,de),S.subtreeFlags=B.subtreeFlags&14680064),ae!==null?W=kc(ae,W):(W=Ru(W,Z,b,null),W.flags|=2),W.return=h,S.return=h,S.sibling=W,h.child=S,S=W,W=h.child,Z=d.child.memoizedState,Z=Z===null?Fw(b):{baseLanes:Z.baseLanes|b,cachePool:null,transitions:Z.transitions},W.memoizedState=Z,W.childLanes=d.childLanes&~b,h.memoizedState=Lw,S}return W=d.child,d=W.sibling,S=kc(W,{mode:"visible",children:S.children}),(h.mode&1)===0&&(S.lanes=b),S.return=h,S.sibling=null,d!==null&&(b=h.deletions,b===null?(h.deletions=[d],h.flags|=16):b.push(d)),h.child=S,h.memoizedState=null,S}function zw(d,h){return h=Zy({mode:"visible",children:h},d.mode,0,null),h.return=d,d.child=h}function $y(d,h,b,S){return S!==null&&fw(S),lf(h,d.child,null,b),d=zw(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function JU(d,h,b,S,B,W,Z){if(b)return h.flags&256?(h.flags&=-257,S=Iw(Error(n(422))),$y(d,h,Z,S)):h.memoizedState!==null?(h.child=d.child,h.flags|=128,null):(W=S.fallback,B=h.mode,S=Zy({mode:"visible",children:S.children},B,0,null),W=Ru(W,B,Z,null),W.flags|=2,S.return=h,W.return=h,S.sibling=W,h.child=S,(h.mode&1)!==0&&lf(h,d.child,null,Z),h.child.memoizedState=Fw(Z),h.memoizedState=Lw,W);if((h.mode&1)===0)return $y(d,h,Z,null);if(B.data==="$!"){if(S=B.nextSibling&&B.nextSibling.dataset,S)var ae=S.dgst;return S=ae,W=Error(n(419)),S=Iw(W,S,void 0),$y(d,h,Z,S)}if(ae=(Z&d.childLanes)!==0,pi||ae){if(S=es,S!==null){switch(Z&-Z){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=(B&(S.suspendedLanes|Z))!==0?0:B,B!==0&&B!==W.retryLane&&(W.retryLane=B,Cl(d,B),ca(S,d,B,-1))}return t1(),S=Iw(Error(n(421))),$y(d,h,Z,S)}return B.data==="$?"?(h.flags|=128,h.child=d.child,h=c7.bind(null,d),B._reactRetry=h,null):(d=W.treeContext,$i=dc(B.nextSibling),zi=h,rr=!0,ia=null,d!==null&&(vo[wo++]=Nl,vo[wo++]=jl,vo[wo++]=Tu,Nl=d.id,jl=d.overflow,Tu=h),h=zw(h,S.children),h.flags|=4096,h)}function GE(d,h,b){d.lanes|=h;var S=d.alternate;S!==null&&(S.lanes|=h),gw(d.return,h,b)}function $w(d,h,b,S,B){var W=d.memoizedState;W===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:b,tailMode:B}:(W.isBackwards=h,W.rendering=null,W.renderingStartTime=0,W.last=S,W.tail=b,W.tailMode=B)}function KE(d,h,b){var S=h.pendingProps,B=S.revealOrder,W=S.tail;if(Gs(d,h,S.children,b),S=ur.current,(S&2)!==0)S=S&1|2,h.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&GE(d,b,h);else if(d.tag===19)GE(d,b,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}S&=1}if(qn(ur,S),(h.mode&1)===0)h.memoizedState=null;else switch(B){case"forwards":for(b=h.child,B=null;b!==null;)d=b.alternate,d!==null&&Iy(d)===null&&(B=b),b=b.sibling;b=B,b===null?(B=h.child,h.child=null):(B=b.sibling,b.sibling=null),$w(h,!1,B,b,W);break;case"backwards":for(b=null,B=h.child,h.child=null;B!==null;){if(d=B.alternate,d!==null&&Iy(d)===null){h.child=B;break}d=B.sibling,B.sibling=b,b=B,B=d}$w(h,!0,b,null,W);break;case"together":$w(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function By(d,h){(h.mode&1)===0&&d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2)}function El(d,h,b){if(d!==null&&(h.dependencies=d.dependencies),Eu|=h.lanes,(b&h.childLanes)===0)return null;if(d!==null&&h.child!==d.child)throw Error(n(153));if(h.child!==null){for(d=h.child,b=kc(d,d.pendingProps),h.child=b,b.return=h;d.sibling!==null;)d=d.sibling,b=b.sibling=kc(d,d.pendingProps),b.return=h;b.sibling=null}return h.child}function XU(d,h,b){switch(h.tag){case 3:qE(h),af();break;case 5:lE(h);break;case 1:hi(h.type)&&Ty(h);break;case 4:bw(h,h.stateNode.containerInfo);break;case 10:var S=h.type._context,B=h.memoizedProps.value;qn(_y,S._currentValue),S._currentValue=B;break;case 13:if(S=h.memoizedState,S!==null)return S.dehydrated!==null?(qn(ur,ur.current&1),h.flags|=128,null):(b&h.child.childLanes)!==0?HE(d,h,b):(qn(ur,ur.current&1),d=El(d,h,b),d!==null?d.sibling:null);qn(ur,ur.current&1);break;case 19:if(S=(b&h.childLanes)!==0,(d.flags&128)!==0){if(S)return KE(d,h,b);h.flags|=128}if(B=h.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),qn(ur,ur.current),S)break;return null;case 22:case 23:return h.lanes=0,BE(d,h,b)}return El(d,h,b)}var YE,Bw,JE,XE;YE=function(d,h){for(var b=h.child;b!==null;){if(b.tag===5||b.tag===6)d.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Bw=function(){},JE=function(d,h,b,S){var B=d.memoizedProps;if(B!==S){d=h.stateNode,Cu(La.current);var W=null;switch(b){case"input":B=le(d,B),S=le(d,S),W=[];break;case"select":B=N({},B,{value:void 0}),S=N({},S,{value:void 0}),W=[];break;case"textarea":B=Se(d,B),S=Se(d,S),W=[];break;default:typeof B.onClick!="function"&&typeof S.onClick=="function"&&(d.onclick=vy)}Ye(b,S);var Z;b=null;for(ke in B)if(!S.hasOwnProperty(ke)&&B.hasOwnProperty(ke)&&B[ke]!=null)if(ke==="style"){var ae=B[ke];for(Z in ae)ae.hasOwnProperty(Z)&&(b||(b={}),b[Z]="")}else ke!=="dangerouslySetInnerHTML"&&ke!=="children"&&ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&ke!=="autoFocus"&&(s.hasOwnProperty(ke)?W||(W=[]):(W=W||[]).push(ke,null));for(ke in S){var de=S[ke];if(ae=B!=null?B[ke]:void 0,S.hasOwnProperty(ke)&&de!==ae&&(de!=null||ae!=null))if(ke==="style")if(ae){for(Z in ae)!ae.hasOwnProperty(Z)||de&&de.hasOwnProperty(Z)||(b||(b={}),b[Z]="");for(Z in de)de.hasOwnProperty(Z)&&ae[Z]!==de[Z]&&(b||(b={}),b[Z]=de[Z])}else b||(W||(W=[]),W.push(ke,b)),b=de;else ke==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,ae=ae?ae.__html:void 0,de!=null&&ae!==de&&(W=W||[]).push(ke,de)):ke==="children"?typeof de!="string"&&typeof de!="number"||(W=W||[]).push(ke,""+de):ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&(s.hasOwnProperty(ke)?(de!=null&&ke==="onScroll"&&Jn("scroll",d),W||ae===de||(W=[])):(W=W||[]).push(ke,de))}b&&(W=W||[]).push("style",b);var ke=W;(h.updateQueue=ke)&&(h.flags|=4)}},XE=function(d,h,b,S){b!==S&&(h.flags|=4)};function jp(d,h){if(!rr)switch(d.tailMode){case"hidden":h=d.tail;for(var b=null;h!==null;)h.alternate!==null&&(b=h),h=h.sibling;b===null?d.tail=null:b.sibling=null;break;case"collapsed":b=d.tail;for(var S=null;b!==null;)b.alternate!==null&&(S=b),b=b.sibling;S===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:S.sibling=null}}function js(d){var h=d.alternate!==null&&d.alternate.child===d.child,b=0,S=0;if(h)for(var B=d.child;B!==null;)b|=B.lanes|B.childLanes,S|=B.subtreeFlags&14680064,S|=B.flags&14680064,B.return=d,B=B.sibling;else for(B=d.child;B!==null;)b|=B.lanes|B.childLanes,S|=B.subtreeFlags,S|=B.flags,B.return=d,B=B.sibling;return d.subtreeFlags|=S,d.childLanes=b,h}function QU(d,h,b){var S=h.pendingProps;switch(cw(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return js(h),null;case 1:return hi(h.type)&&ky(),js(h),null;case 3:return S=h.stateNode,df(),Xn(fi),Xn(Ts),kw(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(d===null||d.child===null)&&(Sy(h)?h.flags|=4:d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ia!==null&&(Qw(ia),ia=null))),Bw(d,h),js(h),null;case 5:vw(h);var B=Cu(vp.current);if(b=h.type,d!==null&&h.stateNode!=null)JE(d,h,b,S,B),d.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!S){if(h.stateNode===null)throw Error(n(166));return js(h),null}if(d=Cu(La.current),Sy(h)){S=h.stateNode,b=h.type;var W=h.memoizedProps;switch(S[Oa]=h,S[mp]=W,d=(h.mode&1)!==0,b){case"dialog":Jn("cancel",S),Jn("close",S);break;case"iframe":case"object":case"embed":Jn("load",S);break;case"video":case"audio":for(B=0;B<fp.length;B++)Jn(fp[B],S);break;case"source":Jn("error",S);break;case"img":case"image":case"link":Jn("error",S),Jn("load",S);break;case"details":Jn("toggle",S);break;case"input":me(S,W),Jn("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!W.multiple},Jn("invalid",S);break;case"textarea":Te(S,W),Jn("invalid",S)}Ye(b,W),B=null;for(var Z in W)if(W.hasOwnProperty(Z)){var ae=W[Z];Z==="children"?typeof ae=="string"?S.textContent!==ae&&(W.suppressHydrationWarning!==!0&&by(S.textContent,ae,d),B=["children",ae]):typeof ae=="number"&&S.textContent!==""+ae&&(W.suppressHydrationWarning!==!0&&by(S.textContent,ae,d),B=["children",""+ae]):s.hasOwnProperty(Z)&&ae!=null&&Z==="onScroll"&&Jn("scroll",S)}switch(b){case"input":se(S),Ne(S,W,!0);break;case"textarea":se(S),dt(S);break;case"select":case"option":break;default:typeof W.onClick=="function"&&(S.onclick=vy)}S=B,h.updateQueue=S,S!==null&&(h.flags|=4)}else{Z=B.nodeType===9?B:B.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=oe(b)),d==="http://www.w3.org/1999/xhtml"?b==="script"?(d=Z.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof S.is=="string"?d=Z.createElement(b,{is:S.is}):(d=Z.createElement(b),b==="select"&&(Z=d,S.multiple?Z.multiple=!0:S.size&&(Z.size=S.size))):d=Z.createElementNS(d,b),d[Oa]=h,d[mp]=S,YE(d,h,!1,!1),h.stateNode=d;e:{switch(Z=St(b,S),b){case"dialog":Jn("cancel",d),Jn("close",d),B=S;break;case"iframe":case"object":case"embed":Jn("load",d),B=S;break;case"video":case"audio":for(B=0;B<fp.length;B++)Jn(fp[B],d);B=S;break;case"source":Jn("error",d),B=S;break;case"img":case"image":case"link":Jn("error",d),Jn("load",d),B=S;break;case"details":Jn("toggle",d),B=S;break;case"input":me(d,S),B=le(d,S),Jn("invalid",d);break;case"option":B=S;break;case"select":d._wrapperState={wasMultiple:!!S.multiple},B=N({},S,{value:void 0}),Jn("invalid",d);break;case"textarea":Te(d,S),B=Se(d,S),Jn("invalid",d);break;default:B=S}Ye(b,B),ae=B;for(W in ae)if(ae.hasOwnProperty(W)){var de=ae[W];W==="style"?ct(d,de):W==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,de!=null&&be(d,de)):W==="children"?typeof de=="string"?(b!=="textarea"||de!=="")&&ve(d,de):typeof de=="number"&&ve(d,""+de):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(s.hasOwnProperty(W)?de!=null&&W==="onScroll"&&Jn("scroll",d):de!=null&&v(d,W,de,Z))}switch(b){case"input":se(d),Ne(d,S,!1);break;case"textarea":se(d),dt(d);break;case"option":S.value!=null&&d.setAttribute("value",""+J(S.value));break;case"select":d.multiple=!!S.multiple,W=S.value,W!=null?Le(d,!!S.multiple,W,!1):S.defaultValue!=null&&Le(d,!!S.multiple,S.defaultValue,!0);break;default:typeof B.onClick=="function"&&(d.onclick=vy)}switch(b){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return js(h),null;case 6:if(d&&h.stateNode!=null)XE(d,h,d.memoizedProps,S);else{if(typeof S!="string"&&h.stateNode===null)throw Error(n(166));if(b=Cu(vp.current),Cu(La.current),Sy(h)){if(S=h.stateNode,b=h.memoizedProps,S[Oa]=h,(W=S.nodeValue!==b)&&(d=zi,d!==null))switch(d.tag){case 3:by(S.nodeValue,b,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&by(S.nodeValue,b,(d.mode&1)!==0)}W&&(h.flags|=4)}else S=(b.nodeType===9?b:b.ownerDocument).createTextNode(S),S[Oa]=h,h.stateNode=S}return js(h),null;case 13:if(Xn(ur),S=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(rr&&$i!==null&&(h.mode&1)!==0&&(h.flags&128)===0)eE(),af(),h.flags|=98560,W=!1;else if(W=Sy(h),S!==null&&S.dehydrated!==null){if(d===null){if(!W)throw Error(n(318));if(W=h.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(n(317));W[Oa]=h}else af(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;js(h),W=!1}else ia!==null&&(Qw(ia),ia=null),W=!0;if(!W)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=b,h):(S=S!==null,S!==(d!==null&&d.memoizedState!==null)&&S&&(h.child.flags|=8192,(h.mode&1)!==0&&(d===null||(ur.current&1)!==0?Wr===0&&(Wr=3):t1())),h.updateQueue!==null&&(h.flags|=4),js(h),null);case 4:return df(),Bw(d,h),d===null&&hp(h.stateNode.containerInfo),js(h),null;case 10:return mw(h.type._context),js(h),null;case 17:return hi(h.type)&&ky(),js(h),null;case 19:if(Xn(ur),W=h.memoizedState,W===null)return js(h),null;if(S=(h.flags&128)!==0,Z=W.rendering,Z===null)if(S)jp(W,!1);else{if(Wr!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(Z=Iy(d),Z!==null){for(h.flags|=128,jp(W,!1),S=Z.updateQueue,S!==null&&(h.updateQueue=S,h.flags|=4),h.subtreeFlags=0,S=b,b=h.child;b!==null;)W=b,d=S,W.flags&=14680066,Z=W.alternate,Z===null?(W.childLanes=0,W.lanes=d,W.child=null,W.subtreeFlags=0,W.memoizedProps=null,W.memoizedState=null,W.updateQueue=null,W.dependencies=null,W.stateNode=null):(W.childLanes=Z.childLanes,W.lanes=Z.lanes,W.child=Z.child,W.subtreeFlags=0,W.deletions=null,W.memoizedProps=Z.memoizedProps,W.memoizedState=Z.memoizedState,W.updateQueue=Z.updateQueue,W.type=Z.type,d=Z.dependencies,W.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),b=b.sibling;return qn(ur,ur.current&1|2),h.child}d=d.sibling}W.tail!==null&&Xt()>mf&&(h.flags|=128,S=!0,jp(W,!1),h.lanes=4194304)}else{if(!S)if(d=Iy(Z),d!==null){if(h.flags|=128,S=!0,b=d.updateQueue,b!==null&&(h.updateQueue=b,h.flags|=4),jp(W,!0),W.tail===null&&W.tailMode==="hidden"&&!Z.alternate&&!rr)return js(h),null}else 2*Xt()-W.renderingStartTime>mf&&b!==1073741824&&(h.flags|=128,S=!0,jp(W,!1),h.lanes=4194304);W.isBackwards?(Z.sibling=h.child,h.child=Z):(b=W.last,b!==null?b.sibling=Z:h.child=Z,W.last=Z)}return W.tail!==null?(h=W.tail,W.rendering=h,W.tail=h.sibling,W.renderingStartTime=Xt(),h.sibling=null,b=ur.current,qn(ur,S?b&1|2:b&1),h):(js(h),null);case 22:case 23:return e1(),S=h.memoizedState!==null,d!==null&&d.memoizedState!==null!==S&&(h.flags|=8192),S&&(h.mode&1)!==0?(Bi&1073741824)!==0&&(js(h),h.subtreeFlags&6&&(h.flags|=8192)):js(h),null;case 24:return null;case 25:return null}throw Error(n(156,h.tag))}function ZU(d,h){switch(cw(h),h.tag){case 1:return hi(h.type)&&ky(),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return df(),Xn(fi),Xn(Ts),kw(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 5:return vw(h),null;case 13:if(Xn(ur),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(n(340));af()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return Xn(ur),null;case 4:return df(),null;case 10:return mw(h.type._context),null;case 22:case 23:return e1(),null;case 24:return null;default:return null}}var Uy=!1,Cs=!1,e7=typeof WeakSet=="function"?WeakSet:Set,ft=null;function hf(d,h){var b=d.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(S){br(d,h,S)}else b.current=null}function Uw(d,h,b){try{b()}catch(S){br(d,h,S)}}var QE=!1;function t7(d,h){if(ew=wl,d=AS(),Hv(d)){if("selectionStart"in d)var b={start:d.selectionStart,end:d.selectionEnd};else e:{b=(b=d.ownerDocument)&&b.defaultView||window;var S=b.getSelection&&b.getSelection();if(S&&S.rangeCount!==0){b=S.anchorNode;var B=S.anchorOffset,W=S.focusNode;S=S.focusOffset;try{b.nodeType,W.nodeType}catch{b=null;break e}var Z=0,ae=-1,de=-1,ke=0,Oe=0,Fe=d,De=null;t:for(;;){for(var ot;Fe!==b||B!==0&&Fe.nodeType!==3||(ae=Z+B),Fe!==W||S!==0&&Fe.nodeType!==3||(de=Z+S),Fe.nodeType===3&&(Z+=Fe.nodeValue.length),(ot=Fe.firstChild)!==null;)De=Fe,Fe=ot;for(;;){if(Fe===d)break t;if(De===b&&++ke===B&&(ae=Z),De===W&&++Oe===S&&(de=Z),(ot=Fe.nextSibling)!==null)break;Fe=De,De=Fe.parentNode}Fe=ot}b=ae===-1||de===-1?null:{start:ae,end:de}}else b=null}b=b||{start:0,end:0}}else b=null;for(tw={focusedElem:d,selectionRange:b},wl=!1,ft=h;ft!==null;)if(h=ft,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,ft=d;else for(;ft!==null;){h=ft;try{var pt=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var gt=pt.memoizedProps,jr=pt.memoizedState,ye=h.stateNode,he=ye.getSnapshotBeforeUpdate(h.elementType===h.type?gt:oa(h.type,gt),jr);ye.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var xe=h.stateNode.containerInfo;xe.nodeType===1?xe.textContent="":xe.nodeType===9&&xe.documentElement&&xe.removeChild(xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(We){br(h,h.return,We)}if(d=h.sibling,d!==null){d.return=h.return,ft=d;break}ft=h.return}return pt=QE,QE=!1,pt}function Cp(d,h,b){var S=h.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var B=S=S.next;do{if((B.tag&d)===d){var W=B.destroy;B.destroy=void 0,W!==void 0&&Uw(h,b,W)}B=B.next}while(B!==S)}}function Vy(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var b=h=h.next;do{if((b.tag&d)===d){var S=b.create;b.destroy=S()}b=b.next}while(b!==h)}}function Vw(d){var h=d.ref;if(h!==null){var b=d.stateNode;switch(d.tag){case 5:d=b;break;default:d=b}typeof h=="function"?h(d):h.current=d}}function ZE(d){var h=d.alternate;h!==null&&(d.alternate=null,ZE(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&(delete h[Oa],delete h[mp],delete h[iw],delete h[LU],delete h[FU])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function e_(d){return d.tag===5||d.tag===3||d.tag===4}function t_(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||e_(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function qw(d,h,b){var S=d.tag;if(S===5||S===6)d=d.stateNode,h?b.nodeType===8?b.parentNode.insertBefore(d,h):b.insertBefore(d,h):(b.nodeType===8?(h=b.parentNode,h.insertBefore(d,b)):(h=b,h.appendChild(d)),b=b._reactRootContainer,b!=null||h.onclick!==null||(h.onclick=vy));else if(S!==4&&(d=d.child,d!==null))for(qw(d,h,b),d=d.sibling;d!==null;)qw(d,h,b),d=d.sibling}function Ww(d,h,b){var S=d.tag;if(S===5||S===6)d=d.stateNode,h?b.insertBefore(d,h):b.appendChild(d);else if(S!==4&&(d=d.child,d!==null))for(Ww(d,h,b),d=d.sibling;d!==null;)Ww(d,h,b),d=d.sibling}var fs=null,aa=!1;function yc(d,h,b){for(b=b.child;b!==null;)n_(d,h,b),b=b.sibling}function n_(d,h,b){if(Ce&&typeof Ce.onCommitFiberUnmount=="function")try{Ce.onCommitFiberUnmount(_e,b)}catch{}switch(b.tag){case 5:Cs||hf(b,h);case 6:var S=fs,B=aa;fs=null,yc(d,h,b),fs=S,aa=B,fs!==null&&(aa?(d=fs,b=b.stateNode,d.nodeType===8?d.parentNode.removeChild(b):d.removeChild(b)):fs.removeChild(b.stateNode));break;case 18:fs!==null&&(aa?(d=fs,b=b.stateNode,d.nodeType===8?sw(d.parentNode,b):d.nodeType===1&&sw(d,b),vu(d)):sw(fs,b.stateNode));break;case 4:S=fs,B=aa,fs=b.stateNode.containerInfo,aa=!0,yc(d,h,b),fs=S,aa=B;break;case 0:case 11:case 14:case 15:if(!Cs&&(S=b.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){B=S=S.next;do{var W=B,Z=W.destroy;W=W.tag,Z!==void 0&&((W&2)!==0||(W&4)!==0)&&Uw(b,h,Z),B=B.next}while(B!==S)}yc(d,h,b);break;case 1:if(!Cs&&(hf(b,h),S=b.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=b.memoizedProps,S.state=b.memoizedState,S.componentWillUnmount()}catch(ae){br(b,h,ae)}yc(d,h,b);break;case 21:yc(d,h,b);break;case 22:b.mode&1?(Cs=(S=Cs)||b.memoizedState!==null,yc(d,h,b),Cs=S):yc(d,h,b);break;default:yc(d,h,b)}}function r_(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var b=d.stateNode;b===null&&(b=d.stateNode=new e7),h.forEach(function(S){var B=u7.bind(null,d,S);b.has(S)||(b.add(S),S.then(B,B))})}}function la(d,h){var b=h.deletions;if(b!==null)for(var S=0;S<b.length;S++){var B=b[S];try{var W=d,Z=h,ae=Z;e:for(;ae!==null;){switch(ae.tag){case 5:fs=ae.stateNode,aa=!1;break e;case 3:fs=ae.stateNode.containerInfo,aa=!0;break e;case 4:fs=ae.stateNode.containerInfo,aa=!0;break e}ae=ae.return}if(fs===null)throw Error(n(160));n_(W,Z,B),fs=null,aa=!1;var de=B.alternate;de!==null&&(de.return=null),B.return=null}catch(ke){br(B,h,ke)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)s_(h,d),h=h.sibling}function s_(d,h){var b=d.alternate,S=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(la(h,d),za(d),S&4){try{Cp(3,d,d.return),Vy(3,d)}catch(gt){br(d,d.return,gt)}try{Cp(5,d,d.return)}catch(gt){br(d,d.return,gt)}}break;case 1:la(h,d),za(d),S&512&&b!==null&&hf(b,b.return);break;case 5:if(la(h,d),za(d),S&512&&b!==null&&hf(b,b.return),d.flags&32){var B=d.stateNode;try{ve(B,"")}catch(gt){br(d,d.return,gt)}}if(S&4&&(B=d.stateNode,B!=null)){var W=d.memoizedProps,Z=b!==null?b.memoizedProps:W,ae=d.type,de=d.updateQueue;if(d.updateQueue=null,de!==null)try{ae==="input"&&W.type==="radio"&&W.name!=null&&Ee(B,W),St(ae,Z);var ke=St(ae,W);for(Z=0;Z<de.length;Z+=2){var Oe=de[Z],Fe=de[Z+1];Oe==="style"?ct(B,Fe):Oe==="dangerouslySetInnerHTML"?be(B,Fe):Oe==="children"?ve(B,Fe):v(B,Oe,Fe,ke)}switch(ae){case"input":te(B,W);break;case"textarea":ze(B,W);break;case"select":var De=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!W.multiple;var ot=W.value;ot!=null?Le(B,!!W.multiple,ot,!1):De!==!!W.multiple&&(W.defaultValue!=null?Le(B,!!W.multiple,W.defaultValue,!0):Le(B,!!W.multiple,W.multiple?[]:"",!1))}B[mp]=W}catch(gt){br(d,d.return,gt)}}break;case 6:if(la(h,d),za(d),S&4){if(d.stateNode===null)throw Error(n(162));B=d.stateNode,W=d.memoizedProps;try{B.nodeValue=W}catch(gt){br(d,d.return,gt)}}break;case 3:if(la(h,d),za(d),S&4&&b!==null&&b.memoizedState.isDehydrated)try{vu(h.containerInfo)}catch(gt){br(d,d.return,gt)}break;case 4:la(h,d),za(d);break;case 13:la(h,d),za(d),B=d.child,B.flags&8192&&(W=B.memoizedState!==null,B.stateNode.isHidden=W,!W||B.alternate!==null&&B.alternate.memoizedState!==null||(Kw=Xt())),S&4&&r_(d);break;case 22:if(Oe=b!==null&&b.memoizedState!==null,d.mode&1?(Cs=(ke=Cs)||Oe,la(h,d),Cs=ke):la(h,d),za(d),S&8192){if(ke=d.memoizedState!==null,(d.stateNode.isHidden=ke)&&!Oe&&(d.mode&1)!==0)for(ft=d,Oe=d.child;Oe!==null;){for(Fe=ft=Oe;ft!==null;){switch(De=ft,ot=De.child,De.tag){case 0:case 11:case 14:case 15:Cp(4,De,De.return);break;case 1:hf(De,De.return);var pt=De.stateNode;if(typeof pt.componentWillUnmount=="function"){S=De,b=De.return;try{h=S,pt.props=h.memoizedProps,pt.state=h.memoizedState,pt.componentWillUnmount()}catch(gt){br(S,b,gt)}}break;case 5:hf(De,De.return);break;case 22:if(De.memoizedState!==null){a_(Fe);continue}}ot!==null?(ot.return=De,ft=ot):a_(Fe)}Oe=Oe.sibling}e:for(Oe=null,Fe=d;;){if(Fe.tag===5){if(Oe===null){Oe=Fe;try{B=Fe.stateNode,ke?(W=B.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none"):(ae=Fe.stateNode,de=Fe.memoizedProps.style,Z=de!=null&&de.hasOwnProperty("display")?de.display:null,ae.style.display=He("display",Z))}catch(gt){br(d,d.return,gt)}}}else if(Fe.tag===6){if(Oe===null)try{Fe.stateNode.nodeValue=ke?"":Fe.memoizedProps}catch(gt){br(d,d.return,gt)}}else if((Fe.tag!==22&&Fe.tag!==23||Fe.memoizedState===null||Fe===d)&&Fe.child!==null){Fe.child.return=Fe,Fe=Fe.child;continue}if(Fe===d)break e;for(;Fe.sibling===null;){if(Fe.return===null||Fe.return===d)break e;Oe===Fe&&(Oe=null),Fe=Fe.return}Oe===Fe&&(Oe=null),Fe.sibling.return=Fe.return,Fe=Fe.sibling}}break;case 19:la(h,d),za(d),S&4&&r_(d);break;case 21:break;default:la(h,d),za(d)}}function za(d){var h=d.flags;if(h&2){try{e:{for(var b=d.return;b!==null;){if(e_(b)){var S=b;break e}b=b.return}throw Error(n(160))}switch(S.tag){case 5:var B=S.stateNode;S.flags&32&&(ve(B,""),S.flags&=-33);var W=t_(d);Ww(d,W,B);break;case 3:case 4:var Z=S.stateNode.containerInfo,ae=t_(d);qw(d,ae,Z);break;default:throw Error(n(161))}}catch(de){br(d,d.return,de)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function n7(d,h,b){ft=d,i_(d)}function i_(d,h,b){for(var S=(d.mode&1)!==0;ft!==null;){var B=ft,W=B.child;if(B.tag===22&&S){var Z=B.memoizedState!==null||Uy;if(!Z){var ae=B.alternate,de=ae!==null&&ae.memoizedState!==null||Cs;ae=Uy;var ke=Cs;if(Uy=Z,(Cs=de)&&!ke)for(ft=B;ft!==null;)Z=ft,de=Z.child,Z.tag===22&&Z.memoizedState!==null?l_(B):de!==null?(de.return=Z,ft=de):l_(B);for(;W!==null;)ft=W,i_(W),W=W.sibling;ft=B,Uy=ae,Cs=ke}o_(d)}else(B.subtreeFlags&8772)!==0&&W!==null?(W.return=B,ft=W):o_(d)}}function o_(d){for(;ft!==null;){var h=ft;if((h.flags&8772)!==0){var b=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Cs||Vy(5,h);break;case 1:var S=h.stateNode;if(h.flags&4&&!Cs)if(b===null)S.componentDidMount();else{var B=h.elementType===h.type?b.memoizedProps:oa(h.type,b.memoizedProps);S.componentDidUpdate(B,b.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var W=h.updateQueue;W!==null&&aE(h,W,S);break;case 3:var Z=h.updateQueue;if(Z!==null){if(b=null,h.child!==null)switch(h.child.tag){case 5:b=h.child.stateNode;break;case 1:b=h.child.stateNode}aE(h,Z,b)}break;case 5:var ae=h.stateNode;if(b===null&&h.flags&4){b=ae;var de=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":de.autoFocus&&b.focus();break;case"img":de.src&&(b.src=de.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var ke=h.alternate;if(ke!==null){var Oe=ke.memoizedState;if(Oe!==null){var Fe=Oe.dehydrated;Fe!==null&&vu(Fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Cs||h.flags&512&&Vw(h)}catch(De){br(h,h.return,De)}}if(h===d){ft=null;break}if(b=h.sibling,b!==null){b.return=h.return,ft=b;break}ft=h.return}}function a_(d){for(;ft!==null;){var h=ft;if(h===d){ft=null;break}var b=h.sibling;if(b!==null){b.return=h.return,ft=b;break}ft=h.return}}function l_(d){for(;ft!==null;){var h=ft;try{switch(h.tag){case 0:case 11:case 15:var b=h.return;try{Vy(4,h)}catch(de){br(h,b,de)}break;case 1:var S=h.stateNode;if(typeof S.componentDidMount=="function"){var B=h.return;try{S.componentDidMount()}catch(de){br(h,B,de)}}var W=h.return;try{Vw(h)}catch(de){br(h,W,de)}break;case 5:var Z=h.return;try{Vw(h)}catch(de){br(h,Z,de)}}}catch(de){br(h,h.return,de)}if(h===d){ft=null;break}var ae=h.sibling;if(ae!==null){ae.return=h.return,ft=ae;break}ft=h.return}}var r7=Math.ceil,qy=P.ReactCurrentDispatcher,Hw=P.ReactCurrentOwner,No=P.ReactCurrentBatchConfig,_n=0,es=null,Pr=null,hs=0,Bi=0,pf=fc(0),Wr=0,Sp=null,Eu=0,Wy=0,Gw=0,Ep=null,mi=null,Kw=0,mf=1/0,_l=null,Hy=!1,Yw=null,xc=null,Gy=!1,bc=null,Ky=0,_p=0,Jw=null,Yy=-1,Jy=0;function Ks(){return(_n&6)!==0?Xt():Yy!==-1?Yy:Yy=Xt()}function vc(d){return(d.mode&1)===0?1:(_n&2)!==0&&hs!==0?hs&-hs:$U.transition!==null?(Jy===0&&(Jy=xl()),Jy):(d=Mn,d!==0||(d=window.event,d=d===void 0?16:ea(d.type)),d)}function ca(d,h,b,S){if(50<_p)throw _p=0,Jw=null,Error(n(185));mu(d,b,S),((_n&2)===0||d!==es)&&(d===es&&((_n&2)===0&&(Wy|=b),Wr===4&&wc(d,hs)),gi(d,S),b===1&&_n===0&&(h.mode&1)===0&&(mf=Xt()+500,Ny&&pc()))}function gi(d,h){var b=d.callbackNode;Wd(d,h);var S=yo(d,d===es?hs:0);if(S===0)b!==null&&Pn(b),d.callbackNode=null,d.callbackPriority=0;else if(h=S&-S,d.callbackPriority!==h){if(b!=null&&Pn(b),h===1)d.tag===0?zU(u_.bind(null,d)):YS(u_.bind(null,d)),DU(function(){(_n&6)===0&&pc()}),b=null;else{switch(oy(S)){case 1:b=Nr;break;case 4:b=Li;break;case 16:b=ui;break;case 536870912:b=tr;break;default:b=ui}b=x_(b,c_.bind(null,d))}d.callbackPriority=h,d.callbackNode=b}}function c_(d,h){if(Yy=-1,Jy=0,(_n&6)!==0)throw Error(n(327));var b=d.callbackNode;if(gf()&&d.callbackNode!==b)return null;var S=yo(d,d===es?hs:0);if(S===0)return null;if((S&30)!==0||(S&d.expiredLanes)!==0||h)h=Xy(d,S);else{h=S;var B=_n;_n|=2;var W=f_();(es!==d||hs!==h)&&(_l=null,mf=Xt()+500,Au(d,h));do try{o7();break}catch(ae){d_(d,ae)}while(!0);pw(),qy.current=W,_n=B,Pr!==null?h=0:(es=null,hs=0,h=Wr)}if(h!==0){if(h===2&&(B=xr(d),B!==0&&(S=B,h=Xw(d,B))),h===1)throw b=Sp,Au(d,0),wc(d,S),gi(d,Xt()),b;if(h===6)wc(d,S);else{if(B=d.current.alternate,(S&30)===0&&!s7(B)&&(h=Xy(d,S),h===2&&(W=xr(d),W!==0&&(S=W,h=Xw(d,W))),h===1))throw b=Sp,Au(d,0),wc(d,S),gi(d,Xt()),b;switch(d.finishedWork=B,d.finishedLanes=S,h){case 0:case 1:throw Error(n(345));case 2:Pu(d,mi,_l);break;case 3:if(wc(d,S),(S&130023424)===S&&(h=Kw+500-Xt(),10<h)){if(yo(d,0)!==0)break;if(B=d.suspendedLanes,(B&S)!==S){Ks(),d.pingedLanes|=d.suspendedLanes&B;break}d.timeoutHandle=rw(Pu.bind(null,d,mi,_l),h);break}Pu(d,mi,_l);break;case 4:if(wc(d,S),(S&4194240)===S)break;for(h=d.eventTimes,B=-1;0<S;){var Z=31-vt(S);W=1<<Z,Z=h[Z],Z>B&&(B=Z),S&=~W}if(S=B,S=Xt()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*r7(S/1960))-S,10<S){d.timeoutHandle=rw(Pu.bind(null,d,mi,_l),S);break}Pu(d,mi,_l);break;case 5:Pu(d,mi,_l);break;default:throw Error(n(329))}}}return gi(d,Xt()),d.callbackNode===b?c_.bind(null,d):null}function Xw(d,h){var b=Ep;return d.current.memoizedState.isDehydrated&&(Au(d,h).flags|=256),d=Xy(d,h),d!==2&&(h=mi,mi=b,h!==null&&Qw(h)),d}function Qw(d){mi===null?mi=d:mi.push.apply(mi,d)}function s7(d){for(var h=d;;){if(h.flags&16384){var b=h.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var S=0;S<b.length;S++){var B=b[S],W=B.getSnapshot;B=B.value;try{if(!sa(W(),B))return!1}catch{return!1}}}if(b=h.child,h.subtreeFlags&16384&&b!==null)b.return=h,h=b;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function wc(d,h){for(h&=~Gw,h&=~Wy,d.suspendedLanes|=h,d.pingedLanes&=~h,d=d.expirationTimes;0<h;){var b=31-vt(h),S=1<<b;d[b]=-1,h&=~S}}function u_(d){if((_n&6)!==0)throw Error(n(327));gf();var h=yo(d,0);if((h&1)===0)return gi(d,Xt()),null;var b=Xy(d,h);if(d.tag!==0&&b===2){var S=xr(d);S!==0&&(h=S,b=Xw(d,S))}if(b===1)throw b=Sp,Au(d,0),wc(d,h),gi(d,Xt()),b;if(b===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=h,Pu(d,mi,_l),gi(d,Xt()),null}function Zw(d,h){var b=_n;_n|=1;try{return d(h)}finally{_n=b,_n===0&&(mf=Xt()+500,Ny&&pc())}}function _u(d){bc!==null&&bc.tag===0&&(_n&6)===0&&gf();var h=_n;_n|=1;var b=No.transition,S=Mn;try{if(No.transition=null,Mn=1,d)return d()}finally{Mn=S,No.transition=b,_n=h,(_n&6)===0&&pc()}}function e1(){Bi=pf.current,Xn(pf)}function Au(d,h){d.finishedWork=null,d.finishedLanes=0;var b=d.timeoutHandle;if(b!==-1&&(d.timeoutHandle=-1,MU(b)),Pr!==null)for(b=Pr.return;b!==null;){var S=b;switch(cw(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&ky();break;case 3:df(),Xn(fi),Xn(Ts),kw();break;case 5:vw(S);break;case 4:df();break;case 13:Xn(ur);break;case 19:Xn(ur);break;case 10:mw(S.type._context);break;case 22:case 23:e1()}b=b.return}if(es=d,Pr=d=kc(d.current,null),hs=Bi=h,Wr=0,Sp=null,Gw=Wy=Eu=0,mi=Ep=null,ju!==null){for(h=0;h<ju.length;h++)if(b=ju[h],S=b.interleaved,S!==null){b.interleaved=null;var B=S.next,W=b.pending;if(W!==null){var Z=W.next;W.next=B,S.next=Z}b.pending=S}ju=null}return d}function d_(d,h){do{var b=Pr;try{if(pw(),My.current=Fy,Dy){for(var S=dr.memoizedState;S!==null;){var B=S.queue;B!==null&&(B.pending=null),S=S.next}Dy=!1}if(Su=0,Zr=qr=dr=null,wp=!1,kp=0,Hw.current=null,b===null||b.return===null){Wr=1,Sp=h,Pr=null;break}e:{var W=d,Z=b.return,ae=b,de=h;if(h=hs,ae.flags|=32768,de!==null&&typeof de=="object"&&typeof de.then=="function"){var ke=de,Oe=ae,Fe=Oe.tag;if((Oe.mode&1)===0&&(Fe===0||Fe===11||Fe===15)){var De=Oe.alternate;De?(Oe.updateQueue=De.updateQueue,Oe.memoizedState=De.memoizedState,Oe.lanes=De.lanes):(Oe.updateQueue=null,Oe.memoizedState=null)}var ot=OE(Z);if(ot!==null){ot.flags&=-257,LE(ot,Z,ae,W,h),ot.mode&1&&DE(W,ke,h),h=ot,de=ke;var pt=h.updateQueue;if(pt===null){var gt=new Set;gt.add(de),h.updateQueue=gt}else pt.add(de);break e}else{if((h&1)===0){DE(W,ke,h),t1();break e}de=Error(n(426))}}else if(rr&&ae.mode&1){var jr=OE(Z);if(jr!==null){(jr.flags&65536)===0&&(jr.flags|=256),LE(jr,Z,ae,W,h),fw(ff(de,ae));break e}}W=de=ff(de,ae),Wr!==4&&(Wr=2),Ep===null?Ep=[W]:Ep.push(W),W=Z;do{switch(W.tag){case 3:W.flags|=65536,h&=-h,W.lanes|=h;var ye=IE(W,de,h);oE(W,ye);break e;case 1:ae=de;var he=W.type,xe=W.stateNode;if((W.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(xc===null||!xc.has(xe)))){W.flags|=65536,h&=-h,W.lanes|=h;var We=ME(W,ae,h);oE(W,We);break e}}W=W.return}while(W!==null)}p_(b)}catch(wt){h=wt,Pr===b&&b!==null&&(Pr=b=b.return);continue}break}while(!0)}function f_(){var d=qy.current;return qy.current=Fy,d===null?Fy:d}function t1(){(Wr===0||Wr===3||Wr===2)&&(Wr=4),es===null||(Eu&268435455)===0&&(Wy&268435455)===0||wc(es,hs)}function Xy(d,h){var b=_n;_n|=2;var S=f_();(es!==d||hs!==h)&&(_l=null,Au(d,h));do try{i7();break}catch(B){d_(d,B)}while(!0);if(pw(),_n=b,qy.current=S,Pr!==null)throw Error(n(261));return es=null,hs=0,Wr}function i7(){for(;Pr!==null;)h_(Pr)}function o7(){for(;Pr!==null&&!Ws();)h_(Pr)}function h_(d){var h=y_(d.alternate,d,Bi);d.memoizedProps=d.pendingProps,h===null?p_(d):Pr=h,Hw.current=null}function p_(d){var h=d;do{var b=h.alternate;if(d=h.return,(h.flags&32768)===0){if(b=QU(b,h,Bi),b!==null){Pr=b;return}}else{if(b=ZU(b,h),b!==null){b.flags&=32767,Pr=b;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Wr=6,Pr=null;return}}if(h=h.sibling,h!==null){Pr=h;return}Pr=h=d}while(h!==null);Wr===0&&(Wr=5)}function Pu(d,h,b){var S=Mn,B=No.transition;try{No.transition=null,Mn=1,a7(d,h,b,S)}finally{No.transition=B,Mn=S}return null}function a7(d,h,b,S){do gf();while(bc!==null);if((_n&6)!==0)throw Error(n(327));b=d.finishedWork;var B=d.finishedLanes;if(b===null)return null;if(d.finishedWork=null,d.finishedLanes=0,b===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var W=b.lanes|b.childLanes;if(Dv(d,W),d===es&&(Pr=es=null,hs=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Gy||(Gy=!0,x_(ui,function(){return gf(),null})),W=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||W){W=No.transition,No.transition=null;var Z=Mn;Mn=1;var ae=_n;_n|=4,Hw.current=null,t7(d,b),s_(b,d),SU(tw),wl=!!ew,tw=ew=null,d.current=b,n7(b),Oi(),_n=ae,Mn=Z,No.transition=W}else d.current=b;if(Gy&&(Gy=!1,bc=d,Ky=B),W=d.pendingLanes,W===0&&(xc=null),qe(b.stateNode),gi(d,Xt()),h!==null)for(S=d.onRecoverableError,b=0;b<h.length;b++)B=h[b],S(B.value,{componentStack:B.stack,digest:B.digest});if(Hy)throw Hy=!1,d=Yw,Yw=null,d;return(Ky&1)!==0&&d.tag!==0&&gf(),W=d.pendingLanes,(W&1)!==0?d===Jw?_p++:(_p=0,Jw=d):_p=0,pc(),null}function gf(){if(bc!==null){var d=oy(Ky),h=No.transition,b=Mn;try{if(No.transition=null,Mn=16>d?16:d,bc===null)var S=!1;else{if(d=bc,bc=null,Ky=0,(_n&6)!==0)throw Error(n(331));var B=_n;for(_n|=4,ft=d.current;ft!==null;){var W=ft,Z=W.child;if((ft.flags&16)!==0){var ae=W.deletions;if(ae!==null){for(var de=0;de<ae.length;de++){var ke=ae[de];for(ft=ke;ft!==null;){var Oe=ft;switch(Oe.tag){case 0:case 11:case 15:Cp(8,Oe,W)}var Fe=Oe.child;if(Fe!==null)Fe.return=Oe,ft=Fe;else for(;ft!==null;){Oe=ft;var De=Oe.sibling,ot=Oe.return;if(ZE(Oe),Oe===ke){ft=null;break}if(De!==null){De.return=ot,ft=De;break}ft=ot}}}var pt=W.alternate;if(pt!==null){var gt=pt.child;if(gt!==null){pt.child=null;do{var jr=gt.sibling;gt.sibling=null,gt=jr}while(gt!==null)}}ft=W}}if((W.subtreeFlags&2064)!==0&&Z!==null)Z.return=W,ft=Z;else e:for(;ft!==null;){if(W=ft,(W.flags&2048)!==0)switch(W.tag){case 0:case 11:case 15:Cp(9,W,W.return)}var ye=W.sibling;if(ye!==null){ye.return=W.return,ft=ye;break e}ft=W.return}}var he=d.current;for(ft=he;ft!==null;){Z=ft;var xe=Z.child;if((Z.subtreeFlags&2064)!==0&&xe!==null)xe.return=Z,ft=xe;else e:for(Z=he;ft!==null;){if(ae=ft,(ae.flags&2048)!==0)try{switch(ae.tag){case 0:case 11:case 15:Vy(9,ae)}}catch(wt){br(ae,ae.return,wt)}if(ae===Z){ft=null;break e}var We=ae.sibling;if(We!==null){We.return=ae.return,ft=We;break e}ft=ae.return}}if(_n=B,pc(),Ce&&typeof Ce.onPostCommitFiberRoot=="function")try{Ce.onPostCommitFiberRoot(_e,d)}catch{}S=!0}return S}finally{Mn=b,No.transition=h}}return!1}function m_(d,h,b){h=ff(b,h),h=IE(d,h,1),d=gc(d,h,1),h=Ks(),d!==null&&(mu(d,1,h),gi(d,h))}function br(d,h,b){if(d.tag===3)m_(d,d,b);else for(;h!==null;){if(h.tag===3){m_(h,d,b);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(xc===null||!xc.has(S))){d=ff(b,d),d=ME(h,d,1),h=gc(h,d,1),d=Ks(),h!==null&&(mu(h,1,d),gi(h,d));break}}h=h.return}}function l7(d,h,b){var S=d.pingCache;S!==null&&S.delete(h),h=Ks(),d.pingedLanes|=d.suspendedLanes&b,es===d&&(hs&b)===b&&(Wr===4||Wr===3&&(hs&130023424)===hs&&500>Xt()-Kw?Au(d,0):Gw|=b),gi(d,h)}function g_(d,h){h===0&&((d.mode&1)===0?h=1:(h=Hs,Hs<<=1,(Hs&130023424)===0&&(Hs=4194304)));var b=Ks();d=Cl(d,h),d!==null&&(mu(d,h,b),gi(d,b))}function c7(d){var h=d.memoizedState,b=0;h!==null&&(b=h.retryLane),g_(d,b)}function u7(d,h){var b=0;switch(d.tag){case 13:var S=d.stateNode,B=d.memoizedState;B!==null&&(b=B.retryLane);break;case 19:S=d.stateNode;break;default:throw Error(n(314))}S!==null&&S.delete(h),g_(d,b)}var y_;y_=function(d,h,b){if(d!==null)if(d.memoizedProps!==h.pendingProps||fi.current)pi=!0;else{if((d.lanes&b)===0&&(h.flags&128)===0)return pi=!1,XU(d,h,b);pi=(d.flags&131072)!==0}else pi=!1,rr&&(h.flags&1048576)!==0&&JS(h,Cy,h.index);switch(h.lanes=0,h.tag){case 2:var S=h.type;By(d,h),d=h.pendingProps;var B=rf(h,Ts.current);uf(h,b),B=jw(null,h,S,d,B,b);var W=Cw();return h.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,hi(S)?(W=!0,Ty(h)):W=!1,h.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,xw(h),B.updater=zy,h.stateNode=B,B._reactInternals=h,Rw(h,S,d,b),h=Ow(null,h,S,!0,W,b)):(h.tag=0,rr&&W&&lw(h),Gs(null,h,B,b),h=h.child),h;case 16:S=h.elementType;e:{switch(By(d,h),d=h.pendingProps,B=S._init,S=B(S._payload),h.type=S,B=h.tag=f7(S),d=oa(S,d),B){case 0:h=Dw(null,h,S,d,b);break e;case 1:h=VE(null,h,S,d,b);break e;case 11:h=FE(null,h,S,d,b);break e;case 14:h=zE(null,h,S,oa(S.type,d),b);break e}throw Error(n(306,S,""))}return h;case 0:return S=h.type,B=h.pendingProps,B=h.elementType===S?B:oa(S,B),Dw(d,h,S,B,b);case 1:return S=h.type,B=h.pendingProps,B=h.elementType===S?B:oa(S,B),VE(d,h,S,B,b);case 3:e:{if(qE(h),d===null)throw Error(n(387));S=h.pendingProps,W=h.memoizedState,B=W.element,iE(d,h),Ry(h,S,null,b);var Z=h.memoizedState;if(S=Z.element,W.isDehydrated)if(W={element:S,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},h.updateQueue.baseState=W,h.memoizedState=W,h.flags&256){B=ff(Error(n(423)),h),h=WE(d,h,S,b,B);break e}else if(S!==B){B=ff(Error(n(424)),h),h=WE(d,h,S,b,B);break e}else for($i=dc(h.stateNode.containerInfo.firstChild),zi=h,rr=!0,ia=null,b=rE(h,null,S,b),h.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(af(),S===B){h=El(d,h,b);break e}Gs(d,h,S,b)}h=h.child}return h;case 5:return lE(h),d===null&&dw(h),S=h.type,B=h.pendingProps,W=d!==null?d.memoizedProps:null,Z=B.children,nw(S,B)?Z=null:W!==null&&nw(S,W)&&(h.flags|=32),UE(d,h),Gs(d,h,Z,b),h.child;case 6:return d===null&&dw(h),null;case 13:return HE(d,h,b);case 4:return bw(h,h.stateNode.containerInfo),S=h.pendingProps,d===null?h.child=lf(h,null,S,b):Gs(d,h,S,b),h.child;case 11:return S=h.type,B=h.pendingProps,B=h.elementType===S?B:oa(S,B),FE(d,h,S,B,b);case 7:return Gs(d,h,h.pendingProps,b),h.child;case 8:return Gs(d,h,h.pendingProps.children,b),h.child;case 12:return Gs(d,h,h.pendingProps.children,b),h.child;case 10:e:{if(S=h.type._context,B=h.pendingProps,W=h.memoizedProps,Z=B.value,qn(_y,S._currentValue),S._currentValue=Z,W!==null)if(sa(W.value,Z)){if(W.children===B.children&&!fi.current){h=El(d,h,b);break e}}else for(W=h.child,W!==null&&(W.return=h);W!==null;){var ae=W.dependencies;if(ae!==null){Z=W.child;for(var de=ae.firstContext;de!==null;){if(de.context===S){if(W.tag===1){de=Sl(-1,b&-b),de.tag=2;var ke=W.updateQueue;if(ke!==null){ke=ke.shared;var Oe=ke.pending;Oe===null?de.next=de:(de.next=Oe.next,Oe.next=de),ke.pending=de}}W.lanes|=b,de=W.alternate,de!==null&&(de.lanes|=b),gw(W.return,b,h),ae.lanes|=b;break}de=de.next}}else if(W.tag===10)Z=W.type===h.type?null:W.child;else if(W.tag===18){if(Z=W.return,Z===null)throw Error(n(341));Z.lanes|=b,ae=Z.alternate,ae!==null&&(ae.lanes|=b),gw(Z,b,h),Z=W.sibling}else Z=W.child;if(Z!==null)Z.return=W;else for(Z=W;Z!==null;){if(Z===h){Z=null;break}if(W=Z.sibling,W!==null){W.return=Z.return,Z=W;break}Z=Z.return}W=Z}Gs(d,h,B.children,b),h=h.child}return h;case 9:return B=h.type,S=h.pendingProps.children,uf(h,b),B=ko(B),S=S(B),h.flags|=1,Gs(d,h,S,b),h.child;case 14:return S=h.type,B=oa(S,h.pendingProps),B=oa(S.type,B),zE(d,h,S,B,b);case 15:return $E(d,h,h.type,h.pendingProps,b);case 17:return S=h.type,B=h.pendingProps,B=h.elementType===S?B:oa(S,B),By(d,h),h.tag=1,hi(S)?(d=!0,Ty(h)):d=!1,uf(h,b),PE(h,S,B),Rw(h,S,B,b),Ow(null,h,S,!0,d,b);case 19:return KE(d,h,b);case 22:return BE(d,h,b)}throw Error(n(156,h.tag))};function x_(d,h){return Tn(d,h)}function d7(d,h,b,S){this.tag=d,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jo(d,h,b,S){return new d7(d,h,b,S)}function n1(d){return d=d.prototype,!(!d||!d.isReactComponent)}function f7(d){if(typeof d=="function")return n1(d)?1:0;if(d!=null){if(d=d.$$typeof,d===V)return 11;if(d===C)return 14}return 2}function kc(d,h){var b=d.alternate;return b===null?(b=jo(d.tag,h,d.key,d.mode),b.elementType=d.elementType,b.type=d.type,b.stateNode=d.stateNode,b.alternate=d,d.alternate=b):(b.pendingProps=h,b.type=d.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=d.flags&14680064,b.childLanes=d.childLanes,b.lanes=d.lanes,b.child=d.child,b.memoizedProps=d.memoizedProps,b.memoizedState=d.memoizedState,b.updateQueue=d.updateQueue,h=d.dependencies,b.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},b.sibling=d.sibling,b.index=d.index,b.ref=d.ref,b}function Qy(d,h,b,S,B,W){var Z=2;if(S=d,typeof d=="function")n1(d)&&(Z=1);else if(typeof d=="string")Z=5;else e:switch(d){case U:return Ru(b.children,B,W,h);case K:Z=8,B|=8;break;case Y:return d=jo(12,b,h,B|2),d.elementType=Y,d.lanes=W,d;case A:return d=jo(13,b,h,B),d.elementType=A,d.lanes=W,d;case x:return d=jo(19,b,h,B),d.elementType=x,d.lanes=W,d;case z:return Zy(b,B,W,h);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case G:Z=10;break e;case X:Z=9;break e;case V:Z=11;break e;case C:Z=14;break e;case L:Z=16,S=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return h=jo(Z,b,h,B),h.elementType=d,h.type=S,h.lanes=W,h}function Ru(d,h,b,S){return d=jo(7,d,S,h),d.lanes=b,d}function Zy(d,h,b,S){return d=jo(22,d,S,h),d.elementType=z,d.lanes=b,d.stateNode={isHidden:!1},d}function r1(d,h,b){return d=jo(6,d,null,h),d.lanes=b,d}function s1(d,h,b){return h=jo(4,d.children!==null?d.children:[],d.key,h),h.lanes=b,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}function h7(d,h,b,S,B){this.tag=h,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tp(0),this.expirationTimes=tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tp(0),this.identifierPrefix=S,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function i1(d,h,b,S,B,W,Z,ae,de){return d=new h7(d,h,b,ae,de),h===1?(h=1,W===!0&&(h|=8)):h=0,W=jo(3,null,null,h),d.current=W,W.stateNode=d,W.memoizedState={element:S,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},xw(W),d}function p7(d,h,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:S==null?null:""+S,children:d,containerInfo:h,implementation:b}}function b_(d){if(!d)return hc;d=d._reactInternals;e:{if(Yt(d)!==d||d.tag!==1)throw Error(n(170));var h=d;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(hi(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(n(171))}if(d.tag===1){var b=d.type;if(hi(b))return GS(d,b,h)}return h}function v_(d,h,b,S,B,W,Z,ae,de){return d=i1(b,S,!0,d,B,W,Z,ae,de),d.context=b_(null),b=d.current,S=Ks(),B=vc(b),W=Sl(S,B),W.callback=h??null,gc(b,W,B),d.current.lanes=B,mu(d,B,S),gi(d,S),d}function ex(d,h,b,S){var B=h.current,W=Ks(),Z=vc(B);return b=b_(b),h.context===null?h.context=b:h.pendingContext=b,h=Sl(W,Z),h.payload={element:d},S=S===void 0?null:S,S!==null&&(h.callback=S),d=gc(B,h,Z),d!==null&&(ca(d,B,Z,W),Py(d,B,Z)),Z}function tx(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function w_(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var b=d.retryLane;d.retryLane=b!==0&&b<h?b:h}}function o1(d,h){w_(d,h),(d=d.alternate)&&w_(d,h)}function m7(){return null}var k_=typeof reportError=="function"?reportError:function(d){console.error(d)};function a1(d){this._internalRoot=d}nx.prototype.render=a1.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(n(409));ex(d,h,null,null)},nx.prototype.unmount=a1.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;_u(function(){ex(null,d,null,null)}),h[kl]=null}};function nx(d){this._internalRoot=d}nx.prototype.unstable_scheduleHydration=function(d){if(d){var h=gu();d={blockedOn:null,target:d,priority:h};for(var b=0;b<Ma.length&&h!==0&&h<Ma[b].priority;b++);Ma.splice(b,0,d),b===0&&bu(d)}};function l1(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function rx(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function T_(){}function g7(d,h,b,S,B){if(B){if(typeof S=="function"){var W=S;S=function(){var ke=tx(Z);W.call(ke)}}var Z=v_(h,S,d,0,null,!1,!1,"",T_);return d._reactRootContainer=Z,d[kl]=Z.current,hp(d.nodeType===8?d.parentNode:d),_u(),Z}for(;B=d.lastChild;)d.removeChild(B);if(typeof S=="function"){var ae=S;S=function(){var ke=tx(de);ae.call(ke)}}var de=i1(d,0,!1,null,null,!1,!1,"",T_);return d._reactRootContainer=de,d[kl]=de.current,hp(d.nodeType===8?d.parentNode:d),_u(function(){ex(h,de,b,S)}),de}function sx(d,h,b,S,B){var W=b._reactRootContainer;if(W){var Z=W;if(typeof B=="function"){var ae=B;B=function(){var de=tx(Z);ae.call(de)}}ex(h,Z,d,B)}else Z=g7(b,h,d,B,S);return tx(Z)}ay=function(d){switch(d.tag){case 3:var h=d.stateNode;if(h.current.memoizedState.isDehydrated){var b=Vr(h.pendingLanes);b!==0&&(np(h,b|1),gi(h,Xt()),(_n&6)===0&&(mf=Xt()+500,pc()))}break;case 13:_u(function(){var S=Cl(d,1);if(S!==null){var B=Ks();ca(S,d,1,B)}}),o1(d,1)}},rp=function(d){if(d.tag===13){var h=Cl(d,134217728);if(h!==null){var b=Ks();ca(h,d,134217728,b)}o1(d,134217728)}},ly=function(d){if(d.tag===13){var h=vc(d),b=Cl(d,h);if(b!==null){var S=Ks();ca(b,d,h,S)}o1(d,h)}},gu=function(){return Mn},sp=function(d,h){var b=Mn;try{return Mn=d,h()}finally{Mn=b}},An=function(d,h,b){switch(h){case"input":if(te(d,b),h=b.name,b.type==="radio"&&h!=null){for(b=d;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<b.length;h++){var S=b[h];if(S!==d&&S.form===d.form){var B=wy(S);if(!B)throw Error(n(90));ie(S),te(S,B)}}}break;case"textarea":ze(d,b);break;case"select":h=b.value,h!=null&&Le(d,!!b.multiple,h,!1)}},Ft=Zw,yt=_u;var y7={usingClientEntryPoint:!1,Events:[gp,tf,wy,nn,Xe,Zw]},Ap={findFiberByHostInstance:wu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x7={bundleType:Ap.bundleType,version:Ap.version,rendererPackageName:Ap.rendererPackageName,rendererConfig:Ap.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Fn(d),d===null?null:d.stateNode},findFiberByHostInstance:Ap.findFiberByHostInstance||m7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ix=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ix.isDisabled&&ix.supportsFiber)try{_e=ix.inject(x7),Ce=ix}catch{}}return yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y7,yi.createPortal=function(d,h){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l1(h))throw Error(n(200));return p7(d,h,null,b)},yi.createRoot=function(d,h){if(!l1(d))throw Error(n(299));var b=!1,S="",B=k_;return h!=null&&(h.unstable_strictMode===!0&&(b=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onRecoverableError!==void 0&&(B=h.onRecoverableError)),h=i1(d,1,!1,null,null,b,!1,S,B),d[kl]=h.current,hp(d.nodeType===8?d.parentNode:d),new a1(h)},yi.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=Fn(h),d=d===null?null:d.stateNode,d},yi.flushSync=function(d){return _u(d)},yi.hydrate=function(d,h,b){if(!rx(h))throw Error(n(200));return sx(null,d,h,!0,b)},yi.hydrateRoot=function(d,h,b){if(!l1(d))throw Error(n(405));var S=b!=null&&b.hydratedSources||null,B=!1,W="",Z=k_;if(b!=null&&(b.unstable_strictMode===!0&&(B=!0),b.identifierPrefix!==void 0&&(W=b.identifierPrefix),b.onRecoverableError!==void 0&&(Z=b.onRecoverableError)),h=v_(h,null,d,1,b??null,B,!1,W,Z),d[kl]=h.current,hp(d),S)for(d=0;d<S.length;d++)b=S[d],B=b._getVersion,B=B(b._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[b,B]:h.mutableSourceEagerHydrationData.push(b,B);return new nx(h)},yi.render=function(d,h,b){if(!rx(h))throw Error(n(200));return sx(null,d,h,!1,b)},yi.unmountComponentAtNode=function(d){if(!rx(d))throw Error(n(40));return d._reactRootContainer?(_u(function(){sx(null,null,d,!1,function(){d._reactRootContainer=null,d[kl]=null})}),!0):!1},yi.unstable_batchedUpdates=Zw,yi.unstable_renderSubtreeIntoContainer=function(d,h,b,S){if(!rx(b))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return sx(d,h,b,!1,S)},yi.version="18.3.1-next-f1338f8080-20240426",yi}var P_;function UM(){if(P_)return d1.exports;P_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),d1.exports=E7(),d1.exports}var R_;function _7(){if(R_)return ax;R_=1;var t=UM();return ax.createRoot=t.createRoot,ax.hydrateRoot=t.hydrateRoot,ax}var A7=_7(),Ag=UM();const VM=rc(Ag);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $m(){return $m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$m.apply(this,arguments)}var $c;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($c||($c={}));const I_="popstate";function P7(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:a,hash:l}=r.location;return dT("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:M0(s)}return I7(e,n,null,t)}function Br(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qM(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function R7(){return Math.random().toString(36).substr(2,8)}function M_(t,e){return{usr:t.state,key:t.key,idx:e}}function dT(t,e,n,r){return n===void 0&&(n=null),$m({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Oh(e):e,{state:n,key:e&&e.key||r||R7()})}function M0(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Oh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function I7(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=$c.Pop,c=null,u=f();u==null&&(u=0,a.replaceState($m({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function p(){l=$c.Pop;let T=f(),j=T==null?null:T-u;u=T,c&&c({action:l,location:y.location,delta:j})}function m(T,j){l=$c.Push;let _=dT(y.location,T,j);u=f()+1;let v=M_(_,u),P=y.createHref(_);try{a.pushState(v,"",P)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(P)}o&&c&&c({action:l,location:y.location,delta:1})}function g(T,j){l=$c.Replace;let _=dT(y.location,T,j);u=f();let v=M_(_,u),P=y.createHref(_);a.replaceState(v,"",P),o&&c&&c({action:l,location:y.location,delta:0})}function w(T){let j=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof T=="string"?T:M0(T);return _=_.replace(/ $/,"%20"),Br(j,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,j)}let y={get action(){return l},get location(){return t(s,a)},listen(T){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(I_,p),c=T,()=>{s.removeEventListener(I_,p),c=null}},createHref(T){return e(s,T)},createURL:w,encodeLocation(T){let j=w(T);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:m,replace:g,go(T){return a.go(T)}};return y}var D_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(D_||(D_={}));function M7(t,e,n){return n===void 0&&(n="/"),D7(t,e,n)}function D7(t,e,n,r){let s=typeof e=="string"?Oh(e):e,o=bN(s.pathname||"/",n);if(o==null)return null;let a=WM(t);O7(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=K7(o);l=W7(a[c],u)}return l}function WM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Br(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Hc([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(Br(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),WM(o.children,e,f,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:V7(u,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of HM(o.path))s(o,a,c)}),e}function HM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=HM(r.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function O7(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:q7(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const L7=/^:[\w-]+$/,F7=3,z7=2,$7=1,B7=10,U7=-2,O_=t=>t==="*";function V7(t,e){let n=t.split("/"),r=n.length;return n.some(O_)&&(r+=U7),e&&(r+=z7),n.filter(s=>!O_(s)).reduce((s,o)=>s+(L7.test(o)?F7:o===""?$7:B7),r)}function q7(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function W7(t,e,n){let{routesMeta:r}=t,s={},o="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,f=o==="/"?e:e.slice(o.length)||"/",p=H7({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),m=c.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:Hc([o,p.pathname]),pathnameBase:Q7(Hc([o,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(o=Hc([o,p.pathnameBase]))}return a}function H7(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=G7(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,f,p)=>{let{paramName:m,isOptional:g}=f;if(m==="*"){let y=l[p]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const w=l[p];return g&&!w?u[m]=void 0:u[m]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:t}}function G7(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),qM(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function K7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qM(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bN(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Y7(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Oh(t):t;return{pathname:n?n.startsWith("/")?n:J7(n,e):e,search:Z7(r),hash:e9(s)}}function J7(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function p1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function X7(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function GM(t,e){let n=X7(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function KM(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Oh(t):(s=$m({},t),Br(!s.pathname||!s.pathname.includes("?"),p1("?","pathname","search",s)),Br(!s.pathname||!s.pathname.includes("#"),p1("#","pathname","hash",s)),Br(!s.search||!s.search.includes("#"),p1("#","search","hash",s)));let o=t===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}l=p>=0?e[p]:"/"}let c=Y7(s,l),u=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Hc=t=>t.join("/").replace(/\/\/+/g,"/"),Q7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Z7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,e9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function t9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const YM=["post","put","patch","delete"];new Set(YM);const n9=["get",...YM];new Set(n9);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bm(){return Bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bm.apply(this,arguments)}const vN=k.createContext(null),r9=k.createContext(null),Ld=k.createContext(null),Eb=k.createContext(null),ru=k.createContext({outlet:null,matches:[],isDataRoute:!1}),JM=k.createContext(null);function s9(t,e){let{relative:n}=e===void 0?{}:e;Pg()||Br(!1);let{basename:r,navigator:s}=k.useContext(Ld),{hash:o,pathname:a,search:l}=QM(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Hc([r,a])),s.createHref({pathname:c,search:l,hash:o})}function Pg(){return k.useContext(Eb)!=null}function su(){return Pg()||Br(!1),k.useContext(Eb).location}function XM(t){k.useContext(Ld).static||k.useLayoutEffect(t)}function mo(){let{isDataRoute:t}=k.useContext(ru);return t?y9():i9()}function i9(){Pg()||Br(!1);let t=k.useContext(vN),{basename:e,future:n,navigator:r}=k.useContext(Ld),{matches:s}=k.useContext(ru),{pathname:o}=su(),a=JSON.stringify(GM(s,n.v7_relativeSplatPath)),l=k.useRef(!1);return XM(()=>{l.current=!0}),k.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let p=KM(u,JSON.parse(a),o,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Hc([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,a,o,t])}function L_(){let{matches:t}=k.useContext(ru),e=t[t.length-1];return e?e.params:{}}function QM(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(Ld),{matches:s}=k.useContext(ru),{pathname:o}=su(),a=JSON.stringify(GM(s,r.v7_relativeSplatPath));return k.useMemo(()=>KM(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function o9(t,e){return a9(t,e)}function a9(t,e,n,r){Pg()||Br(!1);let{navigator:s}=k.useContext(Ld),{matches:o}=k.useContext(ru),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=su(),f;if(e){var p;let T=typeof e=="string"?Oh(e):e;c==="/"||(p=T.pathname)!=null&&p.startsWith(c)||Br(!1),f=T}else f=u;let m=f.pathname||"/",g=m;if(c!=="/"){let T=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=M7(t,{pathname:g}),y=f9(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:Hc([c,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?c:Hc([c,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,n,r);return e&&y?k.createElement(Eb.Provider,{value:{location:Bm({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:$c.Pop}},y):y}function l9(){let t=g9(),e=t9(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const c9=k.createElement(l9,null);class u9 extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(ru.Provider,{value:this.props.routeContext},k.createElement(JM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function d9(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(vN);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(ru.Provider,{value:e},r)}function f9(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||Br(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:m,errors:g}=n,w=p.route.loader&&m[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,p,m)=>{let g,w=!1,y=null,T=null;n&&(g=l&&p.route.id?l[p.route.id]:void 0,y=p.route.errorElement||c9,c&&(u<0&&m===0?(x9("route-fallback"),w=!0,T=null):u===m&&(w=!0,T=p.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,m+1)),_=()=>{let v;return g?v=y:w?v=T:p.route.Component?v=k.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=f,k.createElement(d9,{match:p,routeContext:{outlet:f,matches:j,isDataRoute:n!=null},children:v})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?k.createElement(u9,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:_(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):_()},null)}var ZM=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ZM||{}),e4=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(e4||{});function h9(t){let e=k.useContext(vN);return e||Br(!1),e}function p9(t){let e=k.useContext(r9);return e||Br(!1),e}function m9(t){let e=k.useContext(ru);return e||Br(!1),e}function t4(t){let e=m9(),n=e.matches[e.matches.length-1];return n.route.id||Br(!1),n.route.id}function g9(){var t;let e=k.useContext(JM),n=p9(),r=t4();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function y9(){let{router:t}=h9(ZM.UseNavigateStable),e=t4(e4.UseNavigateStable),n=k.useRef(!1);return XM(()=>{n.current=!0}),k.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Bm({fromRouteId:e},o)))},[t,e])}const F_={};function x9(t,e,n){F_[t]||(F_[t]=!0)}function b9(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Js(t){Br(!1)}function v9(t){let{basename:e="/",children:n=null,location:r,navigationType:s=$c.Pop,navigator:o,static:a=!1,future:l}=t;Pg()&&Br(!1);let c=e.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:c,navigator:o,static:a,future:Bm({v7_relativeSplatPath:!1},l)}),[c,l,o,a]);typeof r=="string"&&(r=Oh(r));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:w="default"}=r,y=k.useMemo(()=>{let T=bN(f,c);return T==null?null:{location:{pathname:T,search:p,hash:m,state:g,key:w},navigationType:s}},[c,f,p,m,g,w,s]);return y==null?null:k.createElement(Ld.Provider,{value:u},k.createElement(Eb.Provider,{children:n,value:y}))}function w9(t){let{children:e,location:n}=t;return o9(fT(e),n)}new Promise(()=>{});function fT(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let o=[...e,s];if(r.type===k.Fragment){n.push.apply(n,fT(r.props.children,o));return}r.type!==Js&&Br(!1),!r.props.index||!r.props.children||Br(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=fT(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hT(){return hT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hT.apply(this,arguments)}function k9(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function T9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function N9(t,e){return t.button===0&&(!e||e==="_self")&&!T9(t)}function pT(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function j9(t,e){let n=pT(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}const C9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],S9="6";try{window.__reactRouterVersion=S9}catch{}const E9="startTransition",z_=xN[E9];function _9(t){let{basename:e,children:n,future:r,window:s}=t,o=k.useRef();o.current==null&&(o.current=P7({window:s,v5Compat:!0}));let a=o.current,[l,c]=k.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},f=k.useCallback(p=>{u&&z_?z_(()=>c(p)):c(p)},[c,u]);return k.useLayoutEffect(()=>a.listen(f),[a,f]),k.useEffect(()=>b9(r),[r]),k.createElement(v9,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const A9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ji=k.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:f,viewTransition:p}=e,m=k9(e,C9),{basename:g}=k.useContext(Ld),w,y=!1;if(typeof u=="string"&&P9.test(u)&&(w=u,A9))try{let v=new URL(window.location.href),P=u.startsWith("//")?new URL(v.protocol+u):new URL(u),D=bN(P.pathname,g);P.origin===v.origin&&D!=null?u=D+P.search+P.hash:y=!0}catch{}let T=s9(u,{relative:s}),j=R9(u,{replace:a,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:p});function _(v){r&&r(v),v.defaultPrevented||j(v)}return k.createElement("a",hT({},m,{href:w||T,onClick:y||o?r:_,ref:n,target:c}))});var $_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($_||($_={}));var B_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(B_||(B_={}));function R9(t,e){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:l}=e===void 0?{}:e,c=mo(),u=su(),f=QM(t,{relative:a});return k.useCallback(p=>{if(N9(p,n)){p.preventDefault();let m=r!==void 0?r:M0(u)===M0(f);c(t,{replace:m,state:s,preventScrollReset:o,relative:a,viewTransition:l})}},[u,c,f,r,s,n,t,o,a,l])}function I9(t){let e=k.useRef(pT(t)),n=k.useRef(!1),r=su(),s=k.useMemo(()=>j9(r.search,n.current?null:e.current),[r.search]),o=mo(),a=k.useCallback((l,c)=>{const u=pT(typeof l=="function"?l(s):l);n.current=!0,o("?"+u,c)},[o,s]);return[s,a]}var s0={exports:{}};const M9={},D9=Object.freeze(Object.defineProperty({__proto__:null,default:M9},Symbol.toStringTag,{value:"Module"})),O9=gN(D9);var L9=s0.exports,U_;function F9(){return U_||(U_=1,function(t){(function(e,n){function r(A,x){if(!A)throw new Error(x||"Assertion failed")}function s(A,x){A.super_=x;var C=function(){};C.prototype=x.prototype,A.prototype=new C,A.prototype.constructor=A}function o(A,x,C){if(o.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((x==="le"||x==="be")&&(C=x,x=10),this._init(A||0,x||10,C||"be"))}typeof e=="object"?e.exports=o:n.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=O9.Buffer}catch{}o.isBN=function(x){return x instanceof o?!0:x!==null&&typeof x=="object"&&x.constructor.wordSize===o.wordSize&&Array.isArray(x.words)},o.max=function(x,C){return x.cmp(C)>0?x:C},o.min=function(x,C){return x.cmp(C)<0?x:C},o.prototype._init=function(x,C,L){if(typeof x=="number")return this._initNumber(x,C,L);if(typeof x=="object")return this._initArray(x,C,L);C==="hex"&&(C=16),r(C===(C|0)&&C>=2&&C<=36),x=x.toString().replace(/\s+/g,"");var z=0;x[0]==="-"&&(z++,this.negative=1),z<x.length&&(C===16?this._parseHex(x,z,L):(this._parseBase(x,C,z),L==="le"&&this._initArray(this.toArray(),C,L)))},o.prototype._initNumber=function(x,C,L){x<0&&(this.negative=1,x=-x),x<67108864?(this.words=[x&67108863],this.length=1):x<4503599627370496?(this.words=[x&67108863,x/67108864&67108863],this.length=2):(r(x<9007199254740992),this.words=[x&67108863,x/67108864&67108863,1],this.length=3),L==="le"&&this._initArray(this.toArray(),C,L)},o.prototype._initArray=function(x,C,L){if(r(typeof x.length=="number"),x.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(x.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var R,I,N=0;if(L==="be")for(z=x.length-1,R=0;z>=0;z-=3)I=x[z]|x[z-1]<<8|x[z-2]<<16,this.words[R]|=I<<N&67108863,this.words[R+1]=I>>>26-N&67108863,N+=24,N>=26&&(N-=26,R++);else if(L==="le")for(z=0,R=0;z<x.length;z+=3)I=x[z]|x[z+1]<<8|x[z+2]<<16,this.words[R]|=I<<N&67108863,this.words[R+1]=I>>>26-N&67108863,N+=24,N>=26&&(N-=26,R++);return this._strip()};function l(A,x){var C=A.charCodeAt(x);if(C>=48&&C<=57)return C-48;if(C>=65&&C<=70)return C-55;if(C>=97&&C<=102)return C-87;r(!1,"Invalid character in "+A)}function c(A,x,C){var L=l(A,C);return C-1>=x&&(L|=l(A,C-1)<<4),L}o.prototype._parseHex=function(x,C,L){this.length=Math.ceil((x.length-C)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var R=0,I=0,N;if(L==="be")for(z=x.length-1;z>=C;z-=2)N=c(x,C,z)<<R,this.words[I]|=N&67108863,R>=18?(R-=18,I+=1,this.words[I]|=N>>>26):R+=8;else{var F=x.length-C;for(z=F%2===0?C+1:C;z<x.length;z+=2)N=c(x,C,z)<<R,this.words[I]|=N&67108863,R>=18?(R-=18,I+=1,this.words[I]|=N>>>26):R+=8}this._strip()};function u(A,x,C,L){for(var z=0,R=0,I=Math.min(A.length,C),N=x;N<I;N++){var F=A.charCodeAt(N)-48;z*=L,F>=49?R=F-49+10:F>=17?R=F-17+10:R=F,r(F>=0&&R<L,"Invalid character"),z+=R}return z}o.prototype._parseBase=function(x,C,L){this.words=[0],this.length=1;for(var z=0,R=1;R<=67108863;R*=C)z++;z--,R=R/C|0;for(var I=x.length-L,N=I%z,F=Math.min(I,I-N)+L,E=0,M=L;M<F;M+=z)E=u(x,M,M+z,C),this.imuln(R),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E);if(N!==0){var ee=1;for(E=u(x,M,x.length,C),M=0;M<N;M++)ee*=C;this.imuln(ee),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E)}this._strip()},o.prototype.copy=function(x){x.words=new Array(this.length);for(var C=0;C<this.length;C++)x.words[C]=this.words[C];x.length=this.length,x.negative=this.negative,x.red=this.red};function f(A,x){A.words=x.words,A.length=x.length,A.negative=x.negative,A.red=x.red}if(o.prototype._move=function(x){f(x,this)},o.prototype.clone=function(){var x=new o(null);return this.copy(x),x},o.prototype._expand=function(x){for(;this.length<x;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{o.prototype.inspect=p}else o.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(x,C){x=x||10,C=C|0||1;var L;if(x===16||x==="hex"){L="";for(var z=0,R=0,I=0;I<this.length;I++){var N=this.words[I],F=((N<<z|R)&16777215).toString(16);R=N>>>24-z&16777215,z+=2,z>=26&&(z-=26,I--),R!==0||I!==this.length-1?L=m[6-F.length]+F+L:L=F+L}for(R!==0&&(L=R.toString(16)+L);L.length%C!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}if(x===(x|0)&&x>=2&&x<=36){var E=g[x],M=w[x];L="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var O=ee.modrn(M).toString(x);ee=ee.idivn(M),ee.isZero()?L=O+L:L=m[E-O.length]+O+L}for(this.isZero()&&(L="0"+L);L.length%C!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var x=this.words[0];return this.length===2?x+=this.words[1]*67108864:this.length===3&&this.words[2]===1?x+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-x:x},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(x,C){return this.toArrayLike(a,x,C)}),o.prototype.toArray=function(x,C){return this.toArrayLike(Array,x,C)};var y=function(x,C){return x.allocUnsafe?x.allocUnsafe(C):new x(C)};o.prototype.toArrayLike=function(x,C,L){this._strip();var z=this.byteLength(),R=L||Math.max(1,z);r(z<=R,"byte array longer than desired length"),r(R>0,"Requested array length <= 0");var I=y(x,R),N=C==="le"?"LE":"BE";return this["_toArrayLike"+N](I,z),I},o.prototype._toArrayLikeLE=function(x,C){for(var L=0,z=0,R=0,I=0;R<this.length;R++){var N=this.words[R]<<I|z;x[L++]=N&255,L<x.length&&(x[L++]=N>>8&255),L<x.length&&(x[L++]=N>>16&255),I===6?(L<x.length&&(x[L++]=N>>24&255),z=0,I=0):(z=N>>>24,I+=2)}if(L<x.length)for(x[L++]=z;L<x.length;)x[L++]=0},o.prototype._toArrayLikeBE=function(x,C){for(var L=x.length-1,z=0,R=0,I=0;R<this.length;R++){var N=this.words[R]<<I|z;x[L--]=N&255,L>=0&&(x[L--]=N>>8&255),L>=0&&(x[L--]=N>>16&255),I===6?(L>=0&&(x[L--]=N>>24&255),z=0,I=0):(z=N>>>24,I+=2)}if(L>=0)for(x[L--]=z;L>=0;)x[L--]=0},Math.clz32?o.prototype._countBits=function(x){return 32-Math.clz32(x)}:o.prototype._countBits=function(x){var C=x,L=0;return C>=4096&&(L+=13,C>>>=13),C>=64&&(L+=7,C>>>=7),C>=8&&(L+=4,C>>>=4),C>=2&&(L+=2,C>>>=2),L+C},o.prototype._zeroBits=function(x){if(x===0)return 26;var C=x,L=0;return(C&8191)===0&&(L+=13,C>>>=13),(C&127)===0&&(L+=7,C>>>=7),(C&15)===0&&(L+=4,C>>>=4),(C&3)===0&&(L+=2,C>>>=2),(C&1)===0&&L++,L},o.prototype.bitLength=function(){var x=this.words[this.length-1],C=this._countBits(x);return(this.length-1)*26+C};function T(A){for(var x=new Array(A.bitLength()),C=0;C<x.length;C++){var L=C/26|0,z=C%26;x[C]=A.words[L]>>>z&1}return x}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var x=0,C=0;C<this.length;C++){var L=this._zeroBits(this.words[C]);if(x+=L,L!==26)break}return x},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(x){return this.negative!==0?this.abs().inotn(x).iaddn(1):this.clone()},o.prototype.fromTwos=function(x){return this.testn(x-1)?this.notn(x).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(x){for(;this.length<x.length;)this.words[this.length++]=0;for(var C=0;C<x.length;C++)this.words[C]=this.words[C]|x.words[C];return this._strip()},o.prototype.ior=function(x){return r((this.negative|x.negative)===0),this.iuor(x)},o.prototype.or=function(x){return this.length>x.length?this.clone().ior(x):x.clone().ior(this)},o.prototype.uor=function(x){return this.length>x.length?this.clone().iuor(x):x.clone().iuor(this)},o.prototype.iuand=function(x){var C;this.length>x.length?C=x:C=this;for(var L=0;L<C.length;L++)this.words[L]=this.words[L]&x.words[L];return this.length=C.length,this._strip()},o.prototype.iand=function(x){return r((this.negative|x.negative)===0),this.iuand(x)},o.prototype.and=function(x){return this.length>x.length?this.clone().iand(x):x.clone().iand(this)},o.prototype.uand=function(x){return this.length>x.length?this.clone().iuand(x):x.clone().iuand(this)},o.prototype.iuxor=function(x){var C,L;this.length>x.length?(C=this,L=x):(C=x,L=this);for(var z=0;z<L.length;z++)this.words[z]=C.words[z]^L.words[z];if(this!==C)for(;z<C.length;z++)this.words[z]=C.words[z];return this.length=C.length,this._strip()},o.prototype.ixor=function(x){return r((this.negative|x.negative)===0),this.iuxor(x)},o.prototype.xor=function(x){return this.length>x.length?this.clone().ixor(x):x.clone().ixor(this)},o.prototype.uxor=function(x){return this.length>x.length?this.clone().iuxor(x):x.clone().iuxor(this)},o.prototype.inotn=function(x){r(typeof x=="number"&&x>=0);var C=Math.ceil(x/26)|0,L=x%26;this._expand(C),L>0&&C--;for(var z=0;z<C;z++)this.words[z]=~this.words[z]&67108863;return L>0&&(this.words[z]=~this.words[z]&67108863>>26-L),this._strip()},o.prototype.notn=function(x){return this.clone().inotn(x)},o.prototype.setn=function(x,C){r(typeof x=="number"&&x>=0);var L=x/26|0,z=x%26;return this._expand(L+1),C?this.words[L]=this.words[L]|1<<z:this.words[L]=this.words[L]&~(1<<z),this._strip()},o.prototype.iadd=function(x){var C;if(this.negative!==0&&x.negative===0)return this.negative=0,C=this.isub(x),this.negative^=1,this._normSign();if(this.negative===0&&x.negative!==0)return x.negative=0,C=this.isub(x),x.negative=1,C._normSign();var L,z;this.length>x.length?(L=this,z=x):(L=x,z=this);for(var R=0,I=0;I<z.length;I++)C=(L.words[I]|0)+(z.words[I]|0)+R,this.words[I]=C&67108863,R=C>>>26;for(;R!==0&&I<L.length;I++)C=(L.words[I]|0)+R,this.words[I]=C&67108863,R=C>>>26;if(this.length=L.length,R!==0)this.words[this.length]=R,this.length++;else if(L!==this)for(;I<L.length;I++)this.words[I]=L.words[I];return this},o.prototype.add=function(x){var C;return x.negative!==0&&this.negative===0?(x.negative=0,C=this.sub(x),x.negative^=1,C):x.negative===0&&this.negative!==0?(this.negative=0,C=x.sub(this),this.negative=1,C):this.length>x.length?this.clone().iadd(x):x.clone().iadd(this)},o.prototype.isub=function(x){if(x.negative!==0){x.negative=0;var C=this.iadd(x);return x.negative=1,C._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(x),this.negative=1,this._normSign();var L=this.cmp(x);if(L===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,R;L>0?(z=this,R=x):(z=x,R=this);for(var I=0,N=0;N<R.length;N++)C=(z.words[N]|0)-(R.words[N]|0)+I,I=C>>26,this.words[N]=C&67108863;for(;I!==0&&N<z.length;N++)C=(z.words[N]|0)+I,I=C>>26,this.words[N]=C&67108863;if(I===0&&N<z.length&&z!==this)for(;N<z.length;N++)this.words[N]=z.words[N];return this.length=Math.max(this.length,N),z!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(x){return this.clone().isub(x)};function j(A,x,C){C.negative=x.negative^A.negative;var L=A.length+x.length|0;C.length=L,L=L-1|0;var z=A.words[0]|0,R=x.words[0]|0,I=z*R,N=I&67108863,F=I/67108864|0;C.words[0]=N;for(var E=1;E<L;E++){for(var M=F>>>26,ee=F&67108863,O=Math.min(E,x.length-1),q=Math.max(0,E-A.length+1);q<=O;q++){var H=E-q|0;z=A.words[H]|0,R=x.words[q]|0,I=z*R+ee,M+=I/67108864|0,ee=I&67108863}C.words[E]=ee|0,F=M|0}return F!==0?C.words[E]=F|0:C.length--,C._strip()}var _=function(x,C,L){var z=x.words,R=C.words,I=L.words,N=0,F,E,M,ee=z[0]|0,O=ee&8191,q=ee>>>13,H=z[1]|0,J=H&8191,Q=H>>>13,ne=z[2]|0,se=ne&8191,ie=ne>>>13,pe=z[3]|0,le=pe&8191,me=pe>>>13,Ee=z[4]|0,te=Ee&8191,Ne=Ee>>>13,Pe=z[5]|0,et=Pe&8191,Le=Pe>>>13,Se=z[6]|0,Te=Se&8191,ze=Se>>>13,dt=z[7]|0,oe=dt&8191,ue=dt>>>13,ge=z[8]|0,be=ge&8191,ve=ge>>>13,Ke=z[9]|0,Me=Ke&8191,He=Ke>>>13,ct=R[0]|0,Je=ct&8191,Ye=ct>>>13,St=R[1]|0,bt=St&8191,Ze=St>>>13,An=R[2]|0,Dt=An&8191,Ot=An>>>13,wn=R[3]|0,nn=wn&8191,Xe=wn>>>13,Ft=R[4]|0,yt=Ft&8191,Ge=Ft>>>13,rt=R[5]|0,st=rt&8191,Re=rt>>>13,it=R[6]|0,Ue=it&8191,tt=it>>>13,Cn=R[7]|0,at=Cn&8191,Rt=Cn>>>13,On=R[8]|0,zt=On&8191,Et=On>>>13,Yt=R[9]|0,Jt=Yt&8191,Lt=Yt>>>13;L.negative=x.negative^C.negative,L.length=19,F=Math.imul(O,Je),E=Math.imul(O,Ye),E=E+Math.imul(q,Je)|0,M=Math.imul(q,Ye);var Kn=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,F=Math.imul(J,Je),E=Math.imul(J,Ye),E=E+Math.imul(Q,Je)|0,M=Math.imul(Q,Ye),F=F+Math.imul(O,bt)|0,E=E+Math.imul(O,Ze)|0,E=E+Math.imul(q,bt)|0,M=M+Math.imul(q,Ze)|0;var Fn=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,F=Math.imul(se,Je),E=Math.imul(se,Ye),E=E+Math.imul(ie,Je)|0,M=Math.imul(ie,Ye),F=F+Math.imul(J,bt)|0,E=E+Math.imul(J,Ze)|0,E=E+Math.imul(Q,bt)|0,M=M+Math.imul(Q,Ze)|0,F=F+Math.imul(O,Dt)|0,E=E+Math.imul(O,Ot)|0,E=E+Math.imul(q,Dt)|0,M=M+Math.imul(q,Ot)|0;var Sn=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,F=Math.imul(le,Je),E=Math.imul(le,Ye),E=E+Math.imul(me,Je)|0,M=Math.imul(me,Ye),F=F+Math.imul(se,bt)|0,E=E+Math.imul(se,Ze)|0,E=E+Math.imul(ie,bt)|0,M=M+Math.imul(ie,Ze)|0,F=F+Math.imul(J,Dt)|0,E=E+Math.imul(J,Ot)|0,E=E+Math.imul(Q,Dt)|0,M=M+Math.imul(Q,Ot)|0,F=F+Math.imul(O,nn)|0,E=E+Math.imul(O,Xe)|0,E=E+Math.imul(q,nn)|0,M=M+Math.imul(q,Xe)|0;var Tn=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,F=Math.imul(te,Je),E=Math.imul(te,Ye),E=E+Math.imul(Ne,Je)|0,M=Math.imul(Ne,Ye),F=F+Math.imul(le,bt)|0,E=E+Math.imul(le,Ze)|0,E=E+Math.imul(me,bt)|0,M=M+Math.imul(me,Ze)|0,F=F+Math.imul(se,Dt)|0,E=E+Math.imul(se,Ot)|0,E=E+Math.imul(ie,Dt)|0,M=M+Math.imul(ie,Ot)|0,F=F+Math.imul(J,nn)|0,E=E+Math.imul(J,Xe)|0,E=E+Math.imul(Q,nn)|0,M=M+Math.imul(Q,Xe)|0,F=F+Math.imul(O,yt)|0,E=E+Math.imul(O,Ge)|0,E=E+Math.imul(q,yt)|0,M=M+Math.imul(q,Ge)|0;var Pn=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,F=Math.imul(et,Je),E=Math.imul(et,Ye),E=E+Math.imul(Le,Je)|0,M=Math.imul(Le,Ye),F=F+Math.imul(te,bt)|0,E=E+Math.imul(te,Ze)|0,E=E+Math.imul(Ne,bt)|0,M=M+Math.imul(Ne,Ze)|0,F=F+Math.imul(le,Dt)|0,E=E+Math.imul(le,Ot)|0,E=E+Math.imul(me,Dt)|0,M=M+Math.imul(me,Ot)|0,F=F+Math.imul(se,nn)|0,E=E+Math.imul(se,Xe)|0,E=E+Math.imul(ie,nn)|0,M=M+Math.imul(ie,Xe)|0,F=F+Math.imul(J,yt)|0,E=E+Math.imul(J,Ge)|0,E=E+Math.imul(Q,yt)|0,M=M+Math.imul(Q,Ge)|0,F=F+Math.imul(O,st)|0,E=E+Math.imul(O,Re)|0,E=E+Math.imul(q,st)|0,M=M+Math.imul(q,Re)|0;var Ws=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Ws>>>26)|0,Ws&=67108863,F=Math.imul(Te,Je),E=Math.imul(Te,Ye),E=E+Math.imul(ze,Je)|0,M=Math.imul(ze,Ye),F=F+Math.imul(et,bt)|0,E=E+Math.imul(et,Ze)|0,E=E+Math.imul(Le,bt)|0,M=M+Math.imul(Le,Ze)|0,F=F+Math.imul(te,Dt)|0,E=E+Math.imul(te,Ot)|0,E=E+Math.imul(Ne,Dt)|0,M=M+Math.imul(Ne,Ot)|0,F=F+Math.imul(le,nn)|0,E=E+Math.imul(le,Xe)|0,E=E+Math.imul(me,nn)|0,M=M+Math.imul(me,Xe)|0,F=F+Math.imul(se,yt)|0,E=E+Math.imul(se,Ge)|0,E=E+Math.imul(ie,yt)|0,M=M+Math.imul(ie,Ge)|0,F=F+Math.imul(J,st)|0,E=E+Math.imul(J,Re)|0,E=E+Math.imul(Q,st)|0,M=M+Math.imul(Q,Re)|0,F=F+Math.imul(O,Ue)|0,E=E+Math.imul(O,tt)|0,E=E+Math.imul(q,Ue)|0,M=M+Math.imul(q,tt)|0;var Oi=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,F=Math.imul(oe,Je),E=Math.imul(oe,Ye),E=E+Math.imul(ue,Je)|0,M=Math.imul(ue,Ye),F=F+Math.imul(Te,bt)|0,E=E+Math.imul(Te,Ze)|0,E=E+Math.imul(ze,bt)|0,M=M+Math.imul(ze,Ze)|0,F=F+Math.imul(et,Dt)|0,E=E+Math.imul(et,Ot)|0,E=E+Math.imul(Le,Dt)|0,M=M+Math.imul(Le,Ot)|0,F=F+Math.imul(te,nn)|0,E=E+Math.imul(te,Xe)|0,E=E+Math.imul(Ne,nn)|0,M=M+Math.imul(Ne,Xe)|0,F=F+Math.imul(le,yt)|0,E=E+Math.imul(le,Ge)|0,E=E+Math.imul(me,yt)|0,M=M+Math.imul(me,Ge)|0,F=F+Math.imul(se,st)|0,E=E+Math.imul(se,Re)|0,E=E+Math.imul(ie,st)|0,M=M+Math.imul(ie,Re)|0,F=F+Math.imul(J,Ue)|0,E=E+Math.imul(J,tt)|0,E=E+Math.imul(Q,Ue)|0,M=M+Math.imul(Q,tt)|0,F=F+Math.imul(O,at)|0,E=E+Math.imul(O,Rt)|0,E=E+Math.imul(q,at)|0,M=M+Math.imul(q,Rt)|0;var Xt=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,F=Math.imul(be,Je),E=Math.imul(be,Ye),E=E+Math.imul(ve,Je)|0,M=Math.imul(ve,Ye),F=F+Math.imul(oe,bt)|0,E=E+Math.imul(oe,Ze)|0,E=E+Math.imul(ue,bt)|0,M=M+Math.imul(ue,Ze)|0,F=F+Math.imul(Te,Dt)|0,E=E+Math.imul(Te,Ot)|0,E=E+Math.imul(ze,Dt)|0,M=M+Math.imul(ze,Ot)|0,F=F+Math.imul(et,nn)|0,E=E+Math.imul(et,Xe)|0,E=E+Math.imul(Le,nn)|0,M=M+Math.imul(Le,Xe)|0,F=F+Math.imul(te,yt)|0,E=E+Math.imul(te,Ge)|0,E=E+Math.imul(Ne,yt)|0,M=M+Math.imul(Ne,Ge)|0,F=F+Math.imul(le,st)|0,E=E+Math.imul(le,Re)|0,E=E+Math.imul(me,st)|0,M=M+Math.imul(me,Re)|0,F=F+Math.imul(se,Ue)|0,E=E+Math.imul(se,tt)|0,E=E+Math.imul(ie,Ue)|0,M=M+Math.imul(ie,tt)|0,F=F+Math.imul(J,at)|0,E=E+Math.imul(J,Rt)|0,E=E+Math.imul(Q,at)|0,M=M+Math.imul(Q,Rt)|0,F=F+Math.imul(O,zt)|0,E=E+Math.imul(O,Et)|0,E=E+Math.imul(q,zt)|0,M=M+Math.imul(q,Et)|0;var zn=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(zn>>>26)|0,zn&=67108863,F=Math.imul(Me,Je),E=Math.imul(Me,Ye),E=E+Math.imul(He,Je)|0,M=Math.imul(He,Ye),F=F+Math.imul(be,bt)|0,E=E+Math.imul(be,Ze)|0,E=E+Math.imul(ve,bt)|0,M=M+Math.imul(ve,Ze)|0,F=F+Math.imul(oe,Dt)|0,E=E+Math.imul(oe,Ot)|0,E=E+Math.imul(ue,Dt)|0,M=M+Math.imul(ue,Ot)|0,F=F+Math.imul(Te,nn)|0,E=E+Math.imul(Te,Xe)|0,E=E+Math.imul(ze,nn)|0,M=M+Math.imul(ze,Xe)|0,F=F+Math.imul(et,yt)|0,E=E+Math.imul(et,Ge)|0,E=E+Math.imul(Le,yt)|0,M=M+Math.imul(Le,Ge)|0,F=F+Math.imul(te,st)|0,E=E+Math.imul(te,Re)|0,E=E+Math.imul(Ne,st)|0,M=M+Math.imul(Ne,Re)|0,F=F+Math.imul(le,Ue)|0,E=E+Math.imul(le,tt)|0,E=E+Math.imul(me,Ue)|0,M=M+Math.imul(me,tt)|0,F=F+Math.imul(se,at)|0,E=E+Math.imul(se,Rt)|0,E=E+Math.imul(ie,at)|0,M=M+Math.imul(ie,Rt)|0,F=F+Math.imul(J,zt)|0,E=E+Math.imul(J,Et)|0,E=E+Math.imul(Q,zt)|0,M=M+Math.imul(Q,Et)|0,F=F+Math.imul(O,Jt)|0,E=E+Math.imul(O,Lt)|0,E=E+Math.imul(q,Jt)|0,M=M+Math.imul(q,Lt)|0;var Nr=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,F=Math.imul(Me,bt),E=Math.imul(Me,Ze),E=E+Math.imul(He,bt)|0,M=Math.imul(He,Ze),F=F+Math.imul(be,Dt)|0,E=E+Math.imul(be,Ot)|0,E=E+Math.imul(ve,Dt)|0,M=M+Math.imul(ve,Ot)|0,F=F+Math.imul(oe,nn)|0,E=E+Math.imul(oe,Xe)|0,E=E+Math.imul(ue,nn)|0,M=M+Math.imul(ue,Xe)|0,F=F+Math.imul(Te,yt)|0,E=E+Math.imul(Te,Ge)|0,E=E+Math.imul(ze,yt)|0,M=M+Math.imul(ze,Ge)|0,F=F+Math.imul(et,st)|0,E=E+Math.imul(et,Re)|0,E=E+Math.imul(Le,st)|0,M=M+Math.imul(Le,Re)|0,F=F+Math.imul(te,Ue)|0,E=E+Math.imul(te,tt)|0,E=E+Math.imul(Ne,Ue)|0,M=M+Math.imul(Ne,tt)|0,F=F+Math.imul(le,at)|0,E=E+Math.imul(le,Rt)|0,E=E+Math.imul(me,at)|0,M=M+Math.imul(me,Rt)|0,F=F+Math.imul(se,zt)|0,E=E+Math.imul(se,Et)|0,E=E+Math.imul(ie,zt)|0,M=M+Math.imul(ie,Et)|0,F=F+Math.imul(J,Jt)|0,E=E+Math.imul(J,Lt)|0,E=E+Math.imul(Q,Jt)|0,M=M+Math.imul(Q,Lt)|0;var Li=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Li>>>26)|0,Li&=67108863,F=Math.imul(Me,Dt),E=Math.imul(Me,Ot),E=E+Math.imul(He,Dt)|0,M=Math.imul(He,Ot),F=F+Math.imul(be,nn)|0,E=E+Math.imul(be,Xe)|0,E=E+Math.imul(ve,nn)|0,M=M+Math.imul(ve,Xe)|0,F=F+Math.imul(oe,yt)|0,E=E+Math.imul(oe,Ge)|0,E=E+Math.imul(ue,yt)|0,M=M+Math.imul(ue,Ge)|0,F=F+Math.imul(Te,st)|0,E=E+Math.imul(Te,Re)|0,E=E+Math.imul(ze,st)|0,M=M+Math.imul(ze,Re)|0,F=F+Math.imul(et,Ue)|0,E=E+Math.imul(et,tt)|0,E=E+Math.imul(Le,Ue)|0,M=M+Math.imul(Le,tt)|0,F=F+Math.imul(te,at)|0,E=E+Math.imul(te,Rt)|0,E=E+Math.imul(Ne,at)|0,M=M+Math.imul(Ne,Rt)|0,F=F+Math.imul(le,zt)|0,E=E+Math.imul(le,Et)|0,E=E+Math.imul(me,zt)|0,M=M+Math.imul(me,Et)|0,F=F+Math.imul(se,Jt)|0,E=E+Math.imul(se,Lt)|0,E=E+Math.imul(ie,Jt)|0,M=M+Math.imul(ie,Lt)|0;var ui=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(ui>>>26)|0,ui&=67108863,F=Math.imul(Me,nn),E=Math.imul(Me,Xe),E=E+Math.imul(He,nn)|0,M=Math.imul(He,Xe),F=F+Math.imul(be,yt)|0,E=E+Math.imul(be,Ge)|0,E=E+Math.imul(ve,yt)|0,M=M+Math.imul(ve,Ge)|0,F=F+Math.imul(oe,st)|0,E=E+Math.imul(oe,Re)|0,E=E+Math.imul(ue,st)|0,M=M+Math.imul(ue,Re)|0,F=F+Math.imul(Te,Ue)|0,E=E+Math.imul(Te,tt)|0,E=E+Math.imul(ze,Ue)|0,M=M+Math.imul(ze,tt)|0,F=F+Math.imul(et,at)|0,E=E+Math.imul(et,Rt)|0,E=E+Math.imul(Le,at)|0,M=M+Math.imul(Le,Rt)|0,F=F+Math.imul(te,zt)|0,E=E+Math.imul(te,Et)|0,E=E+Math.imul(Ne,zt)|0,M=M+Math.imul(Ne,Et)|0,F=F+Math.imul(le,Jt)|0,E=E+Math.imul(le,Lt)|0,E=E+Math.imul(me,Jt)|0,M=M+Math.imul(me,Lt)|0;var di=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(di>>>26)|0,di&=67108863,F=Math.imul(Me,yt),E=Math.imul(Me,Ge),E=E+Math.imul(He,yt)|0,M=Math.imul(He,Ge),F=F+Math.imul(be,st)|0,E=E+Math.imul(be,Re)|0,E=E+Math.imul(ve,st)|0,M=M+Math.imul(ve,Re)|0,F=F+Math.imul(oe,Ue)|0,E=E+Math.imul(oe,tt)|0,E=E+Math.imul(ue,Ue)|0,M=M+Math.imul(ue,tt)|0,F=F+Math.imul(Te,at)|0,E=E+Math.imul(Te,Rt)|0,E=E+Math.imul(ze,at)|0,M=M+Math.imul(ze,Rt)|0,F=F+Math.imul(et,zt)|0,E=E+Math.imul(et,Et)|0,E=E+Math.imul(Le,zt)|0,M=M+Math.imul(Le,Et)|0,F=F+Math.imul(te,Jt)|0,E=E+Math.imul(te,Lt)|0,E=E+Math.imul(Ne,Jt)|0,M=M+Math.imul(Ne,Lt)|0;var tr=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(tr>>>26)|0,tr&=67108863,F=Math.imul(Me,st),E=Math.imul(Me,Re),E=E+Math.imul(He,st)|0,M=Math.imul(He,Re),F=F+Math.imul(be,Ue)|0,E=E+Math.imul(be,tt)|0,E=E+Math.imul(ve,Ue)|0,M=M+Math.imul(ve,tt)|0,F=F+Math.imul(oe,at)|0,E=E+Math.imul(oe,Rt)|0,E=E+Math.imul(ue,at)|0,M=M+Math.imul(ue,Rt)|0,F=F+Math.imul(Te,zt)|0,E=E+Math.imul(Te,Et)|0,E=E+Math.imul(ze,zt)|0,M=M+Math.imul(ze,Et)|0,F=F+Math.imul(et,Jt)|0,E=E+Math.imul(et,Lt)|0,E=E+Math.imul(Le,Jt)|0,M=M+Math.imul(Le,Lt)|0;var _e=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(_e>>>26)|0,_e&=67108863,F=Math.imul(Me,Ue),E=Math.imul(Me,tt),E=E+Math.imul(He,Ue)|0,M=Math.imul(He,tt),F=F+Math.imul(be,at)|0,E=E+Math.imul(be,Rt)|0,E=E+Math.imul(ve,at)|0,M=M+Math.imul(ve,Rt)|0,F=F+Math.imul(oe,zt)|0,E=E+Math.imul(oe,Et)|0,E=E+Math.imul(ue,zt)|0,M=M+Math.imul(ue,Et)|0,F=F+Math.imul(Te,Jt)|0,E=E+Math.imul(Te,Lt)|0,E=E+Math.imul(ze,Jt)|0,M=M+Math.imul(ze,Lt)|0;var Ce=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,F=Math.imul(Me,at),E=Math.imul(Me,Rt),E=E+Math.imul(He,at)|0,M=Math.imul(He,Rt),F=F+Math.imul(be,zt)|0,E=E+Math.imul(be,Et)|0,E=E+Math.imul(ve,zt)|0,M=M+Math.imul(ve,Et)|0,F=F+Math.imul(oe,Jt)|0,E=E+Math.imul(oe,Lt)|0,E=E+Math.imul(ue,Jt)|0,M=M+Math.imul(ue,Lt)|0;var qe=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(qe>>>26)|0,qe&=67108863,F=Math.imul(Me,zt),E=Math.imul(Me,Et),E=E+Math.imul(He,zt)|0,M=Math.imul(He,Et),F=F+Math.imul(be,Jt)|0,E=E+Math.imul(be,Lt)|0,E=E+Math.imul(ve,Jt)|0,M=M+Math.imul(ve,Lt)|0;var vt=(N+F|0)+((E&8191)<<13)|0;N=(M+(E>>>13)|0)+(vt>>>26)|0,vt&=67108863,F=Math.imul(Me,Jt),E=Math.imul(Me,Lt),E=E+Math.imul(He,Jt)|0,M=Math.imul(He,Lt);var _t=(N+F|0)+((E&8191)<<13)|0;return N=(M+(E>>>13)|0)+(_t>>>26)|0,_t&=67108863,I[0]=Kn,I[1]=Fn,I[2]=Sn,I[3]=Tn,I[4]=Pn,I[5]=Ws,I[6]=Oi,I[7]=Xt,I[8]=zn,I[9]=Nr,I[10]=Li,I[11]=ui,I[12]=di,I[13]=tr,I[14]=_e,I[15]=Ce,I[16]=qe,I[17]=vt,I[18]=_t,N!==0&&(I[19]=N,L.length++),L};Math.imul||(_=j);function v(A,x,C){C.negative=x.negative^A.negative,C.length=A.length+x.length;for(var L=0,z=0,R=0;R<C.length-1;R++){var I=z;z=0;for(var N=L&67108863,F=Math.min(R,x.length-1),E=Math.max(0,R-A.length+1);E<=F;E++){var M=R-E,ee=A.words[M]|0,O=x.words[E]|0,q=ee*O,H=q&67108863;I=I+(q/67108864|0)|0,H=H+N|0,N=H&67108863,I=I+(H>>>26)|0,z+=I>>>26,I&=67108863}C.words[R]=N,L=I,I=z}return L!==0?C.words[R]=L:C.length--,C._strip()}function P(A,x,C){return v(A,x,C)}o.prototype.mulTo=function(x,C){var L,z=this.length+x.length;return this.length===10&&x.length===10?L=_(this,x,C):z<63?L=j(this,x,C):z<1024?L=v(this,x,C):L=P(this,x,C),L},o.prototype.mul=function(x){var C=new o(null);return C.words=new Array(this.length+x.length),this.mulTo(x,C)},o.prototype.mulf=function(x){var C=new o(null);return C.words=new Array(this.length+x.length),P(this,x,C)},o.prototype.imul=function(x){return this.clone().mulTo(x,this)},o.prototype.imuln=function(x){var C=x<0;C&&(x=-x),r(typeof x=="number"),r(x<67108864);for(var L=0,z=0;z<this.length;z++){var R=(this.words[z]|0)*x,I=(R&67108863)+(L&67108863);L>>=26,L+=R/67108864|0,L+=I>>>26,this.words[z]=I&67108863}return L!==0&&(this.words[z]=L,this.length++),this.length=x===0?1:this.length,C?this.ineg():this},o.prototype.muln=function(x){return this.clone().imuln(x)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(x){var C=T(x);if(C.length===0)return new o(1);for(var L=this,z=0;z<C.length&&C[z]===0;z++,L=L.sqr());if(++z<C.length)for(var R=L.sqr();z<C.length;z++,R=R.sqr())C[z]!==0&&(L=L.mul(R));return L},o.prototype.iushln=function(x){r(typeof x=="number"&&x>=0);var C=x%26,L=(x-C)/26,z=67108863>>>26-C<<26-C,R;if(C!==0){var I=0;for(R=0;R<this.length;R++){var N=this.words[R]&z,F=(this.words[R]|0)-N<<C;this.words[R]=F|I,I=N>>>26-C}I&&(this.words[R]=I,this.length++)}if(L!==0){for(R=this.length-1;R>=0;R--)this.words[R+L]=this.words[R];for(R=0;R<L;R++)this.words[R]=0;this.length+=L}return this._strip()},o.prototype.ishln=function(x){return r(this.negative===0),this.iushln(x)},o.prototype.iushrn=function(x,C,L){r(typeof x=="number"&&x>=0);var z;C?z=(C-C%26)/26:z=0;var R=x%26,I=Math.min((x-R)/26,this.length),N=67108863^67108863>>>R<<R,F=L;if(z-=I,z=Math.max(0,z),F){for(var E=0;E<I;E++)F.words[E]=this.words[E];F.length=I}if(I!==0)if(this.length>I)for(this.length-=I,E=0;E<this.length;E++)this.words[E]=this.words[E+I];else this.words[0]=0,this.length=1;var M=0;for(E=this.length-1;E>=0&&(M!==0||E>=z);E--){var ee=this.words[E]|0;this.words[E]=M<<26-R|ee>>>R,M=ee&N}return F&&M!==0&&(F.words[F.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(x,C,L){return r(this.negative===0),this.iushrn(x,C,L)},o.prototype.shln=function(x){return this.clone().ishln(x)},o.prototype.ushln=function(x){return this.clone().iushln(x)},o.prototype.shrn=function(x){return this.clone().ishrn(x)},o.prototype.ushrn=function(x){return this.clone().iushrn(x)},o.prototype.testn=function(x){r(typeof x=="number"&&x>=0);var C=x%26,L=(x-C)/26,z=1<<C;if(this.length<=L)return!1;var R=this.words[L];return!!(R&z)},o.prototype.imaskn=function(x){r(typeof x=="number"&&x>=0);var C=x%26,L=(x-C)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=L)return this;if(C!==0&&L++,this.length=Math.min(L,this.length),C!==0){var z=67108863^67108863>>>C<<C;this.words[this.length-1]&=z}return this._strip()},o.prototype.maskn=function(x){return this.clone().imaskn(x)},o.prototype.iaddn=function(x){return r(typeof x=="number"),r(x<67108864),x<0?this.isubn(-x):this.negative!==0?this.length===1&&(this.words[0]|0)<=x?(this.words[0]=x-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(x),this.negative=1,this):this._iaddn(x)},o.prototype._iaddn=function(x){this.words[0]+=x;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},o.prototype.isubn=function(x){if(r(typeof x=="number"),r(x<67108864),x<0)return this.iaddn(-x);if(this.negative!==0)return this.negative=0,this.iaddn(x),this.negative=1,this;if(this.words[0]-=x,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this._strip()},o.prototype.addn=function(x){return this.clone().iaddn(x)},o.prototype.subn=function(x){return this.clone().isubn(x)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(x,C,L){var z=x.length+L,R;this._expand(z);var I,N=0;for(R=0;R<x.length;R++){I=(this.words[R+L]|0)+N;var F=(x.words[R]|0)*C;I-=F&67108863,N=(I>>26)-(F/67108864|0),this.words[R+L]=I&67108863}for(;R<this.length-L;R++)I=(this.words[R+L]|0)+N,N=I>>26,this.words[R+L]=I&67108863;if(N===0)return this._strip();for(r(N===-1),N=0,R=0;R<this.length;R++)I=-(this.words[R]|0)+N,N=I>>26,this.words[R]=I&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(x,C){var L=this.length-x.length,z=this.clone(),R=x,I=R.words[R.length-1]|0,N=this._countBits(I);L=26-N,L!==0&&(R=R.ushln(L),z.iushln(L),I=R.words[R.length-1]|0);var F=z.length-R.length,E;if(C!=="mod"){E=new o(null),E.length=F+1,E.words=new Array(E.length);for(var M=0;M<E.length;M++)E.words[M]=0}var ee=z.clone()._ishlnsubmul(R,1,F);ee.negative===0&&(z=ee,E&&(E.words[F]=1));for(var O=F-1;O>=0;O--){var q=(z.words[R.length+O]|0)*67108864+(z.words[R.length+O-1]|0);for(q=Math.min(q/I|0,67108863),z._ishlnsubmul(R,q,O);z.negative!==0;)q--,z.negative=0,z._ishlnsubmul(R,1,O),z.isZero()||(z.negative^=1);E&&(E.words[O]=q)}return E&&E._strip(),z._strip(),C!=="div"&&L!==0&&z.iushrn(L),{div:E||null,mod:z}},o.prototype.divmod=function(x,C,L){if(r(!x.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var z,R,I;return this.negative!==0&&x.negative===0?(I=this.neg().divmod(x,C),C!=="mod"&&(z=I.div.neg()),C!=="div"&&(R=I.mod.neg(),L&&R.negative!==0&&R.iadd(x)),{div:z,mod:R}):this.negative===0&&x.negative!==0?(I=this.divmod(x.neg(),C),C!=="mod"&&(z=I.div.neg()),{div:z,mod:I.mod}):(this.negative&x.negative)!==0?(I=this.neg().divmod(x.neg(),C),C!=="div"&&(R=I.mod.neg(),L&&R.negative!==0&&R.isub(x)),{div:I.div,mod:R}):x.length>this.length||this.cmp(x)<0?{div:new o(0),mod:this}:x.length===1?C==="div"?{div:this.divn(x.words[0]),mod:null}:C==="mod"?{div:null,mod:new o(this.modrn(x.words[0]))}:{div:this.divn(x.words[0]),mod:new o(this.modrn(x.words[0]))}:this._wordDiv(x,C)},o.prototype.div=function(x){return this.divmod(x,"div",!1).div},o.prototype.mod=function(x){return this.divmod(x,"mod",!1).mod},o.prototype.umod=function(x){return this.divmod(x,"mod",!0).mod},o.prototype.divRound=function(x){var C=this.divmod(x);if(C.mod.isZero())return C.div;var L=C.div.negative!==0?C.mod.isub(x):C.mod,z=x.ushrn(1),R=x.andln(1),I=L.cmp(z);return I<0||R===1&&I===0?C.div:C.div.negative!==0?C.div.isubn(1):C.div.iaddn(1)},o.prototype.modrn=function(x){var C=x<0;C&&(x=-x),r(x<=67108863);for(var L=(1<<26)%x,z=0,R=this.length-1;R>=0;R--)z=(L*z+(this.words[R]|0))%x;return C?-z:z},o.prototype.modn=function(x){return this.modrn(x)},o.prototype.idivn=function(x){var C=x<0;C&&(x=-x),r(x<=67108863);for(var L=0,z=this.length-1;z>=0;z--){var R=(this.words[z]|0)+L*67108864;this.words[z]=R/x|0,L=R%x}return this._strip(),C?this.ineg():this},o.prototype.divn=function(x){return this.clone().idivn(x)},o.prototype.egcd=function(x){r(x.negative===0),r(!x.isZero());var C=this,L=x.clone();C.negative!==0?C=C.umod(x):C=C.clone();for(var z=new o(1),R=new o(0),I=new o(0),N=new o(1),F=0;C.isEven()&&L.isEven();)C.iushrn(1),L.iushrn(1),++F;for(var E=L.clone(),M=C.clone();!C.isZero();){for(var ee=0,O=1;(C.words[0]&O)===0&&ee<26;++ee,O<<=1);if(ee>0)for(C.iushrn(ee);ee-- >0;)(z.isOdd()||R.isOdd())&&(z.iadd(E),R.isub(M)),z.iushrn(1),R.iushrn(1);for(var q=0,H=1;(L.words[0]&H)===0&&q<26;++q,H<<=1);if(q>0)for(L.iushrn(q);q-- >0;)(I.isOdd()||N.isOdd())&&(I.iadd(E),N.isub(M)),I.iushrn(1),N.iushrn(1);C.cmp(L)>=0?(C.isub(L),z.isub(I),R.isub(N)):(L.isub(C),I.isub(z),N.isub(R))}return{a:I,b:N,gcd:L.iushln(F)}},o.prototype._invmp=function(x){r(x.negative===0),r(!x.isZero());var C=this,L=x.clone();C.negative!==0?C=C.umod(x):C=C.clone();for(var z=new o(1),R=new o(0),I=L.clone();C.cmpn(1)>0&&L.cmpn(1)>0;){for(var N=0,F=1;(C.words[0]&F)===0&&N<26;++N,F<<=1);if(N>0)for(C.iushrn(N);N-- >0;)z.isOdd()&&z.iadd(I),z.iushrn(1);for(var E=0,M=1;(L.words[0]&M)===0&&E<26;++E,M<<=1);if(E>0)for(L.iushrn(E);E-- >0;)R.isOdd()&&R.iadd(I),R.iushrn(1);C.cmp(L)>=0?(C.isub(L),z.isub(R)):(L.isub(C),R.isub(z))}var ee;return C.cmpn(1)===0?ee=z:ee=R,ee.cmpn(0)<0&&ee.iadd(x),ee},o.prototype.gcd=function(x){if(this.isZero())return x.abs();if(x.isZero())return this.abs();var C=this.clone(),L=x.clone();C.negative=0,L.negative=0;for(var z=0;C.isEven()&&L.isEven();z++)C.iushrn(1),L.iushrn(1);do{for(;C.isEven();)C.iushrn(1);for(;L.isEven();)L.iushrn(1);var R=C.cmp(L);if(R<0){var I=C;C=L,L=I}else if(R===0||L.cmpn(1)===0)break;C.isub(L)}while(!0);return L.iushln(z)},o.prototype.invm=function(x){return this.egcd(x).a.umod(x)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(x){return this.words[0]&x},o.prototype.bincn=function(x){r(typeof x=="number");var C=x%26,L=(x-C)/26,z=1<<C;if(this.length<=L)return this._expand(L+1),this.words[L]|=z,this;for(var R=z,I=L;R!==0&&I<this.length;I++){var N=this.words[I]|0;N+=R,R=N>>>26,N&=67108863,this.words[I]=N}return R!==0&&(this.words[I]=R,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(x){var C=x<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;this._strip();var L;if(this.length>1)L=1;else{C&&(x=-x),r(x<=67108863,"Number is too big");var z=this.words[0]|0;L=z===x?0:z<x?-1:1}return this.negative!==0?-L|0:L},o.prototype.cmp=function(x){if(this.negative!==0&&x.negative===0)return-1;if(this.negative===0&&x.negative!==0)return 1;var C=this.ucmp(x);return this.negative!==0?-C|0:C},o.prototype.ucmp=function(x){if(this.length>x.length)return 1;if(this.length<x.length)return-1;for(var C=0,L=this.length-1;L>=0;L--){var z=this.words[L]|0,R=x.words[L]|0;if(z!==R){z<R?C=-1:z>R&&(C=1);break}}return C},o.prototype.gtn=function(x){return this.cmpn(x)===1},o.prototype.gt=function(x){return this.cmp(x)===1},o.prototype.gten=function(x){return this.cmpn(x)>=0},o.prototype.gte=function(x){return this.cmp(x)>=0},o.prototype.ltn=function(x){return this.cmpn(x)===-1},o.prototype.lt=function(x){return this.cmp(x)===-1},o.prototype.lten=function(x){return this.cmpn(x)<=0},o.prototype.lte=function(x){return this.cmp(x)<=0},o.prototype.eqn=function(x){return this.cmpn(x)===0},o.prototype.eq=function(x){return this.cmp(x)===0},o.red=function(x){return new X(x)},o.prototype.toRed=function(x){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),x.convertTo(this)._forceRed(x)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(x){return this.red=x,this},o.prototype.forceRed=function(x){return r(!this.red,"Already a number in reduction context"),this._forceRed(x)},o.prototype.redAdd=function(x){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,x)},o.prototype.redIAdd=function(x){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,x)},o.prototype.redSub=function(x){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,x)},o.prototype.redISub=function(x){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,x)},o.prototype.redShl=function(x){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,x)},o.prototype.redMul=function(x){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.mul(this,x)},o.prototype.redIMul=function(x){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.imul(this,x)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(x){return r(this.red&&!x.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,x)};var D={k256:null,p224:null,p192:null,p25519:null};function $(A,x){this.name=A,this.p=new o(x,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var x=new o(null);return x.words=new Array(Math.ceil(this.n/13)),x},$.prototype.ireduce=function(x){var C=x,L;do this.split(C,this.tmp),C=this.imulK(C),C=C.iadd(this.tmp),L=C.bitLength();while(L>this.n);var z=L<this.n?-1:C.ucmp(this.p);return z===0?(C.words[0]=0,C.length=1):z>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},$.prototype.split=function(x,C){x.iushrn(this.n,0,C)},$.prototype.imulK=function(x){return x.imul(this.k)};function U(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(U,$),U.prototype.split=function(x,C){for(var L=4194303,z=Math.min(x.length,9),R=0;R<z;R++)C.words[R]=x.words[R];if(C.length=z,x.length<=9){x.words[0]=0,x.length=1;return}var I=x.words[9];for(C.words[C.length++]=I&L,R=10;R<x.length;R++){var N=x.words[R]|0;x.words[R-10]=(N&L)<<4|I>>>22,I=N}I>>>=22,x.words[R-10]=I,I===0&&x.length>10?x.length-=10:x.length-=9},U.prototype.imulK=function(x){x.words[x.length]=0,x.words[x.length+1]=0,x.length+=2;for(var C=0,L=0;L<x.length;L++){var z=x.words[L]|0;C+=z*977,x.words[L]=C&67108863,C=z*64+(C/67108864|0)}return x.words[x.length-1]===0&&(x.length--,x.words[x.length-1]===0&&x.length--),x};function K(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(K,$);function Y(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Y,$);function G(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(G,$),G.prototype.imulK=function(x){for(var C=0,L=0;L<x.length;L++){var z=(x.words[L]|0)*19+C,R=z&67108863;z>>>=26,x.words[L]=R,C=z}return C!==0&&(x.words[x.length++]=C),x},o._prime=function(x){if(D[x])return D[x];var C;if(x==="k256")C=new U;else if(x==="p224")C=new K;else if(x==="p192")C=new Y;else if(x==="p25519")C=new G;else throw new Error("Unknown prime "+x);return D[x]=C,C};function X(A){if(typeof A=="string"){var x=o._prime(A);this.m=x.p,this.prime=x}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}X.prototype._verify1=function(x){r(x.negative===0,"red works only with positives"),r(x.red,"red works only with red numbers")},X.prototype._verify2=function(x,C){r((x.negative|C.negative)===0,"red works only with positives"),r(x.red&&x.red===C.red,"red works only with red numbers")},X.prototype.imod=function(x){return this.prime?this.prime.ireduce(x)._forceRed(this):(f(x,x.umod(this.m)._forceRed(this)),x)},X.prototype.neg=function(x){return x.isZero()?x.clone():this.m.sub(x)._forceRed(this)},X.prototype.add=function(x,C){this._verify2(x,C);var L=x.add(C);return L.cmp(this.m)>=0&&L.isub(this.m),L._forceRed(this)},X.prototype.iadd=function(x,C){this._verify2(x,C);var L=x.iadd(C);return L.cmp(this.m)>=0&&L.isub(this.m),L},X.prototype.sub=function(x,C){this._verify2(x,C);var L=x.sub(C);return L.cmpn(0)<0&&L.iadd(this.m),L._forceRed(this)},X.prototype.isub=function(x,C){this._verify2(x,C);var L=x.isub(C);return L.cmpn(0)<0&&L.iadd(this.m),L},X.prototype.shl=function(x,C){return this._verify1(x),this.imod(x.ushln(C))},X.prototype.imul=function(x,C){return this._verify2(x,C),this.imod(x.imul(C))},X.prototype.mul=function(x,C){return this._verify2(x,C),this.imod(x.mul(C))},X.prototype.isqr=function(x){return this.imul(x,x.clone())},X.prototype.sqr=function(x){return this.mul(x,x)},X.prototype.sqrt=function(x){if(x.isZero())return x.clone();var C=this.m.andln(3);if(r(C%2===1),C===3){var L=this.m.add(new o(1)).iushrn(2);return this.pow(x,L)}for(var z=this.m.subn(1),R=0;!z.isZero()&&z.andln(1)===0;)R++,z.iushrn(1);r(!z.isZero());var I=new o(1).toRed(this),N=I.redNeg(),F=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=new o(2*E*E).toRed(this);this.pow(E,F).cmp(N)!==0;)E.redIAdd(N);for(var M=this.pow(E,z),ee=this.pow(x,z.addn(1).iushrn(1)),O=this.pow(x,z),q=R;O.cmp(I)!==0;){for(var H=O,J=0;H.cmp(I)!==0;J++)H=H.redSqr();r(J<q);var Q=this.pow(M,new o(1).iushln(q-J-1));ee=ee.redMul(Q),M=Q.redSqr(),O=O.redMul(M),q=J}return ee},X.prototype.invm=function(x){var C=x._invmp(this.m);return C.negative!==0?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},X.prototype.pow=function(x,C){if(C.isZero())return new o(1).toRed(this);if(C.cmpn(1)===0)return x.clone();var L=4,z=new Array(1<<L);z[0]=new o(1).toRed(this),z[1]=x;for(var R=2;R<z.length;R++)z[R]=this.mul(z[R-1],x);var I=z[0],N=0,F=0,E=C.bitLength()%26;for(E===0&&(E=26),R=C.length-1;R>=0;R--){for(var M=C.words[R],ee=E-1;ee>=0;ee--){var O=M>>ee&1;if(I!==z[0]&&(I=this.sqr(I)),O===0&&N===0){F=0;continue}N<<=1,N|=O,F++,!(F!==L&&(R!==0||ee!==0))&&(I=this.mul(I,z[N]),F=0,N=0)}E=26}return I},X.prototype.convertTo=function(x){var C=x.umod(this.m);return C===x?C.clone():C},X.prototype.convertFrom=function(x){var C=x.clone();return C.red=null,C},o.mont=function(x){return new V(x)};function V(A){X.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(V,X),V.prototype.convertTo=function(x){return this.imod(x.ushln(this.shift))},V.prototype.convertFrom=function(x){var C=this.imod(x.mul(this.rinv));return C.red=null,C},V.prototype.imul=function(x,C){if(x.isZero()||C.isZero())return x.words[0]=0,x.length=1,x;var L=x.imul(C),z=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=L.isub(z).iushrn(this.shift),I=R;return R.cmp(this.m)>=0?I=R.isub(this.m):R.cmpn(0)<0&&(I=R.iadd(this.m)),I._forceRed(this)},V.prototype.mul=function(x,C){if(x.isZero()||C.isZero())return new o(0)._forceRed(this);var L=x.mul(C),z=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=L.isub(z).iushrn(this.shift),I=R;return R.cmp(this.m)>=0?I=R.isub(this.m):R.cmpn(0)<0&&(I=R.iadd(this.m)),I._forceRed(this)},V.prototype.invm=function(x){var C=this.imod(x._invmp(this.m).mul(this.r2));return C._forceRed(this)}})(t,L9)}(s0)),s0.exports}var z9=F9();const Gt=rc(z9),$9="logger/5.8.0";let V_=!1,q_=!1;const i0={debug:1,default:2,info:2,warning:3,error:4,off:5};let W_=i0.default,m1=null;function B9(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(t){return t.message}return null}const H_=B9();var mT;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(mT||(mT={}));var ba;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(ba||(ba={}));const G_="0123456789abcdef";class fe{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,n){const r=e.toLowerCase();i0[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(W_>i0[r])&&console.log.apply(console,n)}debug(...e){this._log(fe.levels.DEBUG,e)}info(...e){this._log(fe.levels.INFO,e)}warn(...e){this._log(fe.levels.WARNING,e)}makeError(e,n,r){if(q_)return this.makeError("censored error",n,{});n||(n=fe.errors.UNKNOWN_ERROR),r||(r={});const s=[];Object.keys(r).forEach(c=>{const u=r[c];try{if(u instanceof Uint8Array){let f="";for(let p=0;p<u.length;p++)f+=G_[u[p]>>4],f+=G_[u[p]&15];s.push(c+"=Uint8Array(0x"+f+")")}else s.push(c+"="+JSON.stringify(u))}catch{s.push(c+"="+JSON.stringify(r[c].toString()))}}),s.push(`code=${n}`),s.push(`version=${this.version}`);const o=e;let a="";switch(n){case ba.NUMERIC_FAULT:{a="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":a+="-"+c;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case ba.CALL_EXCEPTION:case ba.INSUFFICIENT_FUNDS:case ba.MISSING_NEW:case ba.NONCE_EXPIRED:case ba.REPLACEMENT_UNDERPRICED:case ba.TRANSACTION_REPLACED:case ba.UNPREDICTABLE_GAS_LIMIT:a=n;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const l=new Error(e);return l.reason=o,l.code=n,Object.keys(r).forEach(function(c){l[c]=r[c]}),l}throwError(e,n,r){throw this.makeError(e,n,r)}throwArgumentError(e,n,r){return this.throwError(e,fe.errors.INVALID_ARGUMENT,{argument:n,value:r})}assert(e,n,r,s){e||this.throwError(n,r,s)}assertArgument(e,n,r,s){e||this.throwArgumentError(n,r,s)}checkNormalize(e){H_&&this.throwError("platform missing String.prototype.normalize",fe.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:H_})}checkSafeUint53(e,n){typeof e=="number"&&(n==null&&(n="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(n,fe.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(n,fe.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,n,r){r?r=": "+r:r="",e<n&&this.throwError("missing argument"+r,fe.errors.MISSING_ARGUMENT,{count:e,expectedCount:n}),e>n&&this.throwError("too many arguments"+r,fe.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:n})}checkNew(e,n){(e===Object||e==null)&&this.throwError("missing new",fe.errors.MISSING_NEW,{name:n.name})}checkAbstract(e,n){e===n?this.throwError("cannot instantiate abstract class "+JSON.stringify(n.name)+" directly; use a sub-class",fe.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",fe.errors.MISSING_NEW,{name:n.name})}static globalLogger(){return m1||(m1=new fe($9)),m1}static setCensorship(e,n){if(!e&&n&&this.globalLogger().throwError("cannot permanently disable censorship",fe.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),V_){if(!e)return;this.globalLogger().throwError("error censorship permanent",fe.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}q_=!!e,V_=!!n}static setLogLevel(e){const n=i0[e.toLowerCase()];if(n==null){fe.globalLogger().warn("invalid log level - "+e);return}W_=n}static from(e){return new fe(e)}}fe.errors=ba;fe.levels=mT;const U9="bytes/5.8.0",wr=new fe(U9);function n4(t){return!!t.toHexString}function Qf(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Qf(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function wN(t){return cn(t)&&!(t.length%2)||Lh(t)}function K_(t){return typeof t=="number"&&t==t&&t%1===0}function Lh(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!K_(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const n=t[e];if(!K_(n)||n<0||n>=256)return!1}return!0}function Vt(t,e){if(e||(e={}),typeof t=="number"){wr.checkSafeUint53(t,"invalid arrayify value");const n=[];for(;t;)n.unshift(t&255),t=parseInt(String(t/256));return n.length===0&&n.push(0),Qf(new Uint8Array(n))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),n4(t)&&(t=t.toHexString()),cn(t)){let n=t.substring(2);n.length%2&&(e.hexPad==="left"?n="0"+n:e.hexPad==="right"?n+="0":wr.throwArgumentError("hex data is odd-length","value",t));const r=[];for(let s=0;s<n.length;s+=2)r.push(parseInt(n.substring(s,s+2),16));return Qf(new Uint8Array(r))}return Lh(t)?Qf(new Uint8Array(t)):wr.throwArgumentError("invalid arrayify value","value",t)}function to(t){const e=t.map(s=>Vt(s)),n=e.reduce((s,o)=>s+o.length,0),r=new Uint8Array(n);return e.reduce((s,o)=>(r.set(o,s),s+o.length),0),Qf(r)}function gh(t){let e=Vt(t);if(e.length===0)return e;let n=0;for(;n<e.length&&e[n]===0;)n++;return n&&(e=e.slice(n)),e}function V9(t,e){t=Vt(t),t.length>e&&wr.throwArgumentError("value out of range","value",arguments[0]);const n=new Uint8Array(e);return n.set(t,e-t.length),Qf(n)}function cn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const g1="0123456789abcdef";function Ct(t,e){if(e||(e={}),typeof t=="number"){wr.checkSafeUint53(t,"invalid hexlify value");let n="";for(;t;)n=g1[t&15]+n,t=Math.floor(t/16);return n.length?(n.length%2&&(n="0"+n),"0x"+n):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),n4(t))return t.toHexString();if(cn(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":wr.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Lh(t)){let n="0x";for(let r=0;r<t.length;r++){let s=t[r];n+=g1[(s&240)>>4]+g1[s&15]}return n}return wr.throwArgumentError("invalid hexlify value","value",t)}function yd(t){if(typeof t!="string")t=Ct(t);else if(!cn(t)||t.length%2)return null;return(t.length-2)/2}function As(t,e,n){return typeof t!="string"?t=Ct(t):(!cn(t)||t.length%2)&&wr.throwArgumentError("invalid hexData","value",t),e=2+2*e,n!=null?"0x"+t.substring(e,2+2*n):"0x"+t.substring(e)}function Ni(t){let e="0x";return t.forEach(n=>{e+=Ct(n).substring(2)}),e}function _b(t){const e=q9(Ct(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function q9(t){typeof t!="string"&&(t=Ct(t)),cn(t)||wr.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function cr(t,e){for(typeof t!="string"?t=Ct(t):cn(t)||wr.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&wr.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Ab(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(wN(t)){let n=Vt(t);n.length===64?(e.v=27+(n[32]>>7),n[32]&=127,e.r=Ct(n.slice(0,32)),e.s=Ct(n.slice(32,64))):n.length===65?(e.r=Ct(n.slice(0,32)),e.s=Ct(n.slice(32,64)),e.v=n[64]):wr.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:wr.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(n[32]|=128),e._vs=Ct(n.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const s=V9(Vt(e._vs),32);e._vs=Ct(s);const o=s[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=o:e.recoveryParam!==o&&wr.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),s[0]&=127;const a=Ct(s);e.s==null?e.s=a:e.s!==a&&wr.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?wr.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const s=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==s&&wr.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!cn(e.r)?wr.throwArgumentError("signature missing or invalid r","signature",t):e.r=cr(e.r,32),e.s==null||!cn(e.s)?wr.throwArgumentError("signature missing or invalid s","signature",t):e.s=cr(e.s,32);const n=Vt(e.s);n[0]>=128&&wr.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(n[0]|=128);const r=Ct(n);e._vs&&(cn(e._vs)||wr.throwArgumentError("signature invalid _vs","signature",t),e._vs=cr(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&wr.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const r4="bignumber/5.8.0";var D0=Gt.BN;const Pl=new fe(r4),y1={},Y_=9007199254740991;function W9(t){return t!=null&&(ce.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||cn(t)||typeof t=="bigint"||Lh(t))}let J_=!1;class ce{constructor(e,n){e!==y1&&Pl.throwError("cannot call constructor directly; use BigNumber.from",fe.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=n,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return xi(kn(this).fromTwos(e))}toTwos(e){return xi(kn(this).toTwos(e))}abs(){return this._hex[0]==="-"?ce.from(this._hex.substring(1)):this}add(e){return xi(kn(this).add(kn(e)))}sub(e){return xi(kn(this).sub(kn(e)))}div(e){return ce.from(e).isZero()&&Co("division-by-zero","div"),xi(kn(this).div(kn(e)))}mul(e){return xi(kn(this).mul(kn(e)))}mod(e){const n=kn(e);return n.isNeg()&&Co("division-by-zero","mod"),xi(kn(this).umod(n))}pow(e){const n=kn(e);return n.isNeg()&&Co("negative-power","pow"),xi(kn(this).pow(n))}and(e){const n=kn(e);return(this.isNegative()||n.isNeg())&&Co("unbound-bitwise-result","and"),xi(kn(this).and(n))}or(e){const n=kn(e);return(this.isNegative()||n.isNeg())&&Co("unbound-bitwise-result","or"),xi(kn(this).or(n))}xor(e){const n=kn(e);return(this.isNegative()||n.isNeg())&&Co("unbound-bitwise-result","xor"),xi(kn(this).xor(n))}mask(e){return(this.isNegative()||e<0)&&Co("negative-width","mask"),xi(kn(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Co("negative-width","shl"),xi(kn(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Co("negative-width","shr"),xi(kn(this).shrn(e))}eq(e){return kn(this).eq(kn(e))}lt(e){return kn(this).lt(kn(e))}lte(e){return kn(this).lte(kn(e))}gt(e){return kn(this).gt(kn(e))}gte(e){return kn(this).gte(kn(e))}isNegative(){return this._hex[0]==="-"}isZero(){return kn(this).isZero()}toNumber(){try{return kn(this).toNumber()}catch{Co("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Pl.throwError("this platform does not support BigInt",fe.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?J_||(J_=!0,Pl.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Pl.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",fe.errors.UNEXPECTED_ARGUMENT,{}):Pl.throwError("BigNumber.toString does not accept parameters",fe.errors.UNEXPECTED_ARGUMENT,{})),kn(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof ce)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new ce(y1,Um(e)):e.match(/^-?[0-9]+$/)?new ce(y1,Um(new D0(e))):Pl.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Co("underflow","BigNumber.from",e),(e>=Y_||e<=-Y_)&&Co("overflow","BigNumber.from",e),ce.from(String(e));const n=e;if(typeof n=="bigint")return ce.from(n.toString());if(Lh(n))return ce.from(Ct(n));if(n)if(n.toHexString){const r=n.toHexString();if(typeof r=="string")return ce.from(r)}else{let r=n._hex;if(r==null&&n.type==="BigNumber"&&(r=n.hex),typeof r=="string"&&(cn(r)||r[0]==="-"&&cn(r.substring(1))))return ce.from(r)}return Pl.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Um(t){if(typeof t!="string")return Um(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&Pl.throwArgumentError("invalid hex","value",t),t=Um(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function xi(t){return ce.from(Um(t))}function kn(t){const e=ce.from(t).toHexString();return e[0]==="-"?new D0("-"+e.substring(3),16):new D0(e.substring(2),16)}function Co(t,e,n){const r={fault:t,operation:e};return n!=null&&(r.value=n),Pl.throwError(t,fe.errors.NUMERIC_FAULT,r)}function H9(t){return new D0(t,36).toString(16)}const ri=new fe(r4),um={},s4=ce.from(0),i4=ce.from(-1);function o4(t,e,n,r){const s={fault:e,operation:n};return r!==void 0&&(s.value=r),ri.throwError(t,fe.errors.NUMERIC_FAULT,s)}let dm="0";for(;dm.length<256;)dm+=dm;function kN(t){if(typeof t!="number")try{t=ce.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+dm.substring(0,t):ri.throwArgumentError("invalid decimal size","decimals",t)}function o0(t,e){e==null&&(e=0);const n=kN(e);t=ce.from(t);const r=t.lt(s4);r&&(t=t.mul(i4));let s=t.mod(n).toString();for(;s.length<n.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=t.div(n).toString();return n.length===1?t=o:t=o+"."+s,r&&(t="-"+t),t}function Ua(t,e){e==null&&(e=0);const n=kN(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&ri.throwArgumentError("invalid decimal value","value",t);const r=t.substring(0,1)==="-";r&&(t=t.substring(1)),t==="."&&ri.throwArgumentError("missing value","value",t);const s=t.split(".");s.length>2&&ri.throwArgumentError("too many decimal points","value",t);let o=s[0],a=s[1];for(o||(o="0"),a||(a="0");a[a.length-1]==="0";)a=a.substring(0,a.length-1);for(a.length>n.length-1&&o4("fractional component exceeds decimals","underflow","parseFixed"),a===""&&(a="0");a.length<n.length-1;)a+="0";const l=ce.from(o),c=ce.from(a);let u=l.mul(n).add(c);return r&&(u=u.mul(i4)),u}class Zf{constructor(e,n,r,s){e!==um&&ri.throwError("cannot use FixedFormat constructor; use FixedFormat.from",fe.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=n,this.width=r,this.decimals=s,this.name=(n?"":"u")+"fixed"+String(r)+"x"+String(s),this._multiplier=kN(s),Object.freeze(this)}static from(e){if(e instanceof Zf)return e;typeof e=="number"&&(e=`fixed128x${e}`);let n=!0,r=128,s=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")n=!1;else{const o=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||ri.throwArgumentError("invalid fixed format","format",e),n=o[1]!=="u",r=parseInt(o[2]),s=parseInt(o[3])}}else if(e){const o=(a,l,c)=>e[a]==null?c:(typeof e[a]!==l&&ri.throwArgumentError("invalid fixed format ("+a+" not "+l+")","format."+a,e[a]),e[a]);n=o("signed","boolean",n),r=o("width","number",r),s=o("decimals","number",s)}return r%8&&ri.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),s>80&&ri.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new Zf(um,n,r,s)}}class ps{constructor(e,n,r,s){e!==um&&ri.throwError("cannot use FixedNumber constructor; use FixedNumber.from",fe.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=n,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&ri.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const n=Ua(this._value,this.format.decimals),r=Ua(e._value,e.format.decimals);return ps.fromValue(n.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const n=Ua(this._value,this.format.decimals),r=Ua(e._value,e.format.decimals);return ps.fromValue(n.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const n=Ua(this._value,this.format.decimals),r=Ua(e._value,e.format.decimals);return ps.fromValue(n.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const n=Ua(this._value,this.format.decimals),r=Ua(e._value,e.format.decimals);return ps.fromValue(n.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let n=ps.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(n=n.subUnsafe(X_.toFormat(n.format))),n}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let n=ps.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(n=n.addUnsafe(X_.toFormat(n.format))),n}round(e){e==null&&(e=0);const n=this.toString().split(".");if(n.length===1&&n.push("0"),(e<0||e>80||e%1)&&ri.throwArgumentError("invalid decimal count","decimals",e),n[1].length<=e)return this;const r=ps.from("1"+dm.substring(0,e),this.format),s=G9.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(s).floor().divUnsafe(r)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&ri.throwArgumentError("invalid byte width","width",e);const n=ce.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return cr(n,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return ps.fromString(this._value,e)}static fromValue(e,n,r){return r==null&&n!=null&&!W9(n)&&(r=n,n=null),n==null&&(n=0),r==null&&(r="fixed"),ps.fromString(o0(e,n),Zf.from(r))}static fromString(e,n){n==null&&(n="fixed");const r=Zf.from(n),s=Ua(e,r.decimals);!r.signed&&s.lt(s4)&&o4("unsigned value cannot be negative","overflow","value",e);let o=null;r.signed?o=s.toTwos(r.width).toHexString():(o=s.toHexString(),o=cr(o,r.width/8));const a=o0(s,r.decimals);return new ps(um,o,a,r)}static fromBytes(e,n){n==null&&(n="fixed");const r=Zf.from(n);if(Vt(e).length>r.width/8)throw new Error("overflow");let s=ce.from(e);r.signed&&(s=s.fromTwos(r.width));const o=s.toTwos((r.signed?0:1)+r.width).toHexString(),a=o0(s,r.decimals);return new ps(um,o,a,r)}static from(e,n){if(typeof e=="string")return ps.fromString(e,n);if(Lh(e))return ps.fromBytes(e,n);try{return ps.fromValue(e,0,n)}catch(r){if(r.code!==fe.errors.INVALID_ARGUMENT)throw r}return ri.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const X_=ps.from(1),G9=ps.from("0.5"),K9="properties/5.8.0";var Y9=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const O0=new fe(K9);function Ie(t,e,n){Object.defineProperty(t,e,{enumerable:!0,value:n,writable:!1})}function no(t,e){for(let n=0;n<32;n++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function Dr(t){return Y9(this,void 0,void 0,function*(){const e=Object.keys(t).map(r=>{const s=t[r];return Promise.resolve(s).then(o=>({key:r,value:o}))});return(yield Promise.all(e)).reduce((r,s)=>(r[s.key]=s.value,r),{})})}function J9(t,e){(!t||typeof t!="object")&&O0.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(n=>{e[n]||O0.throwArgumentError("invalid object key - "+n,"transaction:"+n,t)})}function ar(t){const e={};for(const n in t)e[n]=t[n];return e}const X9={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function a4(t){if(t==null||X9[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let n=0;n<e.length;n++){let r=null;try{r=t[e[n]]}catch{continue}if(!a4(r))return!1}return!0}return O0.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Q9(t){if(a4(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>oo(e)));if(typeof t=="object"){const e={};for(const n in t){const r=t[n];r!==void 0&&Ie(e,n,oo(r))}return e}return O0.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function oo(t){return Q9(t)}let Rg=class{constructor(e){for(const n in e)this[n]=oo(e[n])}};const Ig="abi/5.8.0",Nn=new fe(Ig),xd={};let Q_={calldata:!0,memory:!0,storage:!0},Z9={calldata:!0,memory:!0};function lx(t,e){if(t==="bytes"||t==="string"){if(Q_[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&Z9[e])return!0;return(Q_[e]||e==="payable")&&Nn.throwArgumentError("invalid modifier","name",e),!1}function eV(t,e){let n=t;function r(l){Nn.throwArgumentError(`unexpected character at position ${l}`,"param",t)}t=t.replace(/\s/g," ");function s(l){let c={type:"",name:"",parent:l,state:{allowType:!0}};return e&&(c.indexed=!1),c}let o={type:"",name:"",state:{allowType:!0}},a=o;for(let l=0;l<t.length;l++){let c=t[l];switch(c){case"(":a.state.allowType&&a.type===""?a.type="tuple":a.state.allowParams||r(l),a.state.allowType=!1,a.type=If(a.type),a.components=[s(a)],a=a.components[0];break;case")":delete a.state,a.name==="indexed"&&(e||r(l),a.indexed=!0,a.name=""),lx(a.type,a.name)&&(a.name=""),a.type=If(a.type);let u=a;a=a.parent,a||r(l),delete u.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,a.name==="indexed"&&(e||r(l),a.indexed=!0,a.name=""),lx(a.type,a.name)&&(a.name=""),a.type=If(a.type);let f=s(a.parent);a.parent.components.push(f),delete a.parent,a=f;break;case" ":a.state.allowType&&a.type!==""&&(a.type=If(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&a.name!==""&&(a.name==="indexed"?(e||r(l),a.indexed&&r(l),a.indexed=!0,a.name=""):lx(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||r(l),a.type+=c,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||r(l),a.type+=c,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=c,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=c,delete a.state.allowArray):a.state.readArray?a.type+=c:r(l)}}return a.parent&&Nn.throwArgumentError("unexpected eof","param",t),delete o.state,a.name==="indexed"?(e||r(n.length-7),a.indexed&&r(n.length-7),a.indexed=!0,a.name=""):lx(a.type,a.name)&&(a.name=""),o.type=If(o.type),o}function a0(t,e){for(let n in e)Ie(t,n,e[n])}const In=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),tV=new RegExp(/^(.*)\[([0-9]*)\]$/);class ss{constructor(e,n){e!==xd&&Nn.throwError("use fromString",fe.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),a0(this,n);let r=this.type.match(tV);r?a0(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:ss.fromObject({type:r[1],components:this.components}),baseType:"array"}):a0(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=In.sighash),In[e]||Nn.throwArgumentError("invalid format type","format",e),e===In.json){let r={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.components&&(r.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(r)}let n="";return this.baseType==="array"?(n+=this.arrayChildren.format(e),n+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==In.sighash&&(n+=this.type),n+="("+this.components.map(r=>r.format(e)).join(e===In.full?", ":",")+")"):n+=this.type,e!==In.sighash&&(this.indexed===!0&&(n+=" indexed"),e===In.full&&this.name&&(n+=" "+this.name)),n}static from(e,n){return typeof e=="string"?ss.fromString(e,n):ss.fromObject(e)}static fromObject(e){return ss.isParamType(e)?e:new ss(xd,{name:e.name||null,type:If(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(ss.fromObject):null})}static fromString(e,n){function r(s){return ss.fromObject({name:s.name,type:s.type,indexed:s.indexed,components:s.components})}return r(eV(e,!!n))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Vm(t,e){return rV(t).map(n=>ss.fromString(n,e))}class Ul{constructor(e,n){e!==xd&&Nn.throwError("use a static from method",fe.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),a0(this,n),this._isFragment=!0,Object.freeze(this)}static from(e){return Ul.isFragment(e)?e:typeof e=="string"?Ul.fromString(e):Ul.fromObject(e)}static fromObject(e){if(Ul.isFragment(e))return e;switch(e.type){case"function":return Za.fromObject(e);case"event":return Fl.fromObject(e);case"constructor":return Qa.fromObject(e);case"error":return Dc.fromObject(e);case"fallback":case"receive":return null}return Nn.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Fl.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Za.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Qa.fromString(e.trim()):e.split(" ")[0]==="error"?Dc.fromString(e.substring(5).trim()):Nn.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class Fl extends Ul{format(e){if(e||(e=In.sighash),In[e]||Nn.throwArgumentError("invalid format type","format",e),e===In.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let n="";return e!==In.sighash&&(n+="event "),n+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===In.full?", ":",")+") ",e!==In.sighash&&this.anonymous&&(n+="anonymous "),n.trim()}static from(e){return typeof e=="string"?Fl.fromString(e):Fl.fromObject(e)}static fromObject(e){if(Fl.isEventFragment(e))return e;e.type!=="event"&&Nn.throwArgumentError("invalid event object","value",e);const n={name:qm(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(ss.fromObject):[],type:"event"};return new Fl(xd,n)}static fromString(e){let n=e.match(Wm);n||Nn.throwArgumentError("invalid event string","value",e);let r=!1;return n[3].split(" ").forEach(s=>{switch(s.trim()){case"anonymous":r=!0;break;case"":break;default:Nn.warn("unknown modifier: "+s)}}),Fl.fromObject({name:n[1].trim(),anonymous:r,inputs:Vm(n[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function l4(t,e){e.gas=null;let n=t.split("@");return n.length!==1?(n.length>2&&Nn.throwArgumentError("invalid human-readable ABI signature","value",t),n[1].match(/^[0-9]+$/)||Nn.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=ce.from(n[1]),n[0]):t}function c4(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(n=>{switch(n.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+n)}})}function u4(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&Nn.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&Nn.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&Nn.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Nn.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&Nn.throwArgumentError("unable to determine stateMutability","value",t),e}class Qa extends Ul{format(e){if(e||(e=In.sighash),In[e]||Nn.throwArgumentError("invalid format type","format",e),e===In.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});e===In.sighash&&Nn.throwError("cannot format a constructor for sighash",fe.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let n="constructor("+this.inputs.map(r=>r.format(e)).join(e===In.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(n+=this.stateMutability+" "),n.trim()}static from(e){return typeof e=="string"?Qa.fromString(e):Qa.fromObject(e)}static fromObject(e){if(Qa.isConstructorFragment(e))return e;e.type!=="constructor"&&Nn.throwArgumentError("invalid constructor object","value",e);let n=u4(e);n.constant&&Nn.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(ss.fromObject):[],payable:n.payable,stateMutability:n.stateMutability,gas:e.gas?ce.from(e.gas):null};return new Qa(xd,r)}static fromString(e){let n={type:"constructor"};e=l4(e,n);let r=e.match(Wm);return(!r||r[1].trim()!=="constructor")&&Nn.throwArgumentError("invalid constructor string","value",e),n.inputs=Vm(r[2].trim(),!1),c4(r[3].trim(),n),Qa.fromObject(n)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Za extends Qa{format(e){if(e||(e=In.sighash),In[e]||Nn.throwArgumentError("invalid format type","format",e),e===In.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let n="";return e!==In.sighash&&(n+="function "),n+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===In.full?", ":",")+") ",e!==In.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(n+=this.stateMutability+" "):this.constant&&(n+="view "),this.outputs&&this.outputs.length&&(n+="returns ("+this.outputs.map(r=>r.format(e)).join(", ")+") "),this.gas!=null&&(n+="@"+this.gas.toString()+" ")),n.trim()}static from(e){return typeof e=="string"?Za.fromString(e):Za.fromObject(e)}static fromObject(e){if(Za.isFunctionFragment(e))return e;e.type!=="function"&&Nn.throwArgumentError("invalid function object","value",e);let n=u4(e);const r={type:e.type,name:qm(e.name),constant:n.constant,inputs:e.inputs?e.inputs.map(ss.fromObject):[],outputs:e.outputs?e.outputs.map(ss.fromObject):[],payable:n.payable,stateMutability:n.stateMutability,gas:e.gas?ce.from(e.gas):null};return new Za(xd,r)}static fromString(e){let n={type:"function"};e=l4(e,n);let r=e.split(" returns ");r.length>2&&Nn.throwArgumentError("invalid function string","value",e);let s=r[0].match(Wm);if(s||Nn.throwArgumentError("invalid function signature","value",e),n.name=s[1].trim(),n.name&&qm(n.name),n.inputs=Vm(s[2],!1),c4(s[3].trim(),n),r.length>1){let o=r[1].match(Wm);(o[1].trim()!=""||o[3].trim()!="")&&Nn.throwArgumentError("unexpected tokens","value",e),n.outputs=Vm(o[2],!1)}else n.outputs=[];return Za.fromObject(n)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function Z_(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Nn.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class Dc extends Ul{format(e){if(e||(e=In.sighash),In[e]||Nn.throwArgumentError("invalid format type","format",e),e===In.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let n="";return e!==In.sighash&&(n+="error "),n+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===In.full?", ":",")+") ",n.trim()}static from(e){return typeof e=="string"?Dc.fromString(e):Dc.fromObject(e)}static fromObject(e){if(Dc.isErrorFragment(e))return e;e.type!=="error"&&Nn.throwArgumentError("invalid error object","value",e);const n={type:e.type,name:qm(e.name),inputs:e.inputs?e.inputs.map(ss.fromObject):[]};return Z_(new Dc(xd,n))}static fromString(e){let n={type:"error"},r=e.match(Wm);return r||Nn.throwArgumentError("invalid error signature","value",e),n.name=r[1].trim(),n.name&&qm(n.name),n.inputs=Vm(r[2],!1),Z_(Dc.fromObject(n))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function If(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const nV=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function qm(t){return(!t||!t.match(nV))&&Nn.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Wm=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function rV(t){t=t.trim();let e=[],n="",r=0;for(let s=0;s<t.length;s++){let o=t[s];o===","&&r===0?(e.push(n),n=""):(n+=o,o==="("?r++:o===")"&&(r--,r===-1&&Nn.throwArgumentError("unbalanced parenthesis","value",t)))}return n&&e.push(n),e}const TN=new fe(Ig);function sV(t){const e=[],n=function(r,s){if(Array.isArray(s))for(let o in s){const a=r.slice();a.push(o);try{n(a,s[o])}catch(l){e.push({path:a,error:l})}}};return n([],t),e}class sc{constructor(e,n,r,s){this.name=e,this.type=n,this.localName=r,this.dynamic=s}_throwError(e,n){TN.throwArgumentError(e,this.localName,n)}}class gT{constructor(e){Ie(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Ni(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(to(e._data))}writeBytes(e){let n=Vt(e);const r=n.length%this.wordSize;return r&&(n=to([n,this._padding.slice(r)])),this._writeData(n)}_getValue(e){let n=Vt(ce.from(e));return n.length>this.wordSize&&TN.throwError("value out-of-bounds",fe.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:n.length}),n.length%this.wordSize&&(n=to([this._padding.slice(n.length%this.wordSize),n])),n}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,n=>{this._data[e]=this._getValue(n)}}}class L0{constructor(e,n,r,s){Ie(this,"_data",Vt(e)),Ie(this,"wordSize",n||32),Ie(this,"_coerceFunc",r),Ie(this,"allowLoose",s),this._offset=0}get data(){return Ct(this._data)}get consumed(){return this._offset}static coerce(e,n){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(n=n.toNumber()),n}coerce(e,n){return this._coerceFunc?this._coerceFunc(e,n):L0.coerce(e,n)}_peekBytes(e,n,r){let s=Math.ceil(n/this.wordSize)*this.wordSize;return this._offset+s>this._data.length&&(this.allowLoose&&r&&this._offset+n<=this._data.length?s=n:TN.throwError("data out-of-bounds",fe.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+s})),this._data.slice(this._offset,this._offset+s)}subReader(e){return new L0(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,n){let r=this._peekBytes(0,e,!!n);return this._offset+=r.length,r.slice(0,e)}readValue(){return ce.from(this.readBytes(this.wordSize))}}var x1={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */var eA;function iV(){return eA||(eA=1,function(t){(function(){var e="input is invalid type",n="finalize already called",r=typeof window=="object",s=r?window:{};s.JS_SHA3_NO_WINDOW&&(r=!1);var o=!r&&typeof self=="object",a=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?s=k7:o&&(s=self);var l=!s.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),f=[31,7936,2031616,520093696],p=[4,1024,262144,67108864],m=[1,256,65536,16777216],g=[6,1536,393216,100663296],w=[0,8,16,24],y=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],T=[224,256,384,512],j=[128,256],_=["hex","buffer","arrayBuffer","array","digest"],v={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(O){return Object.prototype.toString.call(O)==="[object Array]"}),c&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(O){return typeof O=="object"&&O.buffer&&O.buffer.constructor===ArrayBuffer});for(var P=function(O,q,H){return function(J){return new E(O,q,O).update(J)[H]()}},D=function(O,q,H){return function(J,Q){return new E(O,q,Q).update(J)[H]()}},$=function(O,q,H){return function(J,Q,ne,se){return x["cshake"+O].update(J,Q,ne,se)[H]()}},U=function(O,q,H){return function(J,Q,ne,se){return x["kmac"+O].update(J,Q,ne,se)[H]()}},K=function(O,q,H,J){for(var Q=0;Q<_.length;++Q){var ne=_[Q];O[ne]=q(H,J,ne)}return O},Y=function(O,q){var H=P(O,q,"hex");return H.create=function(){return new E(O,q,O)},H.update=function(J){return H.create().update(J)},K(H,P,O,q)},G=function(O,q){var H=D(O,q,"hex");return H.create=function(J){return new E(O,q,J)},H.update=function(J,Q){return H.create(Q).update(J)},K(H,D,O,q)},X=function(O,q){var H=v[O],J=$(O,q,"hex");return J.create=function(Q,ne,se){return!ne&&!se?x["shake"+O].create(Q):new E(O,q,Q).bytepad([ne,se],H)},J.update=function(Q,ne,se,ie){return J.create(ne,se,ie).update(Q)},K(J,$,O,q)},V=function(O,q){var H=v[O],J=U(O,q,"hex");return J.create=function(Q,ne,se){return new M(O,q,ne).bytepad(["KMAC",se],H).bytepad([Q],H)},J.update=function(Q,ne,se,ie){return J.create(Q,se,ie).update(ne)},K(J,U,O,q)},A=[{name:"keccak",padding:m,bits:T,createMethod:Y},{name:"sha3",padding:g,bits:T,createMethod:Y},{name:"shake",padding:f,bits:j,createMethod:G},{name:"cshake",padding:p,bits:j,createMethod:X},{name:"kmac",padding:p,bits:j,createMethod:V}],x={},C=[],L=0;L<A.length;++L)for(var z=A[L],R=z.bits,I=0;I<R.length;++I){var N=z.name+"_"+R[I];if(C.push(N),x[N]=z.createMethod(R[I],z.padding),z.name!=="sha3"){var F=z.name+R[I];C.push(F),x[F]=x[N]}}function E(O,q,H){this.blocks=[],this.s=[],this.padding=q,this.outputBits=H,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(O<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=H>>5,this.extraBytes=(H&31)>>3;for(var J=0;J<50;++J)this.s[J]=0}E.prototype.update=function(O){if(this.finalized)throw new Error(n);var q,H=typeof O;if(H!=="string"){if(H==="object"){if(O===null)throw new Error(e);if(c&&O.constructor===ArrayBuffer)O=new Uint8Array(O);else if(!Array.isArray(O)&&(!c||!ArrayBuffer.isView(O)))throw new Error(e)}else throw new Error(e);q=!0}for(var J=this.blocks,Q=this.byteCount,ne=O.length,se=this.blockCount,ie=0,pe=this.s,le,me;ie<ne;){if(this.reset)for(this.reset=!1,J[0]=this.block,le=1;le<se+1;++le)J[le]=0;if(q)for(le=this.start;ie<ne&&le<Q;++ie)J[le>>2]|=O[ie]<<w[le++&3];else for(le=this.start;ie<ne&&le<Q;++ie)me=O.charCodeAt(ie),me<128?J[le>>2]|=me<<w[le++&3]:me<2048?(J[le>>2]|=(192|me>>6)<<w[le++&3],J[le>>2]|=(128|me&63)<<w[le++&3]):me<55296||me>=57344?(J[le>>2]|=(224|me>>12)<<w[le++&3],J[le>>2]|=(128|me>>6&63)<<w[le++&3],J[le>>2]|=(128|me&63)<<w[le++&3]):(me=65536+((me&1023)<<10|O.charCodeAt(++ie)&1023),J[le>>2]|=(240|me>>18)<<w[le++&3],J[le>>2]|=(128|me>>12&63)<<w[le++&3],J[le>>2]|=(128|me>>6&63)<<w[le++&3],J[le>>2]|=(128|me&63)<<w[le++&3]);if(this.lastByteIndex=le,le>=Q){for(this.start=le-Q,this.block=J[se],le=0;le<se;++le)pe[le]^=J[le];ee(pe),this.reset=!0}else this.start=le}return this},E.prototype.encode=function(O,q){var H=O&255,J=1,Q=[H];for(O=O>>8,H=O&255;H>0;)Q.unshift(H),O=O>>8,H=O&255,++J;return q?Q.push(J):Q.unshift(J),this.update(Q),Q.length},E.prototype.encodeString=function(O){var q,H=typeof O;if(H!=="string"){if(H==="object"){if(O===null)throw new Error(e);if(c&&O.constructor===ArrayBuffer)O=new Uint8Array(O);else if(!Array.isArray(O)&&(!c||!ArrayBuffer.isView(O)))throw new Error(e)}else throw new Error(e);q=!0}var J=0,Q=O.length;if(q)J=Q;else for(var ne=0;ne<O.length;++ne){var se=O.charCodeAt(ne);se<128?J+=1:se<2048?J+=2:se<55296||se>=57344?J+=3:(se=65536+((se&1023)<<10|O.charCodeAt(++ne)&1023),J+=4)}return J+=this.encode(J*8),this.update(O),J},E.prototype.bytepad=function(O,q){for(var H=this.encode(q),J=0;J<O.length;++J)H+=this.encodeString(O[J]);var Q=q-H%q,ne=[];return ne.length=Q,this.update(ne),this},E.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var O=this.blocks,q=this.lastByteIndex,H=this.blockCount,J=this.s;if(O[q>>2]|=this.padding[q&3],this.lastByteIndex===this.byteCount)for(O[0]=O[H],q=1;q<H+1;++q)O[q]=0;for(O[H-1]|=2147483648,q=0;q<H;++q)J[q]^=O[q];ee(J)}},E.prototype.toString=E.prototype.hex=function(){this.finalize();for(var O=this.blockCount,q=this.s,H=this.outputBlocks,J=this.extraBytes,Q=0,ne=0,se="",ie;ne<H;){for(Q=0;Q<O&&ne<H;++Q,++ne)ie=q[Q],se+=u[ie>>4&15]+u[ie&15]+u[ie>>12&15]+u[ie>>8&15]+u[ie>>20&15]+u[ie>>16&15]+u[ie>>28&15]+u[ie>>24&15];ne%O===0&&(ee(q),Q=0)}return J&&(ie=q[Q],se+=u[ie>>4&15]+u[ie&15],J>1&&(se+=u[ie>>12&15]+u[ie>>8&15]),J>2&&(se+=u[ie>>20&15]+u[ie>>16&15])),se},E.prototype.arrayBuffer=function(){this.finalize();var O=this.blockCount,q=this.s,H=this.outputBlocks,J=this.extraBytes,Q=0,ne=0,se=this.outputBits>>3,ie;J?ie=new ArrayBuffer(H+1<<2):ie=new ArrayBuffer(se);for(var pe=new Uint32Array(ie);ne<H;){for(Q=0;Q<O&&ne<H;++Q,++ne)pe[ne]=q[Q];ne%O===0&&ee(q)}return J&&(pe[Q]=q[Q],ie=ie.slice(0,se)),ie},E.prototype.buffer=E.prototype.arrayBuffer,E.prototype.digest=E.prototype.array=function(){this.finalize();for(var O=this.blockCount,q=this.s,H=this.outputBlocks,J=this.extraBytes,Q=0,ne=0,se=[],ie,pe;ne<H;){for(Q=0;Q<O&&ne<H;++Q,++ne)ie=ne<<2,pe=q[Q],se[ie]=pe&255,se[ie+1]=pe>>8&255,se[ie+2]=pe>>16&255,se[ie+3]=pe>>24&255;ne%O===0&&ee(q)}return J&&(ie=ne<<2,pe=q[Q],se[ie]=pe&255,J>1&&(se[ie+1]=pe>>8&255),J>2&&(se[ie+2]=pe>>16&255)),se};function M(O,q,H){E.call(this,O,q,H)}M.prototype=new E,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),E.prototype.finalize.call(this)};var ee=function(O){var q,H,J,Q,ne,se,ie,pe,le,me,Ee,te,Ne,Pe,et,Le,Se,Te,ze,dt,oe,ue,ge,be,ve,Ke,Me,He,ct,Je,Ye,St,bt,Ze,An,Dt,Ot,wn,nn,Xe,Ft,yt,Ge,rt,st,Re,it,Ue,tt,Cn,at,Rt,On,zt,Et,Yt,Jt,Lt,Kn,Fn,Sn,Tn,Pn;for(J=0;J<48;J+=2)Q=O[0]^O[10]^O[20]^O[30]^O[40],ne=O[1]^O[11]^O[21]^O[31]^O[41],se=O[2]^O[12]^O[22]^O[32]^O[42],ie=O[3]^O[13]^O[23]^O[33]^O[43],pe=O[4]^O[14]^O[24]^O[34]^O[44],le=O[5]^O[15]^O[25]^O[35]^O[45],me=O[6]^O[16]^O[26]^O[36]^O[46],Ee=O[7]^O[17]^O[27]^O[37]^O[47],te=O[8]^O[18]^O[28]^O[38]^O[48],Ne=O[9]^O[19]^O[29]^O[39]^O[49],q=te^(se<<1|ie>>>31),H=Ne^(ie<<1|se>>>31),O[0]^=q,O[1]^=H,O[10]^=q,O[11]^=H,O[20]^=q,O[21]^=H,O[30]^=q,O[31]^=H,O[40]^=q,O[41]^=H,q=Q^(pe<<1|le>>>31),H=ne^(le<<1|pe>>>31),O[2]^=q,O[3]^=H,O[12]^=q,O[13]^=H,O[22]^=q,O[23]^=H,O[32]^=q,O[33]^=H,O[42]^=q,O[43]^=H,q=se^(me<<1|Ee>>>31),H=ie^(Ee<<1|me>>>31),O[4]^=q,O[5]^=H,O[14]^=q,O[15]^=H,O[24]^=q,O[25]^=H,O[34]^=q,O[35]^=H,O[44]^=q,O[45]^=H,q=pe^(te<<1|Ne>>>31),H=le^(Ne<<1|te>>>31),O[6]^=q,O[7]^=H,O[16]^=q,O[17]^=H,O[26]^=q,O[27]^=H,O[36]^=q,O[37]^=H,O[46]^=q,O[47]^=H,q=me^(Q<<1|ne>>>31),H=Ee^(ne<<1|Q>>>31),O[8]^=q,O[9]^=H,O[18]^=q,O[19]^=H,O[28]^=q,O[29]^=H,O[38]^=q,O[39]^=H,O[48]^=q,O[49]^=H,Pe=O[0],et=O[1],Re=O[11]<<4|O[10]>>>28,it=O[10]<<4|O[11]>>>28,He=O[20]<<3|O[21]>>>29,ct=O[21]<<3|O[20]>>>29,Fn=O[31]<<9|O[30]>>>23,Sn=O[30]<<9|O[31]>>>23,yt=O[40]<<18|O[41]>>>14,Ge=O[41]<<18|O[40]>>>14,Ze=O[2]<<1|O[3]>>>31,An=O[3]<<1|O[2]>>>31,Le=O[13]<<12|O[12]>>>20,Se=O[12]<<12|O[13]>>>20,Ue=O[22]<<10|O[23]>>>22,tt=O[23]<<10|O[22]>>>22,Je=O[33]<<13|O[32]>>>19,Ye=O[32]<<13|O[33]>>>19,Tn=O[42]<<2|O[43]>>>30,Pn=O[43]<<2|O[42]>>>30,zt=O[5]<<30|O[4]>>>2,Et=O[4]<<30|O[5]>>>2,Dt=O[14]<<6|O[15]>>>26,Ot=O[15]<<6|O[14]>>>26,Te=O[25]<<11|O[24]>>>21,ze=O[24]<<11|O[25]>>>21,Cn=O[34]<<15|O[35]>>>17,at=O[35]<<15|O[34]>>>17,St=O[45]<<29|O[44]>>>3,bt=O[44]<<29|O[45]>>>3,be=O[6]<<28|O[7]>>>4,ve=O[7]<<28|O[6]>>>4,Yt=O[17]<<23|O[16]>>>9,Jt=O[16]<<23|O[17]>>>9,wn=O[26]<<25|O[27]>>>7,nn=O[27]<<25|O[26]>>>7,dt=O[36]<<21|O[37]>>>11,oe=O[37]<<21|O[36]>>>11,Rt=O[47]<<24|O[46]>>>8,On=O[46]<<24|O[47]>>>8,rt=O[8]<<27|O[9]>>>5,st=O[9]<<27|O[8]>>>5,Ke=O[18]<<20|O[19]>>>12,Me=O[19]<<20|O[18]>>>12,Lt=O[29]<<7|O[28]>>>25,Kn=O[28]<<7|O[29]>>>25,Xe=O[38]<<8|O[39]>>>24,Ft=O[39]<<8|O[38]>>>24,ue=O[48]<<14|O[49]>>>18,ge=O[49]<<14|O[48]>>>18,O[0]=Pe^~Le&Te,O[1]=et^~Se&ze,O[10]=be^~Ke&He,O[11]=ve^~Me&ct,O[20]=Ze^~Dt&wn,O[21]=An^~Ot&nn,O[30]=rt^~Re&Ue,O[31]=st^~it&tt,O[40]=zt^~Yt&Lt,O[41]=Et^~Jt&Kn,O[2]=Le^~Te&dt,O[3]=Se^~ze&oe,O[12]=Ke^~He&Je,O[13]=Me^~ct&Ye,O[22]=Dt^~wn&Xe,O[23]=Ot^~nn&Ft,O[32]=Re^~Ue&Cn,O[33]=it^~tt&at,O[42]=Yt^~Lt&Fn,O[43]=Jt^~Kn&Sn,O[4]=Te^~dt&ue,O[5]=ze^~oe&ge,O[14]=He^~Je&St,O[15]=ct^~Ye&bt,O[24]=wn^~Xe&yt,O[25]=nn^~Ft&Ge,O[34]=Ue^~Cn&Rt,O[35]=tt^~at&On,O[44]=Lt^~Fn&Tn,O[45]=Kn^~Sn&Pn,O[6]=dt^~ue&Pe,O[7]=oe^~ge&et,O[16]=Je^~St&be,O[17]=Ye^~bt&ve,O[26]=Xe^~yt&Ze,O[27]=Ft^~Ge&An,O[36]=Cn^~Rt&rt,O[37]=at^~On&st,O[46]=Fn^~Tn&zt,O[47]=Sn^~Pn&Et,O[8]=ue^~Pe&Le,O[9]=ge^~et&Se,O[18]=St^~be&Ke,O[19]=bt^~ve&Me,O[28]=yt^~Ze&Dt,O[29]=Ge^~An&Ot,O[38]=Rt^~rt&Re,O[39]=On^~st&it,O[48]=Tn^~zt&Yt,O[49]=Pn^~Et&Jt,O[0]^=y[J],O[1]^=y[J+1]};if(l)t.exports=x;else for(L=0;L<C.length;++L)s[C[L]]=x[C[L]]})()}(x1)),x1.exports}var oV=iV();const aV=rc(oV);function ir(t){return"0x"+aV.keccak_256(Vt(t))}const lV="rlp/5.8.0",Ha=new fe(lV);function tA(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function nA(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function d4(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(o){r=r.concat(d4(o))}),r.length<=55)return r.unshift(192+r.length),r;const s=tA(r.length);return s.unshift(247+s.length),s.concat(r)}wN(t)||Ha.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(Vt(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=tA(e.length);return n.unshift(183+n.length),n.concat(e)}function Pb(t){return Ct(d4(t))}function rA(t,e,n,r){const s=[];for(;n<e+1+r;){const o=f4(t,n);s.push(o.result),n+=o.consumed,n>e+1+r&&Ha.throwError("child data too short",fe.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:s}}function f4(t,e){if(t.length===0&&Ha.throwError("data too short",fe.errors.BUFFER_OVERRUN,{}),t[e]>=248){const n=t[e]-247;e+1+n>t.length&&Ha.throwError("data short segment too short",fe.errors.BUFFER_OVERRUN,{});const r=nA(t,e+1,n);return e+1+n+r>t.length&&Ha.throwError("data long segment too short",fe.errors.BUFFER_OVERRUN,{}),rA(t,e,e+1+n,n+r)}else if(t[e]>=192){const n=t[e]-192;return e+1+n>t.length&&Ha.throwError("data array too short",fe.errors.BUFFER_OVERRUN,{}),rA(t,e,e+1,n)}else if(t[e]>=184){const n=t[e]-183;e+1+n>t.length&&Ha.throwError("data array too short",fe.errors.BUFFER_OVERRUN,{});const r=nA(t,e+1,n);e+1+n+r>t.length&&Ha.throwError("data array too short",fe.errors.BUFFER_OVERRUN,{});const s=Ct(t.slice(e+1+n,e+1+n+r));return{consumed:1+n+r,result:s}}else if(t[e]>=128){const n=t[e]-128;e+1+n>t.length&&Ha.throwError("data too short",fe.errors.BUFFER_OVERRUN,{});const r=Ct(t.slice(e+1,e+1+n));return{consumed:1+n,result:r}}return{consumed:1,result:Ct(t[e])}}function NN(t){const e=Vt(t),n=f4(e,0);return n.consumed!==e.length&&Ha.throwArgumentError("invalid rlp data","data",t),n.result}const cV="address/5.8.0",$f=new fe(cV);function sA(t){cn(t,20)||$f.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Vt(ir(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const uV=9007199254740991;function dV(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const jN={};for(let t=0;t<10;t++)jN[String(t)]=String(t);for(let t=0;t<26;t++)jN[String.fromCharCode(65+t)]=String(10+t);const iA=Math.floor(dV(uV));function fV(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>jN[r]).join("");for(;e.length>=iA;){let r=e.substring(0,iA);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}function Xr(t){let e=null;if(typeof t!="string"&&$f.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=sA(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&$f.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==fV(t)&&$f.throwArgumentError("bad icap checksum","address",t),e=H9(t.substring(4));e.length<40;)e="0"+e;e=sA("0x"+e)}else $f.throwArgumentError("invalid address","address",t);return e}function bn(t){try{return Xr(t),!0}catch{}return!1}function h4(t){let e=null;try{e=Xr(t.from)}catch{$f.throwArgumentError("missing from address","transaction",t)}const n=gh(Vt(ce.from(t.nonce).toHexString()));return Xr(As(ir(Pb([e,n])),12))}class hV extends sc{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){try{n=Xr(n)}catch(r){this._throwError(r.message,n)}return e.writeValue(n)}decode(e){return Xr(cr(e.readValue().toHexString(),20))}}class pV extends sc{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}const Bf=new fe(Ig);function p4(t,e,n){let r=null;if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(u=>{const f=u.localName;return f||Bf.throwError("cannot encode object for signature with missing names",fe.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:n}),c[f]&&Bf.throwError("cannot encode object for signature with duplicate names",fe.errors.INVALID_ARGUMENT,{argument:"values",coder:u,value:n}),c[f]=!0,n[f]})}else Bf.throwArgumentError("invalid tuple value","tuple",n);e.length!==r.length&&Bf.throwArgumentError("types/value length mismatch","tuple",n);let s=new gT(t.wordSize),o=new gT(t.wordSize),a=[];e.forEach((c,u)=>{let f=r[u];if(c.dynamic){let p=o.length;c.encode(o,f);let m=s.writeUpdatableValue();a.push(g=>{m(g+p)})}else c.encode(s,f)}),a.forEach(c=>{c(s.length)});let l=t.appendWriter(s);return l+=t.appendWriter(o),l}function m4(t,e){let n=[],r=t.subReader(0);e.forEach(o=>{let a=null;if(o.dynamic){let l=t.readValue(),c=r.subReader(l.toNumber());try{a=o.decode(c)}catch(u){if(u.code===fe.errors.BUFFER_OVERRUN)throw u;a=u,a.baseType=o.name,a.name=o.localName,a.type=o.type}}else try{a=o.decode(t)}catch(l){if(l.code===fe.errors.BUFFER_OVERRUN)throw l;a=l,a.baseType=o.name,a.name=o.localName,a.type=o.type}a!=null&&n.push(a)});const s=e.reduce((o,a)=>{const l=a.localName;return l&&(o[l]||(o[l]=0),o[l]++),o},{});e.forEach((o,a)=>{let l=o.localName;if(!l||s[l]!==1||(l==="length"&&(l="_length"),n[l]!=null))return;const c=n[a];c instanceof Error?Object.defineProperty(n,l,{enumerable:!0,get:()=>{throw c}}):n[l]=c});for(let o=0;o<n.length;o++){const a=n[o];a instanceof Error&&Object.defineProperty(n,o,{enumerable:!0,get:()=>{throw a}})}return Object.freeze(n)}class mV extends sc{constructor(e,n,r){const s=e.type+"["+(n>=0?n:"")+"]",o=n===-1||e.dynamic;super("array",s,r,o),this.coder=e,this.length=n}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let r=0;r<this.length;r++)n.push(e);return n}encode(e,n){Array.isArray(n)||this._throwError("expected array value",n);let r=this.length;r===-1&&(r=n.length,e.writeValue(n.length)),Bf.checkArgumentCount(n.length,r,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let o=0;o<n.length;o++)s.push(this.coder);return p4(e,s,n)}decode(e){let n=this.length;n===-1&&(n=e.readValue().toNumber(),n*32>e._data.length&&Bf.throwError("insufficient data length",fe.errors.BUFFER_OVERRUN,{length:e._data.length,count:n}));let r=[];for(let s=0;s<n;s++)r.push(new pV(this.coder));return e.coerce(this.name,m4(e,r))}}class gV extends sc{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){return e.writeValue(n?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class g4 extends sc{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=Vt(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class yV extends g4{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Ct(super.decode(e)))}}class xV extends sc{constructor(e,n){let r="bytes"+String(e);super(r,r,n,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let r=Vt(n);return r.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(r)}decode(e){return e.coerce(this.name,Ct(e.readBytes(this.size)))}}class bV extends sc{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const $e="0x0000000000000000000000000000000000000000",vV=ce.from(-1),y4=ce.from(0),wV=ce.from(1),CN=ce.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Rb="0x0000000000000000000000000000000000000000000000000000000000000000";class kV extends sc{constructor(e,n,r){const s=(n?"int":"uint")+e*8;super(s,s,r,!1),this.size=e,this.signed=n}defaultValue(){return 0}encode(e,n){let r=ce.from(n),s=CN.mask(e.wordSize*8);if(this.signed){let o=s.mask(this.size*8-1);(r.gt(o)||r.lt(o.add(wV).mul(vV)))&&this._throwError("value out-of-bounds",n)}else(r.lt(y4)||r.gt(s.mask(this.size*8)))&&this._throwError("value out-of-bounds",n);return r=r.toTwos(this.size*8).mask(this.size*8),this.signed&&(r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let n=e.readValue().mask(this.size*8);return this.signed&&(n=n.fromTwos(this.size*8)),e.coerce(this.name,n)}}const TV="strings/5.8.0",x4=new fe(TV);var Hm;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Hm||(Hm={}));var Hi;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Hi||(Hi={}));function NV(t,e,n,r,s){return x4.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function b4(t,e,n,r,s){if(t===Hi.BAD_PREFIX||t===Hi.UNEXPECTED_CONTINUE){let o=0;for(let a=e+1;a<n.length&&n[a]>>6===2;a++)o++;return o}return t===Hi.OVERRUN?n.length-e-1:0}function jV(t,e,n,r,s){return t===Hi.OVERLONG?(r.push(s),0):(r.push(65533),b4(t,e,n))}const CV=Object.freeze({error:NV,ignore:b4,replace:jV});function v4(t,e){e==null&&(e=CV.error),t=Vt(t);const n=[];let r=0;for(;r<t.length;){const s=t[r++];if(s>>7===0){n.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?r+=e(Hi.UNEXPECTED_CONTINUE,r-1,t,n):r+=e(Hi.BAD_PREFIX,r-1,t,n);continue}if(r-1+o>=t.length){r+=e(Hi.OVERRUN,r-1,t,n);continue}let l=s&(1<<8-o-1)-1;for(let c=0;c<o;c++){let u=t[r];if((u&192)!=128){r+=e(Hi.MISSING_CONTINUE,r,t,n),l=null;break}l=l<<6|u&63,r++}if(l!==null){if(l>1114111){r+=e(Hi.OUT_OF_RANGE,r-1-o,t,n,l);continue}if(l>=55296&&l<=57343){r+=e(Hi.UTF16_SURROGATE,r-1-o,t,n,l);continue}if(l<=a){r+=e(Hi.OVERLONG,r-1-o,t,n,l);continue}n.push(l)}}return n}function li(t,e=Hm.current){e!=Hm.current&&(x4.checkNormalize(),t=t.normalize(e));let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const o=t.charCodeAt(r);if(r>=t.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((s&1023)<<10)+(o&1023);n.push(a>>18|240),n.push(a>>12&63|128),n.push(a>>6&63|128),n.push(a&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return Vt(n)}function SV(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Mg(t,e){return SV(v4(t,e))}function EV(t,e=Hm.current){return v4(li(t,e))}class _V extends g4{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,li(n))}decode(e){return Mg(super.decode(e))}}class cx extends sc{constructor(e,n){let r=!1;const s=[];e.forEach(a=>{a.dynamic&&(r=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,n,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const n=this.coders.reduce((r,s)=>{const o=s.localName;return o&&(r[o]||(r[o]=0),r[o]++),r},{});return this.coders.forEach((r,s)=>{let o=r.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[s]))}),Object.freeze(e)}encode(e,n){return p4(e,this.coders,n)}decode(e){return e.coerce(this.name,m4(e,this.coders))}}const ux=new fe(Ig),AV=new RegExp(/^bytes([0-9]*)$/),PV=new RegExp(/^(u?int)([0-9]*)$/);class RV{constructor(e){Ie(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new hV(e.name);case"bool":return new gV(e.name);case"string":return new _V(e.name);case"bytes":return new yV(e.name);case"array":return new mV(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new cx((e.components||[]).map(r=>this._getCoder(r)),e.name);case"":return new bV(e.name)}let n=e.type.match(PV);if(n){let r=parseInt(n[2]||"256");return(r===0||r>256||r%8!==0)&&ux.throwArgumentError("invalid "+n[1]+" bit length","param",e),new kV(r/8,n[1]==="int",e.name)}if(n=e.type.match(AV),n){let r=parseInt(n[1]);return(r===0||r>32)&&ux.throwArgumentError("invalid bytes length","param",e),new xV(r,e.name)}return ux.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,n){return new L0(e,this._getWordSize(),this.coerceFunc,n)}_getWriter(){return new gT(this._getWordSize())}getDefaultValue(e){const n=e.map(s=>this._getCoder(ss.from(s)));return new cx(n,"_").defaultValue()}encode(e,n){e.length!==n.length&&ux.throwError("types/values length mismatch",fe.errors.INVALID_ARGUMENT,{count:{types:e.length,values:n.length},value:{types:e,values:n}});const r=e.map(a=>this._getCoder(ss.from(a))),s=new cx(r,"_"),o=this._getWriter();return s.encode(o,n),o.data}decode(e,n,r){const s=e.map(a=>this._getCoder(ss.from(a)));return new cx(s,"_").decode(this._getReader(Vt(n),r))}}const SN=new RV;function ed(t){return ir(li(t))}const w4="hash/5.8.0";function k4(t){t=atob(t);const e=[];for(let n=0;n<t.length;n++)e.push(t.charCodeAt(n));return Vt(e)}function T4(t){t=Vt(t);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function N4(t,e){e==null&&(e=1);const n=[],r=n.forEach,s=function(o,a){r.call(o,function(l){a>0&&Array.isArray(l)?s(l,a-1):n.push(l)})};return s(t,e),n}function IV(t){const e={};for(let n=0;n<t.length;n++){const r=t[n];e[r[0]]=r[1]}return e}function MV(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,o=[0,1];for(let D=1;D<r;D++)o.push(s+=n());let a=n(),l=e;e+=a;let c=0,u=0;function f(){return c==0&&(u=u<<8|t[e++],c=8),u>>--c&1}const p=31,m=Math.pow(2,p),g=m>>>1,w=g>>1,y=m-1;let T=0;for(let D=0;D<p;D++)T=T<<1|f();let j=[],_=0,v=m;for(;;){let D=Math.floor(((T-_+1)*s-1)/v),$=0,U=r;for(;U-$>1;){let G=$+U>>>1;D<o[G]?U=G:$=G}if($==0)break;j.push($);let K=_+Math.floor(v*o[$]/s),Y=_+Math.floor(v*o[$+1]/s)-1;for(;((K^Y)&g)==0;)T=T<<1&y|f(),K=K<<1&y,Y=Y<<1&y|1;for(;K&~Y&w;)T=T&g|T<<1&y>>>1|f(),K=K<<1^g,Y=(Y^g)<<1|g|1;_=K,v=1+Y-K}let P=r-4;return j.map(D=>{switch(D-P){case 3:return P+65792+(t[l++]<<16|t[l++]<<8|t[l++]);case 2:return P+256+(t[l++]<<8|t[l++]);case 1:return P+t[l++];default:return D-1}})}function DV(t){let e=0;return()=>t[e++]}function OV(t){return DV(MV(t))}function LV(t){return t&1?~t>>1:t>>1}function FV(t,e){let n=Array(t);for(let r=0;r<t;r++)n[r]=1+e();return n}function oA(t,e){let n=Array(t);for(let r=0,s=-1;r<t;r++)n[r]=s+=1+e();return n}function zV(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=LV(e());return n}function F0(t,e){let n=oA(t(),t),r=t(),s=oA(r,t),o=FV(r,t);for(let a=0;a<r;a++)for(let l=0;l<o[a];l++)n.push(s[a]+l);return e?n.map(a=>e[a]):n}function $V(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(UV(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(VV(n,t))}return IV(N4(e))}function BV(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(n)}return e}function j4(t,e,n){let r=Array(t).fill(void 0).map(()=>[]);for(let s=0;s<e;s++)zV(t,n).forEach((o,a)=>r[a].push(o));return r}function UV(t,e){let n=1+e(),r=e(),s=BV(e),o=j4(s.length,1+t,e);return N4(o.map((a,l)=>{const c=a[0],u=a.slice(1);return Array(s[l]).fill(void 0).map((f,p)=>{let m=p*r;return[c+p*n,u.map(g=>g+m)]})}))}function VV(t,e){let n=1+e();return j4(n,1+t,e).map(s=>[s[0],s.slice(1)])}function qV(t){let e=F0(t).sort((r,s)=>r-s);return n();function n(){let r=[];for(;;){let u=F0(t,e);if(u.length==0)break;r.push({set:new Set(u),node:n()})}r.sort((u,f)=>f.set.size-u.set.size);let s=t(),o=s%3;s=s/3|0;let a=!!(s&1);s>>=1;let l=s==1,c=s==2;return{branches:r,valid:o,fe0f:a,save:l,check:c}}}function WV(){return OV(k4("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const Ib=WV(),HV=new Set(F0(Ib)),GV=new Set(F0(Ib)),KV=$V(Ib),YV=qV(Ib),aA=45,lA=95;function C4(t){return EV(t)}function JV(t){return t.filter(e=>e!=65039)}function S4(t){for(let e of t.split(".")){let n=C4(e);try{for(let r=n.lastIndexOf(lA)-1;r>=0;r--)if(n[r]!==lA)throw new Error("underscore only allowed at start");if(n.length>=4&&n.every(r=>r<128)&&n[2]===aA&&n[3]===aA)throw new Error("invalid label extension")}catch(r){throw new Error(`Invalid label "${e}": ${r.message}`)}}return t}function XV(t){return S4(QV(t,JV))}function QV(t,e){let n=C4(t).reverse(),r=[];for(;n.length;){let s=eq(n);if(s){r.push(...e(s));continue}let o=n.pop();if(HV.has(o)){r.push(o);continue}if(GV.has(o))continue;let a=KV[o];if(a){r.push(...a);continue}throw new Error(`Disallowed codepoint: 0x${o.toString(16).toUpperCase()}`)}return S4(ZV(String.fromCodePoint(...r)))}function ZV(t){return t.normalize("NFC")}function eq(t,e){var n;let r=YV,s,o,a=[],l=t.length;for(;l;){let c=t[--l];if(r=(n=r.branches.find(u=>u.set.has(c)))===null||n===void 0?void 0:n.node,!r)break;if(r.save)o=c;else if(r.check&&c===o)break;a.push(c),r.fe0f&&(a.push(65039),l>0&&t[l-1]==65039&&l--),r.valid&&(s=a.slice(),r.valid==2&&s.splice(1,1),t.length=l)}return s}const tq=new fe(w4),E4=new Uint8Array(32);E4.fill(0);function cA(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function _4(t){const e=li(XV(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(cA(e.slice(r,s))),r=s+1);if(r>=e.length)throw new Error("invalid ENS name; empty component");return n.push(cA(e.slice(r))),n}function l0(t){typeof t!="string"&&tq.throwArgumentError("invalid ENS name; not a string","name",t);let e=E4;const n=_4(t);for(;n.length;)e=ir(to([e,ir(n.pop())]));return Ct(e)}function nq(t){return Ct(to(_4(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const n=new Uint8Array(e.length+1);return n.set(e,1),n[0]=n.length-1,n})))+"00"}var rq=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const hr=new fe(w4),A4=new Uint8Array(32);A4.fill(0);const sq=ce.from(-1),P4=ce.from(0),R4=ce.from(1),iq=ce.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function oq(t){const e=Vt(t),n=e.length%32;return n?Ni([e,A4.slice(n)]):Ct(e)}const aq=cr(R4.toHexString(),32),lq=cr(P4.toHexString(),32),uA={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},b1=["name","version","chainId","verifyingContract","salt"];function dA(t){return function(e){return typeof e!="string"&&hr.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const cq={name:dA("name"),version:dA("version"),chainId:function(t){try{return ce.from(t).toString()}catch{}return hr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Xr(t).toLowerCase()}catch{}return hr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=Vt(t);if(e.length!==32)throw new Error("bad length");return Ct(e)}catch{}return hr.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function v1(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const n=e[1]==="",r=parseInt(e[2]||"256");(r%8!==0||r>256||e[2]&&e[2]!==String(r))&&hr.throwArgumentError("invalid numeric width","type",t);const s=iq.mask(n?r-1:r),o=n?s.add(R4).mul(sq):P4;return function(a){const l=ce.from(a);return(l.lt(o)||l.gt(s))&&hr.throwArgumentError(`value out-of-bounds for ${t}`,"value",a),cr(l.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return(n===0||n>32||e[1]!==String(n))&&hr.throwArgumentError("invalid bytes width","type",t),function(r){return Vt(r).length!==n&&hr.throwArgumentError(`invalid length for ${t}`,"value",r),oq(r)}}}switch(t){case"address":return function(e){return cr(Xr(e),32)};case"bool":return function(e){return e?aq:lq};case"bytes":return function(e){return ir(e)};case"string":return function(e){return ed(e)}}return null}function fA(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}class Vi{constructor(e){Ie(this,"types",Object.freeze(oo(e))),Ie(this,"_encoderCache",{}),Ie(this,"_types",{});const n={},r={},s={};Object.keys(e).forEach(l=>{n[l]={},r[l]=[],s[l]={}});for(const l in e){const c={};e[l].forEach(u=>{c[u.name]&&hr.throwArgumentError(`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c[u.name]=!0;const f=u.type.match(/^([^\x5b]*)(\x5b|$)/)[1];f===l&&hr.throwArgumentError(`circular type reference to ${JSON.stringify(f)}`,"types",e),!v1(f)&&(r[f]||hr.throwArgumentError(`unknown type ${JSON.stringify(f)}`,"types",e),r[f].push(l),n[l][f]=!0)})}const o=Object.keys(r).filter(l=>r[l].length===0);o.length===0?hr.throwArgumentError("missing primary type","types",e):o.length>1&&hr.throwArgumentError(`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Ie(this,"primaryType",o[0]);function a(l,c){c[l]&&hr.throwArgumentError(`circular type reference to ${JSON.stringify(l)}`,"types",e),c[l]=!0,Object.keys(n[l]).forEach(u=>{r[u]&&(a(u,c),Object.keys(c).forEach(f=>{s[f][u]=!0}))}),delete c[l]}a(this.primaryType,{});for(const l in s){const c=Object.keys(s[l]);c.sort(),this._types[l]=fA(l,e[l])+c.map(u=>fA(u,e[u])).join("")}}getEncoder(e){let n=this._encoderCache[e];return n||(n=this._encoderCache[e]=this._getEncoder(e)),n}_getEncoder(e){{const s=v1(e);if(s)return s}const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const s=n[1],o=this.getEncoder(s),a=parseInt(n[3]);return l=>{a>=0&&l.length!==a&&hr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",l);let c=l.map(o);return this._types[s]&&(c=c.map(ir)),ir(Ni(c))}}const r=this.types[e];if(r){const s=ed(this._types[e]);return o=>{const a=r.map(({name:l,type:c})=>{const u=this.getEncoder(c)(o[l]);return this._types[c]?ir(u):u});return a.unshift(s),Ni(a)}}return hr.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const n=this._types[e];return n||hr.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return ir(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(v1(e))return r(e,n);const s=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(s){const a=s[1],l=parseInt(s[3]);return l>=0&&n.length!==l&&hr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",n),n.map(c=>this._visit(a,c,r))}const o=this.types[e];return o?o.reduce((a,{name:l,type:c})=>(a[l]=this._visit(c,n[l],r),a),{}):hr.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Vi(e)}static getPrimaryType(e){return Vi.from(e).primaryType}static hashStruct(e,n,r){return Vi.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){const s=uA[r];s||hr.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>b1.indexOf(r.name)-b1.indexOf(s.name)),Vi.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Ni(["0x1901",Vi.hashDomain(e),Vi.from(n).hash(r)])}static hash(e,n,r){return ir(Vi.encode(e,n,r))}static resolveNames(e,n,r,s){return rq(this,void 0,void 0,function*(){e=ar(e);const o={};e.verifyingContract&&!cn(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");const a=Vi.from(n);a.visit(r,(l,c)=>(l==="address"&&!cn(c,20)&&(o[c]="0x"),c));for(const l in o)o[l]=yield s(l);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),r=a.visit(r,(l,c)=>l==="address"&&o[c]?o[c]:c),{domain:e,value:r}})}static getPayload(e,n,r){Vi.hashDomain(e);const s={},o=[];b1.forEach(c=>{const u=e[c];u!=null&&(s[c]=cq[c](u),o.push({name:c,type:uA[c]}))});const a=Vi.from(n),l=ar(n);return l.EIP712Domain?hr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",n):l.EIP712Domain=o,a.encode(r),{types:l,domain:s,primaryType:a.primaryType,message:a.visit(r,(c,u)=>{if(c.match(/^bytes(\d*)/))return Ct(Vt(u));if(c.match(/^u?int/))return ce.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&hr.throwArgumentError("invalid string","value",u),u}return hr.throwArgumentError("unsupported type","type",c)})}}}const fr=new fe(Ig);class uq extends Rg{}class dq extends Rg{}class fq extends Rg{}class yT extends Rg{static isIndexed(e){return!!(e&&e._isIndexed)}}const hq={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function hA(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return n.error=e,n}class Gm{constructor(e){let n=[];typeof e=="string"?n=JSON.parse(e):n=e,Ie(this,"fragments",n.map(r=>Ul.from(r)).filter(r=>r!=null)),Ie(this,"_abiCoder",no(new.target,"getAbiCoder")()),Ie(this,"functions",{}),Ie(this,"errors",{}),Ie(this,"events",{}),Ie(this,"structs",{}),this.fragments.forEach(r=>{let s=null;switch(r.type){case"constructor":if(this.deploy){fr.warn("duplicate definition - constructor");return}Ie(this,"deploy",r);return;case"function":s=this.functions;break;case"event":s=this.events;break;case"error":s=this.errors;break;default:return}let o=r.format();if(s[o]){fr.warn("duplicate definition - "+o);return}s[o]=r}),this.deploy||Ie(this,"deploy",Qa.from({payable:!1,type:"constructor"})),Ie(this,"_isInterface",!0)}format(e){e||(e=In.full),e===In.sighash&&fr.throwArgumentError("interface does not support formatting sighash","format",e);const n=this.fragments.map(r=>r.format(e));return e===In.json?JSON.stringify(n.map(r=>JSON.parse(r))):n}static getAbiCoder(){return SN}static getAddress(e){return Xr(e)}static getSighash(e){return As(ed(e.format()),0,4)}static getEventTopic(e){return ed(e.format())}getFunction(e){if(cn(e)){for(const r in this.functions)if(e===this.getSighash(r))return this.functions[r];fr.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),s=Object.keys(this.functions).filter(o=>o.split("(")[0]===r);return s.length===0?fr.throwArgumentError("no matching function","name",r):s.length>1&&fr.throwArgumentError("multiple matching functions","name",r),this.functions[s[0]]}const n=this.functions[Za.fromString(e).format()];return n||fr.throwArgumentError("no matching function","signature",e),n}getEvent(e){if(cn(e)){const r=e.toLowerCase();for(const s in this.events)if(r===this.getEventTopic(s))return this.events[s];fr.throwArgumentError("no matching event","topichash",r)}if(e.indexOf("(")===-1){const r=e.trim(),s=Object.keys(this.events).filter(o=>o.split("(")[0]===r);return s.length===0?fr.throwArgumentError("no matching event","name",r):s.length>1&&fr.throwArgumentError("multiple matching events","name",r),this.events[s[0]]}const n=this.events[Fl.fromString(e).format()];return n||fr.throwArgumentError("no matching event","signature",e),n}getError(e){if(cn(e)){const r=no(this.constructor,"getSighash");for(const s in this.errors){const o=this.errors[s];if(e===r(o))return this.errors[s]}fr.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),s=Object.keys(this.errors).filter(o=>o.split("(")[0]===r);return s.length===0?fr.throwArgumentError("no matching error","name",r):s.length>1&&fr.throwArgumentError("multiple matching errors","name",r),this.errors[s[0]]}const n=this.errors[Za.fromString(e).format()];return n||fr.throwArgumentError("no matching error","signature",e),n}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(n){try{e=this.getError(e)}catch{throw n}}return no(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),no(this.constructor,"getEventTopic")(e)}_decodeParams(e,n){return this._abiCoder.decode(e,n)}_encodeParams(e,n){return this._abiCoder.encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){typeof e=="string"&&(e=this.getError(e));const r=Vt(n);return Ct(r.slice(0,4))!==this.getSighash(e)&&fr.throwArgumentError(`data signature does not match error ${e.name}.`,"data",Ct(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,n){return typeof e=="string"&&(e=this.getError(e)),Ct(to([this.getSighash(e),this._encodeParams(e.inputs,n||[])]))}decodeFunctionData(e,n){typeof e=="string"&&(e=this.getFunction(e));const r=Vt(n);return Ct(r.slice(0,4))!==this.getSighash(e)&&fr.throwArgumentError(`data signature does not match function ${e.name}.`,"data",Ct(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,n){return typeof e=="string"&&(e=this.getFunction(e)),Ct(to([this.getSighash(e),this._encodeParams(e.inputs,n||[])]))}decodeFunctionResult(e,n){typeof e=="string"&&(e=this.getFunction(e));let r=Vt(n),s=null,o="",a=null,l=null,c=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch{}break;case 4:{const u=Ct(r.slice(0,4)),f=hq[u];if(f)a=this._abiCoder.decode(f.inputs,r.slice(4)),l=f.name,c=f.signature,f.reason&&(s=a[0]),l==="Error"?o=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(a[0])}`:l==="Panic"&&(o=`; VM Exception while processing transaction: reverted with panic code ${a[0]}`);else try{const p=this.getError(u);a=this._abiCoder.decode(p.inputs,r.slice(4)),l=p.name,c=p.format()}catch{}break}}return fr.throwError("call revert exception"+o,fe.errors.CALL_EXCEPTION,{method:e.format(),data:Ct(n),errorArgs:a,errorName:l,errorSignature:c,reason:s})}encodeFunctionResult(e,n){return typeof e=="string"&&(e=this.getFunction(e)),Ct(this._abiCoder.encode(e.outputs,n||[]))}encodeFilterTopics(e,n){typeof e=="string"&&(e=this.getEvent(e)),n.length>e.inputs.length&&fr.throwError("too many arguments for "+e.format(),fe.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:n});let r=[];e.anonymous||r.push(this.getEventTopic(e));const s=(o,a)=>o.type==="string"?ed(a):o.type==="bytes"?ir(Ct(a)):(o.type==="bool"&&typeof a=="boolean"&&(a=a?"0x01":"0x00"),o.type.match(/^u?int/)&&(a=ce.from(a).toHexString()),o.type==="address"&&this._abiCoder.encode(["address"],[a]),cr(Ct(a),32));for(n.forEach((o,a)=>{let l=e.inputs[a];if(!l.indexed){o!=null&&fr.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+l.name,o);return}o==null?r.push(null):l.baseType==="array"||l.baseType==="tuple"?fr.throwArgumentError("filtering with tuples or arrays not supported","contract."+l.name,o):Array.isArray(o)?r.push(o.map(c=>s(l,c))):r.push(s(l,o))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){typeof e=="string"&&(e=this.getEvent(e));const r=[],s=[],o=[];return e.anonymous||r.push(this.getEventTopic(e)),n.length!==e.inputs.length&&fr.throwArgumentError("event arguments/values mismatch","values",n),e.inputs.forEach((a,l)=>{const c=n[l];if(a.indexed)if(a.type==="string")r.push(ed(c));else if(a.type==="bytes")r.push(ir(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");r.push(this._abiCoder.encode([a.type],[c]))}else s.push(a),o.push(c)}),{data:this._abiCoder.encode(s,o),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"&&(e=this.getEvent(e)),r!=null&&!e.anonymous){let m=this.getEventTopic(e);(!cn(r[0],32)||r[0].toLowerCase()!==m)&&fr.throwError("fragment/topic mismatch",fe.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:m,value:r[0]}),r=r.slice(1)}let s=[],o=[],a=[];e.inputs.forEach((m,g)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(s.push(ss.fromObject({type:"bytes32",name:m.name})),a.push(!0)):(s.push(m),a.push(!1)):(o.push(m),a.push(!1))});let l=r!=null?this._abiCoder.decode(s,to(r)):null,c=this._abiCoder.decode(o,n,!0),u=[],f=0,p=0;e.inputs.forEach((m,g)=>{if(m.indexed)if(l==null)u[g]=new yT({_isIndexed:!0,hash:null});else if(a[g])u[g]=new yT({_isIndexed:!0,hash:l[p++]});else try{u[g]=l[p++]}catch(w){u[g]=w}else try{u[g]=c[f++]}catch(w){u[g]=w}if(m.name&&u[m.name]==null){const w=u[g];w instanceof Error?Object.defineProperty(u,m.name,{enumerable:!0,get:()=>{throw hA(`property ${JSON.stringify(m.name)}`,w)}}):u[m.name]=w}});for(let m=0;m<u.length;m++){const g=u[m];g instanceof Error&&Object.defineProperty(u,m,{enumerable:!0,get:()=>{throw hA(`index ${m}`,g)}})}return Object.freeze(u)}parseTransaction(e){let n=this.getFunction(e.data.substring(0,10).toLowerCase());return n?new dq({args:this._abiCoder.decode(n.inputs,"0x"+e.data.substring(10)),functionFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n),value:ce.from(e.value||"0")}):null}parseLog(e){let n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new uq({eventFragment:n,name:n.name,signature:n.format(),topic:this.getEventTopic(n),args:this.decodeEventLog(n,e.data,e.topics)})}parseError(e){const n=Ct(e);let r=this.getError(n.substring(0,10).toLowerCase());return r?new fq({args:this._abiCoder.decode(r.inputs,"0x"+n.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const pq="abstract-provider/5.8.0";var mq=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const gq=new fe(pq);class yq extends Rg{static isForkEvent(e){return!!(e&&e._isForkEvent)}}let EN=class I4{constructor(){gq.checkAbstract(new.target,I4),Ie(this,"_isProvider",!0)}getFeeData(){return mq(this,void 0,void 0,function*(){const{block:e,gasPrice:n}=yield Dr({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(a=>null)});let r=null,s=null,o=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,o=ce.from("1500000000"),s=e.baseFeePerGas.mul(2).add(o)),{lastBaseFeePerGas:r,maxFeePerGas:s,maxPriorityFeePerGas:o,gasPrice:n}})}addListener(e,n){return this.on(e,n)}removeListener(e,n){return this.off(e,n)}static isProvider(e){return!!(e&&e._isProvider)}};const xq="abstract-signer/5.8.0";var ua=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const _o=new fe(xq),bq=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],vq=[fe.errors.INSUFFICIENT_FUNDS,fe.errors.NONCE_EXPIRED,fe.errors.REPLACEMENT_UNDERPRICED];class Dg{constructor(){_o.checkAbstract(new.target,Dg),Ie(this,"_isSigner",!0)}getBalance(e){return ua(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return ua(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return ua(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const n=yield Dr(this.checkTransaction(e));return yield this.provider.estimateGas(n)})}call(e,n){return ua(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield Dr(this.checkTransaction(e));return yield this.provider.call(r,n)})}sendTransaction(e){return ua(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const n=yield this.populateTransaction(e),r=yield this.signTransaction(n);return yield this.provider.sendTransaction(r)})}getChainId(){return ua(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return ua(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return ua(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return ua(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const r in e)bq.indexOf(r)===-1&&_o.throwArgumentError("invalid transaction key: "+r,"transaction",e);const n=ar(e);return n.from==null?n.from=this.getAddress():n.from=Promise.all([Promise.resolve(n.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&_o.throwArgumentError("from address mismatch","transaction",e),r[0])),n}populateTransaction(e){return ua(this,void 0,void 0,function*(){const n=yield Dr(this.checkTransaction(e));n.to!=null&&(n.to=Promise.resolve(n.to).then(s=>ua(this,void 0,void 0,function*(){if(s==null)return null;const o=yield this.resolveName(s);return o==null&&_o.throwArgumentError("provided ENS name resolves to null","tx.to",s),o})),n.to.catch(s=>{}));const r=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||r)?_o.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(n.type===0||n.type===1)&&r&&_o.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1)n.gasPrice==null&&(n.gasPrice=this.getGasPrice());else{const s=yield this.getFeeData();if(n.type==null)if(s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const o=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=o,n.maxPriorityFeePerGas=o}else n.maxFeePerGas==null&&(n.maxFeePerGas=s.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=s.maxPriorityFeePerGas);else s.gasPrice!=null?(r&&_o.throwError("network does not support EIP-1559",fe.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=s.gasPrice),n.type=0):_o.throwError("failed to get consistent fee data",fe.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else n.type===2&&(n.maxFeePerGas==null&&(n.maxFeePerGas=s.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=s.maxPriorityFeePerGas))}return n.nonce==null&&(n.nonce=this.getTransactionCount("pending")),n.gasLimit==null&&(n.gasLimit=this.estimateGas(n).catch(s=>{if(vq.indexOf(s.code)>=0)throw s;return _o.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",fe.errors.UNPREDICTABLE_GAS_LIMIT,{error:s,tx:n})})),n.chainId==null?n.chainId=this.getChainId():n.chainId=Promise.all([Promise.resolve(n.chainId),this.getChainId()]).then(s=>(s[1]!==0&&s[0]!==s[1]&&_o.throwArgumentError("chainId address mismatch","transaction",e),s[0])),yield Dr(n)})}_checkProvider(e){this.provider||_o.throwError("missing provider",fe.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class _N extends Dg{constructor(e,n){super(),Ie(this,"address",e),Ie(this,"provider",n||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,n){return Promise.resolve().then(()=>{_o.throwError(e,fe.errors.UNSUPPORTED_OPERATION,{operation:n})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,n,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new _N(this.address,e)}}var w1={},$n={},k1,pA;function Og(){if(pA)return k1;pA=1,k1=t;function t(e,n){if(!e)throw new Error(n||"Assertion failed")}return t.equal=function(n,r,s){if(n!=r)throw new Error(s||"Assertion failed: "+n+" != "+r)},k1}var dx={exports:{}},mA;function wq(){return mA||(mA=1,typeof Object.create=="function"?dx.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:dx.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}}),dx.exports}var gA;function pl(){if(gA)return $n;gA=1;var t=Og(),e=wq();$n.inherits=e;function n(V,A){return(V.charCodeAt(A)&64512)!==55296||A<0||A+1>=V.length?!1:(V.charCodeAt(A+1)&64512)===56320}function r(V,A){if(Array.isArray(V))return V.slice();if(!V)return[];var x=[];if(typeof V=="string")if(A){if(A==="hex")for(V=V.replace(/[^a-z0-9]+/ig,""),V.length%2!==0&&(V="0"+V),L=0;L<V.length;L+=2)x.push(parseInt(V[L]+V[L+1],16))}else for(var C=0,L=0;L<V.length;L++){var z=V.charCodeAt(L);z<128?x[C++]=z:z<2048?(x[C++]=z>>6|192,x[C++]=z&63|128):n(V,L)?(z=65536+((z&1023)<<10)+(V.charCodeAt(++L)&1023),x[C++]=z>>18|240,x[C++]=z>>12&63|128,x[C++]=z>>6&63|128,x[C++]=z&63|128):(x[C++]=z>>12|224,x[C++]=z>>6&63|128,x[C++]=z&63|128)}else for(L=0;L<V.length;L++)x[L]=V[L]|0;return x}$n.toArray=r;function s(V){for(var A="",x=0;x<V.length;x++)A+=l(V[x].toString(16));return A}$n.toHex=s;function o(V){var A=V>>>24|V>>>8&65280|V<<8&16711680|(V&255)<<24;return A>>>0}$n.htonl=o;function a(V,A){for(var x="",C=0;C<V.length;C++){var L=V[C];A==="little"&&(L=o(L)),x+=c(L.toString(16))}return x}$n.toHex32=a;function l(V){return V.length===1?"0"+V:V}$n.zero2=l;function c(V){return V.length===7?"0"+V:V.length===6?"00"+V:V.length===5?"000"+V:V.length===4?"0000"+V:V.length===3?"00000"+V:V.length===2?"000000"+V:V.length===1?"0000000"+V:V}$n.zero8=c;function u(V,A,x,C){var L=x-A;t(L%4===0);for(var z=new Array(L/4),R=0,I=A;R<z.length;R++,I+=4){var N;C==="big"?N=V[I]<<24|V[I+1]<<16|V[I+2]<<8|V[I+3]:N=V[I+3]<<24|V[I+2]<<16|V[I+1]<<8|V[I],z[R]=N>>>0}return z}$n.join32=u;function f(V,A){for(var x=new Array(V.length*4),C=0,L=0;C<V.length;C++,L+=4){var z=V[C];A==="big"?(x[L]=z>>>24,x[L+1]=z>>>16&255,x[L+2]=z>>>8&255,x[L+3]=z&255):(x[L+3]=z>>>24,x[L+2]=z>>>16&255,x[L+1]=z>>>8&255,x[L]=z&255)}return x}$n.split32=f;function p(V,A){return V>>>A|V<<32-A}$n.rotr32=p;function m(V,A){return V<<A|V>>>32-A}$n.rotl32=m;function g(V,A){return V+A>>>0}$n.sum32=g;function w(V,A,x){return V+A+x>>>0}$n.sum32_3=w;function y(V,A,x,C){return V+A+x+C>>>0}$n.sum32_4=y;function T(V,A,x,C,L){return V+A+x+C+L>>>0}$n.sum32_5=T;function j(V,A,x,C){var L=V[A],z=V[A+1],R=C+z>>>0,I=(R<C?1:0)+x+L;V[A]=I>>>0,V[A+1]=R}$n.sum64=j;function _(V,A,x,C){var L=A+C>>>0,z=(L<A?1:0)+V+x;return z>>>0}$n.sum64_hi=_;function v(V,A,x,C){var L=A+C;return L>>>0}$n.sum64_lo=v;function P(V,A,x,C,L,z,R,I){var N=0,F=A;F=F+C>>>0,N+=F<A?1:0,F=F+z>>>0,N+=F<z?1:0,F=F+I>>>0,N+=F<I?1:0;var E=V+x+L+R+N;return E>>>0}$n.sum64_4_hi=P;function D(V,A,x,C,L,z,R,I){var N=A+C+z+I;return N>>>0}$n.sum64_4_lo=D;function $(V,A,x,C,L,z,R,I,N,F){var E=0,M=A;M=M+C>>>0,E+=M<A?1:0,M=M+z>>>0,E+=M<z?1:0,M=M+I>>>0,E+=M<I?1:0,M=M+F>>>0,E+=M<F?1:0;var ee=V+x+L+R+N+E;return ee>>>0}$n.sum64_5_hi=$;function U(V,A,x,C,L,z,R,I,N,F){var E=A+C+z+I+F;return E>>>0}$n.sum64_5_lo=U;function K(V,A,x){var C=A<<32-x|V>>>x;return C>>>0}$n.rotr64_hi=K;function Y(V,A,x){var C=V<<32-x|A>>>x;return C>>>0}$n.rotr64_lo=Y;function G(V,A,x){return V>>>x}$n.shr64_hi=G;function X(V,A,x){var C=V<<32-x|A>>>x;return C>>>0}return $n.shr64_lo=X,$n}var T1={},yA;function Lg(){if(yA)return T1;yA=1;var t=pl(),e=Og();function n(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return T1.BlockHash=n,n.prototype.update=function(s,o){if(s=t.toArray(s,o),this.pending?this.pending=this.pending.concat(s):this.pending=s,this.pendingTotal+=s.length,this.pending.length>=this._delta8){s=this.pending;var a=s.length%this._delta8;this.pending=s.slice(s.length-a,s.length),this.pending.length===0&&(this.pending=null),s=t.join32(s,0,s.length-a,this.endian);for(var l=0;l<s.length;l+=this._delta32)this._update(s,l,l+this._delta32)}return this},n.prototype.digest=function(s){return this.update(this._pad()),e(this.pending===null),this._digest(s)},n.prototype._pad=function(){var s=this.pendingTotal,o=this._delta8,a=o-(s+this.padLength)%o,l=new Array(a+this.padLength);l[0]=128;for(var c=1;c<a;c++)l[c]=0;if(s<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)l[c++]=0;l[c++]=0,l[c++]=0,l[c++]=0,l[c++]=0,l[c++]=s>>>24&255,l[c++]=s>>>16&255,l[c++]=s>>>8&255,l[c++]=s&255}else for(l[c++]=s&255,l[c++]=s>>>8&255,l[c++]=s>>>16&255,l[c++]=s>>>24&255,l[c++]=0,l[c++]=0,l[c++]=0,l[c++]=0,u=8;u<this.padLength;u++)l[c++]=0;return l},T1}var Iu={},$a={},xA;function M4(){if(xA)return $a;xA=1;var t=pl(),e=t.rotr32;function n(f,p,m,g){if(f===0)return r(p,m,g);if(f===1||f===3)return o(p,m,g);if(f===2)return s(p,m,g)}$a.ft_1=n;function r(f,p,m){return f&p^~f&m}$a.ch32=r;function s(f,p,m){return f&p^f&m^p&m}$a.maj32=s;function o(f,p,m){return f^p^m}$a.p32=o;function a(f){return e(f,2)^e(f,13)^e(f,22)}$a.s0_256=a;function l(f){return e(f,6)^e(f,11)^e(f,25)}$a.s1_256=l;function c(f){return e(f,7)^e(f,18)^f>>>3}$a.g0_256=c;function u(f){return e(f,17)^e(f,19)^f>>>10}return $a.g1_256=u,$a}var N1,bA;function kq(){if(bA)return N1;bA=1;var t=pl(),e=Lg(),n=M4(),r=t.rotl32,s=t.sum32,o=t.sum32_5,a=n.ft_1,l=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(u,l),N1=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(p,m){for(var g=this.W,w=0;w<16;w++)g[w]=p[m+w];for(;w<g.length;w++)g[w]=r(g[w-3]^g[w-8]^g[w-14]^g[w-16],1);var y=this.h[0],T=this.h[1],j=this.h[2],_=this.h[3],v=this.h[4];for(w=0;w<g.length;w++){var P=~~(w/20),D=o(r(y,5),a(P,T,j,_),v,g[w],c[P]);v=_,_=j,j=r(T,30),T=y,y=D}this.h[0]=s(this.h[0],y),this.h[1]=s(this.h[1],T),this.h[2]=s(this.h[2],j),this.h[3]=s(this.h[3],_),this.h[4]=s(this.h[4],v)},u.prototype._digest=function(p){return p==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},N1}var j1,vA;function D4(){if(vA)return j1;vA=1;var t=pl(),e=Lg(),n=M4(),r=Og(),s=t.sum32,o=t.sum32_4,a=t.sum32_5,l=n.ch32,c=n.maj32,u=n.s0_256,f=n.s1_256,p=n.g0_256,m=n.g1_256,g=e.BlockHash,w=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=w,this.W=new Array(64)}return t.inherits(y,g),j1=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(j,_){for(var v=this.W,P=0;P<16;P++)v[P]=j[_+P];for(;P<v.length;P++)v[P]=o(m(v[P-2]),v[P-7],p(v[P-15]),v[P-16]);var D=this.h[0],$=this.h[1],U=this.h[2],K=this.h[3],Y=this.h[4],G=this.h[5],X=this.h[6],V=this.h[7];for(r(this.k.length===v.length),P=0;P<v.length;P++){var A=a(V,f(Y),l(Y,G,X),this.k[P],v[P]),x=s(u(D),c(D,$,U));V=X,X=G,G=Y,Y=s(K,A),K=U,U=$,$=D,D=s(A,x)}this.h[0]=s(this.h[0],D),this.h[1]=s(this.h[1],$),this.h[2]=s(this.h[2],U),this.h[3]=s(this.h[3],K),this.h[4]=s(this.h[4],Y),this.h[5]=s(this.h[5],G),this.h[6]=s(this.h[6],X),this.h[7]=s(this.h[7],V)},y.prototype._digest=function(j){return j==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},j1}var C1,wA;function Tq(){if(wA)return C1;wA=1;var t=pl(),e=D4();function n(){if(!(this instanceof n))return new n;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(n,e),C1=n,n.blockSize=512,n.outSize=224,n.hmacStrength=192,n.padLength=64,n.prototype._digest=function(s){return s==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},C1}var S1,kA;function O4(){if(kA)return S1;kA=1;var t=pl(),e=Lg(),n=Og(),r=t.rotr64_hi,s=t.rotr64_lo,o=t.shr64_hi,a=t.shr64_lo,l=t.sum64,c=t.sum64_hi,u=t.sum64_lo,f=t.sum64_4_hi,p=t.sum64_4_lo,m=t.sum64_5_hi,g=t.sum64_5_lo,w=e.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function T(){if(!(this instanceof T))return new T;w.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}t.inherits(T,w),S1=T,T.blockSize=1024,T.outSize=512,T.hmacStrength=192,T.padLength=128,T.prototype._prepareBlock=function(x,C){for(var L=this.W,z=0;z<32;z++)L[z]=x[C+z];for(;z<L.length;z+=2){var R=X(L[z-4],L[z-3]),I=V(L[z-4],L[z-3]),N=L[z-14],F=L[z-13],E=Y(L[z-30],L[z-29]),M=G(L[z-30],L[z-29]),ee=L[z-32],O=L[z-31];L[z]=f(R,I,N,F,E,M,ee,O),L[z+1]=p(R,I,N,F,E,M,ee,O)}},T.prototype._update=function(x,C){this._prepareBlock(x,C);var L=this.W,z=this.h[0],R=this.h[1],I=this.h[2],N=this.h[3],F=this.h[4],E=this.h[5],M=this.h[6],ee=this.h[7],O=this.h[8],q=this.h[9],H=this.h[10],J=this.h[11],Q=this.h[12],ne=this.h[13],se=this.h[14],ie=this.h[15];n(this.k.length===L.length);for(var pe=0;pe<L.length;pe+=2){var le=se,me=ie,Ee=U(O,q),te=K(O,q),Ne=j(O,q,H,J,Q),Pe=_(O,q,H,J,Q,ne),et=this.k[pe],Le=this.k[pe+1],Se=L[pe],Te=L[pe+1],ze=m(le,me,Ee,te,Ne,Pe,et,Le,Se,Te),dt=g(le,me,Ee,te,Ne,Pe,et,Le,Se,Te);le=D(z,R),me=$(z,R),Ee=v(z,R,I,N,F),te=P(z,R,I,N,F,E);var oe=c(le,me,Ee,te),ue=u(le,me,Ee,te);se=Q,ie=ne,Q=H,ne=J,H=O,J=q,O=c(M,ee,ze,dt),q=u(ee,ee,ze,dt),M=F,ee=E,F=I,E=N,I=z,N=R,z=c(ze,dt,oe,ue),R=u(ze,dt,oe,ue)}l(this.h,0,z,R),l(this.h,2,I,N),l(this.h,4,F,E),l(this.h,6,M,ee),l(this.h,8,O,q),l(this.h,10,H,J),l(this.h,12,Q,ne),l(this.h,14,se,ie)},T.prototype._digest=function(x){return x==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function j(A,x,C,L,z){var R=A&C^~A&z;return R<0&&(R+=4294967296),R}function _(A,x,C,L,z,R){var I=x&L^~x&R;return I<0&&(I+=4294967296),I}function v(A,x,C,L,z){var R=A&C^A&z^C&z;return R<0&&(R+=4294967296),R}function P(A,x,C,L,z,R){var I=x&L^x&R^L&R;return I<0&&(I+=4294967296),I}function D(A,x){var C=r(A,x,28),L=r(x,A,2),z=r(x,A,7),R=C^L^z;return R<0&&(R+=4294967296),R}function $(A,x){var C=s(A,x,28),L=s(x,A,2),z=s(x,A,7),R=C^L^z;return R<0&&(R+=4294967296),R}function U(A,x){var C=r(A,x,14),L=r(A,x,18),z=r(x,A,9),R=C^L^z;return R<0&&(R+=4294967296),R}function K(A,x){var C=s(A,x,14),L=s(A,x,18),z=s(x,A,9),R=C^L^z;return R<0&&(R+=4294967296),R}function Y(A,x){var C=r(A,x,1),L=r(A,x,8),z=o(A,x,7),R=C^L^z;return R<0&&(R+=4294967296),R}function G(A,x){var C=s(A,x,1),L=s(A,x,8),z=a(A,x,7),R=C^L^z;return R<0&&(R+=4294967296),R}function X(A,x){var C=r(A,x,19),L=r(x,A,29),z=o(A,x,6),R=C^L^z;return R<0&&(R+=4294967296),R}function V(A,x){var C=s(A,x,19),L=s(x,A,29),z=a(A,x,6),R=C^L^z;return R<0&&(R+=4294967296),R}return S1}var E1,TA;function Nq(){if(TA)return E1;TA=1;var t=pl(),e=O4();function n(){if(!(this instanceof n))return new n;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(n,e),E1=n,n.blockSize=1024,n.outSize=384,n.hmacStrength=192,n.padLength=128,n.prototype._digest=function(s){return s==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},E1}var NA;function jq(){return NA||(NA=1,Iu.sha1=kq(),Iu.sha224=Tq(),Iu.sha256=D4(),Iu.sha384=Nq(),Iu.sha512=O4()),Iu}var _1={},jA;function Cq(){if(jA)return _1;jA=1;var t=pl(),e=Lg(),n=t.rotl32,r=t.sum32,s=t.sum32_3,o=t.sum32_4,a=e.BlockHash;function l(){if(!(this instanceof l))return new l;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(l,a),_1.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(T,j){for(var _=this.h[0],v=this.h[1],P=this.h[2],D=this.h[3],$=this.h[4],U=_,K=v,Y=P,G=D,X=$,V=0;V<80;V++){var A=r(n(o(_,c(V,v,P,D),T[p[V]+j],u(V)),g[V]),$);_=$,$=D,D=n(P,10),P=v,v=A,A=r(n(o(U,c(79-V,K,Y,G),T[m[V]+j],f(V)),w[V]),X),U=X,X=G,G=n(Y,10),Y=K,K=A}A=s(this.h[1],P,G),this.h[1]=s(this.h[2],D,X),this.h[2]=s(this.h[3],$,U),this.h[3]=s(this.h[4],_,K),this.h[4]=s(this.h[0],v,Y),this.h[0]=A},l.prototype._digest=function(T){return T==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function c(y,T,j,_){return y<=15?T^j^_:y<=31?T&j|~T&_:y<=47?(T|~j)^_:y<=63?T&_|j&~_:T^(j|~_)}function u(y){return y<=15?0:y<=31?1518500249:y<=47?1859775393:y<=63?2400959708:2840853838}function f(y){return y<=15?1352829926:y<=31?1548603684:y<=47?1836072691:y<=63?2053994217:0}var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],w=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return _1}var A1,CA;function Sq(){if(CA)return A1;CA=1;var t=pl(),e=Og();function n(r,s,o){if(!(this instanceof n))return new n(r,s,o);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(s,o))}return A1=n,n.prototype._init=function(s){s.length>this.blockSize&&(s=new this.Hash().update(s).digest()),e(s.length<=this.blockSize);for(var o=s.length;o<this.blockSize;o++)s.push(0);for(o=0;o<s.length;o++)s[o]^=54;for(this.inner=new this.Hash().update(s),o=0;o<s.length;o++)s[o]^=106;this.outer=new this.Hash().update(s)},n.prototype.update=function(s,o){return this.inner.update(s,o),this},n.prototype.digest=function(s){return this.outer.update(this.inner.digest()),this.outer.digest(s)},A1}var SA;function Eq(){return SA||(SA=1,function(t){var e=t;e.utils=pl(),e.common=Lg(),e.sha=jq(),e.ripemd=Cq(),e.hmac=Sq(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(w1)),w1}var _q=Eq();const qa=rc(_q);function Fh(t,e,n){return n={path:e,exports:{},require:function(r,s){return Aq(r,s??n.path)}},t(n,n.exports),n.exports}function Aq(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var AN=L4;function L4(t,e){if(!t)throw new Error(e||"Assertion failed")}L4.equal=function(e,n,r){if(e!=n)throw new Error(r||"Assertion failed: "+e+" != "+n)};var Ta=Fh(function(t,e){var n=e;function r(a,l){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if(typeof a!="string"){for(var u=0;u<a.length;u++)c[u]=a[u]|0;return c}if(l==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var u=0;u<a.length;u+=2)c.push(parseInt(a[u]+a[u+1],16))}else for(var u=0;u<a.length;u++){var f=a.charCodeAt(u),p=f>>8,m=f&255;p?c.push(p,m):c.push(m)}return c}n.toArray=r;function s(a){return a.length===1?"0"+a:a}n.zero2=s;function o(a){for(var l="",c=0;c<a.length;c++)l+=s(a[c].toString(16));return l}n.toHex=o,n.encode=function(l,c){return c==="hex"?o(l):l}}),go=Fh(function(t,e){var n=e;n.assert=AN,n.toArray=Ta.toArray,n.zero2=Ta.zero2,n.toHex=Ta.toHex,n.encode=Ta.encode;function r(c,u,f){var p=new Array(Math.max(c.bitLength(),f)+1),m;for(m=0;m<p.length;m+=1)p[m]=0;var g=1<<u+1,w=c.clone();for(m=0;m<p.length;m++){var y,T=w.andln(g-1);w.isOdd()?(T>(g>>1)-1?y=(g>>1)-T:y=T,w.isubn(y)):y=0,p[m]=y,w.iushrn(1)}return p}n.getNAF=r;function s(c,u){var f=[[],[]];c=c.clone(),u=u.clone();for(var p=0,m=0,g;c.cmpn(-p)>0||u.cmpn(-m)>0;){var w=c.andln(3)+p&3,y=u.andln(3)+m&3;w===3&&(w=-1),y===3&&(y=-1);var T;(w&1)===0?T=0:(g=c.andln(7)+p&7,(g===3||g===5)&&y===2?T=-w:T=w),f[0].push(T);var j;(y&1)===0?j=0:(g=u.andln(7)+m&7,(g===3||g===5)&&w===2?j=-y:j=y),f[1].push(j),2*p===T+1&&(p=1-p),2*m===j+1&&(m=1-m),c.iushrn(1),u.iushrn(1)}return f}n.getJSF=s;function o(c,u,f){var p="_"+u;c.prototype[u]=function(){return this[p]!==void 0?this[p]:this[p]=f.call(this)}}n.cachedProperty=o;function a(c){return typeof c=="string"?n.toArray(c,"hex"):c}n.parseBytes=a;function l(c){return new Gt(c,"hex","le")}n.intFromLE=l}),z0=go.getNAF,Pq=go.getJSF,$0=go.assert;function iu(t,e){this.type=t,this.p=new Gt(e.p,16),this.red=e.prime?Gt.red(e.prime):Gt.mont(this.p),this.zero=new Gt(0).toRed(this.red),this.one=new Gt(1).toRed(this.red),this.two=new Gt(2).toRed(this.red),this.n=e.n&&new Gt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Fd=iu;iu.prototype.point=function(){throw new Error("Not implemented")};iu.prototype.validate=function(){throw new Error("Not implemented")};iu.prototype._fixedNafMul=function(e,n){$0(e.precomputed);var r=e._getDoubles(),s=z0(n,1,this._bitLength),o=(1<<r.step+1)-(r.step%2===0?2:1);o/=3;var a=[],l,c;for(l=0;l<s.length;l+=r.step){c=0;for(var u=l+r.step-1;u>=l;u--)c=(c<<1)+s[u];a.push(c)}for(var f=this.jpoint(null,null,null),p=this.jpoint(null,null,null),m=o;m>0;m--){for(l=0;l<a.length;l++)c=a[l],c===m?p=p.mixedAdd(r.points[l]):c===-m&&(p=p.mixedAdd(r.points[l].neg()));f=f.add(p)}return f.toP()};iu.prototype._wnafMul=function(e,n){var r=4,s=e._getNAFPoints(r);r=s.wnd;for(var o=s.points,a=z0(n,r,this._bitLength),l=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var u=0;c>=0&&a[c]===0;c--)u++;if(c>=0&&u++,l=l.dblp(u),c<0)break;var f=a[c];$0(f!==0),e.type==="affine"?f>0?l=l.mixedAdd(o[f-1>>1]):l=l.mixedAdd(o[-f-1>>1].neg()):f>0?l=l.add(o[f-1>>1]):l=l.add(o[-f-1>>1].neg())}return e.type==="affine"?l.toP():l};iu.prototype._wnafMulAdd=function(e,n,r,s,o){var a=this._wnafT1,l=this._wnafT2,c=this._wnafT3,u=0,f,p,m;for(f=0;f<s;f++){m=n[f];var g=m._getNAFPoints(e);a[f]=g.wnd,l[f]=g.points}for(f=s-1;f>=1;f-=2){var w=f-1,y=f;if(a[w]!==1||a[y]!==1){c[w]=z0(r[w],a[w],this._bitLength),c[y]=z0(r[y],a[y],this._bitLength),u=Math.max(c[w].length,u),u=Math.max(c[y].length,u);continue}var T=[n[w],null,null,n[y]];n[w].y.cmp(n[y].y)===0?(T[1]=n[w].add(n[y]),T[2]=n[w].toJ().mixedAdd(n[y].neg())):n[w].y.cmp(n[y].y.redNeg())===0?(T[1]=n[w].toJ().mixedAdd(n[y]),T[2]=n[w].add(n[y].neg())):(T[1]=n[w].toJ().mixedAdd(n[y]),T[2]=n[w].toJ().mixedAdd(n[y].neg()));var j=[-3,-1,-5,-7,0,7,5,1,3],_=Pq(r[w],r[y]);for(u=Math.max(_[0].length,u),c[w]=new Array(u),c[y]=new Array(u),p=0;p<u;p++){var v=_[0][p]|0,P=_[1][p]|0;c[w][p]=j[(v+1)*3+(P+1)],c[y][p]=0,l[w]=T}}var D=this.jpoint(null,null,null),$=this._wnafT4;for(f=u;f>=0;f--){for(var U=0;f>=0;){var K=!0;for(p=0;p<s;p++)$[p]=c[p][f]|0,$[p]!==0&&(K=!1);if(!K)break;U++,f--}if(f>=0&&U++,D=D.dblp(U),f<0)break;for(p=0;p<s;p++){var Y=$[p];Y!==0&&(Y>0?m=l[p][Y-1>>1]:Y<0&&(m=l[p][-Y-1>>1].neg()),m.type==="affine"?D=D.mixedAdd(m):D=D.add(m))}}for(f=0;f<s;f++)l[f]=null;return o?D:D.toP()};function Go(t,e){this.curve=t,this.type=e,this.precomputed=null}iu.BasePoint=Go;Go.prototype.eq=function(){throw new Error("Not implemented")};Go.prototype.validate=function(){return this.curve.validate(this)};iu.prototype.decodePoint=function(e,n){e=go.toArray(e,n);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?$0(e[e.length-1]%2===0):e[0]===7&&$0(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return s}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};Go.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Go.prototype._encode=function(e){var n=this.curve.p.byteLength(),r=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",n))};Go.prototype.encode=function(e,n){return go.encode(this._encode(n),e)};Go.prototype.precompute=function(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};Go.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};Go.prototype._getDoubles=function(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],s=this,o=0;o<n;o+=e){for(var a=0;a<e;a++)s=s.dbl();r.push(s)}return{step:e,points:r}};Go.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],r=(1<<e)-1,s=r===1?null:this.dbl(),o=1;o<r;o++)n[o]=n[o-1].add(s);return{wnd:e,points:n}};Go.prototype._getBeta=function(){return null};Go.prototype.dblp=function(e){for(var n=this,r=0;r<e;r++)n=n.dbl();return n};var PN=Fh(function(t){typeof Object.create=="function"?t.exports=function(n,r){r&&(n.super_=r,n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(n,r){if(r){n.super_=r;var s=function(){};s.prototype=r.prototype,n.prototype=new s,n.prototype.constructor=n}}}),Rq=go.assert;function Ko(t){Fd.call(this,"short",t),this.a=new Gt(t.a,16).toRed(this.red),this.b=new Gt(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}PN(Ko,Fd);var Iq=Ko;Ko.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,r;if(e.beta)n=new Gt(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);n=s[0].cmp(s[1])<0?s[0]:s[1],n=n.toRed(this.red)}if(e.lambda)r=new Gt(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(n))===0?r=o[0]:(r=o[1],Rq(this.g.mul(r).x.cmp(this.g.x.redMul(n))===0))}var a;return e.basis?a=e.basis.map(function(l){return{a:new Gt(l.a,16),b:new Gt(l.b,16)}}):a=this._getEndoBasis(r),{beta:n,lambda:r,basis:a}}};Ko.prototype._getEndoRoots=function(e){var n=e===this.p?this.red:Gt.mont(e),r=new Gt(2).toRed(n).redInvm(),s=r.redNeg(),o=new Gt(3).toRed(n).redNeg().redSqrt().redMul(r),a=s.redAdd(o).fromRed(),l=s.redSub(o).fromRed();return[a,l]};Ko.prototype._getEndoBasis=function(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,s=this.n.clone(),o=new Gt(1),a=new Gt(0),l=new Gt(0),c=new Gt(1),u,f,p,m,g,w,y,T=0,j,_;r.cmpn(0)!==0;){var v=s.div(r);j=s.sub(v.mul(r)),_=l.sub(v.mul(o));var P=c.sub(v.mul(a));if(!p&&j.cmp(n)<0)u=y.neg(),f=o,p=j.neg(),m=_;else if(p&&++T===2)break;y=j,s=r,r=j,l=o,o=_,c=a,a=P}g=j.neg(),w=_;var D=p.sqr().add(m.sqr()),$=g.sqr().add(w.sqr());return $.cmp(D)>=0&&(g=u,w=f),p.negative&&(p=p.neg(),m=m.neg()),g.negative&&(g=g.neg(),w=w.neg()),[{a:p,b:m},{a:g,b:w}]};Ko.prototype._endoSplit=function(e){var n=this.endo.basis,r=n[0],s=n[1],o=s.b.mul(e).divRound(this.n),a=r.b.neg().mul(e).divRound(this.n),l=o.mul(r.a),c=a.mul(s.a),u=o.mul(r.b),f=a.mul(s.b),p=e.sub(l).sub(c),m=u.add(f).neg();return{k1:p,k2:m}};Ko.prototype.pointFromX=function(e,n){e=new Gt(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=r.redSqrt();if(s.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var o=s.fromRed().isOdd();return(n&&!o||!n&&o)&&(s=s.redNeg()),this.point(e,s)};Ko.prototype.validate=function(e){if(e.inf)return!0;var n=e.x,r=e.y,s=this.a.redMul(n),o=n.redSqr().redMul(n).redIAdd(s).redIAdd(this.b);return r.redSqr().redISub(o).cmpn(0)===0};Ko.prototype._endoWnafMulAdd=function(e,n,r){for(var s=this._endoWnafT1,o=this._endoWnafT2,a=0;a<e.length;a++){var l=this._endoSplit(n[a]),c=e[a],u=c._getBeta();l.k1.negative&&(l.k1.ineg(),c=c.neg(!0)),l.k2.negative&&(l.k2.ineg(),u=u.neg(!0)),s[a*2]=c,s[a*2+1]=u,o[a*2]=l.k1,o[a*2+1]=l.k2}for(var f=this._wnafMulAdd(1,s,o,a*2,r),p=0;p<a*2;p++)s[p]=null,o[p]=null;return f};function cs(t,e,n,r){Fd.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Gt(e,16),this.y=new Gt(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}PN(cs,Fd.BasePoint);Ko.prototype.point=function(e,n,r){return new cs(this,e,n,r)};Ko.prototype.pointFromJSON=function(e,n){return cs.fromJSON(this,e,n)};cs.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,s=function(o){return r.point(o.x.redMul(r.endo.beta),o.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return n}};cs.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};cs.fromJSON=function(e,n,r){typeof n=="string"&&(n=JSON.parse(n));var s=e.point(n[0],n[1],r);if(!n[2])return s;function o(l){return e.point(l[0],l[1],r)}var a=n[2];return s.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[s].concat(a.doubles.points.map(o))},naf:a.naf&&{wnd:a.naf.wnd,points:[s].concat(a.naf.points.map(o))}},s};cs.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};cs.prototype.isInfinity=function(){return this.inf};cs.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var r=n.redSqr().redISub(this.x).redISub(e.x),s=n.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,s)};cs.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,r=this.x.redSqr(),s=e.redInvm(),o=r.redAdd(r).redIAdd(r).redIAdd(n).redMul(s),a=o.redSqr().redISub(this.x.redAdd(this.x)),l=o.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,l)};cs.prototype.getX=function(){return this.x.fromRed()};cs.prototype.getY=function(){return this.y.fromRed()};cs.prototype.mul=function(e){return e=new Gt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};cs.prototype.mulAdd=function(e,n,r){var s=[this,n],o=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(s,o):this.curve._wnafMulAdd(1,s,o,2)};cs.prototype.jmulAdd=function(e,n,r){var s=[this,n],o=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(s,o,!0):this.curve._wnafMulAdd(1,s,o,2,!0)};cs.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};cs.prototype.neg=function(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,s=function(o){return o.neg()};n.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(s)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(s)}}}return n};cs.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function ws(t,e,n,r){Fd.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Gt(0)):(this.x=new Gt(e,16),this.y=new Gt(n,16),this.z=new Gt(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}PN(ws,Fd.BasePoint);Ko.prototype.jpoint=function(e,n,r){return new ws(this,e,n,r)};ws.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),r=this.x.redMul(n),s=this.y.redMul(n).redMul(e);return this.curve.point(r,s)};ws.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};ws.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),r=this.z.redSqr(),s=this.x.redMul(n),o=e.x.redMul(r),a=this.y.redMul(n.redMul(e.z)),l=e.y.redMul(r.redMul(this.z)),c=s.redSub(o),u=a.redSub(l);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),p=f.redMul(c),m=s.redMul(f),g=u.redSqr().redIAdd(p).redISub(m).redISub(m),w=u.redMul(m.redISub(g)).redISub(a.redMul(p)),y=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(g,w,y)};ws.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),r=this.x,s=e.x.redMul(n),o=this.y,a=e.y.redMul(n).redMul(this.z),l=r.redSub(s),c=o.redSub(a);if(l.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=l.redSqr(),f=u.redMul(l),p=r.redMul(u),m=c.redSqr().redIAdd(f).redISub(p).redISub(p),g=c.redMul(p.redISub(m)).redISub(o.redMul(f)),w=this.z.redMul(l);return this.curve.jpoint(m,g,w)};ws.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var r=this;for(n=0;n<e;n++)r=r.dbl();return r}var s=this.curve.a,o=this.curve.tinv,a=this.x,l=this.y,c=this.z,u=c.redSqr().redSqr(),f=l.redAdd(l);for(n=0;n<e;n++){var p=a.redSqr(),m=f.redSqr(),g=m.redSqr(),w=p.redAdd(p).redIAdd(p).redIAdd(s.redMul(u)),y=a.redMul(m),T=w.redSqr().redISub(y.redAdd(y)),j=y.redISub(T),_=w.redMul(j);_=_.redIAdd(_).redISub(g);var v=f.redMul(c);n+1<e&&(u=u.redMul(g)),a=T,c=v,f=_}return this.curve.jpoint(a,f.redMul(o),c)};ws.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};ws.prototype._zeroDbl=function(){var e,n,r;if(this.zOne){var s=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),l=this.x.redAdd(o).redSqr().redISub(s).redISub(a);l=l.redIAdd(l);var c=s.redAdd(s).redIAdd(s),u=c.redSqr().redISub(l).redISub(l),f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),e=u,n=c.redMul(l.redISub(u)).redISub(f),r=this.y.redAdd(this.y)}else{var p=this.x.redSqr(),m=this.y.redSqr(),g=m.redSqr(),w=this.x.redAdd(m).redSqr().redISub(p).redISub(g);w=w.redIAdd(w);var y=p.redAdd(p).redIAdd(p),T=y.redSqr(),j=g.redIAdd(g);j=j.redIAdd(j),j=j.redIAdd(j),e=T.redISub(w).redISub(w),n=y.redMul(w.redISub(e)).redISub(j),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,n,r)};ws.prototype._threeDbl=function(){var e,n,r;if(this.zOne){var s=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),l=this.x.redAdd(o).redSqr().redISub(s).redISub(a);l=l.redIAdd(l);var c=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),u=c.redSqr().redISub(l).redISub(l);e=u;var f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),n=c.redMul(l.redISub(u)).redISub(f),r=this.y.redAdd(this.y)}else{var p=this.z.redSqr(),m=this.y.redSqr(),g=this.x.redMul(m),w=this.x.redSub(p).redMul(this.x.redAdd(p));w=w.redAdd(w).redIAdd(w);var y=g.redIAdd(g);y=y.redIAdd(y);var T=y.redAdd(y);e=w.redSqr().redISub(T),r=this.y.redAdd(this.z).redSqr().redISub(m).redISub(p);var j=m.redSqr();j=j.redIAdd(j),j=j.redIAdd(j),j=j.redIAdd(j),n=w.redMul(y.redISub(e)).redISub(j)}return this.curve.jpoint(e,n,r)};ws.prototype._dbl=function(){var e=this.curve.a,n=this.x,r=this.y,s=this.z,o=s.redSqr().redSqr(),a=n.redSqr(),l=r.redSqr(),c=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(o)),u=n.redAdd(n);u=u.redIAdd(u);var f=u.redMul(l),p=c.redSqr().redISub(f.redAdd(f)),m=f.redISub(p),g=l.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var w=c.redMul(m).redISub(g),y=r.redAdd(r).redMul(s);return this.curve.jpoint(p,w,y)};ws.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),r=this.z.redSqr(),s=n.redSqr(),o=e.redAdd(e).redIAdd(e),a=o.redSqr(),l=this.x.redAdd(n).redSqr().redISub(e).redISub(s);l=l.redIAdd(l),l=l.redAdd(l).redIAdd(l),l=l.redISub(a);var c=l.redSqr(),u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var f=o.redIAdd(l).redSqr().redISub(a).redISub(c).redISub(u),p=n.redMul(f);p=p.redIAdd(p),p=p.redIAdd(p);var m=this.x.redMul(c).redISub(p);m=m.redIAdd(m),m=m.redIAdd(m);var g=this.y.redMul(f.redMul(u.redISub(f)).redISub(l.redMul(c)));g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var w=this.z.redAdd(l).redSqr().redISub(r).redISub(c);return this.curve.jpoint(m,g,w)};ws.prototype.mul=function(e,n){return e=new Gt(e,n),this.curve._wnafMul(this,e)};ws.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var s=n.redMul(this.z),o=r.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(s)).cmpn(0)===0};ws.prototype.eqXToP=function(e){var n=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(r)===0)return!0;for(var s=e.clone(),o=this.curve.redN.redMul(n);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(o),this.x.cmp(r)===0)return!0}};ws.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};ws.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var c0=Fh(function(t,e){var n=e;n.base=Fd,n.short=Iq,n.mont=null,n.edwards=null}),u0=Fh(function(t,e){var n=e,r=go.assert;function s(l){l.type==="short"?this.curve=new c0.short(l):l.type==="edwards"?this.curve=new c0.edwards(l):this.curve=new c0.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=s;function o(l,c){Object.defineProperty(n,l,{configurable:!0,enumerable:!0,get:function(){var u=new s(c);return Object.defineProperty(n,l,{configurable:!0,enumerable:!0,value:u}),u}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:qa.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:qa.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:qa.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:qa.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:qa.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:qa.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:qa.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:qa.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function Jc(t){if(!(this instanceof Jc))return new Jc(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ta.toArray(t.entropy,t.entropyEnc||"hex"),n=Ta.toArray(t.nonce,t.nonceEnc||"hex"),r=Ta.toArray(t.pers,t.persEnc||"hex");AN(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}var F4=Jc;Jc.prototype._init=function(e,n,r){var s=e.concat(n).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656};Jc.prototype._hmac=function(){return new qa.hmac(this.hash,this.K)};Jc.prototype._update=function(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Jc.prototype.reseed=function(e,n,r,s){typeof n!="string"&&(s=r,r=n,n=null),e=Ta.toArray(e,n),r=Ta.toArray(r,s),AN(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};Jc.prototype.generate=function(e,n,r,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(s=r,r=n,n=null),r&&(r=Ta.toArray(r,s||"hex"),this._update(r));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,e);return this._update(r),this._reseed++,Ta.encode(a,n)};var xT=go.assert;function $s(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var RN=$s;$s.fromPublic=function(e,n,r){return n instanceof $s?n:new $s(e,{pub:n,pubEnc:r})};$s.fromPrivate=function(e,n,r){return n instanceof $s?n:new $s(e,{priv:n,privEnc:r})};$s.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};$s.prototype.getPublic=function(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};$s.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};$s.prototype._importPrivate=function(e,n){this.priv=new Gt(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};$s.prototype._importPublic=function(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?xT(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&xT(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};$s.prototype.derive=function(e){return e.validate()||xT(e.validate(),"public point not validated"),e.mul(this.priv).getX()};$s.prototype.sign=function(e,n,r){return this.ec.sign(e,this,n,r)};$s.prototype.verify=function(e,n,r){return this.ec.verify(e,n,this,void 0,r)};$s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Mq=go.assert;function Mb(t,e){if(t instanceof Mb)return t;this._importDER(t,e)||(Mq(t.r&&t.s,"Signature without r or s"),this.r=new Gt(t.r,16),this.s=new Gt(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Db=Mb;function Dq(){this.place=0}function P1(t,e){var n=t[e.place++];if(!(n&128))return n;var r=n&15;if(r===0||r>4||t[e.place]===0)return!1;for(var s=0,o=0,a=e.place;o<r;o++,a++)s<<=8,s|=t[a],s>>>=0;return s<=127?!1:(e.place=a,s)}function EA(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}Mb.prototype._importDER=function(e,n){e=go.toArray(e,n);var r=new Dq;if(e[r.place++]!==48)return!1;var s=P1(e,r);if(s===!1||s+r.place!==e.length||e[r.place++]!==2)return!1;var o=P1(e,r);if(o===!1||(e[r.place]&128)!==0)return!1;var a=e.slice(r.place,o+r.place);if(r.place+=o,e[r.place++]!==2)return!1;var l=P1(e,r);if(l===!1||e.length!==l+r.place||(e[r.place]&128)!==0)return!1;var c=e.slice(r.place,l+r.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Gt(a),this.s=new Gt(c),this.recoveryParam=null,!0};function R1(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}Mb.prototype.toDER=function(e){var n=this.r.toArray(),r=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),r[0]&128&&(r=[0].concat(r)),n=EA(n),r=EA(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var s=[2];R1(s,n.length),s=s.concat(n),s.push(2),R1(s,r.length);var o=s.concat(r),a=[48];return R1(a,o.length),a=a.concat(o),go.encode(a,e)};var Oq=function(){throw new Error("unsupported")},Ku=go.assert;function Wo(t){if(!(this instanceof Wo))return new Wo(t);typeof t=="string"&&(Ku(Object.prototype.hasOwnProperty.call(u0,t),"Unknown curve "+t),t=u0[t]),t instanceof u0.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Lq=Wo;Wo.prototype.keyPair=function(e){return new RN(this,e)};Wo.prototype.keyFromPrivate=function(e,n){return RN.fromPrivate(this,e,n)};Wo.prototype.keyFromPublic=function(e,n){return RN.fromPublic(this,e,n)};Wo.prototype.genKeyPair=function(e){e||(e={});for(var n=new F4({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Oq(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),s=this.n.sub(new Gt(2));;){var o=new Gt(n.generate(r));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Wo.prototype._truncateToN=function(e,n,r){var s;if(Gt.isBN(e)||typeof e=="number")e=new Gt(e,16),s=e.byteLength();else if(typeof e=="object")s=e.length,e=new Gt(e,16);else{var o=e.toString();s=o.length+1>>>1,e=new Gt(o,16)}typeof r!="number"&&(r=s*8);var a=r-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!n&&e.cmp(this.n)>=0?e.sub(this.n):e};Wo.prototype.sign=function(e,n,r,s){if(typeof r=="object"&&(s=r,r=null),s||(s={}),typeof e!="string"&&typeof e!="number"&&!Gt.isBN(e)){Ku(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Ku(e.length>>>0===e.length);for(var o=0;o<e.length;o++)Ku((e[o]&255)===e[o])}n=this.keyFromPrivate(n,r),e=this._truncateToN(e,!1,s.msgBitLength),Ku(!e.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),l=n.getPrivate().toArray("be",a),c=e.toArray("be",a);Ku(new Gt(c).eq(e),"Can not sign message");for(var u=new F4({hash:this.hash,entropy:l,nonce:c,pers:s.pers,persEnc:s.persEnc||"utf8"}),f=this.n.sub(new Gt(1)),p=0;;p++){var m=s.k?s.k(p):new Gt(u.generate(this.n.byteLength()));if(m=this._truncateToN(m,!0),!(m.cmpn(1)<=0||m.cmp(f)>=0)){var g=this.g.mul(m);if(!g.isInfinity()){var w=g.getX(),y=w.umod(this.n);if(y.cmpn(0)!==0){var T=m.invm(this.n).mul(y.mul(n.getPrivate()).iadd(e));if(T=T.umod(this.n),T.cmpn(0)!==0){var j=(g.getY().isOdd()?1:0)|(w.cmp(y)!==0?2:0);return s.canonical&&T.cmp(this.nh)>0&&(T=this.n.sub(T),j^=1),new Db({r:y,s:T,recoveryParam:j})}}}}}};Wo.prototype.verify=function(e,n,r,s,o){o||(o={}),e=this._truncateToN(e,!1,o.msgBitLength),r=this.keyFromPublic(r,s),n=new Db(n,"hex");var a=n.r,l=n.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||l.cmpn(1)<0||l.cmp(this.n)>=0)return!1;var c=l.invm(this.n),u=c.mul(e).umod(this.n),f=c.mul(a).umod(this.n),p;return this.curve._maxwellTrick?(p=this.g.jmulAdd(u,r.getPublic(),f),p.isInfinity()?!1:p.eqXToP(a)):(p=this.g.mulAdd(u,r.getPublic(),f),p.isInfinity()?!1:p.getX().umod(this.n).cmp(a)===0)};Wo.prototype.recoverPubKey=function(t,e,n,r){Ku((3&n)===n,"The recovery param is more than two bits"),e=new Db(e,r);var s=this.n,o=new Gt(t),a=e.r,l=e.s,c=n&1,u=n>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?a=this.curve.pointFromX(a.add(this.curve.n),c):a=this.curve.pointFromX(a,c);var f=e.r.invm(s),p=s.sub(o).mul(f).umod(s),m=l.mul(f).umod(s);return this.g.mulAdd(p,a,m)};Wo.prototype.getKeyRecoveryParam=function(t,e,n,r){if(e=new Db(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var o;try{o=this.recoverPubKey(t,e,s)}catch{continue}if(o.eq(n))return s}throw new Error("Unable to find valid recovery factor")};var Fq=Fh(function(t,e){var n=e;n.version="6.6.1",n.utils=go,n.rand=function(){throw new Error("unsupported")},n.curve=c0,n.curves=u0,n.ec=Lq,n.eddsa=null}),zq=Fq.ec;const $q="signing-key/5.8.0",bT=new fe($q);let I1=null;function Mc(){return I1||(I1=new zq("secp256k1")),I1}class Bq{constructor(e){Ie(this,"curve","secp256k1"),Ie(this,"privateKey",Ct(e)),yd(this.privateKey)!==32&&bT.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const n=Mc().keyFromPrivate(Vt(this.privateKey));Ie(this,"publicKey","0x"+n.getPublic(!1,"hex")),Ie(this,"compressedPublicKey","0x"+n.getPublic(!0,"hex")),Ie(this,"_isSigningKey",!0)}_addPoint(e){const n=Mc().keyFromPublic(Vt(this.publicKey)),r=Mc().keyFromPublic(Vt(e));return"0x"+n.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const n=Mc().keyFromPrivate(Vt(this.privateKey)),r=Vt(e);r.length!==32&&bT.throwArgumentError("bad digest length","digest",e);const s=n.sign(r,{canonical:!0});return Ab({recoveryParam:s.recoveryParam,r:cr("0x"+s.r.toString(16),32),s:cr("0x"+s.s.toString(16),32)})}computeSharedSecret(e){const n=Mc().keyFromPrivate(Vt(this.privateKey)),r=Mc().keyFromPublic(Vt(z4(e)));return cr("0x"+n.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function Uq(t,e){const n=Ab(e),r={r:Vt(n.r),s:Vt(n.s)};return"0x"+Mc().recoverPubKey(Vt(t),r,n.recoveryParam).encode("hex",!1)}function z4(t,e){const n=Vt(t);return n.length===32?new Bq(n).publicKey:n.length===33?"0x"+Mc().keyFromPublic(n).getPublic(!1,"hex"):n.length===65?Ct(n):bT.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Vq="transactions/5.8.0",ic=new fe(Vq);var _A;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(_A||(_A={}));function IN(t){return t==="0x"?null:Xr(t)}function Rs(t){return t==="0x"?y4:ce.from(t)}function qq(t){const e=z4(t);return Xr(As(ir(As(e,1)),12))}function $4(t,e){return qq(Uq(Vt(t),e))}function Gi(t,e){const n=gh(ce.from(t).toHexString());return n.length>32&&ic.throwArgumentError("invalid length for "+e,"transaction:"+e,t),n}function M1(t,e){return{address:Xr(t),storageKeys:(e||[]).map((n,r)=>(yd(n)!==32&&ic.throwArgumentError("invalid access list storageKey",`accessList[${t}:${r}]`,n),n.toLowerCase()))}}function zd(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(n.length>2&&ic.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${r}]`,n),M1(n[0],n[1])):M1(n.address,n.storageKeys));const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,o)=>(s[o]=!0,s),{});return M1(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function B4(t){return zd(t).map(e=>[e.address,e.storageKeys])}function Wq(t,e){if(t.gasPrice!=null){const r=ce.from(t.gasPrice),s=ce.from(t.maxFeePerGas||0);r.eq(s)||ic.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:s})}const n=[Gi(t.chainId||0,"chainId"),Gi(t.nonce||0,"nonce"),Gi(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Gi(t.maxFeePerGas||0,"maxFeePerGas"),Gi(t.gasLimit||0,"gasLimit"),t.to!=null?Xr(t.to):"0x",Gi(t.value||0,"value"),t.data||"0x",B4(t.accessList||[])];if(e){const r=Ab(e);n.push(Gi(r.recoveryParam,"recoveryParam")),n.push(gh(r.r)),n.push(gh(r.s))}return Ni(["0x02",Pb(n)])}function Hq(t,e){const n=[Gi(t.chainId||0,"chainId"),Gi(t.nonce||0,"nonce"),Gi(t.gasPrice||0,"gasPrice"),Gi(t.gasLimit||0,"gasLimit"),t.to!=null?Xr(t.to):"0x",Gi(t.value||0,"value"),t.data||"0x",B4(t.accessList||[])];if(e){const r=Ab(e);n.push(Gi(r.recoveryParam,"recoveryParam")),n.push(gh(r.r)),n.push(gh(r.s))}return Ni(["0x01",Pb(n)])}function U4(t,e,n){try{const r=Rs(e[0]).toNumber();if(r!==0&&r!==1)throw new Error("bad recid");t.v=r}catch{ic.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=cr(e[1],32),t.s=cr(e[2],32);try{const r=ir(n(t));t.from=$4(r,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function Gq(t){const e=NN(t.slice(1));e.length!==9&&e.length!==12&&ic.throwArgumentError("invalid component count for transaction type: 2","payload",Ct(t));const n=Rs(e[2]),r=Rs(e[3]),s={type:2,chainId:Rs(e[0]).toNumber(),nonce:Rs(e[1]).toNumber(),maxPriorityFeePerGas:n,maxFeePerGas:r,gasPrice:null,gasLimit:Rs(e[4]),to:IN(e[5]),value:Rs(e[6]),data:e[7],accessList:zd(e[8])};return e.length===9||(s.hash=ir(t),U4(s,e.slice(9),Wq)),s}function Kq(t){const e=NN(t.slice(1));e.length!==8&&e.length!==11&&ic.throwArgumentError("invalid component count for transaction type: 1","payload",Ct(t));const n={type:1,chainId:Rs(e[0]).toNumber(),nonce:Rs(e[1]).toNumber(),gasPrice:Rs(e[2]),gasLimit:Rs(e[3]),to:IN(e[4]),value:Rs(e[5]),data:e[6],accessList:zd(e[7])};return e.length===8||(n.hash=ir(t),U4(n,e.slice(8),Hq)),n}function Yq(t){const e=NN(t);e.length!==9&&e.length!==6&&ic.throwArgumentError("invalid raw transaction","rawTransaction",t);const n={nonce:Rs(e[0]).toNumber(),gasPrice:Rs(e[1]),gasLimit:Rs(e[2]),to:IN(e[3]),value:Rs(e[4]),data:e[5],chainId:0};if(e.length===6)return n;try{n.v=ce.from(e[6]).toNumber()}catch{return n}if(n.r=cr(e[7],32),n.s=cr(e[8],32),ce.from(n.r).isZero()&&ce.from(n.s).isZero())n.chainId=n.v,n.v=0;else{n.chainId=Math.floor((n.v-35)/2),n.chainId<0&&(n.chainId=0);let r=n.v-27;const s=e.slice(0,6);n.chainId!==0&&(s.push(Ct(n.chainId)),s.push("0x"),s.push("0x"),r-=n.chainId*2+8);const o=ir(Pb(s));try{n.from=$4(o,{r:Ct(n.r),s:Ct(n.s),recoveryParam:r})}catch{}n.hash=ir(t)}return n.type=null,n}function Jq(t){const e=Vt(t);if(e[0]>127)return Yq(e);switch(e[0]){case 1:return Kq(e);case 2:return Gq(e)}return ic.throwError(`unsupported transaction type: ${e[0]}`,fe.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Xq="contracts/5.8.0";var bd=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Sr=new fe(Xq);function B0(t,e){return bd(this,void 0,void 0,function*(){const n=yield e;typeof n!="string"&&Sr.throwArgumentError("invalid address or ENS name","name",n);try{return Xr(n)}catch{}t||Sr.throwError("a provider or signer is needed to resolve ENS names",fe.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield t.resolveName(n);return r==null&&Sr.throwArgumentError("resolver or addr is not configured for ENS name","name",n),r})}function d0(t,e,n){return bd(this,void 0,void 0,function*(){return Array.isArray(n)?yield Promise.all(n.map((r,s)=>d0(t,Array.isArray(e)?e[s]:e[r.name],r))):n.type==="address"?yield B0(t,e):n.type==="tuple"?yield d0(t,e,n.components):n.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>d0(t,r,n.arrayChildren))):Promise.reject(Sr.makeError("invalid value for array",fe.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function Ob(t,e,n){return bd(this,void 0,void 0,function*(){let r={};n.length===e.inputs.length+1&&typeof n[n.length-1]=="object"&&(r=ar(n.pop())),Sr.checkArgumentCount(n.length,e.inputs.length,"passed to contract"),t.signer?r.from?r.from=Dr({override:B0(t.signer,r.from),signer:t.signer.getAddress()}).then(u=>bd(this,void 0,void 0,function*(){return Xr(u.signer)!==u.override&&Sr.throwError("Contract with a Signer cannot override from",fe.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),u.override})):r.from=t.signer.getAddress():r.from&&(r.from=B0(t.provider,r.from));const s=yield Dr({args:d0(t.signer||t.provider,n,e.inputs),address:t.resolvedAddress,overrides:Dr(r)||{}}),o=t.interface.encodeFunctionData(e,s.args),a={data:o,to:s.address},l=s.overrides;if(l.nonce!=null&&(a.nonce=ce.from(l.nonce).toNumber()),l.gasLimit!=null&&(a.gasLimit=ce.from(l.gasLimit)),l.gasPrice!=null&&(a.gasPrice=ce.from(l.gasPrice)),l.maxFeePerGas!=null&&(a.maxFeePerGas=ce.from(l.maxFeePerGas)),l.maxPriorityFeePerGas!=null&&(a.maxPriorityFeePerGas=ce.from(l.maxPriorityFeePerGas)),l.from!=null&&(a.from=l.from),l.type!=null&&(a.type=l.type),l.accessList!=null&&(a.accessList=zd(l.accessList)),a.gasLimit==null&&e.gas!=null){let u=21e3;const f=Vt(o);for(let p=0;p<f.length;p++)u+=4,f[p]&&(u+=64);a.gasLimit=ce.from(e.gas).add(u)}if(l.value){const u=ce.from(l.value);!u.isZero()&&!e.payable&&Sr.throwError("non-payable method cannot override value",fe.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),a.value=u}l.customData&&(a.customData=ar(l.customData)),l.ccipReadEnabled&&(a.ccipReadEnabled=!!l.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const c=Object.keys(r).filter(u=>r[u]!=null);return c.length&&Sr.throwError(`cannot override ${c.map(u=>JSON.stringify(u)).join(",")}`,fe.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),a})}function Qq(t,e){return function(...n){return Ob(t,e,n)}}function Zq(t,e){const n=t.signer||t.provider;return function(...r){return bd(this,void 0,void 0,function*(){n||Sr.throwError("estimate require a provider or signer",fe.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const s=yield Ob(t,e,r);return yield n.estimateGas(s)})}}function eW(t,e){const n=e.wait.bind(e);e.wait=r=>n(r).then(s=>(s.events=s.logs.map(o=>{let a=oo(o),l=null;try{l=t.interface.parseLog(o)}catch{}return l&&(a.args=l.args,a.decode=(c,u)=>t.interface.decodeEventLog(l.eventFragment,c,u),a.event=l.name,a.eventSignature=l.signature),a.removeListener=()=>t.provider,a.getBlock=()=>t.provider.getBlock(s.blockHash),a.getTransaction=()=>t.provider.getTransaction(s.transactionHash),a.getTransactionReceipt=()=>Promise.resolve(s),a}),s))}function V4(t,e,n){const r=t.signer||t.provider;return function(...s){return bd(this,void 0,void 0,function*(){let o;if(s.length===e.inputs.length+1&&typeof s[s.length-1]=="object"){const c=ar(s.pop());c.blockTag!=null&&(o=yield c.blockTag),delete c.blockTag,s.push(c)}t.deployTransaction!=null&&(yield t._deployed(o));const a=yield Ob(t,e,s),l=yield r.call(a,o);try{let c=t.interface.decodeFunctionResult(e,l);return n&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===fe.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=s,c.transaction=a),c}})}}function tW(t,e){return function(...n){return bd(this,void 0,void 0,function*(){t.signer||Sr.throwError("sending a transaction requires a signer",fe.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const r=yield Ob(t,e,n),s=yield t.signer.sendTransaction(r);return eW(t,s),s})}}function AA(t,e,n){return e.constant?V4(t,e,n):tW(t,e)}function q4(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Km{constructor(e,n){Ie(this,"tag",e),Ie(this,"filter",n),this._listeners=[]}addListener(e,n){this._listeners.push({listener:e,once:n})}removeListener(e){let n=!1;this._listeners=this._listeners.filter(r=>n||r.listener!==e?!0:(n=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const n=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const s=e.slice();return setTimeout(()=>{r.listener.apply(this,s)},0),!r.once}),n}prepareEvent(e){}getEmit(e){return[e]}}class nW extends Km{constructor(){super("error",null)}}class PA extends Km{constructor(e,n,r,s){const o={address:e};let a=n.getEventTopic(r);s?(a!==s[0]&&Sr.throwArgumentError("topic mismatch","topics",s),o.topics=s.slice()):o.topics=[a],super(q4(o),o),Ie(this,"address",e),Ie(this,"interface",n),Ie(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(n,r)=>this.interface.decodeEventLog(this.fragment,n,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(n){e.args=null,e.decodeError=n}}getEmit(e){const n=sV(e.args);if(n.length)throw n[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class RA extends Km{constructor(e,n){super("*",{address:e}),Ie(this,"address",e),Ie(this,"interface",n)}prepareEvent(e){super.prepareEvent(e);try{const n=this.interface.parseLog(e);e.event=n.name,e.eventSignature=n.signature,e.decode=(r,s)=>this.interface.decodeEventLog(n.eventFragment,r,s),e.args=n.args}catch{}}}class rW{constructor(e,n,r){Ie(this,"interface",no(new.target,"getInterface")(n)),r==null?(Ie(this,"provider",null),Ie(this,"signer",null)):Dg.isSigner(r)?(Ie(this,"provider",r.provider||null),Ie(this,"signer",r)):EN.isProvider(r)?(Ie(this,"provider",r),Ie(this,"signer",null)):Sr.throwArgumentError("invalid signer or provider","signerOrProvider",r),Ie(this,"callStatic",{}),Ie(this,"estimateGas",{}),Ie(this,"functions",{}),Ie(this,"populateTransaction",{}),Ie(this,"filters",{});{const a={};Object.keys(this.interface.events).forEach(l=>{const c=this.interface.events[l];Ie(this.filters,l,(...u)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,u)})),a[c.name]||(a[c.name]=[]),a[c.name].push(l)}),Object.keys(a).forEach(l=>{const c=a[l];c.length===1?Ie(this.filters,l,this.filters[c[0]]):Sr.warn(`Duplicate definition of ${l} (${c.join(", ")})`)})}if(Ie(this,"_runningEvents",{}),Ie(this,"_wrappedEmits",{}),e==null&&Sr.throwArgumentError("invalid contract address or ENS name","addressOrName",e),Ie(this,"address",e),this.provider)Ie(this,"resolvedAddress",B0(this.provider,e));else try{Ie(this,"resolvedAddress",Promise.resolve(Xr(e)))}catch{Sr.throwError("provider is required to use ENS name as contract address",fe.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(a=>{});const s={},o={};Object.keys(this.interface.functions).forEach(a=>{const l=this.interface.functions[a];if(o[a]){Sr.warn(`Duplicate ABI entry for ${JSON.stringify(a)}`);return}o[a]=!0;{const c=l.name;s[`%${c}`]||(s[`%${c}`]=[]),s[`%${c}`].push(a)}this[a]==null&&Ie(this,a,AA(this,l,!0)),this.functions[a]==null&&Ie(this.functions,a,AA(this,l,!1)),this.callStatic[a]==null&&Ie(this.callStatic,a,V4(this,l,!0)),this.populateTransaction[a]==null&&Ie(this.populateTransaction,a,Qq(this,l)),this.estimateGas[a]==null&&Ie(this.estimateGas,a,Zq(this,l))}),Object.keys(s).forEach(a=>{const l=s[a];if(l.length>1)return;a=a.substring(1);const c=l[0];try{this[a]==null&&Ie(this,a,this[c])}catch{}this.functions[a]==null&&Ie(this.functions,a,this.functions[c]),this.callStatic[a]==null&&Ie(this.callStatic,a,this.callStatic[c]),this.populateTransaction[a]==null&&Ie(this.populateTransaction,a,this.populateTransaction[c]),this.estimateGas[a]==null&&Ie(this.estimateGas,a,this.estimateGas[c])})}static getContractAddress(e){return h4(e)}static getInterface(e){return Gm.isInterface(e)?e:new Gm(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(n=>(n==="0x"&&Sr.throwError("contract not deployed",fe.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Sr.throwError("sending a transactions require a signer",fe.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const n=ar(e||{});return["from","to"].forEach(function(r){n[r]!=null&&Sr.throwError("cannot override "+r,fe.errors.UNSUPPORTED_OPERATION,{operation:r})}),n.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(n))}connect(e){typeof e=="string"&&(e=new _N(e,this.provider));const n=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&Ie(n,"deployTransaction",this.deployTransaction),n}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return yT.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new nW);if(e==="event")return this._normalizeRunningEvent(new Km("event",null));if(e==="*")return this._normalizeRunningEvent(new RA(this.address,this.interface));const n=this.interface.getEvent(e);return this._normalizeRunningEvent(new PA(this.address,this.interface,n))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const s=this.interface.getEvent(r);return this._normalizeRunningEvent(new PA(this.address,this.interface,s,e.topics))}catch{}const n={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Km(q4(n),n))}return this._normalizeRunningEvent(new RA(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const n=this._wrappedEmits[e.tag];n&&e.filter&&(this.provider.off(e.filter,n),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,n,r){const s=oo(n);return s.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},s.getBlock=()=>this.provider.getBlock(n.blockHash),s.getTransaction=()=>this.provider.getTransaction(n.transactionHash),s.getTransactionReceipt=()=>this.provider.getTransactionReceipt(n.transactionHash),e.prepareEvent(s),s}_addEventListener(e,n,r){if(this.provider||Sr.throwError("events require a provider or a signer with a provider",fe.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(n,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const s=o=>{let a=this._wrapEvent(e,o,n);if(a.decodeError==null)try{const l=e.getEmit(a);this.emit(e.filter,...l)}catch(l){a.decodeError=l.error}e.filter!=null&&this.emit("event",a),a.decodeError!=null&&this.emit("error",a.decodeError,a)};this._wrappedEmits[e.tag]=s,e.filter!=null&&this.provider.on(e.filter,s)}}queryFilter(e,n,r){const s=this._getRunningEvent(e),o=ar(s.filter);return typeof n=="string"&&cn(n,32)?(r!=null&&Sr.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),o.blockHash=n):(o.fromBlock=n??0,o.toBlock=r??"latest"),this.provider.getLogs(o).then(a=>a.map(l=>this._wrapEvent(s,l,null)))}on(e,n){return this._addEventListener(this._getRunningEvent(e),n,!1),this}once(e,n){return this._addEventListener(this._getRunningEvent(e),n,!0),this}emit(e,...n){if(!this.provider)return!1;const r=this._getRunningEvent(e),s=r.run(n)>0;return this._checkRunningEvents(r),s}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((n,r)=>n+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const n=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(s=>{n.push(s)});return n}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const s=this._runningEvents[r];s.removeAllListeners(),this._checkRunningEvents(s)}return this}const n=this._getRunningEvent(e);return n.removeAllListeners(),this._checkRunningEvents(n),this}off(e,n){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(n),this._checkRunningEvents(r),this}removeListener(e,n){return this.off(e,n)}}class Mt extends rW{}class W4{constructor(e){Ie(this,"alphabet",e),Ie(this,"base",e.length),Ie(this,"_alphabetMap",{}),Ie(this,"_leader",e.charAt(0));for(let n=0;n<e.length;n++)this._alphabetMap[e.charAt(n)]=n}encode(e){let n=Vt(e);if(n.length===0)return"";let r=[0];for(let o=0;o<n.length;++o){let a=n[o];for(let l=0;l<r.length;++l)a+=r[l]<<8,r[l]=a%this.base,a=a/this.base|0;for(;a>0;)r.push(a%this.base),a=a/this.base|0}let s="";for(let o=0;n[o]===0&&o<n.length-1;++o)s+=this._leader;for(let o=r.length-1;o>=0;--o)s+=this.alphabet[r[o]];return s}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let n=[];if(e.length===0)return new Uint8Array(n);n.push(0);for(let r=0;r<e.length;r++){let s=this._alphabetMap[e[r]];if(s===void 0)throw new Error("Non-base"+this.base+" character");let o=s;for(let a=0;a<n.length;++a)o+=n[a]*this.base,n[a]=o&255,o>>=8;for(;o>0;)n.push(o&255),o>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)n.push(0);return Vt(new Uint8Array(n.reverse()))}}new W4("abcdefghijklmnopqrstuvwxyz234567");const vT=new W4("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function IA(t){return"0x"+qa.sha256().update(Vt(t)).digest("hex")}function sW(t){t=t.slice();for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}const iW="networks/5.8.0",MA=new fe(iW);function oW(t){return t&&typeof t.renetwork=="function"}function va(t){const e=function(n,r){r==null&&(r={});const s=[];if(n.InfuraProvider&&r.infura!=="-")try{s.push(new n.InfuraProvider(t,r.infura))}catch{}if(n.EtherscanProvider&&r.etherscan!=="-")try{s.push(new n.EtherscanProvider(t,r.etherscan))}catch{}if(n.AlchemyProvider&&r.alchemy!=="-")try{s.push(new n.AlchemyProvider(t,r.alchemy))}catch{}if(n.PocketProvider&&r.pocket!=="-"){const o=["goerli","ropsten","rinkeby","sepolia"];try{const a=new n.PocketProvider(t,r.pocket);a.network&&o.indexOf(a.network.name)===-1&&s.push(a)}catch{}}if(n.CloudflareProvider&&r.cloudflare!=="-")try{s.push(new n.CloudflareProvider(t))}catch{}if(n.AnkrProvider&&r.ankr!=="-")try{const o=["ropsten"],a=new n.AnkrProvider(t,r.ankr);a.network&&o.indexOf(a.network.name)===-1&&s.push(a)}catch{}if(n.QuickNodeProvider&&r.quicknode!=="-")try{s.push(new n.QuickNodeProvider(t,r.quicknode))}catch{}if(s.length===0)return null;if(n.FallbackProvider){let o=1;return r.quorum!=null?o=r.quorum:t==="homestead"&&(o=2),new n.FallbackProvider(s,o)}return s[0]};return e.renetwork=function(n){return va(n)},e}function U0(t,e){const n=function(r,s){return r.JsonRpcProvider?new r.JsonRpcProvider(t,e):null};return n.renetwork=function(r){return U0(t,r)},n}const DA={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:va("homestead")},OA={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:va("ropsten")},LA={chainId:63,name:"classicMordor",_defaultProvider:U0("https://www.ethercluster.com/mordor","classicMordor")},fx={unspecified:{chainId:0,name:"unspecified"},homestead:DA,mainnet:DA,morden:{chainId:2,name:"morden"},ropsten:OA,testnet:OA,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:va("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:va("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:va("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:va("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:va("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:U0("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:LA,classicTestnet:LA,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:U0("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:va("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:va("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:va("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function H4(t){if(t==null)return null;if(typeof t=="number"){for(const r in fx){const s=fx[r];if(s.chainId===t)return{name:s.name,chainId:s.chainId,ensAddress:s.ensAddress||null,_defaultProvider:s._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const r=fx[t];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=fx[t.name];if(!e)return typeof t.chainId!="number"&&MA.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&MA.throwArgumentError("network chainId mismatch","network",t);let n=t._defaultProvider||null;return n==null&&e._defaultProvider&&(oW(e._defaultProvider)?n=e._defaultProvider.renetwork(t):n=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:n}}const aW="web/5.8.0";var lW=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function cW(t,e){return lW(this,void 0,void 0,function*(){e==null&&(e={});const n={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(n.mode="cors",n.cache="no-cache",n.credentials="same-origin",n.redirect="follow",n.referrer="client"),e.fetchOptions!=null){const a=e.fetchOptions;a.mode&&(n.mode=a.mode),a.cache&&(n.cache=a.cache),a.credentials&&(n.credentials=a.credentials),a.redirect&&(n.redirect=a.redirect),a.referrer&&(n.referrer=a.referrer)}const r=yield fetch(t,n),s=yield r.arrayBuffer(),o={};return r.headers.forEach?r.headers.forEach((a,l)=>{o[l.toLowerCase()]=a}):r.headers.keys().forEach(a=>{o[a.toLowerCase()]=r.headers.get(a)}),{headers:o,statusCode:r.status,statusMessage:r.statusText,body:Vt(new Uint8Array(s))}})}var uW=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const ha=new fe(aW);function FA(t){return new Promise(e=>{setTimeout(e,t)})}function Nc(t,e){if(t==null)return null;if(typeof t=="string")return t;if(wN(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Mg(t)}catch{}return Ct(t)}return t}function dW(t){return li(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function fW(t,e,n){const r=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;ha.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const s=typeof t=="object"?t.throttleCallback:null,o=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;ha.assertArgument(o>0&&o%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const a=typeof t=="object"?!!t.errorPassThrough:!1,l={};let c=null;const u={method:"GET"};let f=!1,p=120*1e3;if(typeof t=="string")c=t;else if(typeof t=="object"){if((t==null||t.url==null)&&ha.throwArgumentError("missing URL","connection.url",t),c=t.url,typeof t.timeout=="number"&&t.timeout>0&&(p=t.timeout),t.headers)for(const j in t.headers)l[j.toLowerCase()]={key:j,value:String(t.headers[j])},["if-none-match","if-modified-since"].indexOf(j.toLowerCase())>=0&&(f=!0);if(u.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){c.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&ha.throwError("basic authentication requires a secure https url",fe.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});const j=t.user+":"+t.password;l.authorization={key:"Authorization",value:"Basic "+T4(li(j))}}t.skipFetchSetup!=null&&(u.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(u.fetchOptions=ar(t.fetchOptions))}const m=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),g=c?c.match(m):null;if(g)try{const j={statusCode:200,statusMessage:"OK",headers:{"content-type":g[1]||"text/plain"},body:g[2]?k4(g[3]):dW(g[3])};let _=j.body;return n&&(_=n(j.body,j)),Promise.resolve(_)}catch(j){ha.throwError("processing response error",fe.errors.SERVER_ERROR,{body:Nc(g[1],g[2]),error:j,requestBody:null,requestMethod:"GET",url:c})}e&&(u.method="POST",u.body=e,l["content-type"]==null&&(l["content-type"]={key:"Content-Type",value:"application/octet-stream"}),l["content-length"]==null&&(l["content-length"]={key:"Content-Length",value:String(e.length)}));const w={};Object.keys(l).forEach(j=>{const _=l[j];w[_.key]=_.value}),u.headers=w;const y=function(){let j=null;return{promise:new Promise(function(P,D){p&&(j=setTimeout(()=>{j!=null&&(j=null,D(ha.makeError("timeout",fe.errors.TIMEOUT,{requestBody:Nc(u.body,w["content-type"]),requestMethod:u.method,timeout:p,url:c})))},p))}),cancel:function(){j!=null&&(clearTimeout(j),j=null)}}}(),T=function(){return uW(this,void 0,void 0,function*(){for(let j=0;j<r;j++){let _=null;try{if(_=yield cW(c,u),j<r){if(_.statusCode===301||_.statusCode===302){const P=_.headers.location||"";if(u.method==="GET"&&P.match(/^https:/)){c=_.headers.location;continue}}else if(_.statusCode===429){let P=!0;if(s&&(P=yield s(j,c)),P){let D=0;const $=_.headers["retry-after"];typeof $=="string"&&$.match(/^[1-9][0-9]*$/)?D=parseInt($)*1e3:D=o*parseInt(String(Math.random()*Math.pow(2,j))),yield FA(D);continue}}}}catch(P){_=P.response,_==null&&(y.cancel(),ha.throwError("missing response",fe.errors.SERVER_ERROR,{requestBody:Nc(u.body,w["content-type"]),requestMethod:u.method,serverError:P,url:c}))}let v=_.body;if(f&&_.statusCode===304?v=null:!a&&(_.statusCode<200||_.statusCode>=300)&&(y.cancel(),ha.throwError("bad response",fe.errors.SERVER_ERROR,{status:_.statusCode,headers:_.headers,body:Nc(v,_.headers?_.headers["content-type"]:null),requestBody:Nc(u.body,w["content-type"]),requestMethod:u.method,url:c})),n)try{const P=yield n(v,_);return y.cancel(),P}catch(P){if(P.throttleRetry&&j<r){let D=!0;if(s&&(D=yield s(j,c)),D){const $=o*parseInt(String(Math.random()*Math.pow(2,j)));yield FA($);continue}}y.cancel(),ha.throwError("processing response error",fe.errors.SERVER_ERROR,{body:Nc(v,_.headers?_.headers["content-type"]:null),error:P,requestBody:Nc(u.body,w["content-type"]),requestMethod:u.method,url:c})}return y.cancel(),v}return ha.throwError("failed response",fe.errors.SERVER_ERROR,{requestBody:Nc(u.body,w["content-type"]),requestMethod:u.method,url:c})})}();return Promise.race([y.promise,T])}function Lb(t,e,n){let r=(o,a)=>{let l=null;if(o!=null)try{l=JSON.parse(Mg(o))}catch(c){ha.throwError("invalid JSON",fe.errors.SERVER_ERROR,{body:o,error:c})}return n&&(l=n(l,a)),l},s=null;if(e!=null){s=li(e);const o=typeof t=="string"?{url:t}:ar(t);o.headers?Object.keys(o.headers).filter(l=>l.toLowerCase()==="content-type").length!==0||(o.headers=ar(o.headers),o.headers["content-type"]="application/json"):o.headers={"content-type":"application/json"},t=o}return fW(t,s,r)}function Uf(t,e){return e||(e={}),e=ar(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(n,r){let s=null,o=!1;const a=()=>o?!1:(o=!0,s&&clearTimeout(s),!0);e.timeout&&(s=setTimeout(()=>{a()&&r(new Error("timeout"))},e.timeout));const l=e.retryLimit;let c=0;function u(){return t().then(function(f){if(f!==void 0)a()&&n(f);else if(e.oncePoll)e.oncePoll.once("poll",u);else if(e.onceBlock)e.onceBlock.once("block",u);else if(!o){if(c++,c>l){a()&&r(new Error("retry limit reached"));return}let p=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));p<e.floor&&(p=e.floor),p>e.ceiling&&(p=e.ceiling),setTimeout(u,p)}return null},function(f){a()&&r(f)})}u()})}var D1,zA;function hW(){if(zA)return D1;zA=1;for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={},n=0;n<t.length;n++){var r=t.charAt(n);if(e[r]!==void 0)throw new TypeError(r+" is ambiguous");e[r]=n}function s(y){var T=y>>25;return(y&33554431)<<5^-(T>>0&1)&996825010^-(T>>1&1)&642813549^-(T>>2&1)&513874426^-(T>>3&1)&1027748829^-(T>>4&1)&705979059}function o(y){for(var T=1,j=0;j<y.length;++j){var _=y.charCodeAt(j);if(_<33||_>126)return"Invalid prefix ("+y+")";T=s(T)^_>>5}for(T=s(T),j=0;j<y.length;++j){var v=y.charCodeAt(j);T=s(T)^v&31}return T}function a(y,T,j){if(j=j||90,y.length+7+T.length>j)throw new TypeError("Exceeds length limit");y=y.toLowerCase();var _=o(y);if(typeof _=="string")throw new Error(_);for(var v=y+"1",P=0;P<T.length;++P){var D=T[P];if(D>>5!==0)throw new Error("Non 5-bit word");_=s(_)^D,v+=t.charAt(D)}for(P=0;P<6;++P)_=s(_);for(_^=1,P=0;P<6;++P){var $=_>>(5-P)*5&31;v+=t.charAt($)}return v}function l(y,T){if(T=T||90,y.length<8)return y+" too short";if(y.length>T)return"Exceeds length limit";var j=y.toLowerCase(),_=y.toUpperCase();if(y!==j&&y!==_)return"Mixed-case string "+y;y=j;var v=y.lastIndexOf("1");if(v===-1)return"No separator character for "+y;if(v===0)return"Missing prefix for "+y;var P=y.slice(0,v),D=y.slice(v+1);if(D.length<6)return"Data too short";var $=o(P);if(typeof $=="string")return $;for(var U=[],K=0;K<D.length;++K){var Y=D.charAt(K),G=e[Y];if(G===void 0)return"Unknown character "+Y;$=s($)^G,!(K+6>=D.length)&&U.push(G)}return $!==1?"Invalid checksum for "+y:{prefix:P,words:U}}function c(){var y=l.apply(null,arguments);if(typeof y=="object")return y}function u(y){var T=l.apply(null,arguments);if(typeof T=="object")return T;throw new Error(T)}function f(y,T,j,_){for(var v=0,P=0,D=(1<<j)-1,$=[],U=0;U<y.length;++U)for(v=v<<T|y[U],P+=T;P>=j;)P-=j,$.push(v>>P&D);if(_)P>0&&$.push(v<<j-P&D);else{if(P>=T)return"Excess padding";if(v<<j-P&D)return"Non-zero padding"}return $}function p(y){var T=f(y,8,5,!0);if(Array.isArray(T))return T}function m(y){var T=f(y,8,5,!0);if(Array.isArray(T))return T;throw new Error(T)}function g(y){var T=f(y,5,8,!1);if(Array.isArray(T))return T}function w(y){var T=f(y,5,8,!1);if(Array.isArray(T))return T;throw new Error(T)}return D1={decodeUnsafe:c,decode:u,encode:a,toWordsUnsafe:p,toWords:m,fromWordsUnsafe:g,fromWords:w},D1}var pW=hW();const $A=rc(pW),ks="providers/5.8.0",Rp=new fe(ks);class mt{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},n=this.address.bind(this),r=this.bigNumber.bind(this),s=this.blockTag.bind(this),o=this.data.bind(this),a=this.hash.bind(this),l=this.hex.bind(this),c=this.number.bind(this),u=this.type.bind(this),f=p=>this.data(p,!0);return e.transaction={hash:a,type:u,accessList:mt.allowNull(this.accessList.bind(this),null),blockHash:mt.allowNull(a,null),blockNumber:mt.allowNull(c,null),transactionIndex:mt.allowNull(c,null),confirmations:mt.allowNull(c,null),from:n,gasPrice:mt.allowNull(r),maxPriorityFeePerGas:mt.allowNull(r),maxFeePerGas:mt.allowNull(r),gasLimit:r,to:mt.allowNull(n,null),value:r,nonce:c,data:o,r:mt.allowNull(this.uint256),s:mt.allowNull(this.uint256),v:mt.allowNull(c),creates:mt.allowNull(n,null),raw:mt.allowNull(o)},e.transactionRequest={from:mt.allowNull(n),nonce:mt.allowNull(c),gasLimit:mt.allowNull(r),gasPrice:mt.allowNull(r),maxPriorityFeePerGas:mt.allowNull(r),maxFeePerGas:mt.allowNull(r),to:mt.allowNull(n),value:mt.allowNull(r),data:mt.allowNull(f),type:mt.allowNull(c),accessList:mt.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:a,address:n,topics:mt.arrayOf(a),data:o,logIndex:c,blockHash:a},e.receipt={to:mt.allowNull(this.address,null),from:mt.allowNull(this.address,null),contractAddress:mt.allowNull(n,null),transactionIndex:c,root:mt.allowNull(l),gasUsed:r,logsBloom:mt.allowNull(o),blockHash:a,transactionHash:a,logs:mt.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:mt.allowNull(c,null),cumulativeGasUsed:r,effectiveGasPrice:mt.allowNull(r),status:mt.allowNull(c),type:u},e.block={hash:mt.allowNull(a),parentHash:a,number:c,timestamp:c,nonce:mt.allowNull(l),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:mt.allowNull(n),extraData:o,transactions:mt.allowNull(mt.arrayOf(a)),baseFeePerGas:mt.allowNull(r)},e.blockWithTransactions=ar(e.block),e.blockWithTransactions.transactions=mt.allowNull(mt.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:mt.allowNull(s,void 0),toBlock:mt.allowNull(s,void 0),blockHash:mt.allowNull(a,void 0),address:mt.allowNull(n,void 0),topics:mt.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:mt.allowNull(c),blockHash:mt.allowNull(a),transactionIndex:c,removed:mt.allowNull(this.boolean.bind(this)),address:n,data:mt.allowFalsish(o,"0x"),topics:mt.arrayOf(a),transactionHash:a,logIndex:c},e}accessList(e){return zd(e||[])}number(e){return e==="0x"?0:ce.from(e).toNumber()}type(e){return e==="0x"||e==null?0:ce.from(e).toNumber()}bigNumber(e){return ce.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,n){return typeof e=="string"&&(!n&&e.substring(0,2)!=="0x"&&(e="0x"+e),cn(e))?e.toLowerCase():Rp.throwArgumentError("invalid hash","value",e)}data(e,n){const r=this.hex(e,n);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Xr(e)}callAddress(e){if(!cn(e,32))return null;const n=Xr(As(e,12));return n===$e?null:n}contractAddress(e){return h4(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||cn(e))return _b(e);throw new Error("invalid blockTag")}hash(e,n){const r=this.hex(e,n);return yd(r)!==32?Rp.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const n=ce.from(e);try{return n.toNumber()}catch{}return null}uint256(e){if(!cn(e))throw new Error("invalid uint256");return cr(e,32)}_block(e,n){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,s=mt.check(n,e);return s._difficulty=r==null?null:ce.from(r),s}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return mt.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&ce.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const n=mt.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;cn(r)&&(r=ce.from(r).toNumber()),n.chainId=r}else{let r=e.networkId;r==null&&n.v==null&&(r=e.chainId),cn(r)&&(r=ce.from(r).toNumber()),typeof r!="number"&&n.v!=null&&(r=(n.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),n.chainId=r}return n.blockHash&&n.blockHash.replace(/0/g,"")==="x"&&(n.blockHash=null),n}transaction(e){return Jq(e)}receiptLog(e){return mt.check(this.formats.receiptLog,e)}receipt(e){const n=mt.check(this.formats.receipt,e);if(n.root!=null)if(n.root.length<=4){const r=ce.from(n.root).toNumber();r===0||r===1?(n.status!=null&&n.status!==r&&Rp.throwArgumentError("alt-root-status/status mismatch","value",{root:n.root,status:n.status}),n.status=r,delete n.root):Rp.throwArgumentError("invalid alt-root-status","value.root",n.root)}else n.root.length!==66&&Rp.throwArgumentError("invalid root hash","value.root",n.root);return n.status!=null&&(n.byzantium=!0),n}topics(e){return Array.isArray(e)?e.map(n=>this.topics(n)):e!=null?this.hash(e,!0):null}filter(e){return mt.check(this.formats.filter,e)}filterLog(e){return mt.check(this.formats.filterLog,e)}static check(e,n){const r={};for(const s in e)try{const o=e[s](n[s]);o!==void 0&&(r[s]=o)}catch(o){throw o.checkKey=s,o.checkValue=n[s],o}return r}static allowNull(e,n){return function(r){return r==null?n:e(r)}}static allowFalsish(e,n){return function(r){return r?e(r):n}}static arrayOf(e){return function(n){if(!Array.isArray(n))throw new Error("not an array");const r=[];return n.forEach(function(s){r.push(e(s))}),r}}}function mW(t){return t&&typeof t.isCommunityResource=="function"}function BA(t){return mW(t)&&t.isCommunityResource()}let UA=!1;function Fb(){UA||(UA=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var Qt=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const fn=new fe(ks),gW=10;function VA(t){return t==null?"null":(yd(t)!==32&&fn.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function qA(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const n={};e.forEach(s=>{n[VA(s)]=!0});const r=Object.keys(n);return r.sort(),r.join("|")}else return VA(e)}).join("&")}function yW(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const n=e.split("|").map(r=>r==="null"?null:r);return n.length===1?n[0]:n})}function yf(t){if(typeof t=="string"){if(t=t.toLowerCase(),yd(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+qA(t);if(yq.isForkEvent(t))throw fn.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+qA(t.topics||[])}throw new Error("invalid event - "+t)}function Ip(){return new Date().getTime()}function WA(t){return new Promise(e=>{setTimeout(e,t)})}const xW=["block","network","pending","poll"];let bW=class{constructor(e,n,r){Ie(this,"tag",e),Ie(this,"listener",n),Ie(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const n=e[1],r=yW(e[2]),s={};return r.length>0&&(s.topics=r),n&&n!=="*"&&(s.address=n),s}pollable(){return this.tag.indexOf(":")>=0||xW.indexOf(this.tag)>=0}};const vW={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function O1(t){return cr(ce.from(t).toHexString(),32)}function HA(t){return vT.encode(to([t,As(IA(IA(t)),0,4)]))}const G4=new RegExp("^(ipfs)://(.*)$","i"),GA=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),G4,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function f0(t,e){try{return Mg(Ym(t,e))}catch{}return null}function Ym(t,e){if(t==="0x")return null;const n=ce.from(As(t,e,e+32)).toNumber(),r=ce.from(As(t,n,n+32)).toNumber();return As(t,n+32,n+32+r)}function L1(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):fn.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function KA(t){const e=Vt(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function wW(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function K4(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(null),n+=32;for(let r=0;r<t.length;r++){const s=Vt(t[r]);e[r]=KA(n),e.push(KA(s.length)),e.push(wW(s)),n+=32+Math.ceil(s.length/32)*32}return Ni(e)}class YA{constructor(e,n,r,s){Ie(this,"provider",e),Ie(this,"name",r),Ie(this,"address",e.formatter.address(n)),Ie(this,"_resolvedAddress",s)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>ce.from(e).eq(1)).catch(e=>{if(e.code===fe.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,n){return Qt(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:Ni([e,l0(this.name),n||"0x"])};let s=!1;(yield this.supportsWildcard())&&(s=!0,r.data=Ni(["0x9061b923",K4([nq(this.name),r.data])]));try{let o=yield this.provider.call(r);return Vt(o).length%32===4&&fn.throwError("resolver threw error",fe.errors.CALL_EXCEPTION,{transaction:r,data:o}),s&&(o=Ym(o,0)),o}catch(o){if(o.code===fe.errors.CALL_EXCEPTION)return null;throw o}})}_fetchBytes(e,n){return Qt(this,void 0,void 0,function*(){const r=yield this._fetch(e,n);return r!=null?Ym(r,0):null})}_getAddress(e,n){const r=vW[String(e)];if(r==null&&fn.throwError(`unsupported coin type: ${e}`,fe.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(n);const s=Vt(n);if(r.p2pkh!=null){const o=n.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(o){const a=parseInt(o[1],16);if(o[2].length===a*2&&a>=1&&a<=75)return HA(to([[r.p2pkh],"0x"+o[2]]))}}if(r.p2sh!=null){const o=n.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(o){const a=parseInt(o[1],16);if(o[2].length===a*2&&a>=1&&a<=75)return HA(to([[r.p2sh],"0x"+o[2]]))}}if(r.prefix!=null){const o=s[1];let a=s[0];if(a===0?o!==20&&o!==32&&(a=-1):a=-1,a>=0&&s.length===2+o&&o>=1&&o<=75){const l=$A.toWords(s.slice(2));return l.unshift(a),$A.encode(r.prefix,l)}}return null}getAddress(e){return Qt(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const s=yield this._fetch("0x3b3b57de");return s==="0x"||s===Rb?null:this.provider.formatter.callAddress(s)}catch(s){if(s.code===fe.errors.CALL_EXCEPTION)return null;throw s}const n=yield this._fetchBytes("0xf1cb7e06",O1(e));if(n==null||n==="0x")return null;const r=this._getAddress(e,n);return r==null&&fn.throwError("invalid or unsupported coin data",fe.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:n}),r})}getAvatar(){return Qt(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const n=yield this.getText("avatar");if(n==null)return null;for(let r=0;r<GA.length;r++){const s=n.match(GA[r]);if(s==null)continue;const o=s[1].toLowerCase();switch(o){case"https":return e.push({type:"url",content:n}),{linkage:e,url:n};case"data":return e.push({type:"data",content:n}),{linkage:e,url:n};case"ipfs":return e.push({type:"ipfs",content:n}),{linkage:e,url:L1(n)};case"erc721":case"erc1155":{const a=o==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:o,content:n});const l=this._resolvedAddress||(yield this.getAddress()),c=(s[2]||"").split("/");if(c.length!==2)return null;const u=yield this.provider.formatter.address(c[0]),f=cr(ce.from(c[1]).toHexString(),32);if(o==="erc721"){const y=this.provider.formatter.callAddress(yield this.provider.call({to:u,data:Ni(["0x6352211e",f])}));if(l!==y)return null;e.push({type:"owner",content:y})}else if(o==="erc1155"){const y=ce.from(yield this.provider.call({to:u,data:Ni(["0x00fdd58e",cr(l,32),f])}));if(y.isZero())return null;e.push({type:"balance",content:y.toString()})}const p={to:this.provider.formatter.address(c[0]),data:Ni([a,f])};let m=f0(yield this.provider.call(p),0);if(m==null)return null;e.push({type:"metadata-url-base",content:m}),o==="erc1155"&&(m=m.replace("{id}",f.substring(2)),e.push({type:"metadata-url-expanded",content:m})),m.match(/^ipfs:/i)&&(m=L1(m)),e.push({type:"metadata-url",content:m});const g=yield Lb(m);if(!g)return null;e.push({type:"metadata",content:JSON.stringify(g)});let w=g.image;if(typeof w!="string")return null;if(!w.match(/^(https:\/\/|data:)/i)){if(w.match(G4)==null)return null;e.push({type:"url-ipfs",content:w}),w=L1(w)}return e.push({type:"url",content:w}),{linkage:e,url:w}}}}}catch{}return null})}getContentHash(){return Qt(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const n=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const a=parseInt(n[3],16);if(n[4].length===a*2)return"ipfs://"+vT.encode("0x"+n[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const a=parseInt(r[3],16);if(r[4].length===a*2)return"ipns://"+vT.encode("0x"+r[1])}const s=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&s[1].length===64)return"bzz://"+s[1];const o=e.match(/^0x90b2c605([0-9a-f]*)$/);if(o&&o[1].length===68){const a={"=":"","+":"-","/":"_"};return"sia://"+T4("0x"+o[1]).replace(/[=+\/]/g,c=>a[c])}return fn.throwError("invalid or unsupported content hash data",fe.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Qt(this,void 0,void 0,function*(){let n=li(e);n=to([O1(64),O1(n.length),n]),n.length%32!==0&&(n=to([n,cr("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",Ct(n));return r==null||r==="0x"?null:Mg(r)})}}let F1=null,kW=1;class MN extends EN{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Ie(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(n=>{}),this._ready().catch(n=>{});else{const n=no(new.target,"getNetwork")(e);n?(Ie(this,"_network",n),this.emit("network",n,null)):fn.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Qt(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||fn.throwError("no network detected",fe.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Ie(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Uf(()=>this._ready().then(e=>e,e=>{if(!(e.code===fe.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return F1==null&&(F1=new mt),F1}static getNetwork(e){return H4(e??"homestead")}ccipReadFetch(e,n,r){return Qt(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const s=e.to.toLowerCase(),o=n.toLowerCase(),a=[];for(let l=0;l<r.length;l++){const c=r[l],u=c.replace("{sender}",s).replace("{data}",o),f=c.indexOf("{data}")>=0?null:JSON.stringify({data:o,sender:s}),p=yield Lb({url:u,errorPassThrough:!0},f,(g,w)=>(g.status=w.statusCode,g));if(p.data)return p.data;const m=p.message||"unknown error";if(p.status>=400&&p.status<500)return fn.throwError(`response not found during CCIP fetch: ${m}`,fe.errors.SERVER_ERROR,{url:c,errorMessage:m});a.push(m)}return fn.throwError(`error encountered during CCIP fetch: ${a.map(l=>JSON.stringify(l)).join(", ")}`,fe.errors.SERVER_ERROR,{urls:r,errorMessages:a})})}_getInternalBlockNumber(e){return Qt(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const s=this._internalBlockNumber;try{const o=yield s;if(Ip()-o.respTime<=e)return o.blockNumber;break}catch{if(this._internalBlockNumber===s)break}}const n=Ip(),r=Dr({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(s=>null,s=>s)}).then(({blockNumber:s,networkError:o})=>{if(o)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),o;const a=Ip();return s=ce.from(s).toNumber(),s<this._maxInternalBlockNumber&&(s=this._maxInternalBlockNumber),this._maxInternalBlockNumber=s,this._setFastBlockNumber(s),{blockNumber:s,reqTime:n,respTime:a}});return this._internalBlockNumber=r,r.catch(s=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return Qt(this,void 0,void 0,function*(){const e=kW++,n=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(s){this.emit("error",s);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)fn.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",fn.makeError("network block skew detected",fe.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let s=this._emitted.block+1;s<=r;s++)this.emit("block",s);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(s=>{if(s==="block")return;const o=this._emitted[s];o!=="pending"&&r-o>12&&delete this._emitted[s]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(s=>{switch(s.type){case"tx":{const o=s.hash;let a=this.getTransactionReceipt(o).then(l=>(!l||l.blockNumber==null||(this._emitted["t:"+o]=l.blockNumber,this.emit(o,l)),null)).catch(l=>{this.emit("error",l)});n.push(a);break}case"filter":{if(!s._inflight){s._inflight=!0,s._lastBlockNumber===-2&&(s._lastBlockNumber=r-1);const o=s.filter;o.fromBlock=s._lastBlockNumber+1,o.toBlock=r;const a=o.toBlock-this._maxFilterBlockRange;a>o.fromBlock&&(o.fromBlock=a),o.fromBlock<0&&(o.fromBlock=0);const l=this.getLogs(o).then(c=>{s._inflight=!1,c.length!==0&&c.forEach(u=>{u.blockNumber>s._lastBlockNumber&&(s._lastBlockNumber=u.blockNumber),this._emitted["b:"+u.blockHash]=u.blockNumber,this._emitted["t:"+u.transactionHash]=u.blockNumber,this.emit(o,u)})}).catch(c=>{this.emit("error",c),s._inflight=!1});n.push(l)}break}}}),this._lastBlockNumber=r,Promise.all(n).then(()=>{this.emit("didPoll",e)}).catch(s=>{this.emit("error",s)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Qt(this,void 0,void 0,function*(){return fn.throwError("provider does not support network detection",fe.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Qt(this,void 0,void 0,function*(){const e=yield this._ready(),n=yield this.detectNetwork();if(e.chainId!==n.chainId){if(this.anyNetwork)return this._network=n,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",n,e),yield WA(0),this._network;const r=fn.makeError("underlying network changed",fe.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:n});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Ip();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(n=>((this._fastBlockNumber==null||n>this._fastBlockNumber)&&(this._fastBlockNumber=n),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Ip(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,n,r){return Qt(this,void 0,void 0,function*(){return this._waitForTransaction(e,n??1,r||0,null)})}_waitForTransaction(e,n,r,s){return Qt(this,void 0,void 0,function*(){const o=yield this.getTransactionReceipt(e);return(o?o.confirmations:0)>=n?o:new Promise((a,l)=>{const c=[];let u=!1;const f=function(){return u?!0:(u=!0,c.forEach(m=>{m()}),!1)},p=m=>{m.confirmations<n||f()||a(m)};if(this.on(e,p),c.push(()=>{this.removeListener(e,p)}),s){let m=s.startBlock,g=null;const w=y=>Qt(this,void 0,void 0,function*(){u||(yield WA(1e3),this.getTransactionCount(s.from).then(T=>Qt(this,void 0,void 0,function*(){if(!u){if(T<=s.nonce)m=y;else{{const j=yield this.getTransaction(e);if(j&&j.blockNumber!=null)return}for(g==null&&(g=m-3,g<s.startBlock&&(g=s.startBlock));g<=y;){if(u)return;const j=yield this.getBlockWithTransactions(g);for(let _=0;_<j.transactions.length;_++){const v=j.transactions[_];if(v.hash===e)return;if(v.from===s.from&&v.nonce===s.nonce){if(u)return;const P=yield this.waitForTransaction(v.hash,n);if(f())return;let D="replaced";v.data===s.data&&v.to===s.to&&v.value.eq(s.value)?D="repriced":v.data==="0x"&&v.from===v.to&&v.value.isZero()&&(D="cancelled"),l(fn.makeError("transaction was replaced",fe.errors.TRANSACTION_REPLACED,{cancelled:D==="replaced"||D==="cancelled",reason:D,replacement:this._wrapTransaction(v),hash:e,receipt:P}));return}}g++}}u||this.once("block",w)}}),T=>{u||this.once("block",w)}))});if(u)return;this.once("block",w),c.push(()=>{this.removeListener("block",w)})}if(typeof r=="number"&&r>0){const m=setTimeout(()=>{f()||l(fn.makeError("timeout exceeded",fe.errors.TIMEOUT,{timeout:r}))},r);m.unref&&m.unref(),c.push(()=>{clearTimeout(m)})}})})}getBlockNumber(){return Qt(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Qt(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return ce.from(e)}catch(n){return fn.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:n})}})}getBalance(e,n){return Qt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Dr({address:this._getAddress(e),blockTag:this._getBlockTag(n)}),s=yield this.perform("getBalance",r);try{return ce.from(s)}catch(o){return fn.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"getBalance",params:r,result:s,error:o})}})}getTransactionCount(e,n){return Qt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Dr({address:this._getAddress(e),blockTag:this._getBlockTag(n)}),s=yield this.perform("getTransactionCount",r);try{return ce.from(s).toNumber()}catch(o){return fn.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:s,error:o})}})}getCode(e,n){return Qt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Dr({address:this._getAddress(e),blockTag:this._getBlockTag(n)}),s=yield this.perform("getCode",r);try{return Ct(s)}catch(o){return fn.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"getCode",params:r,result:s,error:o})}})}getStorageAt(e,n,r){return Qt(this,void 0,void 0,function*(){yield this.getNetwork();const s=yield Dr({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(n).then(a=>_b(a))}),o=yield this.perform("getStorageAt",s);try{return Ct(o)}catch(a){return fn.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"getStorageAt",params:s,result:o,error:a})}})}_wrapTransaction(e,n,r){if(n!=null&&yd(n)!==32)throw new Error("invalid response - sendTransaction");const s=e;return n!=null&&e.hash!==n&&fn.throwError("Transaction hash mismatch from Provider.sendTransaction.",fe.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:n}),s.wait=(o,a)=>Qt(this,void 0,void 0,function*(){o==null&&(o=1),a==null&&(a=0);let l;o!==0&&r!=null&&(l={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const c=yield this._waitForTransaction(e.hash,o,a,l);return c==null&&o===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&fn.throwError("transaction failed",fe.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),s}sendTransaction(e){return Qt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Promise.resolve(e).then(o=>Ct(o)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const s=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const o=yield this.perform("sendTransaction",{signedTransaction:n});return this._wrapTransaction(r,o,s)}catch(o){throw o.transaction=r,o.transactionHash=r.hash,o}})}_getTransactionRequest(e){return Qt(this,void 0,void 0,function*(){const n=yield e,r={};return["from","to"].forEach(s=>{n[s]!=null&&(r[s]=Promise.resolve(n[s]).then(o=>o?this._getAddress(o):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(s=>{n[s]!=null&&(r[s]=Promise.resolve(n[s]).then(o=>o?ce.from(o):null))}),["type"].forEach(s=>{n[s]!=null&&(r[s]=Promise.resolve(n[s]).then(o=>o??null))}),n.accessList&&(r.accessList=this.formatter.accessList(n.accessList)),["data"].forEach(s=>{n[s]!=null&&(r[s]=Promise.resolve(n[s]).then(o=>o?Ct(o):null))}),this.formatter.transactionRequest(yield Dr(r))})}_getFilter(e){return Qt(this,void 0,void 0,function*(){e=yield e;const n={};return e.address!=null&&(n.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(n[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(n[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield Dr(n))})}_call(e,n,r){return Qt(this,void 0,void 0,function*(){r>=gW&&fn.throwError("CCIP read exceeded maximum redirections",fe.errors.SERVER_ERROR,{redirects:r,transaction:e});const s=e.to,o=yield this.perform("call",{transaction:e,blockTag:n});if(r>=0&&n==="latest"&&s!=null&&o.substring(0,10)==="0x556f1830"&&yd(o)%32===4)try{const a=As(o,4),l=As(a,0,32);ce.from(l).eq(s)||fn.throwError("CCIP Read sender did not match",fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o});const c=[],u=ce.from(As(a,32,64)).toNumber(),f=ce.from(As(a,u,u+32)).toNumber(),p=As(a,u+32);for(let j=0;j<f;j++){const _=f0(p,j*32);_==null&&fn.throwError("CCIP Read contained corrupt URL string",fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),c.push(_)}const m=Ym(a,64);ce.from(As(a,100,128)).isZero()||fn.throwError("CCIP Read callback selector included junk",fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o});const g=As(a,96,100),w=Ym(a,128),y=yield this.ccipReadFetch(e,m,c);y==null&&fn.throwError("CCIP Read disabled or provided no URLs",fe.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o});const T={to:s,data:Ni([g,K4([y,w])])};return this._call(T,n,r+1)}catch(a){if(a.code===fe.errors.SERVER_ERROR)throw a}try{return Ct(o)}catch(a){return fn.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:n},result:o,error:a})}})}call(e,n){return Qt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Dr({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(n),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return Qt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Dr({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",n);try{return ce.from(r)}catch(s){return fn.throwError("bad result from backend",fe.errors.SERVER_ERROR,{method:"estimateGas",params:n,result:r,error:s})}})}_getAddress(e){return Qt(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&fn.throwArgumentError("invalid address or ENS name","name",e);const n=yield this.resolveName(e);return n==null&&fn.throwError("ENS name not configured",fe.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),n})}_getBlock(e,n){return Qt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const s={includeTransactions:!!n};if(cn(e,32))s.blockHash=e;else try{s.blockTag=yield this._getBlockTag(e),cn(s.blockTag)&&(r=parseInt(s.blockTag.substring(2),16))}catch{fn.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Uf(()=>Qt(this,void 0,void 0,function*(){const o=yield this.perform("getBlock",s);if(o==null)return s.blockHash!=null&&this._emitted["b:"+s.blockHash]==null||s.blockTag!=null&&r>this._emitted.block?null:void 0;if(n){let a=null;for(let c=0;c<o.transactions.length;c++){const u=o.transactions[c];if(u.blockNumber==null)u.confirmations=0;else if(u.confirmations==null){a==null&&(a=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let f=a-u.blockNumber+1;f<=0&&(f=1),u.confirmations=f}}const l=this.formatter.blockWithTransactions(o);return l.transactions=l.transactions.map(c=>this._wrapTransaction(c)),l}return this.formatter.block(o)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Qt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const n={transactionHash:this.formatter.hash(e,!0)};return Uf(()=>Qt(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",n);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const s=this.formatter.transactionResponse(r);if(s.blockNumber==null)s.confirmations=0;else if(s.confirmations==null){let a=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-s.blockNumber+1;a<=0&&(a=1),s.confirmations=a}return this._wrapTransaction(s)}),{oncePoll:this})})}getTransactionReceipt(e){return Qt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const n={transactionHash:this.formatter.hash(e,!0)};return Uf(()=>Qt(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",n);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const s=this.formatter.receipt(r);if(s.blockNumber==null)s.confirmations=0;else if(s.confirmations==null){let a=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-s.blockNumber+1;a<=0&&(a=1),s.confirmations=a}return s}),{oncePoll:this})})}getLogs(e){return Qt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Dr({filter:this._getFilter(e)}),r=yield this.perform("getLogs",n);return r.forEach(s=>{s.removed==null&&(s.removed=!1)}),mt.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return Qt(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Qt(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&fn.throwArgumentError("invalid BlockTag","blockTag",e);let n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return n+=e,n<0&&(n=0),this.formatter.blockTag(n)}return this.formatter.blockTag(e)})}getResolver(e){return Qt(this,void 0,void 0,function*(){let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const r=yield this._getResolver(n,"getResolver");if(r!=null){const s=new YA(this,r,e);return n!==e&&!(yield s.supportsWildcard())?null:s}n=n.split(".").slice(1).join(".")}})}_getResolver(e,n){return Qt(this,void 0,void 0,function*(){n==null&&(n="ENS");const r=yield this.getNetwork();r.ensAddress||fn.throwError("network does not support ENS",fe.errors.UNSUPPORTED_OPERATION,{operation:n,network:r.name});try{const s=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+l0(e).substring(2)});return this.formatter.callAddress(s)}catch{}return null})}resolveName(e){return Qt(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(cn(e))throw r}typeof e!="string"&&fn.throwArgumentError("invalid ENS name","name",e);const n=yield this.getResolver(e);return n?yield n.getAddress():null})}lookupAddress(e){return Qt(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const n=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(n,"lookupAddress");if(r==null)return null;const s=f0(yield this.call({to:r,data:"0x691f3431"+l0(n).substring(2)}),0);return(yield this.resolveName(s))!=e?null:s})}getAvatar(e){return Qt(this,void 0,void 0,function*(){let n=null;if(cn(e)){const o=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",a=yield this._getResolver(o,"getAvatar");if(!a)return null;n=new YA(this,a,o);try{const l=yield n.getAvatar();if(l)return l.url}catch(l){if(l.code!==fe.errors.CALL_EXCEPTION)throw l}try{const l=f0(yield this.call({to:a,data:"0x691f3431"+l0(o).substring(2)}),0);n=yield this.getResolver(l)}catch(l){if(l.code!==fe.errors.CALL_EXCEPTION)throw l;return null}}else if(n=yield this.getResolver(e),!n)return null;const r=yield n.getAvatar();return r==null?null:r.url})}perform(e,n){return fn.throwError(e+" not implemented",fe.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(n=>n.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(n=>n.pollable()).length>0}_addEventListener(e,n,r){const s=new bW(yf(e),n,r);return this._events.push(s),this._startEvent(s),this}on(e,n){return this._addEventListener(e,n,!1)}once(e,n){return this._addEventListener(e,n,!0)}emit(e,...n){let r=!1,s=[],o=yf(e);return this._events=this._events.filter(a=>a.tag!==o?!0:(setTimeout(()=>{a.listener.apply(this,n)},0),r=!0,a.once?(s.push(a),!1):!0)),s.forEach(a=>{this._stopEvent(a)}),r}listenerCount(e){if(!e)return this._events.length;let n=yf(e);return this._events.filter(r=>r.tag===n).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let n=yf(e);return this._events.filter(r=>r.tag===n).map(r=>r.listener)}off(e,n){if(n==null)return this.removeAllListeners(e);const r=[];let s=!1,o=yf(e);return this._events=this._events.filter(a=>a.tag!==o||a.listener!=n||s?!0:(s=!0,r.push(a),!1)),r.forEach(a=>{this._stopEvent(a)}),this}removeAllListeners(e){let n=[];if(e==null)n=this._events,this._events=[];else{const r=yf(e);this._events=this._events.filter(s=>s.tag!==r?!0:(n.push(s),!1))}return n.forEach(r=>{this._stopEvent(r)}),this}}var Rl=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Or=new fe(ks),TW=["call","estimateGas"];function fm(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const n=cn(t.data)?t.data:null;if(!e||n)return{message:t.message,data:n}}if(typeof t=="object"){for(const n in t){const r=fm(t[n],e);if(r)return r}return null}if(typeof t=="string")try{return fm(JSON.parse(t),e)}catch{}return null}function Y4(t,e,n){const r=n.transaction||n.signedTransaction;if(t==="call"){const o=fm(e,!0);if(o)return o.data;Or.throwError("missing revert data in call exception; Transaction reverted without a reason string",fe.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(t==="estimateGas"){let o=fm(e.body,!1);o==null&&(o=fm(e,!1)),o&&Or.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",fe.errors.UNPREDICTABLE_GAS_LIMIT,{reason:o.message,method:t,transaction:r,error:e})}let s=e.message;throw e.code===fe.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?s=e.error.message:typeof e.body=="string"?s=e.body:typeof e.responseText=="string"&&(s=e.responseText),s=(s||"").toLowerCase(),s.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Or.throwError("insufficient funds for intrinsic transaction cost",fe.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:r}),s.match(/nonce (is )?too low/i)&&Or.throwError("nonce has already been used",fe.errors.NONCE_EXPIRED,{error:e,method:t,transaction:r}),s.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Or.throwError("replacement fee too low",fe.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:r}),s.match(/only replay-protected/i)&&Or.throwError("legacy pre-eip-155 transactions not supported",fe.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:r}),TW.indexOf(t)>=0&&s.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Or.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",fe.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:r}),e}function JA(t){return new Promise(function(e){setTimeout(e,t)})}function NW(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Mp(t){return t&&t.toLowerCase()}const wT={};class J4 extends Dg{constructor(e,n,r){if(super(),e!==wT)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Ie(this,"provider",n),r==null&&(r=0),typeof r=="string"?(Ie(this,"_address",this.provider.formatter.address(r)),Ie(this,"_index",null)):typeof r=="number"?(Ie(this,"_index",r),Ie(this,"_address",null)):Or.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return Or.throwError("cannot alter JSON-RPC Signer connection",fe.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new jW(wT,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Or.throwError("unknown account #"+this._index,fe.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=ar(e);const n=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=ar(e);r.from=n,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>Rl(this,void 0,void 0,function*(){if(r==null)return null;const s=yield this.provider.resolveName(r);return s==null&&Or.throwArgumentError("provided ENS name resolves to null","tx.to",r),s}))),Dr({tx:Dr(e),sender:n}).then(({tx:r,sender:s})=>{r.from!=null?r.from.toLowerCase()!==s&&Or.throwArgumentError("from address mismatch","transaction",e):r.from=s;const o=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[o]).then(a=>a,a=>(typeof a.message=="string"&&a.message.match(/user denied/i)&&Or.throwError("user rejected transaction",fe.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),Y4("sendTransaction",a,o)))})}signTransaction(e){return Or.throwError("signing transactions is unsupported",fe.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Rl(this,void 0,void 0,function*(){const n=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield Uf(()=>Rl(this,void 0,void 0,function*(){const s=yield this.provider.getTransaction(r);if(s!==null)return this.provider._wrapTransaction(s,r,n)}),{oncePoll:this.provider})}catch(s){throw s.transactionHash=r,s}})}signMessage(e){return Rl(this,void 0,void 0,function*(){const n=typeof e=="string"?li(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Ct(n),r.toLowerCase()])}catch(s){throw typeof s.message=="string"&&s.message.match(/user denied/i)&&Or.throwError("user rejected signing",fe.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),s}})}_legacySignMessage(e){return Rl(this,void 0,void 0,function*(){const n=typeof e=="string"?li(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),Ct(n)])}catch(s){throw typeof s.message=="string"&&s.message.match(/user denied/i)&&Or.throwError("user rejected signing",fe.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),s}})}_signTypedData(e,n,r){return Rl(this,void 0,void 0,function*(){const s=yield Vi.resolveNames(e,n,r,a=>this.provider.resolveName(a)),o=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[o.toLowerCase(),JSON.stringify(Vi.getPayload(s.domain,n,s.value))])}catch(a){throw typeof a.message=="string"&&a.message.match(/user denied/i)&&Or.throwError("user rejected signing",fe.errors.ACTION_REJECTED,{action:"_signTypedData",from:o,messageData:{domain:s.domain,types:n,value:s.value}}),a}})}unlock(e){return Rl(this,void 0,void 0,function*(){const n=this.provider,r=yield this.getAddress();return n.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class jW extends J4{sendTransaction(e){return this.sendUncheckedTransaction(e).then(n=>({hash:n,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(n,r)}))}}const CW={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class yh extends MN{constructor(e,n){let r=n;r==null&&(r=new Promise((s,o)=>{setTimeout(()=>{this.detectNetwork().then(a=>{s(a)},a=>{o(a)})},0)})),super(r),e||(e=no(this.constructor,"defaultUrl")()),typeof e=="string"?Ie(this,"connection",Object.freeze({url:e})):Ie(this,"connection",Object.freeze(ar(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Rl(this,void 0,void 0,function*(){yield JA(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const n=no(this.constructor,"getNetwork");try{return n(ce.from(e).toNumber())}catch(r){return Or.throwError("could not detect network",fe.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return Or.throwError("could not detect network",fe.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new J4(wT,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(n=>this.formatter.address(n)))}send(e,n){const r={method:e,params:n,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:oo(r),provider:this});const s=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(s&&this._cache[e])return this._cache[e];const o=Lb(this.connection,JSON.stringify(r),NW).then(a=>(this.emit("debug",{action:"response",request:r,response:a,provider:this}),a),a=>{throw this.emit("debug",{action:"response",error:a,request:r,provider:this}),a});return s&&(this._cache[e]=o,setTimeout(()=>{this._cache[e]=null},0)),o}prepareRequest(e,n){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Mp(n.address),n.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Mp(n.address),n.blockTag]];case"getCode":return["eth_getCode",[Mp(n.address),n.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Mp(n.address),cr(n.position,32),n.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[n.signedTransaction]];case"getBlock":return n.blockTag?["eth_getBlockByNumber",[n.blockTag,!!n.includeTransactions]]:n.blockHash?["eth_getBlockByHash",[n.blockHash,!!n.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[n.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[n.transactionHash]];case"call":return["eth_call",[no(this.constructor,"hexlifyTransaction")(n.transaction,{from:!0}),n.blockTag]];case"estimateGas":return["eth_estimateGas",[no(this.constructor,"hexlifyTransaction")(n.transaction,{from:!0})]];case"getLogs":return n.filter&&n.filter.address!=null&&(n.filter.address=Mp(n.filter.address)),["eth_getLogs",[n.filter]]}return null}perform(e,n){return Rl(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const s=n.transaction;if(s&&s.type!=null&&ce.from(s.type).isZero()&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const o=yield this.getFeeData();o.maxFeePerGas==null&&o.maxPriorityFeePerGas==null&&(n=ar(n),n.transaction=ar(s),delete n.transaction.type)}}const r=this.prepareRequest(e,n);r==null&&Or.throwError(e+" not implemented",fe.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(s){return Y4(e,s,n)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,n=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=n,n.then(function(r){function s(){e.send("eth_getFilterChanges",[r]).then(function(o){if(e._pendingFilter!=n)return null;let a=Promise.resolve();return o.forEach(function(l){e._emitted["t:"+l.toLowerCase()]="pending",a=a.then(function(){return e.getTransaction(l).then(function(c){return e.emit("pending",c),null})})}),a.then(function(){return JA(1e3)})}).then(function(){if(e._pendingFilter!=n){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){s()},0),null}).catch(o=>{})}return s(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,n){const r=ar(CW);if(n)for(const o in n)n[o]&&(r[o]=!0);J9(e,r);const s={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(o){if(e[o]==null)return;const a=_b(ce.from(e[o]));o==="gasLimit"&&(o="gas"),s[o]=a}),["from","to","data"].forEach(function(o){e[o]!=null&&(s[o]=Ct(e[o]))}),e.accessList&&(s.accessList=zd(e.accessList)),s}}let hm=null;try{if(hm=WebSocket,hm==null)throw new Error("inject please")}catch{const e=new fe(ks);hm=function(){e.throwError("WebSockets not supported in this environment",fe.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var z1=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const hx=new fe(ks);let SW=1;class DN extends yh{constructor(e,n){n==="any"&&hx.throwError("WebSocketProvider does not support 'any' network yet",fe.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,n):super("_websocket",n),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?Ie(this,"_websocket",new hm(this.connection.url)):Ie(this,"_websocket",e),Ie(this,"_requests",{}),Ie(this,"_subs",{}),Ie(this,"_subIds",{}),Ie(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(s=>{this.websocket.send(this._requests[s].payload)})},this.websocket.onmessage=s=>{const o=s.data,a=JSON.parse(o);if(a.id!=null){const l=String(a.id),c=this._requests[l];if(delete this._requests[l],a.result!==void 0)c.callback(null,a.result),this.emit("debug",{action:"response",request:JSON.parse(c.payload),response:a.result,provider:this});else{let u=null;a.error?(u=new Error(a.error.message||"unknown error"),Ie(u,"code",a.error.code||null),Ie(u,"response",o)):u=new Error("unknown error"),c.callback(u,void 0),this.emit("debug",{action:"response",error:u,request:JSON.parse(c.payload),provider:this})}}else if(a.method==="eth_subscription"){const l=this._subs[a.params.subscription];l&&l.processFunc(a.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){hx.throwError("cannot reset events block on WebSocketProvider",fe.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){hx.throwError("cannot set polling interval on WebSocketProvider",fe.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return z1(this,void 0,void 0,function*(){return null})}set polling(e){e&&hx.throwError("cannot set polling on WebSocketProvider",fe.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,n){const r=SW++;return new Promise((s,o)=>{function a(c,u){return c?o(c):s(u)}const l=JSON.stringify({method:e,params:n,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(l),provider:this}),this._requests[String(r)]={callback:a,payload:l},this._wsReady&&this.websocket.send(l)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,n,r){return z1(this,void 0,void 0,function*(){let s=this._subIds[e];s==null&&(s=Promise.all(n).then(a=>this.send("eth_subscribe",a)),this._subIds[e]=s);const o=yield s;this._subs[o]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],n=>{const r=ce.from(n.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],n=>{this.emit("pending",n)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],n=>{n.removed==null&&(n.removed=!1),this.emit(e.filter,this.formatter.filterLog(n))});break;case"tx":{const n=r=>{const s=r.hash;this.getTransactionReceipt(s).then(o=>{o&&this.emit(s,o)})};n(e),this._subscribe("tx",["newHeads"],r=>{this._events.filter(s=>s.type==="tx").forEach(n)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let n=e.tag;if(e.type==="tx"){if(this._events.filter(s=>s.type==="tx").length)return;n="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[n];r&&(delete this._subIds[n],r.then(s=>{this._subs[s]&&(delete this._subs[s],this.send("eth_unsubscribe",[s]))}))}destroy(){return z1(this,void 0,void 0,function*(){this.websocket.readyState===hm.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var EW=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Yp=new fe(ks);class _W extends yh{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return EW(this,void 0,void 0,function*(){let n=this.network;return n==null&&(n=yield e.detectNetwork.call(this),n||Yp.throwError("no network detected",fe.errors.UNKNOWN_ERROR,{}),this._network==null&&(Ie(this,"_network",n),this.emit("network",n,null))),n})}}class oc extends _W{constructor(e,n){Yp.checkAbstract(new.target,oc),e=no(new.target,"getNetwork")(e),n=no(new.target,"getApiKey")(n);const r=no(new.target,"getUrl")(e,n);super(r,e),typeof n=="string"?Ie(this,"apiKey",n):n!=null&&Object.keys(n).forEach(s=>{Ie(this,s,n[s])})}_startPending(){Yp.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return Yp.throwError("API provider does not support signing",fe.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,n){return Yp.throwError("not implemented; sub-classes must override getUrl",fe.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const XA=new fe(ks),h0="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class AW extends DN{constructor(e,n){const r=new X4(e,n),s=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(s,r.network),Ie(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===h0}}class X4 extends oc{static getWebSocketProvider(e,n){return new AW(e,n)}static getApiKey(e){return e==null?h0:(e&&typeof e!="string"&&XA.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,n){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"sepolia":r="eth-sepolia.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"arbitrum-sepolia":r="arb-sepolia.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;case"optimism-sepolia":r="opt-sepolia.g.alchemy.com/v2/";break;default:XA.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+n,throttleCallback:(s,o)=>(n===h0&&Fb(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===h0}}const PW=new fe(ks),px="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function RW(t){switch(t){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"sepolia":return"rpc.ankr.com/eth_sepolia/";case"matic":return"rpc.ankr.com/polygon/";case"maticmum":return"rpc.ankr.com/polygon_mumbai/";case"optimism":return"rpc.ankr.com/optimism/";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet/";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return PW.throwArgumentError("unsupported network","name",t)}class IW extends oc{isCommunityResource(){return this.apiKey===px}static getApiKey(e){return e??px}static getUrl(e,n){n==null&&(n=px);const r={allowGzip:!0,url:"https://"+RW(e.name)+n,throttleCallback:(s,o)=>(n.apiKey===px&&Fb(),Promise.resolve(!0))};return n.projectSecret!=null&&(r.user="",r.password=n.projectSecret),r}}var MW=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const QA=new fe(ks);class DW extends oc{static getApiKey(e){return e!=null&&QA.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,n){let r=null;switch(e.name){case"homestead":r="https://cloudflare-eth.com/";break;default:QA.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(e,n){const r=Object.create(null,{perform:{get:()=>super.perform}});return MW(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,n)})}}var mx=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Oc=new fe(ks);function ZA(t){const e={};for(let n in t){if(t[n]==null)continue;let r=t[n];n==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[n]?r=_b(Ct(r)):n==="accessList"?r="["+zd(r).map(s=>`{address:"${s.address}",storageKeys:["${s.storageKeys.join('","')}"]}`).join(",")+"]":r=Ct(r),e[n]=r)}return e}function OW(t){if(t.status==0&&(t.message==="No records found"||t.message==="No transactions found"))return t.result;if(t.status!=1||typeof t.message!="string"||!t.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(t),(t.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return t.result}function eP(t){if(t&&t.status==0&&t.message=="NOTOK"&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(t),e.throttleRetry=!0,e}if(t.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(t),e}if(t.error){const e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function tP(t){if(t==="pending")throw new Error("pending not supported");return t==="latest"?t:parseInt(t.substring(2),16)}function $1(t,e,n){if(t==="call"&&e.code===fe.errors.SERVER_ERROR){const s=e.error;if(s&&(s.message.match(/reverted/i)||s.message.match(/VM execution error/i))){let o=s.data;if(o&&(o="0x"+o.replace(/^.*0x/i,"")),cn(o))return o;Oc.throwError("missing revert data in call exception",fe.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let r=e.message;throw e.code===fe.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?r=e.error.message:typeof e.body=="string"?r=e.body:typeof e.responseText=="string"&&(r=e.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&Oc.throwError("insufficient funds for intrinsic transaction cost",fe.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&Oc.throwError("nonce has already been used",fe.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),r.match(/another transaction with same nonce/)&&Oc.throwError("replacement fee too low",fe.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),r.match(/execution failed due to an exception|execution reverted/)&&Oc.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",fe.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}class LW extends MN{constructor(e,n){super(e),Ie(this,"baseUrl",this.getBaseUrl()),Ie(this,"apiKey",n||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return Oc.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,n){const r=Object.keys(n).reduce((o,a)=>{const l=n[a];return l!=null&&(o+=`&${a}=${l}`),o},""),s=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${s}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,n){return n.module=e,n.apikey=this.apiKey,n}fetch(e,n,r){return mx(this,void 0,void 0,function*(){const s=r?this.getPostUrl():this.getUrl(e,n),o=r?this.getPostData(e,n):null,a=e==="proxy"?eP:OW;this.emit("debug",{action:"request",request:s,provider:this});const l={url:s,throttleSlotInterval:1e3,throttleCallback:(f,p)=>(this.isCommunityResource()&&Fb(),Promise.resolve(!0))};let c=null;o&&(l.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},c=Object.keys(o).map(f=>`${f}=${o[f]}`).join("&"));const u=yield Lb(l,c,a||eP);return this.emit("debug",{action:"response",request:s,response:oo(u),provider:this}),u})}detectNetwork(){return mx(this,void 0,void 0,function*(){return this.network})}perform(e,n){const r=Object.create(null,{perform:{get:()=>super.perform}});return mx(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:n.address,tag:n.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:n.address,tag:n.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:n.address,tag:n.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:n.address,position:n.position,tag:n.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:n.signedTransaction},!0).catch(s=>$1("sendTransaction",s,n.signedTransaction));case"getBlock":if(n.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:n.blockTag,boolean:n.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:n.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:n.transactionHash});case"call":{if(n.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const s=ZA(n.transaction);s.module="proxy",s.action="eth_call";try{return yield this.fetch("proxy",s,!0)}catch(o){return $1("call",o,n.transaction)}}case"estimateGas":{const s=ZA(n.transaction);s.module="proxy",s.action="eth_estimateGas";try{return yield this.fetch("proxy",s,!0)}catch(o){return $1("estimateGas",o,n.transaction)}}case"getLogs":{const s={action:"getLogs"};if(n.filter.fromBlock&&(s.fromBlock=tP(n.filter.fromBlock)),n.filter.toBlock&&(s.toBlock=tP(n.filter.toBlock)),n.filter.address&&(s.address=n.filter.address),n.filter.topics&&n.filter.topics.length>0&&(n.filter.topics.length>1&&Oc.throwError("unsupported topic count",fe.errors.UNSUPPORTED_OPERATION,{topics:n.filter.topics}),n.filter.topics.length===1)){const l=n.filter.topics[0];(typeof l!="string"||l.length!==66)&&Oc.throwError("unsupported topic format",fe.errors.UNSUPPORTED_OPERATION,{topic0:l}),s.topic0=l}const o=yield this.fetch("logs",s);let a={};for(let l=0;l<o.length;l++){const c=o[l];if(c.blockHash==null){if(a[c.blockNumber]==null){const u=yield this.getBlock(c.blockNumber);u&&(a[c.blockNumber]=u.hash)}c.blockHash=a[c.blockNumber]}}return o}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,n)})}getHistory(e,n,r){return mx(this,void 0,void 0,function*(){const s={action:"txlist",address:yield this.resolveName(e),startblock:n??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",s)).map(a=>{["contractAddress","to"].forEach(function(c){a[c]==""&&delete a[c]}),a.creates==null&&a.contractAddress!=null&&(a.creates=a.contractAddress);const l=this.formatter.transactionResponse(a);return a.timeStamp&&(l.timestamp=parseInt(a.timeStamp)),l})})}isCommunityResource(){return this.apiKey==null}}var V0=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Yu=new fe(ks);function gx(){return new Date().getTime()}function nP(t){let e=null;for(let n=0;n<t.length;n++){const r=t[n];if(r==null)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||e.ensAddress==null&&r.ensAddress==null)||Yu.throwArgumentError("provider mismatch","networks",t):e=r}return e}function rP(t,e){t=t.slice().sort();const n=Math.floor(t.length/2);if(t.length%2)return t[n];const r=t[n-1],s=t[n];return e!=null&&Math.abs(r-s)>e?null:(r+s)/2}function Vf(t){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return JSON.stringify(t);if(typeof t=="string")return t;if(ce.isBigNumber(t))return t.toString();if(Array.isArray(t))return JSON.stringify(t.map(e=>Vf(e)));if(typeof t=="object"){const e=Object.keys(t);return e.sort(),"{"+e.map(n=>{let r=t[n];return typeof r=="function"?r="[function]":r=Vf(r),JSON.stringify(n)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}let FW=1;function sP(t){let e=null,n=null,r=new Promise(a=>{e=function(){n&&(clearTimeout(n),n=null),a()},n=setTimeout(e,t)});const s=a=>(r=r.then(a),r);function o(){return r}return{cancel:e,getPromise:o,wait:s}}const zW=[fe.errors.CALL_EXCEPTION,fe.errors.INSUFFICIENT_FUNDS,fe.errors.NONCE_EXPIRED,fe.errors.REPLACEMENT_UNDERPRICED,fe.errors.UNPREDICTABLE_GAS_LIMIT],$W=["address","args","errorArgs","errorSignature","method","transaction"];function yx(t,e){const n={weight:t.weight};return Object.defineProperty(n,"provider",{get:()=>t.provider}),t.start&&(n.start=t.start),e&&(n.duration=e-t.start),t.done&&(t.error?n.error=t.error:n.result=t.result||null),n}function BW(t,e){return function(n){const r={};n.forEach(o=>{const a=t(o.result);r[a]||(r[a]={count:0,result:o.result}),r[a].count++});const s=Object.keys(r);for(let o=0;o<s.length;o++){const a=r[s[o]];if(a.count>=e)return a.result}}}function UW(t,e,n){let r=Vf;switch(e){case"getBlockNumber":return function(s){const o=s.map(l=>l.result);let a=rP(s.map(l=>l.result),2);if(a!=null)return a=Math.ceil(a),o.indexOf(a+1)>=0&&a++,a>=t._highestBlockNumber&&(t._highestBlockNumber=a),t._highestBlockNumber};case"getGasPrice":return function(s){const o=s.map(a=>a.result);return o.sort(),o[Math.floor(o.length/2)]};case"getEtherPrice":return function(s){return rP(s.map(o=>o.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(s){return s==null?null:(s=ar(s),s.confirmations=-1,Vf(s))};break;case"getBlock":n.includeTransactions?r=function(s){return s==null?null:(s=ar(s),s.transactions=s.transactions.map(o=>(o=ar(o),o.confirmations=-1,o)),Vf(s))}:r=function(s){return s==null?null:Vf(s)};break;default:throw new Error("unknown method: "+e)}return BW(r,t.quorum)}function Dp(t,e){return V0(this,void 0,void 0,function*(){const n=t.provider;return n.blockNumber!=null&&n.blockNumber>=e||e===-1?n:Uf(()=>new Promise((r,s)=>{setTimeout(function(){return n.blockNumber>=e?r(n):t.cancelled?r(null):r(void 0)},0)}),{oncePoll:n})})}function VW(t,e,n,r){return V0(this,void 0,void 0,function*(){let s=t.provider;switch(n){case"getBlockNumber":case"getGasPrice":return s[n]();case"getEtherPrice":if(s.getEtherPrice)return s.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&cn(r.blockTag)&&(s=yield Dp(t,e)),s[n](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&cn(r.blockTag)&&(s=yield Dp(t,e)),s.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&cn(r.blockTag)&&(s=yield Dp(t,e)),s[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&cn(r.blockTag)&&(s=yield Dp(t,e)),n==="call"&&r.blockTag?s[n](r.transaction,r.blockTag):s[n](r.transaction);case"getTransaction":case"getTransactionReceipt":return s[n](r.transactionHash);case"getLogs":{let o=r.filter;return(o.fromBlock&&cn(o.fromBlock)||o.toBlock&&cn(o.toBlock))&&(s=yield Dp(t,e)),s.getLogs(o)}}return Yu.throwError("unknown method error",fe.errors.UNKNOWN_ERROR,{method:n,params:r})})}class qW extends MN{constructor(e,n){e.length===0&&Yu.throwArgumentError("missing providers","providers",e);const r=e.map((a,l)=>{if(EN.isProvider(a)){const f=BA(a)?2e3:750;return Object.freeze({provider:a,weight:1,stallTimeout:f,priority:1})}const c=ar(a);c.priority==null&&(c.priority=1),c.stallTimeout==null&&(c.stallTimeout=BA(a)?2e3:750),c.weight==null&&(c.weight=1);const u=c.weight;return(u%1||u>512||u<1)&&Yu.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${l}].weight`,u),Object.freeze(c)}),s=r.reduce((a,l)=>a+l.weight,0);n==null?n=s/2:n>s&&Yu.throwArgumentError("quorum will always fail; larger than total weight","quorum",n);let o=nP(r.map(a=>a.provider.network));o==null&&(o=new Promise((a,l)=>{setTimeout(()=>{this.detectNetwork().then(a,l)},0)})),super(o),Ie(this,"providerConfigs",Object.freeze(r)),Ie(this,"quorum",n),this._highestBlockNumber=-1}detectNetwork(){return V0(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(n=>n.provider.getNetwork()));return nP(e)})}perform(e,n){return V0(this,void 0,void 0,function*(){if(e==="sendTransaction"){const c=yield Promise.all(this.providerConfigs.map(u=>u.provider.sendTransaction(n.signedTransaction).then(f=>f.hash,f=>f)));for(let u=0;u<c.length;u++){const f=c[u];if(typeof f=="string")return f}throw c[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const r=UW(this,e,n),s=sW(this.providerConfigs.map(ar));s.sort((c,u)=>c.priority-u.priority);const o=this._highestBlockNumber;let a=0,l=!0;for(;;){const c=gx();let u=s.filter(g=>g.runner&&c-g.start<g.stallTimeout).reduce((g,w)=>g+w.weight,0);for(;u<this.quorum&&a<s.length;){const g=s[a++],w=FW++;g.start=gx(),g.staller=sP(g.stallTimeout),g.staller.wait(()=>{g.staller=null}),g.runner=VW(g,o,e,n).then(y=>{g.done=!0,g.result=y,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:w,backend:yx(g,gx()),request:{method:e,params:oo(n)},provider:this})},y=>{g.done=!0,g.error=y,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:w,backend:yx(g,gx()),request:{method:e,params:oo(n)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:w,backend:yx(g,null),request:{method:e,params:oo(n)},provider:this}),u+=g.weight}const f=[];s.forEach(g=>{g.done||!g.runner||(f.push(g.runner),g.staller&&f.push(g.staller.getPromise()))}),f.length&&(yield Promise.race(f));const p=s.filter(g=>g.done&&g.error==null);if(p.length>=this.quorum){const g=r(p);if(g!==void 0)return s.forEach(w=>{w.staller&&w.staller.cancel(),w.cancelled=!0}),g;l||(yield sP(100).getPromise()),l=!1}const m=s.reduce((g,w)=>{if(!w.done||w.error==null)return g;const y=w.error.code;return zW.indexOf(y)>=0&&(g[y]||(g[y]={error:w.error,weight:0}),g[y].weight+=w.weight),g},{});if(Object.keys(m).forEach(g=>{const w=m[g];if(w.weight<this.quorum)return;s.forEach(j=>{j.staller&&j.staller.cancel(),j.cancelled=!0});const y=w.error,T={};$W.forEach(j=>{y[j]!=null&&(T[j]=y[j])}),Yu.throwError(y.reason||y.message,g,T)}),s.filter(g=>!g.done).length===0)break}return s.forEach(c=>{c.staller&&c.staller.cancel(),c.cancelled=!0}),Yu.throwError("failed to meet quorum",fe.errors.SERVER_ERROR,{method:e,params:n,results:s.map(c=>yx(c)),provider:this})})}}const WW=null,p0=new fe(ks),Jp="84842078b09946638c03157f83405213";class HW extends DN{constructor(e,n){const r=new Q4(e,n),s=r.connection;s.password&&p0.throwError("INFURA WebSocket project secrets unsupported",fe.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const o=s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,e),Ie(this,"apiKey",r.projectId),Ie(this,"projectId",r.projectId),Ie(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===Jp}}class Q4 extends oc{static getWebSocketProvider(e,n){return new HW(e,n)}static getApiKey(e){const n={apiKey:Jp,projectId:Jp,projectSecret:null};return e==null||(typeof e=="string"?n.projectId=e:e.projectSecret!=null?(p0.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),p0.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),n.projectId=e.projectId,n.projectSecret=e.projectSecret):e.projectId&&(n.projectId=e.projectId),n.apiKey=n.projectId),n}static getUrl(e,n){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"optimism-sepolia":r="optimism-sepolia.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;case"arbitrum-sepolia":r="arbitrum-sepolia.infura.io";break;default:p0.throwError("unsupported network",fe.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const s={allowGzip:!0,url:"https://"+r+"/v3/"+n.projectId,throttleCallback:(o,a)=>(n.projectId===Jp&&Fb(),Promise.resolve(!0))};return n.projectSecret!=null&&(s.user="",s.password=n.projectSecret),s}isCommunityResource(){return this.projectId===Jp}}const B1=new fe(ks),GW="ETHERS_JS_SHARED";class KW extends oc{static getApiKey(e){return e&&typeof e!="string"&&B1.throwArgumentError("invalid apiKey","apiKey",e),e||GW}static getUrl(e,n){B1.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:B1.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+n}}const iP=new fe(ks),oP="62e1ad51b37b8e00394bda3b";class YW extends oc{static getApiKey(e){const n={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?n.applicationId=oP:typeof e=="string"?n.applicationId=e:e.applicationSecretKey!=null?(n.applicationId=e.applicationId,n.applicationSecretKey=e.applicationSecretKey):e.applicationId?n.applicationId=e.applicationId:iP.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),n}static getUrl(e,n){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:iP.throwError("unsupported network",fe.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const s=`https://${r}/v1/lb/${n.applicationId}`,o={headers:{},url:s};return n.applicationSecretKey!=null&&(o.user="",o.password=n.applicationSecretKey),o}isCommunityResource(){return this.applicationId===oP}}const aP=new fe(ks),JW="919b412a057b5e9c9b6dce193c5a60242d6efadb";class XW extends oc{static getApiKey(e){return e&&typeof e!="string"&&aP.throwArgumentError("invalid apiKey","apiKey",e),e||JW}static getUrl(e,n){let r=null;switch(e.name){case"homestead":r="ethers.quiknode.pro";break;case"goerli":r="ethers.ethereum-goerli.quiknode.pro";break;case"sepolia":r="ethers.ethereum-sepolia.quiknode.pro";break;case"holesky":r="ethers.ethereum-holesky.quiknode.pro";break;case"arbitrum":r="ethers.arbitrum-mainnet.quiknode.pro";break;case"arbitrum-goerli":r="ethers.arbitrum-goerli.quiknode.pro";break;case"arbitrum-sepolia":r="ethers.arbitrum-sepolia.quiknode.pro";break;case"base":r="ethers.base-mainnet.quiknode.pro";break;case"base-goerli":r="ethers.base-goerli.quiknode.pro";break;case"base-spolia":r="ethers.base-sepolia.quiknode.pro";break;case"bnb":r="ethers.bsc.quiknode.pro";break;case"bnbt":r="ethers.bsc-testnet.quiknode.pro";break;case"matic":r="ethers.matic.quiknode.pro";break;case"maticmum":r="ethers.matic-testnet.quiknode.pro";break;case"optimism":r="ethers.optimism.quiknode.pro";break;case"optimism-goerli":r="ethers.optimism-goerli.quiknode.pro";break;case"optimism-sepolia":r="ethers.optimism-sepolia.quiknode.pro";break;case"xdai":r="ethers.xdai.quiknode.pro";break;default:aP.throwArgumentError("unsupported network","network",arguments[0])}return"https://"+r+"/"+n}}const lP=new fe(ks);let QW=1;function cP(t,e){const n="Web3LegacyFetcher";return function(r,s){const o={method:r,params:s,id:QW++,jsonrpc:"2.0"};return new Promise((a,l)=>{this.emit("debug",{action:"request",fetcher:n,request:oo(o),provider:this}),e(o,(c,u)=>{if(c)return this.emit("debug",{action:"response",fetcher:n,error:c,request:o,provider:this}),l(c);if(this.emit("debug",{action:"response",fetcher:n,request:o,response:u,provider:this}),u.error){const f=new Error(u.error.message);return f.code=u.error.code,f.data=u.error.data,l(f)}a(u.result)})})}}function ZW(t){return function(e,n){n==null&&(n=[]);const r={method:e,params:n};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:oo(r),provider:this}),t.request(r).then(s=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:s,provider:this}),s),s=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:s,provider:this}),s})}}class zl extends yh{constructor(e,n){e==null&&lP.throwArgumentError("missing provider","provider",e);let r=null,s=null,o=null;typeof e=="function"?(r="unknown:",s=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),o=e,e.request?(r===""&&(r="eip-1193:"),s=ZW(e)):e.sendAsync?s=cP(e,e.sendAsync.bind(e)):e.send?s=cP(e,e.send.bind(e)):lP.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,n),Ie(this,"jsonRpcFetchFunc",s),Ie(this,"provider",o)}send(e,n){return this.jsonRpcFetchFunc(e,n)}}const uP=new fe(ks);function Ju(t,e){if(t==null&&(t="homestead"),typeof t=="string"){const r=t.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new yh(t);case"ws":case"wss":return new DN(t);default:uP.throwArgumentError("unsupported URL scheme","network",t)}}const n=H4(t);return(!n||!n._defaultProvider)&&uP.throwError("unsupported getDefaultProvider network",fe.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t}),n._defaultProvider({FallbackProvider:qW,AlchemyProvider:X4,AnkrProvider:IW,CloudflareProvider:DW,EtherscanProvider:LW,InfuraProvider:Q4,JsonRpcProvider:yh,NodesmithProvider:KW,PocketProvider:YW,QuickNodeProvider:XW,Web3Provider:zl,IpcProvider:WW},e)}const eH="units/5.8.0",tH=new fe(eH),Z4=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Is(t,e){if(typeof e=="string"){const n=Z4.indexOf(e);n!==-1&&(e=3*n)}return o0(t,e??18)}function xh(t,e){if(typeof t!="string"&&tH.throwArgumentError("value must be a string","value",t),typeof e=="string"){const n=Z4.indexOf(e);n!==-1&&(e=3*n)}return Ua(t,e??18)}function Zt(t){return Is(t,18)}function ac(t){return xh(t,18)}const jt={1:{name:"Ethereum Mainnet",rpcUrl:"https://ethereum-rpc.publicnode.com",explorer:"https://etherscan.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},10:{name:"OP Mainnet",rpcUrl:"https://mainnet.optimism.io",explorer:"https://optimistic.etherscan.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},56:{name:"BNB Smart Chain",rpcUrl:"https://bsc.blockrazor.xyz",explorer:"https://bscscan.com",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},97:{name:"BNB Smart Chain Testnet",rpcUrl:"https://bsc-testnet-rpc.publicnode.com",explorer:"https://testnet.bscscan.com",nativeCurrency:{name:"Test BNB",symbol:"tBNB",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},43113:{name:"Avalanche Fuji Testnet",rpcUrl:"https://avalanche-fuji.drpc.org",explorer:"https://testnet.snowscan.xyz",nativeCurrency:{name:"Avalanche",symbol:"AVAX",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},43114:{name:"Avalanche C-Chain",rpcUrl:"https://avalanche.drpc.org",explorer:"https://snowscan.xyz",nativeCurrency:{name:"Avalanche",symbol:"AVAX",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},8453:{name:"Base Mainnet",rpcUrl:"https://base.drpc.org",explorer:"https://basescan.org",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},84532:{name:"Base Sepolia",rpcUrl:"https://base-sepolia-rpc.publicnode.com",explorer:"https://sepolia.basescan.org",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},contractAddresses:{protocolManager:"0x11a8d79A9035a60D00d0354cf6E7f0fAC78a0369",poolDeployer:"0x3cDfDE071dCAD10762FB720E7C74a9f5fE4082d3",revenueManager:"0x8A9CE3E4B01d4000E2e083cD63473c3137A2fFbf",nftFactory:"0x9A98DCa6Ee71C36c766AA75b58B16aF5D4df3241",rewardsFlywheel:"0x673e65F35BCd188F2F3A56823c45F8BD07C1AF52",socialEngagementManager:"0xF2a377D56Cf27Da9DD12AaAD5d2C858070560419"}},11155111:{name:"Ethereum Sepolia",rpcUrl:"https://sepolia.infura.io",explorer:"https://sepolia.etherscan.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},11155420:{name:"OP Sepolia Testnet",rpcUrl:"https://sepolia.optimism.io",explorer:"https://sepolia-optimism.etherscan.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},2020:{name:"Ronin Mainnet",rpcUrl:"https://ronin.drpc.org",explorer:"https://app.roninchain.com/",nativeCurrency:{name:"Ronin",symbol:"RON",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},2021:{name:"Ronin Saigon Testnet",rpcUrl:"https://saigon-testnet.roninchain.com/rpc",explorer:"https://saigon-app.roninchain.com/explorer",nativeCurrency:{name:"Ronin",symbol:"RON",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},42161:{name:"Arbitrum One",rpcUrl:"https://arbitrum.drpc.org",explorer:"https://arbiscan.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}},421614:{name:"Arbitrum Sepolia",rpcUrl:"https://endpoints.omniatech.io/v1/arbitrum/sepolia/public",explorer:"https://sepolia.arbiscan.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},contractAddresses:{protocolManager:"0x...",poolDeployer:"0x...",revenueManager:"0x...",nftFactory:"0x...",socialEngagementManager:"0x...",rewardsFlywheel:"0x..."}}},e3=k.createContext(),an=()=>{const t=k.useContext(e3);if(!t)throw new Error("useWallet must be used within a WalletProvider");return t},nH=({children:t})=>{const[e,n]=k.useState(null),[r,s]=k.useState(null),[o,a]=k.useState(""),[l,c]=k.useState(!1),[u,f]=k.useState(null),[p,m]=k.useState(!1),[g,w]=k.useState(null),[y,T]=k.useState(!1),[j,_]=k.useState(!1);k.useEffect(()=>{v()},[]),k.useEffect(()=>{if(window.ethereum)return window.ethereum.on("accountsChanged",P),window.ethereum.on("chainChanged",D),()=>{window.ethereum.removeListener("accountsChanged",P),window.ethereum.removeListener("chainChanged",D)}},[]),k.useEffect(()=>{u&&jt[u]?w(jt[u]):w(null)},[u]);const v=async()=>{if(window.ethereum)try{(await window.ethereum.request({method:"eth_accounts"})).length>0?await $("metamask"):T(!0)}catch(A){console.error("Error checking connection:",A),T(!0)}else T(!0)},P=A=>{A.length===0?U():a(A[0])},D=A=>{console.log("Chain changed to:",A),_(!0),f(parseInt(A,16)),setTimeout(async()=>{try{window.ethereum&&(await window.ethereum.request({method:"eth_accounts"})).length>0&&await $("metamask")}catch(x){console.error("Error reconnecting after chain change:",x)}finally{setTimeout(()=>{_(!1)},500)}},1500)},$=async A=>{m(!0);try{let x;switch(A){case"metamask":if(!window.ethereum)throw new Error("MetaMask is not installed");await window.ethereum.request({method:"eth_requestAccounts"}),x=new zl(window.ethereum);break;default:throw new Error("Unsupported wallet type")}const C=x.getSigner(),L=await C.getAddress(),z=await x.getNetwork();n(x),s(C),a(L),f(z.chainId),c(!0),T(!0),localStorage.setItem("walletConnected",A)}catch(x){throw console.error("Error connecting wallet:",x),x}finally{m(!1)}},U=()=>{n(null),s(null),a(""),c(!1),f(null),T(!0),localStorage.removeItem("walletConnected")},K=async A=>{if(!window.ethereum)throw new Error("MetaMask is not installed");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${A.toString(16)}`}]})}catch(x){throw x.code===4902?new Error("Please add this network to your wallet first"):x}},Y=u&&jt[u],V={provider:e,signer:r,address:o,connected:l,chainId:u,loading:p,isInitialized:y,isReconnecting:j,connectWallet:$,disconnect:U,switchNetwork:K,addNetwork:async A=>{if(!window.ethereum)throw new Error("MetaMask is not installed");const x=jt[A];if(!x)throw new Error("Network config not found");try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${A.toString(16)}`,chainName:x.name,rpcUrls:[x.rpcUrl],blockExplorerUrls:[x.explorer],nativeCurrency:x.nativeCurrency||{name:"ETH",symbol:"ETH",decimals:18}}]})}catch(C){throw C}},formatAddress:A=>A?`${A.slice(0,6)}...${A.slice(-4)}`:"",networkInfo:g,isSupportedNetwork:Y};return i.jsx(e3.Provider,{value:V,children:t})},rH=JSON.parse('[{"inputs":[{"internalType":"address","name":"_vrfCoordinator","type":"address"},{"internalType":"bytes32","name":"_keyHash","type":"bytes32"},{"internalType":"address","name":"_linkToken","type":"address"},{"internalType":"uint32","name":"_callbackGasLimit","type":"uint32"},{"internalType":"uint16","name":"_requestConfirmations","type":"uint16"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"contractType","type":"string"},{"indexed":false,"internalType":"address","name":"newAddress","type":"address"}],"name":"ContractReplaced","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newPercentage","type":"uint256"}],"name":"CreationFeePercentageUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"enabled","type":"bool"}],"name":"CreatorTokenFeeToggled","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"enabled","type":"bool"}],"name":"CreatorTokenGatedToggled","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"min","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"max","type":"uint256"}],"name":"DurationLimitsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"GlobalSlotFeeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"collection","type":"address"}],"name":"InternalCollectionAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"newLinkToken","type":"address"}],"name":"LinkTokenUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newLimit","type":"uint256"}],"name":"MaxSlotsPerAddressUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newMin","type":"uint256"}],"name":"MinSlotLimitNonPrizedUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"erc721Implementation","type":"address"},{"indexed":true,"internalType":"address","name":"erc1155Implementation","type":"address"}],"name":"NFTFactoryImplementationsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"status","type":"bool"}],"name":"OperatorUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"paused","type":"bool"}],"name":"PoolCreationPaused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"poolImplementation","type":"address"}],"name":"PoolDeployerImplementationUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pool","type":"address"}],"name":"PoolRegistered","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newPercentage","type":"uint256"}],"name":"ProtocolFeeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"newAddress","type":"address"}],"name":"RevenueManagerUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"minSlotLimit","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"maxSlotLimit","type":"uint256"}],"name":"SlotLimitsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"subscriptionId","type":"uint256"}],"name":"SubscriptionCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint96","name":"amount","type":"uint96"}],"name":"SubscriptionFunded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"subscriptionId","type":"uint256"},{"indexed":false,"internalType":"uint96","name":"amount","type":"uint96"}],"name":"SubscriptionFundedWithDetails","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pool","type":"address"},{"indexed":true,"internalType":"uint256","name":"assignedSubscriptionId","type":"uint256"}],"name":"SubscriptionPreAssigned","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"consumer","type":"address"},{"indexed":true,"internalType":"uint256","name":"subscriptionId","type":"uint256"}],"name":"VRFConsumerAddedToSubscription","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"consumer","type":"address"},{"indexed":true,"internalType":"uint256","name":"subscriptionId","type":"uint256"}],"name":"VRFConsumerRemovedFromSubscription","type":"event"},{"anonymous":false,"inputs":[],"name":"VRFParamsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"subscriptionId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"index","type":"uint256"}],"name":"VRFSubscriptionAdded","type":"event"},{"anonymous":false,"inputs":[],"name":"VRFSubscriptionCancelled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"subscriptionId","type":"uint256"}],"name":"VRFSubscriptionRemoved","type":"event"},{"inputs":[{"internalType":"uint256","name":"subscriptionId","type":"uint256"}],"name":"acceptVRFOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"activeSubscriptionCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_collection","type":"address"}],"name":"addInternalCollection","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"consumer","type":"address"},{"internalType":"uint256","name":"subscriptionId","type":"uint256"}],"name":"addVRFConsumer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"subscriptionId","type":"uint256"}],"name":"addVRFSubscription","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"allPools","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"},{"internalType":"address","name":"creator","type":"address"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"batchSetupPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"callbackGasLimit","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"cancelVRFSubscription","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"createVRFSubscription","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"creationFeePercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"creationPaused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"creatorToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint96","name":"amountPerSubscription","type":"uint96"}],"name":"fundAllSubscriptionsWithNative","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint96","name":"amount","type":"uint96"}],"name":"fundVRFSubscriptionWithLink","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"subscriptionId","type":"uint256"},{"internalType":"uint96","name":"amount","type":"uint96"}],"name":"fundVRFSubscriptionWithLinkById","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint96","name":"amount","type":"uint96"}],"name":"fundVRFSubscriptionWithNative","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"subscriptionId","type":"uint256"},{"internalType":"uint96","name":"amount","type":"uint96"}],"name":"fundVRFSubscriptionWithNativeById","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"getAllInternalCollections","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"cursor","type":"uint256"},{"internalType":"uint256","name":"pageSize","type":"uint256"}],"name":"getAllPools","outputs":[{"internalType":"address[]","name":"pools","type":"address[]"},{"internalType":"uint256","name":"newCursor","type":"uint256"},{"internalType":"bool","name":"hasMore","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAllSlotLimits","outputs":[{"internalType":"uint256","name":"minPrized","type":"uint256"},{"internalType":"uint256","name":"minNonPrized","type":"uint256"},{"internalType":"uint256","name":"max","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAllSubscriptions","outputs":[{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"bool[]","name":"active","type":"bool[]"},{"internalType":"uint256[]","name":"consumerCounts","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCreationFeePercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getDurationLimits","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMaxSlotsPerAddress","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"isPrized","type":"bool"}],"name":"getMinSlotLimit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNextVRFSubscription","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getPoolConfig","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPoolCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"}],"name":"getPoolCreator","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"}],"name":"getPoolSubscription","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"creator","type":"address"},{"internalType":"uint256","name":"cursor","type":"uint256"},{"internalType":"uint256","name":"pageSize","type":"uint256"}],"name":"getPoolsByCreator","outputs":[{"internalType":"address[]","name":"pools","type":"address[]"},{"internalType":"uint256","name":"newCursor","type":"uint256"},{"internalType":"bool","name":"hasMore","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRevenueManager","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRevenueParameters","outputs":[{"internalType":"uint256","name":"_protocolFee","type":"uint256"},{"internalType":"uint256","name":"_creationFeePercentage","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSlotFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSlotLimits","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSubscriptionId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getVRFParams","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes32","name":"","type":"bytes32"},{"internalType":"uint32","name":"","type":"uint32"},{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"globalSlotFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"internalCollections","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"isActiveSubscription","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isCreationPaused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isCreatorTokenFeeEnabled","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isCreatorTokenGated","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isInternalCollection","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"isOperator","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"isPoolContract","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"keyHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"linkToken","outputs":[{"internalType":"contract ILinkTransferAndCall","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxPoolDuration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSlotLimit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSlotsPerAddress","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minCreatorTokenBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minPoolDuration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minSlotLimit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minSlotLimitNonPrized","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"nftFactory","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"operators","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"pause","type":"bool"}],"name":"pausePoolCreation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"poolCreationTimestamps","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"poolCreators","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"poolDeployer","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"poolToSubscriptionId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeePercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"consumer","type":"address"},{"internalType":"uint256","name":"subscriptionId","type":"uint256"}],"name":"removeVRFConsumer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"subscriptionId","type":"uint256"}],"name":"removeVRFSubscription","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"contractType","type":"string"},{"internalType":"address","name":"newAddress","type":"address"}],"name":"replaceContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"requestConfirmations","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"revenueManager","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardsFlywheel","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_percentage","type":"uint256"}],"name":"setCreationFeePercentage","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_token","type":"address"},{"internalType":"uint256","name":"_minBalance","type":"uint256"}],"name":"setCreatorToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_min","type":"uint256"},{"internalType":"uint256","name":"_max","type":"uint256"}],"name":"setDurationLimits","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_fee","type":"uint256"}],"name":"setGlobalSlotFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_linkToken","type":"address"}],"name":"setLinkToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxSlots","type":"uint256"}],"name":"setMaxSlotsPerAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_min","type":"uint256"}],"name":"setMinSlotLimitNonPrized","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_nftFactory","type":"address"}],"name":"setNFTFactory","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"status","type":"bool"}],"name":"setOperator","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_poolDeployer","type":"address"}],"name":"setPoolDeployer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_percentage","type":"uint256"}],"name":"setProtocolFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_revenueManager","type":"address"}],"name":"setRevenueManager","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_rewardsFlywheel","type":"address"}],"name":"setRewardsFlywheel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_min","type":"uint256"},{"internalType":"uint256","name":"_max","type":"uint256"}],"name":"setSlotLimits","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_fee","type":"uint256"}],"name":"setSocialEngagementFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_manager","type":"address"}],"name":"setSocialEngagementManager","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_coordinator","type":"address"},{"internalType":"bytes32","name":"_keyHash","type":"bytes32"},{"internalType":"uint32","name":"_gasLimit","type":"uint32"}],"name":"setVRFParams","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"socialEngagementFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"socialEngagementManager","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"subscriptionConsumerCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"_enabled","type":"bool"}],"name":"toggleCreatorTokenFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_enabled","type":"bool"}],"name":"toggleCreatorTokenGated","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_erc721Implementation","type":"address"},{"internalType":"address","name":"_erc1155Implementation","type":"address"}],"name":"updateNFTFactoryImplementations","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_poolImplementation","type":"address"}],"name":"updatePoolDeployerImplementation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"consumer","type":"address"},{"internalType":"uint256","name":"subscriptionId","type":"uint256"}],"name":"updatePoolToSubscription","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"vrfCoordinator","outputs":[{"internalType":"contract VRFCoordinatorV2PlusInterface","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"vrfSubscriptionId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"vrfSubscriptionIds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]'),sH={abi:rH},iH=[{inputs:[{internalType:"address",name:"_poolImplementation",type:"address"},{internalType:"address",name:"_manager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ApprovedSlotFeeMismatch",type:"error"},{inputs:[],name:"AvailableSupplyInsufficient",type:"error"},{inputs:[],name:"CollectioNameTaken",type:"error"},{inputs:[],name:"CollectionNameTaken",type:"error"},{inputs:[],name:"ContractsNotAllowed",type:"error"},{inputs:[],name:"DescriptionTooLong",type:"error"},{inputs:[],name:"ExceedsApprovedWinnerLimit",type:"error"},{inputs:[],name:"IncompatiblePrizeContract",type:"error"},{inputs:[],name:"InsufficientCreatorTokenBalance",type:"error"},{inputs:[],name:"InsufficientNativeBalance",type:"error"},{inputs:[],name:"InsufficientPrizeAmountForEscrow",type:"error"},{inputs:[],name:"InvalidDiscordLink",type:"error"},{inputs:[],name:"InvalidMaxSlotsPerAddress",type:"error"},{inputs:[],name:"InvalidParameter",type:"error"},{inputs:[],name:"InvalidPrizeAmount",type:"error"},{inputs:[],name:"InvalidPrizeType",type:"error"},{inputs:[],name:"InvalidSlotFee",type:"error"},{inputs:[],name:"InvalidSlotLimitConfig",type:"error"},{inputs:[],name:"InvalidStartTime",type:"error"},{inputs:[],name:"InvalidTelegramLink",type:"error"},{inputs:[],name:"InvalidTwitterLink",type:"error"},{inputs:[],name:"InvalidWinnerConfig",type:"error"},{inputs:[],name:"NotOwnerOfTokenID",type:"error"},{inputs:[],name:"PoolCreationPaused",type:"error"},{inputs:[],name:"PoolNameTaken",type:"error"},{inputs:[],name:"RefundFailed",type:"error"},{inputs:[],name:"SocialEngagementFeeTransferFailed",type:"error"},{inputs:[],name:"SocialEngagementParametersNotConfigured",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"pool",type:"address"},{indexed:!0,internalType:"address",name:"creator",type:"address"}],name:"PoolCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"poolImplementation",type:"address"}],name:"PoolImplementationUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"pool",type:"address"},{indexed:!1,internalType:"string",name:"description",type:"string"},{indexed:!1,internalType:"string",name:"twitterLink",type:"string"},{indexed:!1,internalType:"string",name:"discordLink",type:"string"},{indexed:!1,internalType:"string",name:"telegramLink",type:"string"}],name:"PoolMetadataSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"collection",type:"address"}],name:"PrizeCollectionCreated",type:"event"},{inputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"duration",type:"uint256"},{internalType:"uint256",name:"slotLimit",type:"uint256"},{internalType:"uint256",name:"winnersCount",type:"uint256"},{internalType:"uint256",name:"maxSlotsPerAddress",type:"uint256"},{internalType:"bool",name:"isPrized",type:"bool"},{internalType:"uint256",name:"customSlotFee",type:"uint256"},{internalType:"bool",name:"erc721Drop",type:"bool"},{internalType:"bool",name:"erc1155Drop",type:"bool"},{internalType:"address",name:"prizeCollection",type:"address"},{internalType:"enum PrizeTypes.Standard",name:"standard",type:"uint8"},{internalType:"uint256",name:"prizeTokenId",type:"uint256"},{internalType:"uint256",name:"amountPerWinner",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"address",name:"erc20PrizeToken",type:"address"},{internalType:"uint256",name:"erc20PrizeAmount",type:"uint256"},{internalType:"uint256",name:"nativePrizeAmount",type:"uint256"},{internalType:"address",name:"holderTokenAddress",type:"address"},{internalType:"enum PrizeTypes.Standard",name:"holderTokenStandard",type:"uint8"},{internalType:"uint256",name:"minHolderTokenBalance",type:"uint256"},{internalType:"uint256",name:"holderTokenBalance",type:"uint256"},{internalType:"uint256",name:"holderTokenId",type:"uint256"},{internalType:"bool",name:"socialEngagementRequired",type:"bool"},{internalType:"string",name:"socialTaskDescription",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"twitterLink",type:"string"},{internalType:"string",name:"discordLink",type:"string"},{internalType:"string",name:"telegramLink",type:"string"}],internalType:"struct PoolDeployer.PoolParams",name:"p",type:"tuple"}],name:"createPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastPoolCreationTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155BatchReceived",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC1155Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolImplementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"protocolManager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferOwnershipToManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_poolImplementation",type:"address"}],name:"updatePoolImplementation",outputs:[],stateMutability:"nonpayable",type:"function"}],oH={abi:iH},aH=[{inputs:[{internalType:"address",name:"initialOwner",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"AdminDepositSuccessful",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RevenueWithdrawn",type:"event"},{inputs:[],name:"adminRevenue",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"depositAdmin",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],lH={abi:aH},cH=[{inputs:[{internalType:"address",name:"_erc721Implementation",type:"address"},{internalType:"address",name:"_erc1155Implementation",type:"address"},{internalType:"address",name:"_protocolManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"MaxSupplyRequired",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"collection",type:"address"},{indexed:!1,internalType:"string",name:"dropURI",type:"string"},{indexed:!1,internalType:"string",name:"unrevealedURI",type:"string"},{indexed:!1,internalType:"bytes32",name:"dropURIHash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"unrevealedURIHash",type:"bytes32"}],name:"CollectionURIsSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"erc721Implementation",type:"address"},{indexed:!0,internalType:"address",name:"erc1155Implementation",type:"address"}],name:"ImplementationAddressesUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"collection",type:"address"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"enum PrizeTypes.Standard",name:"standard",type:"uint8"}],name:"PrizeCollectionCreated",type:"event"},{inputs:[{internalType:"string",name:"uri",type:"string"}],name:"computeURIHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"enum PrizeTypes.Standard",name:"standard",type:"uint8"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"baseURI",type:"string"},{internalType:"string",name:"dropURI",type:"string"},{internalType:"bytes32",name:"dropURIHash",type:"bytes32"},{internalType:"address",name:"initialOwner",type:"address"},{internalType:"uint96",name:"royaltyBps",type:"uint96"},{internalType:"address",name:"royaltyRecipient",type:"address"},{internalType:"uint64",name:"maxSupply",type:"uint64"},{internalType:"enum PrizeTypes.RevealType",name:"revealType",type:"uint8"},{internalType:"string",name:"unrevealedURI",type:"string"},{internalType:"bytes32",name:"unrevealedURIHash",type:"bytes32"},{internalType:"uint48",name:"revealTime",type:"uint48"}],name:"deployCollection",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"erc1155Implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721Implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"protocolManager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_erc721Implementation",type:"address"},{internalType:"address",name:"_erc1155Implementation",type:"address"}],name:"updateImplementationAddresses",outputs:[],stateMutability:"nonpayable",type:"function"}],uH={abi:cH},dH=JSON.parse('[{"inputs":[{"internalType":"address","name":"_factory","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"AlreadyInitialized","type":"error"},{"inputs":[],"name":"ApprovalCallerNotOwnerNorApproved","type":"error"},{"inputs":[],"name":"ApprovalQueryForNonexistentToken","type":"error"},{"inputs":[],"name":"BalanceQueryForZeroAddress","type":"error"},{"inputs":[],"name":"ExceedsMaxSupply","type":"error"},{"inputs":[],"name":"InvalidRevealTime","type":"error"},{"inputs":[],"name":"MintERC2309QuantityExceedsLimit","type":"error"},{"inputs":[],"name":"MintToZeroAddress","type":"error"},{"inputs":[],"name":"MintZeroQuantity","type":"error"},{"inputs":[],"name":"NotCompatibleWithSpotMints","type":"error"},{"inputs":[],"name":"OnlyFactory","type":"error"},{"inputs":[],"name":"OwnerQueryForNonexistentToken","type":"error"},{"inputs":[],"name":"OwnershipNotInitializedForExtraData","type":"error"},{"inputs":[],"name":"SequentialMintExceedsLimit","type":"error"},{"inputs":[],"name":"SequentialUpToTooSmall","type":"error"},{"inputs":[],"name":"SpotMintTokenIdTooSmall","type":"error"},{"inputs":[],"name":"SupplyAlreadySet","type":"error"},{"inputs":[],"name":"TokenAlreadyExists","type":"error"},{"inputs":[],"name":"TransferCallerNotOwnerNorApproved","type":"error"},{"inputs":[],"name":"TransferFromIncorrectOwner","type":"error"},{"inputs":[],"name":"TransferToNonERC721ReceiverImplementer","type":"error"},{"inputs":[],"name":"TransferToZeroAddress","type":"error"},{"inputs":[],"name":"URIQueryForNonexistentToken","type":"error"},{"inputs":[],"name":"UnauthorizedMinter","type":"error"},{"inputs":[],"name":"ZeroQuantity","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"newBaseURI","type":"string"}],"name":"BaseURIUpdated","type":"event"},{"anonymous":false,"inputs":[],"name":"CollectionRevealed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"fromTokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"toTokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"ConsecutiveTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"allocation","type":"uint256"}],"name":"CreatorAllocationDeclared","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newAllocation","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"reductionAmount","type":"uint256"}],"name":"CreatorAllocationReduced","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"dropURI","type":"string"}],"name":"DropURIUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"kol","type":"address"},{"indexed":false,"internalType":"uint256","name":"poolLimit","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"enforcedSlotFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"winnerLimit","type":"uint256"}],"name":"KOLApproved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"kol","type":"address"},{"indexed":true,"internalType":"address","name":"pool","type":"address"}],"name":"KOLPoolCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"kol","type":"address"}],"name":"KOLRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pool","type":"address"},{"indexed":false,"internalType":"uint256","name":"allocation","type":"uint256"}],"name":"MinterAllocationRestored","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pool","type":"address"},{"indexed":false,"internalType":"uint256","name":"allocation","type":"uint256"}],"name":"MinterAndAllocationSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"winner","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"PrizeMinted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newMaxSupply","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newCreatorAllocation","type":"uint256"}],"name":"SupplyReduced","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"cliffEnd","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"numberOfUnlocks","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"durationBetweenUnlocks","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amountPerUnlock","type":"uint256"}],"name":"VestingConfigured","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"allocatedSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_kol","type":"address"},{"internalType":"uint256","name":"_poolLimit","type":"uint256"},{"internalType":"uint256","name":"_enforcedSlotFee","type":"uint256"},{"internalType":"uint256","name":"_winnerLimit","type":"uint256"}],"name":"approveKOL","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"availableSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"cliffEnd","type":"uint256"},{"internalType":"uint256","name":"numberOfUnlocks","type":"uint256"},{"internalType":"uint256","name":"durationBetweenUnlocks","type":"uint256"}],"name":"configureCreatorVesting","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"creationTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"creatorAllocation","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"creatorAllocationDeclared","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"creatorClaimedCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"quantity","type":"uint256"}],"name":"creatorMint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_percentage","type":"uint256"}],"name":"cutSupply","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_percentage","type":"uint256"}],"name":"declareCreatorAllocation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAvailableCreatorMint","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_kol","type":"address"}],"name":"getKOLApprovalDetails","outputs":[{"internalType":"bool","name":"approved","type":"bool"},{"internalType":"uint256","name":"poolLimit","type":"uint256"},{"internalType":"uint256","name":"enforcedSlotFee","type":"uint256"},{"internalType":"uint256","name":"winnerLimit","type":"uint256"},{"internalType":"uint256","name":"poolCount","type":"uint256"},{"internalType":"uint256","name":"winnerCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getUnlockedCreatorAllocation","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_kol","type":"address"},{"internalType":"uint256","name":"_winnersCount","type":"uint256"}],"name":"incrementKOLApprovedCounts","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"},{"components":[{"internalType":"address","name":"initialOwner","type":"address"},{"internalType":"address","name":"protocolManager","type":"address"},{"internalType":"address","name":"royaltyRecipient","type":"address"},{"internalType":"uint256","name":"royaltyPercentage","type":"uint256"},{"internalType":"uint256","name":"maxSupply","type":"uint256"},{"internalType":"enum PrizeTypes.RevealType","name":"revealType","type":"uint8"},{"internalType":"uint256","name":"revealTime","type":"uint256"},{"internalType":"string","name":"baseURI","type":"string"},{"internalType":"string","name":"unrevealedURI","type":"string"},{"internalType":"string","name":"dropURI","type":"string"}],"internalType":"struct DroprERC721A.InitializationData","name":"data","type":"tuple"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isRevealed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"kolApprovals","outputs":[{"internalType":"bool","name":"approved","type":"bool"},{"internalType":"uint256","name":"poolLimit","type":"uint256"},{"internalType":"uint256","name":"enforcedSlotFee","type":"uint256"},{"internalType":"uint256","name":"winnerLimit","type":"uint256"},{"internalType":"uint256","name":"poolCount","type":"uint256"},{"internalType":"uint256","name":"winnerCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"quantity","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC721Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolManager","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_percentage","type":"uint256"}],"name":"reduceCreatorAllocation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"}],"name":"restoreMinterAllocation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"reveal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"revealTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"revealType","outputs":[{"internalType":"enum PrizeTypes.RevealType","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_kol","type":"address"}],"name":"revokeKOL","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"salePrice","type":"uint256"}],"name":"royaltyInfo","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"royaltyPercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"royaltyRecipient","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"newBaseURI","type":"string"}],"name":"setBaseURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"},{"internalType":"uint256","name":"allocation","type":"uint256"}],"name":"setMinterAndAllocation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_royaltyPercentage","type":"uint256"},{"internalType":"address","name":"_royaltyRecipient","type":"address"}],"name":"setRoyalty","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"supplyCutTimestamp","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalAllocatedSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unlockedAmountAtCut","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"unrevealedBaseURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"vestingConfig","outputs":[{"internalType":"uint256","name":"cliffEnd","type":"uint256"},{"internalType":"uint256","name":"numberOfUnlocks","type":"uint256"},{"internalType":"uint256","name":"durationBetweenUnlocks","type":"uint256"},{"internalType":"uint256","name":"amountPerUnlock","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"vestingConfigured","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]'),fH={abi:dH},hH=JSON.parse('[{"inputs":[{"internalType":"address","name":"_factory","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"AlreadyInitialized","type":"error"},{"inputs":[],"name":"ExceedsMaxSupply","type":"error"},{"inputs":[],"name":"InvalidMaxSupply","type":"error"},{"inputs":[],"name":"InvalidRevealTime","type":"error"},{"inputs":[],"name":"OnlyFactory","type":"error"},{"inputs":[],"name":"SupplyNotSet","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"newBaseURI","type":"string"}],"name":"BaseURIUpdated","type":"event"},{"anonymous":false,"inputs":[],"name":"CollectionRevealed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"minter","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"CreatorAllocationClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"allocation","type":"uint256"}],"name":"CreatorAllocationDeclared","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newAllocation","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"reductionAmount","type":"uint256"}],"name":"CreatorAllocationReduced","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"dropURI","type":"string"}],"name":"DropURIUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"kol","type":"address"},{"indexed":false,"internalType":"uint256","name":"poolLimit","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"enforcedSlotFee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"winnerLimit","type":"uint256"}],"name":"KOLApproved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"kol","type":"address"},{"indexed":true,"internalType":"address","name":"pool","type":"address"}],"name":"KOLPoolCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"kol","type":"address"}],"name":"KOLRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pool","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"allocation","type":"uint256"}],"name":"MinterAllocationRestored","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pool","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"allocation","type":"uint256"}],"name":"MinterAndAllocationSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"maxSupply","type":"uint256"}],"name":"NewTokenAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"minter","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"PrizeMinted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newMaxSupply","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newCreatorAllocation","type":"uint256"}],"name":"SupplyReduced","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"values","type":"uint256[]"}],"name":"TransferBatch","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"TransferSingle","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"value","type":"string"},{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"}],"name":"URI","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"string","name":"newURI","type":"string"}],"name":"URIUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"cliffEnd","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"numberOfUnlocks","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"durationBetweenUnlocks","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amountPerUnlock","type":"uint256"}],"name":"VestingConfiguredForToken","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"allocatedSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_kol","type":"address"},{"internalType":"uint256","name":"_poolLimit","type":"uint256"},{"internalType":"uint256","name":"_enforcedSlotFee","type":"uint256"},{"internalType":"uint256","name":"_winnerLimit","type":"uint256"}],"name":"approveKOL","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"availableSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"}],"name":"balanceOfBatch","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"cliffEnd","type":"uint256"},{"internalType":"uint256","name":"numberOfUnlocks","type":"uint256"},{"internalType":"uint256","name":"durationBetweenUnlocks","type":"uint256"}],"name":"configureCreatorVesting","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_maxSupply","type":"uint256"}],"name":"createNewToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"creatorAllocation","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"creatorAllocationDeclared","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"creatorClaimedCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"quantity","type":"uint256"}],"name":"creatorMint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"_percentage","type":"uint256"}],"name":"cutSupply","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"_percentage","type":"uint256"}],"name":"declareCreatorAllocation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"exists","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAllTokenIds","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getAvailableCreatorMint","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCollectionStats","outputs":[{"internalType":"uint256","name":"totalTokenTypes","type":"uint256"},{"internalType":"uint256","name":"totalTokensMinted","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_kol","type":"address"}],"name":"getKOLApprovalDetails","outputs":[{"internalType":"bool","name":"approved","type":"bool"},{"internalType":"uint256","name":"poolLimit","type":"uint256"},{"internalType":"uint256","name":"enforcedSlotFee","type":"uint256"},{"internalType":"uint256","name":"winnerLimit","type":"uint256"},{"internalType":"uint256","name":"poolCount","type":"uint256"},{"internalType":"uint256","name":"winnerCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getTokenInfo","outputs":[{"internalType":"uint256","name":"maxSupply_","type":"uint256"},{"internalType":"uint256","name":"currentSupply_","type":"uint256"},{"internalType":"bool","name":"exists_","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getUnlockedCreatorAllocation","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getUnrevealedURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_kol","type":"address"},{"internalType":"uint256","name":"_winnersCount","type":"uint256"}],"name":"incrementKOLApprovedCounts","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_prizeTokenId","type":"uint256"},{"components":[{"internalType":"address","name":"initialOwner","type":"address"},{"internalType":"address","name":"protocolManager","type":"address"},{"internalType":"address","name":"royaltyRecipient","type":"address"},{"internalType":"uint256","name":"royaltyPercentage","type":"uint256"},{"internalType":"uint256","name":"maxSupply","type":"uint256"},{"internalType":"enum PrizeTypes.RevealType","name":"revealType","type":"uint8"},{"internalType":"uint256","name":"revealTime","type":"uint256"},{"internalType":"string","name":"baseURI","type":"string"},{"internalType":"string","name":"unrevealedURI","type":"string"},{"internalType":"string","name":"dropURI","type":"string"}],"internalType":"struct DroprERC1155.InitializationData","name":"data","type":"tuple"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isRevealed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"kolApprovals","outputs":[{"internalType":"bool","name":"approved","type":"bool"},{"internalType":"uint256","name":"poolLimit","type":"uint256"},{"internalType":"uint256","name":"enforcedSlotFee","type":"uint256"},{"internalType":"uint256","name":"winnerLimit","type":"uint256"},{"internalType":"uint256","name":"poolCount","type":"uint256"},{"internalType":"uint256","name":"winnerCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155BatchReceived","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"poolTokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolManager","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"_percentage","type":"uint256"}],"name":"reduceCreatorAllocation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"restoreMinterAllocation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"reveal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"revealTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"revealType","outputs":[{"internalType":"enum PrizeTypes.RevealType","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_kol","type":"address"}],"name":"revokeKOL","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"salePrice","type":"uint256"}],"name":"royaltyInfo","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"royaltyPercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"royaltyRecipient","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeBatchTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"newBaseURI","type":"string"}],"name":"setBaseURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"allocation","type":"uint256"}],"name":"setMinterAndAllocation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_royaltyPercentage","type":"uint256"},{"internalType":"address","name":"_royaltyRecipient","type":"address"}],"name":"setRoyalty","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"string","name":"_uri","type":"string"}],"name":"setURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"supplyCutTimestamp","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"tokenAllocatedSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"tokenCreationTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"unlockedAmountAtCut","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"unrevealedURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"uri","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"vestingConfig","outputs":[{"internalType":"uint256","name":"cliffEnd","type":"uint256"},{"internalType":"uint256","name":"numberOfUnlocks","type":"uint256"},{"internalType":"uint256","name":"durationBetweenUnlocks","type":"uint256"},{"internalType":"uint256","name":"amountPerUnlock","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"vestingConfigured","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]'),pH={abi:hH},mH=JSON.parse('[{"inputs":[{"internalType":"address","name":"_factory","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"ArrayLengthMismatch","type":"error"},{"inputs":[],"name":"BatchTooLarge","type":"error"},{"inputs":[],"name":"ContractsCannotPurchase","type":"error"},{"inputs":[],"name":"CreatorNotAllowed","type":"error"},{"inputs":[],"name":"ExceedsMaxSlots","type":"error"},{"inputs":[],"name":"ExceedsSlotLimit","type":"error"},{"inputs":[],"name":"ExceedsWinnersCount","type":"error"},{"inputs":[],"name":"IncorrectPayment","type":"error"},{"inputs":[],"name":"InvalidNonPrizedPurchase","type":"error"},{"inputs":[],"name":"InvalidPoolState","type":"error"},{"inputs":[],"name":"InvalidPrizeAmount","type":"error"},{"inputs":[],"name":"InvalidPrizeCollection","type":"error"},{"inputs":[],"name":"InvalidPrizeType","type":"error"},{"inputs":[],"name":"InvalidState","type":"error"},{"inputs":[],"name":"InvalidWinnerAddress","type":"error"},{"inputs":[],"name":"MintingNotSupported","type":"error"},{"inputs":[],"name":"NoPrizesClaimedYet","type":"error"},{"inputs":[],"name":"NoPrizesToClaim","type":"error"},{"inputs":[],"name":"NotAWinner","type":"error"},{"inputs":[],"name":"OnlyOperator","type":"error"},{"inputs":[],"name":"PoolDurationElapsed","type":"error"},{"inputs":[],"name":"PoolNotActive","type":"error"},{"inputs":[],"name":"PrizeTransferFailed","type":"error"},{"inputs":[],"name":"ProtocolAdminNotAllowed","type":"error"},{"inputs":[],"name":"SocialEngagementNotConfigured","type":"error"},{"inputs":[],"name":"TimestampDelayIssue","type":"error"},{"inputs":[],"name":"UnauthorizedCaller","type":"error"},{"inputs":[],"name":"ZeroAddress","type":"error"},{"inputs":[],"name":"ZeroQuantity","type":"error"},{"inputs":[],"name":"ZeroSlotFee","type":"error"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"reason","type":"string"}],"name":"BatchProcessingFailed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes","name":"lowLevelData","type":"bytes"}],"name":"BatchProcessingFailedBytes","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"winner","type":"address"},{"indexed":false,"internalType":"string","name":"reason","type":"string"}],"name":"MintingFailed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[],"name":"PoolActivated","type":"event"},{"anonymous":false,"inputs":[],"name":"PoolEnded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"requestId","type":"uint256"}],"name":"RandomRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"participant","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"RefundProcessed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"batchNumber","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"participantCount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"shuffleStartIndex","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"batchSize","type":"uint256"}],"name":"SelectionStarted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"participant","type":"address"},{"indexed":false,"internalType":"uint256","name":"quantity","type":"uint256"}],"name":"SlotsPurchased","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"reason","type":"string"}],"name":"VRFRequestFailed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes","name":"lowLevelData","type":"bytes"}],"name":"VRFRequestFailedBytes","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address[]","name":"winners","type":"address[]"}],"name":"WinnersSelected","type":"event"},{"inputs":[{"internalType":"uint256","name":"batchRandomSeed","type":"uint256"}],"name":"_processBatchWithRandomness","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"participant","type":"address"}],"name":"_processRefundExternal","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"amountPerWinner","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"batchCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"winnerAddresses","type":"address[]"},{"internalType":"uint256[]","name":"quantities","type":"uint256[]"}],"name":"batchMintToWinners","outputs":[{"internalType":"uint256","name":"successfulMints","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"batchRandomSeeds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"claimPrize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"claimRefund","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"claimedWins","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"closePool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"creationFeePercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"creator","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentBatchSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"deletePool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"duration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"endTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"erc20PrizeAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"erc20PrizeToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"erc721EscrowClaimed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getParticipantsCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"participant","type":"address"}],"name":"getRefundableAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSlotLimit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"participant","type":"address"}],"name":"getSlotsPurchased","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"hasClaimedFeeRefund","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"hasCompletedSocialEngagement","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"holderData","outputs":[{"internalType":"address","name":"holderTokenAddress","type":"address"},{"internalType":"enum PrizeTypes.Standard","name":"holderTokenStandard","type":"uint8"},{"internalType":"uint256","name":"minHolderTokenBalance","type":"uint256"},{"internalType":"uint256","name":"holderTokenId","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"holderTokenAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"holderTokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"holderTokenStandard","outputs":[{"internalType":"enum PrizeTypes.Standard","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"i_vrfCoordinator","outputs":[{"internalType":"contract VRFCoordinatorV2PlusInterface","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"manager","type":"address"},{"internalType":"address","name":"revenueRecipient","type":"address"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"slotLimit","type":"uint256"},{"internalType":"uint256","name":"maxSlotsPerAddress","type":"uint256"},{"internalType":"uint256","name":"winnersCount","type":"uint256"},{"internalType":"bool","name":"isCollabPool","type":"bool"},{"internalType":"bool","name":"usesCustomFee","type":"bool"},{"internalType":"bool","name":"isExternalCollection","type":"bool"}],"internalType":"struct Pool.PoolConfig","name":"_poolConfig","type":"tuple"},{"components":[{"internalType":"enum PrizeTypes.Standard","name":"standard","type":"uint8"},{"internalType":"address","name":"prizeCollection","type":"address"},{"internalType":"uint256","name":"prizeTokenId","type":"uint256"},{"internalType":"uint256","name":"amountPerWinner","type":"uint256"},{"internalType":"address","name":"erc20PrizeToken","type":"address"},{"internalType":"uint256","name":"erc20PrizeAmount","type":"uint256"},{"internalType":"uint256","name":"nativePrizeAmount","type":"uint256"},{"internalType":"bool","name":"isEscrowedPrize","type":"bool"}],"internalType":"struct Pool.PrizeConfig","name":"_prizeConfig","type":"tuple"},{"components":[{"internalType":"address","name":"holderTokenAddress","type":"address"},{"internalType":"enum PrizeTypes.Standard","name":"holderTokenStandard","type":"uint8"},{"internalType":"uint256","name":"minHolderTokenBalance","type":"uint256"},{"internalType":"uint256","name":"holderTokenId","type":"uint256"}],"internalType":"struct Pool.HolderConfig","name":"_holderConfig","type":"tuple"},{"components":[{"internalType":"bool","name":"required","type":"bool"}],"internalType":"struct Pool.SocialEngagementConfig","name":"_socialEngagementConfig","type":"tuple"},{"internalType":"address","name":"_creator","type":"address"},{"internalType":"uint256","name":"_startTime","type":"uint256"},{"internalType":"uint256","name":"_duration","type":"uint256"},{"internalType":"uint256","name":"_slotFee","type":"uint256"},{"internalType":"bool","name":"_isPrized","type":"bool"}],"name":"initialize","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"isCollabPool","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isEscrowedPrize","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isExternalCollection","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isPrized","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isRefundable","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSlotsPerAddress","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minHolderTokenBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"nativePrizeAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155BatchReceived","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC1155Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC721Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"participants","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pendingProtocolFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"poolData","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"winnersCount","type":"uint256"},{"internalType":"uint256","name":"maxSlotsPerAddress","type":"uint256"},{"internalType":"uint256","name":"slotLimit","type":"uint256"},{"internalType":"address","name":"revenueRecipient","type":"address"},{"internalType":"bool","name":"isCollabPool","type":"bool"},{"internalType":"bool","name":"usesCustomFee","type":"bool"},{"internalType":"bool","name":"isExternalCollection","type":"bool"},{"internalType":"bool","name":"isRefundable","type":"bool"},{"internalType":"bool","name":"erc721EscrowClaimed","type":"bool"},{"internalType":"bool","name":"isEscrowedPrize","type":"bool"},{"internalType":"bool","name":"wasDeletedForFullRefund","type":"bool"},{"internalType":"bool","name":"protocolFeeCalculated","type":"bool"},{"internalType":"bool","name":"randomRequested","type":"bool"},{"internalType":"bool","name":"randomnessUsed","type":"bool"},{"internalType":"bool","name":"socialEngagementRequired","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"poolSubscriptionId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"participant","type":"address"}],"name":"prizeClaimed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"prizeCollection","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"prizeData","outputs":[{"internalType":"enum PrizeTypes.Standard","name":"standard","type":"uint8"},{"internalType":"address","name":"prizeCollection","type":"address"},{"internalType":"uint256","name":"prizeTokenId","type":"uint256"},{"internalType":"uint256","name":"amountPerWinner","type":"uint256"},{"internalType":"address","name":"erc20PrizeToken","type":"address"},{"internalType":"uint256","name":"erc20PrizeAmount","type":"uint256"},{"internalType":"uint256","name":"nativePrizeAmount","type":"uint256"},{"internalType":"uint256","name":"prizesClaimedCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"prizeTokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"prizesClaimedCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeeCalculated","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"protocolFeePercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"quantity","type":"uint256"},{"internalType":"uint256","name":"_deadline","type":"uint256"},{"internalType":"bytes","name":"_signature","type":"bytes"},{"internalType":"uint256[]","name":"_tokenIds","type":"uint256[]"}],"name":"purchaseSlots","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"randomRequested","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"randomSeed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"randomnessUsed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"requestId","type":"uint256"},{"internalType":"uint256[]","name":"randomWords","type":"uint256[]"}],"name":"rawFulfillRandomWords","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"refundableAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"refundedNonWinningSlots","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"requestRandomness","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"revenueData","outputs":[{"internalType":"uint256","name":"protocolFeePercentage","type":"uint256"},{"internalType":"uint256","name":"creationFeePercentage","type":"uint256"},{"internalType":"uint256","name":"totalCreatorRevenue","type":"uint256"},{"internalType":"uint256","name":"totalRefundableAmount","type":"uint256"},{"internalType":"uint256","name":"totalGlobalFeeRevenue","type":"uint256"},{"internalType":"uint256","name":"pendingProtocolFee","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"revenueRecipient","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"s_vrf_lastRequestId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"shuffleStartIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"slotFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"slotLimit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"slotsPurchased","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"socialEngagementRequired","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"standard","outputs":[{"internalType":"enum PrizeTypes.Standard","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"startTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"state","outputs":[{"internalType":"enum IPool.PoolState","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"tokenIdClaimedBy","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalCreatorRevenue","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalGlobalFeeRevenue","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalRefundableAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"usesCustomFee","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"wasDeletedForFullRefund","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"winners","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"winnersCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"winnersSelected","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"winsPerAddress","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdrawCreatorRevenue","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawProtocolRevenue","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),gH={abi:mH},yH=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"address",name:"_protocolManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"oldValue",type:"uint256"},{indexed:!0,internalType:"uint256",name:"newValue",type:"uint256"}],name:"MaxTasksUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"pool",type:"address"},{indexed:!1,internalType:"uint256",name:"newNonce",type:"uint256"}],name:"SignatureCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newSigner",type:"address"}],name:"SignerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"pool",type:"address"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"}],name:"SocialEngagementVerified",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"pool",type:"address"},{indexed:!1,internalType:"string",name:"taskDescription",type:"string"}],name:"SocialTasksEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bool",name:"isPaused",type:"bool"}],name:"TaskAssignmentsToggled",type:"event"},{inputs:[],name:"VERIFICATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_pool",type:"address"}],name:"cancelSignature",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_pool",type:"address"},{internalType:"string",name:"_taskDescription",type:"string"}],name:"enableSocialTasks",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_pool",type:"address"}],name:"hasSocialTasks",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isTaskAssignmentPaused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxTasks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"protocolManager",outputs:[{internalType:"contract IProtocolManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxTasks",type:"uint256"}],name:"setMaxTasks",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newSigner",type:"address"}],name:"setSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxTasks",type:"uint256"}],name:"setTaskValidationLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"socialTasksEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"toggleTaskAssignments",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"address",name:"_pool",type:"address"},{internalType:"uint256",name:"_deadline",type:"uint256"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"verify",outputs:[],stateMutability:"nonpayable",type:"function"}],xH={abi:yH},bH=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"kol",type:"address"},{indexed:!1,internalType:"uint256",name:"poolLimit",type:"uint256"},{indexed:!1,internalType:"uint256",name:"enforcedSlotFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"enforcedWinnerCount",type:"uint256"}],name:"KOLApproved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"kol",type:"address"},{indexed:!0,internalType:"address",name:"pool",type:"address"}],name:"KOLPoolCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"kol",type:"address"}],name:"KOLRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"_kol",type:"address"},{internalType:"uint256",name:"_poolLimit",type:"uint256"},{internalType:"uint256",name:"_enforcedSlotFee",type:"uint256"},{internalType:"uint256",name:"_enforcedWinnerCount",type:"uint256"}],name:"approveKOL",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_kol",type:"address"}],name:"getKOLApprovalDetails",outputs:[{internalType:"bool",name:"approved",type:"bool"},{internalType:"uint256",name:"poolLimit",type:"uint256"},{internalType:"uint256",name:"enforcedSlotFee",type:"uint256"},{internalType:"uint256",name:"enforcedWinnerCount",type:"uint256"},{internalType:"uint256",name:"poolCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"kolApprovals",outputs:[{internalType:"bool",name:"approved",type:"bool"},{internalType:"uint256",name:"poolLimit",type:"uint256"},{internalType:"uint256",name:"enforcedSlotFee",type:"uint256"},{internalType:"uint256",name:"enforcedWinnerCount",type:"uint256"},{internalType:"uint256",name:"poolCount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_kol",type:"address"}],name:"revokeKOL",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],vH={abi:bH},wH=[{inputs:[{internalType:"address",name:"_protocolManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyClaimed",type:"error"},{inputs:[],name:"InsufficientRewards",type:"error"},{inputs:[],name:"InsufficientSlotSales",type:"error"},{inputs:[],name:"InvalidAmount",type:"error"},{inputs:[],name:"InvalidPool",type:"error"},{inputs:[],name:"InvalidState",type:"error"},{inputs:[],name:"InvalidToken",type:"error"},{inputs:[],name:"NoRewards",type:"error"},{inputs:[],name:"NoSlotsSold",type:"error"},{inputs:[],name:"NotCreator",type:"error"},{inputs:[],name:"NotDepositor",type:"error"},{inputs:[],name:"NotEligible",type:"error"},{inputs:[],name:"NotOwner",type:"error"},{inputs:[],name:"TokenMismatch",type:"error"},{inputs:[],name:"TransferFailed",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint128",name:"oldAmount",type:"uint128"},{indexed:!1,internalType:"uint128",name:"newAmount",type:"uint128"}],name:"CreatorRewardAmountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"pool",type:"address"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fillPercentage",type:"uint256"}],name:"CreatorRewardsClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint128",name:"rewardAmount",type:"uint128"}],name:"CreatorRewardsDeposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"pool",type:"address"},{indexed:!1,internalType:"uint256",name:"rewardPerSlot",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalEligibleSlots",type:"uint256"}],name:"RewardPerSlotCalculated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"pool",type:"address"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardsClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"pool",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"address",name:"depositor",type:"address"}],name:"RewardsDeposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"pool",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"address",name:"depositor",type:"address"}],name:"RewardsWithdrawn",type:"event"},{inputs:[{internalType:"address",name:"pool",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"claimCreatorRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"pool",type:"address"}],name:"claimRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"creatorHasClaimed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"creatorRewardTokens",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"creatorRewards",outputs:[{internalType:"uint128",name:"rewardAmount",type:"uint128"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"totalDeposited",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint128",name:"rewardAmountPerPool",type:"uint128"}],name:"depositCreatorRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"pool",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"depositERC20Rewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"pool",type:"address"}],name:"depositNativeRewards",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"pool",type:"address"},{internalType:"address",name:"user",type:"address"}],name:"getClaimableReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"pool",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"getCreatorClaimableAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getCreatorRewardConfig",outputs:[{internalType:"uint128",name:"rewardAmount",type:"uint128"},{internalType:"uint256",name:"totalDeposited",type:"uint256"},{internalType:"address",name:"tokenAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCreatorRewardTokens",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"pool",type:"address"}],name:"getRewardInfo",outputs:[{internalType:"uint256",name:"totalDeposited",type:"uint256"},{internalType:"uint256",name:"rewardPerSlot",type:"uint256"},{internalType:"uint256",name:"totalEligibleSlots",type:"uint256"},{internalType:"uint256",name:"claimedSlots",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"pool",type:"address"},{internalType:"address",name:"user",type:"address"}],name:"hasClaimed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"poolRewards",outputs:[{internalType:"uint128",name:"totalDeposited",type:"uint128"},{internalType:"uint128",name:"rewardPerSlot",type:"uint128"},{internalType:"uint32",name:"totalEligibleSlots",type:"uint32"},{internalType:"uint32",name:"claimedSlots",type:"uint32"},{internalType:"uint128",name:"totalClaimedAmount",type:"uint128"},{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"depositor",type:"address"},{internalType:"bool",name:"rewardPerSlotCalculated",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"protocolManager",outputs:[{internalType:"contract IProtocolManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint128",name:"newAmount",type:"uint128"}],name:"updateCreatorRewardAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"userHasClaimed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"pool",type:"address"}],name:"withdrawDepositedRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],kH={abi:wH},TH=["function allowance(address owner, address spender) view returns (uint256)","function approve(address spender, uint256 amount) returns (bool)","function decimals() view returns (uint8)"],tn={protocolManager:sH.abi,poolDeployer:oH.abi,revenueManager:lH.abi,nftFactory:uH.abi,erc721Prize:fH.abi,erc1155Prize:pH.abi,socialEngagementManager:xH.abi,kolApproval:vH.abi,rewardsFlywheel:kH.abi,pool:gH.abi,erc20:TH};var NH=t=>{switch(t){case"success":return SH;case"info":return _H;case"warning":return EH;case"error":return AH;default:return null}},jH=Array(12).fill(0),CH=({visible:t,className:e})=>Ae.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Ae.createElement("div",{className:"sonner-spinner"},jH.map((n,r)=>Ae.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),SH=Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),EH=Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ae.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_H=Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),AH=Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),PH=Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),RH=()=>{let[t,e]=Ae.useState(document.hidden);return Ae.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},kT=1,IH=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:kT++,o=this.toasts.find(l=>l.id===s),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:a,title:n}):l):this.addToast({title:n,...r,dismissible:a,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,o,a=r.then(async c=>{if(o=["resolve",c],Ae.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(DH(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,f=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:f})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,f=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:f})}}).catch(async c=>{if(o=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,f=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:f})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||kT++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},wi=new IH,MH=(t,e)=>{let n=(e==null?void 0:e.id)||kT++;return wi.addToast({title:t,...e,id:n}),n},DH=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",OH=MH,LH=()=>wi.toasts,FH=()=>wi.getActiveToasts(),ni=Object.assign(OH,{success:wi.success,info:wi.info,warning:wi.warning,error:wi.error,custom:wi.custom,message:wi.message,promise:wi.promise,dismiss:wi.dismiss,loading:wi.loading},{getHistory:LH,getToasts:FH});function zH(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}zH(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function xx(t){return t.label!==void 0}var $H=3,BH="32px",UH="16px",dP=4e3,VH=356,qH=14,WH=20,HH=200;function da(...t){return t.filter(Boolean).join(" ")}function GH(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var KH=t=>{var e,n,r,s,o,a,l,c,u,f,p;let{invert:m,toast:g,unstyled:w,interacting:y,setHeights:T,visibleToasts:j,heights:_,index:v,toasts:P,expanded:D,removeToast:$,defaultRichColors:U,closeButton:K,style:Y,cancelButtonStyle:G,actionButtonStyle:X,className:V="",descriptionClassName:A="",duration:x,position:C,gap:L,loadingIcon:z,expandByDefault:R,classNames:I,icons:N,closeButtonAriaLabel:F="Close toast",pauseWhenPageIsHidden:E}=t,[M,ee]=Ae.useState(null),[O,q]=Ae.useState(null),[H,J]=Ae.useState(!1),[Q,ne]=Ae.useState(!1),[se,ie]=Ae.useState(!1),[pe,le]=Ae.useState(!1),[me,Ee]=Ae.useState(!1),[te,Ne]=Ae.useState(0),[Pe,et]=Ae.useState(0),Le=Ae.useRef(g.duration||x||dP),Se=Ae.useRef(null),Te=Ae.useRef(null),ze=v===0,dt=v+1<=j,oe=g.type,ue=g.dismissible!==!1,ge=g.className||"",be=g.descriptionClassName||"",ve=Ae.useMemo(()=>_.findIndex(Xe=>Xe.toastId===g.id)||0,[_,g.id]),Ke=Ae.useMemo(()=>{var Xe;return(Xe=g.closeButton)!=null?Xe:K},[g.closeButton,K]),Me=Ae.useMemo(()=>g.duration||x||dP,[g.duration,x]),He=Ae.useRef(0),ct=Ae.useRef(0),Je=Ae.useRef(0),Ye=Ae.useRef(null),[St,bt]=C.split("-"),Ze=Ae.useMemo(()=>_.reduce((Xe,Ft,yt)=>yt>=ve?Xe:Xe+Ft.height,0),[_,ve]),An=RH(),Dt=g.invert||m,Ot=oe==="loading";ct.current=Ae.useMemo(()=>ve*L+Ze,[ve,Ze]),Ae.useEffect(()=>{Le.current=Me},[Me]),Ae.useEffect(()=>{J(!0)},[]),Ae.useEffect(()=>{let Xe=Te.current;if(Xe){let Ft=Xe.getBoundingClientRect().height;return et(Ft),T(yt=>[{toastId:g.id,height:Ft,position:g.position},...yt]),()=>T(yt=>yt.filter(Ge=>Ge.toastId!==g.id))}},[T,g.id]),Ae.useLayoutEffect(()=>{if(!H)return;let Xe=Te.current,Ft=Xe.style.height;Xe.style.height="auto";let yt=Xe.getBoundingClientRect().height;Xe.style.height=Ft,et(yt),T(Ge=>Ge.find(rt=>rt.toastId===g.id)?Ge.map(rt=>rt.toastId===g.id?{...rt,height:yt}:rt):[{toastId:g.id,height:yt,position:g.position},...Ge])},[H,g.title,g.description,T,g.id]);let wn=Ae.useCallback(()=>{ne(!0),Ne(ct.current),T(Xe=>Xe.filter(Ft=>Ft.toastId!==g.id)),setTimeout(()=>{$(g)},HH)},[g,$,T,ct]);Ae.useEffect(()=>{if(g.promise&&oe==="loading"||g.duration===1/0||g.type==="loading")return;let Xe;return D||y||E&&An?(()=>{if(Je.current<He.current){let Ft=new Date().getTime()-He.current;Le.current=Le.current-Ft}Je.current=new Date().getTime()})():Le.current!==1/0&&(He.current=new Date().getTime(),Xe=setTimeout(()=>{var Ft;(Ft=g.onAutoClose)==null||Ft.call(g,g),wn()},Le.current)),()=>clearTimeout(Xe)},[D,y,g,oe,E,An,wn]),Ae.useEffect(()=>{g.delete&&wn()},[wn,g.delete]);function nn(){var Xe,Ft,yt;return N!=null&&N.loading?Ae.createElement("div",{className:da(I==null?void 0:I.loader,(Xe=g==null?void 0:g.classNames)==null?void 0:Xe.loader,"sonner-loader"),"data-visible":oe==="loading"},N.loading):z?Ae.createElement("div",{className:da(I==null?void 0:I.loader,(Ft=g==null?void 0:g.classNames)==null?void 0:Ft.loader,"sonner-loader"),"data-visible":oe==="loading"},z):Ae.createElement(CH,{className:da(I==null?void 0:I.loader,(yt=g==null?void 0:g.classNames)==null?void 0:yt.loader),visible:oe==="loading"})}return Ae.createElement("li",{tabIndex:0,ref:Te,className:da(V,ge,I==null?void 0:I.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,I==null?void 0:I.default,I==null?void 0:I[oe],(n=g==null?void 0:g.classNames)==null?void 0:n[oe]),"data-sonner-toast":"","data-rich-colors":(r=g.richColors)!=null?r:U,"data-styled":!(g.jsx||g.unstyled||w),"data-mounted":H,"data-promise":!!g.promise,"data-swiped":me,"data-removed":Q,"data-visible":dt,"data-y-position":St,"data-x-position":bt,"data-index":v,"data-front":ze,"data-swiping":se,"data-dismissible":ue,"data-type":oe,"data-invert":Dt,"data-swipe-out":pe,"data-swipe-direction":O,"data-expanded":!!(D||R&&H),style:{"--index":v,"--toasts-before":v,"--z-index":P.length-v,"--offset":`${Q?te:ct.current}px`,"--initial-height":R?"auto":`${Pe}px`,...Y,...g.style},onDragEnd:()=>{ie(!1),ee(null),Ye.current=null},onPointerDown:Xe=>{Ot||!ue||(Se.current=new Date,Ne(ct.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(ie(!0),Ye.current={x:Xe.clientX,y:Xe.clientY}))},onPointerUp:()=>{var Xe,Ft,yt,Ge;if(pe||!ue)return;Ye.current=null;let rt=Number(((Xe=Te.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),st=Number(((Ft=Te.current)==null?void 0:Ft.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Re=new Date().getTime()-((yt=Se.current)==null?void 0:yt.getTime()),it=M==="x"?rt:st,Ue=Math.abs(it)/Re;if(Math.abs(it)>=WH||Ue>.11){Ne(ct.current),(Ge=g.onDismiss)==null||Ge.call(g,g),q(M==="x"?rt>0?"right":"left":st>0?"down":"up"),wn(),le(!0),Ee(!1);return}ie(!1),ee(null)},onPointerMove:Xe=>{var Ft,yt,Ge,rt;if(!Ye.current||!ue||((Ft=window.getSelection())==null?void 0:Ft.toString().length)>0)return;let st=Xe.clientY-Ye.current.y,Re=Xe.clientX-Ye.current.x,it=(yt=t.swipeDirections)!=null?yt:GH(C);!M&&(Math.abs(Re)>1||Math.abs(st)>1)&&ee(Math.abs(Re)>Math.abs(st)?"x":"y");let Ue={x:0,y:0};M==="y"?(it.includes("top")||it.includes("bottom"))&&(it.includes("top")&&st<0||it.includes("bottom")&&st>0)&&(Ue.y=st):M==="x"&&(it.includes("left")||it.includes("right"))&&(it.includes("left")&&Re<0||it.includes("right")&&Re>0)&&(Ue.x=Re),(Math.abs(Ue.x)>0||Math.abs(Ue.y)>0)&&Ee(!0),(Ge=Te.current)==null||Ge.style.setProperty("--swipe-amount-x",`${Ue.x}px`),(rt=Te.current)==null||rt.style.setProperty("--swipe-amount-y",`${Ue.y}px`)}},Ke&&!g.jsx?Ae.createElement("button",{"aria-label":F,"data-disabled":Ot,"data-close-button":!0,onClick:Ot||!ue?()=>{}:()=>{var Xe;wn(),(Xe=g.onDismiss)==null||Xe.call(g,g)},className:da(I==null?void 0:I.closeButton,(s=g==null?void 0:g.classNames)==null?void 0:s.closeButton)},(o=N==null?void 0:N.close)!=null?o:PH):null,g.jsx||k.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:Ae.createElement(Ae.Fragment,null,oe||g.icon||g.promise?Ae.createElement("div",{"data-icon":"",className:da(I==null?void 0:I.icon,(a=g==null?void 0:g.classNames)==null?void 0:a.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||nn():null,g.type!=="loading"?g.icon||(N==null?void 0:N[oe])||NH(oe):null):null,Ae.createElement("div",{"data-content":"",className:da(I==null?void 0:I.content,(l=g==null?void 0:g.classNames)==null?void 0:l.content)},Ae.createElement("div",{"data-title":"",className:da(I==null?void 0:I.title,(c=g==null?void 0:g.classNames)==null?void 0:c.title)},typeof g.title=="function"?g.title():g.title),g.description?Ae.createElement("div",{"data-description":"",className:da(A,be,I==null?void 0:I.description,(u=g==null?void 0:g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),k.isValidElement(g.cancel)?g.cancel:g.cancel&&xx(g.cancel)?Ae.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||G,onClick:Xe=>{var Ft,yt;xx(g.cancel)&&ue&&((yt=(Ft=g.cancel).onClick)==null||yt.call(Ft,Xe),wn())},className:da(I==null?void 0:I.cancelButton,(f=g==null?void 0:g.classNames)==null?void 0:f.cancelButton)},g.cancel.label):null,k.isValidElement(g.action)?g.action:g.action&&xx(g.action)?Ae.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||X,onClick:Xe=>{var Ft,yt;xx(g.action)&&((yt=(Ft=g.action).onClick)==null||yt.call(Ft,Xe),!Xe.defaultPrevented&&wn())},className:da(I==null?void 0:I.actionButton,(p=g==null?void 0:g.classNames)==null?void 0:p.actionButton)},g.action.label):null))};function fP(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function YH(t,e){let n={};return[t,e].forEach((r,s)=>{let o=s===1,a=o?"--mobile-offset":"--offset",l=o?UH:BH;function c(u){["top","right","bottom","left"].forEach(f=>{n[`${a}-${f}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${a}-${u}`]=l:n[`${a}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var JH=k.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:a,className:l,offset:c,mobileOffset:u,theme:f="light",richColors:p,duration:m,style:g,visibleToasts:w=$H,toastOptions:y,dir:T=fP(),gap:j=qH,loadingIcon:_,icons:v,containerAriaLabel:P="Notifications",pauseWhenPageIsHidden:D}=t,[$,U]=Ae.useState([]),K=Ae.useMemo(()=>Array.from(new Set([r].concat($.filter(E=>E.position).map(E=>E.position)))),[$,r]),[Y,G]=Ae.useState([]),[X,V]=Ae.useState(!1),[A,x]=Ae.useState(!1),[C,L]=Ae.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=Ae.useRef(null),R=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=Ae.useRef(null),N=Ae.useRef(!1),F=Ae.useCallback(E=>{U(M=>{var ee;return(ee=M.find(O=>O.id===E.id))!=null&&ee.delete||wi.dismiss(E.id),M.filter(({id:O})=>O!==E.id)})},[]);return Ae.useEffect(()=>wi.subscribe(E=>{if(E.dismiss){U(M=>M.map(ee=>ee.id===E.id?{...ee,delete:!0}:ee));return}setTimeout(()=>{VM.flushSync(()=>{U(M=>{let ee=M.findIndex(O=>O.id===E.id);return ee!==-1?[...M.slice(0,ee),{...M[ee],...E},...M.slice(ee+1)]:[E,...M]})})})}),[]),Ae.useEffect(()=>{if(f!=="system"){L(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?L("dark"):L("light")),typeof window>"u")return;let E=window.matchMedia("(prefers-color-scheme: dark)");try{E.addEventListener("change",({matches:M})=>{L(M?"dark":"light")})}catch{E.addListener(({matches:ee})=>{try{L(ee?"dark":"light")}catch(O){console.error(O)}})}},[f]),Ae.useEffect(()=>{$.length<=1&&V(!1)},[$]),Ae.useEffect(()=>{let E=M=>{var ee,O;s.every(q=>M[q]||M.code===q)&&(V(!0),(ee=z.current)==null||ee.focus()),M.code==="Escape"&&(document.activeElement===z.current||(O=z.current)!=null&&O.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[s]),Ae.useEffect(()=>{if(z.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,N.current=!1)}},[z.current]),Ae.createElement("section",{ref:e,"aria-label":`${P} ${R}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},K.map((E,M)=>{var ee;let[O,q]=E.split("-");return $.length?Ae.createElement("ol",{key:E,dir:T==="auto"?fP():T,tabIndex:-1,ref:z,className:l,"data-sonner-toaster":!0,"data-theme":C,"data-y-position":O,"data-lifted":X&&$.length>1&&!o,"data-x-position":q,style:{"--front-toast-height":`${((ee=Y[0])==null?void 0:ee.height)||0}px`,"--width":`${VH}px`,"--gap":`${j}px`,...g,...YH(c,u)},onBlur:H=>{N.current&&!H.currentTarget.contains(H.relatedTarget)&&(N.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||N.current||(N.current=!0,I.current=H.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{A||V(!1)},onDragEnd:()=>V(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||x(!0)},onPointerUp:()=>x(!1)},$.filter(H=>!H.position&&M===0||H.position===E).map((H,J)=>{var Q,ne;return Ae.createElement(KH,{key:H.id,icons:v,index:J,toast:H,defaultRichColors:p,duration:(Q=y==null?void 0:y.duration)!=null?Q:m,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:w,closeButton:(ne=y==null?void 0:y.closeButton)!=null?ne:a,interacting:A,position:E,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:F,toasts:$.filter(se=>se.position==H.position),heights:Y.filter(se=>se.position==H.position),setHeights:G,expandByDefault:o,gap:j,loadingIcon:_,expanded:X,pauseWhenPageIsHidden:D,swipeDirections:t.swipeDirections})})):null}))});class XH{constructor(){this.recentToasts=new Map,this.cleanupInterval=5e3,this.maxDuplicateWindow=3e3,setInterval(()=>{const e=Date.now();for(const[n,r]of this.recentToasts.entries())e-r>this.cleanupInterval&&this.recentToasts.delete(n)},this.cleanupInterval)}generateToastKey(e,n="default"){const r=String(e).toLowerCase().replace(/\s+/g," ").trim().replace(/0x[a-f0-9]{40,}/gi,"[address]").replace(/transaction:\s*0x[a-f0-9]+/gi,"[transaction]").replace(/\d+(\.\d+)?\s*(eth|matic|avax|bnb)/gi,"[amount]").replace(/attempt\s+\d+\/\d+/gi,"[attempt]");return`${n}:${r}`}isDuplicate(e,n="default"){const r=this.generateToastKey(e,n),s=Date.now(),o=this.recentToasts.get(r);return o&&s-o<this.maxDuplicateWindow?!0:(this.recentToasts.set(r,s),!1)}error(e,n={}){if(this.isDuplicate(e,"error")){console.log("Duplicate error toast prevented:",e);return}const r=this.processErrorMessage(e);return ni.error(r,{duration:4e3,...n})}success(e,n={}){if(this.isDuplicate(e,"success")){console.log("Duplicate success toast prevented:",e);return}return ni.success(e,{duration:3e3,...n})}info(e,n={}){if(this.isDuplicate(e,"info")){console.log("Duplicate info toast prevented:",e);return}return ni.info(e,{duration:3e3,...n})}warning(e,n={}){if(this.isDuplicate(e,"warning")){console.log("Duplicate warning toast prevented:",e);return}return ni.warning(e,{duration:4e3,...n})}processErrorMessage(e){if(!e)return"An unknown error occurred";let n=typeof e=="string"?e:e.message||e.toString();return n=n.replace(/^Error:\s*/i,"").replace(/^execution reverted:\s*/i,"").replace(/^call exception:\s*/i,"").replace(/^missing revert data in call exception;\s*/i,"").replace(/user rejected transaction/i,"Transaction was cancelled").replace(/insufficient funds/i,"Insufficient funds for transaction").replace(/gas required exceeds allowance/i,"Transaction requires more gas than available").replace(/nonce too low/i,"Transaction nonce error - please try again").replace(/replacement transaction underpriced/i,"Transaction fee too low - please increase gas price").replace(/network error/i,"Network connection error").replace(/timeout/i,"Request timed out").replace(/rate limit/i,"Too many requests - please wait a moment").replace(/contract not deployed/i,"Smart contract not found on this network").replace(/method not found/i,"Contract method not available").replace(/^./,r=>r.toUpperCase()),n.length>150&&(n=n.substring(0,147)+"..."),n}forceError(e,n={}){const r=this.processErrorMessage(e);return ni.error(r,{duration:4e3,...n})}clearHistory(){this.recentToasts.clear()}loading(e,n={}){return ni.loading(e,n)}dismiss(e){return ni.dismiss(e)}promise(e,n={}){return ni.promise(e,n)}}const re=new XH,QH=({...t})=>i.jsx(JH,{theme:"dark",className:"toaster group",position:"bottom-right",expand:!0,richColors:!1,closeButton:!0,...t}),ON=()=>{if(typeof window>"u")return{name:"unknown",version:"unknown"};const t=navigator.userAgent,e={chrome:/Chrome\/(\d+)/.test(t),firefox:/Firefox\/(\d+)/.test(t),safari:/Safari\/(\d+)/.test(t)&&!/Chrome/.test(t),edge:/Edg\/(\d+)/.test(t),opera:/OPR\/(\d+)/.test(t),brave:navigator.brave&&navigator.brave.isBrave},n=Object.keys(e).find(o=>e[o])||"unknown",r=t.match(new RegExp(`${n==="edge"?"Edg":n}\\/(\\d+)`,"i")),s=r?r[1]:"unknown";return{name:n,version:s,userAgent:t,isMetaMaskBrowser:t.includes("MetaMask"),isMobile:/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)}},LN=()=>{const t=ON(),e=t.isMobile||window.innerWidth<768,n={firefox:{timeout:15e3,retries:3,batchSize:3,useSequential:!0,delayBetweenCalls:200},safari:{timeout:2e4,retries:4,batchSize:2,useSequential:!0,delayBetweenCalls:300},edge:{timeout:12e3,retries:3,batchSize:4,useSequential:!1,delayBetweenCalls:100},chrome:{timeout:1e4,retries:3,batchSize:6,useSequential:!1,delayBetweenCalls:50},default:{timeout:12e3,retries:3,batchSize:4,useSequential:e,delayBetweenCalls:100}},r=n[t.name]||n.default;return e&&(r.timeout*=1.5,r.retries=Math.min(r.retries+1,5),r.batchSize=Math.min(r.batchSize,3),r.useSequential=!0,r.delayBetweenCalls*=2),{...r,browserInfo:t,isMobile:e}},q0=async(t,e,n={})=>{const{timeout:r=1e4,retries:s=3,fallbackValue:o=null,required:a=!1}=n;for(let l=1;l<=s;l++)try{const c=new Promise((f,p)=>setTimeout(()=>p(new Error(`Timeout calling ${e}`)),r));return{success:!0,result:await Promise.race([t(),c]),error:null}}catch(c){if(console.warn(`Attempt ${l}/${s} failed for ${e}:`,c.message),(c.message.includes("missing revert data")||c.message.includes("call exception")||c.code==="CALL_EXCEPTION")&&l<s){await new Promise(f=>setTimeout(f,1e3*l));continue}if(l===s){if(a)throw c;return{success:!1,result:o,error:c}}}},ZH=async(t,e={})=>{const n=LN(),{useSequential:r=n.useSequential,batchSize:s=n.batchSize,delayBetweenCalls:o=n.delayBetweenCalls,timeout:a=n.timeout}=e;if(console.log(` Batch contract calls - Browser: ${n.browserInfo.name}, Sequential: ${r}, Batch size: ${s}`),r){const l=[];for(let c=0;c<t.length;c++){const u=t[c];try{o>0&&c>0&&await new Promise(p=>setTimeout(p,o));const f=await q0(u.method,u.name,{timeout:a,fallbackValue:u.fallback,required:u.required});l.push(f.success?f.result:u.fallback)}catch(f){if(console.error(`Sequential call failed for ${u.name}:`,f),u.required)throw f;l.push(u.fallback)}}return l}else{const l=[];for(let c=0;c<t.length;c+=s){const u=t.slice(c,c+s);try{const f=u.map(m=>q0(m.method,m.name,{timeout:a,fallbackValue:m.fallback,required:m.required}).then(g=>g.success?g.result:m.fallback).catch(g=>{if(console.error(`Batch call failed for ${m.name}:`,g),m.required)throw g;return m.fallback})),p=await Promise.all(f);l.push(...p),c+s<t.length&&o>0&&await new Promise(m=>setTimeout(m,o))}catch(f){console.error("Batch execution failed:",f),u.forEach(p=>{if(p.required)throw f;l.push(p.fallback)})}}return l}},eG=(t,e)=>{try{return typeof t[e]=="function"}catch{return!1}},So=(t,e,n=null)=>eG(t,e)?(...r)=>t[e](...r):(console.warn(`Method ${e} not found on contract`),()=>Promise.resolve(n)),t3=async t=>{if(!t)return 0;try{return(await t.getParticipantsCount()).toNumber()}catch(e){console.warn("getParticipantsCount failed, using fallback method:",e.message);let n=0,r=0;for(;;)try{await t.participants(r),n++,r++}catch{break}return n}},tG="0x08c379a0",nG="0x4e487b71",rG={1:"Assertion failed",17:"Arithmetic overflow/underflow",18:"Division or modulo by zero",33:"Invalid enum value",34:"Storage byte array that is incorrectly encoded",49:"Calling `.pop()` on an empty array",50:"Array index out of bounds",65:"Out-of-memory",81:"Invalid contract creation code"},sG=(()=>{const t=[];try{for(const[e,n]of Object.entries(tn))Array.isArray(n)?t.push({name:e,iface:new Gm(n)}):n&&Array.isArray(n.abi)&&t.push({name:e,iface:new Gm(n.abi)})}catch(e){console.warn("ErrorDecoder: failed to init interfaces",e)}return t})(),iG=t=>{if(!t||typeof t!="string"||!t.startsWith(tG))return null;try{return{type:"Error(string)",message:SN.decode(["string"],"0x"+t.slice(10))[0]}}catch{return null}},oG=t=>{if(!t||typeof t!="string"||!t.startsWith(nG))return null;try{const e=SN.decode(["uint256"],"0x"+t.slice(10))[0].toNumber();return{type:"Panic(uint256)",message:rG[e]||`Panic code 0x${e.toString(16)}`,panicCode:e}}catch{return null}},aG=t=>{if(!t||typeof t!="string")return null;for(const{name:e,iface:n}of sG)try{const r=n.parseError(t);if(r)return{type:"CustomError",sourceContract:e,errorName:r.name,signature:r.signature,args:r.args?Array.from(r.args):[]}}catch{}return null},lG=t=>iG(t)||oG(t)||aG(t),cG=(t,e)=>{if(!t)return e||"Transaction failed";if(t.type==="Error(string)"||t.type==="Panic(uint256)")return t.message||e||"Transaction failed";if(t.type==="CustomError"){const n=t.errorName;return{ContractsCannotPurchase:"Contract accounts cannot purchase slots",IncorrectPayment:"Incorrect payment amount sent",ExceedsSlotLimit:"You cannot exceed the per-participant slot limit",NotAWinner:"You are not a winner for this pool",NoPrizesToClaim:"No prizes available to claim",InvalidPoolState:"Action not allowed in the current pool state",OnlyOperator:"You are not authorized to perform this action",SocialEngagementNotConfigured:"Social engagement requirement is not configured",PoolDurationElapsed:"Pool has already ended",ZeroSlotFee:"Slot fee must be greater than zero",PrizeTransferFailed:"Prize transfer failed",MintingNotSupported:"Collection does not support minting for this action",UnauthorizedMinter:"You are not authorized as minter for this collection",ZeroQuantity:"Quantity must be greater than zero",SupplyNotSet:"Supply is not set for this token",ExceedsMaxSupply:"This action would exceed the collection's max supply"}[n]||n}return e||"Transaction failed"},uG=t=>{if(!t)return null;const n=(t.reason||t.message||"").toString().match(/reason="([^"]+)"/);return n?n[1]:null},dG=t=>{var a,l,c;const e=((a=t==null?void 0:t.data)==null?void 0:a.data)||((l=t==null?void 0:t.error)==null?void 0:l.data)||(t==null?void 0:t.data)||((c=t==null?void 0:t.receipt)==null?void 0:c.revertReason),n=lG(typeof e=="string"?e:null),s=uG(t)||(t==null?void 0:t.reason)||(t==null?void 0:t.message)||"Transaction failed",o=cG(n,s);return{decoded:n,message:o}},gn=(t,e)=>{let n="Transaction failed";if(typeof t=="string")n=t;else if(t){const{message:r}=dG(t);n=r}return re.error(n),n},ro=t=>{var n;if(!t)return"Unknown error occurred";let e="";return typeof t=="string"?e=t:t.reason?e=t.reason:(n=t.data)!=null&&n.message?e=t.data.message:t.message?e=t.message:e=t.toString(),e=e.replace(/^Error:\s*/i,"").replace(/^execution reverted:\s*/i,"").replace(/^call exception:\s*/i,"").replace(/^missing revert data in call exception;\s*/i,"").replace(/Transaction reverted without a reason string/i,"Transaction failed").trim(),e||"Unknown error occurred"},zb=(t,e={})=>{const n=ro(t).toLowerCase();return!(n.includes("user rejected")||n.includes("user denied")||(t==null?void 0:t.code)===4001||e.isReadOnly&&(n.includes("not found")||n.includes("does not exist")||n.includes("no tickets")||n.includes("unavailable")||n.includes("400")||n.includes("non-200 status code")||n.includes("failed to load")||n.includes("no data")||n.includes("empty result")||n.includes("no records"))||n.includes("network")||n.includes("timeout")||n.includes("connection")||n.includes("rate limit"))},m0=(t,e={})=>{const{context:n={},showToast:r=!0,logError:s=!0,fallbackMessage:o="An error occurred"}=e;s&&console.error("Error handled:",t,n);const a=ro(t);return r&&zb(t,n)&&gn(t),a},fG=(t,e={})=>{const{operation:n="transaction",showToast:r=!0}=e,s=ro(t);return console.error(`Transaction error in ${n}:`,t),r&&zb(t,{})&&gn(t),s},hG=(t,e,n={})=>{const{showToast:r=!1,isRequired:s=!1}=n,o=ro(t);return console.warn(`Contract call failed for ${e}:`,o),r&&(s||zb(t,{isReadOnly:!0}))&&gn(t),o},n3=()=>({handleError:(r,s={})=>m0(r,s),handleTransactionError:(r,s={})=>fG(r,s),handleContractCallError:(r,s,o={})=>hG(r,s,o),extractRevertReason:ro,shouldShowErrorToast:zb}),r3=k.createContext(),xn=()=>{const t=k.useContext(r3);if(!t)throw new Error("useContract must be used within a ContractProvider");return t},pG=({children:t})=>{const{signer:e,provider:n,connected:r,chainId:s,isInitialized:o,isReconnecting:a}=an(),[l,c]=k.useState({}),[u,f]=k.useState(!1);k.useEffect(()=>{if(r&&e&&o&&!a){f(!1);const v=setTimeout(()=>{p(),setTimeout(()=>{f(!0)},200)},100);return()=>clearTimeout(v)}else c({}),f(!1)},[r,e,o,a,s]);const p=()=>{var P,D,$,U,K,Y,G,X,V,A,x,C,L,z,R,I,N,F,E,M,ee,O,q,H;const v={};try{(D=(P=jt[s])==null?void 0:P.contractAddresses)!=null&&D.protocolManager&&(v.protocolManager=new Mt((U=($=jt[s])==null?void 0:$.contractAddresses)==null?void 0:U.protocolManager,tn.protocolManager,e)),(Y=(K=jt[s])==null?void 0:K.contractAddresses)!=null&&Y.poolDeployer&&(v.poolDeployer=new Mt((X=(G=jt[s])==null?void 0:G.contractAddresses)==null?void 0:X.poolDeployer,tn.poolDeployer,e)),(A=(V=jt[s])==null?void 0:V.contractAddresses)!=null&&A.revenueManager&&(v.revenueManager=new Mt((C=(x=jt[s])==null?void 0:x.contractAddresses)==null?void 0:C.revenueManager,tn.revenueManager,e)),(z=(L=jt[s])==null?void 0:L.contractAddresses)!=null&&z.nftFactory&&(v.nftFactory=new Mt((I=(R=jt[s])==null?void 0:R.contractAddresses)==null?void 0:I.nftFactory,tn.nftFactory,e)),(F=(N=jt[s])==null?void 0:N.contractAddresses)!=null&&F.socialEngagementManager&&(v.socialEngagementManager=new Mt((M=(E=jt[s])==null?void 0:E.contractAddresses)==null?void 0:M.socialEngagementManager,tn.socialEngagementManager,e)),(O=(ee=jt[s])==null?void 0:ee.contractAddresses)!=null&&O.rewardsFlywheel&&(v.rewardsFlywheel=new Mt((H=(q=jt[s])==null?void 0:q.contractAddresses)==null?void 0:H.rewardsFlywheel,tn.rewardsFlywheel,e)),c(v)}catch(J){console.error("Error initializing contracts:",J)}},m=(v,P)=>{if(!v)return console.warn("No address provided for contract instance"),null;if(!e&&!n)return console.warn("No signer or provider available for contract instance"),null;if(!tn[P])return console.error(`ABI not found for type: ${P}`),null;try{const D=e||n;return new Mt(v,tn[P],D)}catch(D){return console.error(`Error creating contract instance for ${P}:`,D),null}},g=async(v,P,D={})=>{try{let $;return P===void 0?$=Object.keys(D).length>0?await v(D):await v():$=await v(P,D),{success:!0,receipt:await $.wait(),hash:$.hash}}catch($){return{success:!1,error:gn($)}}},w=async(v,P="unknown",...D)=>{const $=LN();try{const U=await q0(()=>v(...D),P,{timeout:$.timeout,retries:$.retries,required:!1});if(U.success)return{success:!0,result:U.result};throw U.error||new Error(`${P} failed`)}catch(U){return{success:!1,error:gn(U)}}},y=Ae.useRef({}),T=(v,P)=>(y.current[v]||(y.current[v]=[]),y.current[v].push(P),()=>{y.current[v]=y.current[v].filter(D=>D!==P)}),j=(v,...P)=>{y.current[v]&&y.current[v].forEach(D=>D(...P))};k.useEffect(()=>{if(!r||!e||!l.poolDeployer)return;const v=(P,D)=>{j("PoolCreated",{pool:P,creator:D})};if(l.poolDeployer.on("PoolCreated",v),l.pool){const P=$=>{j("WinnersSelected",{winners:$})};l.pool.on("WinnersSelected",P);const D=($,U)=>{j("PrizeClaimed",{winner:$,tokenId:U})};return l.pool.on("PrizeClaimed",D),()=>{l.pool.off("WinnersSelected",P),l.pool.off("PrizeClaimed",D)}}return()=>{l.poolDeployer.off("PoolCreated",v)}},[r,e,l.poolDeployer,l.pool]);const _={contracts:l,getContractInstance:m,executeTransaction:g,executeCall:w,onContractEvent:T,isContractsReady:u};return i.jsx(r3.Provider,{value:_,children:t})},s3=k.createContext(),$b=()=>{const t=k.useContext(s3);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},jc=[{id:"light",name:"Light",icon:"Sun"},{id:"dark",name:"Dark",icon:"Moon"},{id:"dim-blue",name:"Dim Blue",icon:"Monitor"}],mG=({children:t})=>{const[e,n]=k.useState(()=>{const a=localStorage.getItem("theme");return a&&jc.some(l=>l.id===a)?a:(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,"dark")});k.useEffect(()=>{const a=document.documentElement;jc.forEach(l=>{a.classList.remove(l.id)}),a.classList.add(e),localStorage.setItem("theme",e)},[e]);const o={theme:e,setTheme:n,cycleTheme:()=>{const l=(jc.findIndex(c=>c.id===e)+1)%jc.length;n(jc[l].id)},getCurrentTheme:()=>jc.find(a=>a.id===e)||jc[1],availableThemes:jc,isDark:e==="dark",isLight:e==="light",isDimBlue:e==="dim-blue"};return i.jsx(s3.Provider,{value:o,children:t})},i3=k.createContext(),Bb=()=>{const t=k.useContext(i3);if(!t)throw new Error("useCollabDetection must be used within a CollabDetectionProvider");return t},gG=({children:t})=>{const[e,n]=k.useState({}),[r,s]=k.useState({}),o=k.useCallback((g,w)=>{n(y=>({...y,[g]:w})),s(y=>{const T={...y};return delete T[g],T})},[]),a=k.useCallback((g,w)=>{s(y=>({...y,[g]:w}))},[]),l=k.useCallback(g=>e[g],[e]),c=k.useCallback(g=>r[g]||!1,[r]),u=k.useCallback(g=>{const w=e[g.address];return w==="nft_collab"||g.isCollabPool?"nft_collab":w==="whitelist_collab"&&!g.isPrized?"whitelist_collab":g.isPrized?"prized":"non_prized"},[e,r]),f=k.useCallback(g=>{const w={non_prized:0,prized:0,nft_collab:0,whitelist_collab:0};return g.forEach(y=>{const T=u(y);w[T]=(w[T]||0)+1}),w},[u]),p=k.useCallback((g,w)=>!w||w.length===0?g:g.filter(y=>{const T=u(y);return w.includes(T)}),[u]),m={collabResults:e,loadingStates:r,updateCollabStatus:o,setCollabLoading:a,getCollabStatus:l,isCollabLoading:c,getEnhancedRaffleType:u,countEnhancedRaffleTypes:f,filterByEnhancedType:p};return i.jsx(i3.Provider,{value:m,children:t})},FN=k.createContext({});function Fg(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const zN=typeof window<"u",$N=zN?k.useLayoutEffect:k.useEffect,Ub=k.createContext(null);function BN(t,e){t.indexOf(e)===-1&&t.push(e)}function Vb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Gl=(t,e,n)=>n>e?e:n<t?t:n;let UN=()=>{};const Kl={},o3=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function a3(t){return typeof t=="object"&&t!==null}const l3=t=>/^0[^.\s]+$/u.test(t);function VN(t){let e;return()=>(e===void 0&&(e=t()),e)}const Uo=t=>t,yG=(t,e)=>n=>e(t(n)),zg=(...t)=>t.reduce(yG),bh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class qN{constructor(){this.subscriptions=[]}add(e){return BN(this.subscriptions,e),()=>Vb(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Na=t=>t*1e3,Oo=t=>t/1e3;function c3(t,e){return e?t*(1e3/e):0}const xG=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t},u3=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,bG=1e-7,vG=12;function wG(t,e,n,r,s){let o,a,l=0;do a=e+(n-e)/2,o=u3(a,r,s)-t,o>0?n=a:e=a;while(Math.abs(o)>bG&&++l<vG);return a}function $g(t,e,n,r){if(t===e&&n===r)return Uo;const s=o=>wG(o,0,1,t,n);return o=>o===0||o===1?o:u3(s(o),e,r)}const d3=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,f3=t=>e=>1-t(1-e),h3=$g(.33,1.53,.69,.99),WN=f3(h3),p3=d3(WN),m3=t=>(t*=2)<1?.5*WN(t):.5*(2-Math.pow(2,-10*(t-1))),HN=t=>1-Math.sin(Math.acos(t)),g3=f3(HN),y3=d3(HN),kG=$g(.42,0,1,1),TG=$g(0,0,.58,1),x3=$g(.42,0,.58,1),b3=t=>Array.isArray(t)&&typeof t[0]!="number";function v3(t,e){return b3(t)?t[xG(0,t.length,e)]:t}const w3=t=>Array.isArray(t)&&typeof t[0]=="number",NG={linear:Uo,easeIn:kG,easeInOut:x3,easeOut:TG,circIn:HN,circInOut:y3,circOut:g3,backIn:WN,backInOut:p3,backOut:h3,anticipate:m3},jG=t=>typeof t=="string",hP=t=>{if(w3(t)){UN(t.length===4);const[e,n,r,s]=t;return $g(e,n,r,s)}else if(jG(t))return NG[t];return t},bx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function CG(t,e){let n=new Set,r=new Set,s=!1,o=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(f){a.has(f)&&(u.schedule(f),t()),f(l)}const u={schedule:(f,p=!1,m=!1)=>{const w=m&&s?n:r;return p&&a.add(f),w.has(f)||w.add(f),f},cancel:f=>{r.delete(f),a.delete(f)},process:f=>{if(l=f,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,o&&(o=!1,u.process(f))}};return u}const SG=40;function k3(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=bx.reduce((v,P)=>(v[P]=CG(o),v),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:f,update:p,preRender:m,render:g,postRender:w}=a,y=()=>{const v=Kl.useManualTiming?s.timestamp:performance.now();n=!1,Kl.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(v-s.timestamp,SG),1)),s.timestamp=v,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),f.process(s),p.process(s),m.process(s),g.process(s),w.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(y))},T=()=>{n=!0,r=!0,s.isProcessing||t(y)};return{schedule:bx.reduce((v,P)=>{const D=a[P];return v[P]=($,U=!1,K=!1)=>(n||T(),D.schedule($,U,K)),v},{}),cancel:v=>{for(let P=0;P<bx.length;P++)a[bx[P]].cancel(v)},state:s,steps:a}}const{schedule:Zn,cancel:Yl,state:ms,steps:U1}=k3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Uo,!0);let g0;function EG(){g0=void 0}const Ci={now:()=>(g0===void 0&&Ci.set(ms.isProcessing||Kl.useManualTiming?ms.timestamp:performance.now()),g0),set:t=>{g0=t,queueMicrotask(EG)}},T3=t=>e=>typeof e=="string"&&e.startsWith(t),GN=T3("--"),_G=T3("var(--"),KN=t=>_G(t)?AG.test(t.split("/*")[0].trim()):!1,AG=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Jm={...zh,transform:t=>Gl(0,1,t)},vx={...zh,default:1},pm=t=>Math.round(t*1e5)/1e5,YN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function PG(t){return t==null}const RG=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,JN=(t,e)=>n=>!!(typeof n=="string"&&RG.test(n)&&n.startsWith(t)||e&&!PG(n)&&Object.prototype.hasOwnProperty.call(n,e)),N3=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,a,l]=r.match(YN);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},IG=t=>Gl(0,255,t),V1={...zh,transform:t=>Math.round(IG(t))},td={test:JN("rgb","red"),parse:N3("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+V1.transform(t)+", "+V1.transform(e)+", "+V1.transform(n)+", "+pm(Jm.transform(r))+")"};function MG(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const TT={test:JN("#"),parse:MG,transform:td.transform},Bg=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Pc=Bg("deg"),ol=Bg("%"),Wt=Bg("px"),DG=Bg("vh"),OG=Bg("vw"),pP={...ol,parse:t=>ol.parse(t)/100,transform:t=>ol.transform(t*100)},qf={test:JN("hsl","hue"),parse:N3("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ol.transform(pm(e))+", "+ol.transform(pm(n))+", "+pm(Jm.transform(r))+")"},Lr={test:t=>td.test(t)||TT.test(t)||qf.test(t),parse:t=>td.test(t)?td.parse(t):qf.test(t)?qf.parse(t):TT.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?td.transform(t):qf.transform(t),getAnimatableNone:t=>{const e=Lr.parse(t);return e.alpha=0,Lr.transform(e)}},LG=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FG(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(YN))==null?void 0:e.length)||0)+(((n=t.match(LG))==null?void 0:n.length)||0)>0}const j3="number",C3="color",zG="var",$G="var(",mP="${}",BG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xm(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const l=e.replace(BG,c=>(Lr.test(c)?(r.color.push(o),s.push(C3),n.push(Lr.parse(c))):c.startsWith($G)?(r.var.push(o),s.push(zG),n.push(c)):(r.number.push(o),s.push(j3),n.push(parseFloat(c))),++o,mP)).split(mP);return{values:n,split:l,indexes:r,types:s}}function S3(t){return Xm(t).values}function E3(t){const{split:e,types:n}=Xm(t),r=e.length;return s=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],s[a]!==void 0){const l=n[a];l===j3?o+=pm(s[a]):l===C3?o+=Lr.transform(s[a]):o+=s[a]}return o}}const UG=t=>typeof t=="number"?0:Lr.test(t)?Lr.getAnimatableNone(t):t;function VG(t){const e=S3(t);return E3(t)(e.map(UG))}const Xc={test:FG,parse:S3,createTransformer:E3,getAnimatableNone:VG};function q1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function qG({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,a=0;if(!e)s=o=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;s=q1(c,l,t+1/3),o=q1(c,l,t),a=q1(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function W0(t,e){return n=>n>0?e:t}const or=(t,e,n)=>t+(e-t)*n,W1=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},WG=[TT,td,qf],HG=t=>WG.find(e=>e.test(t));function gP(t){const e=HG(t);if(!e)return!1;let n=e.parse(t);return e===qf&&(n=qG(n)),n}const yP=(t,e)=>{const n=gP(t),r=gP(e);if(!n||!r)return W0(t,e);const s={...n};return o=>(s.red=W1(n.red,r.red,o),s.green=W1(n.green,r.green,o),s.blue=W1(n.blue,r.blue,o),s.alpha=or(n.alpha,r.alpha,o),td.transform(s))},NT=new Set(["none","hidden"]);function GG(t,e){return NT.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function KG(t,e){return n=>or(t,e,n)}function XN(t){return typeof t=="number"?KG:typeof t=="string"?KN(t)?W0:Lr.test(t)?yP:XG:Array.isArray(t)?_3:typeof t=="object"?Lr.test(t)?yP:YG:W0}function _3(t,e){const n=[...t],r=n.length,s=t.map((o,a)=>XN(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=s[a](o);return n}}function YG(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=XN(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function JG(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][r[o]],l=t.values[a]??0;n[s]=l,r[o]++}return n}const XG=(t,e)=>{const n=Xc.createTransformer(e),r=Xm(t),s=Xm(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?NT.has(t)&&!s.values.length||NT.has(e)&&!r.values.length?GG(t,e):zg(_3(JG(r,s),s.values),n):W0(t,e)};function A3(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?or(t,e,n):XN(t)(t,e)}const QG=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Zn.update(e,n),stop:()=>Yl(e),now:()=>ms.isProcessing?ms.timestamp:Ci.now()}},P3=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},H0=2e4;function QN(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<H0;)e+=n,r=t.next(e);return e>=H0?1/0:e}function R3(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(QN(r),H0);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:Oo(s)}}const ZG=5;function I3(t,e,n){const r=Math.max(e-ZG,0);return c3(n-t(r),e-r)}const kr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},H1=.001;function eK({duration:t=kr.duration,bounce:e=kr.bounce,velocity:n=kr.velocity,mass:r=kr.mass}){let s,o,a=1-e;a=Gl(kr.minDamping,kr.maxDamping,a),t=Gl(kr.minDuration,kr.maxDuration,Oo(t)),a<1?(s=u=>{const f=u*a,p=f*t,m=f-n,g=jT(u,a),w=Math.exp(-p);return H1-m/g*w},o=u=>{const p=u*a*t,m=p*n+n,g=Math.pow(a,2)*Math.pow(u,2)*t,w=Math.exp(-p),y=jT(Math.pow(u,2),a);return(-s(u)+H1>0?-1:1)*((m-g)*w)/y}):(s=u=>{const f=Math.exp(-u*t),p=(u-n)*t+1;return-H1+f*p},o=u=>{const f=Math.exp(-u*t),p=(n-u)*(t*t);return f*p});const l=5/t,c=nK(s,o,l);if(t=Na(t),isNaN(c))return{stiffness:kr.stiffness,damping:kr.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:t}}}const tK=12;function nK(t,e,n){let r=n;for(let s=1;s<tK;s++)r=r-t(r)/e(r);return r}function jT(t,e){return t*Math.sqrt(1-e*e)}const rK=["duration","bounce"],sK=["stiffness","damping","mass"];function xP(t,e){return e.some(n=>t[n]!==void 0)}function iK(t){let e={velocity:kr.velocity,stiffness:kr.stiffness,damping:kr.damping,mass:kr.mass,isResolvedFromDuration:!1,...t};if(!xP(t,sK)&&xP(t,rK))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Gl(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:kr.mass,stiffness:s,damping:o}}else{const n=eK(t);e={...e,...n,mass:kr.mass},e.isResolvedFromDuration=!0}return e}function Qm(t=kr.visualDuration,e=kr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:u,mass:f,duration:p,velocity:m,isResolvedFromDuration:g}=iK({...n,velocity:-Oo(n.velocity||0)}),w=m||0,y=u/(2*Math.sqrt(c*f)),T=a-o,j=Oo(Math.sqrt(c/f)),_=Math.abs(T)<5;r||(r=_?kr.restSpeed.granular:kr.restSpeed.default),s||(s=_?kr.restDelta.granular:kr.restDelta.default);let v;if(y<1){const D=jT(j,y);v=$=>{const U=Math.exp(-y*j*$);return a-U*((w+y*j*T)/D*Math.sin(D*$)+T*Math.cos(D*$))}}else if(y===1)v=D=>a-Math.exp(-j*D)*(T+(w+j*T)*D);else{const D=j*Math.sqrt(y*y-1);v=$=>{const U=Math.exp(-y*j*$),K=Math.min(D*$,300);return a-U*((w+y*j*T)*Math.sinh(K)+D*T*Math.cosh(K))/D}}const P={calculatedDuration:g&&p||null,next:D=>{const $=v(D);if(g)l.done=D>=p;else{let U=D===0?w:0;y<1&&(U=D===0?Na(w):I3(v,D,$));const K=Math.abs(U)<=r,Y=Math.abs(a-$)<=s;l.done=K&&Y}return l.value=l.done?a:$,l},toString:()=>{const D=Math.min(QN(P),H0),$=P3(U=>P.next(D*U).value,D,30);return D+"ms "+$},toTransition:()=>{}};return P}Qm.applyToOptions=t=>{const e=R3(t,100,Qm);return t.ease=e.ease,t.duration=Na(e.duration),t.type="keyframes",t};function CT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:f}){const p=t[0],m={done:!1,value:p},g=K=>l!==void 0&&K<l||c!==void 0&&K>c,w=K=>l===void 0?c:c===void 0||Math.abs(l-K)<Math.abs(c-K)?l:c;let y=n*e;const T=p+y,j=a===void 0?T:a(T);j!==T&&(y=j-p);const _=K=>-y*Math.exp(-K/r),v=K=>j+_(K),P=K=>{const Y=_(K),G=v(K);m.done=Math.abs(Y)<=u,m.value=m.done?j:G};let D,$;const U=K=>{g(m.value)&&(D=K,$=Qm({keyframes:[m.value,w(m.value)],velocity:I3(v,K,m.value),damping:s,stiffness:o,restDelta:u,restSpeed:f}))};return U(0),{calculatedDuration:null,next:K=>{let Y=!1;return!$&&D===void 0&&(Y=!0,P(K),U(K)),D!==void 0&&K>=D?$.next(K-D):(!Y&&P(K),m)}}}function oK(t,e,n){const r=[],s=n||Kl.mix||A3,o=t.length-1;for(let a=0;a<o;a++){let l=s(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Uo:e;l=zg(c,l)}r.push(l)}return r}function M3(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(UN(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=oK(e,r,s),c=l.length,u=f=>{if(a&&f<t[0])return e[0];let p=0;if(c>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const m=bh(t[p],t[p+1],f);return l[p](m)};return n?f=>u(Gl(t[0],t[o-1],f)):u}function D3(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=bh(0,e,r);t.push(or(n,1,s))}}function O3(t){const e=[0];return D3(e,t.length-1),e}function aK(t,e){return t.map(n=>n*e)}function lK(t,e){return t.map(()=>e||x3).splice(0,t.length-1)}function mm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=b3(r)?r.map(hP):hP(r),o={done:!1,value:e[0]},a=aK(n&&n.length===e.length?n:O3(e),t),l=M3(a,e,{ease:Array.isArray(s)?s:lK(e,s)});return{calculatedDuration:t,next:c=>(o.value=l(c),o.done=c>=t,o)}}const cK=t=>t!==null;function ZN(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(cK),l=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!l||r===void 0?o[l]:r}const uK={decay:CT,inertia:CT,tween:mm,keyframes:mm,spring:Qm};function L3(t){typeof t.type=="string"&&(t.type=uK[t.type])}class ej{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const dK=t=>t/100;class tj extends ej{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Ci.now()&&this.tick(Ci.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;L3(e);const{type:n=mm,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:a=0}=e;let{keyframes:l}=e;const c=n||mm;c!==mm&&typeof l[0]!="number"&&(this.mixKeyframes=zg(dK,A3(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=QN(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:p,repeatType:m,repeatDelay:g,type:w,onUpdate:y,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?j<0:j>s;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let v=this.currentTime,P=r;if(p){const K=Math.min(this.currentTime,s)/l;let Y=Math.floor(K),G=K%1;!G&&K>=1&&(G=1),G===1&&Y--,Y=Math.min(Y,p+1),!!(Y%2)&&(m==="reverse"?(G=1-G,g&&(G-=g/l)):m==="mirror"&&(P=a)),v=Gl(0,1,G)*l}const D=_?{done:!1,value:f[0]}:P.next(v);o&&(D.value=o(D.value));let{done:$}=D;!_&&c!==null&&($=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return U&&w!==CT&&(D.value=ZN(f,this.options,T,this.speed)),y&&y(D.value),U&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return Oo(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Oo(e)}get time(){return Oo(this.currentTime)}set time(e){var n;e=Na(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ci.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Oo(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=QG,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(o=(s=this.options).onPlay)==null||o.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ci.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function fK(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const nd=t=>t*180/Math.PI,ST=t=>{const e=nd(Math.atan2(t[1],t[0]));return ET(e)},hK={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ST,rotateZ:ST,skewX:t=>nd(Math.atan(t[1])),skewY:t=>nd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ET=t=>(t=t%360,t<0&&(t+=360),t),bP=ST,vP=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),wP=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),pK={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vP,scaleY:wP,scale:t=>(vP(t)+wP(t))/2,rotateX:t=>ET(nd(Math.atan2(t[6],t[5]))),rotateY:t=>ET(nd(Math.atan2(-t[2],t[0]))),rotateZ:bP,rotate:bP,skewX:t=>nd(Math.atan(t[4])),skewY:t=>nd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function _T(t){return t.includes("scale")?1:0}function AT(t,e){if(!t||t==="none")return _T(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=pK,s=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=hK,s=l}if(!s)return _T(e);const o=r[e],a=s[1].split(",").map(gK);return typeof o=="function"?o(a):a[o]}const mK=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return AT(n,e)};function gK(t){return parseFloat(t.trim())}const $h=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bh=new Set($h),kP=t=>t===zh||t===Wt,yK=new Set(["x","y","z"]),xK=$h.filter(t=>!yK.has(t));function bK(t){const e=[];return xK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const od={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>AT(e,"x"),y:(t,{transform:e})=>AT(e,"y")};od.translateX=od.x;od.translateY=od.y;const ad=new Set;let PT=!1,RT=!1,IT=!1;function F3(){if(RT){const t=Array.from(ad).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=bK(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,a])=>{var l;(l=r.getValue(o))==null||l.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}RT=!1,PT=!1,ad.forEach(t=>t.complete(IT)),ad.clear()}function z3(){ad.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(RT=!0)})}function vK(){IT=!0,z3(),F3(),IT=!1}class nj{constructor(e,n,r,s,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(ad.add(this),PT||(PT=!0,Zn.read(z3),Zn.resolveKeyframes(F3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}fK(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ad.delete(this)}cancel(){this.state==="scheduled"&&(ad.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const wK=t=>t.startsWith("--");function kK(t,e,n){wK(e)?t.style.setProperty(e,n):t.style[e]=n}const TK=VN(()=>window.ScrollTimeline!==void 0),NK={};function jK(t,e){const n=VN(t);return()=>NK[e]??n()}const $3=jK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,TP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xp([0,.65,.55,1]),circOut:Xp([.55,0,1,.45]),backIn:Xp([.31,.01,.66,-.59]),backOut:Xp([.33,1.53,.69,.99])};function B3(t,e){if(t)return typeof t=="function"?$3()?P3(t,e):"ease-out":w3(t)?Xp(t):Array.isArray(t)?t.map(n=>B3(n,e)||TP.easeOut):TP[t]}function CK(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const f={[e]:n};c&&(f.offset=c);const p=B3(l,s);Array.isArray(p)&&(f.easing=p);const m={delay:r,duration:s,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),t.animate(f,m)}function rj(t){return typeof t=="function"&&"applyToOptions"in t}function SK({type:t,...e}){return rj(t)&&$3()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class EK extends ej{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e,UN(typeof e.type!="string");const u=SK(e);this.animation=CK(n,r,s,u,o),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const f=ZN(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(f):kK(n,r,f),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Oo(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Oo(e)}get time(){return Oo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Na(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&TK()?(this.animation.timeline=e,Uo):n(this)}}const U3={anticipate:m3,backInOut:p3,circInOut:y3};function _K(t){return t in U3}function AK(t){typeof t.ease=="string"&&_K(t.ease)&&(t.ease=U3[t.ease])}const NP=10;class PK extends EK{constructor(e){AK(e),L3(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new tj({...a,autoplay:!1}),c=Na(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-NP).value,l.sample(c).value,NP),l.stop()}}const jP=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Xc.test(t)||t==="0")&&!t.startsWith("url("));function RK(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function IK(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=jP(s,e),l=jP(o,e);return!a||!l?!1:RK(t)||(n==="spring"||rj(n))&&r}function MT(t){t.duration=0,t.type="keyframes"}const MK=new Set(["opacity","clipPath","filter","transform"]),DK=VN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function OK(t){var f;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:a}=t;if(!(((f=e==null?void 0:e.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return DK()&&n&&MK.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}const LK=40;class FK extends ej{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:f,...p}){var w;super(),this.stop=()=>{var y,T;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=Ci.now();const m={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:a,name:c,motionValue:u,element:f,...p},g=(f==null?void 0:f.KeyframeResolver)||nj;this.keyframeResolver=new g(l,(y,T,j)=>this.onKeyframesResolved(y,T,m,!j),c,u,f),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:o,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=Ci.now(),IK(e,o,a,l)||((Kl.instantAnimations||!c)&&(f==null||f(ZN(e,r,n))),e[0]=e[e.length-1],MT(r),r.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>LK?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!u&&OK(m)?new PK({...m,element:m.motionValue.owner.current}):new tj(m);g.finished.then(()=>this.notifyFinished()).catch(Uo),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),vK()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}class zK{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e){const n=this.animations.map(r=>r.attachTimeline(e));return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return CP(this.animations,"duration")}get iterationDuration(){return CP(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function CP(t,e){let n=0;for(let r=0;r<t.length;r++){const s=t[r][e];s!==null&&s>n&&(n=s)}return n}class $K extends zK{then(e,n){return this.finished.finally(e).then(()=>{})}}const BK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function UK(t){const e=BK.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function V3(t,e,n=1){const[r,s]=UK(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return o3(a)?parseFloat(a):a}return KN(s)?V3(s,e,n+1):s}function sj(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const q3=new Set(["width","height","top","left","right","bottom",...$h]),VK={test:t=>t==="auto",parse:t=>t},W3=t=>e=>e.test(t),H3=[zh,Wt,ol,Pc,OG,DG,VK],SP=t=>H3.find(W3(t));function qK(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||l3(t):!0}const WK=new Set(["brightness","contrast","saturate","opacity"]);function HK(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(YN)||[];if(!r)return t;const s=n.replace(r,"");let o=WK.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const GK=/\b([a-z-]*)\(.*?\)/gu,DT={...Xc,getAnimatableNone:t=>{const e=t.match(GK);return e?e.map(HK).join(" "):t}},EP={...zh,transform:Math.round},KK={rotate:Pc,rotateX:Pc,rotateY:Pc,rotateZ:Pc,scale:vx,scaleX:vx,scaleY:vx,scaleZ:vx,skew:Pc,skewX:Pc,skewY:Pc,distance:Wt,translateX:Wt,translateY:Wt,translateZ:Wt,x:Wt,y:Wt,z:Wt,perspective:Wt,transformPerspective:Wt,opacity:Jm,originX:pP,originY:pP,originZ:Wt},ij={borderWidth:Wt,borderTopWidth:Wt,borderRightWidth:Wt,borderBottomWidth:Wt,borderLeftWidth:Wt,borderRadius:Wt,radius:Wt,borderTopLeftRadius:Wt,borderTopRightRadius:Wt,borderBottomRightRadius:Wt,borderBottomLeftRadius:Wt,width:Wt,maxWidth:Wt,height:Wt,maxHeight:Wt,top:Wt,right:Wt,bottom:Wt,left:Wt,padding:Wt,paddingTop:Wt,paddingRight:Wt,paddingBottom:Wt,paddingLeft:Wt,margin:Wt,marginTop:Wt,marginRight:Wt,marginBottom:Wt,marginLeft:Wt,backgroundPositionX:Wt,backgroundPositionY:Wt,...KK,zIndex:EP,fillOpacity:Jm,strokeOpacity:Jm,numOctaves:EP},YK={...ij,color:Lr,backgroundColor:Lr,outlineColor:Lr,fill:Lr,stroke:Lr,borderColor:Lr,borderTopColor:Lr,borderRightColor:Lr,borderBottomColor:Lr,borderLeftColor:Lr,filter:DT,WebkitFilter:DT},G3=t=>YK[t];function K3(t,e){let n=G3(t);return n!==DT&&(n=Xc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const JK=new Set(["auto","none","0"]);function XK(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!JK.has(o)&&Xm(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=K3(n,s)}class QK extends nj{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),KN(u))){const f=V3(u,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!q3.has(r)||e.length!==2)return;const[s,o]=e,a=SP(s),l=SP(o);if(a!==l)if(kP(a)&&kP(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else od[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||qK(e[s]))&&r.push(s);r.length&&XK(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=od[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=od[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function Y3(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const J3=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function X3(t){return a3(t)&&"offsetHeight"in t}const _P=30,ZK=t=>!isNaN(parseFloat(t)),gm={current:void 0};class eY{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const s=Ci.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ci.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZK(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new qN);const r=this.events[e].add(n);return e==="change"?()=>{r(),Zn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return gm.current&&gm.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ci.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>_P)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,_P);return c3(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vd(t,e){return new eY(t,e)}const{schedule:oj}=k3(queueMicrotask,!1),ya={x:!1,y:!1};function Q3(){return ya.x||ya.y}function tY(t){return t==="x"||t==="y"?ya[t]?null:(ya[t]=!0,()=>{ya[t]=!1}):ya.x||ya.y?null:(ya.x=ya.y=!0,()=>{ya.x=ya.y=!1})}function Z3(t,e){const n=Y3(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function AP(t){return!(t.pointerType==="touch"||Q3())}function nY(t,e,n={}){const[r,s,o]=Z3(t,n),a=l=>{if(!AP(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const f=p=>{AP(p)&&(u(p),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,s)};return r.forEach(l=>{l.addEventListener("pointerenter",a,s)}),o}const e6=(t,e)=>e?t===e?!0:e6(t,e.parentElement):!1,aj=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,rY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sY(t){return rY.has(t.tagName)||t.tabIndex!==-1}const y0=new WeakSet;function PP(t){return e=>{e.key==="Enter"&&t(e)}}function G1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const iY=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=PP(()=>{if(y0.has(n))return;G1(n,"down");const s=PP(()=>{G1(n,"up")}),o=()=>G1(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function RP(t){return aj(t)&&!Q3()}function oY(t,e,n={}){const[r,s,o]=Z3(t,n),a=l=>{const c=l.currentTarget;if(!RP(l))return;y0.add(c);const u=e(c,l),f=(g,w)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),y0.has(c)&&y0.delete(c),RP(g)&&typeof u=="function"&&u(g,{success:w})},p=g=>{f(g,c===window||c===document||n.useGlobalTarget||e6(c,g.target))},m=g=>{f(g,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",m,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),X3(l)&&(l.addEventListener("focus",u=>iY(u,s)),!sY(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function lj(t){return a3(t)&&"ownerSVGElement"in t}function t6(t){return lj(t)&&t.tagName==="svg"}function aY(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],s=t[1+n],o=t[2+n],a=t[3+n],l=M3(s,o,a);return e?l(r):l}const is=t=>!!(t&&t.getVelocity),lY=[...H3,Lr,Xc],cY=t=>lY.find(W3(t)),qb=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function IP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function uY(...t){return e=>{let n=!1;const r=t.map(s=>{const o=IP(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():IP(t[s],null)}}}}function dY(...t){return k.useCallback(uY(...t),t)}class fY extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=X3(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function hY({children:t,isPresent:e,anchorX:n,root:r}){const s=k.useId(),o=k.useRef(null),a=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(qb),c=dY(o,t==null?void 0:t.ref);return k.useInsertionEffect(()=>{const{width:u,height:f,top:p,left:m,right:g}=a.current;if(e||!o.current||!u||!f)return;const w=n==="left"?`left: ${m}`:`right: ${g}`;o.current.dataset.motionPopId=s;const y=document.createElement("style");l&&(y.nonce=l);const T=r??document.head;return T.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${p}px !important;
          }
        `),()=>{T.contains(y)&&T.removeChild(y)}},[e]),i.jsx(fY,{isPresent:e,childRef:o,sizeRef:a,children:k.cloneElement(t,{ref:c})})}const pY=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:a,anchorX:l,root:c})=>{const u=Fg(mY),f=k.useId();let p=!0,m=k.useMemo(()=>(p=!1,{id:f,initial:e,isPresent:n,custom:s,onExitComplete:g=>{u.set(g,!0);for(const w of u.values())if(!w)return;r&&r()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[n,u,r]);return o&&p&&(m={...m}),k.useMemo(()=>{u.forEach((g,w)=>u.set(w,!1))},[n]),k.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),a==="popLayout"&&(t=i.jsx(hY,{isPresent:n,anchorX:l,root:c,children:t})),i.jsx(Ub.Provider,{value:m,children:t})};function mY(){return new Map}function n6(t=!0){const e=k.useContext(Ub);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=k.useId();k.useEffect(()=>{if(t)return s(o)},[t]);const a=k.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,a]:[!0]}const wx=t=>t.key||"";function MP(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const Jl=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[u,f]=n6(a),p=k.useMemo(()=>MP(t),[t]),m=a&&!u?[]:p.map(wx),g=k.useRef(!0),w=k.useRef(p),y=Fg(()=>new Map),[T,j]=k.useState(p),[_,v]=k.useState(p);$N(()=>{g.current=!1,w.current=p;for(let $=0;$<_.length;$++){const U=wx(_[$]);m.includes(U)?y.delete(U):y.get(U)!==!0&&y.set(U,!1)}},[_,m.length,m.join("-")]);const P=[];if(p!==T){let $=[...p];for(let U=0;U<_.length;U++){const K=_[U],Y=wx(K);m.includes(Y)||($.splice(U,0,K),P.push(K))}return o==="wait"&&P.length&&($=P),v(MP($)),j(p),null}const{forceRender:D}=k.useContext(FN);return i.jsx(i.Fragment,{children:_.map($=>{const U=wx($),K=a&&!u?!1:p===_||m.includes(U),Y=()=>{if(y.has(U))y.set(U,!0);else return;let G=!0;y.forEach(X=>{X||(G=!1)}),G&&(D==null||D(),v(w.current),a&&(f==null||f()),r&&r())};return i.jsx(pY,{isPresent:K,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:c,onExitComplete:K?void 0:Y,anchorX:l,children:$},U)})})},r6=k.createContext({strict:!1}),DP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vh={};for(const t in DP)vh[t]={isEnabled:e=>DP[t].some(n=>!!e[n])};function gY(t){for(const e in t)vh[e]={...vh[e],...t[e]}}const yY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function G0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||yY.has(t)}let s6=t=>!G0(t);function xY(t){typeof t=="function"&&(s6=e=>e.startsWith("on")?!G0(e):t(e))}try{xY(require("@emotion/is-prop-valid").default)}catch{}function bY(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(s6(s)||n===!0&&G0(s)||!e&&!G0(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Wb=k.createContext({});function Hb(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Zm(t){return typeof t=="string"||Array.isArray(t)}const cj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uj=["initial",...cj];function Gb(t){return Hb(t.animate)||uj.some(e=>Zm(t[e]))}function i6(t){return!!(Gb(t)||t.variants)}function vY(t,e){if(Gb(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Zm(n)?n:void 0,animate:Zm(r)?r:void 0}}return t.inherit!==!1?e:{}}function wY(t){const{initial:e,animate:n}=vY(t,k.useContext(Wb));return k.useMemo(()=>({initial:e,animate:n}),[OP(e),OP(n)])}function OP(t){return Array.isArray(t)?t.join(" "):t}const eg={};function kY(t){for(const e in t)eg[e]=t[e],GN(e)&&(eg[e].isCSSVariable=!0)}function o6(t,{layout:e,layoutId:n}){return Bh.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!eg[t]||t==="opacity")}const TY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NY=$h.length;function jY(t,e,n){let r="",s=!0;for(let o=0;o<NY;o++){const a=$h[o],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=J3(l,ij[a]);if(!c){s=!1;const f=TY[a]||a;r+=`${f}(${u}) `}n&&(e[a]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function dj(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let a=!1,l=!1;for(const c in e){const u=e[c];if(Bh.has(c)){a=!0;continue}else if(GN(c)){s[c]=u;continue}else{const f=J3(u,ij[c]);c.startsWith("origin")?(l=!0,o[c]=f):r[c]=f}}if(e.transform||(a||n?r.transform=jY(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:f=0}=o;r.transformOrigin=`${c} ${u} ${f}`}}const fj=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function a6(t,e,n){for(const r in e)!is(e[r])&&!o6(r,n)&&(t[r]=e[r])}function CY({transformTemplate:t},e){return k.useMemo(()=>{const n=fj();return dj(n,e,t),Object.assign({},n.vars,n.style)},[e])}function SY(t,e){const n=t.style||{},r={};return a6(r,n,t),Object.assign(r,CY(t,e)),r}function EY(t,e){const n={},r=SY(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const _Y={offset:"stroke-dashoffset",array:"stroke-dasharray"},AY={offset:"strokeDashoffset",array:"strokeDasharray"};function PY(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?_Y:AY;t[o.offset]=Wt.transform(-r);const a=Wt.transform(e),l=Wt.transform(n);t[o.array]=`${a} ${l}`}function l6(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:a=0,...l},c,u,f){if(dj(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),s!==void 0&&PY(p,s,o,a,!1)}const c6=()=>({...fj(),attrs:{}}),u6=t=>typeof t=="string"&&t.toLowerCase()==="svg";function RY(t,e,n,r){const s=k.useMemo(()=>{const o=c6();return l6(o,e,u6(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};a6(o,t.style,t),s.style={...o,...s.style}}return s}const IY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hj(t){return typeof t!="string"||t.includes("-")?!1:!!(IY.indexOf(t)>-1||/[A-Z]/u.test(t))}function MY(t,e,n,{latestValues:r},s,o=!1){const l=(hj(t)?RY:EY)(e,r,s,t),c=bY(e,typeof t=="string",o),u=t!==k.Fragment?{...c,...l,ref:n}:{},{children:f}=e,p=k.useMemo(()=>is(f)?f.get():f,[f]);return k.createElement(t,{...u,children:p})}function LP(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function pj(t,e,n,r){if(typeof e=="function"){const[s,o]=LP(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=LP(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function x0(t){return is(t)?t.get():t}function DY({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:OY(n,r,s,t),renderState:e()}}function OY(t,e,n,r){const s={},o=r(t,{});for(const m in o)s[m]=x0(o[m]);let{initial:a,animate:l}=t;const c=Gb(t),u=i6(t);e&&u&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let f=n?n.initial===!1:!1;f=f||a===!1;const p=f?l:a;if(p&&typeof p!="boolean"&&!Hb(p)){const m=Array.isArray(p)?p:[p];for(let g=0;g<m.length;g++){const w=pj(t,m[g]);if(w){const{transitionEnd:y,transition:T,...j}=w;for(const _ in j){let v=j[_];if(Array.isArray(v)){const P=f?v.length-1:0;v=v[P]}v!==null&&(s[_]=v)}for(const _ in y)s[_]=y[_]}}}return s}const d6=t=>(e,n)=>{const r=k.useContext(Wb),s=k.useContext(Ub),o=()=>DY(t,e,r,s);return n?o():Fg(o)};function mj(t,e,n){var o;const{style:r}=t,s={};for(const a in r)(is(r[a])||e.style&&is(e.style[a])||o6(a,t)||((o=n==null?void 0:n.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(s[a]=r[a]);return s}const LY=d6({scrapeMotionValuesFromProps:mj,createRenderState:fj});function f6(t,e,n){const r=mj(t,e,n);for(const s in t)if(is(t[s])||is(e[s])){const o=$h.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const FY=d6({scrapeMotionValuesFromProps:f6,createRenderState:c6}),zY=Symbol.for("motionComponentSymbol");function Wf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $Y(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Wf(n)&&(n.current=r))},[e])}const gj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BY="framerAppearId",h6="data-"+gj(BY),p6=k.createContext({});function UY(t,e,n,r,s){var y,T;const{visualElement:o}=k.useContext(Wb),a=k.useContext(r6),l=k.useContext(Ub),c=k.useContext(qb).reducedMotion,u=k.useRef(null);r=r||a.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const f=u.current,p=k.useContext(p6);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&VY(u.current,n,s,p);const m=k.useRef(!1);k.useInsertionEffect(()=>{f&&m.current&&f.update(n,l)});const g=n[h6],w=k.useRef(!!g&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,g))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,g)));return $N(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),w.current&&f.animationState&&f.animationState.animateChanges())}),k.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,g)}),w.current=!1),f.enteringChildren=void 0)}),f}function VY(t,e,n,r){const{layoutId:s,layout:o,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:m6(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!a||l&&Wf(l),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function m6(t){if(t)return t.options.allowProjection!==!1?t.projection:m6(t.parent)}function K1(t,{forwardMotionProps:e=!1}={},n,r){n&&gY(n);const s=hj(t)?FY:LY;function o(l,c){let u;const f={...k.useContext(qb),...l,layoutId:qY(l)},{isStatic:p}=f,m=wY(l),g=s(l,p);if(!p&&zN){WY();const w=HY(f);u=w.MeasureLayout,m.visualElement=UY(t,g,f,r,w.ProjectionNode)}return i.jsxs(Wb.Provider,{value:m,children:[u&&m.visualElement?i.jsx(u,{visualElement:m.visualElement,...f}):null,MY(t,l,$Y(g,m.visualElement,c),g,p,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=k.forwardRef(o);return a[zY]=t,a}function qY({layoutId:t}){const e=k.useContext(FN).id;return e&&t!==void 0?e+"-"+t:t}function WY(t,e){k.useContext(r6).strict}function HY(t){const{drag:e,layout:n}=vh;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function GY(t,e){if(typeof Proxy>"u")return K1;const n=new Map,r=(o,a)=>K1(o,a,t,e),s=(o,a)=>r(o,a);return new Proxy(s,{get:(o,a)=>a==="create"?r:(n.has(a)||n.set(a,K1(a,void 0,t,e)),n.get(a))})}function g6({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function KY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function YY(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Y1(t){return t===void 0||t===1}function OT({scale:t,scaleX:e,scaleY:n}){return!Y1(t)||!Y1(e)||!Y1(n)}function Uu(t){return OT(t)||y6(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function y6(t){return FP(t.x)||FP(t.y)}function FP(t){return t&&t!=="0%"}function K0(t,e,n){const r=t-n,s=e*r;return n+s}function zP(t,e,n,r,s){return s!==void 0&&(t=K0(t,s,r)),K0(t,n,r)+e}function LT(t,e=0,n=1,r,s){t.min=zP(t.min,e,n,r,s),t.max=zP(t.max,e,n,r,s)}function x6(t,{x:e,y:n}){LT(t.x,e.translate,e.scale,e.originPoint),LT(t.y,n.translate,n.scale,n.originPoint)}const $P=.999999999999,BP=1.0000000000001;function JY(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,a;for(let l=0;l<s;l++){o=n[l],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Gf(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,x6(t,a)),r&&Uu(o.latestValues)&&Gf(t,o.latestValues))}e.x<BP&&e.x>$P&&(e.x=1),e.y<BP&&e.y>$P&&(e.y=1)}function Hf(t,e){t.min=t.min+e,t.max=t.max+e}function UP(t,e,n,r,s=.5){const o=or(t.min,t.max,s);LT(t,e,n,o,r)}function Gf(t,e){UP(t.x,e.x,e.scaleX,e.scale,e.originX),UP(t.y,e.y,e.scaleY,e.scale,e.originY)}function b6(t,e){return g6(YY(t.getBoundingClientRect(),e))}function XY(t,e,n){const r=b6(t,n),{scroll:s}=e;return s&&(Hf(r.x,s.offset.x),Hf(r.y,s.offset.y)),r}const VP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Kf=()=>({x:VP(),y:VP()}),qP=()=>({min:0,max:0}),vr=()=>({x:qP(),y:qP()}),FT={current:null},v6={current:!1};function QY(){if(v6.current=!0,!!zN)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>FT.current=t.matches;t.addEventListener("change",e),e()}else FT.current=!1}const tg=new WeakMap;function ZY(t,e,n){for(const r in e){const s=e[r],o=n[r];if(is(s))t.addValue(r,s);else if(is(o))t.addValue(r,vd(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,vd(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const WP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class w6{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ci.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Zn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=Gb(n),this.isVariantNode=i6(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const g=p[m];c[m]!==void 0&&is(g)&&g.set(c[m])}}mount(e){var n;this.current=e,tg.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),v6.current||QY(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:FT.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Yl(this.notifyUpdate),Yl(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Bh.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Zn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vh){const n=vh[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):vr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<WP.length;r++){const s=WP[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,a=e[o];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=ZY(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=vd(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(o3(r)||l3(r))?r=parseFloat(r):!cY(r)&&Xc.test(n)&&(r=K3(e,n)),this.setBaseTarget(e,is(r)?r.get():r)),is(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=pj(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!is(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new qN),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){oj.render(this.render)}}class k6 extends w6{constructor(){super(...arguments),this.KeyframeResolver=QK}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;is(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function T6(t,{style:e,vars:n},r,s){const o=t.style;let a;for(a in e)o[a]=e[a];s==null||s.applyProjectionStyles(o,r);for(a in n)o.setProperty(a,n[a])}function eJ(t){return window.getComputedStyle(t)}class N6 extends k6{constructor(){super(...arguments),this.type="html",this.renderInstance=T6}readValueFromInstance(e,n){var r;if(Bh.has(n))return(r=this.projection)!=null&&r.isProjecting?_T(n):mK(e,n);{const s=eJ(e),o=(GN(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return b6(e,n)}build(e,n,r){dj(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return mj(e,n,r)}}const j6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function tJ(t,e,n,r){T6(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(j6.has(s)?s:gj(s),e.attrs[s])}class C6 extends k6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=vr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Bh.has(n)){const r=G3(n);return r&&r.default||0}return n=j6.has(n)?n:gj(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return f6(e,n,r)}build(e,n,r){l6(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){tJ(e,n,r,s)}mount(e){this.isSVGTag=u6(e.tagName),super.mount(e)}}const nJ=(t,e)=>hj(t)?new C6(e):new N6(e,{allowProjection:t!==k.Fragment});function eh(t,e,n){const r=t.getProps();return pj(r,e,n!==void 0?n:r.custom,t)}const zT=t=>Array.isArray(t);function rJ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,vd(n))}function sJ(t){return zT(t)?t[t.length-1]||0:t}function iJ(t,e){const n=eh(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const a in o){const l=sJ(o[a]);rJ(t,a,l)}}function oJ(t){return!!(is(t)&&t.add)}function $T(t,e){const n=t.getValue("willChange");if(oJ(n))return n.add(e);if(!n&&Kl.WillChange){const r=new Kl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function S6(t){return t.props[h6]}const aJ=t=>t!==null;function lJ(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(aJ),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const cJ={type:"spring",stiffness:500,damping:25,restSpeed:10},uJ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),dJ={type:"keyframes",duration:.8},fJ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hJ=(t,{keyframes:e})=>e.length>2?dJ:Bh.has(t)?t.startsWith("scale")?uJ(e[1]):cJ:fJ;function pJ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const yj=(t,e,n,r={},s,o)=>a=>{const l=sj(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Na(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:o?void 0:s};pJ(l)||Object.assign(f,hJ(t,f)),f.duration&&(f.duration=Na(f.duration)),f.repeatDelay&&(f.repeatDelay=Na(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(MT(f),f.delay===0&&(p=!0)),(Kl.instantAnimations||Kl.skipAnimations)&&(p=!0,MT(f),f.delay=0),f.allowFlatten=!l.type&&!l.ease,p&&!o&&e.get()!==void 0){const m=lJ(f.keyframes,l);if(m!==void 0){Zn.update(()=>{f.onUpdate(m),f.onComplete()});return}}return l.isSync?new tj(f):new FK(f)};function mJ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function xj(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const f in l){const p=t.getValue(f,t.latestValues[f]??null),m=l[f];if(m===void 0||u&&mJ(u,f))continue;const g={delay:n,...sj(o||{},f)},w=p.get();if(w!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===w&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const j=S6(t);if(j){const _=window.MotionHandoffAnimation(j,f,Zn);_!==null&&(g.startTime=_,y=!0)}}$T(t,f),p.start(yj(f,p,m,t.shouldReduceMotion&&q3.has(f)?{type:!1}:g,t,y));const T=p.animation;T&&c.push(T)}return a&&Promise.all(c).then(()=>{Zn.update(()=>{a&&iJ(t,a)})}),c}function E6(t,e,n,r=0,s=1){const o=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),a=t.size,l=(a-1)*r;return typeof n=="function"?n(o,a):s===1?o*r:l-o*r}function BT(t,e,n={}){var c;const r=eh(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(xj(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:m}=s;return gJ(t,e,u,f,p,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,f]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function gJ(t,e,n=0,r=0,s=0,o=1,a){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(BT(c,e,{...a,delay:n+(typeof r=="function"?0:r)+E6(t.variantChildren,c,r,s,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function yJ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>BT(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=BT(t,e,n);else{const s=typeof e=="function"?eh(t,e,n.custom):e;r=Promise.all(xj(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function _6(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const xJ=uj.length;function A6(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?A6(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<xJ;n++){const r=uj[n],s=t.props[r];(Zm(s)||s===!1)&&(e[r]=s)}return e}const bJ=[...cj].reverse(),vJ=cj.length;function wJ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>yJ(t,n,r)))}function kJ(t){let e=wJ(t),n=HP(),r=!0;const s=c=>(u,f)=>{var m;const p=eh(t,f,c==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(p){const{transition:g,transitionEnd:w,...y}=p;u={...u,...y,...w}}return u};function o(c){e=c(t)}function a(c){const{props:u}=t,f=A6(t.parent)||{},p=[],m=new Set;let g={},w=1/0;for(let T=0;T<vJ;T++){const j=bJ[T],_=n[j],v=u[j]!==void 0?u[j]:f[j],P=Zm(v),D=j===c?_.isActive:null;D===!1&&(w=T);let $=v===f[j]&&v!==u[j]&&P;if($&&r&&t.manuallyAnimateOnMount&&($=!1),_.protectedKeys={...g},!_.isActive&&D===null||!v&&!_.prevProp||Hb(v)||typeof v=="boolean")continue;const U=TJ(_.prevProp,v);let K=U||j===c&&_.isActive&&!$&&P||T>w&&P,Y=!1;const G=Array.isArray(v)?v:[v];let X=G.reduce(s(j),{});D===!1&&(X={});const{prevResolvedValues:V={}}=_,A={...V,...X},x=z=>{K=!0,m.has(z)&&(Y=!0,m.delete(z)),_.needsAnimating[z]=!0;const R=t.getValue(z);R&&(R.liveStyle=!1)};for(const z in A){const R=X[z],I=V[z];if(g.hasOwnProperty(z))continue;let N=!1;zT(R)&&zT(I)?N=!_6(R,I):N=R!==I,N?R!=null?x(z):m.add(z):R!==void 0&&m.has(z)?x(z):_.protectedKeys[z]=!0}_.prevProp=v,_.prevResolvedValues=X,_.isActive&&(g={...g,...X}),r&&t.blockInitialAnimation&&(K=!1);const C=$&&U;K&&(!C||Y)&&p.push(...G.map(z=>{const R={type:j};if(typeof z=="string"&&r&&!C&&t.manuallyAnimateOnMount&&t.parent){const{parent:I}=t,N=eh(I,z);if(I.enteringChildren&&N){const{delayChildren:F}=N.transition||{};R.delay=E6(I.enteringChildren,t,F)}}return{animation:z,options:R}}))}if(m.size){const T={};if(typeof u.initial!="boolean"){const j=eh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);j&&j.transition&&(T.transition=j.transition)}m.forEach(j=>{const _=t.getBaseTarget(j),v=t.getValue(j);v&&(v.liveStyle=!0),T[j]=_??null}),p.push({animation:T})}let y=!!p.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(p):Promise.resolve()}function l(c,u){var p;if(n[c].isActive===u)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(c,u)}),n[c].isActive=u;const f=a(c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>n,reset:()=>{n=HP(),r=!0}}}function TJ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_6(e,t):!1}function Mu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function HP(){return{animate:Mu(!0),whileInView:Mu(),whileHover:Mu(),whileTap:Mu(),whileDrag:Mu(),whileFocus:Mu(),exit:Mu()}}class ou{constructor(e){this.isMounted=!1,this.node=e}update(){}}class NJ extends ou{constructor(e){super(e),e.animationState||(e.animationState=kJ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Hb(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let jJ=0;class CJ extends ou{constructor(){super(...arguments),this.id=jJ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const SJ={animation:{Feature:NJ},exit:{Feature:CJ}};function ng(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ug(t){return{point:{x:t.pageX,y:t.pageY}}}const EJ=t=>e=>aj(e)&&t(e,Ug(e));function ym(t,e,n,r){return ng(t,e,EJ(n),r)}const P6=1e-4,_J=1-P6,AJ=1+P6,R6=.01,PJ=0-R6,RJ=0+R6;function ai(t){return t.max-t.min}function IJ(t,e,n){return Math.abs(t-e)<=n}function GP(t,e,n,r=.5){t.origin=r,t.originPoint=or(e.min,e.max,t.origin),t.scale=ai(n)/ai(e),t.translate=or(n.min,n.max,t.origin)-t.originPoint,(t.scale>=_J&&t.scale<=AJ||isNaN(t.scale))&&(t.scale=1),(t.translate>=PJ&&t.translate<=RJ||isNaN(t.translate))&&(t.translate=0)}function xm(t,e,n,r){GP(t.x,e.x,n.x,r?r.originX:void 0),GP(t.y,e.y,n.y,r?r.originY:void 0)}function KP(t,e,n){t.min=n.min+e.min,t.max=t.min+ai(e)}function MJ(t,e,n){KP(t.x,e.x,n.x),KP(t.y,e.y,n.y)}function YP(t,e,n){t.min=e.min-n.min,t.max=t.min+ai(e)}function bm(t,e,n){YP(t.x,e.x,n.x),YP(t.y,e.y,n.y)}function Ao(t){return[t("x"),t("y")]}const I6=({current:t})=>t?t.ownerDocument.defaultView:null,JP=(t,e)=>Math.abs(t-e);function DJ(t,e){const n=JP(t.x,e.x),r=JP(t.y,e.y);return Math.sqrt(n**2+r**2)}class M6{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=X1(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,w=DJ(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!w)return;const{point:y}=m,{timestamp:T}=ms;this.history.push({...y,timestamp:T});const{onStart:j,onMove:_}=this.handlers;g||(j&&j(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=J1(g,this.transformPagePoint),Zn.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:w,onSessionEnd:y,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=X1(m.type==="pointercancel"?this.lastMoveEventInfo:J1(g,this.transformPagePoint),this.history);this.startEvent&&w&&w(m,j),y&&y(m,j)},!aj(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const l=Ug(e),c=J1(l,this.transformPagePoint),{point:u}=c,{timestamp:f}=ms;this.history=[{...u,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,X1(c,this.history)),this.removeListeners=zg(ym(this.contextWindow,"pointermove",this.handlePointerMove),ym(this.contextWindow,"pointerup",this.handlePointerUp),ym(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Yl(this.updatePoint)}}function J1(t,e){return e?{point:e(t.point)}:t}function XP(t,e){return{x:t.x-e.x,y:t.y-e.y}}function X1({point:t},e){return{point:t,delta:XP(t,D6(e)),offset:XP(t,OJ(e)),velocity:LJ(e,.1)}}function OJ(t){return t[0]}function D6(t){return t[t.length-1]}function LJ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=D6(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Na(e)));)n--;if(!r)return{x:0,y:0};const o=Oo(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function FJ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?or(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?or(n,t,r.max):Math.min(t,n)),t}function QP(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function zJ(t,{top:e,left:n,bottom:r,right:s}){return{x:QP(t.x,n,s),y:QP(t.y,e,r)}}function ZP(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function $J(t,e){return{x:ZP(t.x,e.x),y:ZP(t.y,e.y)}}function BJ(t,e){let n=.5;const r=ai(t),s=ai(e);return s>r?n=bh(e.min,e.max-r,t.min):r>s&&(n=bh(t.min,t.max-s,e.min)),Gl(0,1,n)}function UJ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const UT=.35;function VJ(t=UT){return t===!1?t=0:t===!0&&(t=UT),{x:eR(t,"left","right"),y:eR(t,"top","bottom")}}function eR(t,e,n){return{min:tR(t,e),max:tR(t,n)}}function tR(t,e){return typeof t=="number"?t:t[e]||0}const qJ=new WeakMap;class WJ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=vr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ug(p).point)},a=(p,m)=>{const{drag:g,dragPropagation:w,onDragStart:y}=this.getProps();if(g&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tY(g),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ao(j=>{let _=this.getAxisMotionValue(j).get()||0;if(ol.test(_)){const{projection:v}=this.visualElement;if(v&&v.layout){const P=v.layout.layoutBox[j];P&&(_=ai(P)*(parseFloat(_)/100))}}this.originPoint[j]=_}),y&&Zn.postRender(()=>y(p,m)),$T(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:w,onDirectionLock:y,onDrag:T}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:j}=m;if(w&&this.currentDirection===null){this.currentDirection=HJ(j),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",m.point,j),this.updateAxis("y",m.point,j),this.visualElement.render(),T&&T(p,m)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ao(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)==null?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new M6(e,{onSessionStart:o,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:I6(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&Zn.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!kx(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=FJ(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&Wf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=zJ(r.layoutBox,e):this.constraints=!1,this.elastic=VJ(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ao(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=UJ(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Wf(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=XY(r,s.root,this.visualElement.getTransformPagePoint());let a=$J(s.layout.layoutBox,o);if(n){const l=n(KY(a));this.hasMutatedConstraints=!!l,l&&(a=g6(l))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Ao(f=>{if(!kx(f,n,this.currentDirection))return;let p=c&&c[f]||{};a&&(p={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,w={type:"inertia",velocity:r?e[f]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(f,w)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return $T(this.visualElement,e),r.start(yj(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ao(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ao(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ao(n=>{const{drag:r}=this.getProps();if(!kx(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];o.set(e[n]-or(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Wf(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ao(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=BJ({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ao(a=>{if(!kx(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(or(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;qJ.set(this.visualElement,this);const e=this.visualElement.current,n=ym(e,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Wf(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Zn.read(r);const a=ng(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ao(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=c[f].translate,p.set(p.get()+c[f].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=UT,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function kx(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function HJ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class GJ extends ou{constructor(e){super(e),this.removeGroupControls=Uo,this.removeListeners=Uo,this.controls=new WJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Uo}unmount(){this.removeGroupControls(),this.removeListeners()}}const nR=t=>(e,n)=>{t&&Zn.postRender(()=>t(e,n))};class KJ extends ou{constructor(){super(...arguments),this.removePointerDownListener=Uo}onPointerDown(e){this.session=new M6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:I6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:nR(e),onStart:nR(n),onMove:r,onEnd:(o,a)=>{delete this.session,s&&Zn.postRender(()=>s(o,a))}}}mount(){this.removePointerDownListener=ym(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const b0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Op={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Wt.test(t))t=parseFloat(t);else return t;const n=rR(t,e.target.x),r=rR(t,e.target.y);return`${n}% ${r}%`}},YJ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Xc.parse(t);if(s.length>5)return r;const o=Xc.createTransformer(t),a=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;s[0+a]/=l,s[1+a]/=c;const u=or(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),o(s)}};let Q1=!1;class JJ extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;kY(XJ),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),Q1&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),b0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:a}=r;return a&&(a.isPresent=o,Q1=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Zn.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),oj.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;Q1=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function O6(t){const[e,n]=n6(),r=k.useContext(FN);return i.jsx(JJ,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(p6),isPresent:e,safeToRemove:n})}const XJ={borderRadius:{...Op,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Op,borderTopRightRadius:Op,borderBottomLeftRadius:Op,borderBottomRightRadius:Op,boxShadow:YJ};function L6(t,e,n){const r=is(t)?t:vd(t);return r.start(yj("",r,e,n)),r.animation}const QJ=(t,e)=>t.depth-e.depth;class ZJ{constructor(){this.children=[],this.isDirty=!1}add(e){BN(this.children,e),this.isDirty=!0}remove(e){Vb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(QJ),this.isDirty=!1,this.children.forEach(e)}}function eX(t,e){const n=Ci.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Yl(r),t(o-e))};return Zn.setup(r,!0),()=>Yl(r)}const F6=["TopLeft","TopRight","BottomLeft","BottomRight"],tX=F6.length,sR=t=>typeof t=="string"?parseFloat(t):t,iR=t=>typeof t=="number"||Wt.test(t);function nX(t,e,n,r,s,o){s?(t.opacity=or(0,n.opacity??1,rX(r)),t.opacityExit=or(e.opacity??1,0,sX(r))):o&&(t.opacity=or(e.opacity??1,n.opacity??1,r));for(let a=0;a<tX;a++){const l=`border${F6[a]}Radius`;let c=oR(e,l),u=oR(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||iR(c)===iR(u)?(t[l]=Math.max(or(sR(c),sR(u),r),0),(ol.test(u)||ol.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=or(e.rotate||0,n.rotate||0,r))}function oR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const rX=z6(0,.5,g3),sX=z6(.5,.95,Uo);function z6(t,e,n){return r=>r<t?0:r>e?1:n(bh(t,e,r))}function aR(t,e){t.min=e.min,t.max=e.max}function Eo(t,e){aR(t.x,e.x),aR(t.y,e.y)}function lR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function cR(t,e,n,r,s){return t-=e,t=K0(t,1/n,r),s!==void 0&&(t=K0(t,1/s,r)),t}function iX(t,e=0,n=1,r=.5,s,o=t,a=t){if(ol.test(e)&&(e=parseFloat(e),e=or(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=or(o.min,o.max,r);t===o&&(l-=e),t.min=cR(t.min,e,n,l,s),t.max=cR(t.max,e,n,l,s)}function uR(t,e,[n,r,s],o,a){iX(t,e[n],e[r],e[s],e.scale,o,a)}const oX=["x","scaleX","originX"],aX=["y","scaleY","originY"];function dR(t,e,n,r){uR(t.x,e,oX,n?n.x:void 0,r?r.x:void 0),uR(t.y,e,aX,n?n.y:void 0,r?r.y:void 0)}function fR(t){return t.translate===0&&t.scale===1}function $6(t){return fR(t.x)&&fR(t.y)}function hR(t,e){return t.min===e.min&&t.max===e.max}function lX(t,e){return hR(t.x,e.x)&&hR(t.y,e.y)}function pR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function B6(t,e){return pR(t.x,e.x)&&pR(t.y,e.y)}function mR(t){return ai(t.x)/ai(t.y)}function gR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class cX{constructor(){this.members=[]}add(e){BN(this.members,e),e.scheduleRender()}remove(e){if(Vb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uX(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||o||a)&&(r=`translate3d(${s}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:p,rotateY:m,skewX:g,skewY:w}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),w&&(r+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Z1=["","X","Y","Z"],dX=1e3;let fX=0;function ek(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function U6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=S6(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Zn,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&U6(r)}function V6({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=e==null?void 0:e()){this.id=fX++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(mX),this.nodes.forEach(bX),this.nodes.forEach(vX),this.nodes.forEach(gX)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZJ)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new qN),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=lj(a)&&!t6(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let f,p=0;const m=()=>this.root.updateBlockedByResize=!1;Zn.read(()=>{p=window.innerWidth}),t(a,()=>{const g=window.innerWidth;g!==p&&(p=g,this.root.updateBlockedByResize=!0,f&&f(),f=eX(m,250),b0.hasAnimatedSinceResize&&(b0.hasAnimatedSinceResize=!1,this.nodes.forEach(bR)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||jX,{onLayoutAnimationStart:y,onLayoutAnimationComplete:T}=u.getProps(),j=!this.targetLayout||!B6(this.targetLayout,g),_=!p&&m;if(this.options.layoutRoot||this.resumeFrom||_||p&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...sj(w,"layout"),onPlay:y,onComplete:T};(u.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(f,_)}else p||bR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Yl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wX),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&U6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(xX),this.nodes.forEach(hX),this.nodes.forEach(pX)):this.nodes.forEach(xR),this.clearAllSnapshots();const l=Ci.now();ms.delta=Gl(0,1e3/60,l-ms.timestamp),ms.timestamp=l,ms.isProcessing=!0,U1.update.process(ms),U1.preRender.process(ms),U1.render.process(ms),ms.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,oj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yX),this.sharedNodes.forEach(kX)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ai(this.snapshot.measuredBox.x)&&!ai(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=vr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!$6(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||Uu(this.latestValues)||f)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),CX(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return vr();const l=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(SX))){const{scroll:f}=this.root;f&&(Hf(l.x,f.offset.x),Hf(l.y,f.offset.y))}return l}removeElementScroll(a){var c;const l=vr();if(Eo(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:p,options:m}=f;f!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&Eo(l,a),Hf(l.x,p.offset.x),Hf(l.y,p.offset.y))}return l}applyTransform(a,l=!1){const c=vr();Eo(c,a);for(let u=0;u<this.path.length;u++){const f=this.path[u];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Gf(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Uu(f.latestValues)&&Gf(c,f.latestValues)}return Uu(this.latestValues)&&Gf(c,this.latestValues),c}removeTransform(a){const l=vr();Eo(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Uu(u.latestValues))continue;OT(u.latestValues)&&u.updateSnapshot();const f=vr(),p=u.measurePageBox();Eo(f,p),dR(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Uu(this.latestValues)&&dR(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ms.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=ms.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vr(),this.relativeTargetOrigin=vr(),bm(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Eo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=vr(),this.targetWithTransforms=vr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Eo(this.target,this.layout.layoutBox),x6(this.target,this.targetDelta)):Eo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vr(),this.relativeTargetOrigin=vr(),bm(this.relativeTargetOrigin,this.target,g.target),Eo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||OT(this.parent.latestValues)||y6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ms.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Eo(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;JY(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=vr());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lR(this.prevProjectionDelta.x,this.projectionDelta.x),lR(this.prevProjectionDelta.y,this.projectionDelta.y)),xm(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!gR(this.projectionDelta.x,this.prevProjectionDelta.x)||!gR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Kf(),this.projectionDelta=Kf(),this.projectionDeltaWithTransform=Kf()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},p=Kf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=vr(),g=c?c.source:void 0,w=this.layout?this.layout.source:void 0,y=g!==w,T=this.getStack(),j=!T||T.members.length<=1,_=!!(y&&!j&&this.options.crossfade===!0&&!this.path.some(NX));this.animationProgress=0;let v;this.mixTargetDelta=P=>{const D=P/1e3;vR(p.x,a.x,D),vR(p.y,a.y,D),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bm(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),TX(this.relativeTarget,this.relativeTargetOrigin,m,D),v&&lX(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=vr()),Eo(v,this.relativeTarget)),y&&(this.animationValues=f,nX(f,u,this.latestValues,D,_,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Yl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zn.update(()=>{b0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vd(0)),this.currentAnimation=L6(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),a.onUpdate&&a.onUpdate(f)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(dX),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:f}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&q6(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||vr();const p=ai(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+p;const m=ai(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}Eo(l,c),Gf(l,f),xm(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new cX),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&ek("z",a,u,this.animationValues);for(let f=0;f<Z1.length;f++)ek(`rotate${Z1[f]}`,a,u,this.animationValues),ek(`skew${Z1[f]}`,a,u,this.animationValues);a.render();for(const f in u)a.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=x0(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=x0(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Uu(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let p=uX(this.projectionDeltaWithTransform,this.treeScale,f);c&&(p=c(f,p)),a.transform=p;const{x:m,y:g}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,u.animationValues?a.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:a.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in eg){if(f[w]===void 0)continue;const{correct:y,applyTo:T,isCSSVariable:j}=eg[w],_=p==="none"?f[w]:y(f[w],u);if(T){const v=T.length;for(let P=0;P<v;P++)a[T[P]]=_}else j?this.options.visualElement.renderState.vars[w]=_:a[w]=_}this.options.layoutId&&(a.pointerEvents=u===this?x0(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(yR),this.root.sharedNodes.clear()}}}function hX(t){t.updateLayout()}function pX(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,a=e.source!==t.layout.source;o==="size"?Ao(p=>{const m=a?e.measuredBox[p]:e.layoutBox[p],g=ai(m);m.min=r[p].min,m.max=m.min+g}):q6(o,e.layoutBox,r)&&Ao(p=>{const m=a?e.measuredBox[p]:e.layoutBox[p],g=ai(r[p]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+g)});const l=Kf();xm(l,r,e.layoutBox);const c=Kf();a?xm(c,t.applyTransform(s,!0),e.measuredBox):xm(c,r,e.layoutBox);const u=!$6(l);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:g}=p;if(m&&g){const w=vr();bm(w,e.layoutBox,m.layoutBox);const y=vr();bm(y,r,g.layoutBox),B6(w,y)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=w,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function mX(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function gX(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function yX(t){t.clearSnapshot()}function yR(t){t.clearMeasurements()}function xR(t){t.isLayoutDirty=!1}function xX(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function bX(t){t.resolveTargetDelta()}function vX(t){t.calcProjection()}function wX(t){t.resetSkewAndRotation()}function kX(t){t.removeLeadSnapshot()}function vR(t,e,n){t.translate=or(e.translate,0,n),t.scale=or(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function wR(t,e,n,r){t.min=or(e.min,n.min,r),t.max=or(e.max,n.max,r)}function TX(t,e,n,r){wR(t.x,e.x,n.x,r),wR(t.y,e.y,n.y,r)}function NX(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jX={duration:.45,ease:[.4,0,.1,1]},kR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),TR=kR("applewebkit/")&&!kR("chrome/")?Math.round:Uo;function NR(t){t.min=TR(t.min),t.max=TR(t.max)}function CX(t){NR(t.x),NR(t.y)}function q6(t,e,n){return t==="position"||t==="preserve-aspect"&&!IJ(mR(e),mR(n),.2)}function SX(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const EX=V6({attachResizeListener:(t,e)=>ng(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tk={current:void 0},W6=V6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!tk.current){const t=new EX({});t.mount(window),t.setOptions({layoutScroll:!0}),tk.current=t}return tk.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),_X={pan:{Feature:KJ},drag:{Feature:GJ,ProjectionNode:W6,MeasureLayout:O6}};function jR(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&Zn.postRender(()=>o(e,Ug(e)))}class AX extends ou{mount(){const{current:e}=this.node;e&&(this.unmount=nY(e,(n,r)=>(jR(this.node,r,"Start"),s=>jR(this.node,s,"End"))))}unmount(){}}class PX extends ou{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zg(ng(this.node.current,"focus",()=>this.onFocus()),ng(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function CR(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&Zn.postRender(()=>o(e,Ug(e)))}class RX extends ou{mount(){const{current:e}=this.node;e&&(this.unmount=oY(e,(n,r)=>(CR(this.node,r,"Start"),(s,{success:o})=>CR(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const VT=new WeakMap,nk=new WeakMap,IX=t=>{const e=VT.get(t.target);e&&e(t)},MX=t=>{t.forEach(IX)};function DX({root:t,...e}){const n=t||document;nk.has(n)||nk.set(n,{});const r=nk.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(MX,{root:t,...e})),r[s]}function OX(t,e,n){const r=DX(e);return VT.set(t,n),r.observe(t),()=>{VT.delete(t),r.unobserve(t)}}const LX={some:0,all:1};class FX extends ou{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:LX[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),m=u?f:p;m&&m(c)};return OX(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zX(e,n))&&this.startObserver()}unmount(){}}function zX({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $X={inView:{Feature:FX},tap:{Feature:RX},focus:{Feature:PX},hover:{Feature:AX}},BX={layout:{ProjectionNode:W6,MeasureLayout:O6}},UX={...SJ,...$X,..._X,...BX},Be=GY(UX,nJ);function H6(t){const e=Fg(()=>vd(t)),{isStatic:n}=k.useContext(qb);if(n){const[,r]=k.useState(t);k.useEffect(()=>e.on("change",r),[])}return e}function G6(t,e){const n=H6(e()),r=()=>n.set(e());return r(),$N(()=>{const s=()=>Zn.preRender(r,!1,!0),o=t.map(a=>a.on("change",s));return()=>{o.forEach(a=>a()),Yl(r)}}),n}function VX(t){gm.current=[],t();const e=G6(gm.current,t);return gm.current=void 0,e}function qX(t,e,n,r){if(typeof t=="function")return VX(t);const s=typeof e=="function"?e:aY(e,n,r);return Array.isArray(t)?SR(t,s):SR([t],([o])=>s(o))}function SR(t,e){const n=Fg(()=>[]);return G6(t,()=>{n.length=0;const r=t.length;for(let s=0;s<r;s++)n[s]=t[s].get();return e(n)})}function bj(t){return typeof t=="object"&&!Array.isArray(t)}function K6(t,e,n,r){return typeof t=="string"&&bj(e)?Y3(t,n,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function WX(t,e,n){return t*(e+1)}function ER(t,e,n,r){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:e.startsWith("<")?Math.max(0,n+parseFloat(e.slice(1))):r.get(e)??t}function HX(t,e,n){for(let r=0;r<t.length;r++){const s=t[r];s.at>e&&s.at<n&&(Vb(t,s),r--)}}function GX(t,e,n,r,s,o){HX(t,s,o);for(let a=0;a<e.length;a++)t.push({value:e[a],at:or(s,o,r[a]),easing:v3(n,a)})}function KX(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function YX(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const JX="easeInOut";function XX(t,{defaultTransition:e={},...n}={},r,s){const o=e.duration||.3,a=new Map,l=new Map,c={},u=new Map;let f=0,p=0,m=0;for(let g=0;g<t.length;g++){const w=t[g];if(typeof w=="string"){u.set(w,p);continue}else if(!Array.isArray(w)){u.set(w.name,ER(p,w.at,f,u));continue}let[y,T,j={}]=w;j.at!==void 0&&(p=ER(p,j.at,f,u));let _=0;const v=(P,D,$,U=0,K=0)=>{const Y=QX(P),{delay:G=0,times:X=O3(Y),type:V="keyframes",repeat:A,repeatType:x,repeatDelay:C=0,...L}=D;let{ease:z=e.ease||"easeOut",duration:R}=D;const I=typeof G=="function"?G(U,K):G,N=Y.length,F=rj(V)?V:s==null?void 0:s[V||"keyframes"];if(N<=2&&F){let O=100;if(N===2&&tQ(Y)){const J=Y[1]-Y[0];O=Math.abs(J)}const q={...L};R!==void 0&&(q.duration=Na(R));const H=R3(q,O,F);z=H.ease,R=H.duration}R??(R=o);const E=p+I;X.length===1&&X[0]===0&&(X[1]=1);const M=X.length-Y.length;if(M>0&&D3(X,M),Y.length===1&&Y.unshift(null),A){R=WX(R,A);const O=[...Y],q=[...X];z=Array.isArray(z)?[...z]:[z];const H=[...z];for(let J=0;J<A;J++){Y.push(...O);for(let Q=0;Q<O.length;Q++)X.push(q[Q]+(J+1)),z.push(Q===0?"linear":v3(H,Q-1))}KX(X,A)}const ee=E+R;GX($,Y,z,X,E,ee),_=Math.max(I+R,_),m=Math.max(ee,m)};if(is(y)){const P=_R(y,l);v(T,j,AR("default",P))}else{const P=K6(y,T,r,c),D=P.length;for(let $=0;$<D;$++){T=T,j=j;const U=P[$],K=_R(U,l);for(const Y in T)v(T[Y],ZX(j,Y),AR(Y,K),$,D)}}f=p,p+=_}return l.forEach((g,w)=>{for(const y in g){const T=g[y];T.sort(YX);const j=[],_=[],v=[];for(let D=0;D<T.length;D++){const{at:$,value:U,easing:K}=T[D];j.push(U),_.push(bh(0,m,$)),v.push(K||"easeOut")}_[0]!==0&&(_.unshift(0),j.unshift(j[0]),v.unshift(JX)),_[_.length-1]!==1&&(_.push(1),j.push(null)),a.has(w)||a.set(w,{keyframes:{},transition:{}});const P=a.get(w);P.keyframes[y]=j,P.transition[y]={...e,duration:m,ease:v,times:_,...n}}}),a}function _R(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function AR(t,e){return e[t]||(e[t]=[]),e[t]}function QX(t){return Array.isArray(t)?t:[t]}function ZX(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const eQ=t=>typeof t=="number",tQ=t=>t.every(eQ);function nQ(t,e){return t in e}class rQ extends w6{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(nQ(n,e)){const r=e[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return vr()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function sQ(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=lj(t)&&!t6(t)?new C6(e):new N6(e);n.mount(t),tg.set(t,n)}function iQ(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new rQ(e);n.mount(t),tg.set(t,n)}function oQ(t,e){return is(t)||typeof t=="number"||typeof t=="string"&&!bj(e)}function Y6(t,e,n,r){const s=[];if(oQ(t,e))s.push(L6(t,bj(e)&&e.default||e,n&&(n.default||n)));else{const o=K6(t,e,r),a=o.length;for(let l=0;l<a;l++){const c=o[l],u=c instanceof Element?sQ:iQ;tg.has(c)||u(c);const f=tg.get(c),p={...n};"delay"in p&&typeof p.delay=="function"&&(p.delay=p.delay(l,a)),s.push(...xj(f,{...e,transition:p},{}))}}return s}function aQ(t,e,n){const r=[];return XX(t,e,n,{spring:Qm}).forEach(({keyframes:o,transition:a},l)=>{r.push(...Y6(l,o,a))}),r}function lQ(t){return Array.isArray(t)&&t.some(Array.isArray)}function cQ(t){function e(n,r,s){let o=[],a;if(lQ(n))o=aQ(n,r,t);else{const{onComplete:c,...u}=s||{};typeof c=="function"&&(a=c),o=Y6(n,r,u,t)}const l=new $K(o);return a&&l.finished.then(a),l}return e}const uQ=cQ();/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Qe=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:l="",children:c,...u},f)=>k.createElement("svg",{ref:f,...dQ,width:s,height:s,stroke:r,strokeWidth:a?Number(o)*24/Number(s):o,className:["lucide",`lucide-${fQ(t)}`,l].join(" "),...u},[...e.map(([p,m])=>k.createElement(p,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=Qe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Qe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=Qe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=Qe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=Qe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=Qe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=Qe("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=Qe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Qe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=Qe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Qe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=Qe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Qe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=Qe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=Qe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Qe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=Qe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=Qe("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=Qe("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Qe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=Qe("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=Qe("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=Qe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=Qe("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=Qe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Qe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=Qe("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=Qe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=Qe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=Qe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Qe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=Qe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Qe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=Qe("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=Qe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=Qe("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=Qe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=Qe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=Qe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=Qe("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=Qe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=Qe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=Qe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=Qe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=Qe("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=Qe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=Qe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=Qe("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=Qe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Qe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=Qe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=Qe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=Qe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=Qe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=Qe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Qe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=Qe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=Qe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=Qe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=Qe("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Qe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Qe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=Qe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Qe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=Qe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=Qe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Qe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=Qe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=Qe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=Qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=Qe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Qe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=Qe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=Qe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=Qe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=Qe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Qe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=Qe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=Qe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=Qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=Qe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=Qe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function WT(t,[e,n]){return Math.min(n,Math.max(e,t))}function nt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function PQ(t,e){const n=k.createContext(e),r=o=>{const{children:a,...l}=o,c=k.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(o){const a=k.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,s]}function Mi(t,e=[]){let n=[];function r(o,a){const l=k.createContext(a),c=n.length;n=[...n,a];const u=p=>{var j;const{scope:m,children:g,...w}=p,y=((j=m==null?void 0:m[t])==null?void 0:j[c])||l,T=k.useMemo(()=>w,Object.values(w));return i.jsx(y.Provider,{value:T,children:g})};u.displayName=o+"Provider";function f(p,m){var y;const g=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,w=k.useContext(g);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[u,f]}const s=()=>{const o=n.map(a=>k.createContext(a));return function(l){const c=(l==null?void 0:l[t])||o;return k.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,RQ(s,...e)]}function RQ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const p=c(o)[`__scope${u}`];return{...l,...p}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function FR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Yb(...t){return e=>{let n=!1;const r=t.map(s=>{const o=FR(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():FR(t[s],null)}}}}function un(...t){return k.useCallback(Yb(...t),t)}function kd(t){const e=IQ(t),n=k.forwardRef((r,s)=>{const{children:o,...a}=r,l=k.Children.toArray(o),c=l.find(DQ);if(c){const u=c.props.children,f=l.map(p=>p===c?k.Children.count(u)>1?k.Children.only(null):k.isValidElement(u)?u.props.children:null:p);return i.jsx(e,{...a,ref:s,children:k.isValidElement(u)?k.cloneElement(u,void 0,f):null})}return i.jsx(e,{...a,ref:s,children:o})});return n.displayName=`${t}.Slot`,n}var oD=kd("Slot");function IQ(t){const e=k.forwardRef((n,r)=>{const{children:s,...o}=n;if(k.isValidElement(s)){const a=LQ(s),l=OQ(o,s.props);return s.type!==k.Fragment&&(l.ref=r?Yb(r,a):a),k.cloneElement(s,l)}return k.Children.count(s)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var aD=Symbol("radix.slottable");function MQ(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=aD,e}function DQ(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===aD}function OQ(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}function LQ(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Jb(t){const e=t+"CollectionProvider",[n,r]=Mi(e),[s,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=y=>{const{scope:T,children:j}=y,_=Ae.useRef(null),v=Ae.useRef(new Map).current;return i.jsx(s,{scope:T,itemMap:v,collectionRef:_,children:j})};a.displayName=e;const l=t+"CollectionSlot",c=kd(l),u=Ae.forwardRef((y,T)=>{const{scope:j,children:_}=y,v=o(l,j),P=un(T,v.collectionRef);return i.jsx(c,{ref:P,children:_})});u.displayName=l;const f=t+"CollectionItemSlot",p="data-radix-collection-item",m=kd(f),g=Ae.forwardRef((y,T)=>{const{scope:j,children:_,...v}=y,P=Ae.useRef(null),D=un(T,P),$=o(f,j);return Ae.useEffect(()=>($.itemMap.set(P,{ref:P,...v}),()=>void $.itemMap.delete(P))),i.jsx(m,{[p]:"",ref:D,children:_})});g.displayName=f;function w(y){const T=o(t+"CollectionConsumer",y);return Ae.useCallback(()=>{const _=T.collectionRef.current;if(!_)return[];const v=Array.from(_.querySelectorAll(`[${p}]`));return Array.from(T.itemMap.values()).sort(($,U)=>v.indexOf($.ref.current)-v.indexOf(U.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},w,r]}var FQ=k.createContext(void 0);function Vh(t){const e=k.useContext(FQ);return t||e||"ltr"}var zQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pt=zQ.reduce((t,e)=>{const n=kd(`Primitive.${e}`),r=k.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function lD(t,e){t&&Ag.flushSync(()=>t.dispatchEvent(e))}function ys(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function $Q(t,e=globalThis==null?void 0:globalThis.document){const n=ys(t);k.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var BQ="DismissableLayer",HT="dismissableLayer.update",UQ="dismissableLayer.pointerDownOutside",VQ="dismissableLayer.focusOutside",zR,cD=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Hg=k.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=k.useContext(cD),[f,p]=k.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=k.useState({}),w=un(e,U=>p(U)),y=Array.from(u.layers),[T]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),j=y.indexOf(T),_=f?y.indexOf(f):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,P=_>=j,D=HQ(U=>{const K=U.target,Y=[...u.branches].some(G=>G.contains(K));!P||Y||(s==null||s(U),a==null||a(U),U.defaultPrevented||l==null||l())},m),$=GQ(U=>{const K=U.target;[...u.branches].some(G=>G.contains(K))||(o==null||o(U),a==null||a(U),U.defaultPrevented||l==null||l())},m);return $Q(U=>{_===u.layers.size-1&&(r==null||r(U),!U.defaultPrevented&&l&&(U.preventDefault(),l()))},m),k.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(zR=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),$R(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=zR)}},[f,m,n,u]),k.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),$R())},[f,u]),k.useEffect(()=>{const U=()=>g({});return document.addEventListener(HT,U),()=>document.removeEventListener(HT,U)},[]),i.jsx(Pt.div,{...c,ref:w,style:{pointerEvents:v?P?"auto":"none":void 0,...t.style},onFocusCapture:nt(t.onFocusCapture,$.onFocusCapture),onBlurCapture:nt(t.onBlurCapture,$.onBlurCapture),onPointerDownCapture:nt(t.onPointerDownCapture,D.onPointerDownCapture)})});Hg.displayName=BQ;var qQ="DismissableLayerBranch",WQ=k.forwardRef((t,e)=>{const n=k.useContext(cD),r=k.useRef(null),s=un(e,r);return k.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(Pt.div,{...t,ref:s})});WQ.displayName=qQ;function HQ(t,e=globalThis==null?void 0:globalThis.document){const n=ys(t),r=k.useRef(!1),s=k.useRef(()=>{});return k.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){uD(UQ,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function GQ(t,e=globalThis==null?void 0:globalThis.document){const n=ys(t),r=k.useRef(!1);return k.useEffect(()=>{const s=o=>{o.target&&!r.current&&uD(VQ,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $R(){const t=new CustomEvent(HT);document.dispatchEvent(t)}function uD(t,e,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?lD(s,o):s.dispatchEvent(o)}var sk=0;function vj(){k.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??BR()),document.body.insertAdjacentElement("beforeend",t[1]??BR()),sk++,()=>{sk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),sk--}},[])}function BR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ik="focusScope.autoFocusOnMount",ok="focusScope.autoFocusOnUnmount",UR={bubbles:!1,cancelable:!0},KQ="FocusScope",Xb=k.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=t,[l,c]=k.useState(null),u=ys(s),f=ys(o),p=k.useRef(null),m=un(e,y=>c(y)),g=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let y=function(v){if(g.paused||!l)return;const P=v.target;l.contains(P)?p.current=P:Rc(p.current,{select:!0})},T=function(v){if(g.paused||!l)return;const P=v.relatedTarget;P!==null&&(l.contains(P)||Rc(p.current,{select:!0}))},j=function(v){if(document.activeElement===document.body)for(const D of v)D.removedNodes.length>0&&Rc(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",T);const _=new MutationObserver(j);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",T),_.disconnect()}}},[r,l,g.paused]),k.useEffect(()=>{if(l){qR.add(g);const y=document.activeElement;if(!l.contains(y)){const j=new CustomEvent(ik,UR);l.addEventListener(ik,u),l.dispatchEvent(j),j.defaultPrevented||(YQ(eZ(dD(l)),{select:!0}),document.activeElement===y&&Rc(l))}return()=>{l.removeEventListener(ik,u),setTimeout(()=>{const j=new CustomEvent(ok,UR);l.addEventListener(ok,f),l.dispatchEvent(j),j.defaultPrevented||Rc(y??document.body,{select:!0}),l.removeEventListener(ok,f),qR.remove(g)},0)}}},[l,u,f,g]);const w=k.useCallback(y=>{if(!n&&!r||g.paused)return;const T=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,j=document.activeElement;if(T&&j){const _=y.currentTarget,[v,P]=JQ(_);v&&P?!y.shiftKey&&j===P?(y.preventDefault(),n&&Rc(v,{select:!0})):y.shiftKey&&j===v&&(y.preventDefault(),n&&Rc(P,{select:!0})):j===_&&y.preventDefault()}},[n,r,g.paused]);return i.jsx(Pt.div,{tabIndex:-1,...a,ref:m,onKeyDown:w})});Xb.displayName=KQ;function YQ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Rc(r,{select:e}),document.activeElement!==n)return}function JQ(t){const e=dD(t),n=VR(e,t),r=VR(e.reverse(),t);return[n,r]}function dD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function VR(t,e){for(const n of t)if(!XQ(n,{upTo:e}))return n}function XQ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function QQ(t){return t instanceof HTMLInputElement&&"select"in t}function Rc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&QQ(t)&&e&&t.select()}}var qR=ZQ();function ZQ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=WR(t,e),t.unshift(e)},remove(e){var n;t=WR(t,e),(n=t[0])==null||n.resume()}}}function WR(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function eZ(t){return t.filter(e=>e.tagName!=="A")}var as=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},tZ=xN[" useId ".trim().toString()]||(()=>{}),nZ=0;function ao(t){const[e,n]=k.useState(tZ());return as(()=>{n(r=>r??String(nZ++))},[t]),e?`radix-${e}`:""}const rZ=["top","right","bottom","left"],Qc=Math.min,Yi=Math.max,J0=Math.round,Tx=Math.floor,al=t=>({x:t,y:t}),sZ={left:"right",right:"left",bottom:"top",top:"bottom"},iZ={start:"end",end:"start"};function GT(t,e,n){return Yi(t,Qc(e,n))}function Zl(t,e){return typeof t=="function"?t(e):t}function ec(t){return t.split("-")[0]}function qh(t){return t.split("-")[1]}function wj(t){return t==="x"?"y":"x"}function kj(t){return t==="y"?"height":"width"}const oZ=new Set(["top","bottom"]);function rl(t){return oZ.has(ec(t))?"y":"x"}function Tj(t){return wj(rl(t))}function aZ(t,e,n){n===void 0&&(n=!1);const r=qh(t),s=Tj(t),o=kj(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=X0(a)),[a,X0(a)]}function lZ(t){const e=X0(t);return[KT(t),e,KT(e)]}function KT(t){return t.replace(/start|end/g,e=>iZ[e])}const HR=["left","right"],GR=["right","left"],cZ=["top","bottom"],uZ=["bottom","top"];function dZ(t,e,n){switch(t){case"top":case"bottom":return n?e?GR:HR:e?HR:GR;case"left":case"right":return e?cZ:uZ;default:return[]}}function fZ(t,e,n,r){const s=qh(t);let o=dZ(ec(t),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),e&&(o=o.concat(o.map(KT)))),o}function X0(t){return t.replace(/left|right|bottom|top/g,e=>sZ[e])}function hZ(t){return{top:0,right:0,bottom:0,left:0,...t}}function fD(t){return typeof t!="number"?hZ(t):{top:t,right:t,bottom:t,left:t}}function Q0(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function KR(t,e,n){let{reference:r,floating:s}=t;const o=rl(e),a=Tj(e),l=kj(a),c=ec(e),u=o==="y",f=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:f,y:r.y-s.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:p};break;case"left":g={x:r.x-s.width,y:p};break;default:g={x:r.x,y:r.y}}switch(qh(e)){case"start":g[a]-=m*(n&&u?-1:1);break;case"end":g[a]+=m*(n&&u?-1:1);break}return g}const pZ=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:f,y:p}=KR(u,r,c),m=r,g={},w=0;for(let y=0;y<l.length;y++){const{name:T,fn:j}=l[y],{x:_,y:v,data:P,reset:D}=await j({x:f,y:p,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:t,floating:e}});f=_??f,p=v??p,g={...g,[T]:{...g[T],...P}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(u=D.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:f,y:p}=KR(u,m,c)),y=-1)}return{x:f,y:p,placement:m,strategy:s,middlewareData:g}};async function ug(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:m=!1,padding:g=0}=Zl(e,t),w=fD(g),T=l[m?p==="floating"?"reference":"floating":p],j=Q0(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(T)))==null||n?T:T.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),_=p==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),P=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},D=Q0(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:v,strategy:c}):_);return{top:(j.top-D.top+w.top)/P.y,bottom:(D.bottom-j.bottom+w.bottom)/P.y,left:(j.left-D.left+w.left)/P.x,right:(D.right-j.right+w.right)/P.x}}const mZ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:f=0}=Zl(t,e)||{};if(u==null)return{};const p=fD(f),m={x:n,y:r},g=Tj(s),w=kj(g),y=await a.getDimensions(u),T=g==="y",j=T?"top":"left",_=T?"bottom":"right",v=T?"clientHeight":"clientWidth",P=o.reference[w]+o.reference[g]-m[g]-o.floating[w],D=m[g]-o.reference[g],$=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let U=$?$[v]:0;(!U||!await(a.isElement==null?void 0:a.isElement($)))&&(U=l.floating[v]||o.floating[w]);const K=P/2-D/2,Y=U/2-y[w]/2-1,G=Qc(p[j],Y),X=Qc(p[_],Y),V=G,A=U-y[w]-X,x=U/2-y[w]/2+K,C=GT(V,x,A),L=!c.arrow&&qh(s)!=null&&x!==C&&o.reference[w]/2-(x<V?G:X)-y[w]/2<0,z=L?x<V?x-V:x-A:0;return{[g]:m[g]+z,data:{[g]:C,centerOffset:x-C-z,...L&&{alignmentOffset:z}},reset:L}}}),gZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:y=!0,...T}=Zl(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const j=ec(s),_=rl(l),v=ec(l)===l,P=await(c.isRTL==null?void 0:c.isRTL(u.floating)),D=m||(v||!y?[X0(l)]:lZ(l)),$=w!=="none";!m&&$&&D.push(...fZ(l,y,w,P));const U=[l,...D],K=await ug(e,T),Y=[];let G=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&Y.push(K[j]),p){const x=aZ(s,a,P);Y.push(K[x[0]],K[x[1]])}if(G=[...G,{placement:s,overflows:Y}],!Y.every(x=>x<=0)){var X,V;const x=(((X=o.flip)==null?void 0:X.index)||0)+1,C=U[x];if(C&&(!(p==="alignment"?_!==rl(C):!1)||G.every(R=>R.overflows[0]>0&&rl(R.placement)===_)))return{data:{index:x,overflows:G},reset:{placement:C}};let L=(V=G.filter(z=>z.overflows[0]<=0).sort((z,R)=>z.overflows[1]-R.overflows[1])[0])==null?void 0:V.placement;if(!L)switch(g){case"bestFit":{var A;const z=(A=G.filter(R=>{if($){const I=rl(R.placement);return I===_||I==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(I=>I>0).reduce((I,N)=>I+N,0)]).sort((R,I)=>R[1]-I[1])[0])==null?void 0:A[0];z&&(L=z);break}case"initialPlacement":L=l;break}if(s!==L)return{reset:{placement:L}}}return{}}}};function YR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function JR(t){return rZ.some(e=>t[e]>=0)}const yZ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Zl(t,e);switch(r){case"referenceHidden":{const o=await ug(e,{...s,elementContext:"reference"}),a=YR(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:JR(a)}}}case"escaped":{const o=await ug(e,{...s,altBoundary:!0}),a=YR(o,n.floating);return{data:{escapedOffsets:a,escaped:JR(a)}}}default:return{}}}}},hD=new Set(["left","top"]);async function xZ(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ec(n),l=qh(n),c=rl(n)==="y",u=hD.has(a)?-1:1,f=o&&c?-1:1,p=Zl(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof w=="number"&&(g=l==="end"?w*-1:w),c?{x:g*f,y:m*u}:{x:m*u,y:g*f}}const bZ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=e,c=await xZ(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},vZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:T=>{let{x:j,y:_}=T;return{x:j,y:_}}},...c}=Zl(t,e),u={x:n,y:r},f=await ug(e,c),p=rl(ec(s)),m=wj(p);let g=u[m],w=u[p];if(o){const T=m==="y"?"top":"left",j=m==="y"?"bottom":"right",_=g+f[T],v=g-f[j];g=GT(_,g,v)}if(a){const T=p==="y"?"top":"left",j=p==="y"?"bottom":"right",_=w+f[T],v=w-f[j];w=GT(_,w,v)}const y=l.fn({...e,[m]:g,[p]:w});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[m]:o,[p]:a}}}}}},wZ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Zl(t,e),f={x:n,y:r},p=rl(s),m=wj(p);let g=f[m],w=f[p];const y=Zl(l,e),T=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const v=m==="y"?"height":"width",P=o.reference[m]-o.floating[v]+T.mainAxis,D=o.reference[m]+o.reference[v]-T.mainAxis;g<P?g=P:g>D&&(g=D)}if(u){var j,_;const v=m==="y"?"width":"height",P=hD.has(ec(s)),D=o.reference[p]-o.floating[v]+(P&&((j=a.offset)==null?void 0:j[p])||0)+(P?0:T.crossAxis),$=o.reference[p]+o.reference[v]+(P?0:((_=a.offset)==null?void 0:_[p])||0)-(P?T.crossAxis:0);w<D?w=D:w>$&&(w=$)}return{[m]:g,[p]:w}}}},kZ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:a,elements:l}=e,{apply:c=()=>{},...u}=Zl(t,e),f=await ug(e,u),p=ec(s),m=qh(s),g=rl(s)==="y",{width:w,height:y}=o.floating;let T,j;p==="top"||p==="bottom"?(T=p,j=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(j=p,T=m==="end"?"top":"bottom");const _=y-f.top-f.bottom,v=w-f.left-f.right,P=Qc(y-f[T],_),D=Qc(w-f[j],v),$=!e.middlewareData.shift;let U=P,K=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(K=v),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(U=_),$&&!m){const G=Yi(f.left,0),X=Yi(f.right,0),V=Yi(f.top,0),A=Yi(f.bottom,0);g?K=w-2*(G!==0||X!==0?G+X:Yi(f.left,f.right)):U=y-2*(V!==0||A!==0?V+A:Yi(f.top,f.bottom))}await c({...e,availableWidth:K,availableHeight:U});const Y=await a.getDimensions(l.floating);return w!==Y.width||y!==Y.height?{reset:{rects:!0}}:{}}}};function Qb(){return typeof window<"u"}function Wh(t){return pD(t)?(t.nodeName||"").toLowerCase():"#document"}function lo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ml(t){var e;return(e=(pD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function pD(t){return Qb()?t instanceof Node||t instanceof lo(t).Node:!1}function Sa(t){return Qb()?t instanceof Element||t instanceof lo(t).Element:!1}function fl(t){return Qb()?t instanceof HTMLElement||t instanceof lo(t).HTMLElement:!1}function XR(t){return!Qb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof lo(t).ShadowRoot}const TZ=new Set(["inline","contents"]);function Gg(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ea(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!TZ.has(s)}const NZ=new Set(["table","td","th"]);function jZ(t){return NZ.has(Wh(t))}const CZ=[":popover-open",":modal"];function Zb(t){return CZ.some(e=>{try{return t.matches(e)}catch{return!1}})}const SZ=["transform","translate","scale","rotate","perspective"],EZ=["transform","translate","scale","rotate","perspective","filter"],_Z=["paint","layout","strict","content"];function Nj(t){const e=jj(),n=Sa(t)?Ea(t):t;return SZ.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||EZ.some(r=>(n.willChange||"").includes(r))||_Z.some(r=>(n.contain||"").includes(r))}function AZ(t){let e=Zc(t);for(;fl(e)&&!kh(e);){if(Nj(e))return e;if(Zb(e))return null;e=Zc(e)}return null}function jj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const PZ=new Set(["html","body","#document"]);function kh(t){return PZ.has(Wh(t))}function Ea(t){return lo(t).getComputedStyle(t)}function ev(t){return Sa(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Zc(t){if(Wh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||XR(t)&&t.host||ml(t);return XR(e)?e.host:e}function mD(t){const e=Zc(t);return kh(e)?t.ownerDocument?t.ownerDocument.body:t.body:fl(e)&&Gg(e)?e:mD(e)}function dg(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=mD(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),a=lo(s);if(o){const l=YT(a);return e.concat(a,a.visualViewport||[],Gg(s)?s:[],l&&n?dg(l):[])}return e.concat(s,dg(s,[],n))}function YT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function gD(t){const e=Ea(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=fl(t),o=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=J0(n)!==o||J0(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function Cj(t){return Sa(t)?t:t.contextElement}function nh(t){const e=Cj(t);if(!fl(e))return al(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=gD(e);let a=(o?J0(n.width):n.width)/r,l=(o?J0(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const RZ=al(0);function yD(t){const e=lo(t);return!jj()||!e.visualViewport?RZ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function IZ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==lo(t)?!1:e}function Td(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=Cj(t);let a=al(1);e&&(r?Sa(r)&&(a=nh(r)):a=nh(t));const l=IZ(o,n,r)?yD(o):al(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,p=s.height/a.y;if(o){const m=lo(o),g=r&&Sa(r)?lo(r):r;let w=m,y=YT(w);for(;y&&r&&g!==w;){const T=nh(y),j=y.getBoundingClientRect(),_=Ea(y),v=j.left+(y.clientLeft+parseFloat(_.paddingLeft))*T.x,P=j.top+(y.clientTop+parseFloat(_.paddingTop))*T.y;c*=T.x,u*=T.y,f*=T.x,p*=T.y,c+=v,u+=P,w=lo(y),y=YT(w)}}return Q0({width:f,height:p,x:c,y:u})}function Sj(t,e){const n=ev(t).scrollLeft;return e?e.left+n:Td(ml(t)).left+n}function xD(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Sj(t,r)),o=r.top+e.scrollTop;return{x:s,y:o}}function MZ(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",a=ml(r),l=e?Zb(e.floating):!1;if(r===a||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=al(1);const f=al(0),p=fl(r);if((p||!p&&!o)&&((Wh(r)!=="body"||Gg(a))&&(c=ev(r)),fl(r))){const g=Td(r);u=nh(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const m=a&&!p&&!o?xD(a,c,!0):al(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+m.x,y:n.y*u.y-c.scrollTop*u.y+f.y+m.y}}function DZ(t){return Array.from(t.getClientRects())}function OZ(t){const e=ml(t),n=ev(t),r=t.ownerDocument.body,s=Yi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Yi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Sj(t);const l=-n.scrollTop;return Ea(r).direction==="rtl"&&(a+=Yi(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}function LZ(t,e){const n=lo(t),r=ml(t),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=jj();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}const FZ=new Set(["absolute","fixed"]);function zZ(t,e){const n=Td(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=fl(t)?nh(t):al(1),a=t.clientWidth*o.x,l=t.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:a,height:l,x:c,y:u}}function QR(t,e,n){let r;if(e==="viewport")r=LZ(t,n);else if(e==="document")r=OZ(ml(t));else if(Sa(e))r=zZ(e,n);else{const s=yD(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Q0(r)}function bD(t,e){const n=Zc(t);return n===e||!Sa(n)||kh(n)?!1:Ea(n).position==="fixed"||bD(n,e)}function $Z(t,e){const n=e.get(t);if(n)return n;let r=dg(t,[],!1).filter(l=>Sa(l)&&Wh(l)!=="body"),s=null;const o=Ea(t).position==="fixed";let a=o?Zc(t):t;for(;Sa(a)&&!kh(a);){const l=Ea(a),c=Nj(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&FZ.has(s.position)||Gg(a)&&!c&&bD(t,a))?r=r.filter(f=>f!==a):s=l,a=Zc(a)}return e.set(t,r),r}function BZ(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Zb(e)?[]:$Z(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,f)=>{const p=QR(e,f,s);return u.top=Yi(p.top,u.top),u.right=Qc(p.right,u.right),u.bottom=Qc(p.bottom,u.bottom),u.left=Yi(p.left,u.left),u},QR(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function UZ(t){const{width:e,height:n}=gD(t);return{width:e,height:n}}function VZ(t,e,n){const r=fl(e),s=ml(e),o=n==="fixed",a=Td(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=al(0);function u(){c.x=Sj(s)}if(r||!r&&!o)if((Wh(e)!=="body"||Gg(s))&&(l=ev(e)),r){const g=Td(e,!0,o,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&u();o&&!r&&s&&u();const f=s&&!r&&!o?xD(s,l):al(0),p=a.left+l.scrollLeft-c.x-f.x,m=a.top+l.scrollTop-c.y-f.y;return{x:p,y:m,width:a.width,height:a.height}}function ak(t){return Ea(t).position==="static"}function ZR(t,e){if(!fl(t)||Ea(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ml(t)===n&&(n=n.ownerDocument.body),n}function vD(t,e){const n=lo(t);if(Zb(t))return n;if(!fl(t)){let s=Zc(t);for(;s&&!kh(s);){if(Sa(s)&&!ak(s))return s;s=Zc(s)}return n}let r=ZR(t,e);for(;r&&jZ(r)&&ak(r);)r=ZR(r,e);return r&&kh(r)&&ak(r)&&!Nj(r)?n:r||AZ(t)||n}const qZ=async function(t){const e=this.getOffsetParent||vD,n=this.getDimensions,r=await n(t.floating);return{reference:VZ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function WZ(t){return Ea(t).direction==="rtl"}const HZ={convertOffsetParentRelativeRectToViewportRelativeRect:MZ,getDocumentElement:ml,getClippingRect:BZ,getOffsetParent:vD,getElementRects:qZ,getClientRects:DZ,getDimensions:UZ,getScale:nh,isElement:Sa,isRTL:WZ};function wD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function GZ(t,e){let n=null,r;const s=ml(t);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=t.getBoundingClientRect(),{left:f,top:p,width:m,height:g}=u;if(l||e(),!m||!g)return;const w=Tx(p),y=Tx(s.clientWidth-(f+m)),T=Tx(s.clientHeight-(p+g)),j=Tx(f),v={rootMargin:-w+"px "+-y+"px "+-T+"px "+-j+"px",threshold:Yi(0,Qc(1,c))||1};let P=!0;function D($){const U=$[0].intersectionRatio;if(U!==c){if(!P)return a();U?a(!1,U):r=setTimeout(()=>{a(!1,1e-7)},1e3)}U===1&&!wD(u,t.getBoundingClientRect())&&a(),P=!1}try{n=new IntersectionObserver(D,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,v)}n.observe(t)}return a(!0),o}function KZ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Cj(t),f=s||o?[...u?dg(u):[],...dg(e)]:[];f.forEach(j=>{s&&j.addEventListener("scroll",n,{passive:!0}),o&&j.addEventListener("resize",n)});const p=u&&l?GZ(u,n):null;let m=-1,g=null;a&&(g=new ResizeObserver(j=>{let[_]=j;_&&_.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var v;(v=g)==null||v.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let w,y=c?Td(t):null;c&&T();function T(){const j=Td(t);y&&!wD(y,j)&&n(),y=j,w=requestAnimationFrame(T)}return n(),()=>{var j;f.forEach(_=>{s&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),p==null||p(),(j=g)==null||j.disconnect(),g=null,c&&cancelAnimationFrame(w)}}const YZ=bZ,JZ=vZ,XZ=gZ,QZ=kZ,ZZ=yZ,e5=mZ,eee=wZ,tee=(t,e,n)=>{const r=new Map,s={platform:HZ,...n},o={...s.platform,_c:r};return pZ(t,e,{...s,platform:o})};var nee=typeof document<"u",ree=function(){},v0=nee?k.useLayoutEffect:ree;function Z0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Z0(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!Z0(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function kD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function t5(t,e){const n=kD(t);return Math.round(e*n)/n}function lk(t){const e=k.useRef(t);return v0(()=>{e.current=t}),e}function see(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[f,p]=k.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=k.useState(r);Z0(m,r)||g(r);const[w,y]=k.useState(null),[T,j]=k.useState(null),_=k.useCallback(R=>{R!==$.current&&($.current=R,y(R))},[]),v=k.useCallback(R=>{R!==U.current&&(U.current=R,j(R))},[]),P=o||w,D=a||T,$=k.useRef(null),U=k.useRef(null),K=k.useRef(f),Y=c!=null,G=lk(c),X=lk(s),V=lk(u),A=k.useCallback(()=>{if(!$.current||!U.current)return;const R={placement:e,strategy:n,middleware:m};X.current&&(R.platform=X.current),tee($.current,U.current,R).then(I=>{const N={...I,isPositioned:V.current!==!1};x.current&&!Z0(K.current,N)&&(K.current=N,Ag.flushSync(()=>{p(N)}))})},[m,e,n,X,V]);v0(()=>{u===!1&&K.current.isPositioned&&(K.current.isPositioned=!1,p(R=>({...R,isPositioned:!1})))},[u]);const x=k.useRef(!1);v0(()=>(x.current=!0,()=>{x.current=!1}),[]),v0(()=>{if(P&&($.current=P),D&&(U.current=D),P&&D){if(G.current)return G.current(P,D,A);A()}},[P,D,A,G,Y]);const C=k.useMemo(()=>({reference:$,floating:U,setReference:_,setFloating:v}),[_,v]),L=k.useMemo(()=>({reference:P,floating:D}),[P,D]),z=k.useMemo(()=>{const R={position:n,left:0,top:0};if(!L.floating)return R;const I=t5(L.floating,f.x),N=t5(L.floating,f.y);return l?{...R,transform:"translate("+I+"px, "+N+"px)",...kD(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:N}},[n,l,L.floating,f.x,f.y]);return k.useMemo(()=>({...f,update:A,refs:C,elements:L,floatingStyles:z}),[f,A,C,L,z])}const iee=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?e5({element:r.current,padding:s}).fn(n):{}:r?e5({element:r,padding:s}).fn(n):{}}}},oee=(t,e)=>({...YZ(t),options:[t,e]}),aee=(t,e)=>({...JZ(t),options:[t,e]}),lee=(t,e)=>({...eee(t),options:[t,e]}),cee=(t,e)=>({...XZ(t),options:[t,e]}),uee=(t,e)=>({...QZ(t),options:[t,e]}),dee=(t,e)=>({...ZZ(t),options:[t,e]}),fee=(t,e)=>({...iee(t),options:[t,e]});var hee="Arrow",TD=k.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return i.jsx(Pt.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});TD.displayName=hee;var pee=TD;function ND(t){const[e,n]=k.useState(void 0);return as(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Ej="Popper",[jD,Hh]=Mi(Ej),[mee,CD]=jD(Ej),SD=t=>{const{__scopePopper:e,children:n}=t,[r,s]=k.useState(null);return i.jsx(mee,{scope:e,anchor:r,onAnchorChange:s,children:n})};SD.displayName=Ej;var ED="PopperAnchor",_D=k.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=CD(ED,n),a=k.useRef(null),l=un(e,a);return k.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:i.jsx(Pt.div,{...s,ref:l})});_D.displayName=ED;var _j="PopperContent",[gee,yee]=jD(_j),AD=k.forwardRef((t,e)=>{var H,J,Q,ne,se,ie;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:w,...y}=t,T=CD(_j,n),[j,_]=k.useState(null),v=un(e,pe=>_(pe)),[P,D]=k.useState(null),$=ND(P),U=($==null?void 0:$.width)??0,K=($==null?void 0:$.height)??0,Y=r+(o!=="center"?"-"+o:""),G=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},X=Array.isArray(u)?u:[u],V=X.length>0,A={padding:G,boundary:X.filter(bee),altBoundary:V},{refs:x,floatingStyles:C,placement:L,isPositioned:z,middlewareData:R}=see({strategy:"fixed",placement:Y,whileElementsMounted:(...pe)=>KZ(...pe,{animationFrame:g==="always"}),elements:{reference:T.anchor},middleware:[oee({mainAxis:s+K,alignmentAxis:a}),c&&aee({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?lee():void 0,...A}),c&&cee({...A}),uee({...A,apply:({elements:pe,rects:le,availableWidth:me,availableHeight:Ee})=>{const{width:te,height:Ne}=le.reference,Pe=pe.floating.style;Pe.setProperty("--radix-popper-available-width",`${me}px`),Pe.setProperty("--radix-popper-available-height",`${Ee}px`),Pe.setProperty("--radix-popper-anchor-width",`${te}px`),Pe.setProperty("--radix-popper-anchor-height",`${Ne}px`)}}),P&&fee({element:P,padding:l}),vee({arrowWidth:U,arrowHeight:K}),m&&dee({strategy:"referenceHidden",...A})]}),[I,N]=ID(L),F=ys(w);as(()=>{z&&(F==null||F())},[z,F]);const E=(H=R.arrow)==null?void 0:H.x,M=(J=R.arrow)==null?void 0:J.y,ee=((Q=R.arrow)==null?void 0:Q.centerOffset)!==0,[O,q]=k.useState();return as(()=>{j&&q(window.getComputedStyle(j).zIndex)},[j]),i.jsx("div",{ref:x.setFloating,"data-radix-popper-content-wrapper":"",style:{...C,transform:z?C.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:O,"--radix-popper-transform-origin":[(ne=R.transformOrigin)==null?void 0:ne.x,(se=R.transformOrigin)==null?void 0:se.y].join(" "),...((ie=R.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(gee,{scope:n,placedSide:I,onArrowChange:D,arrowX:E,arrowY:M,shouldHideArrow:ee,children:i.jsx(Pt.div,{"data-side":I,"data-align":N,...y,ref:v,style:{...y.style,animation:z?void 0:"none"}})})})});AD.displayName=_j;var PD="PopperArrow",xee={top:"bottom",right:"left",bottom:"top",left:"right"},RD=k.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=yee(PD,r),a=xee[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(pee,{...s,ref:n,style:{...s.style,display:"block"}})})});RD.displayName=PD;function bee(t){return t!==null}var vee=t=>({name:"transformOrigin",options:t,fn(e){var T,j,_;const{placement:n,rects:r,middlewareData:s}=e,a=((T=s.arrow)==null?void 0:T.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,f]=ID(n),p={start:"0%",center:"50%",end:"100%"}[f],m=(((j=s.arrow)==null?void 0:j.x)??0)+l/2,g=(((_=s.arrow)==null?void 0:_.y)??0)+c/2;let w="",y="";return u==="bottom"?(w=a?p:`${m}px`,y=`${-c}px`):u==="top"?(w=a?p:`${m}px`,y=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,y=a?p:`${g}px`):u==="left"&&(w=`${r.floating.width+c}px`,y=a?p:`${g}px`),{data:{x:w,y}}}});function ID(t){const[e,n="center"]=t.split("-");return[e,n]}var Aj=SD,Pj=_D,Rj=AD,Ij=RD,wee="Portal",Kg=k.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,o]=k.useState(!1);as(()=>o(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?VM.createPortal(i.jsx(Pt.div,{...r,ref:e}),a):null});Kg.displayName=wee;var kee=xN[" useInsertionEffect ".trim().toString()]||as;function _a({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,o,a]=Tee({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const f=k.useRef(t!==void 0);k.useEffect(()=>{const p=f.current;p!==l&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=k.useCallback(f=>{var p;if(l){const m=Nee(f)?f(t):f;m!==t&&((p=a.current)==null||p.call(a,m))}else o(f)},[l,t,o,a]);return[c,u]}function Tee({defaultProp:t,onChange:e}){const[n,r]=k.useState(t),s=k.useRef(n),o=k.useRef(e);return kee(()=>{o.current=e},[e]),k.useEffect(()=>{var a;s.current!==n&&((a=o.current)==null||a.call(o,n),s.current=n)},[n,s]),[n,r,o]}function Nee(t){return typeof t=="function"}function MD(t){const e=k.useRef({value:t,previous:t});return k.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var DD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jee="VisuallyHidden",OD=k.forwardRef((t,e)=>i.jsx(Pt.span,{...t,ref:e,style:{...DD,...t.style}}));OD.displayName=jee;var Cee=OD,See=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},xf=new WeakMap,Nx=new WeakMap,jx={},ck=0,LD=function(t){return t&&(t.host||LD(t.parentNode))},Eee=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=LD(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},_ee=function(t,e,n,r){var s=Eee(e,Array.isArray(t)?t:[t]);jx[n]||(jx[n]=new WeakMap);var o=jx[n],a=[],l=new Set,c=new Set(s),u=function(p){!p||l.has(p)||(l.add(p),u(p.parentNode))};s.forEach(u);var f=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(m){if(l.has(m))f(m);else try{var g=m.getAttribute(r),w=g!==null&&g!=="false",y=(xf.get(m)||0)+1,T=(o.get(m)||0)+1;xf.set(m,y),o.set(m,T),a.push(m),y===1&&w&&Nx.set(m,!0),T===1&&m.setAttribute(n,"true"),w||m.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",m,j)}})};return f(e),l.clear(),ck++,function(){a.forEach(function(p){var m=xf.get(p)-1,g=o.get(p)-1;xf.set(p,m),o.set(p,g),m||(Nx.has(p)||p.removeAttribute(r),Nx.delete(p)),g||p.removeAttribute(n)}),ck--,ck||(xf=new WeakMap,xf=new WeakMap,Nx=new WeakMap,jx={})}},Mj=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=See(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),_ee(r,s,n,"aria-hidden")):function(){return null}},JT=function(t,e){return JT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},JT(t,e)};function FD(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");JT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Do=function(){return Do=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Do.apply(this,arguments)};function au(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function zD(t,e,n,r){var s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(s<3?a(o):s>3?a(e,n,o):a(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function $D(t,e){return function(n,r){e(n,r,t)}}function BD(t,e,n,r,s,o){function a(j){if(j!==void 0&&typeof j!="function")throw new TypeError("Function expected");return j}for(var l=r.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!e&&t?r.static?t:t.prototype:null,f=e||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),p,m=!1,g=n.length-1;g>=0;g--){var w={};for(var y in r)w[y]=y==="access"?{}:r[y];for(var y in r.access)w.access[y]=r.access[y];w.addInitializer=function(j){if(m)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(j||null))};var T=(0,n[g])(l==="accessor"?{get:f.get,set:f.set}:f[c],w);if(l==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(p=a(T.get))&&(f.get=p),(p=a(T.set))&&(f.set=p),(p=a(T.init))&&s.unshift(p)}else(p=a(T))&&(l==="field"?s.unshift(p):f[c]=p)}u&&Object.defineProperty(u,r.name,f),m=!0}function UD(t,e,n){for(var r=arguments.length>2,s=0;s<e.length;s++)n=r?e[s].call(t,n):e[s].call(t);return r?n:void 0}function VD(t){return typeof t=="symbol"?t:"".concat(t)}function qD(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function WD(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function xt(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(f){try{u(r.next(f))}catch(p){a(p)}}function c(f){try{u(r.throw(f))}catch(p){a(p)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((r=r.apply(t,e||[])).next())})}function HD(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(f){return c([u,f])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(n=0)),n;)try{if(r=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(f){u=[6,f],s=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var tv=Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function GD(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&tv(e,t,n)}function eb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dj(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(l){a={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function KD(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Dj(arguments[e]));return t}function YD(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)r[s]=o[a];return r}function Oj(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Th(t){return this instanceof Th?(this.v=t,this):new Th(t)}function JD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(g){return function(w){return Promise.resolve(w).then(g,p)}}function l(g,w){r[g]&&(s[g]=function(y){return new Promise(function(T,j){o.push([g,y,T,j])>1||c(g,y)})},w&&(s[g]=w(s[g])))}function c(g,w){try{u(r[g](w))}catch(y){m(o[0][3],y)}}function u(g){g.value instanceof Th?Promise.resolve(g.value.v).then(f,p):m(o[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function m(g,w){g(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function XD(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,o){e[s]=t[s]?function(a){return(n=!n)?{value:Th(t[s](a)),done:!1}:o?o(a):a}:o}}function QD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof eb=="function"?eb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(l,c){a=t[o](a),s(l,c,a.done,a.value)})}}function s(o,a,l,c){Promise.resolve(c).then(function(u){o({value:u,done:l})},a)}}function ZD(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Aee=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},XT=function(t){return XT=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},XT(t)};function eO(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=XT(t),r=0;r<n.length;r++)n[r]!=="default"&&tv(e,t,n[r]);return Aee(e,t),e}function tO(t){return t&&t.__esModule?t:{default:t}}function nO(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function rO(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function sO(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function iO(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var Pee=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function oO(t){function e(o){t.error=t.hasError?new Pee(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,r=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(s,function(a){return e(a),s()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function aO(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,o,a){return r?e?".jsx":".js":s&&(!o||!a)?n:s+o+"."+a.toLowerCase()+"js"}):t}const Ree={__extends:FD,__assign:Do,__rest:au,__decorate:zD,__param:$D,__esDecorate:BD,__runInitializers:UD,__propKey:VD,__setFunctionName:qD,__metadata:WD,__awaiter:xt,__generator:HD,__createBinding:tv,__exportStar:GD,__values:eb,__read:Dj,__spread:KD,__spreadArrays:YD,__spreadArray:Oj,__await:Th,__asyncGenerator:JD,__asyncDelegator:XD,__asyncValues:QD,__makeTemplateObject:ZD,__importStar:eO,__importDefault:tO,__classPrivateFieldGet:nO,__classPrivateFieldSet:rO,__classPrivateFieldIn:sO,__addDisposableResource:iO,__disposeResources:oO,__rewriteRelativeImportExtension:aO},Iee=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:iO,get __assign(){return Do},__asyncDelegator:XD,__asyncGenerator:JD,__asyncValues:QD,__await:Th,__awaiter:xt,__classPrivateFieldGet:nO,__classPrivateFieldIn:sO,__classPrivateFieldSet:rO,__createBinding:tv,__decorate:zD,__disposeResources:oO,__esDecorate:BD,__exportStar:GD,__extends:FD,__generator:HD,__importDefault:tO,__importStar:eO,__makeTemplateObject:ZD,__metadata:WD,__param:$D,__propKey:VD,__read:Dj,__rest:au,__rewriteRelativeImportExtension:aO,__runInitializers:UD,__setFunctionName:qD,__spread:KD,__spreadArray:Oj,__spreadArrays:YD,__values:eb,default:Ree},Symbol.toStringTag,{value:"Module"}));var w0="right-scroll-bar-position",k0="width-before-scroll-bar",Mee="with-scroll-bars-hidden",Dee="--removed-body-scroll-bar-size";function uk(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Oee(t,e){var n=k.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Lee=typeof window<"u"?k.useLayoutEffect:k.useEffect,n5=new WeakMap;function Fee(t,e){var n=Oee(null,function(r){return t.forEach(function(s){return uk(s,r)})});return Lee(function(){var r=n5.get(n);if(r){var s=new Set(r),o=new Set(t),a=n.current;s.forEach(function(l){o.has(l)||uk(l,null)}),o.forEach(function(l){s.has(l)||uk(l,a)})}n5.set(n,t)},[t]),n}function zee(t){return t}function $ee(t,e){e===void 0&&(e=zee);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var a=e(o,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(o),a=n}var c=function(){var f=a;a=[],f.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),n}}}};return s}function Bee(t){t===void 0&&(t={});var e=$ee(null);return e.options=Do({async:!0,ssr:!1},t),e}var lO=function(t){var e=t.sideCar,n=au(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,Do({},n))};lO.isSideCarExport=!0;function Uee(t,e){return t.useMedium(e),lO}var cO=Bee(),dk=function(){},nv=k.forwardRef(function(t,e){var n=k.useRef(null),r=k.useState({onScrollCapture:dk,onWheelCapture:dk,onTouchMoveCapture:dk}),s=r[0],o=r[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,f=t.enabled,p=t.shards,m=t.sideCar,g=t.noRelative,w=t.noIsolation,y=t.inert,T=t.allowPinchZoom,j=t.as,_=j===void 0?"div":j,v=t.gapMode,P=au(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=m,$=Fee([n,e]),U=Do(Do({},P),s);return k.createElement(k.Fragment,null,f&&k.createElement(D,{sideCar:cO,removeScrollBar:u,shards:p,noRelative:g,noIsolation:w,inert:y,setCallbacks:o,allowPinchZoom:!!T,lockRef:n,gapMode:v}),a?k.cloneElement(k.Children.only(l),Do(Do({},U),{ref:$})):k.createElement(_,Do({},U,{className:c,ref:$}),l))});nv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nv.classNames={fullWidth:k0,zeroRight:w0};var Vee=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qee(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Vee();return e&&t.setAttribute("nonce",e),t}function Wee(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Hee(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Gee=function(){var t=0,e=null;return{add:function(n){t==0&&(e=qee())&&(Wee(e,n),Hee(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Kee=function(){var t=Gee();return function(e,n){k.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},uO=function(){var t=Kee(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Yee={left:0,top:0,right:0,gap:0},fk=function(t){return parseInt(t||"",10)||0},Jee=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[fk(n),fk(r),fk(s)]},Xee=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Yee;var e=Jee(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Qee=uO(),rh="data-scroll-locked",Zee=function(t,e,n,r){var s=t.left,o=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Mee,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(rh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(w0,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(k0,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(w0," .").concat(w0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(k0," .").concat(k0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(rh,`] {
    `).concat(Dee,": ").concat(l,`px;
  }
`)},r5=function(){var t=parseInt(document.body.getAttribute(rh)||"0",10);return isFinite(t)?t:0},ete=function(){k.useEffect(function(){return document.body.setAttribute(rh,(r5()+1).toString()),function(){var t=r5()-1;t<=0?document.body.removeAttribute(rh):document.body.setAttribute(rh,t.toString())}},[])},tte=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;ete();var o=k.useMemo(function(){return Xee(s)},[s]);return k.createElement(Qee,{styles:Zee(o,!e,s,n?"":"!important")})},QT=!1;if(typeof window<"u")try{var Cx=Object.defineProperty({},"passive",{get:function(){return QT=!0,!0}});window.addEventListener("test",Cx,Cx),window.removeEventListener("test",Cx,Cx)}catch{QT=!1}var bf=QT?{passive:!1}:!1,nte=function(t){return t.tagName==="TEXTAREA"},dO=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!nte(t)&&n[e]==="visible")},rte=function(t){return dO(t,"overflowY")},ste=function(t){return dO(t,"overflowX")},s5=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=fO(t,r);if(s){var o=hO(t,r),a=o[1],l=o[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ite=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},ote=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},fO=function(t,e){return t==="v"?rte(e):ste(e)},hO=function(t,e){return t==="v"?ite(e):ote(e)},ate=function(t,e){return t==="h"&&e==="rtl"?-1:1},lte=function(t,e,n,r,s){var o=ate(t,window.getComputedStyle(e).direction),a=o*r,l=n.target,c=e.contains(l),u=!1,f=a>0,p=0,m=0;do{if(!l)break;var g=hO(t,l),w=g[0],y=g[1],T=g[2],j=y-T-o*w;(w||j)&&fO(t,l)&&(p+=j,m+=w);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(f&&Math.abs(p)<1||!f&&Math.abs(m)<1)&&(u=!0),u},Sx=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},i5=function(t){return[t.deltaX,t.deltaY]},o5=function(t){return t&&"current"in t?t.current:t},cte=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ute=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},dte=0,vf=[];function fte(t){var e=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),s=k.useState(dte++)[0],o=k.useState(uO)[0],a=k.useRef(t);k.useEffect(function(){a.current=t},[t]),k.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Oj([t.lockRef.current],(t.shards||[]).map(o5),!0).filter(Boolean);return y.forEach(function(T){return T.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=k.useCallback(function(y,T){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!a.current.allowPinchZoom;var j=Sx(y),_=n.current,v="deltaX"in y?y.deltaX:_[0]-j[0],P="deltaY"in y?y.deltaY:_[1]-j[1],D,$=y.target,U=Math.abs(v)>Math.abs(P)?"h":"v";if("touches"in y&&U==="h"&&$.type==="range")return!1;var K=s5(U,$);if(!K)return!0;if(K?D=U:(D=U==="v"?"h":"v",K=s5(U,$)),!K)return!1;if(!r.current&&"changedTouches"in y&&(v||P)&&(r.current=D),!D)return!0;var Y=r.current||D;return lte(Y,T,y,Y==="h"?v:P)},[]),c=k.useCallback(function(y){var T=y;if(!(!vf.length||vf[vf.length-1]!==o)){var j="deltaY"in T?i5(T):Sx(T),_=e.current.filter(function(D){return D.name===T.type&&(D.target===T.target||T.target===D.shadowParent)&&cte(D.delta,j)})[0];if(_&&_.should){T.cancelable&&T.preventDefault();return}if(!_){var v=(a.current.shards||[]).map(o5).filter(Boolean).filter(function(D){return D.contains(T.target)}),P=v.length>0?l(T,v[0]):!a.current.noIsolation;P&&T.cancelable&&T.preventDefault()}}},[]),u=k.useCallback(function(y,T,j,_){var v={name:y,delta:T,target:j,should:_,shadowParent:hte(j)};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(P){return P!==v})},1)},[]),f=k.useCallback(function(y){n.current=Sx(y),r.current=void 0},[]),p=k.useCallback(function(y){u(y.type,i5(y),y.target,l(y,t.lockRef.current))},[]),m=k.useCallback(function(y){u(y.type,Sx(y),y.target,l(y,t.lockRef.current))},[]);k.useEffect(function(){return vf.push(o),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",c,bf),document.addEventListener("touchmove",c,bf),document.addEventListener("touchstart",f,bf),function(){vf=vf.filter(function(y){return y!==o}),document.removeEventListener("wheel",c,bf),document.removeEventListener("touchmove",c,bf),document.removeEventListener("touchstart",f,bf)}},[]);var g=t.removeScrollBar,w=t.inert;return k.createElement(k.Fragment,null,w?k.createElement(o,{styles:ute(s)}):null,g?k.createElement(tte,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function hte(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const pte=Uee(cO,fte);var rv=k.forwardRef(function(t,e){return k.createElement(nv,Do({},t,{ref:e,sideCar:pte}))});rv.classNames=nv.classNames;var mte=[" ","Enter","ArrowUp","ArrowDown"],gte=[" ","Enter"],Nd="Select",[sv,iv,yte]=Jb(Nd),[Gh,u0e]=Mi(Nd,[yte,Hh]),ov=Hh(),[xte,lu]=Gh(Nd),[bte,vte]=Gh(Nd),pO=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:p,disabled:m,required:g,form:w}=t,y=ov(e),[T,j]=k.useState(null),[_,v]=k.useState(null),[P,D]=k.useState(!1),$=Vh(u),[U,K]=_a({prop:r,defaultProp:s??!1,onChange:o,caller:Nd}),[Y,G]=_a({prop:a,defaultProp:l,onChange:c,caller:Nd}),X=k.useRef(null),V=T?w||!!T.closest("form"):!0,[A,x]=k.useState(new Set),C=Array.from(A).map(L=>L.props.value).join(";");return i.jsx(Aj,{...y,children:i.jsxs(xte,{required:g,scope:e,trigger:T,onTriggerChange:j,valueNode:_,onValueNodeChange:v,valueNodeHasChildren:P,onValueNodeHasChildrenChange:D,contentId:ao(),value:Y,onValueChange:G,open:U,onOpenChange:K,dir:$,triggerPointerDownPosRef:X,disabled:m,children:[i.jsx(sv.Provider,{scope:e,children:i.jsx(bte,{scope:t.__scopeSelect,onNativeOptionAdd:k.useCallback(L=>{x(z=>new Set(z).add(L))},[]),onNativeOptionRemove:k.useCallback(L=>{x(z=>{const R=new Set(z);return R.delete(L),R})},[]),children:n})}),V?i.jsxs(OO,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:p,value:Y,onChange:L=>G(L.target.value),disabled:m,form:w,children:[Y===void 0?i.jsx("option",{value:""}):null,Array.from(A)]},C):null]})})};pO.displayName=Nd;var mO="SelectTrigger",gO=k.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,o=ov(n),a=lu(mO,n),l=a.disabled||r,c=un(e,a.onTriggerChange),u=iv(n),f=k.useRef("touch"),[p,m,g]=FO(y=>{const T=u().filter(v=>!v.disabled),j=T.find(v=>v.value===a.value),_=zO(T,y,j);_!==void 0&&a.onValueChange(_.value)}),w=y=>{l||(a.onOpenChange(!0),g()),y&&(a.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return i.jsx(Pj,{asChild:!0,...o,children:i.jsx(Pt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":LO(a.value)?"":void 0,...s,ref:c,onClick:nt(s.onClick,y=>{y.currentTarget.focus(),f.current!=="mouse"&&w(y)}),onPointerDown:nt(s.onPointerDown,y=>{f.current=y.pointerType;const T=y.target;T.hasPointerCapture(y.pointerId)&&T.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(w(y),y.preventDefault())}),onKeyDown:nt(s.onKeyDown,y=>{const T=p.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(T&&y.key===" ")&&mte.includes(y.key)&&(w(),y.preventDefault())})})})});gO.displayName=mO;var yO="SelectValue",xO=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:a="",...l}=t,c=lu(yO,n),{onValueNodeHasChildrenChange:u}=c,f=o!==void 0,p=un(e,c.onValueNodeChange);return as(()=>{u(f)},[u,f]),i.jsx(Pt.span,{...l,ref:p,style:{pointerEvents:"none"},children:LO(c.value)?i.jsx(i.Fragment,{children:a}):o})});xO.displayName=yO;var wte="SelectIcon",bO=k.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(Pt.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});bO.displayName=wte;var kte="SelectPortal",vO=t=>i.jsx(Kg,{asChild:!0,...t});vO.displayName=kte;var jd="SelectContent",wO=k.forwardRef((t,e)=>{const n=lu(jd,t.__scopeSelect),[r,s]=k.useState();if(as(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?Ag.createPortal(i.jsx(kO,{scope:t.__scopeSelect,children:i.jsx(sv.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),o):null}return i.jsx(TO,{...t,ref:e})});wO.displayName=jd;var xa=10,[kO,cu]=Gh(jd),Tte="SelectContentImpl",Nte=kd("SelectContent.RemoveScroll"),TO=k.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:y,avoidCollisions:T,...j}=t,_=lu(jd,n),[v,P]=k.useState(null),[D,$]=k.useState(null),U=un(e,H=>P(H)),[K,Y]=k.useState(null),[G,X]=k.useState(null),V=iv(n),[A,x]=k.useState(!1),C=k.useRef(!1);k.useEffect(()=>{if(v)return Mj(v)},[v]),vj();const L=k.useCallback(H=>{const[J,...Q]=V().map(ie=>ie.ref.current),[ne]=Q.slice(-1),se=document.activeElement;for(const ie of H)if(ie===se||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===J&&D&&(D.scrollTop=0),ie===ne&&D&&(D.scrollTop=D.scrollHeight),ie==null||ie.focus(),document.activeElement!==se))return},[V,D]),z=k.useCallback(()=>L([K,v]),[L,K,v]);k.useEffect(()=>{A&&z()},[A,z]);const{onOpenChange:R,triggerPointerDownPosRef:I}=_;k.useEffect(()=>{if(v){let H={x:0,y:0};const J=ne=>{var se,ie;H={x:Math.abs(Math.round(ne.pageX)-(((se=I.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((ie=I.current)==null?void 0:ie.y)??0))}},Q=ne=>{H.x<=10&&H.y<=10?ne.preventDefault():v.contains(ne.target)||R(!1),document.removeEventListener("pointermove",J),I.current=null};return I.current!==null&&(document.addEventListener("pointermove",J),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",J),document.removeEventListener("pointerup",Q,{capture:!0})}}},[v,R,I]),k.useEffect(()=>{const H=()=>R(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[R]);const[N,F]=FO(H=>{const J=V().filter(se=>!se.disabled),Q=J.find(se=>se.ref.current===document.activeElement),ne=zO(J,H,Q);ne&&setTimeout(()=>ne.ref.current.focus())}),E=k.useCallback((H,J,Q)=>{const ne=!C.current&&!Q;(_.value!==void 0&&_.value===J||ne)&&(Y(H),ne&&(C.current=!0))},[_.value]),M=k.useCallback(()=>v==null?void 0:v.focus(),[v]),ee=k.useCallback((H,J,Q)=>{const ne=!C.current&&!Q;(_.value!==void 0&&_.value===J||ne)&&X(H)},[_.value]),O=r==="popper"?ZT:NO,q=O===ZT?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:y,avoidCollisions:T}:{};return i.jsx(kO,{scope:n,content:v,viewport:D,onViewportChange:$,itemRefCallback:E,selectedItem:K,onItemLeave:M,itemTextRefCallback:ee,focusSelectedItem:z,selectedItemText:G,position:r,isPositioned:A,searchRef:N,children:i.jsx(rv,{as:Nte,allowPinchZoom:!0,children:i.jsx(Xb,{asChild:!0,trapped:_.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:nt(s,H=>{var J;(J=_.trigger)==null||J.focus({preventScroll:!0}),H.preventDefault()}),children:i.jsx(Hg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:i.jsx(O,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:H=>H.preventDefault(),...j,...q,onPlaced:()=>x(!0),ref:U,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:nt(j.onKeyDown,H=>{const J=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!J&&H.key.length===1&&F(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let ne=V().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(H.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const se=H.target,ie=ne.indexOf(se);ne=ne.slice(ie+1)}setTimeout(()=>L(ne)),H.preventDefault()}})})})})})})});TO.displayName=Tte;var jte="SelectItemAlignedPosition",NO=k.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,o=lu(jd,n),a=cu(jd,n),[l,c]=k.useState(null),[u,f]=k.useState(null),p=un(e,U=>f(U)),m=iv(n),g=k.useRef(!1),w=k.useRef(!0),{viewport:y,selectedItem:T,selectedItemText:j,focusSelectedItem:_}=a,v=k.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&y&&T&&j){const U=o.trigger.getBoundingClientRect(),K=u.getBoundingClientRect(),Y=o.valueNode.getBoundingClientRect(),G=j.getBoundingClientRect();if(o.dir!=="rtl"){const se=G.left-K.left,ie=Y.left-se,pe=U.left-ie,le=U.width+pe,me=Math.max(le,K.width),Ee=window.innerWidth-xa,te=WT(ie,[xa,Math.max(xa,Ee-me)]);l.style.minWidth=le+"px",l.style.left=te+"px"}else{const se=K.right-G.right,ie=window.innerWidth-Y.right-se,pe=window.innerWidth-U.right-ie,le=U.width+pe,me=Math.max(le,K.width),Ee=window.innerWidth-xa,te=WT(ie,[xa,Math.max(xa,Ee-me)]);l.style.minWidth=le+"px",l.style.right=te+"px"}const X=m(),V=window.innerHeight-xa*2,A=y.scrollHeight,x=window.getComputedStyle(u),C=parseInt(x.borderTopWidth,10),L=parseInt(x.paddingTop,10),z=parseInt(x.borderBottomWidth,10),R=parseInt(x.paddingBottom,10),I=C+L+A+R+z,N=Math.min(T.offsetHeight*5,I),F=window.getComputedStyle(y),E=parseInt(F.paddingTop,10),M=parseInt(F.paddingBottom,10),ee=U.top+U.height/2-xa,O=V-ee,q=T.offsetHeight/2,H=T.offsetTop+q,J=C+L+H,Q=I-J;if(J<=ee){const se=X.length>0&&T===X[X.length-1].ref.current;l.style.bottom="0px";const ie=u.clientHeight-y.offsetTop-y.offsetHeight,pe=Math.max(O,q+(se?M:0)+ie+z),le=J+pe;l.style.height=le+"px"}else{const se=X.length>0&&T===X[0].ref.current;l.style.top="0px";const pe=Math.max(ee,C+y.offsetTop+(se?E:0)+q)+Q;l.style.height=pe+"px",y.scrollTop=J-ee+y.offsetTop}l.style.margin=`${xa}px 0`,l.style.minHeight=N+"px",l.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,o.trigger,o.valueNode,l,u,y,T,j,o.dir,r]);as(()=>v(),[v]);const[P,D]=k.useState();as(()=>{u&&D(window.getComputedStyle(u).zIndex)},[u]);const $=k.useCallback(U=>{U&&w.current===!0&&(v(),_==null||_(),w.current=!1)},[v,_]);return i.jsx(Ste,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:$,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:i.jsx(Pt.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});NO.displayName=jte;var Cte="SelectPopperPosition",ZT=k.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=xa,...o}=t,a=ov(n);return i.jsx(Rj,{...a,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ZT.displayName=Cte;var[Ste,Lj]=Gh(jd,{}),e2="SelectViewport",jO=k.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,o=cu(e2,n),a=Lj(e2,n),l=un(e,o.onViewportChange),c=k.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(sv.Slot,{scope:n,children:i.jsx(Pt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:nt(s.onScroll,u=>{const f=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&p){const g=Math.abs(c.current-f.scrollTop);if(g>0){const w=window.innerHeight-xa*2,y=parseFloat(p.style.minHeight),T=parseFloat(p.style.height),j=Math.max(y,T);if(j<w){const _=j+g,v=Math.min(w,_),P=_-v;p.style.height=v+"px",p.style.bottom==="0px"&&(f.scrollTop=P>0?P:0,p.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});jO.displayName=e2;var CO="SelectGroup",[Ete,_te]=Gh(CO),Ate=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ao();return i.jsx(Ete,{scope:n,id:s,children:i.jsx(Pt.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Ate.displayName=CO;var SO="SelectLabel",Pte=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=_te(SO,n);return i.jsx(Pt.div,{id:s.id,...r,ref:e})});Pte.displayName=SO;var tb="SelectItem",[Rte,EO]=Gh(tb),_O=k.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...a}=t,l=lu(tb,n),c=cu(tb,n),u=l.value===r,[f,p]=k.useState(o??""),[m,g]=k.useState(!1),w=un(e,_=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,_,r,s)}),y=ao(),T=k.useRef("touch"),j=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Rte,{scope:n,value:r,disabled:s,textId:y,isSelected:u,onItemTextChange:k.useCallback(_=>{p(v=>v||((_==null?void 0:_.textContent)??"").trim())},[]),children:i.jsx(sv.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:i.jsx(Pt.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:w,onFocus:nt(a.onFocus,()=>g(!0)),onBlur:nt(a.onBlur,()=>g(!1)),onClick:nt(a.onClick,()=>{T.current!=="mouse"&&j()}),onPointerUp:nt(a.onPointerUp,()=>{T.current==="mouse"&&j()}),onPointerDown:nt(a.onPointerDown,_=>{T.current=_.pointerType}),onPointerMove:nt(a.onPointerMove,_=>{var v;T.current=_.pointerType,s?(v=c.onItemLeave)==null||v.call(c):T.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:nt(a.onPointerLeave,_=>{var v;_.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:nt(a.onKeyDown,_=>{var P;((P=c.searchRef)==null?void 0:P.current)!==""&&_.key===" "||(gte.includes(_.key)&&j(),_.key===" "&&_.preventDefault())})})})})});_O.displayName=tb;var Zp="SelectItemText",AO=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...o}=t,a=lu(Zp,n),l=cu(Zp,n),c=EO(Zp,n),u=vte(Zp,n),[f,p]=k.useState(null),m=un(e,j=>p(j),c.onItemTextChange,j=>{var _;return(_=l.itemTextRefCallback)==null?void 0:_.call(l,j,c.value,c.disabled)}),g=f==null?void 0:f.textContent,w=k.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:T}=u;return as(()=>(y(w),()=>T(w)),[y,T,w]),i.jsxs(i.Fragment,{children:[i.jsx(Pt.span,{id:c.textId,...o,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ag.createPortal(o.children,a.valueNode):null]})});AO.displayName=Zp;var PO="SelectItemIndicator",RO=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return EO(PO,n).isSelected?i.jsx(Pt.span,{"aria-hidden":!0,...r,ref:e}):null});RO.displayName=PO;var t2="SelectScrollUpButton",IO=k.forwardRef((t,e)=>{const n=cu(t2,t.__scopeSelect),r=Lj(t2,t.__scopeSelect),[s,o]=k.useState(!1),a=un(e,r.onScrollButtonChange);return as(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(DO,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});IO.displayName=t2;var n2="SelectScrollDownButton",MO=k.forwardRef((t,e)=>{const n=cu(n2,t.__scopeSelect),r=Lj(n2,t.__scopeSelect),[s,o]=k.useState(!1),a=un(e,r.onScrollButtonChange);return as(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;o(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(DO,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});MO.displayName=n2;var DO=k.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,o=cu("SelectScrollButton",n),a=k.useRef(null),l=iv(n),c=k.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return k.useEffect(()=>()=>c(),[c]),as(()=>{var f;const u=l().find(p=>p.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(Pt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:nt(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:nt(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:nt(s.onPointerLeave,()=>{c()})})}),Ite="SelectSeparator",Mte=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(Pt.div,{"aria-hidden":!0,...r,ref:e})});Mte.displayName=Ite;var r2="SelectArrow",Dte=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ov(n),o=lu(r2,n),a=cu(r2,n);return o.open&&a.position==="popper"?i.jsx(Ij,{...s,...r,ref:e}):null});Dte.displayName=r2;var Ote="SelectBubbleInput",OO=k.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=k.useRef(null),o=un(r,s),a=MD(e);return k.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&f){const p=new Event("change",{bubbles:!0});f.call(l,e),l.dispatchEvent(p)}},[a,e]),i.jsx(Pt.select,{...n,style:{...DD,...n.style},ref:o,defaultValue:e})});OO.displayName=Ote;function LO(t){return t===""||t===void 0}function FO(t){const e=ys(t),n=k.useRef(""),r=k.useRef(0),s=k.useCallback(a=>{const l=n.current+a;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),o=k.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function zO(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=Lte(t,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Lte(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Fte=pO,zte=gO,$te=xO,Bte=bO,Ute=vO,Vte=wO,qte=jO,Wte=_O,Hte=AO,Gte=RO,Kte=IO,Yte=MO;function $O(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=$O(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function BO(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=$O(t))&&(r&&(r+=" "),r+=e);return r}const Fj="-",Jte=t=>{const e=Qte(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Fj);return l[0]===""&&l.length!==1&&l.shift(),UO(l,e)||Xte(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},UO=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?UO(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(Fj);return(a=e.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},a5=/^\[(.+)\]$/,Xte=t=>{if(a5.test(t)){const e=a5.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Qte=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return ene(Object.entries(t.classGroups),n).forEach(([o,a])=>{s2(a,r,o,e)}),r},s2=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:l5(e,s);o.classGroupId=n;return}if(typeof s=="function"){if(Zte(s)){s2(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{s2(a,l5(e,o),n,r)})})},l5=(t,e)=>{let n=t;return e.split(Fj).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Zte=t=>t.isThemeGetter,ene=(t,e)=>e?t.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[e+a,l])):o);return[n,s]}):t,tne=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},VO="!",nne=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],o=e.length,a=l=>{const c=[];let u=0,f=0,p;for(let T=0;T<l.length;T++){let j=l[T];if(u===0){if(j===s&&(r||l.slice(T,T+o)===e)){c.push(l.slice(f,T)),f=T+o;continue}if(j==="/"){p=T;continue}}j==="["?u++:j==="]"&&u--}const m=c.length===0?l:l.substring(f),g=m.startsWith(VO),w=g?m.substring(1):m,y=p&&p>f?p-f:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:a}):a},rne=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},sne=t=>({cache:tne(t.cacheSize),parseClassName:nne(t),...Jte(t)}),ine=/\s+/,one=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],a=t.trim().split(ine);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:f,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}=n(u);let w=!!g,y=r(w?m.substring(0,g):m);if(!y){if(!w){l=u+(l.length>0?" "+l:l);continue}if(y=r(m),!y){l=u+(l.length>0?" "+l:l);continue}w=!1}const T=rne(f).join(":"),j=p?T+VO:T,_=j+y;if(o.includes(_))continue;o.push(_);const v=s(y,w);for(let P=0;P<v.length;++P){const D=v[P];o.push(j+D)}l=u+(l.length>0?" "+l:l)}return l};function ane(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=qO(e))&&(r&&(r+=" "),r+=n);return r}const qO=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=qO(t[r]))&&(n&&(n+=" "),n+=e);return n};function lne(t,...e){let n,r,s,o=a;function a(c){const u=e.reduce((f,p)=>p(f),t());return n=sne(u),r=n.cache.get,s=n.cache.set,o=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=one(c,n);return s(c,f),f}return function(){return o(ane.apply(null,arguments))}}const Qn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},WO=/^\[(?:([a-z-]+):)?(.+)\]$/i,cne=/^\d+\/\d+$/,une=new Set(["px","full","screen"]),dne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fne=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hne=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,pne=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mne=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Al=t=>sh(t)||une.has(t)||cne.test(t),Cc=t=>Kh(t,"length",Tne),sh=t=>!!t&&!Number.isNaN(Number(t)),hk=t=>Kh(t,"number",sh),Lp=t=>!!t&&Number.isInteger(Number(t)),gne=t=>t.endsWith("%")&&sh(t.slice(0,-1)),sn=t=>WO.test(t),Sc=t=>dne.test(t),yne=new Set(["length","size","percentage"]),xne=t=>Kh(t,yne,HO),bne=t=>Kh(t,"position",HO),vne=new Set(["image","url"]),wne=t=>Kh(t,vne,jne),kne=t=>Kh(t,"",Nne),Fp=()=>!0,Kh=(t,e,n)=>{const r=WO.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Tne=t=>fne.test(t)&&!hne.test(t),HO=()=>!1,Nne=t=>pne.test(t),jne=t=>mne.test(t),Cne=()=>{const t=Qn("colors"),e=Qn("spacing"),n=Qn("blur"),r=Qn("brightness"),s=Qn("borderColor"),o=Qn("borderRadius"),a=Qn("borderSpacing"),l=Qn("borderWidth"),c=Qn("contrast"),u=Qn("grayscale"),f=Qn("hueRotate"),p=Qn("invert"),m=Qn("gap"),g=Qn("gradientColorStops"),w=Qn("gradientColorStopPositions"),y=Qn("inset"),T=Qn("margin"),j=Qn("opacity"),_=Qn("padding"),v=Qn("saturate"),P=Qn("scale"),D=Qn("sepia"),$=Qn("skew"),U=Qn("space"),K=Qn("translate"),Y=()=>["auto","contain","none"],G=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto",sn,e],V=()=>[sn,e],A=()=>["",Al,Cc],x=()=>["auto",sh,sn],C=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",sn],N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[sh,sn];return{cacheSize:500,separator:":",theme:{colors:[Fp],spacing:[Al,Cc],blur:["none","",Sc,sn],brightness:F(),borderColor:[t],borderRadius:["none","","full",Sc,sn],borderSpacing:V(),borderWidth:A(),contrast:F(),grayscale:I(),hueRotate:F(),invert:I(),gap:V(),gradientColorStops:[t],gradientColorStopPositions:[gne,Cc],inset:X(),margin:X(),opacity:F(),padding:V(),saturate:F(),scale:F(),sepia:I(),skew:F(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",sn]}],container:["container"],columns:[{columns:[Sc]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...C(),sn]}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:Y()}],"overscroll-x":[{"overscroll-x":Y()}],"overscroll-y":[{"overscroll-y":Y()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Lp,sn]}],basis:[{basis:X()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",sn]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",Lp,sn]}],"grid-cols":[{"grid-cols":[Fp]}],"col-start-end":[{col:["auto",{span:["full",Lp,sn]},sn]}],"col-start":[{"col-start":x()}],"col-end":[{"col-end":x()}],"grid-rows":[{"grid-rows":[Fp]}],"row-start-end":[{row:["auto",{span:[Lp,sn]},sn]}],"row-start":[{"row-start":x()}],"row-end":[{"row-end":x()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",sn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",sn]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[U]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[U]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",sn,e]}],"min-w":[{"min-w":[sn,e,"min","max","fit"]}],"max-w":[{"max-w":[sn,e,"none","full","min","max","fit","prose",{screen:[Sc]},Sc]}],h:[{h:[sn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[sn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[sn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[sn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Sc,Cc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",hk]}],"font-family":[{font:[Fp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",sn]}],"line-clamp":[{"line-clamp":["none",sh,hk]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Al,sn]}],"list-image":[{"list-image":["none",sn]}],"list-style-type":[{list:["none","disc","decimal",sn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Al,Cc]}],"underline-offset":[{"underline-offset":["auto",Al,sn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",sn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",sn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...C(),bne]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",xne]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},wne]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:L()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[Al,sn]}],"outline-w":[{outline:[Al,Cc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Al,Cc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Sc,kne]}],"shadow-color":[{shadow:[Fp]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Sc,sn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[v]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",sn]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",sn]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",sn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Lp,sn]}],"translate-x":[{"translate-x":[K]}],"translate-y":[{"translate-y":[K]}],"skew-x":[{"skew-x":[$]}],"skew-y":[{"skew-y":[$]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",sn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",sn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",sn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Al,Cc,hk]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Sne=lne(Cne);function je(...t){return Sne(BO(t))}function Cd({...t}){return i.jsx(Fte,{"data-slot":"select",...t})}function Sd({...t}){return i.jsx($te,{"data-slot":"select-value",...t})}function Ed({className:t,size:e="default",children:n,...r}){return i.jsxs(zte,{"data-slot":"select-trigger","data-size":e,className:je("border-[#614E41] data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,i.jsx(Bte,{asChild:!0,children:i.jsx(Ii,{className:"size-4 opacity-70 text-foreground"})})]})}function _d({className:t,children:e,position:n="popper",...r}){return i.jsx(Ute,{children:i.jsxs(Vte,{"data-slot":"select-content",className:je("bg-popover/90 backdrop-blur-md text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-xl border border-[#614E41] shadow-xl",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(Ene,{}),i.jsx(qte,{className:je("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),i.jsx(_ne,{})]})})}function Ds({className:t,children:e,...n}){return i.jsxs(Wte,{"data-slot":"select-item",className:je("focus:bg-accent focus:text-accent-foreground data-[state=checked]:bg-[#614E41]/15 hover:bg-[#614E41]/10 active:bg-[#614E41]/20 [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[i.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:i.jsx(Gte,{children:i.jsx(Bs,{className:"size-4"})})}),i.jsx(Hte,{children:e})]})}function Ene({className:t,...e}){return i.jsx(Kte,{"data-slot":"select-scroll-up-button",className:je("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(qg,{className:"size-4"})})}function _ne({className:t,...e}){return i.jsx(Yte,{"data-slot":"select-scroll-down-button",className:je("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Ii,{className:"size-4"})})}const Ex=t=>{if(!t)return"";if(typeof t=="string")return t;if(typeof t.message=="string")return t.message;try{return JSON.stringify(t)}catch{return String(t)}},c5=()=>{const{chainId:t,switchNetwork:e,addNetwork:n,isSupportedNetwork:r}=an(),[s,o]=Ae.useState(!1),a=()=>Object.entries(jt).filter(([f,p])=>{const m=p.contractAddresses;return(m==null?void 0:m.protocolManager)&&m.protocolManager!=="0x..."&&(m==null?void 0:m.poolDeployer)&&m.poolDeployer!=="0x..."}),l=a(),c=async f=>{var m;const p=parseInt(f,10);o(!0);try{await e(p)}catch(g){const w=Ex(g).toLowerCase();if(g&&g.code===4902||w.includes("add this network")||w.includes("unrecognized chain id")||g&&g.code===-32603)try{await n(p),setTimeout(async()=>{try{await e(p)}catch(y){setTimeout(()=>{window.ethereum&&window.ethereum.chainId&&parseInt(window.ethereum.chainId,16)!==p&&re.error("Failed to switch to the new network after adding: "+Ex(y))},1e3)}},500)}catch(y){setTimeout(()=>{window.ethereum&&window.ethereum.chainId&&parseInt(window.ethereum.chainId,16)!==p&&re.error("Failed to add network: "+Ex(y))},1e3)}else!((m=g.message)!=null&&m.includes("User rejected"))&&g.code!==4001&&setTimeout(()=>{window.ethereum&&window.ethereum.chainId&&parseInt(window.ethereum.chainId,16)!==p&&re.error("Failed to switch network: "+Ex(g))},1e3)}finally{o(!1)}},u=t&&l.length>0&&!l.some(([f])=>parseInt(f)===t);return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Cd,{value:t?String(t):"",onValueChange:c,disabled:s,children:[i.jsx(Ed,{className:je("min-w-[160px] sm:min-w-[180px] text-foreground rounded-full transition-all duration-200",s&&"opacity-70",u&&"border-destructive/50 bg-destructive/5",!u&&t&&"border-primary/30"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[s?i.jsx($r,{className:"h-3 w-3 animate-spin text-primary"}):t?i.jsx("div",{className:je("w-2 h-2 rounded-full",u?"bg-destructive":"bg-green-500 animate-pulse")}):i.jsx("div",{className:"w-2 h-2 rounded-full bg-muted-foreground"}),i.jsx(Sd,{placeholder:"Select Network"})]})}),i.jsx(_d,{className:"border-border",children:a().map(([f,p])=>{const m=parseInt(f)===t;return i.jsx(Ds,{value:f,className:je("transition-colors",m&&"bg-primary/10"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:je("w-4 h-4 rounded-full flex items-center justify-center text-[8px] font-bold",m?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:p.name.charAt(0)}),i.jsx("span",{children:p.name}),m&&i.jsx(hn,{className:"h-3 w-3 text-primary ml-auto"})]})},f)})})]}),l.length===0&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-destructive",children:[i.jsx(Kt,{className:"h-3 w-3"}),i.jsx("span",{children:"No Networks"})]}),u&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-destructive",children:[i.jsx(Kt,{className:"h-3 w-3"}),i.jsx("span",{children:"Unsupported"})]})]})},Ec=({className:t="",size:e="md",showIcon:n=!1,alt:r="Dropr",...s})=>{const{getCurrentTheme:o}=$b(),l={xs:"h-4 w-auto",sm:"h-6 w-auto",md:"h-8 w-auto",lg:"h-10 w-auto",xl:"h-12 w-auto"}[e]||e,c=()=>n?"/images/logo/logo-icon.png":o().id==="light"?"/images/logo/Asset 25.svg":"/images/logo/Asset 26.svg";return i.jsx("img",{src:c(),alt:r,className:`${l} transition-opacity duration-200 ${t}`,...s})},Ln=()=>{const t=()=>{if(typeof window>"u")return{isMobile:!1,isTablet:!1,isDesktop:!0,isTouchDevice:!1,screenWidth:1024,isInitialized:!1};const r=window.innerWidth;return{isMobile:r<768,isTablet:r>=768&&r<1024,isDesktop:r>=1024,isTouchDevice:"ontouchstart"in window||navigator.maxTouchPoints>0,screenWidth:r,isInitialized:!0}},[e,n]=k.useState(t);return k.useEffect(()=>{const r=()=>{const a=window.innerWidth,l=window.innerHeight,c=e.isMobile&&Math.abs(a-e.screenWidth)<50&&Math.abs(l-window.screen.height)>200;if(c){console.log("Skipping breakpoint update - likely keyboard resize");return}const u={isMobile:a<768,isTablet:a>=768&&a<1024,isDesktop:a>=1024,isTouchDevice:"ontouchstart"in window||navigator.maxTouchPoints>0,screenWidth:a,isInitialized:!0};a<768&&console.log("Mobile detected:",{width:a,height:l,userAgent:navigator.userAgent,touchDevice:u.isTouchDevice,isKeyboardResize:c}),n(u)};r();let s;const o=()=>{clearTimeout(s),s=setTimeout(r,150)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o),clearTimeout(s)}},[e.isMobile,e.screenWidth]),e},u5=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,d5=BO,uu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return d5(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=e,a=Object.keys(s).map(u=>{const f=n==null?void 0:n[u],p=o==null?void 0:o[u];if(f===null)return null;const m=u5(f)||u5(p);return s[u][m]}),l=n&&Object.entries(n).reduce((u,f)=>{let[p,m]=f;return m===void 0||(u[p]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:p,className:m,...g}=f;return Object.entries(g).every(w=>{let[y,T]=w;return Array.isArray(T)?T.includes({...o,...l}[y]):{...o,...l}[y]===T})?[...u,p,m]:u},[]);return d5(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},Ane=uu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full font-medium transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none",{variants:{variant:{primary:"bg-brand-500 text-white shadow-sm hover:bg-brand-600 hover:shadow-md active:scale-[0.98]",secondary:"border-2 border-brand-500 text-brand-500 bg-transparent shadow-sm hover:bg-brand-500/10 active:scale-[0.98]",tertiary:"text-[color:var(--brand-tertiary)] bg-transparent hover:bg-brand-500/10 active:scale-[0.98]",gradient:"bg-gradient-to-r from-brand-500 via-brand-400 to-brand-500 bg-[length:200%_100%] text-white shadow-lg hover:shadow-xl hover:shadow-brand-500/20 animate-gradient-x active:scale-[0.98]",glow:"bg-brand-500 text-white shadow-lg hover:shadow-glow-primary hover:bg-brand-600 active:scale-[0.98]",default:"bg-brand-500 text-white shadow-sm hover:bg-brand-600 hover:shadow-md active:scale-[0.98]",outline:"border-2 border-brand-500 text-brand-500 bg-transparent shadow-sm hover:bg-brand-500/10 active:scale-[0.98]",ghost:"text-[color:var(--brand-tertiary)] hover:bg-brand-500/10 active:scale-[0.98]",link:"text-[color:var(--brand-tertiary)] underline-offset-4 hover:underline",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 hover:shadow-glow-error active:scale-[0.98]",success:"bg-success text-success-foreground shadow-sm hover:bg-success/90 hover:shadow-glow-success active:scale-[0.98]",warning:"bg-warning text-warning-foreground shadow-sm hover:bg-warning/90 hover:shadow-glow-warning active:scale-[0.98]",accent:"bg-accent text-accent-foreground shadow-sm hover:bg-accent/90 active:scale-[0.98]"},size:{md:"h-10 px-4 py-2 text-[length:var(--text-base)] has-[>svg]:px-3",default:"h-10 px-4 py-2 text-[length:var(--text-base)] has-[>svg]:px-3",sm:"h-8 gap-1.5 px-3 py-2 text-[length:var(--text-sm)] has-[>svg]:px-2.5",lg:"h-12 px-6 py-3 text-[length:var(--text-base)] has-[>svg]:px-4",xl:"h-14 px-8 py-3 text-[length:var(--text-lg)] has-[>svg]:px-5",icon:"size-9"}},defaultVariants:{variant:"primary",size:"md"}}),we=k.forwardRef(function({className:e,variant:n,size:r,asChild:s=!1,loading:o=!1,loadingText:a,children:l,...c},u){const f=s?oD:"button";return i.jsx(f,{ref:u,"data-slot":"button",type:c.type??"button","aria-disabled":c.disabled||o?!0:void 0,disabled:c.disabled||o,className:je(Ane({variant:n,size:r,className:e})),...c,children:o?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx($r,{className:"h-4 w-4 animate-spin"}),a&&i.jsx("span",{children:a})]}):l})});we.displayName="Button";function Pne(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var Vs=t=>{const{present:e,children:n}=t,r=Rne(e),s=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),o=un(r.ref,Ine(s));return typeof n=="function"||r.isPresent?k.cloneElement(s,{ref:o}):null};Vs.displayName="Presence";function Rne(t){const[e,n]=k.useState(),r=k.useRef(null),s=k.useRef(t),o=k.useRef("none"),a=t?"mounted":"unmounted",[l,c]=Pne(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const u=_x(r.current);o.current=l==="mounted"?u:"none"},[l]),as(()=>{const u=r.current,f=s.current;if(f!==t){const m=o.current,g=_x(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),as(()=>{if(e){let u;const f=e.ownerDocument.defaultView??window,p=g=>{const y=_x(r.current).includes(g.animationName);if(g.target===e&&y&&(c("ANIMATION_END"),!s.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",u=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},m=g=>{g.target===e&&(o.current=_x(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{f.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:k.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function _x(t){return(t==null?void 0:t.animationName)||"none"}function Ine(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var pk="rovingFocusGroup.onEntryFocus",Mne={bubbles:!1,cancelable:!0},Yg="RovingFocusGroup",[i2,GO,Dne]=Jb(Yg),[One,av]=Mi(Yg,[Dne]),[Lne,Fne]=One(Yg),KO=k.forwardRef((t,e)=>i.jsx(i2.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(i2.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(zne,{...t,ref:e})})}));KO.displayName=Yg;var zne=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...p}=t,m=k.useRef(null),g=un(e,m),w=Vh(o),[y,T]=_a({prop:a,defaultProp:l??null,onChange:c,caller:Yg}),[j,_]=k.useState(!1),v=ys(u),P=GO(n),D=k.useRef(!1),[$,U]=k.useState(0);return k.useEffect(()=>{const K=m.current;if(K)return K.addEventListener(pk,v),()=>K.removeEventListener(pk,v)},[v]),i.jsx(Lne,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:y,onItemFocus:k.useCallback(K=>T(K),[T]),onItemShiftTab:k.useCallback(()=>_(!0),[]),onFocusableItemAdd:k.useCallback(()=>U(K=>K+1),[]),onFocusableItemRemove:k.useCallback(()=>U(K=>K-1),[]),children:i.jsx(Pt.div,{tabIndex:j||$===0?-1:0,"data-orientation":r,...p,ref:g,style:{outline:"none",...t.style},onMouseDown:nt(t.onMouseDown,()=>{D.current=!0}),onFocus:nt(t.onFocus,K=>{const Y=!D.current;if(K.target===K.currentTarget&&Y&&!j){const G=new CustomEvent(pk,Mne);if(K.currentTarget.dispatchEvent(G),!G.defaultPrevented){const X=P().filter(L=>L.focusable),V=X.find(L=>L.active),A=X.find(L=>L.id===y),C=[V,A,...X].filter(Boolean).map(L=>L.ref.current);XO(C,f)}}D.current=!1}),onBlur:nt(t.onBlur,()=>_(!1))})})}),YO="RovingFocusGroupItem",JO=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:a,...l}=t,c=ao(),u=o||c,f=Fne(YO,n),p=f.currentTabStopId===u,m=GO(n),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:y}=f;return k.useEffect(()=>{if(r)return g(),()=>w()},[r,g,w]),i.jsx(i2.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:i.jsx(Pt.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...l,ref:e,onMouseDown:nt(t.onMouseDown,T=>{r?f.onItemFocus(u):T.preventDefault()}),onFocus:nt(t.onFocus,()=>f.onItemFocus(u)),onKeyDown:nt(t.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){f.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const j=Une(T,f.orientation,f.dir);if(j!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let v=m().filter(P=>P.focusable).map(P=>P.ref.current);if(j==="last")v.reverse();else if(j==="prev"||j==="next"){j==="prev"&&v.reverse();const P=v.indexOf(T.currentTarget);v=f.loop?Vne(v,P+1):v.slice(P+1)}setTimeout(()=>XO(v))}}),children:typeof a=="function"?a({isCurrentTabStop:p,hasTabStop:y!=null}):a})})});JO.displayName=YO;var $ne={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bne(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Une(t,e,n){const r=Bne(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return $ne[r]}function XO(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Vne(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var QO=KO,ZO=JO,o2=["Enter"," "],qne=["ArrowDown","PageUp","Home"],eL=["ArrowUp","PageDown","End"],Wne=[...qne,...eL],Hne={ltr:[...o2,"ArrowRight"],rtl:[...o2,"ArrowLeft"]},Gne={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Jg="Menu",[fg,Kne,Yne]=Jb(Jg),[$d,tL]=Mi(Jg,[Yne,Hh,av]),lv=Hh(),nL=av(),[Jne,Bd]=$d(Jg),[Xne,Xg]=$d(Jg),rL=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:o,modal:a=!0}=t,l=lv(e),[c,u]=k.useState(null),f=k.useRef(!1),p=ys(o),m=Vh(s);return k.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),i.jsx(Aj,{...l,children:i.jsx(Jne,{scope:e,open:n,onOpenChange:p,content:c,onContentChange:u,children:i.jsx(Xne,{scope:e,onClose:k.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:m,modal:a,children:r})})})};rL.displayName=Jg;var Qne="MenuAnchor",zj=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=lv(n);return i.jsx(Pj,{...s,...r,ref:e})});zj.displayName=Qne;var $j="MenuPortal",[Zne,sL]=$d($j,{forceMount:void 0}),iL=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,o=Bd($j,e);return i.jsx(Zne,{scope:e,forceMount:n,children:i.jsx(Vs,{present:n||o.open,children:i.jsx(Kg,{asChild:!0,container:s,children:r})})})};iL.displayName=$j;var Vo="MenuContent",[ere,Bj]=$d(Vo),oL=k.forwardRef((t,e)=>{const n=sL(Vo,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Bd(Vo,t.__scopeMenu),a=Xg(Vo,t.__scopeMenu);return i.jsx(fg.Provider,{scope:t.__scopeMenu,children:i.jsx(Vs,{present:r||o.open,children:i.jsx(fg.Slot,{scope:t.__scopeMenu,children:a.modal?i.jsx(tre,{...s,ref:e}):i.jsx(nre,{...s,ref:e})})})})}),tre=k.forwardRef((t,e)=>{const n=Bd(Vo,t.__scopeMenu),r=k.useRef(null),s=un(e,r);return k.useEffect(()=>{const o=r.current;if(o)return Mj(o)},[]),i.jsx(Uj,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:nt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),nre=k.forwardRef((t,e)=>{const n=Bd(Vo,t.__scopeMenu);return i.jsx(Uj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),rre=kd("MenuContent.ScrollLock"),Uj=k.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:m,onDismiss:g,disableOutsideScroll:w,...y}=t,T=Bd(Vo,n),j=Xg(Vo,n),_=lv(n),v=nL(n),P=Kne(n),[D,$]=k.useState(null),U=k.useRef(null),K=un(e,U,T.onContentChange),Y=k.useRef(0),G=k.useRef(""),X=k.useRef(0),V=k.useRef(null),A=k.useRef("right"),x=k.useRef(0),C=w?rv:k.Fragment,L=w?{as:rre,allowPinchZoom:!0}:void 0,z=I=>{var H,J;const N=G.current+I,F=P().filter(Q=>!Q.disabled),E=document.activeElement,M=(H=F.find(Q=>Q.ref.current===E))==null?void 0:H.textValue,ee=F.map(Q=>Q.textValue),O=mre(ee,N,M),q=(J=F.find(Q=>Q.textValue===O))==null?void 0:J.ref.current;(function Q(ne){G.current=ne,window.clearTimeout(Y.current),ne!==""&&(Y.current=window.setTimeout(()=>Q(""),1e3))})(N),q&&setTimeout(()=>q.focus())};k.useEffect(()=>()=>window.clearTimeout(Y.current),[]),vj();const R=k.useCallback(I=>{var F,E;return A.current===((F=V.current)==null?void 0:F.side)&&yre(I,(E=V.current)==null?void 0:E.area)},[]);return i.jsx(ere,{scope:n,searchRef:G,onItemEnter:k.useCallback(I=>{R(I)&&I.preventDefault()},[R]),onItemLeave:k.useCallback(I=>{var N;R(I)||((N=U.current)==null||N.focus(),$(null))},[R]),onTriggerLeave:k.useCallback(I=>{R(I)&&I.preventDefault()},[R]),pointerGraceTimerRef:X,onPointerGraceIntentChange:k.useCallback(I=>{V.current=I},[]),children:i.jsx(C,{...L,children:i.jsx(Xb,{asChild:!0,trapped:s,onMountAutoFocus:nt(o,I=>{var N;I.preventDefault(),(N=U.current)==null||N.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(Hg,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:m,onDismiss:g,children:i.jsx(QO,{asChild:!0,...v,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:D,onCurrentTabStopIdChange:$,onEntryFocus:nt(c,I=>{j.isUsingKeyboardRef.current||I.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Rj,{role:"menu","aria-orientation":"vertical","data-state":kL(T.open),"data-radix-menu-content":"",dir:j.dir,..._,...y,ref:K,style:{outline:"none",...y.style},onKeyDown:nt(y.onKeyDown,I=>{const F=I.target.closest("[data-radix-menu-content]")===I.currentTarget,E=I.ctrlKey||I.altKey||I.metaKey,M=I.key.length===1;F&&(I.key==="Tab"&&I.preventDefault(),!E&&M&&z(I.key));const ee=U.current;if(I.target!==ee||!Wne.includes(I.key))return;I.preventDefault();const q=P().filter(H=>!H.disabled).map(H=>H.ref.current);eL.includes(I.key)&&q.reverse(),hre(q)}),onBlur:nt(t.onBlur,I=>{I.currentTarget.contains(I.target)||(window.clearTimeout(Y.current),G.current="")}),onPointerMove:nt(t.onPointerMove,hg(I=>{const N=I.target,F=x.current!==I.clientX;if(I.currentTarget.contains(N)&&F){const E=I.clientX>x.current?"right":"left";A.current=E,x.current=I.clientX}}))})})})})})})});oL.displayName=Vo;var sre="MenuGroup",Vj=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Pt.div,{role:"group",...r,ref:e})});Vj.displayName=sre;var ire="MenuLabel",aL=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Pt.div,{...r,ref:e})});aL.displayName=ire;var nb="MenuItem",f5="menu.itemSelect",cv=k.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,o=k.useRef(null),a=Xg(nb,t.__scopeMenu),l=Bj(nb,t.__scopeMenu),c=un(e,o),u=k.useRef(!1),f=()=>{const p=o.current;if(!n&&p){const m=new CustomEvent(f5,{bubbles:!0,cancelable:!0});p.addEventListener(f5,g=>r==null?void 0:r(g),{once:!0}),lD(p,m),m.defaultPrevented?u.current=!1:a.onClose()}};return i.jsx(lL,{...s,ref:c,disabled:n,onClick:nt(t.onClick,f),onPointerDown:p=>{var m;(m=t.onPointerDown)==null||m.call(t,p),u.current=!0},onPointerUp:nt(t.onPointerUp,p=>{var m;u.current||(m=p.currentTarget)==null||m.click()}),onKeyDown:nt(t.onKeyDown,p=>{const m=l.searchRef.current!=="";n||m&&p.key===" "||o2.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});cv.displayName=nb;var lL=k.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=t,a=Bj(nb,n),l=nL(n),c=k.useRef(null),u=un(e,c),[f,p]=k.useState(!1),[m,g]=k.useState("");return k.useEffect(()=>{const w=c.current;w&&g((w.textContent??"").trim())},[o.children]),i.jsx(fg.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:i.jsx(ZO,{asChild:!0,...l,focusable:!r,children:i.jsx(Pt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:nt(t.onPointerMove,hg(w=>{r?a.onItemLeave(w):(a.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:nt(t.onPointerLeave,hg(w=>a.onItemLeave(w))),onFocus:nt(t.onFocus,()=>p(!0)),onBlur:nt(t.onBlur,()=>p(!1))})})})}),ore="MenuCheckboxItem",cL=k.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(pL,{scope:t.__scopeMenu,checked:n,children:i.jsx(cv,{role:"menuitemcheckbox","aria-checked":rb(n)?"mixed":n,...s,ref:e,"data-state":Wj(n),onSelect:nt(s.onSelect,()=>r==null?void 0:r(rb(n)?!0:!n),{checkForDefaultPrevented:!1})})})});cL.displayName=ore;var uL="MenuRadioGroup",[are,lre]=$d(uL,{value:void 0,onValueChange:()=>{}}),dL=k.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,o=ys(r);return i.jsx(are,{scope:t.__scopeMenu,value:n,onValueChange:o,children:i.jsx(Vj,{...s,ref:e})})});dL.displayName=uL;var fL="MenuRadioItem",hL=k.forwardRef((t,e)=>{const{value:n,...r}=t,s=lre(fL,t.__scopeMenu),o=n===s.value;return i.jsx(pL,{scope:t.__scopeMenu,checked:o,children:i.jsx(cv,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":Wj(o),onSelect:nt(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});hL.displayName=fL;var qj="MenuItemIndicator",[pL,cre]=$d(qj,{checked:!1}),mL=k.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,o=cre(qj,n);return i.jsx(Vs,{present:r||rb(o.checked)||o.checked===!0,children:i.jsx(Pt.span,{...s,ref:e,"data-state":Wj(o.checked)})})});mL.displayName=qj;var ure="MenuSeparator",gL=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Pt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});gL.displayName=ure;var dre="MenuArrow",yL=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=lv(n);return i.jsx(Ij,{...s,...r,ref:e})});yL.displayName=dre;var fre="MenuSub",[d0e,xL]=$d(fre),em="MenuSubTrigger",bL=k.forwardRef((t,e)=>{const n=Bd(em,t.__scopeMenu),r=Xg(em,t.__scopeMenu),s=xL(em,t.__scopeMenu),o=Bj(em,t.__scopeMenu),a=k.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:t.__scopeMenu},f=k.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return k.useEffect(()=>f,[f]),k.useEffect(()=>{const p=l.current;return()=>{window.clearTimeout(p),c(null)}},[l,c]),i.jsx(zj,{asChild:!0,...u,children:i.jsx(lL,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":kL(n.open),...t,ref:Yb(e,s.onTriggerChange),onClick:p=>{var m;(m=t.onClick)==null||m.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:nt(t.onPointerMove,hg(p=>{o.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:nt(t.onPointerLeave,hg(p=>{var g,w;f();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const y=(w=n.content)==null?void 0:w.dataset.side,T=y==="right",j=T?-5:5,_=m[T?"left":"right"],v=m[T?"right":"left"];o.onPointerGraceIntentChange({area:[{x:p.clientX+j,y:p.clientY},{x:_,y:m.top},{x:v,y:m.top},{x:v,y:m.bottom},{x:_,y:m.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(p),p.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:nt(t.onKeyDown,p=>{var g;const m=o.searchRef.current!=="";t.disabled||m&&p.key===" "||Hne[r.dir].includes(p.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),p.preventDefault())})})})});bL.displayName=em;var vL="MenuSubContent",wL=k.forwardRef((t,e)=>{const n=sL(Vo,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Bd(Vo,t.__scopeMenu),a=Xg(Vo,t.__scopeMenu),l=xL(vL,t.__scopeMenu),c=k.useRef(null),u=un(e,c);return i.jsx(fg.Provider,{scope:t.__scopeMenu,children:i.jsx(Vs,{present:r||o.open,children:i.jsx(fg.Slot,{scope:t.__scopeMenu,children:i.jsx(Uj,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var p;a.isUsingKeyboardRef.current&&((p=c.current)==null||p.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:nt(t.onFocusOutside,f=>{f.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:nt(t.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:nt(t.onKeyDown,f=>{var g;const p=f.currentTarget.contains(f.target),m=Gne[a.dir].includes(f.key);p&&m&&(o.onOpenChange(!1),(g=l.trigger)==null||g.focus(),f.preventDefault())})})})})})});wL.displayName=vL;function kL(t){return t?"open":"closed"}function rb(t){return t==="indeterminate"}function Wj(t){return rb(t)?"indeterminate":t?"checked":"unchecked"}function hre(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function pre(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function mre(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=pre(t,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function gre(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const l=e[o],c=e[a],u=l.x,f=l.y,p=c.x,m=c.y;f>r!=m>r&&n<(p-u)*(r-f)/(m-f)+u&&(s=!s)}return s}function yre(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return gre(n,e)}function hg(t){return e=>e.pointerType==="mouse"?t(e):void 0}var xre=rL,bre=zj,vre=iL,wre=oL,kre=Vj,Tre=aL,Nre=cv,jre=cL,Cre=dL,Sre=hL,Ere=mL,_re=gL,Are=yL,Pre=bL,Rre=wL,uv="DropdownMenu",[Ire,f0e]=Mi(uv,[tL]),ci=tL(),[Mre,TL]=Ire(uv),NL=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:a,modal:l=!0}=t,c=ci(e),u=k.useRef(null),[f,p]=_a({prop:s,defaultProp:o??!1,onChange:a,caller:uv});return i.jsx(Mre,{scope:e,triggerId:ao(),triggerRef:u,contentId:ao(),open:f,onOpenChange:p,onOpenToggle:k.useCallback(()=>p(m=>!m),[p]),modal:l,children:i.jsx(xre,{...c,open:f,onOpenChange:p,dir:r,modal:l,children:n})})};NL.displayName=uv;var jL="DropdownMenuTrigger",CL=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,o=TL(jL,n),a=ci(n);return i.jsx(bre,{asChild:!0,...a,children:i.jsx(Pt.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Yb(e,o.triggerRef),onPointerDown:nt(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:nt(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});CL.displayName=jL;var Dre="DropdownMenuPortal",SL=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ci(e);return i.jsx(vre,{...r,...n})};SL.displayName=Dre;var EL="DropdownMenuContent",_L=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=TL(EL,n),o=ci(n),a=k.useRef(!1);return i.jsx(wre,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:nt(t.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:nt(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!s.modal||f)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_L.displayName=EL;var Ore="DropdownMenuGroup",Lre=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(kre,{...s,...r,ref:e})});Lre.displayName=Ore;var Fre="DropdownMenuLabel",zre=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(Tre,{...s,...r,ref:e})});zre.displayName=Fre;var $re="DropdownMenuItem",AL=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(Nre,{...s,...r,ref:e})});AL.displayName=$re;var Bre="DropdownMenuCheckboxItem",Ure=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(jre,{...s,...r,ref:e})});Ure.displayName=Bre;var Vre="DropdownMenuRadioGroup",qre=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(Cre,{...s,...r,ref:e})});qre.displayName=Vre;var Wre="DropdownMenuRadioItem",Hre=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(Sre,{...s,...r,ref:e})});Hre.displayName=Wre;var Gre="DropdownMenuItemIndicator",Kre=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(Ere,{...s,...r,ref:e})});Kre.displayName=Gre;var Yre="DropdownMenuSeparator",Jre=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(_re,{...s,...r,ref:e})});Jre.displayName=Yre;var Xre="DropdownMenuArrow",Qre=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(Are,{...s,...r,ref:e})});Qre.displayName=Xre;var Zre="DropdownMenuSubTrigger",ese=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(Pre,{...s,...r,ref:e})});ese.displayName=Zre;var tse="DropdownMenuSubContent",nse=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ci(n);return i.jsx(Rre,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nse.displayName=tse;var rse=NL,sse=CL,ise=SL,ose=_L,ase=AL;function lse({...t}){return i.jsx(rse,{"data-slot":"dropdown-menu",...t})}function cse({...t}){return i.jsx(sse,{"data-slot":"dropdown-menu-trigger",...t})}function use({className:t,align:e="center",sideOffset:n=4,collisionPadding:r=8,avoidCollisions:s=!0,...o}){return i.jsx(ise,{children:i.jsx(ose,{"data-slot":"dropdown-menu-content",align:e,sideOffset:n,collisionPadding:r,avoidCollisions:s,className:je("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...o})})}function zp({className:t,inset:e,variant:n="default",...r}){return i.jsx(ase,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:je("focus:bg-accent focus:text-accent-foreground data-[variant=default]:hover:bg-[#614E41]/10 data-[variant=default]:focus:bg-[#614E41]/15 data-[variant=default]:active:bg-[#614E41]/20 data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}var dv="Dialog",[PL,h0e]=Mi(dv),[dse,Aa]=PL(dv),RL=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=k.useRef(null),c=k.useRef(null),[u,f]=_a({prop:r,defaultProp:s??!1,onChange:o,caller:dv});return i.jsx(dse,{scope:e,triggerRef:l,contentRef:c,contentId:ao(),titleId:ao(),descriptionId:ao(),open:u,onOpenChange:f,onOpenToggle:k.useCallback(()=>f(p=>!p),[f]),modal:a,children:n})};RL.displayName=dv;var IL="DialogTrigger",ML=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Aa(IL,n),o=un(e,s.triggerRef);return i.jsx(Pt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Kj(s.open),...r,ref:o,onClick:nt(t.onClick,s.onOpenToggle)})});ML.displayName=IL;var Hj="DialogPortal",[fse,DL]=PL(Hj,{forceMount:void 0}),OL=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,o=Aa(Hj,e);return i.jsx(fse,{scope:e,forceMount:n,children:k.Children.map(r,a=>i.jsx(Vs,{present:n||o.open,children:i.jsx(Kg,{asChild:!0,container:s,children:a})}))})};OL.displayName=Hj;var sb="DialogOverlay",LL=k.forwardRef((t,e)=>{const n=DL(sb,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Aa(sb,t.__scopeDialog);return o.modal?i.jsx(Vs,{present:r||o.open,children:i.jsx(pse,{...s,ref:e})}):null});LL.displayName=sb;var hse=kd("DialogOverlay.RemoveScroll"),pse=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Aa(sb,n);return i.jsx(rv,{as:hse,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Pt.div,{"data-state":Kj(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ad="DialogContent",FL=k.forwardRef((t,e)=>{const n=DL(Ad,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Aa(Ad,t.__scopeDialog);return i.jsx(Vs,{present:r||o.open,children:o.modal?i.jsx(mse,{...s,ref:e}):i.jsx(gse,{...s,ref:e})})});FL.displayName=Ad;var mse=k.forwardRef((t,e)=>{const n=Aa(Ad,t.__scopeDialog),r=k.useRef(null),s=un(e,n.contentRef,r);return k.useEffect(()=>{const o=r.current;if(o)return Mj(o)},[]),i.jsx(zL,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:nt(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:nt(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:nt(t.onFocusOutside,o=>o.preventDefault())})}),gse=k.forwardRef((t,e)=>{const n=Aa(Ad,t.__scopeDialog),r=k.useRef(!1),s=k.useRef(!1);return i.jsx(zL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),zL=k.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=t,l=Aa(Ad,n),c=k.useRef(null),u=un(e,c);return vj(),i.jsxs(i.Fragment,{children:[i.jsx(Xb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Hg,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Kj(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(yse,{titleId:l.titleId}),i.jsx(bse,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Gj="DialogTitle",$L=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Aa(Gj,n);return i.jsx(Pt.h2,{id:s.titleId,...r,ref:e})});$L.displayName=Gj;var BL="DialogDescription",UL=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Aa(BL,n);return i.jsx(Pt.p,{id:s.descriptionId,...r,ref:e})});UL.displayName=BL;var VL="DialogClose",qL=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Aa(VL,n);return i.jsx(Pt.button,{type:"button",...r,ref:e,onClick:nt(t.onClick,()=>s.onOpenChange(!1))})});qL.displayName=VL;function Kj(t){return t?"open":"closed"}var WL="DialogTitleWarning",[p0e,HL]=PQ(WL,{contentName:Ad,titleName:Gj,docsSlug:"dialog"}),yse=({titleId:t})=>{const e=HL(WL),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},xse="DialogDescriptionWarning",bse=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HL(xse).contentName}}.`;return k.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},GL=RL,KL=ML,YL=OL,JL=LL,XL=FL,QL=$L,vse=UL,wse=qL;function kse({...t}){return i.jsx(GL,{"data-slot":"sheet",...t})}function Tse({...t}){return i.jsx(KL,{"data-slot":"sheet-trigger",...t})}function Nse({...t}){return i.jsx(YL,{"data-slot":"sheet-portal",...t})}const jse=k.forwardRef(({className:t,...e},n)=>i.jsx(JL,{ref:n,"data-slot":"sheet-overlay",className:je("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})),Cse=k.forwardRef(({className:t,children:e,side:n="right",...r},s)=>i.jsxs(Nse,{children:[i.jsx(jse,{}),i.jsx(XL,{ref:s,"data-slot":"sheet-content",className:je("bg-background text-foreground data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l border-border sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r border-border sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b border-border",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t border-border",t),...r,children:e})]}));function Sse({className:t,...e}){return i.jsx("div",{"data-slot":"sheet-header",className:je("flex flex-col gap-1.5 p-4",t),...e})}function Ese({className:t,...e}){return i.jsx(QL,{"data-slot":"sheet-title",className:je("text-foreground font-semibold text-lg",t),...e})}const _se=uu("inline-flex items-center justify-center rounded-full border px-2.5 py-1 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1.5 [&>svg]:pointer-events-none outline-none focus:outline-none focus:ring-0 focus-visible:ring-0 aria-invalid:border-destructive transition-all duration-200 overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground [a&]:hover:bg-destructive/90",outline:"text-foreground [a&]:hover:bg-muted",pending:"border-transparent bg-yellow-100 text-yellow-800 animate-pulse-subtle",active:"border-transparent bg-green-100 text-green-800",live:"border-transparent bg-green-500 text-white shadow-[0_0_10px_rgba(34,197,94,0.5)] animate-pulse",ended:"border-transparent bg-red-100 text-red-800",drawing:"border-transparent bg-gradient-to-r from-purple-500 to-pink-500 text-white bg-[length:200%_100%] animate-gradient-x",completed:"border-transparent bg-blue-100 text-blue-800",deleted:"border-transparent bg-gray-200 text-gray-800 line-through",success:"border-transparent bg-success/10 text-success dark:bg-success/20",warning:"border-transparent bg-warning/10 text-warning dark:bg-warning/20",info:"border-transparent bg-info-100 text-info-700 dark:bg-info-900/30 dark:text-info-300"},size:{sm:"px-2 py-0.5 text-[10px]",default:"px-2.5 py-1 text-xs",lg:"px-3 py-1.5 text-sm"}},defaultVariants:{variant:"default",size:"default"}});function ll({className:t,variant:e,size:n,asChild:r=!1,...s}){const o=r?oD:"span";return i.jsx(o,{"data-slot":"badge",className:je(_se({variant:e,size:n}),t),...s})}const Ase=()=>{let t;try{t=an()}catch(V){return console.error("Wallet context not available:",V),i.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-md border-b border-border",children:i.jsx("div",{className:"flex items-center justify-between h-16 px-4",children:i.jsx(Ec,{size:"sm"})})})}const{connected:e,address:n,formatAddress:r,disconnect:s,connectWallet:o,provider:a,chainId:l}=t,{contracts:c,getContractInstance:u}=xn(),{theme:f,cycleTheme:p,getCurrentTheme:m}=$b(),{isMobile:g,isTablet:w,isInitialized:y}=Ln(),T=mo(),j=su(),[_,v]=k.useState(!1),[P,D]=k.useState(!1),$=j.pathname==="/";j.pathname,k.useEffect(()=>{const V=()=>{v(window.scrollY>20)};return window.addEventListener("scroll",V),()=>window.removeEventListener("scroll",V)},[]);const U=async()=>{try{await o("metamask")}catch(V){console.error("Failed to connect wallet:",V)}},K=[],Y=[{label:"Create Raffle Pool",href:"/create-raffle",icon:Yr},{label:"Deploy Collection",href:"/deploy-collection",icon:Ca},{label:"Profile",href:"/profile",icon:lg},{label:"Docs",href:"/docs",icon:wh}],G={initial:{y:-100,opacity:0},animate:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:20,staggerChildren:.1}},scrolled:{backgroundColor:_?"hsl(var(--background) / 0.95)":"hsl(var(--background) / 0.8)",backdropFilter:_?"blur(12px)":"blur(8px)",borderBottom:_?"1px solid hsl(var(--border))":"1px solid transparent",transition:{duration:.3}}},X={initial:{y:-20,opacity:0},animate:{y:0,opacity:1}};return y?g||w?i.jsx(Be.header,{variants:G,initial:"initial",animate:"animate",whileInView:"scrolled",className:"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:i.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[i.jsx(Be.div,{variants:X,children:$?i.jsx(Ec,{size:"sm"}):e?i.jsx(ji,{to:"/app",children:i.jsx(Ec,{size:"sm",className:"hover:opacity-80 transition-opacity"})}):i.jsx(Ec,{size:"sm"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be.div,{variants:X,children:i.jsxs(we,{variant:"ghost",size:"icon",onClick:p,title:`Current: ${m().name}`,children:[m().icon==="Sun"&&i.jsx(OR,{className:"h-4 w-4"}),m().icon==="Moon"&&i.jsx(DR,{className:"h-4 w-4"}),m().icon==="Monitor"&&i.jsx(MR,{className:"h-4 w-4"})]})}),i.jsx(Be.div,{variants:X,children:i.jsxs(kse,{open:P,onOpenChange:D,children:[i.jsx(Tse,{asChild:!0,children:i.jsx(we,{variant:"ghost",size:"icon",children:i.jsx(sD,{className:"h-4 w-4"})})}),i.jsxs(Cse,{side:"right",className:"w-[300px] sm:w-[400px]",children:[i.jsx(Sse,{children:i.jsx(Ese,{children:"Menu"})}),i.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-3",children:"Navigation"}),i.jsx("nav",{className:"flex flex-col gap-1 px-2",children:Y.map(V=>i.jsxs(we,{variant:"ghost",className:"justify-start gap-3 h-10",onClick:()=>{T(V.href),D(!1)},children:[i.jsx(V.icon,{className:"h-4 w-4"}),V.label]},V.href))})]}),i.jsx("div",{className:"border-t border-border"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-3",children:"Wallet"}),i.jsx("div",{className:"px-2 space-y-2",children:e?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[i.jsx(vm,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-mono flex-1",children:r(n)})]}),i.jsxs(we,{variant:"outline",className:"w-full justify-start gap-2 h-10",onClick:()=>{s(),D(!1)},children:[i.jsx(IR,{className:"h-4 w-4"}),"Disconnect"]})]}):i.jsxs(we,{className:"w-full gap-2 h-10",onClick:()=>{U(),D(!1)},children:[i.jsx(vm,{className:"h-4 w-4"}),"Connect Wallet"]})})]}),i.jsx("div",{className:"border-t border-border"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-3",children:"Network"}),i.jsx("div",{className:"px-2",children:i.jsx(c5,{})})]})]})]})]})})]})]})}):i.jsx(Be.header,{variants:G,initial:"initial",animate:"animate",whileInView:"scrolled",className:"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border transition-all duration-300",children:i.jsx("div",{className:"max-w-7xl mx-auto px-6",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsxs(Be.div,{variants:X,className:"flex items-center gap-8",children:[$?i.jsx("div",{className:"flex items-center gap-3 cursor-default select-none",children:i.jsx(Ec,{size:"md"})}):e?i.jsx(ji,{to:"/app",className:"flex items-center gap-3 outline-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",children:i.jsx(Ec,{size:"md",className:"hover:opacity-80 transition-opacity"})}):i.jsx("div",{className:"flex items-center gap-3 cursor-default select-none",children:i.jsx(Ec,{size:"md"})}),!$&&i.jsx("nav",{className:"hidden lg:flex items-center gap-6",children:K.map(V=>i.jsx(Be.div,{variants:X,children:i.jsxs(we,{variant:"ghost",className:"gap-2 hover:bg-muted/50",onClick:()=>T(V.href),children:[V.label==="Create"?null:i.jsx(V.icon,{className:"h-4 w-4"}),V.label]})},V.href))})]}),i.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[!$&&i.jsx(c5,{}),!$&&(e?i.jsxs(lse,{children:[i.jsx(cse,{asChild:!0,children:i.jsxs(we,{variant:"ghost",className:"gap-2 hover:bg-muted/50 border border-border text-foreground rounded-full focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0",children:[i.jsx(vm,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"hidden sm:inline text-foreground text-sm",children:r(n)}),i.jsx(Ii,{className:"h-4 w-4 text-muted-foreground"})]})}),i.jsxs(use,{align:"end",className:"w-56",children:[i.jsxs(zp,{onClick:()=>T("/profile"),children:[i.jsx(lg,{className:"mr-2 h-4 w-4"}),"Profile"]}),i.jsxs(zp,{onClick:()=>T("/create-raffle"),children:[i.jsx(Yr,{className:"mr-2 h-4 w-4"}),"Create Raffle Pool"]}),i.jsxs(zp,{onClick:()=>T("/deploy-collection"),children:[i.jsx(Ca,{className:"mr-2 h-4 w-4"}),"Deploy Collection"]}),i.jsxs(zp,{onClick:()=>T("/docs"),children:[i.jsx(wh,{className:"mr-2 h-4 w-4"}),"Docs"]}),i.jsxs(zp,{onClick:s,children:[i.jsx(IR,{className:"mr-2 h-4 w-4"}),"Disconnect"]})]})]}):i.jsx(we,{onClick:U,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:"Connect Wallet"})),i.jsxs(we,{variant:"ghost",size:"icon",onClick:p,title:`Current: ${m().name}`,className:"hover:bg-muted/50",children:[m().icon==="Sun"&&i.jsx(OR,{className:"h-4 w-4"}),m().icon==="Moon"&&i.jsx(DR,{className:"h-4 w-4"}),m().icon==="Monitor"&&i.jsx(MR,{className:"h-4 w-4"})]}),!$&&i.jsx(we,{variant:"ghost",size:"icon",className:"hover:bg-muted/50 relative",children:i.jsx(mQ,{className:"h-4 w-4"})})]})]})})}):i.jsx(Be.header,{initial:{y:-100},animate:{y:0},className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-md border-b border-border",children:i.jsx("div",{className:"flex items-center justify-between h-16 px-4",children:i.jsx(Ec,{size:"sm"})})})},Pse=uu("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex w-full min-w-0 rounded-lg border bg-background text-foreground px-4 py-3 text-base shadow-xs transition-all duration-200 outline-none focus:outline-none focus:ring-0 file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"border-border focus:border-primary",filled:"border-transparent bg-muted/50 focus:bg-background focus:border-primary",ghost:"border-transparent bg-transparent focus:bg-muted/30 focus:border-primary"},state:{default:"",error:"border-destructive focus:border-destructive text-destructive",success:"border-success focus:border-success",warning:"border-warning focus:border-warning"},inputSize:{sm:"h-8 px-3 py-1.5 text-sm",default:"h-10 px-4 py-2",lg:"h-12 px-4 py-3 text-base"}},defaultVariants:{variant:"default",state:"default",inputSize:"default"}}),gs=k.forwardRef(({className:t,type:e,variant:n,state:r,inputSize:s,...o},a)=>i.jsx("input",{type:e,ref:a,"data-slot":"input",className:je(Pse({variant:n,state:r,inputSize:s}),"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...o}));gs.displayName="Input";var fv="Collapsible",[Rse,ZL]=Mi(fv),[Ise,Yj]=Rse(fv),eF=k.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:o,onOpenChange:a,...l}=t,[c,u]=_a({prop:r,defaultProp:s??!1,onChange:a,caller:fv});return i.jsx(Ise,{scope:n,disabled:o,contentId:ao(),open:c,onOpenToggle:k.useCallback(()=>u(f=>!f),[u]),children:i.jsx(Pt.div,{"data-state":Xj(c),"data-disabled":o?"":void 0,...l,ref:e})})});eF.displayName=fv;var tF="CollapsibleTrigger",nF=k.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=Yj(tF,n);return i.jsx(Pt.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Xj(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:nt(t.onClick,s.onOpenToggle)})});nF.displayName=tF;var Jj="CollapsibleContent",rF=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Yj(Jj,t.__scopeCollapsible);return i.jsx(Vs,{present:n||s.open,children:({present:o})=>i.jsx(Mse,{...r,ref:e,present:o})})});rF.displayName=Jj;var Mse=k.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...o}=t,a=Yj(Jj,n),[l,c]=k.useState(r),u=k.useRef(null),f=un(e,u),p=k.useRef(0),m=p.current,g=k.useRef(0),w=g.current,y=a.open||l,T=k.useRef(y),j=k.useRef(void 0);return k.useEffect(()=>{const _=requestAnimationFrame(()=>T.current=!1);return()=>cancelAnimationFrame(_)},[]),as(()=>{const _=u.current;if(_){j.current=j.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const v=_.getBoundingClientRect();p.current=v.height,g.current=v.width,T.current||(_.style.transitionDuration=j.current.transitionDuration,_.style.animationName=j.current.animationName),c(r)}},[a.open,r]),i.jsx(Pt.div,{"data-state":Xj(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!y,...o,ref:f,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...t.style},children:y&&s})});function Xj(t){return t?"open":"closed"}var Dse=eF,Ose=nF,Lse=rF,Pa="Accordion",Fse=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Qj,zse,$se]=Jb(Pa),[hv,m0e]=Mi(Pa,[$se,ZL]),Zj=ZL(),sF=Ae.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,o=r;return i.jsx(Qj.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?i.jsx(qse,{...o,ref:e}):i.jsx(Vse,{...s,ref:e})})});sF.displayName=Pa;var[iF,Bse]=hv(Pa),[oF,Use]=hv(Pa,{collapsible:!1}),Vse=Ae.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:o=!1,...a}=t,[l,c]=_a({prop:n,defaultProp:r??"",onChange:s,caller:Pa});return i.jsx(iF,{scope:t.__scopeAccordion,value:Ae.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:Ae.useCallback(()=>o&&c(""),[o,c]),children:i.jsx(oF,{scope:t.__scopeAccordion,collapsible:o,children:i.jsx(aF,{...a,ref:e})})})}),qse=Ae.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...o}=t,[a,l]=_a({prop:n,defaultProp:r??[],onChange:s,caller:Pa}),c=Ae.useCallback(f=>l((p=[])=>[...p,f]),[l]),u=Ae.useCallback(f=>l((p=[])=>p.filter(m=>m!==f)),[l]);return i.jsx(iF,{scope:t.__scopeAccordion,value:a,onItemOpen:c,onItemClose:u,children:i.jsx(oF,{scope:t.__scopeAccordion,collapsible:!0,children:i.jsx(aF,{...o,ref:e})})})}),[Wse,pv]=hv(Pa),aF=Ae.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:o="vertical",...a}=t,l=Ae.useRef(null),c=un(l,e),u=zse(n),p=Vh(s)==="ltr",m=nt(t.onKeyDown,g=>{var K;if(!Fse.includes(g.key))return;const w=g.target,y=u().filter(Y=>{var G;return!((G=Y.ref.current)!=null&&G.disabled)}),T=y.findIndex(Y=>Y.ref.current===w),j=y.length;if(T===-1)return;g.preventDefault();let _=T;const v=0,P=j-1,D=()=>{_=T+1,_>P&&(_=v)},$=()=>{_=T-1,_<v&&(_=P)};switch(g.key){case"Home":_=v;break;case"End":_=P;break;case"ArrowRight":o==="horizontal"&&(p?D():$());break;case"ArrowDown":o==="vertical"&&D();break;case"ArrowLeft":o==="horizontal"&&(p?$():D());break;case"ArrowUp":o==="vertical"&&$();break}const U=_%j;(K=y[U].ref.current)==null||K.focus()});return i.jsx(Wse,{scope:n,disabled:r,direction:s,orientation:o,children:i.jsx(Qj.Slot,{scope:n,children:i.jsx(Pt.div,{...a,"data-orientation":o,ref:c,onKeyDown:r?void 0:m})})})}),ib="AccordionItem",[Hse,eC]=hv(ib),lF=Ae.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,o=pv(ib,n),a=Bse(ib,n),l=Zj(n),c=ao(),u=r&&a.value.includes(r)||!1,f=o.disabled||t.disabled;return i.jsx(Hse,{scope:n,open:u,disabled:f,triggerId:c,children:i.jsx(Dse,{"data-orientation":o.orientation,"data-state":pF(u),...l,...s,ref:e,disabled:f,open:u,onOpenChange:p=>{p?a.onItemOpen(r):a.onItemClose(r)}})})});lF.displayName=ib;var cF="AccordionHeader",uF=Ae.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=pv(Pa,n),o=eC(cF,n);return i.jsx(Pt.h3,{"data-orientation":s.orientation,"data-state":pF(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:e})});uF.displayName=cF;var a2="AccordionTrigger",dF=Ae.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=pv(Pa,n),o=eC(a2,n),a=Use(a2,n),l=Zj(n);return i.jsx(Qj.ItemSlot,{scope:n,children:i.jsx(Ose,{"aria-disabled":o.open&&!a.collapsible||void 0,"data-orientation":s.orientation,id:o.triggerId,...l,...r,ref:e})})});dF.displayName=a2;var fF="AccordionContent",hF=Ae.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=pv(Pa,n),o=eC(fF,n),a=Zj(n);return i.jsx(Lse,{role:"region","aria-labelledby":o.triggerId,"data-orientation":s.orientation,...a,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});hF.displayName=fF;function pF(t){return t?"open":"closed"}var mF=sF,gF=lF,yF=uF,xF=dF,bF=hF;function Gse({...t}){return i.jsx(mF,{"data-slot":"accordion",...t})}function Kse({className:t,...e}){return i.jsx(gF,{"data-slot":"accordion-item",className:je("border-b last:border-b-0",t),...e})}function Yse({className:t,children:e,...n}){return i.jsx(yF,{className:"flex",children:i.jsxs(xF,{"data-slot":"accordion-trigger",className:je("flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none focus:outline-none focus:ring-0 focus-visible:ring-0 hover:underline disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,i.jsx(Ii,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function Jse({className:t,children:e,...n}){return i.jsx(bF,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:i.jsx("div",{className:je("pt-0 pb-4",t),children:e})})}const Xse=()=>{const[t,e]=k.useState(""),[n,r]=k.useState(!1),[s,o]=k.useState([]),a=su(),l=new Date().getFullYear(),c=a.pathname==="/",u=[{title:"Product",items:[{label:"Explore Raffles",href:"/app",icon:sg},{label:"Create Raffle",href:"/create-raffle",icon:cg}]},{title:"Resources",items:[{label:"Documentation",href:"/docs",icon:Lc},{label:"Blog",href:"#",icon:Lc},{label:"Tutorials",href:"#",icon:Lc}]},{title:"Company",items:[{label:"About Us",href:"#",icon:os},{label:"Careers",href:"#",icon:Lc},{label:"Press Kit",href:"#",icon:Lc}]},{title:"Legal",items:[{label:"Terms of Service",href:"#",icon:xs},{label:"Privacy Policy",href:"#",icon:xs},{label:"Cookie Policy",href:"#",icon:xs},{label:"Compliance",href:"#",icon:xs}]}],f=[{name:"Twitter",href:"https://twitter.com/droprdotfun",icon:wd,color:"hover:text-blue-400"},{name:"Discord",href:"#",icon:ld,color:"hover:text-indigo-400"},{name:"Telegram",href:"#",icon:ig,color:"hover:text-blue-500"},{name:"GitHub",href:"#",icon:vQ,color:"hover:text-gray-400"},{name:"Medium",href:"https://medium.com/@rafflhub",icon:sg,color:"hover:text-green-400"}],p=w=>{w.preventDefault(),t.trim()&&(r(!0),setTimeout(()=>{r(!1),e("")},3e3))},m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},g={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return i.jsxs("footer",{className:"relative bg-background border-t border-border/50 overflow-hidden",children:[c&&i.jsx("div",{className:"relative border-b border-border/30 bg-muted/30",children:i.jsx("div",{className:"max-w-7xl mx-auto px-6 py-10",children:i.jsxs(Be.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"max-w-4xl mx-auto text-center",children:[i.jsx(ll,{className:"mb-4 bg-primary text-primary-foreground border-0",children:"Stay Updated"}),i.jsx("h2",{className:"text-3xl font-bold mb-4 font-display",children:"Get the Latest Updates"}),i.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join our community to receive exclusive announcements and platform updates."}),i.jsxs("form",{onSubmit:p,className:"flex flex-col sm:flex-row gap-4 max-w-md mx-auto",children:[i.jsx(gs,{type:"email",placeholder:"Enter your email",value:t,onChange:w=>e(w.target.value),required:!0,className:"flex-1 h-12 bg-background/50 backdrop-blur-sm border-border/50"}),i.jsx(we,{type:"submit",className:"h-12 px-8 bg-primary hover:bg-primary/90 text-primary-foreground",children:n?"Subscribed!":"Subscribe"})]}),n&&i.jsx(Be.p,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mt-4 text-success text-sm",children:" Successfully subscribed to newsletter!"})]})})}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:i.jsxs(Be.div,{variants:m,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[i.jsx(Be.div,{variants:g,className:"lg:col-span-1",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-xl font-bold font-display text-foreground",children:"Dropr"}),i.jsx(ll,{variant:"secondary",className:"text-xs",children:"Beta"})]}),i.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"The go-to platform for project teams and KOLs to host fairly launch NFT drops, host social media campaigns, and transparently distribute rewards to Web3 communities."}),i.jsx("div",{className:"flex items-center gap-3",children:f.map(w=>i.jsx(we,{variant:"ghost",size:"icon",asChild:w.href!=="#",className:je("h-9 w-9 rounded-full transition-all duration-200 hover:scale-110",w.color),children:w.href==="#"?i.jsx("div",{title:w.name,className:"flex items-center justify-center h-full w-full",children:i.jsx(w.icon,{className:"h-4 w-4"})}):i.jsx("a",{href:w.href,target:"_blank",rel:"noopener noreferrer",title:w.name,children:i.jsx(w.icon,{className:"h-4 w-4"})})},w.name))})]})}),u.map((w,y)=>i.jsxs(Be.div,{variants:g,className:"hidden lg:block",children:[i.jsx("h4",{className:"font-semibold mb-4 font-display",children:w.title}),i.jsx("ul",{className:"space-y-3",children:w.items.map(T=>i.jsx("li",{children:T.href==="#"?i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors duration-200 group cursor-pointer",children:[i.jsx(T.icon,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),i.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-200",children:T.label})]}):i.jsxs(ji,{to:T.href,className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors duration-200 group",children:[i.jsx(T.icon,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),i.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-200",children:T.label})]})},T.label))})]},w.title)),i.jsx(Be.div,{variants:g,className:"lg:hidden col-span-1 md:col-span-2",children:i.jsx(Gse,{type:"multiple",value:s,onValueChange:o,children:u.map(w=>i.jsxs(Kse,{value:w.title,className:"border-b border-border/30",children:[i.jsx(Yse,{className:"text-left font-semibold font-display",children:w.title}),i.jsx(Jse,{children:i.jsx("ul",{className:"space-y-3 pt-2",children:w.items.map(y=>i.jsx("li",{children:y.href==="#"?i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors duration-200 group cursor-pointer",children:[i.jsx(y.icon,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),i.jsx("span",{children:y.label})]}):i.jsxs(ji,{to:y.href,className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors duration-200 group",children:[i.jsx(y.icon,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),i.jsx("span",{children:y.label})]})},y.label))})})]},w.title))})})]})}),i.jsx("div",{className:"border-t border-border/30",children:i.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:i.jsx(Be.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"flex flex-col md:flex-row items-center justify-between gap-4",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsxs("span",{children:[" ",l," Dropr. All rights reserved."]}),i.jsx("span",{className:"hidden md:inline",children:""}),i.jsxs("span",{className:"hidden md:inline-flex items-center gap-1",children:["Made with ",i.jsx(tD,{className:"h-3 w-3 text-red-500 fill-current"})," for Web3"]})]})})})})]})]})},Qse=uu("relative overflow-hidden rounded-xl transition-all duration-300 flex flex-col",{variants:{variant:{default:"bg-card/80 backdrop-blur-sm border border-border/50 shadow-lg hover:shadow-xl hover:border-border/80",elevated:"bg-card/90 backdrop-blur-md border border-border/30 shadow-xl hover:shadow-2xl hover:-translate-y-1",glass:"bg-white/5 backdrop-blur-xl border border-white/10 shadow-2xl",gradient:"bg-gradient-to-br from-card/90 to-card/70 backdrop-blur-sm border border-border/30",interactive:"bg-card/80 backdrop-blur-sm border border-border/50 shadow-lg hover:border-primary/50 hover:shadow-primary/10 cursor-pointer hover:-translate-y-0.5",flat:"bg-card border border-border"},glow:{none:"",primary:"hover:shadow-glow-primary",success:"hover:shadow-glow-success",warning:"hover:shadow-glow-warning"},padding:{none:"",sm:"gap-4",default:"gap-6",lg:"gap-8"}},defaultVariants:{variant:"default",glow:"none",padding:"default"}});function ut({className:t,variant:e,glow:n,padding:r,...s}){return i.jsx("div",{"data-slot":"card",className:je(Qse({variant:e,glow:n,padding:r}),t),...s})}function Jr({className:t,...e}){return i.jsx("div",{"data-slot":"card-header",className:je("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 py-4 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function Fs({className:t,...e}){return i.jsx("div",{"data-slot":"card-title",className:je("leading-none font-semibold",t),...e})}function wm({className:t,...e}){return i.jsx("div",{"data-slot":"card-description",className:je("text-muted-foreground text-sm",t),...e})}function It({className:t,...e}){return i.jsx("div",{"data-slot":"card-content",className:je("px-6 py-6",t),...e})}function Zse({className:t,...e}){return i.jsx("div",{"data-slot":"card-footer",className:je("flex items-center px-6 py-4 [.border-t]:pt-6",t),...e})}class eie extends Ae.Component{constructor(n){super(n);ox(this,"handleRetry",()=>{this.setState(n=>({hasError:!1,error:null,errorInfo:null,retryCount:n.retryCount+1}))});ox(this,"handleGoHome",()=>{window.location.href="/"});ox(this,"getBrowserSpecificErrorInfo",()=>{const{error:n,browserInfo:r}=this.state,s=(n==null?void 0:n.message)||(n==null?void 0:n.toString())||"Unknown error";if(s.includes("missing revert data")||s.includes("call exception")||s.includes("CALL_EXCEPTION"))return{title:"Network Connection Issue",message:`Your browser (${(r==null?void 0:r.name)||"unknown"}) is experiencing connectivity issues with the blockchain network.`,suggestions:["Check your internet connection","Try refreshing the page","Switch to a different network and back",(r==null?void 0:r.name)==="firefox"?"Firefox may need extra time - please be patient":"Try using Chrome for better compatibility"]};if(s.includes("MetaMask")||s.includes("wallet"))return{title:"Wallet Connection Issue",message:"There was a problem connecting to your wallet.",suggestions:["Make sure MetaMask is installed and unlocked","Try disconnecting and reconnecting your wallet","Refresh the page and try again"]};const o=["Refresh the page and try again"];return(r==null?void 0:r.name)==="firefox"?o.push("Firefox users may experience slower loading - please be patient"):(r==null?void 0:r.name)==="safari"?o.push("Safari users should ensure they have the latest version"):(r==null?void 0:r.name)==="edge"&&o.push("Edge users may need to clear browser cache"),r!=null&&r.isMobile&&o.push("Mobile users: ensure stable internet connection"),{title:"Something went wrong",message:"An unexpected error occurred while loading the application.",suggestions:o}});this.state={hasError:!1,error:null,errorInfo:null,retryCount:0,browserInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){const s=ON();this.setState({error:n,errorInfo:r,browserInfo:s}),console.group(" Error Boundary Caught Error"),console.log("Browser:",s),console.log("Error:",n),console.log("Error Info:",r),console.groupEnd(),window.gtag&&window.gtag("event","exception",{description:n.toString(),fatal:!1,custom_parameters:{browser:s.name,browser_version:s.version,is_mobile:s.isMobile}})}render(){if(this.state.hasError){const{isMobile:n=!1,fallbackComponent:r}=this.props,{error:s,retryCount:o,browserInfo:a}=this.state,l=this.getBrowserSpecificErrorInfo();return r?r(s,this.handleRetry,this.handleGoHome):n?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:i.jsxs(ut,{className:"w-full max-w-md",children:[i.jsxs(Jr,{className:"text-center",children:[i.jsx(PR,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),i.jsx(Fs,{className:"text-lg",children:l.title})]}),i.jsxs(It,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:l.message}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"Try these solutions:"}),i.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:l.suggestions.map((c,u)=>i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"mr-2",children:""}),i.jsx("span",{children:c})]},u))})]}),o<3&&i.jsxs(we,{onClick:this.handleRetry,className:"w-full",variant:"default",children:[i.jsx(ul,{className:"h-4 w-4 mr-2"}),"Try Again"]}),i.jsxs(we,{onClick:this.handleGoHome,variant:"outline",className:"w-full",children:[i.jsx(RR,{className:"h-4 w-4 mr-2"}),"Go Home"]}),!1]})]})}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-8",children:i.jsxs(ut,{className:"w-full max-w-2xl",children:[i.jsxs(Jr,{className:"text-center",children:[i.jsx(PR,{className:"h-16 w-16 text-destructive mx-auto mb-6"}),i.jsx(Fs,{className:"text-2xl",children:"Oops! Something went wrong"})]}),i.jsxs(It,{className:"space-y-6",children:[i.jsx("p",{className:"text-muted-foreground text-center",children:"The application encountered an unexpected error. This could be due to:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-2 max-w-md mx-auto",children:[i.jsx("li",{children:" Network connectivity issues"}),i.jsx("li",{children:" Blockchain RPC provider problems"}),i.jsx("li",{children:" Temporary service disruption"}),i.jsx("li",{children:" Browser compatibility issues"})]}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[o<3&&i.jsxs(we,{onClick:this.handleRetry,variant:"default",children:[i.jsx(ul,{className:"h-4 w-4 mr-2"}),"Try Again"]}),i.jsxs(we,{onClick:this.handleGoHome,variant:"outline",children:[i.jsx(RR,{className:"h-4 w-4 mr-2"}),"Return Home"]})]}),!1]})]})})}return this.props.children}}const tie=[{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct Multicall.Call[]",name:"calls",type:"tuple[]"}],name:"aggregate",outputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"bytes[]",name:"returnData",type:"bytes[]"}],stateMutability:"view",type:"function"}],nie={1:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE44",3:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE44",4:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE44",5:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE44",11155111:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE44",137:"0xcA11bde05977b3631167028862bE2a173976CA11",80001:"0xcA11bde05977b3631167028862bE2a173976CA11",56:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE44",97:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE44",42161:"0xcA11bde05977b3631167028862bE2a173976CA11",421613:"0xcA11bde05977b3631167028862bE2a173976CA11",10:"0xcA11bde05977b3631167028862bE2a173976CA11",69:"0xcA11bde05977b3631167028862bE2a173976CA11",43114:"0xcA11bde05977b3631167028862bE2a173976CA11",43113:"0xcA11bde05977b3631167028862bE2a173976CA11",421614:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE44",8453:"0xcA11bde05977b3631167028862bE2a173976CA11",84532:"0xcA11bde05977b3631167028862bE2a173976CA11",2020:"0xcA11bde05977b3631167028862bE2a173976CA11",7700:"0xcA11bde05977b3631167028862bE2a173976CA11",1946:"0xcA11bde05977b3631167028862bE2a173976CA11",16379:"0xcA11bde05977b3631167028862bE2a173976CA11"},rie=(t,e)=>{const n=[],r=[];return e.forEach(({method:s,params:o=[]},a)=>{try{const l=t.interface.encodeFunctionData(s,o);n.push({target:t.address,callData:l}),r.push({method:s,originalIndex:a})}catch{}}),{batchCalls:n,validCalls:r}},sie=async(t,e,n)=>{if(!e||e.length===0)return[];const r=nie[n];if(!r)return console.warn(`Multicall not supported on chain ${n}, falling back to individual calls`),null;try{const s=new Mt(r,tie,t),[,o]=await s.aggregate(e);return o}catch(s){return console.error("Multicall failed:",s),null}},h5=(t,e,n,r)=>{const s=new Array(e.length).fill(null);return r.forEach(({method:o,originalIndex:a},l)=>{try{if(!n[l])throw new Error("No return data for call");s[a]=t.interface.decodeFunctionResult(o,n[l])[0]}catch{s[a]=null}}),e.forEach(({method:o},a)=>{s[a]===null&&(console.warn(`Method ${o} failed, using fallback`),o.includes("is")||o==="isCollabPool"||o==="usesCustomFee"||o==="isExternalPrizeCollection"||o==="isRefundable"||o==="isPrized"?s[a]=!1:o==="isEscrowedPrize"||o==="standard"?s[a]=void 0:o==="revenueRecipient"||o==="prizeCollection"||o==="erc20PrizeToken"?s[a]=$e:(o==="prizeTokenId"||o==="erc20PrizeAmount"||o==="nativePrizeAmount"||o==="maxSlotsPerAddress"||o==="slotLimit"||o==="winnersCount")&&(s[a]=ce.from(0)))}),s},iie=async(t,e,n)=>{const{batchCalls:r,validCalls:s}=rie(t,e);if(r.length===0)return h5(t,e,[],s);const o=await sie(t.provider,r,n);return o?h5(t,e,o,s):null},oie=async(t,e)=>{const n=[];for(const{method:r,params:s=[]}of e)try{if(typeof t[r]!="function"){console.warn(`Method ${r} does not exist on contract, using fallback`),r.includes("is")||r==="isCollabPool"||r==="usesCustomFee"||r==="isExternalPrizeCollection"||r==="isRefundable"||r==="isPrized"?n.push(!1):r==="isEscrowedPrize"||r==="standard"?n.push(void 0):r==="revenueRecipient"||r==="prizeCollection"||r==="erc20PrizeToken"?n.push($e):r==="prizeTokenId"||r==="erc20PrizeAmount"||r==="nativePrizeAmount"?n.push(ce.from(0)):n.push(null);continue}const o=await t[r](...s);n.push(o)}catch(o){console.error(`Individual call failed for ${r}:`,o),n.push(null)}return n},mk=async(t,e,n)=>{const r=await iie(t,e,n);return r===null?await oie(t,e):r},p5={"0xd92e233d":"ZeroAddress","0xf4f5b733":"ZeroQuantity","0xd2100d73":"ZeroSlotFee","0xfd2a413d":"PoolDurationElapsed","0x7145fa7b":"ExceedsMaxSlots","0x569e8c11":"IncorrectPayment","0x176f75b8":"ExceedsSlotLimit","0x1889eae0":"ContractsCannotPurchase","0xbe54005a":"ProtocolAdminNotAllowed","0x194d5060":"CreatorNotAllowed","0x93a7d4e8":"InvalidNonPrizedPurchase","0x43361aaf":"SocialEngagementNotConfigured","0xbaf3f0f7":"InvalidState","0x27e1f1e5":"OnlyOperator","0xb19a9f82":"NotAWinner","0xccaf35d0":"NoPrizesToClaim","0x327ee3e0":"InvalidPrizeAmount","0x880a1491":"PrizeTransferFailed","0x424ca239":"InvalidPrizeCollection","0x1a1889b7":"InvalidPoolState","0x5c427cd9":"UnauthorizedCaller","0x170554d5":"ExceedsWinnersCount","0xfd34e505":"MintingNotSupported","0x955c501b":"UnauthorizedMinter","0xc30436e9":"ExceedsMaxSupply","0x0fee82b1":"SupplyNotSet"},vF=(t,e="complete transaction")=>{var a,l,c,u,f,p;console.group(" Parsing Contract Error"),console.log("Full error object:",t),console.log("error.reason:",t==null?void 0:t.reason),console.log("error.code:",t==null?void 0:t.code),console.log("error.data:",t==null?void 0:t.data),console.log("error.error:",t==null?void 0:t.error),console.log("error.message:",t==null?void 0:t.message),console.groupEnd();let n="";t!=null&&t.reason?n=t.reason:(a=t==null?void 0:t.data)!=null&&a.message?n=t.data.message:(l=t==null?void 0:t.error)!=null&&l.message?n=t.error.message:(u=(c=t==null?void 0:t.error)==null?void 0:c.data)!=null&&u.message?n=t.error.data.message:n=t.message||t.toString(),console.log(" Extracted error message:",n);let r=null;if((p=(f=t==null?void 0:t.error)==null?void 0:f.data)!=null&&p.data&&typeof t.error.data.data=="string"?(r=t.error.data.data.slice(0,10),console.log(" Found error selector in error.error.data.data:",r)):t!=null&&t.data&&typeof t.data=="string"&&t.data.startsWith("0x")&&(r=t.data.slice(0,10),console.log(" Found error selector in error.data:",r)),r&&p5[r]){const m=p5[r];console.log(" Decoded custom error from selector:",m),n=m}const s=n.match(/execution reverted:?\s*([A-Z][a-zA-Z0-9]*)/);s&&s[1]&&(console.log(" Matched custom error (format 1):",s[1]),n=s[1]);const o=n.match(/custom error '([A-Z][a-zA-Z0-9]*)\(/);return o&&o[1]&&(console.log(" Matched custom error (format 2):",o[1]),n=o[1]),console.log(" Final error message to parse:",n),n.includes("NotAWinner")?"You are not a winner of this raffle. Only winners can claim prizes.":n.includes("NoPrizesToClaim")?"You have already claimed all your prizes. No prizes remaining to claim.":n.includes("InvalidPrizeAmount")?"Invalid prize amount calculated. Please contact support for assistance.":n.includes("PrizeTransferFailed")?"Prize transfer failed. Please ensure your wallet can receive the prize and try again.":n.includes("InvalidPrizeCollection")?"Invalid prize collection address. Please contact the raffle creator.":n.includes("InvalidPoolState")?"Raffle is not in the correct state for this action. Please wait for winner selection to complete.":n.includes("UnauthorizedCaller")?"You are not authorized to perform this action. Only the creator, operators, or prize contract owner can mint prizes.":n.includes("ExceedsWinnersCount")?"Cannot mint more prizes than the total number of winners.":n.includes("MintingNotSupported")?"Minting is not supported for this prize type. This prize may be escrowed.":n.includes("UnauthorizedMinter")?"You are not authorized to mint NFTs from this collection. Only the designated minter can mint.":n.includes("ZeroQuantity")?"Mint quantity must be greater than 0. Please specify a valid quantity.":n.includes("ExceedsMaxSupply")?"Minting would exceed the maximum supply for this collection. No more NFTs can be minted.":n.includes("SupplyNotSet")?"Maximum supply has not been set for this token ID. Please contact the collection owner.":n.includes("ZeroAddress")?"Invalid address provided. Address cannot be zero.":n.includes("ZeroQuantity")?"Quantity must be greater than 0.":n.includes("ZeroSlotFee")?"Slot fee cannot be zero.":n.includes("PoolDurationElapsed")?"Raffle duration has elapsed. No more tickets can be purchased.":n.includes("ExceedsMaxSlots")?"Purchase exceeds the maximum number of available slots.":n.includes("IncorrectPayment")?"Incorrect payment amount. Please ensure you send the exact amount required.":n.includes("ExceedsSlotLimit")?"Purchase exceeds your personal slot limit for this raffle.":n.includes("ContractsCannotPurchase")?"Smart contracts cannot purchase raffle tickets. Please use a regular wallet.":n.includes("ProtocolAdminNotAllowed")?"Protocol administrators cannot participate in raffles.":n.includes("CreatorNotAllowed")?"Raffle creators cannot purchase tickets in their own raffles.":n.includes("InvalidNonPrizedPurchase")?"Cannot purchase tickets in a non-prized raffle.":n.includes("SocialEngagementNotConfigured")?"Social engagement is required but not properly configured. Please contact support.":n.includes("InvalidState")?"Raffle is not in a valid state for this action.":n.includes("OnlyOperator")?"Only protocol operators can perform this action.":n.includes("user rejected")||n.includes("User denied")||n.includes("user cancelled")?"Transaction was cancelled. You rejected the transaction in your wallet.":n.includes("insufficient funds")?"Insufficient funds in your wallet to complete this transaction.":n.includes("gas required exceeds allowance")||n.includes("out of gas")?"Transaction requires more gas than available. Please try again with a higher gas limit.":n.includes("nonce too low")?"Transaction nonce is too low. Please reset your wallet or wait for pending transactions to complete.":n.includes("replacement transaction underpriced")?"Replacement transaction has too low gas price. Please increase the gas price.":n.includes("network changed")||n.includes("wrong network")?"Wrong network selected. Please switch to the correct network in your wallet.":n.includes("execution reverted")?"Transaction failed during execution. Please check the transaction details and try again.":`Failed to ${e}. Please try again or contact support if the issue persists.`},aie=t=>{const e=t.message||t.toString();return["NotAWinner","NoPrizesToClaim","InvalidPrizeAmount","PrizeTransferFailed","InvalidPrizeCollection","InvalidPoolState","UnauthorizedCaller","ExceedsWinnersCount","MintingNotSupported","UnauthorizedMinter","ZeroQuantity","ExceedsMaxSupply","SupplyNotSet","ZeroAddress","ZeroSlotFee","PoolDurationElapsed","ExceedsMaxSlots","IncorrectPayment","ExceedsSlotLimit","ContractsCannotPurchase","ProtocolAdminNotAllowed","CreatorNotAllowed","InvalidNonPrizedPurchase","SocialEngagementNotConfigured","InvalidState","OnlyOperator"].some(r=>e.includes(r))},lie=t=>{const e=t.message||t.toString();return e.includes("user rejected")||e.includes("User denied")||e.includes("user cancelled")?"info":e.includes("NoPrizesToClaim")||e.includes("NotAWinner")||e.includes("ExceedsSlotLimit")||e.includes("PoolDurationElapsed")?"warning":"error"},cie=t=>{const e=t.message||t.toString();return e.includes("NotAWinner")?"Check the winners list to see if you won.":e.includes("NoPrizesToClaim")?"You have already claimed your prizes. Check your wallet for the received prizes.":e.includes("InvalidPoolState")?"Wait for the raffle to complete winner selection, then try again.":e.includes("UnauthorizedCaller")?"Contact the raffle creator or a protocol operator to mint your prize.":e.includes("insufficient funds")?"Add more funds to your wallet and try again.":e.includes("wrong network")?"Switch to the correct network in your wallet settings.":e.includes("ExceedsMaxSupply")?"This collection has reached its maximum supply. No more NFTs can be minted.":e.includes("PoolDurationElapsed")?"This raffle has ended. You can no longer purchase tickets.":e.includes("ExceedsSlotLimit")?"You have reached your maximum ticket limit for this raffle.":null},ih=(t,e="complete transaction")=>{const n=vF(t,e),r=lie(t),s=cie(t),o=aie(t);return{message:n,severity:r,suggestedAction:s,isCustomError:o,originalError:t.message||t.toString()}},oh=(t,e,n={})=>{const r=ih(t,e);return console.group(` Contract Error: ${e}`),console.error("User Message:",r.message),console.error("Severity:",r.severity),r.suggestedAction&&console.info("Suggested Action:",r.suggestedAction),console.error("Original Error:",r.originalError),console.error("Is Custom Error:",r.isCustomError),Object.keys(n).length>0&&console.error("Additional Data:",n),console.groupEnd(),r};class uie{constructor(){this.cache=new Map,this.cacheTimeout=300*1e3,this.retryAttempts=3,this.retryDelay=1e3,this.performanceMetrics=new Map,this.errorMetrics=new Map}initialize(e,n){this.walletContext=e,this.contractContext=n}getPlatformConfig(e=!1){const n=typeof window<"u"&&(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768),r=e||n;return{maxRafflesToFetch:r?25:30,timeout:r?2e4:12e3,concurrency:r?2:4,batchDelay:r?200:100,retryDelay:r?2e3:1e3,maxRetries:r?2:3,useCache:!0,retryOnFailure:!0,progressiveLoading:r,prioritizeRecent:r}}createContractInstance(e,n,r=!1){var s,o,a;try{if(!e||e===$e)throw new Error(`Invalid contract address for ${n}`);const l=tn[n];if(!l)throw new Error(`ABI not found for ${n}`);const c=r?(s=this.walletContext)==null?void 0:s.provider:((o=this.walletContext)==null?void 0:o.signer)||((a=this.walletContext)==null?void 0:a.provider);if(!c)throw new Error("No signer or provider available");return new Mt(e,l,c)}catch(l){return console.error(`Error creating contract instance for ${n}:`,l),null}}areContractsAvailable(){const{chainId:e}=this.walletContext||{};if(!e||!jt[e])return console.log(" Chain not supported or chainId missing:",{chainId:e}),!1;const n=jt[e].contractAddresses,r=(n==null?void 0:n.protocolManager)&&n.protocolManager!=="0x..."&&(n==null?void 0:n.poolDeployer)&&n.poolDeployer!=="0x...";return console.log(" Contract availability check:",{chainId:e,isAvailable:r,protocolManager:n==null?void 0:n.protocolManager,poolDeployer:n==null?void 0:n.poolDeployer}),r}getProtocolManagerContract(){var n,r,s,o;const{chainId:e}=this.walletContext||{};if(!this.areContractsAvailable())return null;if((r=(n=this.contractContext)==null?void 0:n.contracts)!=null&&r.protocolManager)return this.contractContext.contracts.protocolManager;if(e&&((o=(s=jt[e])==null?void 0:s.contractAddresses)!=null&&o.protocolManager)){const a=jt[e].contractAddresses.protocolManager;return this.createContractInstance(a,"protocolManager",!0)}return null}async withRetry(e,n="",r={}){var u;const s=this.getPlatformConfig(r.isMobile),o=r.maxRetries||s.maxRetries,a=r.retryDelay||s.retryDelay,l=r.timeout||s.timeout;let c;(u=this.walletContext)==null||u.chainId;for(let f=1;f<=o;f++)try{return await Promise.race([e(),new Promise((p,m)=>setTimeout(()=>m(new Error("Operation timeout")),l))])}catch(p){c=p;const m=this.parseCustomError(p);if(console.warn(`${n} attempt ${f}/${o} failed:`,m.message),p.message.includes("user rejected")||p.message.includes("User denied")||p.code===4001||p.message.includes("Invalid contract address")||m.type==="user_rejection")throw p;if(m.type==="business_logic")throw console.warn(`Business logic error detected, skipping retries for ${n}:`,m.message),p;if(r.isMobile&&(p.message.includes("Network Error")||p.message.includes("CONNECTION ERROR")||p.code==="NETWORK_ERROR"))throw console.warn(`Mobile network error detected, skipping retries for ${n}`),p;if(f<o){const g=a*f;console.log(`Retrying ${n} in ${g}ms...`),await new Promise(w=>setTimeout(w,g))}}throw c}async getAllRaffleAddresses(e={}){var p;const{maxPools:n=1e3,pageSize:r=100}=e,s=`raffleAddresses_${(p=this.walletContext)==null?void 0:p.chainId}`,o=this.cache.get(s);if(o&&Date.now()-o.timestamp<this.cacheTimeout)return o.data;if(!this.areContractsAvailable())throw new Error("CONTRACTS_NOT_AVAILABLE");const a=this.getProtocolManagerContract();if(!a)throw new Error("CONTRACTS_NOT_AVAILABLE");const l=[];let c=0,u=!0;for(;u&&l.length<n;){const m=await this.withRetry(()=>a.getAllPools(c,r),`getAllPools(cursor=${c})`),[g,w,y]=m;if(l.push(...g),c=w.toNumber?w.toNumber():Number(w),u=y,g.length===0)break}const f=l.slice().reverse();return this.cache.set(s,{data:f,timestamp:Date.now()}),f}async fetchRaffleDetails(e,n={}){var r,s,o;try{const a=this.createContractInstance(e,"pool",!0);if(!a)return console.error(`Failed to create raffle contract for ${e}`),null;const l=[{method:"name",params:[]},{method:"creator",params:[]},{method:"startTime",params:[]},{method:"duration",params:[]},{method:"slotFee",params:[]},{method:"slotLimit",params:[]},{method:"winnersCount",params:[]},{method:"maxSlotsPerAddress",params:[]},{method:"state",params:[]}],c=[{method:"isPrized",params:[]},{method:"prizeCollection",params:[]},{method:"prizeTokenId",params:[]},{method:"erc20PrizeToken",params:[]},{method:"erc20PrizeAmount",params:[]},{method:"nativePrizeAmount",params:[]},{method:"standard",params:[]},{method:"isEscrowedPrize",params:[]}],u=[{method:"isCollabPool",params:[]},{method:"usesCustomFee",params:[]},{method:"revenueRecipient",params:[]},{method:"isExternalCollection",params:[]},{method:"isRefundable",params:[]}];let f,p,m;const g=(r=this.walletContext)==null?void 0:r.chainId;n.isMobile?(f=await this.executeSequentialCalls(a,l,n),p=await this.executeSequentialCalls(a,c,n,!0),m=await this.executeSequentialCalls(a,u,n,!0)):(f=await mk(a,l,g)||await this.executeSequentialCalls(a,l,n),p=await mk(a,c,g)||await this.executeSequentialCalls(a,c,n,!0),m=await mk(a,u,g)||await this.executeSequentialCalls(a,u,n,!0));const[w,y,T,j,_,v,P,D,$]=f,[U,K,Y,G,X,V,A,x]=p,[C,L,z,R,I]=m;let N;switch($){case 0:N="pending";break;case 1:N="active";break;case 2:N="drawing";break;case 3:N="completed";break;case 4:N="completed";break;case 5:N="ended";break;default:N="ended"}let F;if([2,3,4,5,6,7,8].includes($))try{const E=await((s=a.getActualPoolDuration)==null?void 0:s.call(a));E&&(F=E.toNumber?E.toNumber():Number(E))}catch{}return{id:e,name:w,address:e,chainId:(o=this.walletContext)==null?void 0:o.chainId,creator:y,startTime:T.toNumber(),duration:j.toNumber(),actualDuration:F,slotFee:_,ticketLimit:v.toNumber(),slotLimit:v.toNumber(),ticketsSold:0,winnersCount:P.toNumber(),maxSlotsPerAddress:D.toNumber(),isPrized:!!U,prizeCollection:K,prizeTokenId:Y?Y.toNumber?Y.toNumber():Number(Y):0,stateNum:$,state:N,erc20PrizeToken:G,erc20PrizeAmount:X,nativePrizeAmount:V,isCollabPool:C,standard:A!=null?A.toNumber?A.toNumber():Number(A):void 0,usesCustomFee:L,isEscrowedPrize:x}}catch(a){return console.error(`Error fetching raffle details for ${e}:`,a),null}}async processBatch(e,n={}){const r=this.getPlatformConfig(n.isMobile),s=n.batchSize||r.concurrency,o=n.batchDelay||r.batchDelay,a=n.onProgress,l=[],c=Math.ceil(e.length/s);console.log(`Processing ${e.length} raffles in ${c} batches (${s} per batch)`);for(let u=0;u<e.length;u+=s){const f=Math.floor(u/s)+1,p=e.slice(u,u+s);console.log(`Processing batch ${f}/${c} (${p.length} raffles)`);try{if(n.isMobile&&r.progressiveLoading)for(const m of p)try{const g=await this.fetchRaffleDetails(m,{isMobile:!0});g&&(l.push(g),a&&a(l.length,e.length)),await new Promise(w=>setTimeout(w,50))}catch(g){console.warn(`Failed to fetch raffle ${m}:`,g.message)}else{const m=p.map(y=>this.fetchRaffleDetails(y,{isMobile:n.isMobile})),w=(await Promise.allSettled(m)).filter(y=>y.status==="fulfilled"&&y.value!==null).map(y=>y.value);l.push(...w),a&&a(l.length,e.length)}u+s<e.length&&(console.log(`Waiting ${o}ms before next batch...`),await new Promise(m=>setTimeout(m,o)))}catch(m){console.error(`Error processing batch ${f}:`,m)}}return console.log(`Successfully processed ${l.length}/${e.length} raffles`),l}async fetchAllRaffles(e={}){var c,u,f;const{isMobile:n=!1,useCache:r=!0,maxRaffles:s=null}=e,o=this.getPlatformConfig(n),a=`allRaffles_${(c=this.walletContext)==null?void 0:c.chainId}_${n}`,l=this.startTimer("fetchAllRaffles",{isMobile:n,chainId:(u=this.walletContext)==null?void 0:u.chainId});if(r){const p=this.cache.get(a);if(p&&Date.now()-p.timestamp<this.cacheTimeout)return this.endTimer(l,{fromCache:!0,rafflCount:p.data.length}),p.data}try{const p=this.startTimer("getAllRaffleAddresses",{isMobile:n}),m=await this.getAllRaffleAddresses();if(this.endTimer(p,{addressCount:(m==null?void 0:m.length)||0}),!m||m.length===0)return this.endTimer(l,{rafflCount:0,fromCache:!1}),[];const g=s||o.maxRafflesToFetch,w=m.slice(0,g),y=this.startTimer("processBatch",{isMobile:n,totalAddresses:w.length,batchSize:o.concurrency}),T=await this.processBatch(w,{...o,isMobile:n,onProgress:(j,_)=>{console.log(`[RaffleService] Progress: ${j}/${_} raffles processed (${(j/_*100).toFixed(1)}%)`)}});return this.endTimer(y,{successfulRaffles:T.length,failedRaffles:w.length-T.length}),r&&this.cache.set(a,{data:T,timestamp:Date.now()}),this.endTimer(l,{rafflCount:T.length,fromCache:!1,totalAddresses:m.length,processedAddresses:w.length}),T}catch(p){throw this.trackError("fetchAllRaffles",p,{isMobile:n,chainId:(f=this.walletContext)==null?void 0:f.chainId}),this.endTimer(l,{error:!0,errorMessage:p.message}),p}}async searchRaffles(e,n={}){const r=await this.fetchAllRaffles(n),s=e.trim().toLowerCase();return r.filter(o=>(o.name||"").toLowerCase().includes(s)||(o.address||"").toLowerCase().includes(s)||(o.address||"").toLowerCase()===s)}clearCache(){this.cache.clear()}startTimer(e,n={}){const r=`${e}_${Date.now()}_${Math.random()}`;return this.performanceMetrics.set(r,{operation:e,context:n,startTime:performance.now(),platform:n.isMobile?"mobile":"desktop"}),r}endTimer(e,n={}){const r=this.performanceMetrics.get(e);if(!r)return;const s=performance.now(),o=s-r.startTime,a={...r,endTime:s,duration:o,...n};if(console.log(`[RaffleService] ${r.operation} completed in ${o.toFixed(2)}ms`,{platform:r.platform,context:r.context,...n}),this.performanceMetrics.set(e,a),this.performanceMetrics.size>100){const l=this.performanceMetrics.keys().next().value;this.performanceMetrics.delete(l)}return a}trackError(e,n,r={}){const s=`${e}_${r.isMobile?"mobile":"desktop"}`,o=this.errorMetrics.get(s)||{count:0,errors:[]};o.count++,o.errors.push({timestamp:Date.now(),message:n.message,stack:n.stack,context:r}),o.errors.length>10&&(o.errors=o.errors.slice(-10)),this.errorMetrics.set(s,o),console.error(`[RaffleService] Error in ${e} (${r.isMobile?"mobile":"desktop"}):`,n)}parseCustomError(e){const n=vF(e);if(e.code===4001||n.toLowerCase().includes("user rejected"))return{type:"user_rejection",message:"Transaction rejected by user"};const r=["ExceedsMaxSlots","ExceedsSlotLimit","IncorrectPayment","ContractsCannotPurchase","CreatorNotAllowed","InvalidNonPrizedPurchase","NotAWinner","NoPrizesToClaim","UnauthorizedMinter","ExceedsMaxSupply","ZeroAddress","ZeroQuantity","ZeroSlotFee","PoolDurationElapsed","ProtocolAdminNotAllowed","SocialEngagementNotConfigured","InvalidState","OnlyOperator","InvalidPrizeAmount","PrizeTransferFailed","InvalidPrizeCollection","InvalidPoolState","UnauthorizedCaller","ExceedsWinnersCount","MintingNotSupported","SupplyNotSet"];for(const s of r)if(n.includes(s))return{type:"business_logic",message:n,errorName:s};return e.code==="NETWORK_ERROR"||e.message.includes("Network Error")||e.message.includes("CONNECTION ERROR")||e.message.includes("timeout")?{type:"network",message:"Network error occurred"}:{type:"unknown",message:n||"Unknown error occurred"}}async executeSequentialCalls(e,n,r={},s=!1){const o=[];for(const{method:a,params:l=[]}of n)try{if(typeof e[a]!="function")if(console.warn(`Method ${a} does not exist on contract, using fallback`),s){a.includes("is")||a==="isCollabPool"||a==="usesCustomFee"||a==="isExternalCollection"||a==="isRefundable"||a==="isPrized"?o.push(!1):a==="isEscrowedPrize"||a==="standard"?o.push(void 0):a==="revenueRecipient"||a==="prizeCollection"||a==="erc20PrizeToken"?o.push($e):a==="prizeTokenId"||a==="erc20PrizeAmount"||a==="nativePrizeAmount"?o.push(ce.from(0)):o.push(null);continue}else throw new Error(`Method ${a} does not exist on contract`);if(s){const c=await e[a](...l).catch(u=>{const f=this.parseCustomError(u);if(console.warn(`${a} failed, using fallback:`,f.message),a.includes("is")||a==="isCollabPool"||a==="usesCustomFee"||a==="isExternalCollection"||a==="isRefundable"||a==="isPrized")return!1;if(a==="isEscrowedPrize")return;if(a==="standard")return;if(a==="revenueRecipient"||a==="prizeCollection"||a==="erc20PrizeToken")return $e;if(a==="prizeTokenId"||a==="erc20PrizeAmount"||a==="nativePrizeAmount")return ce.from(0);throw u});o.push(c)}else{const c=await this.withRetry(()=>e[a](...l),`${a}-${e.address}`,r);o.push(c)}}catch(c){const u=this.parseCustomError(c);console.error(`Failed to execute call ${a}:`,u),this.logError(u.message,"executeSequentialCalls",{method:a,isMobile:r.isMobile,errorType:u.type,errorName:u.errorName}),o.push(null)}return o}getPerformanceMetrics(){const e={mobile:{operations:{},totalOperations:0,avgDuration:0},desktop:{operations:{},totalOperations:0,avgDuration:0}};let n=0,r=0;for(const s of this.performanceMetrics.values()){if(!s.duration)continue;const o=s.platform,a=s.operation;e[o].operations[a]||(e[o].operations[a]={count:0,totalDuration:0,avgDuration:0,minDuration:1/0,maxDuration:0});const l=e[o].operations[a];l.count++,l.totalDuration+=s.duration,l.avgDuration=l.totalDuration/l.count,l.minDuration=Math.min(l.minDuration,s.duration),l.maxDuration=Math.max(l.maxDuration,s.duration),e[o].totalOperations++,o==="mobile"?n+=s.duration:r+=s.duration}return e.mobile.avgDuration=e.mobile.totalOperations>0?n/e.mobile.totalOperations:0,e.desktop.avgDuration=e.desktop.totalOperations>0?r/e.desktop.totalOperations:0,e}getErrorStats(){const e={};for(const[n,r]of this.errorMetrics.entries())e[n]={count:r.count,lastError:r.errors[r.errors.length-1],recentErrors:r.errors.slice(-3)};return e}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys()),performance:this.getPerformanceStats(),errors:this.getErrorStats()}}logError(e,n,r={}){const s=`${n}_${e}`,o=this.errorMetrics.get(s)||{count:0};this.errorMetrics.set(s,{count:o.count+1,lastOccurrence:new Date().toISOString(),message:e,context:n,metadata:r}),console.error(`[${n}] ${e}`,r)}}const Ba=new uie,die=()=>{const[t,e]=k.useState(!1);return k.useEffect(()=>{},[!1]),{component:null}},fie=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),wF=()=>{fie&&console.log("Mobile keyboard fix initialized (simplified version)")},kF=()=>{console.log("Mobile keyboard fix cleanup (simplified version)")},hie=wF,pie=kF;let gk=null;function mie(){if(typeof window>"u"||typeof document>"u")return()=>{};const t={capture:!0},e=n=>{const r=n.target;if(!r||!(r instanceof Element))return;const s=r.closest('input[type="number"]');s&&(s.disabled||s.readOnly||s.dataset&&s.dataset.wheelAllowed==="true"||s.blur())};return document.addEventListener("wheel",e,t),gk=()=>{document.removeEventListener("wheel",e,t),gk=null},gk}function Il(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TF(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var co={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Nh={duration:.5,overwrite:!1,delay:0},tC,vs,sr,Lo=1e8,Un=1/Lo,l2=Math.PI*2,gie=l2/4,yie=0,NF=Math.sqrt,xie=Math.cos,bie=Math.sin,ls=function(e){return typeof e=="string"},Tr=function(e){return typeof e=="function"},tc=function(e){return typeof e=="number"},nC=function(e){return typeof e>"u"},hl=function(e){return typeof e=="object"},Si=function(e){return e!==!1},rC=function(){return typeof window<"u"},Ax=function(e){return Tr(e)||ls(e)},jF=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Us=Array.isArray,c2=/(?:-?\.?\d|\.)+/gi,CF=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Yf=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,yk=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,SF=/[+-]=-?[.\d]+/,EF=/[^,'"\[\]\s]+/gi,vie=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,mr,Ga,u2,sC,ho={},ob={},_F,AF=function(e){return(ob=jh(e,ho))&&Ri},iC=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},pg=function(e,n){return!n&&console.warn(e)},PF=function(e,n){return e&&(ho[e]=n)&&ob&&(ob[e]=n)||ho},mg=function(){return 0},wie={suppressEvents:!0,isStart:!0,kill:!1},T0={suppressEvents:!0,kill:!1},kie={suppressEvents:!0},oC={},Gc=[],d2={},RF,Ki={},xk={},m5=30,N0=[],aC="",lC=function(e){var n=e[0],r,s;if(hl(n)||Tr(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(s=N0.length;s--&&!N0[s].targetTest(n););r=N0[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new nz(e[s],r)))||e.splice(s,1);return e},cd=function(e){return e._gsap||lC(Fo(e))[0]._gsap},IF=function(e,n,r){return(r=e[n])&&Tr(r)?e[n]():nC(r)&&e.getAttribute&&e.getAttribute(n)||r},Ei=function(e,n){return(e=e.split(",")).forEach(n)||e},_r=function(e){return Math.round(e*1e5)/1e5||0},zr=function(e){return Math.round(e*1e7)/1e7||0},ah=function(e,n){var r=n.charAt(0),s=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+s:r==="-"?e-s:r==="*"?e*s:e/s},Tie=function(e,n){for(var r=n.length,s=0;e.indexOf(n[s])<0&&++s<r;);return s<r},ab=function(){var e=Gc.length,n=Gc.slice(0),r,s;for(d2={},Gc.length=0,r=0;r<e;r++)s=n[r],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},cC=function(e){return!!(e._initted||e._startAt||e.add)},MF=function(e,n,r,s){Gc.length&&!vs&&ab(),e.render(n,r,!!(vs&&n<0&&cC(e))),Gc.length&&!vs&&ab()},DF=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(EF).length<2?n:ls(e)?e.trim():e},OF=function(e){return e},po=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},Nie=function(e){return function(n,r){for(var s in r)s in n||s==="duration"&&e||s==="ease"||(n[s]=r[s])}},jh=function(e,n){for(var r in n)e[r]=n[r];return e},g5=function t(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=hl(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},lb=function(e,n){var r={},s;for(s in e)s in n||(r[s]=e[s]);return r},km=function(e){var n=e.parent||mr,r=e.keyframes?Nie(Us(e.keyframes)):po;if(Si(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},jie=function(e,n){for(var r=e.length,s=r===n.length;s&&r--&&e[r]===n[r];);return r<0},LF=function(e,n,r,s,o){var a=e[s],l;if(o)for(l=n[o];a&&a[o]>l;)a=a._prev;return a?(n._next=a._next,a._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[s]=n,n._prev=a,n.parent=n._dp=e,n},mv=function(e,n,r,s){r===void 0&&(r="_first"),s===void 0&&(s="_last");var o=n._prev,a=n._next;o?o._next=a:e[r]===n&&(e[r]=a),a?a._prev=o:e[s]===n&&(e[s]=o),n._next=n._prev=n.parent=null},eu=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ud=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},Cie=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},f2=function(e,n,r,s){return e._startAt&&(vs?e._startAt.revert(T0):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,s))},Sie=function t(e){return!e||e._ts&&t(e.parent)},y5=function(e){return e._repeat?Ch(e._tTime,e=e.duration()+e._rDelay)*e:0},Ch=function(e,n){var r=Math.floor(e=zr(e/n));return e&&r===e?r-1:r},cb=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},gv=function(e){return e._end=zr(e._start+(e._tDur/Math.abs(e._ts||e._rts||Un)||0))},yv=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=zr(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),gv(e),r._dirty||ud(r,e)),e},FF=function(e,n){var r;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(r=cb(e.rawTime(),n),(!n._dur||Qg(0,n.totalDuration(),r)-n._tTime>Un)&&n.render(r,!0)),ud(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Un}},el=function(e,n,r,s){return n.parent&&eu(n),n._start=zr((tc(r)?r:r||e!==mr?Po(e,r,n):e._time)+n._delay),n._end=zr(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),LF(e,n,"_first","_last",e._sort?"_start":0),h2(n)||(e._recent=n),s||FF(e,n),e._ts<0&&yv(e,e._tTime),e},zF=function(e,n){return(ho.ScrollTrigger||iC("scrollTrigger",n))&&ho.ScrollTrigger.create(n,e)},$F=function(e,n,r,s,o){if(dC(e,n,o),!e._initted)return 1;if(!r&&e._pt&&!vs&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&RF!==Xi.frame)return Gc.push(e),e._lazy=[o,s],1},Eie=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},h2=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},_ie=function(e,n,r,s){var o=e.ratio,a=n<0||!n&&(!e._start&&Eie(e)&&!(!e._initted&&h2(e))||(e._ts<0||e._dp._ts<0)&&!h2(e))?0:1,l=e._rDelay,c=0,u,f,p;if(l&&e._repeat&&(c=Qg(0,e._tDur,n),f=Ch(c,l),e._yoyo&&f&1&&(a=1-a),f!==Ch(e._tTime,l)&&(o=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==o||vs||s||e._zTime===Un||!n&&e._zTime){if(!e._initted&&$F(e,n,s,r,c))return;for(p=e._zTime,e._zTime=n||(r?Un:0),r||(r=n&&!p),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=c,u=e._pt;u;)u.r(a,u.d),u=u._next;n<0&&f2(e,n,r,!0),e._onUpdate&&!r&&so(e,"onUpdate"),c&&e._repeat&&!r&&e.parent&&so(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===a&&(a&&eu(e,1),!r&&!vs&&(so(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},Aie=function(e,n,r){var s;if(r>n)for(s=e._first;s&&s._start<=r;){if(s.data==="isPause"&&s._start>n)return s;s=s._next}else for(s=e._last;s&&s._start>=r;){if(s.data==="isPause"&&s._start<n)return s;s=s._prev}},Sh=function(e,n,r,s){var o=e._repeat,a=zr(n)||0,l=e._tTime/e._tDur;return l&&!s&&(e._time*=a/e._dur),e._dur=a,e._tDur=o?o<0?1e10:zr(a*(o+1)+e._rDelay*o):a,l>0&&!s&&yv(e,e._tTime=e._tDur*l),e.parent&&gv(e),r||ud(e.parent,e),e},x5=function(e){return e instanceof si?ud(e):Sh(e,e._dur)},Pie={_start:0,endTime:mg,totalDuration:mg},Po=function t(e,n,r){var s=e.labels,o=e._recent||Pie,a=e.duration()>=Lo?o.endTime(!1):e._dur,l,c,u;return ls(n)&&(isNaN(n)||n in s)?(c=n.charAt(0),u=n.substr(-1)==="%",l=n.indexOf("="),c==="<"||c===">"?(l>=0&&(n=n.replace(/=/,"")),(c==="<"?o._start:o.endTime(o._repeat>=0))+(parseFloat(n.substr(1))||0)*(u?(l<0?o:r).totalDuration()/100:1)):l<0?(n in s||(s[n]=a),s[n]):(c=parseFloat(n.charAt(l-1)+n.substr(l+1)),u&&r&&(c=c/100*(Us(r)?r[0]:r).totalDuration()),l>1?t(e,n.substr(0,l-1),r)+c:a+c)):n==null?a:+n},Tm=function(e,n,r){var s=tc(n[1]),o=(s?2:1)+(e<2?0:1),a=n[o],l,c;if(s&&(a.duration=n[1]),a.parent=r,e){for(l=a,c=r;c&&!("immediateRender"in l);)l=c.vars.defaults||{},c=Si(c.vars.inherit)&&c.parent;a.immediateRender=Si(l.immediateRender),e<2?a.runBackwards=1:a.startAt=n[o-1]}return new Fr(n[0],a,n[o+1])},du=function(e,n){return e||e===0?n(e):n},Qg=function(e,n,r){return r<e?e:r>n?n:r},Os=function(e,n){return!ls(e)||!(n=vie.exec(e))?"":n[1]},Rie=function(e,n,r){return du(r,function(s){return Qg(e,n,s)})},p2=[].slice,BF=function(e,n){return e&&hl(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&hl(e[0]))&&!e.nodeType&&e!==Ga},Iie=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(s){var o;return ls(s)&&!n||BF(s,1)?(o=r).push.apply(o,Fo(s)):r.push(s)})||r},Fo=function(e,n,r){return sr&&!n&&sr.selector?sr.selector(e):ls(e)&&!r&&(u2||!Eh())?p2.call((n||sC).querySelectorAll(e),0):Us(e)?Iie(e,r):BF(e)?p2.call(e,0):e?[e]:[]},m2=function(e){return e=Fo(e)[0]||pg("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return Fo(n,r.querySelectorAll?r:r===e?pg("Invalid scope")||sC.createElement("div"):e)}},UF=function(e){return e.sort(function(){return .5-Math.random()})},VF=function(e){if(Tr(e))return e;var n=hl(e)?e:{each:e},r=dd(n.ease),s=n.from||0,o=parseFloat(n.base)||0,a={},l=s>0&&s<1,c=isNaN(s)||l,u=n.axis,f=s,p=s;return ls(s)?f=p={center:.5,edges:.5,end:1}[s]||0:!l&&c&&(f=s[0],p=s[1]),function(m,g,w){var y=(w||n).length,T=a[y],j,_,v,P,D,$,U,K,Y;if(!T){if(Y=n.grid==="auto"?0:(n.grid||[1,Lo])[1],!Y){for(U=-Lo;U<(U=w[Y++].getBoundingClientRect().left)&&Y<y;);Y<y&&Y--}for(T=a[y]=[],j=c?Math.min(Y,y)*f-.5:s%Y,_=Y===Lo?0:c?y*p/Y-.5:s/Y|0,U=0,K=Lo,$=0;$<y;$++)v=$%Y-j,P=_-($/Y|0),T[$]=D=u?Math.abs(u==="y"?P:v):NF(v*v+P*P),D>U&&(U=D),D<K&&(K=D);s==="random"&&UF(T),T.max=U-K,T.min=K,T.v=y=(parseFloat(n.amount)||parseFloat(n.each)*(Y>y?y-1:u?u==="y"?y/Y:Y:Math.max(Y,y/Y))||0)*(s==="edges"?-1:1),T.b=y<0?o-y:o,T.u=Os(n.amount||n.each)||0,r=r&&y<0?ZF(r):r}return y=(T[m]-T.min)/T.max||0,zr(T.b+(r?r(y):y)*T.v)+T.u}},g2=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var s=zr(Math.round(parseFloat(r)/e)*e*n);return(s-s%1)/n+(tc(r)?0:Os(r))}},qF=function(e,n){var r=Us(e),s,o;return!r&&hl(e)&&(s=r=e.radius||Lo,e.values?(e=Fo(e.values),(o=!tc(e[0]))&&(s*=s)):e=g2(e.increment)),du(n,r?Tr(e)?function(a){return o=e(a),Math.abs(o-a)<=s?o:a}:function(a){for(var l=parseFloat(o?a.x:a),c=parseFloat(o?a.y:0),u=Lo,f=0,p=e.length,m,g;p--;)o?(m=e[p].x-l,g=e[p].y-c,m=m*m+g*g):m=Math.abs(e[p]-l),m<u&&(u=m,f=p);return f=!s||u<=s?e[f]:a,o||f===a||tc(a)?f:f+Os(a)}:g2(e))},WF=function(e,n,r,s){return du(Us(e)?!n:r===!0?!!(r=0):!s,function(){return Us(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(s=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*s)/s})},Mie=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduce(function(o,a){return a(o)},s)}},Die=function(e,n){return function(r){return e(parseFloat(r))+(n||Os(r))}},Oie=function(e,n,r){return GF(e,n,0,1,r)},HF=function(e,n,r){return du(r,function(s){return e[~~n(s)]})},Lie=function t(e,n,r){var s=n-e;return Us(e)?HF(e,t(0,e.length),n):du(r,function(o){return(s+(o-e)%s)%s+e})},Fie=function t(e,n,r){var s=n-e,o=s*2;return Us(e)?HF(e,t(0,e.length-1),n):du(r,function(a){return a=(o+(a-e)%o)%o||0,e+(a>s?o-a:a)})},gg=function(e){for(var n=0,r="",s,o,a,l;~(s=e.indexOf("random(",n));)a=e.indexOf(")",s),l=e.charAt(s+7)==="[",o=e.substr(s+7,a-s-7).match(l?EF:c2),r+=e.substr(n,s-n)+WF(l?o:+o[0],l?0:+o[1],+o[2]||1e-5),n=a+1;return r+e.substr(n,e.length-n)},GF=function(e,n,r,s,o){var a=n-e,l=s-r;return du(o,function(c){return r+((c-e)/a*l||0)})},zie=function t(e,n,r,s){var o=isNaN(e+n)?0:function(g){return(1-g)*e+g*n};if(!o){var a=ls(e),l={},c,u,f,p,m;if(r===!0&&(s=1)&&(r=null),a)e={p:e},n={p:n};else if(Us(e)&&!Us(n)){for(f=[],p=e.length,m=p-2,u=1;u<p;u++)f.push(t(e[u-1],e[u]));p--,o=function(w){w*=p;var y=Math.min(m,~~w);return f[y](w-y)},r=n}else s||(e=jh(Us(e)?[]:{},e));if(!f){for(c in n)uC.call(l,e,c,"get",n[c]);o=function(w){return pC(w,l)||(a?e.p:e)}}}return du(r,o)},b5=function(e,n,r){var s=e.labels,o=Lo,a,l,c;for(a in s)l=s[a]-n,l<0==!!r&&l&&o>(l=Math.abs(l))&&(c=a,o=l);return c},so=function(e,n,r){var s=e.vars,o=s[n],a=sr,l=e._ctx,c,u,f;if(o)return c=s[n+"Params"],u=s.callbackScope||e,r&&Gc.length&&ab(),l&&(sr=l),f=c?o.apply(u,c):o.call(u),sr=a,f},tm=function(e){return eu(e),e.scrollTrigger&&e.scrollTrigger.kill(!!vs),e.progress()<1&&so(e,"onInterrupt"),e},Jf,KF=[],YF=function(e){if(e)if(e=!e.name&&e.default||e,rC()||e.headless){var n=e.name,r=Tr(e),s=n&&!r&&e.init?function(){this._props=[]}:e,o={init:mg,render:pC,add:uC,kill:toe,modifier:eoe,rawVars:0},a={targetTest:0,get:0,getSetter:hC,aliases:{},register:0};if(Eh(),e!==s){if(Ki[n])return;po(s,po(lb(e,o),a)),jh(s.prototype,jh(o,lb(e,a))),Ki[s.prop=n]=s,e.targetTest&&(N0.push(s),oC[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}PF(n,s),e.register&&e.register(Ri,s,_i)}else KF.push(e)},Bn=255,nm={aqua:[0,Bn,Bn],lime:[0,Bn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Bn],navy:[0,0,128],white:[Bn,Bn,Bn],olive:[128,128,0],yellow:[Bn,Bn,0],orange:[Bn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Bn,0,0],pink:[Bn,192,203],cyan:[0,Bn,Bn],transparent:[Bn,Bn,Bn,0]},bk=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*Bn+.5|0},JF=function(e,n,r){var s=e?tc(e)?[e>>16,e>>8&Bn,e&Bn]:0:nm.black,o,a,l,c,u,f,p,m,g,w;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),nm[e])s=nm[e];else if(e.charAt(0)==="#"){if(e.length<6&&(o=e.charAt(1),a=e.charAt(2),l=e.charAt(3),e="#"+o+o+a+a+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Bn,s&Bn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Bn,e&Bn]}else if(e.substr(0,3)==="hsl"){if(s=w=e.match(c2),!n)c=+s[0]%360/360,u=+s[1]/100,f=+s[2]/100,a=f<=.5?f*(u+1):f+u-f*u,o=f*2-a,s.length>3&&(s[3]*=1),s[0]=bk(c+1/3,o,a),s[1]=bk(c,o,a),s[2]=bk(c-1/3,o,a);else if(~e.indexOf("="))return s=e.match(CF),r&&s.length<4&&(s[3]=1),s}else s=e.match(c2)||nm.transparent;s=s.map(Number)}return n&&!w&&(o=s[0]/Bn,a=s[1]/Bn,l=s[2]/Bn,p=Math.max(o,a,l),m=Math.min(o,a,l),f=(p+m)/2,p===m?c=u=0:(g=p-m,u=f>.5?g/(2-p-m):g/(p+m),c=p===o?(a-l)/g+(a<l?6:0):p===a?(l-o)/g+2:(o-a)/g+4,c*=60),s[0]=~~(c+.5),s[1]=~~(u*100+.5),s[2]=~~(f*100+.5)),r&&s.length<4&&(s[3]=1),s},XF=function(e){var n=[],r=[],s=-1;return e.split(Kc).forEach(function(o){var a=o.match(Yf)||[];n.push.apply(n,a),r.push(s+=a.length+1)}),n.c=r,n},v5=function(e,n,r){var s="",o=(e+s).match(Kc),a=n?"hsla(":"rgba(",l=0,c,u,f,p;if(!o)return e;if(o=o.map(function(m){return(m=JF(m,n,1))&&a+(n?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),r&&(f=XF(e),c=r.c,c.join(s)!==f.c.join(s)))for(u=e.replace(Kc,"1").split(Yf),p=u.length-1;l<p;l++)s+=u[l]+(~c.indexOf(l)?o.shift()||a+"0,0,0,0)":(f.length?f:o.length?o:r).shift());if(!u)for(u=e.split(Kc),p=u.length-1;l<p;l++)s+=u[l]+o[l];return s+u[p]},Kc=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in nm)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),$ie=/hsl[a]?\(/,QF=function(e){var n=e.join(" "),r;if(Kc.lastIndex=0,Kc.test(n))return r=$ie.test(n),e[1]=v5(e[1],r),e[0]=v5(e[0],r,XF(e[1])),!0},yg,Xi=function(){var t=Date.now,e=500,n=33,r=t(),s=r,o=1e3/240,a=o,l=[],c,u,f,p,m,g,w=function y(T){var j=t()-s,_=T===!0,v,P,D,$;if((j>e||j<0)&&(r+=j-n),s+=j,D=s-r,v=D-a,(v>0||_)&&($=++p.frame,m=D-p.time*1e3,p.time=D=D/1e3,a+=v+(v>=o?4:o-v),P=1),_||(c=u(y)),P)for(g=0;g<l.length;g++)l[g](D,m,$,T)};return p={time:0,frame:0,tick:function(){w(!0)},deltaRatio:function(T){return m/(1e3/(T||60))},wake:function(){_F&&(!u2&&rC()&&(Ga=u2=window,sC=Ga.document||{},ho.gsap=Ri,(Ga.gsapVersions||(Ga.gsapVersions=[])).push(Ri.version),AF(ob||Ga.GreenSockGlobals||!Ga.gsap&&Ga||{}),KF.forEach(YF)),f=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&p.sleep(),u=f||function(T){return setTimeout(T,a-p.time*1e3+1|0)},yg=1,w(2))},sleep:function(){(f?cancelAnimationFrame:clearTimeout)(c),yg=0,u=mg},lagSmoothing:function(T,j){e=T||1/0,n=Math.min(j||33,e)},fps:function(T){o=1e3/(T||240),a=p.time*1e3+o},add:function(T,j,_){var v=j?function(P,D,$,U){T(P,D,$,U),p.remove(v)}:T;return p.remove(T),l[_?"unshift":"push"](v),Eh(),v},remove:function(T,j){~(j=l.indexOf(T))&&l.splice(j,1)&&g>=j&&g--},_listeners:l},p}(),Eh=function(){return!yg&&Xi.wake()},jn={},Bie=/^[\d.\-M][\d.\-,\s]/,Uie=/["']/g,Vie=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),s=r[0],o=1,a=r.length,l,c,u;o<a;o++)c=r[o],l=o!==a-1?c.lastIndexOf(","):c.length,u=c.substr(0,l),n[s]=isNaN(u)?u.replace(Uie,"").trim():+u,s=c.substr(l+1).trim();return n},qie=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),s=e.indexOf("(",n);return e.substring(n,~s&&s<r?e.indexOf(")",r+1):r)},Wie=function(e){var n=(e+"").split("("),r=jn[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Vie(n[1])]:qie(e).split(",").map(DF)):jn._CE&&Bie.test(e)?jn._CE("",e):r},ZF=function(e){return function(n){return 1-e(1-n)}},ez=function t(e,n){for(var r=e._first,s;r;)r instanceof si?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(s=r._ease,r._ease=r._yEase,r._yEase=s,r._yoyo=n)),r=r._next},dd=function(e,n){return e&&(Tr(e)?e:jn[e]||Wie(e))||n},Ud=function(e,n,r,s){r===void 0&&(r=function(c){return 1-n(1-c)}),s===void 0&&(s=function(c){return c<.5?n(c*2)/2:1-n((1-c)*2)/2});var o={easeIn:n,easeOut:r,easeInOut:s},a;return Ei(e,function(l){jn[l]=ho[l]=o,jn[a=l.toLowerCase()]=r;for(var c in o)jn[a+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=jn[l+"."+c]=o[c]}),o},tz=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},vk=function t(e,n,r){var s=n>=1?n:1,o=(r||(e?.3:.45))/(n<1?n:1),a=o/l2*(Math.asin(1/s)||0),l=function(f){return f===1?1:s*Math.pow(2,-10*f)*bie((f-a)*o)+1},c=e==="out"?l:e==="in"?function(u){return 1-l(1-u)}:tz(l);return o=l2/o,c.config=function(u,f){return t(e,u,f)},c},wk=function t(e,n){n===void 0&&(n=1.70158);var r=function(a){return a?--a*a*((n+1)*a+n)+1:0},s=e==="out"?r:e==="in"?function(o){return 1-r(1-o)}:tz(r);return s.config=function(o){return t(e,o)},s};Ei("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;Ud(t+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})});jn.Linear.easeNone=jn.none=jn.Linear.easeIn;Ud("Elastic",vk("in"),vk("out"),vk());(function(t,e){var n=1/e,r=2*n,s=2.5*n,o=function(l){return l<n?t*l*l:l<r?t*Math.pow(l-1.5/e,2)+.75:l<s?t*(l-=2.25/e)*l+.9375:t*Math.pow(l-2.625/e,2)+.984375};Ud("Bounce",function(a){return 1-o(1-a)},o)})(7.5625,2.75);Ud("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});Ud("Circ",function(t){return-(NF(1-t*t)-1)});Ud("Sine",function(t){return t===1?1:-xie(t*gie)+1});Ud("Back",wk("in"),wk("out"),wk());jn.SteppedEase=jn.steps=ho.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,s=e+(n?0:1),o=n?1:0,a=1-Un;return function(l){return((s*Qg(0,a,l)|0)+o)*r}}};Nh.ease=jn["quad.out"];Ei("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return aC+=t+","+t+"Params,"});var nz=function(e,n){this.id=yie++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:IF,this.set=n?n.getSetter:hC},xg=function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Sh(this,+n.duration,1,1),this.data=n.data,sr&&(this._ctx=sr,sr.data.push(this)),yg||Xi.wake()}var e=t.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Sh(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,s){if(Eh(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(yv(this,r),!o._dp||o.parent||FF(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&el(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Un||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),MF(this,r,s)),this},e.time=function(r,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+y5(this))%(this._dur+this._rDelay)||(r?this._dur:0),s):this._time},e.totalProgress=function(r,s){return arguments.length?this.totalTime(this.totalDuration()*r,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+y5(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,s){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*o,s):this._repeat?Ch(this._tTime,o)+1:1},e.timeScale=function(r,s){if(!arguments.length)return this._rts===-Un?0:this._rts;if(this._rts===r)return this;var o=this.parent&&this._ts?cb(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Un?0:this._rts,this.totalTime(Qg(-Math.abs(this._delay),this.totalDuration(),o),s!==!1),gv(this),Cie(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Eh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Un&&(this._tTime-=Un)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&el(s,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(Si(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var s=this.parent||this._dp;return s?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?cb(s.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=kie);var s=vs;return vs=r,cC(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),vs=s,this},e.globalTime=function(r){for(var s=this,o=arguments.length?r:s.rawTime();s;)o=s._start+o/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(r):o},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,x5(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var s=this._time;return this._rDelay=r,x5(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,s){return this.totalTime(Po(this,r),Si(s))},e.restart=function(r,s){return this.play().totalTime(r?-this._delay:0,Si(s)),this._dur||(this._zTime=-Un),this},e.play=function(r,s){return r!=null&&this.seek(r,s),this.reversed(!1).paused(!1)},e.reverse=function(r,s){return r!=null&&this.seek(r||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(r,s){return r!=null&&this.seek(r,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Un:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Un,this},e.isActive=function(){var r=this.parent||this._dp,s=this._start,o;return!!(!r||this._ts&&this._initted&&r.isActive()&&(o=r.rawTime(!0))>=s&&o<this.endTime(!0)-Un)},e.eventCallback=function(r,s,o){var a=this.vars;return arguments.length>1?(s?(a[r]=s,o&&(a[r+"Params"]=o),r==="onUpdate"&&(this._onUpdate=s)):delete a[r],this):a[r]},e.then=function(r){var s=this;return new Promise(function(o){var a=Tr(r)?r:OF,l=function(){var u=s.then;s.then=null,Tr(a)&&(a=a(s))&&(a.then||a===s)&&(s.then=u),o(a),s.then=u};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?l():s._prom=l})},e.kill=function(){tm(this)},t}();po(xg.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Un,_prom:0,_ps:!1,_rts:1});var si=function(t){TF(e,t);function e(r,s){var o;return r===void 0&&(r={}),o=t.call(this,r)||this,o.labels={},o.smoothChildTiming=!!r.smoothChildTiming,o.autoRemoveChildren=!!r.autoRemoveChildren,o._sort=Si(r.sortChildren),mr&&el(r.parent||mr,Il(o),s),r.reversed&&o.reverse(),r.paused&&o.paused(!0),r.scrollTrigger&&zF(Il(o),r.scrollTrigger),o}var n=e.prototype;return n.to=function(s,o,a){return Tm(0,arguments,this),this},n.from=function(s,o,a){return Tm(1,arguments,this),this},n.fromTo=function(s,o,a,l){return Tm(2,arguments,this),this},n.set=function(s,o,a){return o.duration=0,o.parent=this,km(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new Fr(s,o,Po(this,a),1),this},n.call=function(s,o,a){return el(this,Fr.delayedCall(0,s,o),a)},n.staggerTo=function(s,o,a,l,c,u,f){return a.duration=o,a.stagger=a.stagger||l,a.onComplete=u,a.onCompleteParams=f,a.parent=this,new Fr(s,a,Po(this,c)),this},n.staggerFrom=function(s,o,a,l,c,u,f){return a.runBackwards=1,km(a).immediateRender=Si(a.immediateRender),this.staggerTo(s,o,a,l,c,u,f)},n.staggerFromTo=function(s,o,a,l,c,u,f,p){return l.startAt=a,km(l).immediateRender=Si(l.immediateRender),this.staggerTo(s,o,l,c,u,f,p)},n.render=function(s,o,a){var l=this._time,c=this._dirty?this.totalDuration():this._tDur,u=this._dur,f=s<=0?0:zr(s),p=this._zTime<0!=s<0&&(this._initted||!u),m,g,w,y,T,j,_,v,P,D,$,U;if(this!==mr&&f>c&&s>=0&&(f=c),f!==this._tTime||a||p){if(l!==this._time&&u&&(f+=this._time-l,s+=this._time-l),m=f,P=this._start,v=this._ts,j=!v,p&&(u||(l=this._zTime),(s||!o)&&(this._zTime=s)),this._repeat){if($=this._yoyo,T=u+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(T*100+s,o,a);if(m=zr(f%T),f===c?(y=this._repeat,m=u):(D=zr(f/T),y=~~D,y&&y===D&&(m=u,y--),m>u&&(m=u)),D=Ch(this._tTime,T),!l&&this._tTime&&D!==y&&this._tTime-D*T-this._dur<=0&&(D=y),$&&y&1&&(m=u-m,U=1),y!==D&&!this._lock){var K=$&&D&1,Y=K===($&&y&1);if(y<D&&(K=!K),l=K?0:f%u?u:f,this._lock=1,this.render(l||(U?0:zr(y*T)),o,!u)._lock=0,this._tTime=f,!o&&this.parent&&so(this,"onRepeat"),this.vars.repeatRefresh&&!U&&(this.invalidate()._lock=1),l&&l!==this._time||j!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,c=this._tDur,Y&&(this._lock=2,l=K?u:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!U&&this.invalidate()),this._lock=0,!this._ts&&!j)return this;ez(this,U)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_=Aie(this,zr(l),zr(m)),_&&(f-=m-(m=_._start))),this._tTime=f,this._time=m,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,l=0),!l&&f&&!o&&!D&&(so(this,"onStart"),this._tTime!==f))return this;if(m>=l&&s>=0)for(g=this._first;g;){if(w=g._next,(g._act||m>=g._start)&&g._ts&&_!==g){if(g.parent!==this)return this.render(s,o,a);if(g.render(g._ts>0?(m-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(m-g._start)*g._ts,o,a),m!==this._time||!this._ts&&!j){_=0,w&&(f+=this._zTime=-Un);break}}g=w}else{g=this._last;for(var G=s<0?s:m;g;){if(w=g._prev,(g._act||G<=g._end)&&g._ts&&_!==g){if(g.parent!==this)return this.render(s,o,a);if(g.render(g._ts>0?(G-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(G-g._start)*g._ts,o,a||vs&&cC(g)),m!==this._time||!this._ts&&!j){_=0,w&&(f+=this._zTime=G?-Un:Un);break}}g=w}}if(_&&!o&&(this.pause(),_.render(m>=l?0:-Un)._zTime=m>=l?1:-1,this._ts))return this._start=P,gv(this),this.render(s,o,a);this._onUpdate&&!o&&so(this,"onUpdate",!0),(f===c&&this._tTime>=this.totalDuration()||!f&&l)&&(P===this._start||Math.abs(v)!==Math.abs(this._ts))&&(this._lock||((s||!u)&&(f===c&&this._ts>0||!f&&this._ts<0)&&eu(this,1),!o&&!(s<0&&!l)&&(f||l||!c)&&(so(this,f===c&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(s,o){var a=this;if(tc(o)||(o=Po(this,o,s)),!(s instanceof xg)){if(Us(s))return s.forEach(function(l){return a.add(l,o)}),this;if(ls(s))return this.addLabel(s,o);if(Tr(s))s=Fr.delayedCall(0,s);else return this}return this!==s?el(this,s,o):this},n.getChildren=function(s,o,a,l){s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=!0),l===void 0&&(l=-Lo);for(var c=[],u=this._first;u;)u._start>=l&&(u instanceof Fr?o&&c.push(u):(a&&c.push(u),s&&c.push.apply(c,u.getChildren(!0,o,a)))),u=u._next;return c},n.getById=function(s){for(var o=this.getChildren(1,1,1),a=o.length;a--;)if(o[a].vars.id===s)return o[a]},n.remove=function(s){return ls(s)?this.removeLabel(s):Tr(s)?this.killTweensOf(s):(s.parent===this&&mv(this,s),s===this._recent&&(this._recent=this._last),ud(this))},n.totalTime=function(s,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=zr(Xi.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),t.prototype.totalTime.call(this,s,o),this._forcing=0,this):this._tTime},n.addLabel=function(s,o){return this.labels[s]=Po(this,o),this},n.removeLabel=function(s){return delete this.labels[s],this},n.addPause=function(s,o,a){var l=Fr.delayedCall(0,o||mg,a);return l.data="isPause",this._hasPause=1,el(this,l,Po(this,s))},n.removePause=function(s){var o=this._first;for(s=Po(this,s);o;)o._start===s&&o.data==="isPause"&&eu(o),o=o._next},n.killTweensOf=function(s,o,a){for(var l=this.getTweensOf(s,a),c=l.length;c--;)Bc!==l[c]&&l[c].kill(s,o);return this},n.getTweensOf=function(s,o){for(var a=[],l=Fo(s),c=this._first,u=tc(o),f;c;)c instanceof Fr?Tie(c._targets,l)&&(u?(!Bc||c._initted&&c._ts)&&c.globalTime(0)<=o&&c.globalTime(c.totalDuration())>o:!o||c.isActive())&&a.push(c):(f=c.getTweensOf(l,o)).length&&a.push.apply(a,f),c=c._next;return a},n.tweenTo=function(s,o){o=o||{};var a=this,l=Po(a,s),c=o,u=c.startAt,f=c.onStart,p=c.onStartParams,m=c.immediateRender,g,w=Fr.to(a,po({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:o.duration||Math.abs((l-(u&&"time"in u?u.time:a._time))/a.timeScale())||Un,onStart:function(){if(a.pause(),!g){var T=o.duration||Math.abs((l-(u&&"time"in u?u.time:a._time))/a.timeScale());w._dur!==T&&Sh(w,T,0,1).render(w._time,!0,!0),g=1}f&&f.apply(w,p||[])}},o));return m?w.render(0):w},n.tweenFromTo=function(s,o,a){return this.tweenTo(o,po({startAt:{time:Po(this,s)}},a))},n.recent=function(){return this._recent},n.nextLabel=function(s){return s===void 0&&(s=this._time),b5(this,Po(this,s))},n.previousLabel=function(s){return s===void 0&&(s=this._time),b5(this,Po(this,s),1)},n.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Un)},n.shiftChildren=function(s,o,a){a===void 0&&(a=0);for(var l=this._first,c=this.labels,u;l;)l._start>=a&&(l._start+=s,l._end+=s),l=l._next;if(o)for(u in c)c[u]>=a&&(c[u]+=s);return ud(this)},n.invalidate=function(s){var o=this._first;for(this._lock=0;o;)o.invalidate(s),o=o._next;return t.prototype.invalidate.call(this,s)},n.clear=function(s){s===void 0&&(s=!0);for(var o=this._first,a;o;)a=o._next,this.remove(o),o=a;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),ud(this)},n.totalDuration=function(s){var o=0,a=this,l=a._last,c=Lo,u,f,p;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-s:s));if(a._dirty){for(p=a.parent;l;)u=l._prev,l._dirty&&l.totalDuration(),f=l._start,f>c&&a._sort&&l._ts&&!a._lock?(a._lock=1,el(a,l,f-l._delay,1)._lock=0):c=f,f<0&&l._ts&&(o-=f,(!p&&!a._dp||p&&p.smoothChildTiming)&&(a._start+=f/a._ts,a._time-=f,a._tTime-=f),a.shiftChildren(-f,!1,-1/0),c=0),l._end>o&&l._ts&&(o=l._end),l=u;Sh(a,a===mr&&a._time>o?a._time:o,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(s){if(mr._ts&&(MF(mr,cb(s,mr)),RF=Xi.frame),Xi.frame>=m5){m5+=co.autoSleep||120;var o=mr._first;if((!o||!o._ts)&&co.autoSleep&&Xi._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||Xi.sleep()}}},e}(xg);po(si.prototype,{_lock:0,_hasPause:0,_forcing:0});var Hie=function(e,n,r,s,o,a,l){var c=new _i(this._pt,e,n,0,1,lz,null,o),u=0,f=0,p,m,g,w,y,T,j,_;for(c.b=r,c.e=s,r+="",s+="",(j=~s.indexOf("random("))&&(s=gg(s)),a&&(_=[r,s],a(_,e,n),r=_[0],s=_[1]),m=r.match(yk)||[];p=yk.exec(s);)w=p[0],y=s.substring(u,p.index),g?g=(g+1)%5:y.substr(-5)==="rgba("&&(g=1),w!==m[f++]&&(T=parseFloat(m[f-1])||0,c._pt={_next:c._pt,p:y||f===1?y:",",s:T,c:w.charAt(1)==="="?ah(T,w)-T:parseFloat(w)-T,m:g&&g<4?Math.round:0},u=yk.lastIndex);return c.c=u<s.length?s.substring(u,s.length):"",c.fp=l,(SF.test(s)||j)&&(c.e=0),this._pt=c,c},uC=function(e,n,r,s,o,a,l,c,u,f){Tr(s)&&(s=s(o||0,e,a));var p=e[n],m=r!=="get"?r:Tr(p)?u?e[n.indexOf("set")||!Tr(e["get"+n.substr(3)])?n:"get"+n.substr(3)](u):e[n]():p,g=Tr(p)?u?Xie:oz:fC,w;if(ls(s)&&(~s.indexOf("random(")&&(s=gg(s)),s.charAt(1)==="="&&(w=ah(m,s)+(Os(m)||0),(w||w===0)&&(s=w))),!f||m!==s||y2)return!isNaN(m*s)&&s!==""?(w=new _i(this._pt,e,n,+m||0,s-(m||0),typeof p=="boolean"?Zie:az,0,g),u&&(w.fp=u),l&&w.modifier(l,this,e),this._pt=w):(!p&&!(n in e)&&iC(n,s),Hie.call(this,e,n,m,s,g,c||co.stringFilter,u))},Gie=function(e,n,r,s,o){if(Tr(e)&&(e=Nm(e,o,n,r,s)),!hl(e)||e.style&&e.nodeType||Us(e)||jF(e))return ls(e)?Nm(e,o,n,r,s):e;var a={},l;for(l in e)a[l]=Nm(e[l],o,n,r,s);return a},rz=function(e,n,r,s,o,a){var l,c,u,f;if(Ki[e]&&(l=new Ki[e]).init(o,l.rawVars?n[e]:Gie(n[e],s,o,a,r),r,s,a)!==!1&&(r._pt=c=new _i(r._pt,o,e,0,1,l.render,l,0,l.priority),r!==Jf))for(u=r._ptLookup[r._targets.indexOf(o)],f=l._props.length;f--;)u[l._props[f]]=c;return l},Bc,y2,dC=function t(e,n,r){var s=e.vars,o=s.ease,a=s.startAt,l=s.immediateRender,c=s.lazy,u=s.onUpdate,f=s.runBackwards,p=s.yoyoEase,m=s.keyframes,g=s.autoRevert,w=e._dur,y=e._startAt,T=e._targets,j=e.parent,_=j&&j.data==="nested"?j.vars.targets:T,v=e._overwrite==="auto"&&!tC,P=e.timeline,D,$,U,K,Y,G,X,V,A,x,C,L,z;if(P&&(!m||!o)&&(o="none"),e._ease=dd(o,Nh.ease),e._yEase=p?ZF(dd(p===!0?o:p,Nh.ease)):0,p&&e._yoyo&&!e._repeat&&(p=e._yEase,e._yEase=e._ease,e._ease=p),e._from=!P&&!!s.runBackwards,!P||m&&!s.stagger){if(V=T[0]?cd(T[0]).harness:0,L=V&&s[V.prop],D=lb(s,oC),y&&(y._zTime<0&&y.progress(1),n<0&&f&&l&&!g?y.render(-1,!0):y.revert(f&&w?T0:wie),y._lazy=0),a){if(eu(e._startAt=Fr.set(T,po({data:"isStart",overwrite:!1,parent:j,immediateRender:!0,lazy:!y&&Si(c),startAt:null,delay:0,onUpdate:u&&function(){return so(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(vs||!l&&!g)&&e._startAt.revert(T0),l&&w&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(f&&w&&!y){if(n&&(l=!1),U=po({overwrite:!1,data:"isFromStart",lazy:l&&!y&&Si(c),immediateRender:l,stagger:0,parent:j},D),L&&(U[V.prop]=L),eu(e._startAt=Fr.set(T,U)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(vs?e._startAt.revert(T0):e._startAt.render(-1,!0)),e._zTime=n,!l)t(e._startAt,Un,Un);else if(!n)return}for(e._pt=e._ptCache=0,c=w&&Si(c)||c&&!w,$=0;$<T.length;$++){if(Y=T[$],X=Y._gsap||lC(T)[$]._gsap,e._ptLookup[$]=x={},d2[X.id]&&Gc.length&&ab(),C=_===T?$:_.indexOf(Y),V&&(A=new V).init(Y,L||D,e,C,_)!==!1&&(e._pt=K=new _i(e._pt,Y,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(R){x[R]=K}),A.priority&&(G=1)),!V||L)for(U in D)Ki[U]&&(A=rz(U,D,e,C,Y,_))?A.priority&&(G=1):x[U]=K=uC.call(e,Y,U,"get",D[U],C,_,0,s.stringFilter);e._op&&e._op[$]&&e.kill(Y,e._op[$]),v&&e._pt&&(Bc=e,mr.killTweensOf(Y,x,e.globalTime(n)),z=!e.parent,Bc=0),e._pt&&c&&(d2[X.id]=1)}G&&cz(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!z,m&&n<=0&&P.render(Lo,!0,!0)},Kie=function(e,n,r,s,o,a,l,c){var u=(e._pt&&e._ptCache||(e._ptCache={}))[n],f,p,m,g;if(!u)for(u=e._ptCache[n]=[],m=e._ptLookup,g=e._targets.length;g--;){if(f=m[g][n],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==n&&f.fp!==n;)f=f._next;if(!f)return y2=1,e.vars[n]="+=0",dC(e,l),y2=0,c?pg(n+" not eligible for reset"):1;u.push(f)}for(g=u.length;g--;)p=u[g],f=p._pt||p,f.s=(s||s===0)&&!o?s:f.s+(s||0)+a*f.c,f.c=r-f.s,p.e&&(p.e=_r(r)+Os(p.e)),p.b&&(p.b=f.s+Os(p.b))},Yie=function(e,n){var r=e[0]?cd(e[0]).harness:0,s=r&&r.aliases,o,a,l,c;if(!s)return n;o=jh({},n);for(a in s)if(a in o)for(c=s[a].split(","),l=c.length;l--;)o[c[l]]=o[a];return o},Jie=function(e,n,r,s){var o=n.ease||s||"power1.inOut",a,l;if(Us(n))l=r[e]||(r[e]=[]),n.forEach(function(c,u){return l.push({t:u/(n.length-1)*100,v:c,e:o})});else for(a in n)l=r[a]||(r[a]=[]),a==="ease"||l.push({t:parseFloat(e),v:n[a],e:o})},Nm=function(e,n,r,s,o){return Tr(e)?e.call(n,r,s,o):ls(e)&&~e.indexOf("random(")?gg(e):e},sz=aC+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",iz={};Ei(sz+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return iz[t]=1});var Fr=function(t){TF(e,t);function e(r,s,o,a){var l;typeof s=="number"&&(o.duration=s,s=o,o=null),l=t.call(this,a?s:km(s))||this;var c=l.vars,u=c.duration,f=c.delay,p=c.immediateRender,m=c.stagger,g=c.overwrite,w=c.keyframes,y=c.defaults,T=c.scrollTrigger,j=c.yoyoEase,_=s.parent||mr,v=(Us(r)||jF(r)?tc(r[0]):"length"in s)?[r]:Fo(r),P,D,$,U,K,Y,G,X;if(l._targets=v.length?lC(v):pg("GSAP target "+r+" not found. https://gsap.com",!co.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,w||m||Ax(u)||Ax(f)){if(s=l.vars,P=l.timeline=new si({data:"nested",defaults:y||{},targets:_&&_.data==="nested"?_.vars.targets:v}),P.kill(),P.parent=P._dp=Il(l),P._start=0,m||Ax(u)||Ax(f)){if(U=v.length,G=m&&VF(m),hl(m))for(K in m)~sz.indexOf(K)&&(X||(X={}),X[K]=m[K]);for(D=0;D<U;D++)$=lb(s,iz),$.stagger=0,j&&($.yoyoEase=j),X&&jh($,X),Y=v[D],$.duration=+Nm(u,Il(l),D,Y,v),$.delay=(+Nm(f,Il(l),D,Y,v)||0)-l._delay,!m&&U===1&&$.delay&&(l._delay=f=$.delay,l._start+=f,$.delay=0),P.to(Y,$,G?G(D,Y,v):0),P._ease=jn.none;P.duration()?u=f=0:l.timeline=0}else if(w){km(po(P.vars.defaults,{ease:"none"})),P._ease=dd(w.ease||s.ease||"none");var V=0,A,x,C;if(Us(w))w.forEach(function(L){return P.to(v,L,">")}),P.duration();else{$={};for(K in w)K==="ease"||K==="easeEach"||Jie(K,w[K],$,w.easeEach);for(K in $)for(A=$[K].sort(function(L,z){return L.t-z.t}),V=0,D=0;D<A.length;D++)x=A[D],C={ease:x.e,duration:(x.t-(D?A[D-1].t:0))/100*u},C[K]=x.v,P.to(v,C,V),V+=C.duration;P.duration()<u&&P.to({},{duration:u-P.duration()})}}u||l.duration(u=P.duration())}else l.timeline=0;return g===!0&&!tC&&(Bc=Il(l),mr.killTweensOf(v),Bc=0),el(_,Il(l),o),s.reversed&&l.reverse(),s.paused&&l.paused(!0),(p||!u&&!w&&l._start===zr(_._time)&&Si(p)&&Sie(Il(l))&&_.data!=="nested")&&(l._tTime=-Un,l.render(Math.max(0,-f)||0)),T&&zF(Il(l),T),l}var n=e.prototype;return n.render=function(s,o,a){var l=this._time,c=this._tDur,u=this._dur,f=s<0,p=s>c-Un&&!f?c:s<Un?0:s,m,g,w,y,T,j,_,v,P;if(!u)_ie(this,s,o,a);else if(p!==this._tTime||!s||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f||this._lazy){if(m=p,v=this.timeline,this._repeat){if(y=u+this._rDelay,this._repeat<-1&&f)return this.totalTime(y*100+s,o,a);if(m=zr(p%y),p===c?(w=this._repeat,m=u):(T=zr(p/y),w=~~T,w&&w===T?(m=u,w--):m>u&&(m=u)),j=this._yoyo&&w&1,j&&(P=this._yEase,m=u-m),T=Ch(this._tTime,y),m===l&&!a&&this._initted&&w===T)return this._tTime=p,this;w!==T&&(v&&this._yEase&&ez(v,j),this.vars.repeatRefresh&&!j&&!this._lock&&m!==y&&this._initted&&(this._lock=a=1,this.render(zr(y*w),!0).invalidate()._lock=0))}if(!this._initted){if($F(this,f?s:m,a,o,p))return this._tTime=0,this;if(l!==this._time&&!(a&&this.vars.repeatRefresh&&w!==T))return this;if(u!==this._dur)return this.render(s,o,a)}if(this._tTime=p,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=_=(P||this._ease)(m/u),this._from&&(this.ratio=_=1-_),!l&&p&&!o&&!T&&(so(this,"onStart"),this._tTime!==p))return this;for(g=this._pt;g;)g.r(_,g.d),g=g._next;v&&v.render(s<0?s:v._dur*v._ease(m/this._dur),o,a)||this._startAt&&(this._zTime=s),this._onUpdate&&!o&&(f&&f2(this,s,o,a),so(this,"onUpdate")),this._repeat&&w!==T&&this.vars.onRepeat&&!o&&this.parent&&so(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(f&&!this._onUpdate&&f2(this,s,!0,!0),(s||!u)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&eu(this,1),!o&&!(f&&!l)&&(p||l||j)&&(so(this,p===c?"onComplete":"onReverseComplete",!0),this._prom&&!(p<c&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),t.prototype.invalidate.call(this,s)},n.resetTo=function(s,o,a,l,c){yg||Xi.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||dC(this,u),f=this._ease(u/this._dur),Kie(this,s,o,a,l,f,u,c)?this.resetTo(s,o,a,l,1):(yv(this,0),this.parent||LF(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(s,o){if(o===void 0&&(o="all"),!s&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?tm(this):this.scrollTrigger&&this.scrollTrigger.kill(!!vs),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(s,o,Bc&&Bc.vars.overwrite!==!0)._first||tm(this),this.parent&&a!==this.timeline.totalDuration()&&Sh(this,this._dur*this.timeline._tDur/a,0,1),this}var l=this._targets,c=s?Fo(s):l,u=this._ptLookup,f=this._pt,p,m,g,w,y,T,j;if((!o||o==="all")&&jie(l,c))return o==="all"&&(this._pt=0),tm(this);for(p=this._op=this._op||[],o!=="all"&&(ls(o)&&(y={},Ei(o,function(_){return y[_]=1}),o=y),o=Yie(l,o)),j=l.length;j--;)if(~c.indexOf(l[j])){m=u[j],o==="all"?(p[j]=o,w=m,g={}):(g=p[j]=p[j]||{},w=o);for(y in w)T=m&&m[y],T&&((!("kill"in T.d)||T.d.kill(y)===!0)&&mv(this,T,"_pt"),delete m[y]),g!=="all"&&(g[y]=1)}return this._initted&&!this._pt&&f&&tm(this),this},e.to=function(s,o){return new e(s,o,arguments[2])},e.from=function(s,o){return Tm(1,arguments)},e.delayedCall=function(s,o,a,l){return new e(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:o,onReverseComplete:o,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:l})},e.fromTo=function(s,o,a){return Tm(2,arguments)},e.set=function(s,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new e(s,o)},e.killTweensOf=function(s,o,a){return mr.killTweensOf(s,o,a)},e}(xg);po(Fr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ei("staggerTo,staggerFrom,staggerFromTo",function(t){Fr[t]=function(){var e=new si,n=p2.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var fC=function(e,n,r){return e[n]=r},oz=function(e,n,r){return e[n](r)},Xie=function(e,n,r,s){return e[n](s.fp,r)},Qie=function(e,n,r){return e.setAttribute(n,r)},hC=function(e,n){return Tr(e[n])?oz:nC(e[n])&&e.setAttribute?Qie:fC},az=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},Zie=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},lz=function(e,n){var r=n._pt,s="";if(!e&&n.b)s=n.b;else if(e===1&&n.e)s=n.e;else{for(;r;)s=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+s,r=r._next;s+=n.c}n.set(n.t,n.p,s,n)},pC=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},eoe=function(e,n,r,s){for(var o=this._pt,a;o;)a=o._next,o.p===s&&o.modifier(e,n,r),o=a},toe=function(e){for(var n=this._pt,r,s;n;)s=n._next,n.p===e&&!n.op||n.op===e?mv(this,n,"_pt"):n.dep||(r=1),n=s;return!r},noe=function(e,n,r,s){s.mSet(e,n,s.m.call(s.tween,r,s.mt),s)},cz=function(e){for(var n=e._pt,r,s,o,a;n;){for(r=n._next,s=o;s&&s.pr>n.pr;)s=s._next;(n._prev=s?s._prev:a)?n._prev._next=n:o=n,(n._next=s)?s._prev=n:a=n,n=r}e._pt=o},_i=function(){function t(n,r,s,o,a,l,c,u,f){this.t=r,this.s=o,this.c=a,this.p=s,this.r=l||az,this.d=c||this,this.set=u||fC,this.pr=f||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(r,s,o){this.mSet=this.mSet||this.set,this.set=noe,this.m=r,this.mt=o,this.tween=s},t}();Ei(aC+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return oC[t]=1});ho.TweenMax=ho.TweenLite=Fr;ho.TimelineLite=ho.TimelineMax=si;mr=new si({sortChildren:!1,defaults:Nh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});co.stringFilter=QF;var fd=[],j0={},roe=[],w5=0,soe=0,kk=function(e){return(j0[e]||roe).map(function(n){return n()})},x2=function(){var e=Date.now(),n=[];e-w5>2&&(kk("matchMediaInit"),fd.forEach(function(r){var s=r.queries,o=r.conditions,a,l,c,u;for(l in s)a=Ga.matchMedia(s[l]).matches,a&&(c=1),a!==o[l]&&(o[l]=a,u=1);u&&(r.revert(),c&&n.push(r))}),kk("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(s){return r.add(null,s)})}),w5=e,kk("matchMedia"))},uz=function(){function t(n,r){this.selector=r&&m2(r),this.data=[],this._r=[],this.isReverted=!1,this.id=soe++,n&&this.add(n)}var e=t.prototype;return e.add=function(r,s,o){Tr(r)&&(o=s,s=r,r=Tr);var a=this,l=function(){var u=sr,f=a.selector,p;return u&&u!==a&&u.data.push(a),o&&(a.selector=m2(o)),sr=a,p=s.apply(a,arguments),Tr(p)&&a._r.push(p),sr=u,a.selector=f,a.isReverted=!1,p};return a.last=l,r===Tr?l(a,function(c){return a.add(null,c)}):r?a[r]=l:l},e.ignore=function(r){var s=sr;sr=null,r(this),sr=s},e.getTweens=function(){var r=[];return this.data.forEach(function(s){return s instanceof t?r.push.apply(r,s.getTweens()):s instanceof Fr&&!(s.parent&&s.parent.data==="nested")&&r.push(s)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,s){var o=this;if(r?function(){for(var l=o.getTweens(),c=o.data.length,u;c--;)u=o.data[c],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(f){return l.splice(l.indexOf(f),1)}));for(l.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,p){return p.g-f.g||-1/0}).forEach(function(f){return f.t.revert(r)}),c=o.data.length;c--;)u=o.data[c],u instanceof si?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof Fr)&&u.revert&&u.revert(r);o._r.forEach(function(f){return f(r,o)}),o.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),s)for(var a=fd.length;a--;)fd[a].id===this.id&&fd.splice(a,1)},e.revert=function(r){this.kill(r||{})},t}(),ioe=function(){function t(n){this.contexts=[],this.scope=n,sr&&sr.data.push(this)}var e=t.prototype;return e.add=function(r,s,o){hl(r)||(r={matches:r});var a=new uz(0,o||this.scope),l=a.conditions={},c,u,f;sr&&!a.selector&&(a.selector=sr.selector),this.contexts.push(a),s=a.add("onMatch",s),a.queries=r;for(u in r)u==="all"?f=1:(c=Ga.matchMedia(r[u]),c&&(fd.indexOf(a)<0&&fd.push(a),(l[u]=c.matches)&&(f=1),c.addListener?c.addListener(x2):c.addEventListener("change",x2)));return f&&s(a,function(p){return a.add(null,p)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(s){return s.kill(r,!0)})},t}(),ub={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(s){return YF(s)})},timeline:function(e){return new si(e)},getTweensOf:function(e,n){return mr.getTweensOf(e,n)},getProperty:function(e,n,r,s){ls(e)&&(e=Fo(e)[0]);var o=cd(e||{}).get,a=r?OF:DF;return r==="native"&&(r=""),e&&(n?a((Ki[n]&&Ki[n].get||o)(e,n,r,s)):function(l,c,u){return a((Ki[l]&&Ki[l].get||o)(e,l,c,u))})},quickSetter:function(e,n,r){if(e=Fo(e),e.length>1){var s=e.map(function(f){return Ri.quickSetter(f,n,r)}),o=s.length;return function(f){for(var p=o;p--;)s[p](f)}}e=e[0]||{};var a=Ki[n],l=cd(e),c=l.harness&&(l.harness.aliases||{})[n]||n,u=a?function(f){var p=new a;Jf._pt=0,p.init(e,r?f+r:f,Jf,0,[e]),p.render(1,p),Jf._pt&&pC(1,Jf)}:l.set(e,c);return a?u:function(f){return u(e,c,r?f+r:f,l,1)}},quickTo:function(e,n,r){var s,o=Ri.to(e,po((s={},s[n]="+=0.1",s.paused=!0,s.stagger=0,s),r||{})),a=function(c,u,f){return o.resetTo(n,c,u,f)};return a.tween=o,a},isTweening:function(e){return mr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=dd(e.ease,Nh.ease)),g5(Nh,e||{})},config:function(e){return g5(co,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,s=e.plugins,o=e.defaults,a=e.extendTimeline;(s||"").split(",").forEach(function(l){return l&&!Ki[l]&&!ho[l]&&pg(n+" effect requires "+l+" plugin.")}),xk[n]=function(l,c,u){return r(Fo(l),po(c||{},o),u)},a&&(si.prototype[n]=function(l,c,u){return this.add(xk[n](l,hl(c)?c:(u=c)&&{},this),u)})},registerEase:function(e,n){jn[e]=dd(n)},parseEase:function(e,n){return arguments.length?dd(e,n):jn},getById:function(e){return mr.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new si(e),s,o;for(r.smoothChildTiming=Si(e.smoothChildTiming),mr.remove(r),r._dp=0,r._time=r._tTime=mr._time,s=mr._first;s;)o=s._next,(n||!(!s._dur&&s instanceof Fr&&s.vars.onComplete===s._targets[0]))&&el(r,s,s._start-s._delay),s=o;return el(mr,r,0),r},context:function(e,n){return e?new uz(e,n):sr},matchMedia:function(e){return new ioe(e)},matchMediaRefresh:function(){return fd.forEach(function(e){var n=e.conditions,r,s;for(s in n)n[s]&&(n[s]=!1,r=1);r&&e.revert()})||x2()},addEventListener:function(e,n){var r=j0[e]||(j0[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=j0[e],s=r&&r.indexOf(n);s>=0&&r.splice(s,1)},utils:{wrap:Lie,wrapYoyo:Fie,distribute:VF,random:WF,snap:qF,normalize:Oie,getUnit:Os,clamp:Rie,splitColor:JF,toArray:Fo,selector:m2,mapRange:GF,pipe:Mie,unitize:Die,interpolate:zie,shuffle:UF},install:AF,effects:xk,ticker:Xi,updateRoot:si.updateRoot,plugins:Ki,globalTimeline:mr,core:{PropTween:_i,globals:PF,Tween:Fr,Timeline:si,Animation:xg,getCache:cd,_removeLinkedListItem:mv,reverting:function(){return vs},context:function(e){return e&&sr&&(sr.data.push(e),e._ctx=sr),sr},suppressOverwrites:function(e){return tC=e}}};Ei("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return ub[t]=Fr[t]});Xi.add(si.updateRoot);Jf=ub.to({},{duration:0});var ooe=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},aoe=function(e,n){var r=e._targets,s,o,a;for(s in n)for(o=r.length;o--;)a=e._ptLookup[o][s],a&&(a=a.d)&&(a._pt&&(a=ooe(a,s)),a&&a.modifier&&a.modifier(n[s],e,r[o],s))},Tk=function(e,n){return{name:e,headless:1,rawVars:1,init:function(s,o,a){a._onInit=function(l){var c,u;if(ls(o)&&(c={},Ei(o,function(f){return c[f]=1}),o=c),n){c={};for(u in o)c[u]=n(o[u]);o=c}aoe(l,o)}}}},Ri=ub.registerPlugin({name:"attr",init:function(e,n,r,s,o){var a,l,c;this.tween=r;for(a in n)c=e.getAttribute(a)||"",l=this.add(e,"setAttribute",(c||0)+"",n[a],s,o,0,0,a),l.op=a,l.b=c,this._props.push(a)},render:function(e,n){for(var r=n._pt;r;)vs?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},Tk("roundProps",g2),Tk("modifiers"),Tk("snap",qF))||ub;Fr.version=si.version=Ri.version="3.13.0";_F=1;rC()&&Eh();jn.Power0;jn.Power1;jn.Power2;jn.Power3;jn.Power4;jn.Linear;jn.Quad;jn.Cubic;jn.Quart;jn.Quint;jn.Strong;jn.Elastic;jn.Back;jn.SteppedEase;jn.Bounce;jn.Sine;jn.Expo;jn.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var k5,Uc,lh,mC,rd,T5,gC,loe=function(){return typeof window<"u"},nc={},Vu=180/Math.PI,ch=Math.PI/180,wf=Math.atan2,N5=1e8,yC=/([A-Z])/g,coe=/(left|right|width|margin|padding|x)/i,uoe=/[\s,\(]\S/,sl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},b2=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},doe=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},foe=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},hoe=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},dz=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},fz=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},poe=function(e,n,r){return e.style[n]=r},moe=function(e,n,r){return e.style.setProperty(n,r)},goe=function(e,n,r){return e._gsap[n]=r},yoe=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},xoe=function(e,n,r,s,o){var a=e._gsap;a.scaleX=a.scaleY=r,a.renderTransform(o,a)},boe=function(e,n,r,s,o){var a=e._gsap;a[n]=r,a.renderTransform(o,a)},gr="transform",Ai=gr+"Origin",voe=function t(e,n){var r=this,s=this.target,o=s.style,a=s._gsap;if(e in nc&&o){if(this.tfm=this.tfm||{},e!=="transform")e=sl[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return r.tfm[l]=Dl(s,l)}):this.tfm[e]=a.x?a[e]:Dl(s,e),e===Ai&&(this.tfm.zOrigin=a.zOrigin);else return sl.transform.split(",").forEach(function(l){return t.call(r,l,n)});if(this.props.indexOf(gr)>=0)return;a.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(Ai,n,"")),e=gr}(o||n)&&this.props.push(e,n,o[e])},hz=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},woe=function(){var e=this.props,n=this.target,r=n.style,s=n._gsap,o,a;for(o=0;o<e.length;o+=3)e[o+1]?e[o+1]===2?n[e[o]](e[o+2]):n[e[o]]=e[o+2]:e[o+2]?r[e[o]]=e[o+2]:r.removeProperty(e[o].substr(0,2)==="--"?e[o]:e[o].replace(yC,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)s[a]=this.tfm[a];s.svg&&(s.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),o=gC(),(!o||!o.isStart)&&!r[gr]&&(hz(r),s.zOrigin&&r[Ai]&&(r[Ai]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},pz=function(e,n){var r={target:e,props:[],revert:woe,save:voe};return e._gsap||Ri.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(s){return r.save(s)}),r},mz,v2=function(e,n){var r=Uc.createElementNS?Uc.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Uc.createElement(e);return r&&r.style?r:Uc.createElement(e)},zo=function t(e,n,r){var s=getComputedStyle(e);return s[n]||s.getPropertyValue(n.replace(yC,"-$1").toLowerCase())||s.getPropertyValue(n)||!r&&t(e,_h(n)||n,1)||""},j5="O,Moz,ms,Ms,Webkit".split(","),_h=function(e,n,r){var s=n||rd,o=s.style,a=5;if(e in o&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(j5[a]+e in o););return a<0?null:(a===3?"ms":a>=0?j5[a]:"")+e},w2=function(){loe()&&window.document&&(k5=window,Uc=k5.document,lh=Uc.documentElement,rd=v2("div")||{style:{}},v2("div"),gr=_h(gr),Ai=gr+"Origin",rd.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",mz=!!_h("perspective"),gC=Ri.core.reverting,mC=1)},C5=function(e){var n=e.ownerSVGElement,r=v2("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),o;s.style.display="block",r.appendChild(s),lh.appendChild(r);try{o=s.getBBox()}catch{}return r.removeChild(s),lh.removeChild(r),o},S5=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},gz=function(e){var n,r;try{n=e.getBBox()}catch{n=C5(e),r=1}return n&&(n.width||n.height)||r||(n=C5(e)),n&&!n.width&&!n.x&&!n.y?{x:+S5(e,["x","cx","x1"])||0,y:+S5(e,["y","cy","y1"])||0,width:0,height:0}:n},yz=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&gz(e))},Pd=function(e,n){if(n){var r=e.style,s;n in nc&&n!==Ai&&(n=gr),r.removeProperty?(s=n.substr(0,2),(s==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(s==="--"?n:n.replace(yC,"-$1").toLowerCase())):r.removeAttribute(n)}},Vc=function(e,n,r,s,o,a){var l=new _i(e._pt,n,r,0,1,a?fz:dz);return e._pt=l,l.b=s,l.e=o,e._props.push(r),l},E5={deg:1,rad:1,turn:1},koe={grid:1,flex:1},tu=function t(e,n,r,s){var o=parseFloat(r)||0,a=(r+"").trim().substr((o+"").length)||"px",l=rd.style,c=coe.test(n),u=e.tagName.toLowerCase()==="svg",f=(u?"client":"offset")+(c?"Width":"Height"),p=100,m=s==="px",g=s==="%",w,y,T,j;if(s===a||!o||E5[s]||E5[a])return o;if(a!=="px"&&!m&&(o=t(e,n,r,"px")),j=e.getCTM&&yz(e),(g||a==="%")&&(nc[n]||~n.indexOf("adius")))return w=j?e.getBBox()[c?"width":"height"]:e[f],_r(g?o/w*p:o/100*w);if(l[c?"width":"height"]=p+(m?a:s),y=s!=="rem"&&~n.indexOf("adius")||s==="em"&&e.appendChild&&!u?e:e.parentNode,j&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===Uc||!y.appendChild)&&(y=Uc.body),T=y._gsap,T&&g&&T.width&&c&&T.time===Xi.time&&!T.uncache)return _r(o/T.width*p);if(g&&(n==="height"||n==="width")){var _=e.style[n];e.style[n]=p+s,w=e[f],_?e.style[n]=_:Pd(e,n)}else(g||a==="%")&&!koe[zo(y,"display")]&&(l.position=zo(e,"position")),y===e&&(l.position="static"),y.appendChild(rd),w=rd[f],y.removeChild(rd),l.position="absolute";return c&&g&&(T=cd(y),T.time=Xi.time,T.width=y[f]),_r(m?w*o/p:w&&o?p/w*o:0)},Dl=function(e,n,r,s){var o;return mC||w2(),n in sl&&n!=="transform"&&(n=sl[n],~n.indexOf(",")&&(n=n.split(",")[0])),nc[n]&&n!=="transform"?(o=vg(e,s),o=n!=="transformOrigin"?o[n]:o.svg?o.origin:fb(zo(e,Ai))+" "+o.zOrigin+"px"):(o=e.style[n],(!o||o==="auto"||s||~(o+"").indexOf("calc("))&&(o=db[n]&&db[n](e,n,r)||zo(e,n)||IF(e,n)||(n==="opacity"?1:0))),r&&!~(o+"").trim().indexOf(" ")?tu(e,n,o,r)+r:o},Toe=function(e,n,r,s){if(!r||r==="none"){var o=_h(n,e,1),a=o&&zo(e,o,1);a&&a!==r?(n=o,r=a):n==="borderColor"&&(r=zo(e,"borderTopColor"))}var l=new _i(this._pt,e.style,n,0,1,lz),c=0,u=0,f,p,m,g,w,y,T,j,_,v,P,D;if(l.b=r,l.e=s,r+="",s+="",s.substring(0,6)==="var(--"&&(s=zo(e,s.substring(4,s.indexOf(")")))),s==="auto"&&(y=e.style[n],e.style[n]=s,s=zo(e,n)||s,y?e.style[n]=y:Pd(e,n)),f=[r,s],QF(f),r=f[0],s=f[1],m=r.match(Yf)||[],D=s.match(Yf)||[],D.length){for(;p=Yf.exec(s);)T=p[0],_=s.substring(c,p.index),w?w=(w+1)%5:(_.substr(-5)==="rgba("||_.substr(-5)==="hsla(")&&(w=1),T!==(y=m[u++]||"")&&(g=parseFloat(y)||0,P=y.substr((g+"").length),T.charAt(1)==="="&&(T=ah(g,T)+P),j=parseFloat(T),v=T.substr((j+"").length),c=Yf.lastIndex-v.length,v||(v=v||co.units[n]||P,c===s.length&&(s+=v,l.e+=v)),P!==v&&(g=tu(e,n,y,v)||0),l._pt={_next:l._pt,p:_||u===1?_:",",s:g,c:j-g,m:w&&w<4||n==="zIndex"?Math.round:0});l.c=c<s.length?s.substring(c,s.length):""}else l.r=n==="display"&&s==="none"?fz:dz;return SF.test(s)&&(l.e=0),this._pt=l,l},_5={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Noe=function(e){var n=e.split(" "),r=n[0],s=n[1]||"50%";return(r==="top"||r==="bottom"||s==="left"||s==="right")&&(e=r,r=s,s=e),n[0]=_5[r]||r,n[1]=_5[s]||s,n.join(" ")},joe=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,s=r.style,o=n.u,a=r._gsap,l,c,u;if(o==="all"||o===!0)s.cssText="",c=1;else for(o=o.split(","),u=o.length;--u>-1;)l=o[u],nc[l]&&(c=1,l=l==="transformOrigin"?Ai:gr),Pd(r,l);c&&(Pd(r,gr),a&&(a.svg&&r.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",vg(r,1),a.uncache=1,hz(s)))}},db={clearProps:function(e,n,r,s,o){if(o.data!=="isFromStart"){var a=e._pt=new _i(e._pt,n,r,0,0,joe);return a.u=s,a.pr=-10,a.tween=o,e._props.push(r),1}}},bg=[1,0,0,1,0,0],xz={},bz=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},A5=function(e){var n=zo(e,gr);return bz(n)?bg:n.substr(7).match(CF).map(_r)},xC=function(e,n){var r=e._gsap||cd(e),s=e.style,o=A5(e),a,l,c,u;return r.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,o=[c.a,c.b,c.c,c.d,c.e,c.f],o.join(",")==="1,0,0,1,0,0"?bg:o):(o===bg&&!e.offsetParent&&e!==lh&&!r.svg&&(c=s.display,s.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(u=1,l=e.nextElementSibling,lh.appendChild(e)),o=A5(e),c?s.display=c:Pd(e,"display"),u&&(l?a.insertBefore(e,l):a?a.appendChild(e):lh.removeChild(e))),n&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},k2=function(e,n,r,s,o,a){var l=e._gsap,c=o||xC(e,!0),u=l.xOrigin||0,f=l.yOrigin||0,p=l.xOffset||0,m=l.yOffset||0,g=c[0],w=c[1],y=c[2],T=c[3],j=c[4],_=c[5],v=n.split(" "),P=parseFloat(v[0])||0,D=parseFloat(v[1])||0,$,U,K,Y;r?c!==bg&&(U=g*T-w*y)&&(K=P*(T/U)+D*(-y/U)+(y*_-T*j)/U,Y=P*(-w/U)+D*(g/U)-(g*_-w*j)/U,P=K,D=Y):($=gz(e),P=$.x+(~v[0].indexOf("%")?P/100*$.width:P),D=$.y+(~(v[1]||v[0]).indexOf("%")?D/100*$.height:D)),s||s!==!1&&l.smooth?(j=P-u,_=D-f,l.xOffset=p+(j*g+_*y)-j,l.yOffset=m+(j*w+_*T)-_):l.xOffset=l.yOffset=0,l.xOrigin=P,l.yOrigin=D,l.smooth=!!s,l.origin=n,l.originIsAbsolute=!!r,e.style[Ai]="0px 0px",a&&(Vc(a,l,"xOrigin",u,P),Vc(a,l,"yOrigin",f,D),Vc(a,l,"xOffset",p,l.xOffset),Vc(a,l,"yOffset",m,l.yOffset)),e.setAttribute("data-svg-origin",P+" "+D)},vg=function(e,n){var r=e._gsap||new nz(e);if("x"in r&&!n&&!r.uncache)return r;var s=e.style,o=r.scaleX<0,a="px",l="deg",c=getComputedStyle(e),u=zo(e,Ai)||"0",f,p,m,g,w,y,T,j,_,v,P,D,$,U,K,Y,G,X,V,A,x,C,L,z,R,I,N,F,E,M,ee,O;return f=p=m=y=T=j=_=v=P=0,g=w=1,r.svg=!!(e.getCTM&&yz(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(s[gr]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[gr]!=="none"?c[gr]:"")),s.scale=s.rotate=s.translate="none"),U=xC(e,r.svg),r.svg&&(r.uncache?(R=e.getBBox(),u=r.xOrigin-R.x+"px "+(r.yOrigin-R.y)+"px",z=""):z=!n&&e.getAttribute("data-svg-origin"),k2(e,z||u,!!z||r.originIsAbsolute,r.smooth!==!1,U)),D=r.xOrigin||0,$=r.yOrigin||0,U!==bg&&(X=U[0],V=U[1],A=U[2],x=U[3],f=C=U[4],p=L=U[5],U.length===6?(g=Math.sqrt(X*X+V*V),w=Math.sqrt(x*x+A*A),y=X||V?wf(V,X)*Vu:0,_=A||x?wf(A,x)*Vu+y:0,_&&(w*=Math.abs(Math.cos(_*ch))),r.svg&&(f-=D-(D*X+$*A),p-=$-(D*V+$*x))):(O=U[6],M=U[7],N=U[8],F=U[9],E=U[10],ee=U[11],f=U[12],p=U[13],m=U[14],K=wf(O,E),T=K*Vu,K&&(Y=Math.cos(-K),G=Math.sin(-K),z=C*Y+N*G,R=L*Y+F*G,I=O*Y+E*G,N=C*-G+N*Y,F=L*-G+F*Y,E=O*-G+E*Y,ee=M*-G+ee*Y,C=z,L=R,O=I),K=wf(-A,E),j=K*Vu,K&&(Y=Math.cos(-K),G=Math.sin(-K),z=X*Y-N*G,R=V*Y-F*G,I=A*Y-E*G,ee=x*G+ee*Y,X=z,V=R,A=I),K=wf(V,X),y=K*Vu,K&&(Y=Math.cos(K),G=Math.sin(K),z=X*Y+V*G,R=C*Y+L*G,V=V*Y-X*G,L=L*Y-C*G,X=z,C=R),T&&Math.abs(T)+Math.abs(y)>359.9&&(T=y=0,j=180-j),g=_r(Math.sqrt(X*X+V*V+A*A)),w=_r(Math.sqrt(L*L+O*O)),K=wf(C,L),_=Math.abs(K)>2e-4?K*Vu:0,P=ee?1/(ee<0?-ee:ee):0),r.svg&&(z=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!bz(zo(e,gr)),z&&e.setAttribute("transform",z))),Math.abs(_)>90&&Math.abs(_)<270&&(o?(g*=-1,_+=y<=0?180:-180,y+=y<=0?180:-180):(w*=-1,_+=_<=0?180:-180)),n=n||r.uncache,r.x=f-((r.xPercent=f&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-f)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+a,r.y=p-((r.yPercent=p&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-p)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+a,r.z=m+a,r.scaleX=_r(g),r.scaleY=_r(w),r.rotation=_r(y)+l,r.rotationX=_r(T)+l,r.rotationY=_r(j)+l,r.skewX=_+l,r.skewY=v+l,r.transformPerspective=P+a,(r.zOrigin=parseFloat(u.split(" ")[2])||!n&&r.zOrigin||0)&&(s[Ai]=fb(u)),r.xOffset=r.yOffset=0,r.force3D=co.force3D,r.renderTransform=r.svg?Soe:mz?vz:Coe,r.uncache=0,r},fb=function(e){return(e=e.split(" "))[0]+" "+e[1]},Nk=function(e,n,r){var s=Os(n);return _r(parseFloat(n)+parseFloat(tu(e,"x",r+"px",s)))+s},Coe=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,vz(e,n)},Du="0deg",$p="0px",Ou=") ",vz=function(e,n){var r=n||this,s=r.xPercent,o=r.yPercent,a=r.x,l=r.y,c=r.z,u=r.rotation,f=r.rotationY,p=r.rotationX,m=r.skewX,g=r.skewY,w=r.scaleX,y=r.scaleY,T=r.transformPerspective,j=r.force3D,_=r.target,v=r.zOrigin,P="",D=j==="auto"&&e&&e!==1||j===!0;if(v&&(p!==Du||f!==Du)){var $=parseFloat(f)*ch,U=Math.sin($),K=Math.cos($),Y;$=parseFloat(p)*ch,Y=Math.cos($),a=Nk(_,a,U*Y*-v),l=Nk(_,l,-Math.sin($)*-v),c=Nk(_,c,K*Y*-v+v)}T!==$p&&(P+="perspective("+T+Ou),(s||o)&&(P+="translate("+s+"%, "+o+"%) "),(D||a!==$p||l!==$p||c!==$p)&&(P+=c!==$p||D?"translate3d("+a+", "+l+", "+c+") ":"translate("+a+", "+l+Ou),u!==Du&&(P+="rotate("+u+Ou),f!==Du&&(P+="rotateY("+f+Ou),p!==Du&&(P+="rotateX("+p+Ou),(m!==Du||g!==Du)&&(P+="skew("+m+", "+g+Ou),(w!==1||y!==1)&&(P+="scale("+w+", "+y+Ou),_.style[gr]=P||"translate(0, 0)"},Soe=function(e,n){var r=n||this,s=r.xPercent,o=r.yPercent,a=r.x,l=r.y,c=r.rotation,u=r.skewX,f=r.skewY,p=r.scaleX,m=r.scaleY,g=r.target,w=r.xOrigin,y=r.yOrigin,T=r.xOffset,j=r.yOffset,_=r.forceCSS,v=parseFloat(a),P=parseFloat(l),D,$,U,K,Y;c=parseFloat(c),u=parseFloat(u),f=parseFloat(f),f&&(f=parseFloat(f),u+=f,c+=f),c||u?(c*=ch,u*=ch,D=Math.cos(c)*p,$=Math.sin(c)*p,U=Math.sin(c-u)*-m,K=Math.cos(c-u)*m,u&&(f*=ch,Y=Math.tan(u-f),Y=Math.sqrt(1+Y*Y),U*=Y,K*=Y,f&&(Y=Math.tan(f),Y=Math.sqrt(1+Y*Y),D*=Y,$*=Y)),D=_r(D),$=_r($),U=_r(U),K=_r(K)):(D=p,K=m,$=U=0),(v&&!~(a+"").indexOf("px")||P&&!~(l+"").indexOf("px"))&&(v=tu(g,"x",a,"px"),P=tu(g,"y",l,"px")),(w||y||T||j)&&(v=_r(v+w-(w*D+y*U)+T),P=_r(P+y-(w*$+y*K)+j)),(s||o)&&(Y=g.getBBox(),v=_r(v+s/100*Y.width),P=_r(P+o/100*Y.height)),Y="matrix("+D+","+$+","+U+","+K+","+v+","+P+")",g.setAttribute("transform",Y),_&&(g.style[gr]=Y)},Eoe=function(e,n,r,s,o){var a=360,l=ls(o),c=parseFloat(o)*(l&&~o.indexOf("rad")?Vu:1),u=c-s,f=s+u+"deg",p,m;return l&&(p=o.split("_")[1],p==="short"&&(u%=a,u!==u%(a/2)&&(u+=u<0?a:-a)),p==="cw"&&u<0?u=(u+a*N5)%a-~~(u/a)*a:p==="ccw"&&u>0&&(u=(u-a*N5)%a-~~(u/a)*a)),e._pt=m=new _i(e._pt,n,r,s,u,doe),m.e=f,m.u="deg",e._props.push(r),m},P5=function(e,n){for(var r in n)e[r]=n[r];return e},_oe=function(e,n,r){var s=P5({},r._gsap),o="perspective,force3D,transformOrigin,svgOrigin",a=r.style,l,c,u,f,p,m,g,w;s.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),a[gr]=n,l=vg(r,1),Pd(r,gr),r.setAttribute("transform",u)):(u=getComputedStyle(r)[gr],a[gr]=n,l=vg(r,1),a[gr]=u);for(c in nc)u=s[c],f=l[c],u!==f&&o.indexOf(c)<0&&(g=Os(u),w=Os(f),p=g!==w?tu(r,c,u,w):parseFloat(u),m=parseFloat(f),e._pt=new _i(e._pt,l,c,p,m-p,b2),e._pt.u=w||0,e._props.push(c));P5(l,s)};Ei("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",s="Bottom",o="Left",a=(e<3?[n,r,s,o]:[n+o,n+r,s+r,s+o]).map(function(l){return e<2?t+l:"border"+l+t});db[e>1?"border"+t:t]=function(l,c,u,f,p){var m,g;if(arguments.length<4)return m=a.map(function(w){return Dl(l,w,u)}),g=m.join(" "),g.split(m[0]).length===5?m[0]:g;m=(f+"").split(" "),g={},a.forEach(function(w,y){return g[w]=m[y]=m[y]||m[(y-1)/2|0]}),l.init(c,g,p)}});var wz={name:"css",register:w2,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,s,o){var a=this._props,l=e.style,c=r.vars.startAt,u,f,p,m,g,w,y,T,j,_,v,P,D,$,U,K;mC||w2(),this.styles=this.styles||pz(e),K=this.styles.props,this.tween=r;for(y in n)if(y!=="autoRound"&&(f=n[y],!(Ki[y]&&rz(y,n,r,s,e,o)))){if(g=typeof f,w=db[y],g==="function"&&(f=f.call(r,s,e,o),g=typeof f),g==="string"&&~f.indexOf("random(")&&(f=gg(f)),w)w(this,e,y,f,r)&&(U=1);else if(y.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(y)+"").trim(),f+="",Kc.lastIndex=0,Kc.test(u)||(T=Os(u),j=Os(f)),j?T!==j&&(u=tu(e,y,u,j)+j):T&&(f+=T),this.add(l,"setProperty",u,f,s,o,0,0,y),a.push(y),K.push(y,0,l[y]);else if(g!=="undefined"){if(c&&y in c?(u=typeof c[y]=="function"?c[y].call(r,s,e,o):c[y],ls(u)&&~u.indexOf("random(")&&(u=gg(u)),Os(u+"")||u==="auto"||(u+=co.units[y]||Os(Dl(e,y))||""),(u+"").charAt(1)==="="&&(u=Dl(e,y))):u=Dl(e,y),m=parseFloat(u),_=g==="string"&&f.charAt(1)==="="&&f.substr(0,2),_&&(f=f.substr(2)),p=parseFloat(f),y in sl&&(y==="autoAlpha"&&(m===1&&Dl(e,"visibility")==="hidden"&&p&&(m=0),K.push("visibility",0,l.visibility),Vc(this,l,"visibility",m?"inherit":"hidden",p?"inherit":"hidden",!p)),y!=="scale"&&y!=="transform"&&(y=sl[y],~y.indexOf(",")&&(y=y.split(",")[0]))),v=y in nc,v){if(this.styles.save(y),g==="string"&&f.substring(0,6)==="var(--"&&(f=zo(e,f.substring(4,f.indexOf(")"))),p=parseFloat(f)),P||(D=e._gsap,D.renderTransform&&!n.parseTransform||vg(e,n.parseTransform),$=n.smoothOrigin!==!1&&D.smooth,P=this._pt=new _i(this._pt,l,gr,0,1,D.renderTransform,D,0,-1),P.dep=1),y==="scale")this._pt=new _i(this._pt,D,"scaleY",D.scaleY,(_?ah(D.scaleY,_+p):p)-D.scaleY||0,b2),this._pt.u=0,a.push("scaleY",y),y+="X";else if(y==="transformOrigin"){K.push(Ai,0,l[Ai]),f=Noe(f),D.svg?k2(e,f,0,$,0,this):(j=parseFloat(f.split(" ")[2])||0,j!==D.zOrigin&&Vc(this,D,"zOrigin",D.zOrigin,j),Vc(this,l,y,fb(u),fb(f)));continue}else if(y==="svgOrigin"){k2(e,f,1,$,0,this);continue}else if(y in xz){Eoe(this,D,y,m,_?ah(m,_+f):f);continue}else if(y==="smoothOrigin"){Vc(this,D,"smooth",D.smooth,f);continue}else if(y==="force3D"){D[y]=f;continue}else if(y==="transform"){_oe(this,f,e);continue}}else y in l||(y=_h(y)||y);if(v||(p||p===0)&&(m||m===0)&&!uoe.test(f)&&y in l)T=(u+"").substr((m+"").length),p||(p=0),j=Os(f)||(y in co.units?co.units[y]:T),T!==j&&(m=tu(e,y,u,j)),this._pt=new _i(this._pt,v?D:l,y,m,(_?ah(m,_+p):p)-m,!v&&(j==="px"||y==="zIndex")&&n.autoRound!==!1?hoe:b2),this._pt.u=j||0,T!==j&&j!=="%"&&(this._pt.b=u,this._pt.r=foe);else if(y in l)Toe.call(this,e,y,u,_?_+f:f);else if(y in e)this.add(e,y,u||e[y],_?_+f:f,s,o);else if(y!=="parseTransform"){iC(y,f);continue}v||(y in l?K.push(y,0,l[y]):typeof e[y]=="function"?K.push(y,2,e[y]()):K.push(y,1,u||e[y])),a.push(y)}}U&&cz(this)},render:function(e,n){if(n.tween._time||!gC())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:Dl,aliases:sl,getSetter:function(e,n,r){var s=sl[n];return s&&s.indexOf(",")<0&&(n=s),n in nc&&n!==Ai&&(e._gsap.x||Dl(e,"x"))?r&&T5===r?n==="scale"?yoe:goe:(T5=r||{})&&(n==="scale"?xoe:boe):e.style&&!nC(e.style[n])?poe:~n.indexOf("-")?moe:hC(e,n)},core:{_removeProperty:Pd,_getMatrix:xC}};Ri.utils.checkPrefix=_h;Ri.core.getStyleSaver=pz;(function(t,e,n,r){var s=Ei(t+","+e+","+n,function(o){nc[o]=1});Ei(e,function(o){co.units[o]="deg",xz[o]=1}),sl[s[13]]=t+","+e,Ei(r,function(o){var a=o.split(":");sl[a[1]]=s[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ei("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){co.units[t]="px"});Ri.registerPlugin(wz);var Ol=Ri.registerPlugin(wz)||Ri;Ol.core.Tween;function Aoe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Poe(t,e,n){return e&&Aoe(t.prototype,e),t}/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var bs,C0,Qi,qc,Wc,uh,kz,qu,jm,Tz,Vl,pa,Nz,jz=function(){return bs||typeof window<"u"&&(bs=window.gsap)&&bs.registerPlugin&&bs},Cz=1,Xf=[],mn=[],cl=[],Cm=Date.now,T2=function(e,n){return n},Roe=function(){var e=jm.core,n=e.bridge||{},r=e._scrollers,s=e._proxies;r.push.apply(r,mn),s.push.apply(s,cl),mn=r,cl=s,T2=function(a,l){return n[a](l)}},Yc=function(e,n){return~cl.indexOf(e)&&cl[cl.indexOf(e)+1][n]},Sm=function(e){return!!~Tz.indexOf(e)},Xs=function(e,n,r,s,o){return e.addEventListener(n,r,{passive:s!==!1,capture:!!o})},Ys=function(e,n,r,s){return e.removeEventListener(n,r,!!s)},Px="scrollLeft",Rx="scrollTop",N2=function(){return Vl&&Vl.isPressed||mn.cache++},hb=function(e,n){var r=function s(o){if(o||o===0){Cz&&(Qi.history.scrollRestoration="manual");var a=Vl&&Vl.isPressed;o=s.v=Math.round(o)||(Vl&&Vl.iOS?1:0),e(o),s.cacheID=mn.cache,a&&T2("ss",o)}else(n||mn.cache!==s.cacheID||T2("ref"))&&(s.cacheID=mn.cache,s.v=e());return s.v+s.offset};return r.offset=0,e&&r},ii={s:Px,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:hb(function(t){return arguments.length?Qi.scrollTo(t,Kr.sc()):Qi.pageXOffset||qc[Px]||Wc[Px]||uh[Px]||0})},Kr={s:Rx,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:ii,sc:hb(function(t){return arguments.length?Qi.scrollTo(ii.sc(),t):Qi.pageYOffset||qc[Rx]||Wc[Rx]||uh[Rx]||0})},ki=function(e,n){return(n&&n._ctx&&n._ctx.selector||bs.utils.toArray)(e)[0]||(typeof e=="string"&&bs.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},Ioe=function(e,n){for(var r=n.length;r--;)if(n[r]===e||n[r].contains(e))return!0;return!1},nu=function(e,n){var r=n.s,s=n.sc;Sm(e)&&(e=qc.scrollingElement||Wc);var o=mn.indexOf(e),a=s===Kr.sc?1:2;!~o&&(o=mn.push(e)-1),mn[o+a]||Xs(e,"scroll",N2);var l=mn[o+a],c=l||(mn[o+a]=hb(Yc(e,r),!0)||(Sm(e)?s:hb(function(u){return arguments.length?e[r]=u:e[r]})));return c.target=e,l||(c.smooth=bs.getProperty(e,"scrollBehavior")==="smooth"),c},j2=function(e,n,r){var s=e,o=e,a=Cm(),l=a,c=n||50,u=Math.max(500,c*3),f=function(w,y){var T=Cm();y||T-a>c?(o=s,s=w,l=a,a=T):r?s+=w:s=o+(w-o)/(T-l)*(a-l)},p=function(){o=s=r?0:s,l=a=0},m=function(w){var y=l,T=o,j=Cm();return(w||w===0)&&w!==s&&f(w),a===l||j-l>u?0:(s+(r?T:-T))/((r?j:a)-y)*1e3};return{update:f,reset:p,getVelocity:m}},Bp=function(e,n){return n&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},R5=function(e){var n=Math.max.apply(Math,e),r=Math.min.apply(Math,e);return Math.abs(n)>=Math.abs(r)?n:r},Sz=function(){jm=bs.core.globals().ScrollTrigger,jm&&jm.core&&Roe()},Ez=function(e){return bs=e||jz(),!C0&&bs&&typeof document<"u"&&document.body&&(Qi=window,qc=document,Wc=qc.documentElement,uh=qc.body,Tz=[Qi,qc,Wc,uh],bs.utils.clamp,Nz=bs.core.context||function(){},qu="onpointerenter"in uh?"pointer":"mouse",kz=Ar.isTouch=Qi.matchMedia&&Qi.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Qi||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,pa=Ar.eventTypes=("ontouchstart"in Wc?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Wc?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Cz=0},500),Sz(),C0=1),C0};ii.op=Kr;mn.cache=0;var Ar=function(){function t(n){this.init(n)}var e=t.prototype;return e.init=function(r){C0||Ez(bs)||console.warn("Please gsap.registerPlugin(Observer)"),jm||Sz();var s=r.tolerance,o=r.dragMinimum,a=r.type,l=r.target,c=r.lineHeight,u=r.debounce,f=r.preventDefault,p=r.onStop,m=r.onStopDelay,g=r.ignore,w=r.wheelSpeed,y=r.event,T=r.onDragStart,j=r.onDragEnd,_=r.onDrag,v=r.onPress,P=r.onRelease,D=r.onRight,$=r.onLeft,U=r.onUp,K=r.onDown,Y=r.onChangeX,G=r.onChangeY,X=r.onChange,V=r.onToggleX,A=r.onToggleY,x=r.onHover,C=r.onHoverEnd,L=r.onMove,z=r.ignoreCheck,R=r.isNormalizer,I=r.onGestureStart,N=r.onGestureEnd,F=r.onWheel,E=r.onEnable,M=r.onDisable,ee=r.onClick,O=r.scrollSpeed,q=r.capture,H=r.allowClicks,J=r.lockAxis,Q=r.onLockAxis;this.target=l=ki(l)||Wc,this.vars=r,g&&(g=bs.utils.toArray(g)),s=s||1e-9,o=o||0,w=w||1,O=O||1,a=a||"wheel,touch,pointer",u=u!==!1,c||(c=parseFloat(Qi.getComputedStyle(uh).lineHeight)||22);var ne,se,ie,pe,le,me,Ee,te=this,Ne=0,Pe=0,et=r.passive||!f&&r.passive!==!1,Le=nu(l,ii),Se=nu(l,Kr),Te=Le(),ze=Se(),dt=~a.indexOf("touch")&&!~a.indexOf("pointer")&&pa[0]==="pointerdown",oe=Sm(l),ue=l.ownerDocument||qc,ge=[0,0,0],be=[0,0,0],ve=0,Ke=function(){return ve=Cm()},Me=function(rt,st){return(te.event=rt)&&g&&Ioe(rt.target,g)||st&&dt&&rt.pointerType!=="touch"||z&&z(rt,st)},He=function(){te._vx.reset(),te._vy.reset(),se.pause(),p&&p(te)},ct=function(){var rt=te.deltaX=R5(ge),st=te.deltaY=R5(be),Re=Math.abs(rt)>=s,it=Math.abs(st)>=s;X&&(Re||it)&&X(te,rt,st,ge,be),Re&&(D&&te.deltaX>0&&D(te),$&&te.deltaX<0&&$(te),Y&&Y(te),V&&te.deltaX<0!=Ne<0&&V(te),Ne=te.deltaX,ge[0]=ge[1]=ge[2]=0),it&&(K&&te.deltaY>0&&K(te),U&&te.deltaY<0&&U(te),G&&G(te),A&&te.deltaY<0!=Pe<0&&A(te),Pe=te.deltaY,be[0]=be[1]=be[2]=0),(pe||ie)&&(L&&L(te),ie&&(T&&ie===1&&T(te),_&&_(te),ie=0),pe=!1),me&&!(me=!1)&&Q&&Q(te),le&&(F(te),le=!1),ne=0},Je=function(rt,st,Re){ge[Re]+=rt,be[Re]+=st,te._vx.update(rt),te._vy.update(st),u?ne||(ne=requestAnimationFrame(ct)):ct()},Ye=function(rt,st){J&&!Ee&&(te.axis=Ee=Math.abs(rt)>Math.abs(st)?"x":"y",me=!0),Ee!=="y"&&(ge[2]+=rt,te._vx.update(rt,!0)),Ee!=="x"&&(be[2]+=st,te._vy.update(st,!0)),u?ne||(ne=requestAnimationFrame(ct)):ct()},St=function(rt){if(!Me(rt,1)){rt=Bp(rt,f);var st=rt.clientX,Re=rt.clientY,it=st-te.x,Ue=Re-te.y,tt=te.isDragging;te.x=st,te.y=Re,(tt||(it||Ue)&&(Math.abs(te.startX-st)>=o||Math.abs(te.startY-Re)>=o))&&(ie=tt?2:1,tt||(te.isDragging=!0),Ye(it,Ue))}},bt=te.onPress=function(Ge){Me(Ge,1)||Ge&&Ge.button||(te.axis=Ee=null,se.pause(),te.isPressed=!0,Ge=Bp(Ge),Ne=Pe=0,te.startX=te.x=Ge.clientX,te.startY=te.y=Ge.clientY,te._vx.reset(),te._vy.reset(),Xs(R?l:ue,pa[1],St,et,!0),te.deltaX=te.deltaY=0,v&&v(te))},Ze=te.onRelease=function(Ge){if(!Me(Ge,1)){Ys(R?l:ue,pa[1],St,!0);var rt=!isNaN(te.y-te.startY),st=te.isDragging,Re=st&&(Math.abs(te.x-te.startX)>3||Math.abs(te.y-te.startY)>3),it=Bp(Ge);!Re&&rt&&(te._vx.reset(),te._vy.reset(),f&&H&&bs.delayedCall(.08,function(){if(Cm()-ve>300&&!Ge.defaultPrevented){if(Ge.target.click)Ge.target.click();else if(ue.createEvent){var Ue=ue.createEvent("MouseEvents");Ue.initMouseEvent("click",!0,!0,Qi,1,it.screenX,it.screenY,it.clientX,it.clientY,!1,!1,!1,!1,0,null),Ge.target.dispatchEvent(Ue)}}})),te.isDragging=te.isGesturing=te.isPressed=!1,p&&st&&!R&&se.restart(!0),ie&&ct(),j&&st&&j(te),P&&P(te,Re)}},An=function(rt){return rt.touches&&rt.touches.length>1&&(te.isGesturing=!0)&&I(rt,te.isDragging)},Dt=function(){return(te.isGesturing=!1)||N(te)},Ot=function(rt){if(!Me(rt)){var st=Le(),Re=Se();Je((st-Te)*O,(Re-ze)*O,1),Te=st,ze=Re,p&&se.restart(!0)}},wn=function(rt){if(!Me(rt)){rt=Bp(rt,f),F&&(le=!0);var st=(rt.deltaMode===1?c:rt.deltaMode===2?Qi.innerHeight:1)*w;Je(rt.deltaX*st,rt.deltaY*st,0),p&&!R&&se.restart(!0)}},nn=function(rt){if(!Me(rt)){var st=rt.clientX,Re=rt.clientY,it=st-te.x,Ue=Re-te.y;te.x=st,te.y=Re,pe=!0,p&&se.restart(!0),(it||Ue)&&Ye(it,Ue)}},Xe=function(rt){te.event=rt,x(te)},Ft=function(rt){te.event=rt,C(te)},yt=function(rt){return Me(rt)||Bp(rt,f)&&ee(te)};se=te._dc=bs.delayedCall(m||.25,He).pause(),te.deltaX=te.deltaY=0,te._vx=j2(0,50,!0),te._vy=j2(0,50,!0),te.scrollX=Le,te.scrollY=Se,te.isDragging=te.isGesturing=te.isPressed=!1,Nz(this),te.enable=function(Ge){return te.isEnabled||(Xs(oe?ue:l,"scroll",N2),a.indexOf("scroll")>=0&&Xs(oe?ue:l,"scroll",Ot,et,q),a.indexOf("wheel")>=0&&Xs(l,"wheel",wn,et,q),(a.indexOf("touch")>=0&&kz||a.indexOf("pointer")>=0)&&(Xs(l,pa[0],bt,et,q),Xs(ue,pa[2],Ze),Xs(ue,pa[3],Ze),H&&Xs(l,"click",Ke,!0,!0),ee&&Xs(l,"click",yt),I&&Xs(ue,"gesturestart",An),N&&Xs(ue,"gestureend",Dt),x&&Xs(l,qu+"enter",Xe),C&&Xs(l,qu+"leave",Ft),L&&Xs(l,qu+"move",nn)),te.isEnabled=!0,te.isDragging=te.isGesturing=te.isPressed=pe=ie=!1,te._vx.reset(),te._vy.reset(),Te=Le(),ze=Se(),Ge&&Ge.type&&bt(Ge),E&&E(te)),te},te.disable=function(){te.isEnabled&&(Xf.filter(function(Ge){return Ge!==te&&Sm(Ge.target)}).length||Ys(oe?ue:l,"scroll",N2),te.isPressed&&(te._vx.reset(),te._vy.reset(),Ys(R?l:ue,pa[1],St,!0)),Ys(oe?ue:l,"scroll",Ot,q),Ys(l,"wheel",wn,q),Ys(l,pa[0],bt,q),Ys(ue,pa[2],Ze),Ys(ue,pa[3],Ze),Ys(l,"click",Ke,!0),Ys(l,"click",yt),Ys(ue,"gesturestart",An),Ys(ue,"gestureend",Dt),Ys(l,qu+"enter",Xe),Ys(l,qu+"leave",Ft),Ys(l,qu+"move",nn),te.isEnabled=te.isPressed=te.isDragging=!1,M&&M(te))},te.kill=te.revert=function(){te.disable();var Ge=Xf.indexOf(te);Ge>=0&&Xf.splice(Ge,1),Vl===te&&(Vl=0)},Xf.push(te),R&&Sm(l)&&(Vl=te),te.enable(y)},Poe(t,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),t}();Ar.version="3.13.0";Ar.create=function(t){return new Ar(t)};Ar.register=Ez;Ar.getAll=function(){return Xf.slice()};Ar.getById=function(t){return Xf.filter(function(e){return e.vars.id===t})[0]};jz()&&bs.registerPlugin(Ar);/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ht,Df,pn,Hn,Ji,Dn,bC,pb,wg,Em,rm,Ix,Es,xv,C2,ei,I5,M5,Of,_z,jk,Az,Zs,S2,Pz,Rz,Ic,E2,vC,dh,wC,mb,_2,Ck,Mx=1,_s=Date.now,Sk=_s(),qo=0,sm=0,D5=function(e,n,r){var s=Wi(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return r["_"+n+"Clamp"]=s,s?e.substr(6,e.length-7):e},O5=function(e,n){return n&&(!Wi(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},Moe=function t(){return sm&&requestAnimationFrame(t)},L5=function(){return xv=1},F5=function(){return xv=0},Ka=function(e){return e},im=function(e){return Math.round(e*1e5)/1e5||0},Iz=function(){return typeof window<"u"},Mz=function(){return ht||Iz()&&(ht=window.gsap)&&ht.registerPlugin&&ht},Rd=function(e){return!!~bC.indexOf(e)},Dz=function(e){return(e==="Height"?wC:pn["inner"+e])||Ji["client"+e]||Dn["client"+e]},Oz=function(e){return Yc(e,"getBoundingClientRect")||(Rd(e)?function(){return P0.width=pn.innerWidth,P0.height=wC,P0}:function(){return $l(e)})},Doe=function(e,n,r){var s=r.d,o=r.d2,a=r.a;return(a=Yc(e,"getBoundingClientRect"))?function(){return a()[s]}:function(){return(n?Dz(o):e["client"+o])||0}},Ooe=function(e,n){return!n||~cl.indexOf(e)?Oz(e):function(){return P0}},il=function(e,n){var r=n.s,s=n.d2,o=n.d,a=n.a;return Math.max(0,(r="scroll"+s)&&(a=Yc(e,r))?a()-Oz(e)()[o]:Rd(e)?(Ji[r]||Dn[r])-Dz(s):e[r]-e["offset"+s])},Dx=function(e,n){for(var r=0;r<Of.length;r+=3)(!n||~n.indexOf(Of[r+1]))&&e(Of[r],Of[r+1],Of[r+2])},Wi=function(e){return typeof e=="string"},Ls=function(e){return typeof e=="function"},om=function(e){return typeof e=="number"},Wu=function(e){return typeof e=="object"},Up=function(e,n,r){return e&&e.progress(n?0:1)&&r&&e.pause()},Ek=function(e,n){if(e.enabled){var r=e._ctx?e._ctx.add(function(){return n(e)}):n(e);r&&r.totalTime&&(e.callbackAnimation=r)}},kf=Math.abs,Lz="left",Fz="top",kC="right",TC="bottom",hd="width",pd="height",_m="Right",Am="Left",Pm="Top",Rm="Bottom",Mr="padding",Ro="margin",Ah="Width",NC="Height",Gr="px",Io=function(e){return pn.getComputedStyle(e)},Loe=function(e){var n=Io(e).position;e.style.position=n==="absolute"||n==="fixed"?n:"relative"},z5=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},$l=function(e,n){var r=n&&Io(e)[C2]!=="matrix(1, 0, 0, 1, 0, 0)"&&ht.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),s=e.getBoundingClientRect();return r&&r.progress(0).kill(),s},gb=function(e,n){var r=n.d2;return e["offset"+r]||e["client"+r]||0},zz=function(e){var n=[],r=e.labels,s=e.duration(),o;for(o in r)n.push(r[o]/s);return n},Foe=function(e){return function(n){return ht.utils.snap(zz(e),n)}},jC=function(e){var n=ht.utils.snap(e),r=Array.isArray(e)&&e.slice(0).sort(function(s,o){return s-o});return r?function(s,o,a){a===void 0&&(a=.001);var l;if(!o)return n(s);if(o>0){for(s-=a,l=0;l<r.length;l++)if(r[l]>=s)return r[l];return r[l-1]}else for(l=r.length,s+=a;l--;)if(r[l]<=s)return r[l];return r[0]}:function(s,o,a){a===void 0&&(a=.001);var l=n(s);return!o||Math.abs(l-s)<a||l-s<0==o<0?l:n(o<0?s-e:s+e)}},zoe=function(e){return function(n,r){return jC(zz(e))(n,r.direction)}},Ox=function(e,n,r,s){return r.split(",").forEach(function(o){return e(n,o,s)})},rs=function(e,n,r,s,o){return e.addEventListener(n,r,{passive:!s,capture:!!o})},ns=function(e,n,r,s){return e.removeEventListener(n,r,!!s)},Lx=function(e,n,r){r=r&&r.wheelHandler,r&&(e(n,"wheel",r),e(n,"touchmove",r))},$5={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Fx={toggleActions:"play",anticipatePin:0},yb={top:0,left:0,center:.5,bottom:1,right:1},S0=function(e,n){if(Wi(e)){var r=e.indexOf("="),s=~r?+(e.charAt(r-1)+1)*parseFloat(e.substr(r+1)):0;~r&&(e.indexOf("%")>r&&(s*=n/100),e=e.substr(0,r-1)),e=s+(e in yb?yb[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0)}return e},zx=function(e,n,r,s,o,a,l,c){var u=o.startColor,f=o.endColor,p=o.fontSize,m=o.indent,g=o.fontWeight,w=Hn.createElement("div"),y=Rd(r)||Yc(r,"pinType")==="fixed",T=e.indexOf("scroller")!==-1,j=y?Dn:r,_=e.indexOf("start")!==-1,v=_?u:f,P="border-color:"+v+";font-size:"+p+";color:"+v+";font-weight:"+g+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return P+="position:"+((T||c)&&y?"fixed;":"absolute;"),(T||c||!y)&&(P+=(s===Kr?kC:TC)+":"+(a+parseFloat(m))+"px;"),l&&(P+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),w._isStart=_,w.setAttribute("class","gsap-marker-"+e+(n?" marker-"+n:"")),w.style.cssText=P,w.innerText=n||n===0?e+"-"+n:e,j.children[0]?j.insertBefore(w,j.children[0]):j.appendChild(w),w._offset=w["offset"+s.op.d2],E0(w,0,s,_),w},E0=function(e,n,r,s){var o={display:"block"},a=r[s?"os2":"p2"],l=r[s?"p2":"os2"];e._isFlipped=s,o[r.a+"Percent"]=s?-100:0,o[r.a]=s?"1px":0,o["border"+a+Ah]=1,o["border"+l+Ah]=0,o[r.p]=n+"px",ht.set(e,o)},ln=[],A2={},kg,B5=function(){return _s()-qo>34&&(kg||(kg=requestAnimationFrame(Hl)))},Tf=function(){(!Zs||!Zs.isPressed||Zs.startX>Dn.clientWidth)&&(mn.cache++,Zs?kg||(kg=requestAnimationFrame(Hl)):Hl(),qo||Md("scrollStart"),qo=_s())},_k=function(){Rz=pn.innerWidth,Pz=pn.innerHeight},am=function(e){mn.cache++,(e===!0||!Es&&!Az&&!Hn.fullscreenElement&&!Hn.webkitFullscreenElement&&(!S2||Rz!==pn.innerWidth||Math.abs(pn.innerHeight-Pz)>pn.innerHeight*.25))&&pb.restart(!0)},Id={},$oe=[],$z=function t(){return ns(yn,"scrollEnd",t)||sd(!0)},Md=function(e){return Id[e]&&Id[e].map(function(n){return n()})||$oe},qi=[],Bz=function(e){for(var n=0;n<qi.length;n+=5)(!e||qi[n+4]&&qi[n+4].query===e)&&(qi[n].style.cssText=qi[n+1],qi[n].getBBox&&qi[n].setAttribute("transform",qi[n+2]||""),qi[n+3].uncache=1)},CC=function(e,n){var r;for(ei=0;ei<ln.length;ei++)r=ln[ei],r&&(!n||r._ctx===n)&&(e?r.kill(1):r.revert(!0,!0));mb=!0,n&&Bz(n),n||Md("revert")},Uz=function(e,n){mn.cache++,(n||!ti)&&mn.forEach(function(r){return Ls(r)&&r.cacheID++&&(r.rec=0)}),Wi(e)&&(pn.history.scrollRestoration=vC=e)},ti,md=0,U5,Boe=function(){if(U5!==md){var e=U5=md;requestAnimationFrame(function(){return e===md&&sd(!0)})}},Vz=function(){Dn.appendChild(dh),wC=!Zs&&dh.offsetHeight||pn.innerHeight,Dn.removeChild(dh)},V5=function(e){return wg(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=e?"none":"block"})},sd=function(e,n){if(Ji=Hn.documentElement,Dn=Hn.body,bC=[pn,Hn,Ji,Dn],qo&&!e&&!mb){rs(yn,"scrollEnd",$z);return}Vz(),ti=yn.isRefreshing=!0,mn.forEach(function(s){return Ls(s)&&++s.cacheID&&(s.rec=s())});var r=Md("refreshInit");_z&&yn.sort(),n||CC(),mn.forEach(function(s){Ls(s)&&(s.smooth&&(s.target.style.scrollBehavior="auto"),s(0))}),ln.slice(0).forEach(function(s){return s.refresh()}),mb=!1,ln.forEach(function(s){if(s._subPinOffset&&s.pin){var o=s.vars.horizontal?"offsetWidth":"offsetHeight",a=s.pin[o];s.revert(!0,1),s.adjustPinSpacing(s.pin[o]-a),s.refresh()}}),_2=1,V5(!0),ln.forEach(function(s){var o=il(s.scroller,s._dir),a=s.vars.end==="max"||s._endClamp&&s.end>o,l=s._startClamp&&s.start>=o;(a||l)&&s.setPositions(l?o-1:s.start,a?Math.max(l?o:s.start+1,o):s.end,!0)}),V5(!1),_2=0,r.forEach(function(s){return s&&s.render&&s.render(-1)}),mn.forEach(function(s){Ls(s)&&(s.smooth&&requestAnimationFrame(function(){return s.target.style.scrollBehavior="smooth"}),s.rec&&s(s.rec))}),Uz(vC,1),pb.pause(),md++,ti=2,Hl(2),ln.forEach(function(s){return Ls(s.vars.onRefresh)&&s.vars.onRefresh(s)}),ti=yn.isRefreshing=!1,Md("refresh")},P2=0,_0=1,Im,Hl=function(e){if(e===2||!ti&&!mb){yn.isUpdating=!0,Im&&Im.update(0);var n=ln.length,r=_s(),s=r-Sk>=50,o=n&&ln[0].scroll();if(_0=P2>o?-1:1,ti||(P2=o),s&&(qo&&!xv&&r-qo>200&&(qo=0,Md("scrollEnd")),rm=Sk,Sk=r),_0<0){for(ei=n;ei-- >0;)ln[ei]&&ln[ei].update(0,s);_0=1}else for(ei=0;ei<n;ei++)ln[ei]&&ln[ei].update(0,s);yn.isUpdating=!1}kg=0},R2=[Lz,Fz,TC,kC,Ro+Rm,Ro+_m,Ro+Pm,Ro+Am,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],A0=R2.concat([hd,pd,"boxSizing","max"+Ah,"max"+NC,"position",Ro,Mr,Mr+Pm,Mr+_m,Mr+Rm,Mr+Am]),Uoe=function(e,n,r){fh(r);var s=e._gsap;if(s.spacerIsNative)fh(s.spacerState);else if(e._gsap.swappedIn){var o=n.parentNode;o&&(o.insertBefore(e,n),o.removeChild(n))}e._gsap.swappedIn=!1},Ak=function(e,n,r,s){if(!e._gsap.swappedIn){for(var o=R2.length,a=n.style,l=e.style,c;o--;)c=R2[o],a[c]=r[c];a.position=r.position==="absolute"?"absolute":"relative",r.display==="inline"&&(a.display="inline-block"),l[TC]=l[kC]="auto",a.flexBasis=r.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[hd]=gb(e,ii)+Gr,a[pd]=gb(e,Kr)+Gr,a[Mr]=l[Ro]=l[Fz]=l[Lz]="0",fh(s),l[hd]=l["max"+Ah]=r[hd],l[pd]=l["max"+NC]=r[pd],l[Mr]=r[Mr],e.parentNode!==n&&(e.parentNode.insertBefore(n,e),n.appendChild(e)),e._gsap.swappedIn=!0}},Voe=/([A-Z])/g,fh=function(e){if(e){var n=e.t.style,r=e.length,s=0,o,a;for((e.t._gsap||ht.core.getCache(e.t)).uncache=1;s<r;s+=2)a=e[s+1],o=e[s],a?n[o]=a:n[o]&&n.removeProperty(o.replace(Voe,"-$1").toLowerCase())}},$x=function(e){for(var n=A0.length,r=e.style,s=[],o=0;o<n;o++)s.push(A0[o],r[A0[o]]);return s.t=e,s},qoe=function(e,n,r){for(var s=[],o=e.length,a=r?8:0,l;a<o;a+=2)l=e[a],s.push(l,l in n?n[l]:e[a+1]);return s.t=e.t,s},P0={left:0,top:0},q5=function(e,n,r,s,o,a,l,c,u,f,p,m,g,w){Ls(e)&&(e=e(c)),Wi(e)&&e.substr(0,3)==="max"&&(e=m+(e.charAt(4)==="="?S0("0"+e.substr(3),r):0));var y=g?g.time():0,T,j,_;if(g&&g.seek(0),isNaN(e)||(e=+e),om(e))g&&(e=ht.utils.mapRange(g.scrollTrigger.start,g.scrollTrigger.end,0,m,e)),l&&E0(l,r,s,!0);else{Ls(n)&&(n=n(c));var v=(e||"0").split(" "),P,D,$,U;_=ki(n,c)||Dn,P=$l(_)||{},(!P||!P.left&&!P.top)&&Io(_).display==="none"&&(U=_.style.display,_.style.display="block",P=$l(_),U?_.style.display=U:_.style.removeProperty("display")),D=S0(v[0],P[s.d]),$=S0(v[1]||"0",r),e=P[s.p]-u[s.p]-f+D+o-$,l&&E0(l,$,s,r-$<20||l._isStart&&$>20),r-=r-$}if(w&&(c[w]=e||-.001,e<0&&(e=0)),a){var K=e+r,Y=a._isStart;T="scroll"+s.d2,E0(a,K,s,Y&&K>20||!Y&&(p?Math.max(Dn[T],Ji[T]):a.parentNode[T])<=K+1),p&&(u=$l(l),p&&(a.style[s.op.p]=u[s.op.p]-s.op.m-a._offset+Gr))}return g&&_&&(T=$l(_),g.seek(m),j=$l(_),g._caScrollDist=T[s.p]-j[s.p],e=e/g._caScrollDist*m),g&&g.seek(y),g?e:Math.round(e)},Woe=/(webkit|moz|length|cssText|inset)/i,W5=function(e,n,r,s){if(e.parentNode!==n){var o=e.style,a,l;if(n===Dn){e._stOrig=o.cssText,l=Io(e);for(a in l)!+a&&!Woe.test(a)&&l[a]&&typeof o[a]=="string"&&a!=="0"&&(o[a]=l[a]);o.top=r,o.left=s}else o.cssText=e._stOrig;ht.core.getCache(e).uncache=1,n.appendChild(e)}},qz=function(e,n,r){var s=n,o=s;return function(a){var l=Math.round(e());return l!==s&&l!==o&&Math.abs(l-s)>3&&Math.abs(l-o)>3&&(a=l,r&&r()),o=s,s=Math.round(a),s}},Bx=function(e,n,r){var s={};s[n.p]="+="+r,ht.set(e,s)},H5=function(e,n){var r=nu(e,n),s="_scroll"+n.p2,o=function a(l,c,u,f,p){var m=a.tween,g=c.onComplete,w={};u=u||r();var y=qz(r,u,function(){m.kill(),a.tween=0});return p=f&&p||0,f=f||l-u,m&&m.kill(),c[s]=l,c.inherit=!1,c.modifiers=w,w[s]=function(){return y(u+f*m.ratio+p*m.ratio*m.ratio)},c.onUpdate=function(){mn.cache++,a.tween&&Hl()},c.onComplete=function(){a.tween=0,g&&g.call(m)},m=a.tween=ht.to(e,c),m};return e[s]=r,r.wheelHandler=function(){return o.tween&&o.tween.kill()&&(o.tween=0)},rs(e,"wheel",r.wheelHandler),yn.isTouch&&rs(e,"touchmove",r.wheelHandler),o},yn=function(){function t(n,r){Df||t.register(ht)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),E2(this),this.init(n,r)}var e=t.prototype;return e.init=function(r,s){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!sm){this.update=this.refresh=this.kill=Ka;return}r=z5(Wi(r)||om(r)||r.nodeType?{trigger:r}:r,Fx);var o=r,a=o.onUpdate,l=o.toggleClass,c=o.id,u=o.onToggle,f=o.onRefresh,p=o.scrub,m=o.trigger,g=o.pin,w=o.pinSpacing,y=o.invalidateOnRefresh,T=o.anticipatePin,j=o.onScrubComplete,_=o.onSnapComplete,v=o.once,P=o.snap,D=o.pinReparent,$=o.pinSpacer,U=o.containerAnimation,K=o.fastScrollEnd,Y=o.preventOverlaps,G=r.horizontal||r.containerAnimation&&r.horizontal!==!1?ii:Kr,X=!p&&p!==0,V=ki(r.scroller||pn),A=ht.core.getCache(V),x=Rd(V),C=("pinType"in r?r.pinType:Yc(V,"pinType")||x&&"fixed")==="fixed",L=[r.onEnter,r.onLeave,r.onEnterBack,r.onLeaveBack],z=X&&r.toggleActions.split(" "),R="markers"in r?r.markers:Fx.markers,I=x?0:parseFloat(Io(V)["border"+G.p2+Ah])||0,N=this,F=r.onRefreshInit&&function(){return r.onRefreshInit(N)},E=Doe(V,x,G),M=Ooe(V,x),ee=0,O=0,q=0,H=nu(V,G),J,Q,ne,se,ie,pe,le,me,Ee,te,Ne,Pe,et,Le,Se,Te,ze,dt,oe,ue,ge,be,ve,Ke,Me,He,ct,Je,Ye,St,bt,Ze,An,Dt,Ot,wn,nn,Xe,Ft;if(N._startClamp=N._endClamp=!1,N._dir=G,T*=45,N.scroller=V,N.scroll=U?U.time.bind(U):H,se=H(),N.vars=r,s=s||r.animation,"refreshPriority"in r&&(_z=1,r.refreshPriority===-9999&&(Im=N)),A.tweenScroll=A.tweenScroll||{top:H5(V,Kr),left:H5(V,ii)},N.tweenTo=J=A.tweenScroll[G.p],N.scrubDuration=function(Re){An=om(Re)&&Re,An?Ze?Ze.duration(Re):Ze=ht.to(s,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:An,paused:!0,onComplete:function(){return j&&j(N)}}):(Ze&&Ze.progress(1).kill(),Ze=0)},s&&(s.vars.lazy=!1,s._initted&&!N.isReverted||s.vars.immediateRender!==!1&&r.immediateRender!==!1&&s.duration()&&s.render(0,!0,!0),N.animation=s.pause(),s.scrollTrigger=N,N.scrubDuration(p),St=0,c||(c=s.vars.id)),P&&((!Wu(P)||P.push)&&(P={snapTo:P}),"scrollBehavior"in Dn.style&&ht.set(x?[Dn,Ji]:V,{scrollBehavior:"auto"}),mn.forEach(function(Re){return Ls(Re)&&Re.target===(x?Hn.scrollingElement||Ji:V)&&(Re.smooth=!1)}),ne=Ls(P.snapTo)?P.snapTo:P.snapTo==="labels"?Foe(s):P.snapTo==="labelsDirectional"?zoe(s):P.directional!==!1?function(Re,it){return jC(P.snapTo)(Re,_s()-O<500?0:it.direction)}:ht.utils.snap(P.snapTo),Dt=P.duration||{min:.1,max:2},Dt=Wu(Dt)?Em(Dt.min,Dt.max):Em(Dt,Dt),Ot=ht.delayedCall(P.delay||An/2||.1,function(){var Re=H(),it=_s()-O<500,Ue=J.tween;if((it||Math.abs(N.getVelocity())<10)&&!Ue&&!xv&&ee!==Re){var tt=(Re-pe)/Le,Cn=s&&!X?s.totalProgress():tt,at=it?0:(Cn-bt)/(_s()-rm)*1e3||0,Rt=ht.utils.clamp(-tt,1-tt,kf(at/2)*at/.185),On=tt+(P.inertia===!1?0:Rt),zt,Et,Yt=P,Jt=Yt.onStart,Lt=Yt.onInterrupt,Kn=Yt.onComplete;if(zt=ne(On,N),om(zt)||(zt=On),Et=Math.max(0,Math.round(pe+zt*Le)),Re<=le&&Re>=pe&&Et!==Re){if(Ue&&!Ue._initted&&Ue.data<=kf(Et-Re))return;P.inertia===!1&&(Rt=zt-tt),J(Et,{duration:Dt(kf(Math.max(kf(On-Cn),kf(zt-Cn))*.185/at/.05||0)),ease:P.ease||"power3",data:kf(Et-Re),onInterrupt:function(){return Ot.restart(!0)&&Lt&&Lt(N)},onComplete:function(){N.update(),ee=H(),s&&!X&&(Ze?Ze.resetTo("totalProgress",zt,s._tTime/s._tDur):s.progress(zt)),St=bt=s&&!X?s.totalProgress():N.progress,_&&_(N),Kn&&Kn(N)}},Re,Rt*Le,Et-Re-Rt*Le),Jt&&Jt(N,J.tween)}}else N.isActive&&ee!==Re&&Ot.restart(!0)}).pause()),c&&(A2[c]=N),m=N.trigger=ki(m||g!==!0&&g),Ft=m&&m._gsap&&m._gsap.stRevert,Ft&&(Ft=Ft(N)),g=g===!0?m:ki(g),Wi(l)&&(l={targets:m,className:l}),g&&(w===!1||w===Ro||(w=!w&&g.parentNode&&g.parentNode.style&&Io(g.parentNode).display==="flex"?!1:Mr),N.pin=g,Q=ht.core.getCache(g),Q.spacer?Se=Q.pinState:($&&($=ki($),$&&!$.nodeType&&($=$.current||$.nativeElement),Q.spacerIsNative=!!$,$&&(Q.spacerState=$x($))),Q.spacer=dt=$||Hn.createElement("div"),dt.classList.add("pin-spacer"),c&&dt.classList.add("pin-spacer-"+c),Q.pinState=Se=$x(g)),r.force3D!==!1&&ht.set(g,{force3D:!0}),N.spacer=dt=Q.spacer,Ye=Io(g),Ke=Ye[w+G.os2],ue=ht.getProperty(g),ge=ht.quickSetter(g,G.a,Gr),Ak(g,dt,Ye),ze=$x(g)),R){Pe=Wu(R)?z5(R,$5):$5,te=zx("scroller-start",c,V,G,Pe,0),Ne=zx("scroller-end",c,V,G,Pe,0,te),oe=te["offset"+G.op.d2];var yt=ki(Yc(V,"content")||V);me=this.markerStart=zx("start",c,yt,G,Pe,oe,0,U),Ee=this.markerEnd=zx("end",c,yt,G,Pe,oe,0,U),U&&(Xe=ht.quickSetter([me,Ee],G.a,Gr)),!C&&!(cl.length&&Yc(V,"fixedMarkers")===!0)&&(Loe(x?Dn:V),ht.set([te,Ne],{force3D:!0}),He=ht.quickSetter(te,G.a,Gr),Je=ht.quickSetter(Ne,G.a,Gr))}if(U){var Ge=U.vars.onUpdate,rt=U.vars.onUpdateParams;U.eventCallback("onUpdate",function(){N.update(0,0,1),Ge&&Ge.apply(U,rt||[])})}if(N.previous=function(){return ln[ln.indexOf(N)-1]},N.next=function(){return ln[ln.indexOf(N)+1]},N.revert=function(Re,it){if(!it)return N.kill(!0);var Ue=Re!==!1||!N.enabled,tt=Es;Ue!==N.isReverted&&(Ue&&(wn=Math.max(H(),N.scroll.rec||0),q=N.progress,nn=s&&s.progress()),me&&[me,Ee,te,Ne].forEach(function(Cn){return Cn.style.display=Ue?"none":"block"}),Ue&&(Es=N,N.update(Ue)),g&&(!D||!N.isActive)&&(Ue?Uoe(g,dt,Se):Ak(g,dt,Io(g),Me)),Ue||N.update(Ue),Es=tt,N.isReverted=Ue)},N.refresh=function(Re,it,Ue,tt){if(!((Es||!N.enabled)&&!it)){if(g&&Re&&qo){rs(t,"scrollEnd",$z);return}!ti&&F&&F(N),Es=N,J.tween&&!Ue&&(J.tween.kill(),J.tween=0),Ze&&Ze.pause(),y&&s&&(s.revert({kill:!1}).invalidate(),s.getChildren&&s.getChildren(!0,!0,!1).forEach(function(qe){return qe.vars.immediateRender&&qe.render(0,!0,!0)})),N.isReverted||N.revert(!0,!0),N._subPinOffset=!1;var Cn=E(),at=M(),Rt=U?U.duration():il(V,G),On=Le<=.01||!Le,zt=0,Et=tt||0,Yt=Wu(Ue)?Ue.end:r.end,Jt=r.endTrigger||m,Lt=Wu(Ue)?Ue.start:r.start||(r.start===0||!m?0:g?"0 0":"0 100%"),Kn=N.pinnedContainer=r.pinnedContainer&&ki(r.pinnedContainer,N),Fn=m&&Math.max(0,ln.indexOf(N))||0,Sn=Fn,Tn,Pn,Ws,Oi,Xt,zn,Nr,Li,ui,di,tr,_e,Ce;for(R&&Wu(Ue)&&(_e=ht.getProperty(te,G.p),Ce=ht.getProperty(Ne,G.p));Sn-- >0;)zn=ln[Sn],zn.end||zn.refresh(0,1)||(Es=N),Nr=zn.pin,Nr&&(Nr===m||Nr===g||Nr===Kn)&&!zn.isReverted&&(di||(di=[]),di.unshift(zn),zn.revert(!0,!0)),zn!==ln[Sn]&&(Fn--,Sn--);for(Ls(Lt)&&(Lt=Lt(N)),Lt=D5(Lt,"start",N),pe=q5(Lt,m,Cn,G,H(),me,te,N,at,I,C,Rt,U,N._startClamp&&"_startClamp")||(g?-.001:0),Ls(Yt)&&(Yt=Yt(N)),Wi(Yt)&&!Yt.indexOf("+=")&&(~Yt.indexOf(" ")?Yt=(Wi(Lt)?Lt.split(" ")[0]:"")+Yt:(zt=S0(Yt.substr(2),Cn),Yt=Wi(Lt)?Lt:(U?ht.utils.mapRange(0,U.duration(),U.scrollTrigger.start,U.scrollTrigger.end,pe):pe)+zt,Jt=m)),Yt=D5(Yt,"end",N),le=Math.max(pe,q5(Yt||(Jt?"100% 0":Rt),Jt,Cn,G,H()+zt,Ee,Ne,N,at,I,C,Rt,U,N._endClamp&&"_endClamp"))||-.001,zt=0,Sn=Fn;Sn--;)zn=ln[Sn],Nr=zn.pin,Nr&&zn.start-zn._pinPush<=pe&&!U&&zn.end>0&&(Tn=zn.end-(N._startClamp?Math.max(0,zn.start):zn.start),(Nr===m&&zn.start-zn._pinPush<pe||Nr===Kn)&&isNaN(Lt)&&(zt+=Tn*(1-zn.progress)),Nr===g&&(Et+=Tn));if(pe+=zt,le+=zt,N._startClamp&&(N._startClamp+=zt),N._endClamp&&!ti&&(N._endClamp=le||-.001,le=Math.min(le,il(V,G))),Le=le-pe||(pe-=.01)&&.001,On&&(q=ht.utils.clamp(0,1,ht.utils.normalize(pe,le,wn))),N._pinPush=Et,me&&zt&&(Tn={},Tn[G.a]="+="+zt,Kn&&(Tn[G.p]="-="+H()),ht.set([me,Ee],Tn)),g&&!(_2&&N.end>=il(V,G)))Tn=Io(g),Oi=G===Kr,Ws=H(),be=parseFloat(ue(G.a))+Et,!Rt&&le>1&&(tr=(x?Hn.scrollingElement||Ji:V).style,tr={style:tr,value:tr["overflow"+G.a.toUpperCase()]},x&&Io(Dn)["overflow"+G.a.toUpperCase()]!=="scroll"&&(tr.style["overflow"+G.a.toUpperCase()]="scroll")),Ak(g,dt,Tn),ze=$x(g),Pn=$l(g,!0),Li=C&&nu(V,Oi?ii:Kr)(),w?(Me=[w+G.os2,Le+Et+Gr],Me.t=dt,Sn=w===Mr?gb(g,G)+Le+Et:0,Sn&&(Me.push(G.d,Sn+Gr),dt.style.flexBasis!=="auto"&&(dt.style.flexBasis=Sn+Gr)),fh(Me),Kn&&ln.forEach(function(qe){qe.pin===Kn&&qe.vars.pinSpacing!==!1&&(qe._subPinOffset=!0)}),C&&H(wn)):(Sn=gb(g,G),Sn&&dt.style.flexBasis!=="auto"&&(dt.style.flexBasis=Sn+Gr)),C&&(Xt={top:Pn.top+(Oi?Ws-pe:Li)+Gr,left:Pn.left+(Oi?Li:Ws-pe)+Gr,boxSizing:"border-box",position:"fixed"},Xt[hd]=Xt["max"+Ah]=Math.ceil(Pn.width)+Gr,Xt[pd]=Xt["max"+NC]=Math.ceil(Pn.height)+Gr,Xt[Ro]=Xt[Ro+Pm]=Xt[Ro+_m]=Xt[Ro+Rm]=Xt[Ro+Am]="0",Xt[Mr]=Tn[Mr],Xt[Mr+Pm]=Tn[Mr+Pm],Xt[Mr+_m]=Tn[Mr+_m],Xt[Mr+Rm]=Tn[Mr+Rm],Xt[Mr+Am]=Tn[Mr+Am],Te=qoe(Se,Xt,D),ti&&H(0)),s?(ui=s._initted,jk(1),s.render(s.duration(),!0,!0),ve=ue(G.a)-be+Le+Et,ct=Math.abs(Le-ve)>1,C&&ct&&Te.splice(Te.length-2,2),s.render(0,!0,!0),ui||s.invalidate(!0),s.parent||s.totalTime(s.totalTime()),jk(0)):ve=Le,tr&&(tr.value?tr.style["overflow"+G.a.toUpperCase()]=tr.value:tr.style.removeProperty("overflow-"+G.a));else if(m&&H()&&!U)for(Pn=m.parentNode;Pn&&Pn!==Dn;)Pn._pinOffset&&(pe-=Pn._pinOffset,le-=Pn._pinOffset),Pn=Pn.parentNode;di&&di.forEach(function(qe){return qe.revert(!1,!0)}),N.start=pe,N.end=le,se=ie=ti?wn:H(),!U&&!ti&&(se<wn&&H(wn),N.scroll.rec=0),N.revert(!1,!0),O=_s(),Ot&&(ee=-1,Ot.restart(!0)),Es=0,s&&X&&(s._initted||nn)&&s.progress()!==nn&&s.progress(nn||0,!0).render(s.time(),!0,!0),(On||q!==N.progress||U||y||s&&!s._initted)&&(s&&!X&&(s._initted||q||s.vars.immediateRender!==!1)&&s.totalProgress(U&&pe<-.001&&!q?ht.utils.normalize(pe,le,0):q,!0),N.progress=On||(se-pe)/Le===q?0:q),g&&w&&(dt._pinOffset=Math.round(N.progress*ve)),Ze&&Ze.invalidate(),isNaN(_e)||(_e-=ht.getProperty(te,G.p),Ce-=ht.getProperty(Ne,G.p),Bx(te,G,_e),Bx(me,G,_e-(tt||0)),Bx(Ne,G,Ce),Bx(Ee,G,Ce-(tt||0))),On&&!ti&&N.update(),f&&!ti&&!et&&(et=!0,f(N),et=!1)}},N.getVelocity=function(){return(H()-ie)/(_s()-rm)*1e3||0},N.endAnimation=function(){Up(N.callbackAnimation),s&&(Ze?Ze.progress(1):s.paused()?X||Up(s,N.direction<0,1):Up(s,s.reversed()))},N.labelToScroll=function(Re){return s&&s.labels&&(pe||N.refresh()||pe)+s.labels[Re]/s.duration()*Le||0},N.getTrailing=function(Re){var it=ln.indexOf(N),Ue=N.direction>0?ln.slice(0,it).reverse():ln.slice(it+1);return(Wi(Re)?Ue.filter(function(tt){return tt.vars.preventOverlaps===Re}):Ue).filter(function(tt){return N.direction>0?tt.end<=pe:tt.start>=le})},N.update=function(Re,it,Ue){if(!(U&&!Ue&&!Re)){var tt=ti===!0?wn:N.scroll(),Cn=Re?0:(tt-pe)/Le,at=Cn<0?0:Cn>1?1:Cn||0,Rt=N.progress,On,zt,Et,Yt,Jt,Lt,Kn,Fn;if(it&&(ie=se,se=U?H():tt,P&&(bt=St,St=s&&!X?s.totalProgress():at)),T&&g&&!Es&&!Mx&&qo&&(!at&&pe<tt+(tt-ie)/(_s()-rm)*T?at=1e-4:at===1&&le>tt+(tt-ie)/(_s()-rm)*T&&(at=.9999)),at!==Rt&&N.enabled){if(On=N.isActive=!!at&&at<1,zt=!!Rt&&Rt<1,Lt=On!==zt,Jt=Lt||!!at!=!!Rt,N.direction=at>Rt?1:-1,N.progress=at,Jt&&!Es&&(Et=at&&!Rt?0:at===1?1:Rt===1?2:3,X&&(Yt=!Lt&&z[Et+1]!=="none"&&z[Et+1]||z[Et],Fn=s&&(Yt==="complete"||Yt==="reset"||Yt in s))),Y&&(Lt||Fn)&&(Fn||p||!s)&&(Ls(Y)?Y(N):N.getTrailing(Y).forEach(function(Ws){return Ws.endAnimation()})),X||(Ze&&!Es&&!Mx?(Ze._dp._time-Ze._start!==Ze._time&&Ze.render(Ze._dp._time-Ze._start),Ze.resetTo?Ze.resetTo("totalProgress",at,s._tTime/s._tDur):(Ze.vars.totalProgress=at,Ze.invalidate().restart())):s&&s.totalProgress(at,!!(Es&&(O||Re)))),g){if(Re&&w&&(dt.style[w+G.os2]=Ke),!C)ge(im(be+ve*at));else if(Jt){if(Kn=!Re&&at>Rt&&le+1>tt&&tt+1>=il(V,G),D)if(!Re&&(On||Kn)){var Sn=$l(g,!0),Tn=tt-pe;W5(g,Dn,Sn.top+(G===Kr?Tn:0)+Gr,Sn.left+(G===Kr?0:Tn)+Gr)}else W5(g,dt);fh(On||Kn?Te:ze),ct&&at<1&&On||ge(be+(at===1&&!Kn?ve:0))}}P&&!J.tween&&!Es&&!Mx&&Ot.restart(!0),l&&(Lt||v&&at&&(at<1||!Ck))&&wg(l.targets).forEach(function(Ws){return Ws.classList[On||v?"add":"remove"](l.className)}),a&&!X&&!Re&&a(N),Jt&&!Es?(X&&(Fn&&(Yt==="complete"?s.pause().totalProgress(1):Yt==="reset"?s.restart(!0).pause():Yt==="restart"?s.restart(!0):s[Yt]()),a&&a(N)),(Lt||!Ck)&&(u&&Lt&&Ek(N,u),L[Et]&&Ek(N,L[Et]),v&&(at===1?N.kill(!1,1):L[Et]=0),Lt||(Et=at===1?1:3,L[Et]&&Ek(N,L[Et]))),K&&!On&&Math.abs(N.getVelocity())>(om(K)?K:2500)&&(Up(N.callbackAnimation),Ze?Ze.progress(1):Up(s,Yt==="reverse"?1:!at,1))):X&&a&&!Es&&a(N)}if(Je){var Pn=U?tt/U.duration()*(U._caScrollDist||0):tt;He(Pn+(te._isFlipped?1:0)),Je(Pn)}Xe&&Xe(-tt/U.duration()*(U._caScrollDist||0))}},N.enable=function(Re,it){N.enabled||(N.enabled=!0,rs(V,"resize",am),x||rs(V,"scroll",Tf),F&&rs(t,"refreshInit",F),Re!==!1&&(N.progress=q=0,se=ie=ee=H()),it!==!1&&N.refresh())},N.getTween=function(Re){return Re&&J?J.tween:Ze},N.setPositions=function(Re,it,Ue,tt){if(U){var Cn=U.scrollTrigger,at=U.duration(),Rt=Cn.end-Cn.start;Re=Cn.start+Rt*Re/at,it=Cn.start+Rt*it/at}N.refresh(!1,!1,{start:O5(Re,Ue&&!!N._startClamp),end:O5(it,Ue&&!!N._endClamp)},tt),N.update()},N.adjustPinSpacing=function(Re){if(Me&&Re){var it=Me.indexOf(G.d)+1;Me[it]=parseFloat(Me[it])+Re+Gr,Me[1]=parseFloat(Me[1])+Re+Gr,fh(Me)}},N.disable=function(Re,it){if(N.enabled&&(Re!==!1&&N.revert(!0,!0),N.enabled=N.isActive=!1,it||Ze&&Ze.pause(),wn=0,Q&&(Q.uncache=1),F&&ns(t,"refreshInit",F),Ot&&(Ot.pause(),J.tween&&J.tween.kill()&&(J.tween=0)),!x)){for(var Ue=ln.length;Ue--;)if(ln[Ue].scroller===V&&ln[Ue]!==N)return;ns(V,"resize",am),x||ns(V,"scroll",Tf)}},N.kill=function(Re,it){N.disable(Re,it),Ze&&!it&&Ze.kill(),c&&delete A2[c];var Ue=ln.indexOf(N);Ue>=0&&ln.splice(Ue,1),Ue===ei&&_0>0&&ei--,Ue=0,ln.forEach(function(tt){return tt.scroller===N.scroller&&(Ue=1)}),Ue||ti||(N.scroll.rec=0),s&&(s.scrollTrigger=null,Re&&s.revert({kill:!1}),it||s.kill()),me&&[me,Ee,te,Ne].forEach(function(tt){return tt.parentNode&&tt.parentNode.removeChild(tt)}),Im===N&&(Im=0),g&&(Q&&(Q.uncache=1),Ue=0,ln.forEach(function(tt){return tt.pin===g&&Ue++}),Ue||(Q.spacer=0)),r.onKill&&r.onKill(N)},ln.push(N),N.enable(!1,!1),Ft&&Ft(N),s&&s.add&&!Le){var st=N.update;N.update=function(){N.update=st,mn.cache++,pe||le||N.refresh()},ht.delayedCall(.01,N.update),Le=.01,pe=le=0}else N.refresh();g&&Boe()},t.register=function(r){return Df||(ht=r||Mz(),Iz()&&window.document&&t.enable(),Df=sm),Df},t.defaults=function(r){if(r)for(var s in r)Fx[s]=r[s];return Fx},t.disable=function(r,s){sm=0,ln.forEach(function(a){return a[s?"kill":"disable"](r)}),ns(pn,"wheel",Tf),ns(Hn,"scroll",Tf),clearInterval(Ix),ns(Hn,"touchcancel",Ka),ns(Dn,"touchstart",Ka),Ox(ns,Hn,"pointerdown,touchstart,mousedown",L5),Ox(ns,Hn,"pointerup,touchend,mouseup",F5),pb.kill(),Dx(ns);for(var o=0;o<mn.length;o+=3)Lx(ns,mn[o],mn[o+1]),Lx(ns,mn[o],mn[o+2])},t.enable=function(){if(pn=window,Hn=document,Ji=Hn.documentElement,Dn=Hn.body,ht&&(wg=ht.utils.toArray,Em=ht.utils.clamp,E2=ht.core.context||Ka,jk=ht.core.suppressOverwrites||Ka,vC=pn.history.scrollRestoration||"auto",P2=pn.pageYOffset||0,ht.core.globals("ScrollTrigger",t),Dn)){sm=1,dh=document.createElement("div"),dh.style.height="100vh",dh.style.position="absolute",Vz(),Moe(),Ar.register(ht),t.isTouch=Ar.isTouch,Ic=Ar.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),S2=Ar.isTouch===1,rs(pn,"wheel",Tf),bC=[pn,Hn,Ji,Dn],ht.matchMedia?(t.matchMedia=function(u){var f=ht.matchMedia(),p;for(p in u)f.add(p,u[p]);return f},ht.addEventListener("matchMediaInit",function(){return CC()}),ht.addEventListener("matchMediaRevert",function(){return Bz()}),ht.addEventListener("matchMedia",function(){sd(0,1),Md("matchMedia")}),ht.matchMedia().add("(orientation: portrait)",function(){return _k(),_k})):console.warn("Requires GSAP 3.11.0 or later"),_k(),rs(Hn,"scroll",Tf);var r=Dn.hasAttribute("style"),s=Dn.style,o=s.borderTopStyle,a=ht.core.Animation.prototype,l,c;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),s.borderTopStyle="solid",l=$l(Dn),Kr.m=Math.round(l.top+Kr.sc())||0,ii.m=Math.round(l.left+ii.sc())||0,o?s.borderTopStyle=o:s.removeProperty("border-top-style"),r||(Dn.setAttribute("style",""),Dn.removeAttribute("style")),Ix=setInterval(B5,250),ht.delayedCall(.5,function(){return Mx=0}),rs(Hn,"touchcancel",Ka),rs(Dn,"touchstart",Ka),Ox(rs,Hn,"pointerdown,touchstart,mousedown",L5),Ox(rs,Hn,"pointerup,touchend,mouseup",F5),C2=ht.utils.checkPrefix("transform"),A0.push(C2),Df=_s(),pb=ht.delayedCall(.2,sd).pause(),Of=[Hn,"visibilitychange",function(){var u=pn.innerWidth,f=pn.innerHeight;Hn.hidden?(I5=u,M5=f):(I5!==u||M5!==f)&&am()},Hn,"DOMContentLoaded",sd,pn,"load",sd,pn,"resize",am],Dx(rs),ln.forEach(function(u){return u.enable(0,1)}),c=0;c<mn.length;c+=3)Lx(ns,mn[c],mn[c+1]),Lx(ns,mn[c],mn[c+2])}},t.config=function(r){"limitCallbacks"in r&&(Ck=!!r.limitCallbacks);var s=r.syncInterval;s&&clearInterval(Ix)||(Ix=s)&&setInterval(B5,s),"ignoreMobileResize"in r&&(S2=t.isTouch===1&&r.ignoreMobileResize),"autoRefreshEvents"in r&&(Dx(ns)||Dx(rs,r.autoRefreshEvents||"none"),Az=(r.autoRefreshEvents+"").indexOf("resize")===-1)},t.scrollerProxy=function(r,s){var o=ki(r),a=mn.indexOf(o),l=Rd(o);~a&&mn.splice(a,l?6:2),s&&(l?cl.unshift(pn,s,Dn,s,Ji,s):cl.unshift(o,s))},t.clearMatchMedia=function(r){ln.forEach(function(s){return s._ctx&&s._ctx.query===r&&s._ctx.kill(!0,!0)})},t.isInViewport=function(r,s,o){var a=(Wi(r)?ki(r):r).getBoundingClientRect(),l=a[o?hd:pd]*s||0;return o?a.right-l>0&&a.left+l<pn.innerWidth:a.bottom-l>0&&a.top+l<pn.innerHeight},t.positionInViewport=function(r,s,o){Wi(r)&&(r=ki(r));var a=r.getBoundingClientRect(),l=a[o?hd:pd],c=s==null?l/2:s in yb?yb[s]*l:~s.indexOf("%")?parseFloat(s)*l/100:parseFloat(s)||0;return o?(a.left+c)/pn.innerWidth:(a.top+c)/pn.innerHeight},t.killAll=function(r){if(ln.slice(0).forEach(function(o){return o.vars.id!=="ScrollSmoother"&&o.kill()}),r!==!0){var s=Id.killAll||[];Id={},s.forEach(function(o){return o()})}},t}();yn.version="3.13.0";yn.saveStyles=function(t){return t?wg(t).forEach(function(e){if(e&&e.style){var n=qi.indexOf(e);n>=0&&qi.splice(n,5),qi.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),ht.core.getCache(e),E2())}}):qi};yn.revert=function(t,e){return CC(!t,e)};yn.create=function(t,e){return new yn(t,e)};yn.refresh=function(t){return t?am(!0):(Df||yn.register())&&sd(!0)};yn.update=function(t){return++mn.cache&&Hl(t===!0?2:0)};yn.clearScrollMemory=Uz;yn.maxScroll=function(t,e){return il(t,e?ii:Kr)};yn.getScrollFunc=function(t,e){return nu(ki(t),e?ii:Kr)};yn.getById=function(t){return A2[t]};yn.getAll=function(){return ln.filter(function(t){return t.vars.id!=="ScrollSmoother"})};yn.isScrolling=function(){return!!qo};yn.snapDirectional=jC;yn.addEventListener=function(t,e){var n=Id[t]||(Id[t]=[]);~n.indexOf(e)||n.push(e)};yn.removeEventListener=function(t,e){var n=Id[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)};yn.batch=function(t,e){var n=[],r={},s=e.interval||.016,o=e.batchMax||1e9,a=function(u,f){var p=[],m=[],g=ht.delayedCall(s,function(){f(p,m),p=[],m=[]}).pause();return function(w){p.length||g.restart(!0),p.push(w.trigger),m.push(w),o<=p.length&&g.progress(1)}},l;for(l in e)r[l]=l.substr(0,2)==="on"&&Ls(e[l])&&l!=="onRefreshInit"?a(l,e[l]):e[l];return Ls(o)&&(o=o(),rs(yn,"refresh",function(){return o=e.batchMax()})),wg(t).forEach(function(c){var u={};for(l in r)u[l]=r[l];u.trigger=c,n.push(yn.create(u))}),n};var G5=function(e,n,r,s){return n>s?e(s):n<0&&e(0),r>s?(s-n)/(r-n):r<0?n/(n-r):1},Pk=function t(e,n){n===!0?e.style.removeProperty("touch-action"):e.style.touchAction=n===!0?"auto":n?"pan-"+n+(Ar.isTouch?" pinch-zoom":""):"none",e===Ji&&t(Dn,n)},Ux={auto:1,scroll:1},Hoe=function(e){var n=e.event,r=e.target,s=e.axis,o=(n.changedTouches?n.changedTouches[0]:n).target,a=o._gsap||ht.core.getCache(o),l=_s(),c;if(!a._isScrollT||l-a._isScrollT>2e3){for(;o&&o!==Dn&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!(Ux[(c=Io(o)).overflowY]||Ux[c.overflowX]));)o=o.parentNode;a._isScroll=o&&o!==r&&!Rd(o)&&(Ux[(c=Io(o)).overflowY]||Ux[c.overflowX]),a._isScrollT=l}(a._isScroll||s==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},Wz=function(e,n,r,s){return Ar.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:s=s&&Hoe,onPress:s,onDrag:s,onScroll:s,onEnable:function(){return r&&rs(Hn,Ar.eventTypes[0],Y5,!1,!0)},onDisable:function(){return ns(Hn,Ar.eventTypes[0],Y5,!0)}})},Goe=/(input|label|select|textarea)/i,K5,Y5=function(e){var n=Goe.test(e.target.tagName);(n||K5)&&(e._gsapAllow=!0,K5=n)},Koe=function(e){Wu(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var n=e,r=n.normalizeScrollX,s=n.momentum,o=n.allowNestedScroll,a=n.onRelease,l,c,u=ki(e.target)||Ji,f=ht.core.globals().ScrollSmoother,p=f&&f.get(),m=Ic&&(e.content&&ki(e.content)||p&&e.content!==!1&&!p.smooth()&&p.content()),g=nu(u,Kr),w=nu(u,ii),y=1,T=(Ar.isTouch&&pn.visualViewport?pn.visualViewport.scale*pn.visualViewport.width:pn.outerWidth)/pn.innerWidth,j=0,_=Ls(s)?function(){return s(l)}:function(){return s||2.8},v,P,D=Wz(u,e.type,!0,o),$=function(){return P=!1},U=Ka,K=Ka,Y=function(){c=il(u,Kr),K=Em(Ic?1:0,c),r&&(U=Em(0,il(u,ii))),v=md},G=function(){m._gsap.y=im(parseFloat(m._gsap.y)+g.offset)+"px",m.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(m._gsap.y)+", 0, 1)",g.offset=g.cacheID=0},X=function(){if(P){requestAnimationFrame($);var R=im(l.deltaY/2),I=K(g.v-R);if(m&&I!==g.v+g.offset){g.offset=I-g.v;var N=im((parseFloat(m&&m._gsap.y)||0)-g.offset);m.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+N+", 0, 1)",m._gsap.y=N+"px",g.cacheID=mn.cache,Hl()}return!0}g.offset&&G(),P=!0},V,A,x,C,L=function(){Y(),V.isActive()&&V.vars.scrollY>c&&(g()>c?V.progress(1)&&g(c):V.resetTo("scrollY",c))};return m&&ht.set(m,{y:"+=0"}),e.ignoreCheck=function(z){return Ic&&z.type==="touchmove"&&X()||y>1.05&&z.type!=="touchstart"||l.isGesturing||z.touches&&z.touches.length>1},e.onPress=function(){P=!1;var z=y;y=im((pn.visualViewport&&pn.visualViewport.scale||1)/T),V.pause(),z!==y&&Pk(u,y>1.01?!0:r?!1:"x"),A=w(),x=g(),Y(),v=md},e.onRelease=e.onGestureStart=function(z,R){if(g.offset&&G(),!R)C.restart(!0);else{mn.cache++;var I=_(),N,F;r&&(N=w(),F=N+I*.05*-z.velocityX/.227,I*=G5(w,N,F,il(u,ii)),V.vars.scrollX=U(F)),N=g(),F=N+I*.05*-z.velocityY/.227,I*=G5(g,N,F,il(u,Kr)),V.vars.scrollY=K(F),V.invalidate().duration(I).play(.01),(Ic&&V.vars.scrollY>=c||N>=c-1)&&ht.to({},{onUpdate:L,duration:I})}a&&a(z)},e.onWheel=function(){V._ts&&V.pause(),_s()-j>1e3&&(v=0,j=_s())},e.onChange=function(z,R,I,N,F){if(md!==v&&Y(),R&&r&&w(U(N[2]===R?A+(z.startX-z.x):w()+R-N[1])),I){g.offset&&G();var E=F[2]===I,M=E?x+z.startY-z.y:g()+I-F[1],ee=K(M);E&&M!==ee&&(x+=ee-M),g(ee)}(I||R)&&Hl()},e.onEnable=function(){Pk(u,r?!1:"x"),yn.addEventListener("refresh",L),rs(pn,"resize",L),g.smooth&&(g.target.style.scrollBehavior="auto",g.smooth=w.smooth=!1),D.enable()},e.onDisable=function(){Pk(u,!0),ns(pn,"resize",L),yn.removeEventListener("refresh",L),D.kill()},e.lockAxis=e.lockAxis!==!1,l=new Ar(e),l.iOS=Ic,Ic&&!g()&&g(1),Ic&&ht.ticker.add(Ka),C=l._dc,V=ht.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:r?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:qz(g,g(),function(){return V.pause()})},onUpdate:Hl,onComplete:C.vars.onComplete}),l};yn.sort=function(t){if(Ls(t))return ln.sort(t);var e=pn.pageYOffset||0;return yn.getAll().forEach(function(n){return n._sortY=n.trigger?e+n.trigger.getBoundingClientRect().top:n.start+pn.innerHeight}),ln.sort(t||function(n,r){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((r.vars.containerAnimation?1e6:r._sortY)+(r.vars.refreshPriority||0)*-1e6)})};yn.observe=function(t){return new Ar(t)};yn.normalizeScroll=function(t){if(typeof t>"u")return Zs;if(t===!0&&Zs)return Zs.enable();if(t===!1){Zs&&Zs.kill(),Zs=t;return}var e=t instanceof Ar?t:Koe(t);return Zs&&Zs.target===e.target&&Zs.kill(),Rd(e.target)&&(Zs=e),e};yn.core={_getVelocityProp:j2,_inputObserver:Wz,_scrollers:mn,_proxies:cl,bridge:{ss:function(){qo||Md("scrollStart"),qo=_s()},ref:function(){return Es}}};Mz()&&ht.registerPlugin(yn);function Yoe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Joe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Xoe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Qoe={};function J5(t,e){return(Qoe.jsx?Xoe:Joe).test(t)}const Zoe=/[ \t\n\f\r]/g;function eae(t){return typeof t=="object"?t.type==="text"?X5(t.value):!1:X5(t)}function X5(t){return t.replace(Zoe,"")===""}class Zg{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Zg.prototype.normal={};Zg.prototype.property={};Zg.prototype.space=void 0;function Hz(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new Zg(n,r,e)}function I2(t){return t.toLowerCase()}class Di{constructor(e,n){this.attribute=n,this.property=e}}Di.prototype.attribute="";Di.prototype.booleanish=!1;Di.prototype.boolean=!1;Di.prototype.commaOrSpaceSeparated=!1;Di.prototype.commaSeparated=!1;Di.prototype.defined=!1;Di.prototype.mustUseProperty=!1;Di.prototype.number=!1;Di.prototype.overloadedBoolean=!1;Di.prototype.property="";Di.prototype.spaceSeparated=!1;Di.prototype.space=void 0;let tae=0;const on=Vd(),Rr=Vd(),M2=Vd(),Ve=Vd(),Gn=Vd(),hh=Vd(),Ui=Vd();function Vd(){return 2**++tae}const D2=Object.freeze(Object.defineProperty({__proto__:null,boolean:on,booleanish:Rr,commaOrSpaceSeparated:Ui,commaSeparated:hh,number:Ve,overloadedBoolean:M2,spaceSeparated:Gn},Symbol.toStringTag,{value:"Module"})),Rk=Object.keys(D2);class SC extends Di{constructor(e,n,r,s){let o=-1;if(super(e,n),Q5(this,"space",s),typeof r=="number")for(;++o<Rk.length;){const a=Rk[o];Q5(this,Rk[o],(r&D2[a])===D2[a])}}}SC.prototype.defined=!0;function Q5(t,e,n){n&&(t[e]=n)}function Yh(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const o=new SC(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[I2(r)]=r,n[I2(o.attribute)]=r}return new Zg(e,n,t.space)}const Gz=Yh({properties:{ariaActiveDescendant:null,ariaAtomic:Rr,ariaAutoComplete:null,ariaBusy:Rr,ariaChecked:Rr,ariaColCount:Ve,ariaColIndex:Ve,ariaColSpan:Ve,ariaControls:Gn,ariaCurrent:null,ariaDescribedBy:Gn,ariaDetails:null,ariaDisabled:Rr,ariaDropEffect:Gn,ariaErrorMessage:null,ariaExpanded:Rr,ariaFlowTo:Gn,ariaGrabbed:Rr,ariaHasPopup:null,ariaHidden:Rr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gn,ariaLevel:Ve,ariaLive:null,ariaModal:Rr,ariaMultiLine:Rr,ariaMultiSelectable:Rr,ariaOrientation:null,ariaOwns:Gn,ariaPlaceholder:null,ariaPosInSet:Ve,ariaPressed:Rr,ariaReadOnly:Rr,ariaRelevant:null,ariaRequired:Rr,ariaRoleDescription:Gn,ariaRowCount:Ve,ariaRowIndex:Ve,ariaRowSpan:Ve,ariaSelected:Rr,ariaSetSize:Ve,ariaSort:null,ariaValueMax:Ve,ariaValueMin:Ve,ariaValueNow:Ve,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Kz(t,e){return e in t?t[e]:e}function Yz(t,e){return Kz(t,e.toLowerCase())}const nae=Yh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:hh,acceptCharset:Gn,accessKey:Gn,action:null,allow:null,allowFullScreen:on,allowPaymentRequest:on,allowUserMedia:on,alt:null,as:null,async:on,autoCapitalize:null,autoComplete:Gn,autoFocus:on,autoPlay:on,blocking:Gn,capture:null,charSet:null,checked:on,cite:null,className:Gn,cols:Ve,colSpan:null,content:null,contentEditable:Rr,controls:on,controlsList:Gn,coords:Ve|hh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:on,defer:on,dir:null,dirName:null,disabled:on,download:M2,draggable:Rr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:on,formTarget:null,headers:Gn,height:Ve,hidden:M2,high:Ve,href:null,hrefLang:null,htmlFor:Gn,httpEquiv:Gn,id:null,imageSizes:null,imageSrcSet:null,inert:on,inputMode:null,integrity:null,is:null,isMap:on,itemId:null,itemProp:Gn,itemRef:Gn,itemScope:on,itemType:Gn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:on,low:Ve,manifest:null,max:null,maxLength:Ve,media:null,method:null,min:null,minLength:Ve,multiple:on,muted:on,name:null,nonce:null,noModule:on,noValidate:on,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:on,optimum:Ve,pattern:null,ping:Gn,placeholder:null,playsInline:on,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:on,referrerPolicy:null,rel:Gn,required:on,reversed:on,rows:Ve,rowSpan:Ve,sandbox:Gn,scope:null,scoped:on,seamless:on,selected:on,shadowRootClonable:on,shadowRootDelegatesFocus:on,shadowRootMode:null,shape:null,size:Ve,sizes:null,slot:null,span:Ve,spellCheck:Rr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ve,step:null,style:null,tabIndex:Ve,target:null,title:null,translate:null,type:null,typeMustMatch:on,useMap:null,value:Rr,width:Ve,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Gn,axis:null,background:null,bgColor:null,border:Ve,borderColor:null,bottomMargin:Ve,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:on,declare:on,event:null,face:null,frame:null,frameBorder:null,hSpace:Ve,leftMargin:Ve,link:null,longDesc:null,lowSrc:null,marginHeight:Ve,marginWidth:Ve,noResize:on,noHref:on,noShade:on,noWrap:on,object:null,profile:null,prompt:null,rev:null,rightMargin:Ve,rules:null,scheme:null,scrolling:Rr,standby:null,summary:null,text:null,topMargin:Ve,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ve,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:on,disableRemotePlayback:on,prefix:null,property:null,results:Ve,security:null,unselectable:null},space:"html",transform:Yz}),rae=Yh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ui,accentHeight:Ve,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ve,amplitude:Ve,arabicForm:null,ascent:Ve,attributeName:null,attributeType:null,azimuth:Ve,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ve,by:null,calcMode:null,capHeight:Ve,className:Gn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ve,diffuseConstant:Ve,direction:null,display:null,dur:null,divisor:Ve,dominantBaseline:null,download:on,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ve,enableBackground:null,end:null,event:null,exponent:Ve,externalResourcesRequired:null,fill:null,fillOpacity:Ve,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:hh,g2:hh,glyphName:hh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ve,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ve,horizOriginX:Ve,horizOriginY:Ve,id:null,ideographic:Ve,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ve,k:Ve,k1:Ve,k2:Ve,k3:Ve,k4:Ve,kernelMatrix:Ui,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ve,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ve,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ve,overlineThickness:Ve,paintOrder:null,panose1:null,path:null,pathLength:Ve,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ve,pointsAtY:Ve,pointsAtZ:Ve,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ui,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ui,rev:Ui,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ui,requiredFeatures:Ui,requiredFonts:Ui,requiredFormats:Ui,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ve,specularExponent:Ve,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ve,strikethroughThickness:Ve,string:null,stroke:null,strokeDashArray:Ui,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ve,strokeOpacity:Ve,strokeWidth:null,style:null,surfaceScale:Ve,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ui,tabIndex:Ve,tableValues:null,target:null,targetX:Ve,targetY:Ve,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ui,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ve,underlineThickness:Ve,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ve,values:null,vAlphabetic:Ve,vMathematical:Ve,vectorEffect:null,vHanging:Ve,vIdeographic:Ve,version:null,vertAdvY:Ve,vertOriginX:Ve,vertOriginY:Ve,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ve,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Kz}),Jz=Yh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Xz=Yh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Yz}),Qz=Yh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),sae={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},iae=/[A-Z]/g,Z5=/-[a-z]/g,oae=/^data[-\w.:]+$/i;function aae(t,e){const n=I2(e);let r=e,s=Di;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&oae.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(Z5,cae);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!Z5.test(o)){let a=o.replace(iae,lae);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}s=SC}return new s(r,e)}function lae(t){return"-"+t.toLowerCase()}function cae(t){return t.charAt(1).toUpperCase()}const uae=Hz([Gz,nae,Jz,Xz,Qz],"html"),EC=Hz([Gz,rae,Jz,Xz,Qz],"svg");function dae(t){return t.join(" ").trim()}var Nf={},Ik,eI;function fae(){if(eI)return Ik;eI=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,u="/",f="*",p="",m="comment",g="declaration";Ik=function(y,T){if(typeof y!="string")throw new TypeError("First argument must be a string");if(!y)return[];T=T||{};var j=1,_=1;function v(A){var x=A.match(e);x&&(j+=x.length);var C=A.lastIndexOf(c);_=~C?A.length-C:_+A.length}function P(){var A={line:j,column:_};return function(x){return x.position=new D(A),K(),x}}function D(A){this.start=A,this.end={line:j,column:_},this.source=T.source}D.prototype.content=y;function $(A){var x=new Error(T.source+":"+j+":"+_+": "+A);if(x.reason=A,x.filename=T.source,x.line=j,x.column=_,x.source=y,!T.silent)throw x}function U(A){var x=A.exec(y);if(x){var C=x[0];return v(C),y=y.slice(C.length),x}}function K(){U(n)}function Y(A){var x;for(A=A||[];x=G();)x!==!1&&A.push(x);return A}function G(){var A=P();if(!(u!=y.charAt(0)||f!=y.charAt(1))){for(var x=2;p!=y.charAt(x)&&(f!=y.charAt(x)||u!=y.charAt(x+1));)++x;if(x+=2,p===y.charAt(x-1))return $("End of comment missing");var C=y.slice(2,x-2);return _+=2,v(C),y=y.slice(x),_+=2,A({type:m,comment:C})}}function X(){var A=P(),x=U(r);if(x){if(G(),!U(s))return $("property missing ':'");var C=U(o),L=A({type:g,property:w(x[0].replace(t,p)),value:C?w(C[0].replace(t,p)):p});return U(a),L}}function V(){var A=[];Y(A);for(var x;x=X();)x!==!1&&(A.push(x),Y(A));return A}return K(),V()};function w(y){return y?y.replace(l,p):p}return Ik}var tI;function hae(){if(tI)return Nf;tI=1;var t=Nf&&Nf.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nf,"__esModule",{value:!0}),Nf.default=n;var e=t(fae());function n(r,s){var o=null;if(!r||typeof r!="string")return o;var a=(0,e.default)(r),l=typeof s=="function";return a.forEach(function(c){if(c.type==="declaration"){var u=c.property,f=c.value;l?s(u,f,c):f&&(o=o||{},o[u]=f)}}),o}return Nf}var Vp={},nI;function pae(){if(nI)return Vp;nI=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(u){return!u||n.test(u)||t.test(u)},a=function(u,f){return f.toUpperCase()},l=function(u,f){return"".concat(f,"-")},c=function(u,f){return f===void 0&&(f={}),o(u)?u:(u=u.toLowerCase(),f.reactCompat?u=u.replace(s,l):u=u.replace(r,l),u.replace(e,a))};return Vp.camelCase=c,Vp}var qp,rI;function mae(){if(rI)return qp;rI=1;var t=qp&&qp.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(hae()),n=pae();function r(s,o){var a={};return!s||typeof s!="string"||(0,e.default)(s,function(l,c){l&&c&&(a[(0,n.camelCase)(l,o)]=c)}),a}return r.default=r,qp=r,qp}var gae=mae();const yae=rc(gae),Zz=e$("end"),_C=e$("start");function e$(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function xae(t){const e=_C(t),n=Zz(t);if(e&&n)return{start:e,end:n}}function Mm(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?sI(t.position):"start"in t||"end"in t?sI(t):"line"in t||"column"in t?O2(t):""}function O2(t){return iI(t&&t.line)+":"+iI(t&&t.column)}function sI(t){return O2(t&&t.start)+"-"+O2(t&&t.end)}function iI(t){return t&&typeof t=="number"?t:1}class qs extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",o={},a=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?s=e:!o.cause&&e&&(a=!0,s=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?o.ruleId=r:(o.source=r.slice(0,c),o.ruleId=r.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const l=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=l?l.line:void 0,this.name=Mm(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}qs.prototype.file="";qs.prototype.name="";qs.prototype.reason="";qs.prototype.message="";qs.prototype.stack="";qs.prototype.column=void 0;qs.prototype.line=void 0;qs.prototype.ancestors=void 0;qs.prototype.cause=void 0;qs.prototype.fatal=void 0;qs.prototype.place=void 0;qs.prototype.ruleId=void 0;qs.prototype.source=void 0;const AC={}.hasOwnProperty,bae=new Map,vae=/[A-Z]/g,wae=new Set(["table","tbody","thead","tfoot","tr"]),kae=new Set(["td","th"]),t$="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Tae(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Pae(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Aae(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?EC:uae,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=n$(s,t,void 0);return o&&typeof o!="string"?o:s.create(t,s.Fragment,{children:o||void 0},void 0)}function n$(t,e,n){if(e.type==="element")return Nae(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return jae(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Sae(t,e,n);if(e.type==="mdxjsEsm")return Cae(t,e);if(e.type==="root")return Eae(t,e,n);if(e.type==="text")return _ae(t,e)}function Nae(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=EC,t.schema=s),t.ancestors.push(e);const o=s$(t,e.tagName,!1),a=Rae(t,e);let l=RC(t,e);return wae.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!eae(c):!0})),r$(t,a,o,e),PC(a,l),t.ancestors.pop(),t.schema=r,t.create(e,o,a,n)}function jae(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Tg(t,e.position)}function Cae(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Tg(t,e.position)}function Sae(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=EC,t.schema=s),t.ancestors.push(e);const o=e.name===null?t.Fragment:s$(t,e.name,!0),a=Iae(t,e),l=RC(t,e);return r$(t,a,o,e),PC(a,l),t.ancestors.pop(),t.schema=r,t.create(e,o,a,n)}function Eae(t,e,n){const r={};return PC(r,RC(t,e)),t.create(e,t.Fragment,r,n)}function _ae(t,e){return e.value}function r$(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function PC(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Aae(t,e,n){return r;function r(s,o,a,l){const u=Array.isArray(a.children)?n:e;return l?u(o,a,l):u(o,a)}}function Pae(t,e){return n;function n(r,s,o,a){const l=Array.isArray(o.children),c=_C(r);return e(s,o,a,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function Rae(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&AC.call(e.properties,s)){const o=Mae(t,s,e.properties[s]);if(o){const[a,l]=o;t.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&kae.has(e.tagName)?r=l:n[a]=l}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Iae(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const a=o.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Tg(t,e.position);else{const s=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const l=r.value.data.estree.body[0];l.type,o=t.evaluater.evaluateExpression(l.expression)}else Tg(t,e.position);else o=r.value===null?!0:r.value;n[s]=o}return n}function RC(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:bae;for(;++r<e.children.length;){const o=e.children[r];let a;if(t.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const u=s.get(c)||0;a=c+"-"+u,s.set(c,u+1)}}const l=n$(t,o,a);l!==void 0&&n.push(l)}return n}function Mae(t,e,n){const r=aae(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Yoe(n):dae(n)),r.property==="style"){let s=typeof n=="object"?n:Dae(t,String(n));return t.stylePropertyNameCase==="css"&&(s=Oae(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?sae[r.property]||r.property:r.attribute,n]}}function Dae(t,e){try{return yae(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new qs("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=t$+"#cannot-parse-style-attribute",s}}function s$(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let o=-1,a;for(;++o<s.length;){const l=J5(s[o])?{type:"Identifier",name:s[o]}:{type:"Literal",value:s[o]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(o&&l.type==="Literal"),optional:!1}:l}r=a}else r=J5(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return AC.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Tg(t)}function Tg(t,e){const n=new qs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=t$+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Oae(t){const e={};let n;for(n in t)AC.call(t,n)&&(e[Lae(n)]=t[n]);return e}function Lae(t){let e=t.replace(vae,Fae);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Fae(t){return"-"+t.toLowerCase()}const Mk={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},zae={};function IC(t,e){const n=zae,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return i$(t,r,s)}function i$(t,e,n){if($ae(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return oI(t.children,e,n)}return Array.isArray(t)?oI(t,e,n):""}function oI(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=i$(t[s],e,n);return r.join("")}function $ae(t){return!!(t&&typeof t=="object")}const aI=document.createElement("i");function MC(t){const e="&"+t+";";aI.innerHTML=e;const n=aI.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function uo(t,e,n,r){const s=t.length;let o=0,a;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);o<r.length;)a=r.slice(o,o+1e4),a.unshift(e,0),t.splice(...a),o+=1e4,e+=1e4}function Mo(t,e){return t.length>0?(uo(t,t.length,0,e),t):e}const lI={}.hasOwnProperty;function o$(t){const e={};let n=-1;for(;++n<t.length;)Bae(e,t[n]);return e}function Bae(t,e){let n;for(n in e){const s=(lI.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let a;if(o)for(a in o){lI.call(s,a)||(s[a]=[]);const l=o[a];Uae(s[a],Array.isArray(l)?l:l?[l]:[])}}}function Uae(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);uo(t,0,0,r)}function a$(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ja(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const oi=fu(/[A-Za-z]/),zs=fu(/[\dA-Za-z]/),Vae=fu(/[#-'*+\--9=?A-Z^-~]/);function xb(t){return t!==null&&(t<32||t===127)}const L2=fu(/\d/),qae=fu(/[\dA-Fa-f]/),Wae=fu(/[!-/:-@[-`{-~]/);function Ut(t){return t!==null&&t<-2}function Vn(t){return t!==null&&(t<0||t===32)}function vn(t){return t===-2||t===-1||t===32}const bv=fu(new RegExp("\\p{P}|\\p{S}","u")),Dd=fu(/\s/);function fu(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Jh(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const o=t.charCodeAt(n);let a="";if(o===37&&zs(t.charCodeAt(n+1))&&zs(t.charCodeAt(n+2)))s=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const l=t.charCodeAt(n+1);o<56320&&l>56319&&l<57344?(a=String.fromCharCode(o,l),s=1):a=""}else a=String.fromCharCode(o);a&&(e.push(t.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function En(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(c){return vn(c)?(t.enter(n),l(c)):e(c)}function l(c){return vn(c)&&o++<s?(t.consume(c),l):(t.exit(n),e(c))}}const Hae={tokenize:Gae};function Gae(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),En(t,e,"linePrefix")}function s(l){return t.enter("paragraph"),o(l)}function o(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(l)}function a(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Ut(l)?(t.consume(l),t.exit("chunkText"),o):(t.consume(l),a)}}const Kae={tokenize:Yae},cI={tokenize:Jae};function Yae(t){const e=this,n=[];let r=0,s,o,a;return l;function l(v){if(r<n.length){const P=n[r];return e.containerState=P[1],t.attempt(P[0].continuation,c,u)(v)}return u(v)}function c(v){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&_();const P=e.events.length;let D=P,$;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){$=e.events[D][1].end;break}j(r);let U=P;for(;U<e.events.length;)e.events[U][1].end={...$},U++;return uo(e.events,D+1,0,e.events.slice(P)),e.events.length=U,u(v)}return l(v)}function u(v){if(r===n.length){if(!s)return m(v);if(s.currentConstruct&&s.currentConstruct.concrete)return w(v);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(cI,f,p)(v)}function f(v){return s&&_(),j(r),m(v)}function p(v){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,w(v)}function m(v){return e.containerState={},t.attempt(cI,g,w)(v)}function g(v){return r++,n.push([e.currentConstruct,e.containerState]),m(v)}function w(v){if(v===null){s&&_(),j(0),t.consume(v);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:o}),y(v)}function y(v){if(v===null){T(t.exit("chunkFlow"),!0),j(0),t.consume(v);return}return Ut(v)?(t.consume(v),T(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(v),y)}function T(v,P){const D=e.sliceStream(v);if(P&&D.push(null),v.previous=o,o&&(o.next=v),o=v,s.defineSkip(v.start),s.write(D),e.parser.lazy[v.start.line]){let $=s.events.length;for(;$--;)if(s.events[$][1].start.offset<a&&(!s.events[$][1].end||s.events[$][1].end.offset>a))return;const U=e.events.length;let K=U,Y,G;for(;K--;)if(e.events[K][0]==="exit"&&e.events[K][1].type==="chunkFlow"){if(Y){G=e.events[K][1].end;break}Y=!0}for(j(r),$=U;$<e.events.length;)e.events[$][1].end={...G},$++;uo(e.events,K+1,0,e.events.slice(U)),e.events.length=$}}function j(v){let P=n.length;for(;P-- >v;){const D=n[P];e.containerState=D[1],D[0].exit.call(e,t)}n.length=v}function _(){s.write([null]),o=void 0,s=void 0,e.containerState._closeFlow=void 0}}function Jae(t,e,n){return En(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ph(t){if(t===null||Vn(t)||Dd(t))return 1;if(bv(t))return 2}function vv(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const o=t[s].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const F2={name:"attention",resolveAll:Xae,tokenize:Qae};function Xae(t,e){let n=-1,r,s,o,a,l,c,u,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},m={...t[n][1].start};uI(p,-c),uI(m,c),a={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},o={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},t[r][1].end={...a.start},t[n][1].start={...l.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=Mo(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=Mo(u,[["enter",s,e],["enter",a,e],["exit",a,e],["enter",o,e]]),u=Mo(u,vv(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=Mo(u,[["exit",o,e],["enter",l,e],["exit",l,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,u=Mo(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,uo(t,r-1,n-r+3,u),n=r+u.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Qae(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ph(r);let o;return a;function a(c){return o=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===o)return t.consume(c),l;const u=t.exit("attentionSequence"),f=Ph(c),p=!f||f===2&&s||n.includes(c),m=!s||s===2&&f||n.includes(r);return u._open=!!(o===42?p:p&&(s||!m)),u._close=!!(o===42?m:m&&(f||!p)),e(c)}}function uI(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Zae={name:"autolink",tokenize:ele};function ele(t,e,n){let r=0;return s;function s(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(g){return oi(g)?(t.consume(g),a):g===64?n(g):u(g)}function a(g){return g===43||g===45||g===46||zs(g)?(r=1,l(g)):u(g)}function l(g){return g===58?(t.consume(g),r=0,c):(g===43||g===45||g===46||zs(g))&&r++<32?(t.consume(g),l):(r=0,u(g))}function c(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||xb(g)?n(g):(t.consume(g),c)}function u(g){return g===64?(t.consume(g),f):Vae(g)?(t.consume(g),u):n(g)}function f(g){return zs(g)?p(g):n(g)}function p(g){return g===46?(t.consume(g),r=0,f):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||zs(g))&&r++<63){const w=g===45?m:p;return t.consume(g),w}return n(g)}}const ey={partial:!0,tokenize:tle};function tle(t,e,n){return r;function r(o){return vn(o)?En(t,s,"linePrefix")(o):s(o)}function s(o){return o===null||Ut(o)?e(o):n(o)}}const l$={continuation:{tokenize:rle},exit:sle,name:"blockQuote",tokenize:nle};function nle(t,e,n){const r=this;return s;function s(a){if(a===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),o}return n(a)}function o(a){return vn(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function rle(t,e,n){const r=this;return s;function s(a){return vn(a)?En(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):o(a)}function o(a){return t.attempt(l$,e,n)(a)}}function sle(t){t.exit("blockQuote")}const c$={name:"characterEscape",tokenize:ile};function ile(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),s}function s(o){return Wae(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const u$={name:"characterReference",tokenize:ole};function ole(t,e,n){const r=this;let s=0,o,a;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),c}function c(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),o=31,a=zs,f(p))}function u(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,a=qae,f):(t.enter("characterReferenceValue"),o=7,a=L2,f(p))}function f(p){if(p===59&&s){const m=t.exit("characterReferenceValue");return a===zs&&!MC(r.sliceSerialize(m))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(p)&&s++<o?(t.consume(p),f):n(p)}}const dI={partial:!0,tokenize:lle},fI={concrete:!0,name:"codeFenced",tokenize:ale};function ale(t,e,n){const r=this,s={partial:!0,tokenize:D};let o=0,a=0,l;return c;function c($){return u($)}function u($){const U=r.events[r.events.length-1];return o=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,l=$,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f($)}function f($){return $===l?(a++,t.consume($),f):a<3?n($):(t.exit("codeFencedFenceSequence"),vn($)?En(t,p,"whitespace")($):p($))}function p($){return $===null||Ut($)?(t.exit("codeFencedFence"),r.interrupt?e($):t.check(dI,y,P)($)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m($))}function m($){return $===null||Ut($)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p($)):vn($)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),En(t,g,"whitespace")($)):$===96&&$===l?n($):(t.consume($),m)}function g($){return $===null||Ut($)?p($):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),w($))}function w($){return $===null||Ut($)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p($)):$===96&&$===l?n($):(t.consume($),w)}function y($){return t.attempt(s,P,T)($)}function T($){return t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),j}function j($){return o>0&&vn($)?En(t,_,"linePrefix",o+1)($):_($)}function _($){return $===null||Ut($)?t.check(dI,y,P)($):(t.enter("codeFlowValue"),v($))}function v($){return $===null||Ut($)?(t.exit("codeFlowValue"),_($)):(t.consume($),v)}function P($){return t.exit("codeFenced"),e($)}function D($,U,K){let Y=0;return G;function G(C){return $.enter("lineEnding"),$.consume(C),$.exit("lineEnding"),X}function X(C){return $.enter("codeFencedFence"),vn(C)?En($,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):V(C)}function V(C){return C===l?($.enter("codeFencedFenceSequence"),A(C)):K(C)}function A(C){return C===l?(Y++,$.consume(C),A):Y>=a?($.exit("codeFencedFenceSequence"),vn(C)?En($,x,"whitespace")(C):x(C)):K(C)}function x(C){return C===null||Ut(C)?($.exit("codeFencedFence"),U(C)):K(C)}}}function lle(t,e,n){const r=this;return s;function s(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o)}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const Dk={name:"codeIndented",tokenize:ule},cle={partial:!0,tokenize:dle};function ule(t,e,n){const r=this;return s;function s(u){return t.enter("codeIndented"),En(t,o,"linePrefix",5)(u)}function o(u){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?c(u):Ut(u)?t.attempt(cle,a,c)(u):(t.enter("codeFlowValue"),l(u))}function l(u){return u===null||Ut(u)?(t.exit("codeFlowValue"),a(u)):(t.consume(u),l)}function c(u){return t.exit("codeIndented"),e(u)}}function dle(t,e,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):Ut(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):En(t,o,"linePrefix",5)(a)}function o(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):Ut(a)?s(a):n(a)}}const fle={name:"codeText",previous:ple,resolve:hle,tokenize:mle};function hle(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function ple(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function mle(t,e,n){let r=0,s,o;return a;function a(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),r++,l):(t.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),c):p===96?(o=t.enter("codeTextSequence"),s=0,f(p)):Ut(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("codeTextData"),u(p))}function u(p){return p===null||p===32||p===96||Ut(p)?(t.exit("codeTextData"),c(p)):(t.consume(p),u)}function f(p){return p===96?(t.consume(p),s++,f):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(o.type="codeTextData",u(p))}}class gle{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Wp(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Wp(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Wp(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Wp(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Wp(this.left,n.reverse())}}}function Wp(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function d$(t){const e={};let n=-1,r,s,o,a,l,c,u;const f=new gle(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,yle(f,n)),n=e[n],u=!0);else if(r[1]._container){for(o=n,s=void 0;o--;)if(a=f.get(o),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(f.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=o);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...f.get(s)[1].start},l=f.slice(s,n),l.unshift(r),f.splice(s,n-s+1,l))}}return uo(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function yle(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],u={};let f,p,m=-1,g=n,w=0,y=0;const T=[y];for(;g;){for(;t.get(++s)[1]!==g;);o.push(s),g._tokenizer||(f=r.sliceStream(g),g.next||f.push(null),p&&a.defineSkip(g.start),g._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(f),g._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(y=m+1,T.push(y),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(a.events=[],g?(g._tokenizer=void 0,g.previous=void 0):T.pop(),m=T.length;m--;){const j=l.slice(T[m],T[m+1]),_=o.pop();c.push([_,_+j.length-1]),t.splice(_,2,j)}for(c.reverse(),m=-1;++m<c.length;)u[w+c[m][0]]=w+c[m][1],w+=c[m][1]-c[m][0]-1;return u}const xle={resolve:vle,tokenize:wle},ble={partial:!0,tokenize:kle};function vle(t){return d$(t),t}function wle(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?o(l):Ut(l)?t.check(ble,a,o)(l):(t.consume(l),s)}function o(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function a(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function kle(t,e,n){const r=this;return s;function s(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),En(t,o,"linePrefix")}function o(a){if(a===null||Ut(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function f$(t,e,n,r,s,o,a,l,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(j){return j===60?(t.enter(r),t.enter(s),t.enter(o),t.consume(j),t.exit(o),m):j===null||j===32||j===41||xb(j)?n(j):(t.enter(r),t.enter(a),t.enter(l),t.enter("chunkString",{contentType:"string"}),y(j))}function m(j){return j===62?(t.enter(o),t.consume(j),t.exit(o),t.exit(s),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),g(j))}function g(j){return j===62?(t.exit("chunkString"),t.exit(l),m(j)):j===null||j===60||Ut(j)?n(j):(t.consume(j),j===92?w:g)}function w(j){return j===60||j===62||j===92?(t.consume(j),g):g(j)}function y(j){return!f&&(j===null||j===41||Vn(j))?(t.exit("chunkString"),t.exit(l),t.exit(a),t.exit(r),e(j)):f<u&&j===40?(t.consume(j),f++,y):j===41?(t.consume(j),f--,y):j===null||j===32||j===40||xb(j)?n(j):(t.consume(j),j===92?T:y)}function T(j){return j===40||j===41||j===92?(t.consume(j),y):y(j)}}function h$(t,e,n,r,s,o){const a=this;let l=0,c;return u;function u(g){return t.enter(r),t.enter(s),t.consume(g),t.exit(s),t.enter(o),f}function f(g){return l>999||g===null||g===91||g===93&&!c||g===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(g):g===93?(t.exit(o),t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):Ut(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||Ut(g)||l++>999?(t.exit("chunkString"),f(g)):(t.consume(g),c||(c=!vn(g)),g===92?m:p)}function m(g){return g===91||g===92||g===93?(t.consume(g),l++,p):p(g)}}function p$(t,e,n,r,s,o){let a;return l;function l(m){return m===34||m===39||m===40?(t.enter(r),t.enter(s),t.consume(m),t.exit(s),a=m===40?41:m,c):n(m)}function c(m){return m===a?(t.enter(s),t.consume(m),t.exit(s),t.exit(r),e):(t.enter(o),u(m))}function u(m){return m===a?(t.exit(o),c(a)):m===null?n(m):Ut(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),En(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===a||m===null||Ut(m)?(t.exit("chunkString"),u(m)):(t.consume(m),m===92?p:f)}function p(m){return m===a||m===92?(t.consume(m),f):f(m)}}function Dm(t,e){let n;return r;function r(s){return Ut(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):vn(s)?En(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const Tle={name:"definition",tokenize:jle},Nle={partial:!0,tokenize:Cle};function jle(t,e,n){const r=this;let s;return o;function o(g){return t.enter("definition"),a(g)}function a(g){return h$.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function l(g){return s=ja(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),c):n(g)}function c(g){return Vn(g)?Dm(t,u)(g):u(g)}function u(g){return f$(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function f(g){return t.attempt(Nle,p,p)(g)}function p(g){return vn(g)?En(t,m,"whitespace")(g):m(g)}function m(g){return g===null||Ut(g)?(t.exit("definition"),r.parser.defined.push(s),e(g)):n(g)}}function Cle(t,e,n){return r;function r(l){return Vn(l)?Dm(t,s)(l):n(l)}function s(l){return p$(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function o(l){return vn(l)?En(t,a,"whitespace")(l):a(l)}function a(l){return l===null||Ut(l)?e(l):n(l)}}const Sle={name:"hardBreakEscape",tokenize:Ele};function Ele(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),s}function s(o){return Ut(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const _le={name:"headingAtx",resolve:Ale,tokenize:Ple};function Ale(t,e){let n=t.length-2,r=3,s,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},uo(t,r,n-r+1,[["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e]])),t}function Ple(t,e,n){let r=0;return s;function s(f){return t.enter("atxHeading"),o(f)}function o(f){return t.enter("atxHeadingSequence"),a(f)}function a(f){return f===35&&r++<6?(t.consume(f),a):f===null||Vn(f)?(t.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||Ut(f)?(t.exit("atxHeading"),e(f)):vn(f)?En(t,l,"whitespace")(f):(t.enter("atxHeadingText"),u(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),l(f))}function u(f){return f===null||f===35||Vn(f)?(t.exit("atxHeadingText"),l(f)):(t.consume(f),u)}}const Rle=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],hI=["pre","script","style","textarea"],Ile={concrete:!0,name:"htmlFlow",resolveTo:Ole,tokenize:Lle},Mle={partial:!0,tokenize:zle},Dle={partial:!0,tokenize:Fle};function Ole(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Lle(t,e,n){const r=this;let s,o,a,l,c;return u;function u(M){return f(M)}function f(M){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(M),p}function p(M){return M===33?(t.consume(M),m):M===47?(t.consume(M),o=!0,y):M===63?(t.consume(M),s=3,r.interrupt?e:N):oi(M)?(t.consume(M),a=String.fromCharCode(M),T):n(M)}function m(M){return M===45?(t.consume(M),s=2,g):M===91?(t.consume(M),s=5,l=0,w):oi(M)?(t.consume(M),s=4,r.interrupt?e:N):n(M)}function g(M){return M===45?(t.consume(M),r.interrupt?e:N):n(M)}function w(M){const ee="CDATA[";return M===ee.charCodeAt(l++)?(t.consume(M),l===ee.length?r.interrupt?e:V:w):n(M)}function y(M){return oi(M)?(t.consume(M),a=String.fromCharCode(M),T):n(M)}function T(M){if(M===null||M===47||M===62||Vn(M)){const ee=M===47,O=a.toLowerCase();return!ee&&!o&&hI.includes(O)?(s=1,r.interrupt?e(M):V(M)):Rle.includes(a.toLowerCase())?(s=6,ee?(t.consume(M),j):r.interrupt?e(M):V(M)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(M):o?_(M):v(M))}return M===45||zs(M)?(t.consume(M),a+=String.fromCharCode(M),T):n(M)}function j(M){return M===62?(t.consume(M),r.interrupt?e:V):n(M)}function _(M){return vn(M)?(t.consume(M),_):G(M)}function v(M){return M===47?(t.consume(M),G):M===58||M===95||oi(M)?(t.consume(M),P):vn(M)?(t.consume(M),v):G(M)}function P(M){return M===45||M===46||M===58||M===95||zs(M)?(t.consume(M),P):D(M)}function D(M){return M===61?(t.consume(M),$):vn(M)?(t.consume(M),D):v(M)}function $(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(t.consume(M),c=M,U):vn(M)?(t.consume(M),$):K(M)}function U(M){return M===c?(t.consume(M),c=null,Y):M===null||Ut(M)?n(M):(t.consume(M),U)}function K(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||Vn(M)?D(M):(t.consume(M),K)}function Y(M){return M===47||M===62||vn(M)?v(M):n(M)}function G(M){return M===62?(t.consume(M),X):n(M)}function X(M){return M===null||Ut(M)?V(M):vn(M)?(t.consume(M),X):n(M)}function V(M){return M===45&&s===2?(t.consume(M),L):M===60&&s===1?(t.consume(M),z):M===62&&s===4?(t.consume(M),F):M===63&&s===3?(t.consume(M),N):M===93&&s===5?(t.consume(M),I):Ut(M)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(Mle,E,A)(M)):M===null||Ut(M)?(t.exit("htmlFlowData"),A(M)):(t.consume(M),V)}function A(M){return t.check(Dle,x,E)(M)}function x(M){return t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),C}function C(M){return M===null||Ut(M)?A(M):(t.enter("htmlFlowData"),V(M))}function L(M){return M===45?(t.consume(M),N):V(M)}function z(M){return M===47?(t.consume(M),a="",R):V(M)}function R(M){if(M===62){const ee=a.toLowerCase();return hI.includes(ee)?(t.consume(M),F):V(M)}return oi(M)&&a.length<8?(t.consume(M),a+=String.fromCharCode(M),R):V(M)}function I(M){return M===93?(t.consume(M),N):V(M)}function N(M){return M===62?(t.consume(M),F):M===45&&s===2?(t.consume(M),N):V(M)}function F(M){return M===null||Ut(M)?(t.exit("htmlFlowData"),E(M)):(t.consume(M),F)}function E(M){return t.exit("htmlFlow"),e(M)}}function Fle(t,e,n){const r=this;return s;function s(a){return Ut(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o):n(a)}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function zle(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(ey,e,n)}}const $le={name:"htmlText",tokenize:Ble};function Ble(t,e,n){const r=this;let s,o,a;return l;function l(N){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(N),c}function c(N){return N===33?(t.consume(N),u):N===47?(t.consume(N),D):N===63?(t.consume(N),v):oi(N)?(t.consume(N),K):n(N)}function u(N){return N===45?(t.consume(N),f):N===91?(t.consume(N),o=0,w):oi(N)?(t.consume(N),_):n(N)}function f(N){return N===45?(t.consume(N),g):n(N)}function p(N){return N===null?n(N):N===45?(t.consume(N),m):Ut(N)?(a=p,z(N)):(t.consume(N),p)}function m(N){return N===45?(t.consume(N),g):p(N)}function g(N){return N===62?L(N):N===45?m(N):p(N)}function w(N){const F="CDATA[";return N===F.charCodeAt(o++)?(t.consume(N),o===F.length?y:w):n(N)}function y(N){return N===null?n(N):N===93?(t.consume(N),T):Ut(N)?(a=y,z(N)):(t.consume(N),y)}function T(N){return N===93?(t.consume(N),j):y(N)}function j(N){return N===62?L(N):N===93?(t.consume(N),j):y(N)}function _(N){return N===null||N===62?L(N):Ut(N)?(a=_,z(N)):(t.consume(N),_)}function v(N){return N===null?n(N):N===63?(t.consume(N),P):Ut(N)?(a=v,z(N)):(t.consume(N),v)}function P(N){return N===62?L(N):v(N)}function D(N){return oi(N)?(t.consume(N),$):n(N)}function $(N){return N===45||zs(N)?(t.consume(N),$):U(N)}function U(N){return Ut(N)?(a=U,z(N)):vn(N)?(t.consume(N),U):L(N)}function K(N){return N===45||zs(N)?(t.consume(N),K):N===47||N===62||Vn(N)?Y(N):n(N)}function Y(N){return N===47?(t.consume(N),L):N===58||N===95||oi(N)?(t.consume(N),G):Ut(N)?(a=Y,z(N)):vn(N)?(t.consume(N),Y):L(N)}function G(N){return N===45||N===46||N===58||N===95||zs(N)?(t.consume(N),G):X(N)}function X(N){return N===61?(t.consume(N),V):Ut(N)?(a=X,z(N)):vn(N)?(t.consume(N),X):Y(N)}function V(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),s=N,A):Ut(N)?(a=V,z(N)):vn(N)?(t.consume(N),V):(t.consume(N),x)}function A(N){return N===s?(t.consume(N),s=void 0,C):N===null?n(N):Ut(N)?(a=A,z(N)):(t.consume(N),A)}function x(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||Vn(N)?Y(N):(t.consume(N),x)}function C(N){return N===47||N===62||Vn(N)?Y(N):n(N)}function L(N){return N===62?(t.consume(N),t.exit("htmlTextData"),t.exit("htmlText"),e):n(N)}function z(N){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),R}function R(N){return vn(N)?En(t,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):I(N)}function I(N){return t.enter("htmlTextData"),a(N)}}const DC={name:"labelEnd",resolveAll:Wle,resolveTo:Hle,tokenize:Gle},Ule={tokenize:Kle},Vle={tokenize:Yle},qle={tokenize:Jle};function Wle(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&uo(t,0,t.length,n),t}function Hle(t,e){let n=t.length,r=0,s,o,a,l;for(;n--;)if(s=t[n][1],o){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(o=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const c={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[o][1].start},end:{...t[a][1].end}},f={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[a-2][1].start}};return l=[["enter",c,e],["enter",u,e]],l=Mo(l,t.slice(o+1,o+r+3)),l=Mo(l,[["enter",f,e]]),l=Mo(l,vv(e.parser.constructs.insideSpan.null,t.slice(o+r+4,a-3),e)),l=Mo(l,[["exit",f,e],t[a-2],t[a-1],["exit",u,e]]),l=Mo(l,t.slice(a+1)),l=Mo(l,[["exit",c,e]]),uo(t,o,t.length,l),t}function Gle(t,e,n){const r=this;let s=r.events.length,o,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){o=r.events[s][1];break}return l;function l(m){return o?o._inactive?p(m):(a=r.parser.defined.includes(ja(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),c):n(m)}function c(m){return m===40?t.attempt(Ule,f,a?f:p)(m):m===91?t.attempt(Vle,f,a?u:p)(m):a?f(m):p(m)}function u(m){return t.attempt(qle,f,p)(m)}function f(m){return e(m)}function p(m){return o._balanced=!0,n(m)}}function Kle(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return Vn(p)?Dm(t,o)(p):o(p)}function o(p){return p===41?f(p):f$(t,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function a(p){return Vn(p)?Dm(t,c)(p):f(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?p$(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function u(p){return Vn(p)?Dm(t,f)(p):f(p)}function f(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function Yle(t,e,n){const r=this;return s;function s(l){return h$.call(r,t,o,a,"reference","referenceMarker","referenceString")(l)}function o(l){return r.parser.defined.includes(ja(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function a(l){return n(l)}}function Jle(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),s}function s(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const Xle={name:"labelStartImage",resolveAll:DC.resolveAll,tokenize:Qle};function Qle(t,e,n){const r=this;return s;function s(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),o}function o(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const Zle={name:"labelStartLink",resolveAll:DC.resolveAll,tokenize:ece};function ece(t,e,n){const r=this;return s;function s(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const Ok={name:"lineEnding",tokenize:tce};function tce(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),En(t,e,"linePrefix")}}const R0={name:"thematicBreak",tokenize:nce};function nce(t,e,n){let r=0,s;return o;function o(u){return t.enter("thematicBreak"),a(u)}function a(u){return s=u,l(u)}function l(u){return u===s?(t.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||Ut(u))?(t.exit("thematicBreak"),e(u)):n(u)}function c(u){return u===s?(t.consume(u),r++,c):(t.exit("thematicBreakSequence"),vn(u)?En(t,l,"whitespace")(u):l(u))}}const bi={continuation:{tokenize:oce},exit:lce,name:"list",tokenize:ice},rce={partial:!0,tokenize:cce},sce={partial:!0,tokenize:ace};function ice(t,e,n){const r=this,s=r.events[r.events.length-1];let o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return l;function l(g){const w=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:L2(g)){if(r.containerState.type||(r.containerState.type=w,t.enter(w,{_container:!0})),w==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(R0,n,u)(g):u(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(g)}return n(g)}function c(g){return L2(g)&&++a<10?(t.consume(g),c):(!r.interrupt||a<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),u(g)):n(g)}function u(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(ey,r.interrupt?n:f,t.attempt(rce,m,p))}function f(g){return r.containerState.initialBlankLine=!0,o++,m(g)}function p(g){return vn(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function oce(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(ey,s,o);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,En(t,e,"listItemIndent",r.containerState.size+1)(l)}function o(l){return r.containerState.furtherBlankLines||!vn(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(sce,e,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,En(t,t.attempt(bi,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function ace(t,e,n){const r=this;return En(t,s,"listItemIndent",r.containerState.size+1);function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(o):n(o)}}function lce(t){t.exit(this.containerState.type)}function cce(t,e,n){const r=this;return En(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(o){const a=r.events[r.events.length-1];return!vn(o)&&a&&a[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const pI={name:"setextUnderline",resolveTo:uce,tokenize:dce};function uce(t,e){let n=t.length,r,s,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",o?(t.splice(s,0,["enter",a,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function dce(t,e,n){const r=this;let s;return o;function o(u){let f=r.events.length,p;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){p=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=u,a(u)):n(u)}function a(u){return t.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(t.consume(u),l):(t.exit("setextHeadingLineSequence"),vn(u)?En(t,c,"lineSuffix")(u):c(u))}function c(u){return u===null||Ut(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const fce={tokenize:hce};function hce(t){const e=this,n=t.attempt(ey,r,t.attempt(this.parser.constructs.flowInitial,s,En(t,t.attempt(this.parser.constructs.flow,s,t.attempt(xle,s)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const pce={resolveAll:g$()},mce=m$("string"),gce=m$("text");function m$(t){return{resolveAll:g$(t==="text"?yce:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],o=n.attempt(s,a,l);return a;function a(f){return u(f)?o(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return u(f)?(n.exit("data"),o(f)):(n.consume(f),c)}function u(f){if(f===null)return!0;const p=s[f];let m=-1;if(p)for(;++m<p.length;){const g=p[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function g$(t){return e;function e(n,r){let s=-1,o;for(;++s<=n.length;)o===void 0?n[s]&&n[s][1].type==="data"&&(o=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==o+2&&(n[o][1].end=n[s-1][1].end,n.splice(o+2,s-o-2),s=o+2),o=void 0);return t?t(n,r):n}}function yce(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let o=s.length,a=-1,l=0,c;for(;o--;){const u=s[o];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(u===-2)c=!0,l++;else if(u!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const u={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:r.start._bufferIndex+a,_index:r.start._index+o,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const xce={42:bi,43:bi,45:bi,48:bi,49:bi,50:bi,51:bi,52:bi,53:bi,54:bi,55:bi,56:bi,57:bi,62:l$},bce={91:Tle},vce={[-2]:Dk,[-1]:Dk,32:Dk},wce={35:_le,42:R0,45:[pI,R0],60:Ile,61:pI,95:R0,96:fI,126:fI},kce={38:u$,92:c$},Tce={[-5]:Ok,[-4]:Ok,[-3]:Ok,33:Xle,38:u$,42:F2,60:[Zae,$le],91:Zle,92:[Sle,c$],93:DC,95:F2,96:fle},Nce={null:[F2,pce]},jce={null:[42,95]},Cce={null:[]},Sce=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:jce,contentInitial:bce,disable:Cce,document:xce,flow:wce,flowInitial:vce,insideSpan:Nce,string:kce,text:Tce},Symbol.toStringTag,{value:"Module"}));function Ece(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},o=[];let a=[],l=[];const c={attempt:U(D),check:U($),consume:_,enter:v,exit:P,interrupt:U($,{interrupt:!0})},u={code:null,containerState:{},defineSkip:y,events:[],now:w,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:p};let f=e.tokenize.call(u,c);return e.resolveAll&&o.push(e),u;function p(X){return a=Mo(a,X),T(),a[a.length-1]!==null?[]:(K(e,0),u.events=vv(o,u.events,u),u.events)}function m(X,V){return Ace(g(X),V)}function g(X){return _ce(a,X)}function w(){const{_bufferIndex:X,_index:V,line:A,column:x,offset:C}=r;return{_bufferIndex:X,_index:V,line:A,column:x,offset:C}}function y(X){s[X.line]=X.column,G()}function T(){let X;for(;r._index<a.length;){const V=a[r._index];if(typeof V=="string")for(X=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===X&&r._bufferIndex<V.length;)j(V.charCodeAt(r._bufferIndex));else j(V)}}function j(X){f=f(X)}function _(X){Ut(X)?(r.line++,r.column=1,r.offset+=X===-3?2:1,G()):X!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=X}function v(X,V){const A=V||{};return A.type=X,A.start=w(),u.events.push(["enter",A,u]),l.push(A),A}function P(X){const V=l.pop();return V.end=w(),u.events.push(["exit",V,u]),V}function D(X,V){K(X,V.from)}function $(X,V){V.restore()}function U(X,V){return A;function A(x,C,L){let z,R,I,N;return Array.isArray(x)?E(x):"tokenize"in x?E([x]):F(x);function F(q){return H;function H(J){const Q=J!==null&&q[J],ne=J!==null&&q.null,se=[...Array.isArray(Q)?Q:Q?[Q]:[],...Array.isArray(ne)?ne:ne?[ne]:[]];return E(se)(J)}}function E(q){return z=q,R=0,q.length===0?L:M(q[R])}function M(q){return H;function H(J){return N=Y(),I=q,q.partial||(u.currentConstruct=q),q.name&&u.parser.constructs.disable.null.includes(q.name)?O():q.tokenize.call(V?Object.assign(Object.create(u),V):u,c,ee,O)(J)}}function ee(q){return X(I,N),C}function O(q){return N.restore(),++R<z.length?M(z[R]):L}}}function K(X,V){X.resolveAll&&!o.includes(X)&&o.push(X),X.resolve&&uo(u.events,V,u.events.length-V,X.resolve(u.events.slice(V),u)),X.resolveTo&&(u.events=X.resolveTo(u.events,u))}function Y(){const X=w(),V=u.previous,A=u.currentConstruct,x=u.events.length,C=Array.from(l);return{from:x,restore:L};function L(){r=X,u.previous=V,u.currentConstruct=A,u.events.length=x,l=C,G()}}function G(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function _ce(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,o=e.end._bufferIndex;let a;if(n===s)a=[t[n].slice(r,o)];else{if(a=t.slice(n,s),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}o>0&&a.push(t[s].slice(0,o))}return a}function Ace(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const o=t[n];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&s)continue;a=" ";break}default:a=String.fromCharCode(o)}s=o===-2,r.push(a)}return r.join("")}function Pce(t){const r={constructs:o$([Sce,...(t||{}).extensions||[]]),content:s(Hae),defined:[],document:s(Kae),flow:s(fce),lazy:{},string:s(mce),text:s(gce)};return r;function s(o){return a;function a(l){return Ece(r,o,l)}}}function Rce(t){for(;!d$(t););return t}const mI=/[\0\t\n\r]/g;function Ice(){let t=1,e="",n=!0,r;return s;function s(o,a,l){const c=[];let u,f,p,m,g;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(a||void 0).decode(o)),p=0,e="",n&&(o.charCodeAt(0)===65279&&p++,n=void 0);p<o.length;){if(mI.lastIndex=p,u=mI.exec(o),m=u&&u.index!==void 0?u.index:o.length,g=o.charCodeAt(m),!u){e=o.slice(p);break}if(g===10&&p===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<m&&(c.push(o.slice(p,m)),t+=m-p),g){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}p=m+1}return l&&(r&&c.push(-5),e&&c.push(e),c.push(null)),c}}const Mce=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Dce(t){return t.replace(Mce,Oce)}function Oce(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),o=s===120||s===88;return a$(n.slice(o?2:1),o?16:10)}return MC(n)||t}const y$={}.hasOwnProperty;function Lce(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Fce(n)(Rce(Pce(n).document().write(Ice()(t,e,!0))))}function Fce(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Pe),autolinkProtocol:Y,autolinkEmail:Y,atxHeading:o(me),blockQuote:o(ne),characterEscape:Y,characterReference:Y,codeFenced:o(se),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(se,a),codeText:o(ie,a),codeTextData:Y,data:Y,codeFlowValue:Y,definition:o(pe),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(le),hardBreakEscape:o(Ee),hardBreakTrailing:o(Ee),htmlFlow:o(te,a),htmlFlowData:Y,htmlText:o(te,a),htmlTextData:Y,image:o(Ne),label:a,link:o(Pe),listItem:o(Le),listItemValue:m,listOrdered:o(et,p),listUnordered:o(et),paragraph:o(Se),reference:M,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(me),strong:o(Te),thematicBreak:o(dt)},exit:{atxHeading:c(),atxHeadingSequence:D,autolink:c(),autolinkEmail:Q,autolinkProtocol:J,blockQuote:c(),characterEscapeValue:G,characterReferenceMarkerHexadecimal:O,characterReferenceMarkerNumeric:O,characterReferenceValue:q,characterReference:H,codeFenced:c(T),codeFencedFence:y,codeFencedFenceInfo:g,codeFencedFenceMeta:w,codeFlowValue:G,codeIndented:c(j),codeText:c(C),codeTextData:G,data:G,definition:c(),definitionDestinationString:P,definitionLabelString:_,definitionTitleString:v,emphasis:c(),hardBreakEscape:c(V),hardBreakTrailing:c(V),htmlFlow:c(A),htmlFlowData:G,htmlText:c(x),htmlTextData:G,image:c(z),label:I,labelText:R,lineEnding:X,link:c(L),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ee,resourceDestinationString:N,resourceTitleString:F,resource:E,setextHeading:c(K),setextHeadingLineSequence:U,setextHeadingText:$,strong:c(),thematicBreak:c()}};x$(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(oe){let ue={type:"root",children:[]};const ge={stack:[ue],tokenStack:[],config:e,enter:l,exit:u,buffer:a,resume:f,data:n},be=[];let ve=-1;for(;++ve<oe.length;)if(oe[ve][1].type==="listOrdered"||oe[ve][1].type==="listUnordered")if(oe[ve][0]==="enter")be.push(ve);else{const Ke=be.pop();ve=s(oe,Ke,ve)}for(ve=-1;++ve<oe.length;){const Ke=e[oe[ve][0]];y$.call(Ke,oe[ve][1].type)&&Ke[oe[ve][1].type].call(Object.assign({sliceSerialize:oe[ve][2].sliceSerialize},ge),oe[ve][1])}if(ge.tokenStack.length>0){const Ke=ge.tokenStack[ge.tokenStack.length-1];(Ke[1]||gI).call(ge,void 0,Ke[0])}for(ue.position={start:_c(oe.length>0?oe[0][1].start:{line:1,column:1,offset:0}),end:_c(oe.length>0?oe[oe.length-2][1].end:{line:1,column:1,offset:0})},ve=-1;++ve<e.transforms.length;)ue=e.transforms[ve](ue)||ue;return ue}function s(oe,ue,ge){let be=ue-1,ve=-1,Ke=!1,Me,He,ct,Je;for(;++be<=ge;){const Ye=oe[be];switch(Ye[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ye[0]==="enter"?ve++:ve--,Je=void 0;break}case"lineEndingBlank":{Ye[0]==="enter"&&(Me&&!Je&&!ve&&!ct&&(ct=be),Je=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Je=void 0}if(!ve&&Ye[0]==="enter"&&Ye[1].type==="listItemPrefix"||ve===-1&&Ye[0]==="exit"&&(Ye[1].type==="listUnordered"||Ye[1].type==="listOrdered")){if(Me){let St=be;for(He=void 0;St--;){const bt=oe[St];if(bt[1].type==="lineEnding"||bt[1].type==="lineEndingBlank"){if(bt[0]==="exit")continue;He&&(oe[He][1].type="lineEndingBlank",Ke=!0),bt[1].type="lineEnding",He=St}else if(!(bt[1].type==="linePrefix"||bt[1].type==="blockQuotePrefix"||bt[1].type==="blockQuotePrefixWhitespace"||bt[1].type==="blockQuoteMarker"||bt[1].type==="listItemIndent"))break}ct&&(!He||ct<He)&&(Me._spread=!0),Me.end=Object.assign({},He?oe[He][1].start:Ye[1].end),oe.splice(He||be,0,["exit",Me,Ye[2]]),be++,ge++}if(Ye[1].type==="listItemPrefix"){const St={type:"listItem",_spread:!1,start:Object.assign({},Ye[1].start),end:void 0};Me=St,oe.splice(be,0,["enter",St,Ye[2]]),be++,ge++,ct=void 0,Je=!0}}}return oe[ue][1]._spread=Ke,ge}function o(oe,ue){return ge;function ge(be){l.call(this,oe(be),be),ue&&ue.call(this,be)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(oe,ue,ge){this.stack[this.stack.length-1].children.push(oe),this.stack.push(oe),this.tokenStack.push([ue,ge||void 0]),oe.position={start:_c(ue.start),end:void 0}}function c(oe){return ue;function ue(ge){oe&&oe.call(this,ge),u.call(this,ge)}}function u(oe,ue){const ge=this.stack.pop(),be=this.tokenStack.pop();if(be)be[0].type!==oe.type&&(ue?ue.call(this,oe,be[0]):(be[1]||gI).call(this,oe,be[0]));else throw new Error("Cannot close `"+oe.type+"` ("+Mm({start:oe.start,end:oe.end})+"): its not open");ge.position.end=_c(oe.end)}function f(){return IC(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function m(oe){if(this.data.expectingFirstListItemValue){const ue=this.stack[this.stack.length-2];ue.start=Number.parseInt(this.sliceSerialize(oe),10),this.data.expectingFirstListItemValue=void 0}}function g(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.lang=oe}function w(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.meta=oe}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function T(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.value=oe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function j(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.value=oe.replace(/(\r?\n|\r)$/g,"")}function _(oe){const ue=this.resume(),ge=this.stack[this.stack.length-1];ge.label=ue,ge.identifier=ja(this.sliceSerialize(oe)).toLowerCase()}function v(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.title=oe}function P(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.url=oe}function D(oe){const ue=this.stack[this.stack.length-1];if(!ue.depth){const ge=this.sliceSerialize(oe).length;ue.depth=ge}}function $(){this.data.setextHeadingSlurpLineEnding=!0}function U(oe){const ue=this.stack[this.stack.length-1];ue.depth=this.sliceSerialize(oe).codePointAt(0)===61?1:2}function K(){this.data.setextHeadingSlurpLineEnding=void 0}function Y(oe){const ge=this.stack[this.stack.length-1].children;let be=ge[ge.length-1];(!be||be.type!=="text")&&(be=ze(),be.position={start:_c(oe.start),end:void 0},ge.push(be)),this.stack.push(be)}function G(oe){const ue=this.stack.pop();ue.value+=this.sliceSerialize(oe),ue.position.end=_c(oe.end)}function X(oe){const ue=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ge=ue.children[ue.children.length-1];ge.position.end=_c(oe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ue.type)&&(Y.call(this,oe),G.call(this,oe))}function V(){this.data.atHardBreak=!0}function A(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.value=oe}function x(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.value=oe}function C(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.value=oe}function L(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=ue,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function z(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=ue,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function R(oe){const ue=this.sliceSerialize(oe),ge=this.stack[this.stack.length-2];ge.label=Dce(ue),ge.identifier=ja(ue).toLowerCase()}function I(){const oe=this.stack[this.stack.length-1],ue=this.resume(),ge=this.stack[this.stack.length-1];if(this.data.inReference=!0,ge.type==="link"){const be=oe.children;ge.children=be}else ge.alt=ue}function N(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.url=oe}function F(){const oe=this.resume(),ue=this.stack[this.stack.length-1];ue.title=oe}function E(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function ee(oe){const ue=this.resume(),ge=this.stack[this.stack.length-1];ge.label=ue,ge.identifier=ja(this.sliceSerialize(oe)).toLowerCase(),this.data.referenceType="full"}function O(oe){this.data.characterReferenceType=oe.type}function q(oe){const ue=this.sliceSerialize(oe),ge=this.data.characterReferenceType;let be;ge?(be=a$(ue,ge==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):be=MC(ue);const ve=this.stack[this.stack.length-1];ve.value+=be}function H(oe){const ue=this.stack.pop();ue.position.end=_c(oe.end)}function J(oe){G.call(this,oe);const ue=this.stack[this.stack.length-1];ue.url=this.sliceSerialize(oe)}function Q(oe){G.call(this,oe);const ue=this.stack[this.stack.length-1];ue.url="mailto:"+this.sliceSerialize(oe)}function ne(){return{type:"blockquote",children:[]}}function se(){return{type:"code",lang:null,meta:null,value:""}}function ie(){return{type:"inlineCode",value:""}}function pe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function le(){return{type:"emphasis",children:[]}}function me(){return{type:"heading",depth:0,children:[]}}function Ee(){return{type:"break"}}function te(){return{type:"html",value:""}}function Ne(){return{type:"image",title:null,url:"",alt:null}}function Pe(){return{type:"link",title:null,url:"",children:[]}}function et(oe){return{type:"list",ordered:oe.type==="listOrdered",start:null,spread:oe._spread,children:[]}}function Le(oe){return{type:"listItem",spread:oe._spread,checked:null,children:[]}}function Se(){return{type:"paragraph",children:[]}}function Te(){return{type:"strong",children:[]}}function ze(){return{type:"text",value:""}}function dt(){return{type:"thematicBreak"}}}function _c(t){return{line:t.line,column:t.column,offset:t.offset}}function x$(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?x$(t,r):zce(t,r)}}function zce(t,e){let n;for(n in e)if(y$.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function gI(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Mm({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Mm({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Mm({start:e.start,end:e.end})+") is still open")}function $ce(t){const e=this;e.parser=n;function n(r){return Lce(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Bce(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function Uce(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Vce(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function qce(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Wce(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Hce(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Jh(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let a,l=t.footnoteCounts.get(r);l===void 0?(l=0,t.footnoteOrder.push(r),a=t.footnoteOrder.length):a=o+1,l+=1,t.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,u),t.applyData(e,u)}function Gce(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Kce(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function b$(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),o=s[0];o&&o.type==="text"?o.value="["+o.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function Yce(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return b$(t,e);const s={src:Jh(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,o),t.applyData(e,o)}function Jce(t,e){const n={src:Jh(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function Xce(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function Qce(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return b$(t,e);const s={href:Jh(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function Zce(t,e){const n={href:Jh(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function eue(t,e,n){const r=t.all(e),s=n?tue(n):v$(e),o={},a=[];if(typeof e.checked=="boolean"){const f=r[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const f=r[l];(s||l!==0||f.type!=="element"||f.tagName!=="p")&&a.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!s?a.push(...f.children):a.push(f)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:o,children:a};return t.patch(e,u),t.applyData(e,u)}function tue(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=v$(n[r])}return e}function v$(t){const e=t.spread;return e??t.children.length>1}function nue(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function rue(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function sue(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function iue(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oue(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=_C(e.children[1]),c=Zz(e.children[e.children.length-1]);l&&c&&(a.position={start:l,end:c}),s.push(a)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,o),t.applyData(e,o)}function aue(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:e.children.length;let c=-1;const u=[];for(;++c<l;){const p=e.children[c],m={},g=a?a[c]:void 0;g&&(m.align=g);let w={type:"element",tagName:o,properties:m,children:[]};p&&(w.children=t.all(p),t.patch(p,w),w=t.applyData(p,w)),u.push(w)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,f),t.applyData(e,f)}function lue(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const yI=9,xI=32;function cue(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const o=[];for(;r;)o.push(bI(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return o.push(bI(e.slice(s),s>0,!1)),o.join("")}function bI(t,e,n){let r=0,s=t.length;if(e){let o=t.codePointAt(r);for(;o===yI||o===xI;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(s-1);for(;o===yI||o===xI;)s--,o=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function uue(t,e){const n={type:"text",value:cue(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function due(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const fue={blockquote:Bce,break:Uce,code:Vce,delete:qce,emphasis:Wce,footnoteReference:Hce,heading:Gce,html:Kce,imageReference:Yce,image:Jce,inlineCode:Xce,linkReference:Qce,link:Zce,listItem:eue,list:nue,paragraph:rue,root:sue,strong:iue,table:oue,tableCell:lue,tableRow:aue,text:uue,thematicBreak:due,toml:Vx,yaml:Vx,definition:Vx,footnoteDefinition:Vx};function Vx(){}const w$=-1,wv=0,Om=1,bb=2,OC=3,LC=4,FC=5,zC=6,k$=7,T$=8,vI=typeof self=="object"?self:globalThis,hue=(t,e)=>{const n=(s,o)=>(t.set(o,s),s),r=s=>{if(t.has(s))return t.get(s);const[o,a]=e[s];switch(o){case wv:case w$:return n(a,s);case Om:{const l=n([],s);for(const c of a)l.push(r(c));return l}case bb:{const l=n({},s);for(const[c,u]of a)l[r(c)]=r(u);return l}case OC:return n(new Date(a),s);case LC:{const{source:l,flags:c}=a;return n(new RegExp(l,c),s)}case FC:{const l=n(new Map,s);for(const[c,u]of a)l.set(r(c),r(u));return l}case zC:{const l=n(new Set,s);for(const c of a)l.add(r(c));return l}case k$:{const{name:l,message:c}=a;return n(new vI[l](c),s)}case T$:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new vI[o](a),s)};return r},wI=t=>hue(new Map,t)(0),jf="",{toString:pue}={},{keys:mue}=Object,Hp=t=>{const e=typeof t;if(e!=="object"||!t)return[wv,e];const n=pue.call(t).slice(8,-1);switch(n){case"Array":return[Om,jf];case"Object":return[bb,jf];case"Date":return[OC,jf];case"RegExp":return[LC,jf];case"Map":return[FC,jf];case"Set":return[zC,jf];case"DataView":return[Om,n]}return n.includes("Array")?[Om,n]:n.includes("Error")?[k$,n]:[bb,n]},qx=([t,e])=>t===wv&&(e==="function"||e==="symbol"),gue=(t,e,n,r)=>{const s=(a,l)=>{const c=r.push(a)-1;return n.set(l,c),c},o=a=>{if(n.has(a))return n.get(a);let[l,c]=Hp(a);switch(l){case wv:{let f=a;switch(c){case"bigint":l=T$,f=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return s([w$],a)}return s([l,f],a)}case Om:{if(c){let m=a;return c==="DataView"?m=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(a)),s([c,[...m]],a)}const f=[],p=s([l,f],a);for(const m of a)f.push(o(m));return p}case bb:{if(c)switch(c){case"BigInt":return s([c,a.toString()],a);case"Boolean":case"Number":case"String":return s([c,a.valueOf()],a)}if(e&&"toJSON"in a)return o(a.toJSON());const f=[],p=s([l,f],a);for(const m of mue(a))(t||!qx(Hp(a[m])))&&f.push([o(m),o(a[m])]);return p}case OC:return s([l,a.toISOString()],a);case LC:{const{source:f,flags:p}=a;return s([l,{source:f,flags:p}],a)}case FC:{const f=[],p=s([l,f],a);for(const[m,g]of a)(t||!(qx(Hp(m))||qx(Hp(g))))&&f.push([o(m),o(g)]);return p}case zC:{const f=[],p=s([l,f],a);for(const m of a)(t||!qx(Hp(m)))&&f.push(o(m));return p}}const{message:u}=a;return s([l,{name:c,message:u}],a)};return o},kI=(t,{json:e,lossy:n}={})=>{const r=[];return gue(!(e||n),!!e,new Map,r)(t),r},vb=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?wI(kI(t,e)):structuredClone(t):(t,e)=>wI(kI(t,e));function yue(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function xue(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function bue(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||yue,r=t.options.footnoteBackLabel||xue,s=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[c]);if(!u)continue;const f=t.all(u),p=String(u.identifier).toUpperCase(),m=Jh(p.toLowerCase());let g=0;const w=[],y=t.footnoteCounts.get(p);for(;y!==void 0&&++g<=y;){w.length>0&&w.push({type:"text",value:" "});let _=typeof n=="string"?n:n(c,g);typeof _=="string"&&(_={type:"text",value:_}),w.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,g),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const T=f[f.length-1];if(T&&T.type==="element"&&T.tagName==="p"){const _=T.children[T.children.length-1];_&&_.type==="text"?_.value+=" ":T.children.push({type:"text",value:" "}),T.children.push(...w)}else f.push(...w);const j={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(f,!0)};t.patch(u,j),l.push(j)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...vb(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const kv=function(t){if(t==null)return Tue;if(typeof t=="function")return Tv(t);if(typeof t=="object")return Array.isArray(t)?vue(t):wue(t);if(typeof t=="string")return kue(t);throw new Error("Expected function, string, or object as test")};function vue(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=kv(t[n]);return Tv(r);function r(...s){let o=-1;for(;++o<e.length;)if(e[o].apply(this,s))return!0;return!1}}function wue(t){const e=t;return Tv(n);function n(r){const s=r;let o;for(o in t)if(s[o]!==e[o])return!1;return!0}}function kue(t){return Tv(e);function e(n){return n&&n.type===t}}function Tv(t){return e;function e(n,r,s){return!!(Nue(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function Tue(){return!0}function Nue(t){return t!==null&&typeof t=="object"&&"type"in t}const N$=[],jue=!0,z2=!1,Cue="skip";function j$(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const o=kv(s),a=r?-1:1;l(t,void 0,[])();function l(c,u,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=N$,w,y,T;if((!e||o(c,u,f[f.length-1]||void 0))&&(g=Sue(n(c,f)),g[0]===z2))return g;if("children"in c&&c.children){const j=c;if(j.children&&g[0]!==Cue)for(y=(r?j.children.length:-1)+a,T=f.concat(j);y>-1&&y<j.children.length;){const _=j.children[y];if(w=l(_,y,T)(),w[0]===z2)return w;y=typeof w[1]=="number"?w[1]:y+a}}return g}}}function Sue(t){return Array.isArray(t)?t:typeof t=="number"?[jue,t]:t==null?N$:[t]}function $C(t,e,n,r){let s,o,a;typeof e=="function"&&typeof n!="function"?(o=void 0,a=e,s=n):(o=e,a=n,s=r),j$(t,o,l,s);function l(c,u){const f=u[u.length-1],p=f?f.children.indexOf(c):void 0;return a(c,p,f)}}const $2={}.hasOwnProperty,Eue={};function _ue(t,e){const n=e||Eue,r=new Map,s=new Map,o=new Map,a={...fue,...n.handlers},l={all:u,applyData:Pue,definitionById:r,footnoteById:s,footnoteCounts:o,footnoteOrder:[],handlers:a,one:c,options:n,patch:Aue,wrap:Iue};return $C(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?r:s,m=String(f.identifier).toUpperCase();p.has(m)||p.set(m,f)}}),l;function c(f,p){const m=f.type,g=l.handlers[m];if($2.call(l.handlers,m)&&g)return g(l,f,p);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in f){const{children:y,...T}=f,j=vb(T);return j.children=l.all(f),j}return vb(f)}return(l.options.unknownHandler||Rue)(l,f,p)}function u(f){const p=[];if("children"in f){const m=f.children;let g=-1;for(;++g<m.length;){const w=l.one(m[g],f);if(w){if(g&&m[g-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=TI(w.value)),!Array.isArray(w)&&w.type==="element")){const y=w.children[0];y&&y.type==="text"&&(y.value=TI(y.value))}Array.isArray(w)?p.push(...w):p.push(w)}}}return p}}function Aue(t,e){t.position&&(e.position=xae(t))}function Pue(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&o&&Object.assign(n.properties,vb(o)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function Rue(t,e){const n=e.data||{},r="value"in e&&!($2.call(n,"hProperties")||$2.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Iue(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function TI(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function NI(t,e){const n=_ue(t,e),r=n.one(t,void 0),s=bue(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&o.children.push({type:"text",value:`
`},s),o}function Mue(t,e){return t&&"run"in t?async function(n,r){const s=NI(n,{file:r,...e});await t.run(s,r)}:function(n,r){return NI(n,{file:r,...t||e})}}function jI(t){if(t)throw t}var Lk,CI;function Due(){if(CI)return Lk;CI=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},o=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var f=t.call(u,"constructor"),p=u.constructor&&u.constructor.prototype&&t.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!f&&!p)return!1;var m;for(m in u);return typeof m>"u"||t.call(u,m)},a=function(u,f){n&&f.name==="__proto__"?n(u,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):u[f.name]=f.newValue},l=function(u,f){if(f==="__proto__")if(t.call(u,f)){if(r)return r(u,f).value}else return;return u[f]};return Lk=function c(){var u,f,p,m,g,w,y=arguments[0],T=1,j=arguments.length,_=!1;for(typeof y=="boolean"&&(_=y,y=arguments[1]||{},T=2),(y==null||typeof y!="object"&&typeof y!="function")&&(y={});T<j;++T)if(u=arguments[T],u!=null)for(f in u)p=l(y,f),m=l(u,f),y!==m&&(_&&m&&(o(m)||(g=s(m)))?(g?(g=!1,w=p&&s(p)?p:[]):w=p&&o(p)?p:{},a(y,{name:f,newValue:c(_,w,m)})):typeof m<"u"&&a(y,{name:f,newValue:m}));return y},Lk}var Oue=Due();const Fk=rc(Oue);function B2(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Lue(){const t=[],e={run:n,use:r};return e;function n(...s){let o=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...s);function l(c,...u){const f=t[++o];let p=-1;if(c){a(c);return}for(;++p<s.length;)(u[p]===null||u[p]===void 0)&&(u[p]=s[p]);s=u,f?Fue(f,l)(...u):a(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function Fue(t,e){let n;return r;function r(...a){const l=t.length>a.length;let c;l&&a.push(s);try{c=t.apply(this,a)}catch(u){const f=u;if(l&&n)throw f;return s(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(o,s):c instanceof Error?s(c):o(c))}function s(a,...l){n||(n=!0,e(a,...l))}function o(a){s(null,a)}}const Wa={basename:zue,dirname:$ue,extname:Bue,join:Uue,sep:"/"};function zue(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');ty(t);let n=0,r=-1,s=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else r<0&&(o=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,l=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else a<0&&(o=!0,a=s+1),l>-1&&(t.codePointAt(s)===e.codePointAt(l--)?l<0&&(r=s):(l=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function $ue(t){if(ty(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Bue(t){ty(t);let e=t.length,n=-1,r=0,s=-1,o=0,a;for(;e--;){const l=t.codePointAt(e);if(l===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),l===46?s<0?s=e:o!==1&&(o=1):s>-1&&(o=-1)}return s<0||n<0||o===0||o===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function Uue(...t){let e=-1,n;for(;++e<t.length;)ty(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Vue(n)}function Vue(t){ty(t);const e=t.codePointAt(0)===47;let n=que(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function que(t,e){let n="",r=0,s=-1,o=0,a=-1,l,c;for(;++a<=t.length;){if(a<t.length)l=t.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(s===a-1||o===1))if(s!==a-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=a,o=0;continue}}else if(n.length>0){n="",r=0,s=a,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,a):n=t.slice(s+1,a),r=a-s-1;s=a,o=0}else l===46&&o>-1?o++:o=-1}return n}function ty(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Wue={cwd:Hue};function Hue(){return"/"}function U2(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Gue(t){if(typeof t=="string")t=new URL(t);else if(!U2(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Kue(t)}function Kue(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const zk=["history","path","basename","stem","extname","dirname"];class C${constructor(e){let n;e?U2(e)?n={path:e}:typeof e=="string"||Yue(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Wue.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<zk.length;){const o=zk[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let s;for(s in n)zk.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Wa.basename(this.path):void 0}set basename(e){Bk(e,"basename"),$k(e,"basename"),this.path=Wa.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Wa.dirname(this.path):void 0}set dirname(e){SI(this.basename,"dirname"),this.path=Wa.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Wa.extname(this.path):void 0}set extname(e){if($k(e,"extname"),SI(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Wa.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){U2(e)&&(e=Gue(e)),Bk(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Wa.basename(this.path,this.extname):void 0}set stem(e){Bk(e,"stem"),$k(e,"stem"),this.path=Wa.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new qs(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function $k(t,e){if(t&&t.includes(Wa.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Wa.sep+"`")}function Bk(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function SI(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Yue(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Jue=function(t){const r=this.constructor.prototype,s=r[t],o=function(){return s.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},Xue={}.hasOwnProperty;class BC extends Jue{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Lue()}copy(){const e=new BC;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Fk(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(qk("data",this.frozen),this.namespace[e]=n,this):Xue.call(this.namespace,e)&&this.namespace[e]||void 0:e?(qk("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Wx(e),r=this.parser||this.Parser;return Uk("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Uk("process",this.parser||this.Parser),Vk("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(o,a){const l=Wx(e),c=r.parse(l);r.run(c,l,function(f,p,m){if(f||!p||!m)return u(f);const g=p,w=r.stringify(g,m);ede(w)?m.value=w:m.result=w,u(f,m)});function u(f,p){f||!p?a(f):o?o(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Uk("processSync",this.parser||this.Parser),Vk("processSync",this.compiler||this.Compiler),this.process(e,s),_I("processSync","process",n),r;function s(o,a){n=!0,jI(o),r=a}}run(e,n,r){EI(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(a,l){const c=Wx(n);s.run(e,c,u);function u(f,p,m){const g=p||e;f?l(f):a?a(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,s;return this.run(e,n,o),_I("runSync","run",r),s;function o(a,l){jI(a),s=l,r=!0}}stringify(e,n){this.freeze();const r=Wx(n),s=this.compiler||this.Compiler;return Vk("stringify",s),EI(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(qk("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...p]=u;c(f,p)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Fk(!0,s.settings,u.settings))}function l(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const p=u[f];o(p)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let p=-1,m=-1;for(;++p<r.length;)if(r[p][0]===u){m=p;break}if(m===-1)r.push([u,...f]);else if(f.length>0){let[g,...w]=f;const y=r[m][1];B2(y)&&B2(g)&&(g=Fk(!0,y,g)),r[m]=[u,g,...w]}}}}const Que=new BC().freeze();function Uk(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Vk(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function qk(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function EI(t){if(!B2(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function _I(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Wx(t){return Zue(t)?t:new C$(t)}function Zue(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function ede(t){return typeof t=="string"||tde(t)}function tde(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const nde="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",AI=[],PI={allowDangerousHtml:!0},rde=/^(https?|ircs?|mailto|xmpp)$/i,sde=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ide(t){const e=ode(t),n=ade(t);return lde(e.runSync(e.parse(n),n),t)}function ode(t){const e=t.rehypePlugins||AI,n=t.remarkPlugins||AI,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...PI}:PI;return Que().use($ce).use(n).use(Mue,r).use(e)}function ade(t){const e=t.children||"",n=new C$;return typeof e=="string"&&(n.value=e),n}function lde(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,o=e.disallowedElements,a=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||cde;for(const f of sde)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+nde+f.id,void 0);return $C(t,u),Tae(t,{Fragment:i.Fragment,components:s,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(f,p,m){if(f.type==="raw"&&m&&typeof p=="number")return a?m.children.splice(p,1):m.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let g;for(g in Mk)if(Object.hasOwn(Mk,g)&&Object.hasOwn(f.properties,g)){const w=f.properties[g],y=Mk[g];(y===null||y.includes(f.tagName))&&(f.properties[g]=c(String(w||""),g,f))}}if(f.type==="element"){let g=n?!n.includes(f.tagName):o?o.includes(f.tagName):!1;if(!g&&r&&typeof p=="number"&&(g=!r(f,p,m)),g&&m&&typeof p=="number")return l&&f.children?m.children.splice(p,1,...f.children):m.children.splice(p,1),p}}}function cde(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||rde.test(t.slice(0,e))?t:""}function RI(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function ude(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function dde(t,e,n){const s=kv((n||{}).ignore||[]),o=fde(e);let a=-1;for(;++a<o.length;)j$(t,"text",l);function l(u,f){let p=-1,m;for(;++p<f.length;){const g=f[p],w=m?m.children:void 0;if(s(g,w?w.indexOf(g):void 0,m))return;m=g}if(m)return c(u,f)}function c(u,f){const p=f[f.length-1],m=o[a][0],g=o[a][1];let w=0;const T=p.children.indexOf(u);let j=!1,_=[];m.lastIndex=0;let v=m.exec(u.value);for(;v;){const P=v.index,D={index:v.index,input:v.input,stack:[...f,u]};let $=g(...v,D);if(typeof $=="string"&&($=$.length>0?{type:"text",value:$}:void 0),$===!1?m.lastIndex=P+1:(w!==P&&_.push({type:"text",value:u.value.slice(w,P)}),Array.isArray($)?_.push(...$):$&&_.push($),w=P+v[0].length,j=!0),!m.global)break;v=m.exec(u.value)}return j?(w<u.value.length&&_.push({type:"text",value:u.value.slice(w)}),p.children.splice(T,1,..._)):_=[u],T+_.length}}function fde(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([hde(s[0]),pde(s[1])])}return e}function hde(t){return typeof t=="string"?new RegExp(ude(t),"g"):t}function pde(t){return typeof t=="function"?t:function(){return t}}const Wk="phrasing",Hk=["autolink","link","image","label"];function mde(){return{transforms:[kde],enter:{literalAutolink:yde,literalAutolinkEmail:Gk,literalAutolinkHttp:Gk,literalAutolinkWww:Gk},exit:{literalAutolink:wde,literalAutolinkEmail:vde,literalAutolinkHttp:xde,literalAutolinkWww:bde}}}function gde(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Wk,notInConstruct:Hk},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Wk,notInConstruct:Hk},{character:":",before:"[ps]",after:"\\/",inConstruct:Wk,notInConstruct:Hk}]}}function yde(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Gk(t){this.config.enter.autolinkProtocol.call(this,t)}function xde(t){this.config.exit.autolinkProtocol.call(this,t)}function bde(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function vde(t){this.config.exit.autolinkEmail.call(this,t)}function wde(t){this.exit(t)}function kde(t){dde(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Tde],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Nde]],{ignore:["link","linkReference"]})}function Tde(t,e,n,r,s){let o="";if(!S$(s)||(/^w/i.test(e)&&(n=e+n,e="",o="http://"),!jde(n)))return!1;const a=Cde(n+r);if(!a[0])return!1;const l={type:"link",title:null,url:o+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function Nde(t,e,n,r){return!S$(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function jde(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Cde(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=RI(t,"(");let o=RI(t,")");for(;r!==-1&&s>o;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[t,n]}function S$(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Dd(n)||bv(n))&&(!e||n!==47)}E$.peek=Dde;function Sde(){this.buffer()}function Ede(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function _de(){this.buffer()}function Ade(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Pde(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ja(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Rde(t){this.exit(t)}function Ide(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ja(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Mde(t){this.exit(t)}function Dde(){return"["}function E$(t,e,n,r){const s=n.createTracker(r);let o=s.move("[^");const a=n.enter("footnoteReference"),l=n.enter("reference");return o+=s.move(n.safe(n.associationId(t),{after:"]",before:o})),l(),a(),o+=s.move("]"),o}function Ode(){return{enter:{gfmFootnoteCallString:Sde,gfmFootnoteCall:Ede,gfmFootnoteDefinitionLabelString:_de,gfmFootnoteDefinition:Ade},exit:{gfmFootnoteCallString:Pde,gfmFootnoteCall:Rde,gfmFootnoteDefinitionLabelString:Ide,gfmFootnoteDefinition:Mde}}}function Lde(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:E$},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,o,a){const l=o.createTracker(a);let c=l.move("[^");const u=o.enter("footnoteDefinition"),f=o.enter("label");return c+=l.move(o.safe(o.associationId(r),{before:c,after:"]"})),f(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+o.indentLines(o.containerFlow(r,l.current()),e?_$:Fde))),u(),c}}function Fde(t,e,n){return e===0?t:_$(t,e,n)}function _$(t,e,n){return(n?"":"    ")+t}const zde=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];A$.peek=qde;function $de(){return{canContainEols:["delete"],enter:{strikethrough:Ude},exit:{strikethrough:Vde}}}function Bde(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:zde}],handlers:{delete:A$}}}function Ude(t){this.enter({type:"delete",children:[]},t)}function Vde(t){this.exit(t)}function A$(t,e,n,r){const s=n.createTracker(r),o=n.enter("strikethrough");let a=s.move("~~");return a+=n.containerPhrasing(t,{...s.current(),before:a,after:"~"}),a+=s.move("~~"),o(),a}function qde(){return"~"}function Wde(t){return t.length}function Hde(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||Wde,o=[],a=[],l=[],c=[];let u=0,f=-1;for(;++f<t.length;){const y=[],T=[];let j=-1;for(t[f].length>u&&(u=t[f].length);++j<t[f].length;){const _=Gde(t[f][j]);if(n.alignDelimiters!==!1){const v=s(_);T[j]=v,(c[j]===void 0||v>c[j])&&(c[j]=v)}y.push(_)}a[f]=y,l[f]=T}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<u;)o[p]=II(r[p]);else{const y=II(r);for(;++p<u;)o[p]=y}p=-1;const m=[],g=[];for(;++p<u;){const y=o[p];let T="",j="";y===99?(T=":",j=":"):y===108?T=":":y===114&&(j=":");let _=n.alignDelimiters===!1?1:Math.max(1,c[p]-T.length-j.length);const v=T+"-".repeat(_)+j;n.alignDelimiters!==!1&&(_=T.length+_+j.length,_>c[p]&&(c[p]=_),g[p]=_),m[p]=v}a.splice(1,0,m),l.splice(1,0,g),f=-1;const w=[];for(;++f<a.length;){const y=a[f],T=l[f];p=-1;const j=[];for(;++p<u;){const _=y[p]||"";let v="",P="";if(n.alignDelimiters!==!1){const D=c[p]-(T[p]||0),$=o[p];$===114?v=" ".repeat(D):$===99?D%2?(v=" ".repeat(D/2+.5),P=" ".repeat(D/2-.5)):(v=" ".repeat(D/2),P=v):P=" ".repeat(D)}n.delimiterStart!==!1&&!p&&j.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&_==="")&&(n.delimiterStart!==!1||p)&&j.push(" "),n.alignDelimiters!==!1&&j.push(v),j.push(_),n.alignDelimiters!==!1&&j.push(P),n.padding!==!1&&j.push(" "),(n.delimiterEnd!==!1||p!==u-1)&&j.push("|")}w.push(n.delimiterEnd===!1?j.join("").replace(/ +$/,""):j.join(""))}return w.join(`
`)}function Gde(t){return t==null?"":String(t)}function II(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Kde(t,e,n,r){const s=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const a=n.indentLines(n.containerFlow(t,o.current()),Yde);return s(),a}function Yde(t,e,n){return">"+(n?"":" ")+t}function Jde(t,e){return MI(t,e.inConstruct,!0)&&!MI(t,e.notInConstruct,!1)}function MI(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function DI(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&Jde(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Xde(t,e){const n=String(t);let r=n.indexOf(e),s=r,o=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++o>a&&(a=o):o=1,s=r+e.length,r=n.indexOf(e,s);return a}function Qde(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Zde(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function efe(t,e,n,r){const s=Zde(n),o=t.value||"",a=s==="`"?"GraveAccent":"Tilde";if(Qde(t,n)){const p=n.enter("codeIndented"),m=n.indentLines(o,tfe);return p(),m}const l=n.createTracker(r),c=s.repeat(Math.max(Xde(o,s)+1,3)),u=n.enter("codeFenced");let f=l.move(c);if(t.lang){const p=n.enter(`codeFencedLang${a}`);f+=l.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...l.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${a}`);f+=l.move(" "),f+=l.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...l.current()})),p()}return f+=l.move(`
`),o&&(f+=l.move(o+`
`)),f+=l.move(c),u(),f}function tfe(t,e,n){return(n?"":"    ")+t}function UC(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function nfe(t,e,n,r){const s=UC(n),o=s==='"'?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(t),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(t.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${o}`),u+=c.move(" "+s),u+=c.move(n.safe(t.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),a(),u}function rfe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Ng(t){return"&#x"+t.toString(16).toUpperCase()+";"}function wb(t,e,n){const r=Ph(t),s=Ph(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}P$.peek=sfe;function P$(t,e,n,r){const s=rfe(n),o=n.enter("emphasis"),a=n.createTracker(r),l=a.move(s);let c=a.move(n.containerPhrasing(t,{after:s,before:l,...a.current()}));const u=c.charCodeAt(0),f=wb(r.before.charCodeAt(r.before.length-1),u,s);f.inside&&(c=Ng(u)+c.slice(1));const p=c.charCodeAt(c.length-1),m=wb(r.after.charCodeAt(0),p,s);m.inside&&(c=c.slice(0,-1)+Ng(p));const g=a.move(s);return o(),n.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},l+c+g}function sfe(t,e,n){return n.options.emphasis||"*"}function ife(t,e){let n=!1;return $C(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,z2}),!!((!t.depth||t.depth<3)&&IC(t)&&(e.options.setext||n))}function ofe(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),o=n.createTracker(r);if(ife(t,n)){const f=n.enter("headingSetext"),p=n.enter("phrasing"),m=n.containerPhrasing(t,{...o.current(),before:`
`,after:`
`});return p(),f(),m+`
`+(s===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const a="#".repeat(s),l=n.enter("headingAtx"),c=n.enter("phrasing");o.move(a+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(u)&&(u=Ng(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),c(),l(),u}R$.peek=afe;function R$(t){return t.value||""}function afe(){return"<"}I$.peek=lfe;function I$(t,e,n,r){const s=UC(n),o=s==='"'?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(t.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(t.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(t.url,{before:u,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${o}`),u+=c.move(" "+s),u+=c.move(n.safe(t.title,{before:u,after:s,...c.current()})),u+=c.move(s),l()),u+=c.move(")"),a(),u}function lfe(){return"!"}M$.peek=cfe;function M$(t,e,n,r){const s=t.referenceType,o=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();const f=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return a(),n.stack=f,o(),s==="full"||!u||u!==p?c+=l.move(p+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function cfe(){return"!"}D$.peek=ufe;function D$(t,e,n){let r=t.value||"",s="`",o=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const a=n.unsafe[o],l=n.compilePattern(a);let c;if(a.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return s+r+s}function ufe(){return"`"}function O$(t,e){const n=IC(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}L$.peek=dfe;function L$(t,e,n,r){const s=UC(n),o=s==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let l,c;if(O$(t,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let p=a.move("<");return p+=a.move(n.containerPhrasing(t,{before:p,after:">",...a.current()})),p+=a.move(">"),l(),n.stack=f,p}l=n.enter("link"),c=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(t,{before:u,after:"](",...a.current()})),u+=a.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(t.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(c=n.enter("destinationRaw"),u+=a.move(n.safe(t.url,{before:u,after:t.title?" ":")",...a.current()}))),c(),t.title&&(c=n.enter(`title${o}`),u+=a.move(" "+s),u+=a.move(n.safe(t.title,{before:u,after:s,...a.current()})),u+=a.move(s),c()),u+=a.move(")"),l(),u}function dfe(t,e,n){return O$(t,n)?"<":"["}F$.peek=ffe;function F$(t,e,n,r){const s=t.referenceType,o=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),a();const f=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return a(),n.stack=f,o(),s==="full"||!u||u!==p?c+=l.move(p+"]"):s==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function ffe(){return"["}function VC(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function hfe(t){const e=VC(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function pfe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function z$(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function mfe(t,e,n,r){const s=n.enter("list"),o=n.bulletCurrent;let a=t.ordered?pfe(n):VC(n);const l=t.ordered?a==="."?")":".":hfe(n);let c=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),z$(n)===a&&f){let p=-1;for(;++p<t.children.length;){const m=t.children[p];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=l),n.bulletCurrent=a;const u=n.containerFlow(t,r);return n.bulletLastUsed=a,n.bulletCurrent=o,s(),u}function gfe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function yfe(t,e,n,r){const s=gfe(n);let o=n.bulletCurrent||VC(n);e&&e.type==="list"&&e.ordered&&(o=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+o);let a=o.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const l=n.createTracker(r);l.move(o+" ".repeat(a-o.length)),l.shift(a);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,l.current()),f);return c(),u;function f(p,m,g){return m?(g?"":" ".repeat(a))+p:(g?o:o+" ".repeat(a-o.length))+p}}function xfe(t,e,n,r){const s=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(t,r);return o(),s(),a}const bfe=kv(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function vfe(t,e,n,r){return(t.children.some(function(a){return bfe(a)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function wfe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}$$.peek=kfe;function $$(t,e,n,r){const s=wfe(n),o=n.enter("strong"),a=n.createTracker(r),l=a.move(s+s);let c=a.move(n.containerPhrasing(t,{after:s,before:l,...a.current()}));const u=c.charCodeAt(0),f=wb(r.before.charCodeAt(r.before.length-1),u,s);f.inside&&(c=Ng(u)+c.slice(1));const p=c.charCodeAt(c.length-1),m=wb(r.after.charCodeAt(0),p,s);m.inside&&(c=c.slice(0,-1)+Ng(p));const g=a.move(s+s);return o(),n.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},l+c+g}function kfe(t,e,n){return n.options.strong||"*"}function Tfe(t,e,n,r){return n.safe(t.value,r)}function Nfe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function jfe(t,e,n){const r=(z$(n)+(n.options.ruleSpaces?" ":"")).repeat(Nfe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const B$={blockquote:Kde,break:DI,code:efe,definition:nfe,emphasis:P$,hardBreak:DI,heading:ofe,html:R$,image:I$,imageReference:M$,inlineCode:D$,link:L$,linkReference:F$,list:mfe,listItem:yfe,paragraph:xfe,root:vfe,strong:$$,text:Tfe,thematicBreak:jfe};function Cfe(){return{enter:{table:Sfe,tableData:OI,tableHeader:OI,tableRow:_fe},exit:{codeText:Afe,table:Efe,tableData:Kk,tableHeader:Kk,tableRow:Kk}}}function Sfe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Efe(t){this.exit(t),this.data.inTable=void 0}function _fe(t){this.enter({type:"tableRow",children:[]},t)}function Kk(t){this.exit(t)}function OI(t){this.enter({type:"tableCell",children:[]},t)}function Afe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Pfe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Pfe(t,e){return e==="|"?e:t}function Rfe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:a,tableCell:c,tableRow:l}};function a(g,w,y,T){return u(f(g,y,T),g.align)}function l(g,w,y,T){const j=p(g,y,T),_=u([j]);return _.slice(0,_.indexOf(`
`))}function c(g,w,y,T){const j=y.enter("tableCell"),_=y.enter("phrasing"),v=y.containerPhrasing(g,{...T,before:o,after:o});return _(),j(),v}function u(g,w){return Hde(g,{align:w,alignDelimiters:r,padding:n,stringLength:s})}function f(g,w,y){const T=g.children;let j=-1;const _=[],v=w.enter("table");for(;++j<T.length;)_[j]=p(T[j],w,y);return v(),_}function p(g,w,y){const T=g.children;let j=-1;const _=[],v=w.enter("tableRow");for(;++j<T.length;)_[j]=c(T[j],g,w,y);return v(),_}function m(g,w,y){let T=B$.inlineCode(g,w,y);return y.stack.includes("tableCell")&&(T=T.replace(/\|/g,"\\$&")),T}}function Ife(){return{exit:{taskListCheckValueChecked:LI,taskListCheckValueUnchecked:LI,paragraph:Dfe}}}function Mfe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Ofe}}}function LI(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Dfe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let o=-1,a;for(;++o<s.length;){const l=s[o];if(l.type==="paragraph"){a=l;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function Ofe(t,e,n,r){const s=t.children[0],o=typeof t.checked=="boolean"&&s&&s.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",l=n.createTracker(r);o&&l.move(a);let c=B$.listItem(t,e,n,{...r,...l.current()});return o&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+a}}function Lfe(){return[mde(),Ode(),$de(),Cfe(),Ife()]}function Ffe(t){return{extensions:[gde(),Lde(t),Bde(),Rfe(t),Mfe()]}}const zfe={tokenize:Wfe,partial:!0},U$={tokenize:Hfe,partial:!0},V$={tokenize:Gfe,partial:!0},q$={tokenize:Kfe,partial:!0},$fe={tokenize:Yfe,partial:!0},W$={name:"wwwAutolink",tokenize:Vfe,previous:G$},H$={name:"protocolAutolink",tokenize:qfe,previous:K$},lc={name:"emailAutolink",tokenize:Ufe,previous:Y$},gl={};function Bfe(){return{text:gl}}let Lu=48;for(;Lu<123;)gl[Lu]=lc,Lu++,Lu===58?Lu=65:Lu===91&&(Lu=97);gl[43]=lc;gl[45]=lc;gl[46]=lc;gl[95]=lc;gl[72]=[lc,H$];gl[104]=[lc,H$];gl[87]=[lc,W$];gl[119]=[lc,W$];function Ufe(t,e,n){const r=this;let s,o;return a;function a(p){return!V2(p)||!Y$.call(r,r.previous)||qC(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(p))}function l(p){return V2(p)?(t.consume(p),l):p===64?(t.consume(p),c):n(p)}function c(p){return p===46?t.check($fe,f,u)(p):p===45||p===95||zs(p)?(o=!0,t.consume(p),c):f(p)}function u(p){return t.consume(p),s=!0,c}function f(p){return o&&s&&oi(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function Vfe(t,e,n){const r=this;return s;function s(a){return a!==87&&a!==119||!G$.call(r,r.previous)||qC(r.events)?n(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(zfe,t.attempt(U$,t.attempt(V$,o),n),n)(a))}function o(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function qfe(t,e,n){const r=this;let s="",o=!1;return a;function a(p){return(p===72||p===104)&&K$.call(r,r.previous)&&!qC(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),l):n(p)}function l(p){if(oi(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),l;if(p===58){const m=s.toLowerCase();if(m==="http"||m==="https")return t.consume(p),c}return n(p)}function c(p){return p===47?(t.consume(p),o?u:(o=!0,c)):n(p)}function u(p){return p===null||xb(p)||Vn(p)||Dd(p)||bv(p)?n(p):t.attempt(U$,t.attempt(V$,f),n)(p)}function f(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function Wfe(t,e,n){let r=0;return s;function s(a){return(a===87||a===119)&&r<3?(r++,t.consume(a),s):a===46&&r===3?(t.consume(a),o):n(a)}function o(a){return a===null?n(a):e(a)}}function Hfe(t,e,n){let r,s,o;return a;function a(u){return u===46||u===95?t.check(q$,c,l)(u):u===null||Vn(u)||Dd(u)||u!==45&&bv(u)?c(u):(o=!0,t.consume(u),a)}function l(u){return u===95?r=!0:(s=r,r=void 0),t.consume(u),a}function c(u){return s||r||!o?n(u):e(u)}}function Gfe(t,e){let n=0,r=0;return s;function s(a){return a===40?(n++,t.consume(a),s):a===41&&r<n?o(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(q$,e,o)(a):a===null||Vn(a)||Dd(a)?e(a):(t.consume(a),s)}function o(a){return a===41&&r++,t.consume(a),s}}function Kfe(t,e,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),r):l===38?(t.consume(l),o):l===93?(t.consume(l),s):l===60||l===null||Vn(l)||Dd(l)?e(l):n(l)}function s(l){return l===null||l===40||l===91||Vn(l)||Dd(l)?e(l):r(l)}function o(l){return oi(l)?a(l):n(l)}function a(l){return l===59?(t.consume(l),r):oi(l)?(t.consume(l),a):n(l)}}function Yfe(t,e,n){return r;function r(o){return t.consume(o),s}function s(o){return zs(o)?n(o):e(o)}}function G$(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Vn(t)}function K$(t){return!oi(t)}function Y$(t){return!(t===47||V2(t))}function V2(t){return t===43||t===45||t===46||t===95||zs(t)}function qC(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Jfe={tokenize:she,partial:!0};function Xfe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:the,continuation:{tokenize:nhe},exit:rhe}},text:{91:{name:"gfmFootnoteCall",tokenize:ehe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Qfe,resolveTo:Zfe}}}}function Qfe(t,e,n){const r=this;let s=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;s--;){const c=r.events[s][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!a||!a._balanced)return n(c);const u=ja(r.sliceSerialize({start:a.end,end:r.now()}));return u.codePointAt(0)!==94||!o.includes(u.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function Zfe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",o,e],["enter",a,e],["exit",a,e],["exit",o,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...l),t}function ehe(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,a;return l;function l(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(p){if(o>999||p===93&&!a||p===null||p===91||Vn(p))return n(p);if(p===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return s.includes(ja(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return Vn(p)||(a=!0),o++,t.consume(p),p===92?f:u}function f(p){return p===91||p===92||p===93?(t.consume(p),o++,u):u(p)}}function the(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,a=0,l;return c;function c(w){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(w),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(w){return w===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(w),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(w)}function f(w){if(a>999||w===93&&!l||w===null||w===91||Vn(w))return n(w);if(w===93){t.exit("chunkString");const y=t.exit("gfmFootnoteDefinitionLabelString");return o=ja(r.sliceSerialize(y)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(w),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return Vn(w)||(l=!0),a++,t.consume(w),w===92?p:f}function p(w){return w===91||w===92||w===93?(t.consume(w),a++,f):f(w)}function m(w){return w===58?(t.enter("definitionMarker"),t.consume(w),t.exit("definitionMarker"),s.includes(o)||s.push(o),En(t,g,"gfmFootnoteDefinitionWhitespace")):n(w)}function g(w){return e(w)}}function nhe(t,e,n){return t.check(ey,e,t.attempt(Jfe,e,n))}function rhe(t){t.exit("gfmFootnoteDefinition")}function she(t,e,n){const r=this;return En(t,s,"gfmFootnoteDefinitionIndent",5);function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(o):n(o)}}function ihe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(a,l){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let u=c;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[c][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[c][1].end)},p={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[c][1].start)},m=[["enter",f,l],["enter",a[u][1],l],["exit",a[u][1],l],["enter",p,l]],g=l.parser.constructs.insideSpan.null;g&&uo(m,m.length,0,vv(g,a.slice(u+1,c),l)),uo(m,m.length,0,[["exit",p,l],["enter",a[c][1],l],["exit",a[c][1],l],["exit",f,l]]),uo(a,u-1,c-u+3,m),c=u+m.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function o(a,l,c){const u=this.previous,f=this.events;let p=0;return m;function m(w){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(w):(a.enter("strikethroughSequenceTemporary"),g(w))}function g(w){const y=Ph(u);if(w===126)return p>1?c(w):(a.consume(w),p++,g);if(p<2&&!n)return c(w);const T=a.exit("strikethroughSequenceTemporary"),j=Ph(w);return T._open=!j||j===2&&!!y,T._close=!y||y===2&&!!j,l(w)}}}class ohe{constructor(){this.map=[]}add(e,n,r){ahe(this,e,n,r)}consume(e){if(this.map.sort(function(o,a){return o[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const o of s)e.push(o);s=r.pop()}this.map.length=0}}function ahe(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function lhe(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function che(){return{flow:{null:{name:"table",tokenize:uhe,resolveAll:dhe}}}}function uhe(t,e,n){const r=this;let s=0,o=0,a;return l;function l(G){let X=r.events.length-1;for(;X>-1;){const x=r.events[X][1].type;if(x==="lineEnding"||x==="linePrefix")X--;else break}const V=X>-1?r.events[X][1].type:null,A=V==="tableHead"||V==="tableRow"?$:c;return A===$&&r.parser.lazy[r.now().line]?n(G):A(G)}function c(G){return t.enter("tableHead"),t.enter("tableRow"),u(G)}function u(G){return G===124||(a=!0,o+=1),f(G)}function f(G){return G===null?n(G):Ut(G)?o>1?(o=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(G),t.exit("lineEnding"),g):n(G):vn(G)?En(t,f,"whitespace")(G):(o+=1,a&&(a=!1,s+=1),G===124?(t.enter("tableCellDivider"),t.consume(G),t.exit("tableCellDivider"),a=!0,f):(t.enter("data"),p(G)))}function p(G){return G===null||G===124||Vn(G)?(t.exit("data"),f(G)):(t.consume(G),G===92?m:p)}function m(G){return G===92||G===124?(t.consume(G),p):p(G)}function g(G){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(G):(t.enter("tableDelimiterRow"),a=!1,vn(G)?En(t,w,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):w(G))}function w(G){return G===45||G===58?T(G):G===124?(a=!0,t.enter("tableCellDivider"),t.consume(G),t.exit("tableCellDivider"),y):D(G)}function y(G){return vn(G)?En(t,T,"whitespace")(G):T(G)}function T(G){return G===58?(o+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(G),t.exit("tableDelimiterMarker"),j):G===45?(o+=1,j(G)):G===null||Ut(G)?P(G):D(G)}function j(G){return G===45?(t.enter("tableDelimiterFiller"),_(G)):D(G)}function _(G){return G===45?(t.consume(G),_):G===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(G),t.exit("tableDelimiterMarker"),v):(t.exit("tableDelimiterFiller"),v(G))}function v(G){return vn(G)?En(t,P,"whitespace")(G):P(G)}function P(G){return G===124?w(G):G===null||Ut(G)?!a||s!==o?D(G):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(G)):D(G)}function D(G){return n(G)}function $(G){return t.enter("tableRow"),U(G)}function U(G){return G===124?(t.enter("tableCellDivider"),t.consume(G),t.exit("tableCellDivider"),U):G===null||Ut(G)?(t.exit("tableRow"),e(G)):vn(G)?En(t,U,"whitespace")(G):(t.enter("data"),K(G))}function K(G){return G===null||G===124||Vn(G)?(t.exit("data"),U(G)):(t.consume(G),G===92?Y:K)}function Y(G){return G===92||G===124?(t.consume(G),K):K(G)}}function dhe(t,e){let n=-1,r=!0,s=0,o=[0,0,0,0],a=[0,0,0,0],l=!1,c=0,u,f,p;const m=new ohe;for(;++n<t.length;){const g=t[n],w=g[1];g[0]==="enter"?w.type==="tableHead"?(l=!1,c!==0&&(FI(m,e,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},m.add(n,0,[["enter",u,e]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(r=!0,p=void 0,o=[0,0,0,0],a=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},m.add(n,0,[["enter",f,e]])),s=w.type==="tableDelimiterRow"?2:f?3:1):s&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(o[1]!==0&&(a[0]=a[1],p=Hx(m,e,o,s,void 0,p),o=[0,0,0,0]),a[2]=n)):w.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(a[0]=a[1],p=Hx(m,e,o,s,void 0,p)),o=a,a=[o[1],n,0,0])):w.type==="tableHead"?(l=!0,c=n):w.type==="tableRow"||w.type==="tableDelimiterRow"?(c=n,o[1]!==0?(a[0]=a[1],p=Hx(m,e,o,s,n,p)):a[1]!==0&&(p=Hx(m,e,a,s,n,p)),s=0):s&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&FI(m,e,c,u,f),m.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=lhe(e.events,n))}return t}function Hx(t,e,n,r,s,o){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(o.end=Object.assign({},Lf(e.events,n[0])),t.add(n[0],0,[["exit",o,e]]));const c=Lf(e.events,n[1]);if(o={type:a,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",o,e]]),n[2]!==0){const u=Lf(e.events,n[2]),f=Lf(e.events,n[3]),p={type:l,start:Object.assign({},u),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const m=e.events[n[2]],g=e.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const w=n[2]+1,y=n[3]-n[2]-1;t.add(w,y,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(o.end=Object.assign({},Lf(e.events,s)),t.add(s,0,[["exit",o,e]]),o=void 0),o}function FI(t,e,n,r,s){const o=[],a=Lf(e.events,n);s&&(s.end=Object.assign({},a),o.push(["exit",s,e])),r.end=Object.assign({},a),o.push(["exit",r,e]),t.add(n+1,0,o)}function Lf(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const fhe={name:"tasklistCheck",tokenize:phe};function hhe(){return{text:{91:fhe}}}function phe(t,e,n){const r=this;return s;function s(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),o)}function o(c){return Vn(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Ut(c)?e(c):vn(c)?t.check({tokenize:mhe},e,n)(c):n(c)}}function mhe(t,e,n){return En(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function ghe(t){return o$([Bfe(),Xfe(),ihe(t),che(),hhe()])}const yhe={};function xhe(t){const e=this,n=t||yhe,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(ghe(n)),o.push(Lfe()),a.push(Ffe(n))}Ol.registerPlugin(yn);const Cf=({id:t,className:e="",containerClassName:n="",children:r})=>i.jsx("section",{id:t,className:`w-full ${e}`,children:i.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${n}`,children:r})}),Gx=({eyebrow:t,title:e,subtitle:n,className:r=""})=>i.jsxs("div",{className:`text-center mb-8 sm:mb-10 lg:mb-14 ${r}`,children:[t&&i.jsx("div",{className:"font-display text-[length:var(--text-sm)] tracking-wider uppercase text-primary mb-2 font-semibold",children:t}),i.jsx("h2",{className:"font-display text-[length:var(--text-4xl)] font-bold mb-3 text-foreground leading-tight tracking-tighter",children:e}),n&&i.jsx("p",{className:"font-body text-[length:var(--text-lg)] text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:n})]}),bhe=()=>{const t=k.useRef(null);return k.useEffect(()=>{const e=t.current;e&&Ol.to(e,{y:-15,duration:3,repeat:-1,yoyo:!0,ease:"sine.inOut"})},[]),i.jsxs("div",{ref:t,className:"relative w-full max-w-lg mx-auto",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/30 to-primary/10 rounded-3xl blur-2xl transform scale-110"}),i.jsx("div",{className:"absolute -top-4 -left-4 w-full h-full bg-card/50 rounded-2xl border border-border/30 transform rotate-[-6deg]"}),i.jsx("div",{className:"absolute -top-2 -left-2 w-full h-full bg-card/70 rounded-2xl border border-border/50 transform rotate-[-3deg]"}),i.jsxs("div",{className:"relative bg-card rounded-2xl border border-border shadow-2xl p-6 backdrop-blur-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center",children:i.jsx(Pi,{className:"h-5 w-5 text-primary-foreground"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-display font-semibold text-foreground text-sm",children:"NFT Drop"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Powered by VRF"})]})]}),i.jsx("div",{className:"px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium",children:"Live"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Participants"}),i.jsx("span",{className:"font-semibold text-foreground",children:"2,847 / 5,000"})]}),i.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/70 rounded-full",style:{width:"57%"}})}),i.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2",children:[i.jsxs("div",{className:"text-center p-2 rounded-lg bg-muted/50",children:[i.jsx("div",{className:"text-lg font-bold text-foreground",children:"500"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Winners"})]}),i.jsxs("div",{className:"text-center p-2 rounded-lg bg-muted/50",children:[i.jsx("div",{className:"text-lg font-bold text-foreground",children:"24h"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Duration"})]}),i.jsxs("div",{className:"text-center p-2 rounded-lg bg-muted/50",children:[i.jsx("div",{className:"text-lg font-bold text-primary",children:"5000"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Slot Limit"})]})]})]})]})]}),i.jsx("div",{className:"absolute -right-4 top-1/4 animate-pulse",children:i.jsxs("div",{className:"bg-card/90 backdrop-blur-sm rounded-full px-3 py-2 shadow-lg border border-border flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"text-xs font-medium text-foreground",children:"Verified"})]})}),i.jsx("div",{className:"absolute -left-4 bottom-1/4 animate-pulse",style:{animationDelay:"1s"},children:i.jsxs("div",{className:"bg-card/90 backdrop-blur-sm rounded-full px-3 py-2 shadow-lg border border-border flex items-center gap-2",children:[i.jsx(xs,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"text-xs font-medium text-foreground",children:"Secure"})]})})]})};function vhe(t){if(!t)return[];const e=t.split(`
`).map(s=>s.replace(/\r$/,""));let n=0;for(;n<e.length&&(e[n].trim()===""||e[n].trim().startsWith("##"));)n++;const r=[];for(;n<e.length;){if(!e[n].trim().startsWith("**Q:")){n++;continue}const s=e[n].trim().replace(/^\*\*Q:\s*/,"").replace(/\*\*$/,"").trim();for(n++;n<e.length&&e[n].trim()==="";)n++;const o=[];for(n<e.length&&e[n].trim().startsWith("A:")&&(o.push(e[n].trim().replace(/^A:\s*/,"")),n++);n<e.length&&!e[n].trim().startsWith("**Q:");)o.push(e[n]),n++;r.push({q:s,aMd:o.join(`
`).trim()})}return r}function whe(){const[t,e]=k.useState("");k.useRef(null),k.useRef(null),k.useRef(null);const{getCurrentTheme:n}=$b();k.useEffect(()=>(Ol.timeline().from(".hero-headline",{opacity:0,y:50,duration:1,ease:"power3.out"}).from(".hero-subtext",{opacity:0,y:30,duration:.8,ease:"power3.out"},"-=0.5").from(".hero-cta",{opacity:0,y:20,duration:.6,stagger:.1,ease:"power3.out"},"-=0.3"),Ol.utils.toArray(".reveal").forEach(o=>{Ol.fromTo(o,{opacity:0,y:50},{opacity:1,y:0,duration:.8,ease:"power3.out",scrollTrigger:{trigger:o,start:"top 80%",end:"bottom 20%",toggleActions:"play none none reverse"}})}),Ol.utils.toArray(".card-grid").forEach(o=>{const a=o.querySelectorAll(".card-item");Ol.fromTo(a,{opacity:0,y:30},{opacity:1,y:0,duration:.6,stagger:.1,ease:"power3.out",scrollTrigger:{trigger:o,start:"top 80%",toggleActions:"play none none reverse"}})}),Ol.to(".pulse-btn",{scale:1.05,duration:1,repeat:-1,yoyo:!0,ease:"power2.inOut"}),()=>{yn.getAll().forEach(o=>o.kill())}),[]),k.useEffect(()=>{let s=!0;return fetch("/FAQ.md").then(o=>o.text()).then(o=>{s&&e(o)}).catch(()=>{s&&e(`## FAQ
Content unavailable.`)}),()=>{s=!1}},[]);const r=vhe(t);return i.jsxs("div",{className:"bg-background text-foreground overflow-x-hidden -mb-8",children:[i.jsxs(Cf,{id:"hero",className:"min-h-[90vh] sm:min-h-[100vh] flex items-center justify-center relative overflow-hidden pt-16 sm:pt-0",children:[i.jsx("div",{className:"absolute inset-0 bg-background"}),i.jsx("div",{className:"absolute inset-0 opacity-[0.02] dark:opacity-[0.05]",style:{backgroundImage:"radial-gradient(circle at 1px 1px, currentColor 1px, transparent 0)",backgroundSize:"40px 40px"}}),i.jsx("div",{className:"relative z-10 w-full py-12 sm:py-20",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center max-w-7xl mx-auto",children:[i.jsxs("div",{className:"text-center lg:text-left order-2 lg:order-1",children:[i.jsxs("div",{className:"hero-headline inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20 mb-6",children:[i.jsx(Pi,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-body text-[length:var(--text-sm)] font-medium text-primary",children:"Provably Fair Distribution"})]}),i.jsxs("h1",{className:"hero-headline font-display text-[length:var(--text-5xl)] font-bold mb-8 text-foreground leading-[1.1] tracking-tighter",children:["Explore New Strategies to Distribute"," ",i.jsxs("span",{className:"relative inline-block",children:[i.jsx("span",{className:"bg-gradient-to-r from-primary via-primary to-primary/70 bg-clip-text text-transparent",children:"NFTs"}),i.jsx("span",{className:"absolute -bottom-1 left-0 w-full h-1 bg-gradient-to-r from-primary to-primary/50 rounded-full"})]})," ","and"," ",i.jsxs("span",{className:"relative inline-block",children:[i.jsx("span",{className:"bg-gradient-to-r from-primary via-primary to-primary/70 bg-clip-text text-transparent",children:"Community Rewards"}),i.jsx("span",{className:"absolute -bottom-1 left-0 w-full h-1 bg-gradient-to-r from-primary to-primary/50 rounded-full"})]})]}),i.jsx("div",{className:"hero-subtext mb-8",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-center lg:justify-start gap-x-2 gap-y-3",children:[i.jsxs("div",{className:"group relative flex items-center gap-2 px-4 py-2.5 rounded-full bg-transparent border border-primary/20 hover:border-primary/40 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"relative flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(xs,{className:"h-3.5 w-3.5 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-sm)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Chainlink VRF Powered"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-2 px-4 py-2.5 rounded-full bg-transparent border border-primary/20 hover:border-primary/40 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"relative flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(hn,{className:"h-3.5 w-3.5 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-sm)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Permissionless"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-2 px-4 py-2.5 rounded-full bg-transparent border border-primary/20 hover:border-primary/40 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"relative flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(nl,{className:"h-3.5 w-3.5 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-sm)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Fully Transparent"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-2 px-4 py-2.5 rounded-full bg-transparent border border-primary/20 hover:border-primary/40 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"relative flex items-center justify-center w-6 h-6 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(Qp,{className:"h-3.5 w-3.5 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-sm)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Trustless"})]})]})}),i.jsxs("div",{className:"hero-cta flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[i.jsxs(ji,{to:"/app",target:"_blank",rel:"noopener noreferrer",className:"pulse-btn group inline-flex items-center justify-center gap-2 px-8 py-4 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-primary/25 font-semibold text-[length:var(--text-lg)]",children:["Launch Dapp",i.jsx(Lc,{className:"h-5 w-5 transition-transform group-hover:translate-x-1"})]}),i.jsxs(ji,{to:"/docs",className:"inline-flex items-center justify-center gap-2 px-8 py-4 rounded-full bg-card border border-border text-foreground hover:border-primary hover:bg-card/80 transition-all duration-300 font-semibold text-[length:var(--text-base)]",children:[i.jsx(wh,{className:"h-5 w-5"}),"Read Documentation"]})]})]}),i.jsx("div",{className:"hero-cta order-1 lg:order-2 hidden sm:block",children:i.jsx(bhe,{})})]})})]}),i.jsxs(Cf,{id:"problem",className:"py-20 bg-card",children:[i.jsx("div",{className:"reveal",children:i.jsx(Gx,{title:"The End of Opaque Whitelist Allocations, Botted Mints, and Rigged Giveaways",subtitle:"Traditional Web3 distribution methods are broken. Dropr introduces new distribution mechanisms built on provably fair technology."})}),i.jsxs("div",{className:"card-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-16",children:[i.jsxs("div",{className:"card-item group bg-background rounded-2xl p-8 text-center hover:shadow-xl hover:shadow-primary/5 transition-all duration-300 border border-border hover:border-primary/30 hover:-translate-y-1",children:[i.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-primary/20 group-hover:scale-110 transition-all duration-300",children:i.jsx(xs,{className:"h-8 w-8 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-xl)] font-bold mb-3 text-foreground leading-snug group-hover:text-primary transition-colors",children:"No More Insider Favoritism"}),i.jsx("p",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground leading-relaxed",children:"Cryptographically secure randomness ensures every participant has an equal chance"})]}),i.jsxs("div",{className:"card-item group bg-background rounded-2xl p-8 text-center hover:shadow-xl hover:shadow-primary/5 transition-all duration-300 border border-border hover:border-primary/30 hover:-translate-y-1",children:[i.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-primary/20 group-hover:scale-110 transition-all duration-300",children:i.jsx(X6,{className:"h-8 w-8 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-xl)] font-bold mb-3 text-foreground leading-snug group-hover:text-primary transition-colors",children:"Discourage Bot Attacks"}),i.jsx("p",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground leading-relaxed",children:"The Winner selection algorithm largely disincentivizes bot manipulation during NFT Drops"})]}),i.jsxs("div",{className:"card-item group bg-background rounded-2xl p-8 text-center hover:shadow-xl hover:shadow-primary/5 transition-all duration-300 border border-border hover:border-primary/30 hover:-translate-y-1",children:[i.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-primary/20 group-hover:scale-110 transition-all duration-300",children:i.jsx(os,{className:"h-8 w-8 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-xl)] font-bold mb-3 text-foreground leading-snug group-hover:text-primary transition-colors",children:"Build Community Trust"}),i.jsx("p",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground leading-relaxed",children:"Transparent, verifiable processes that communities can audit and trust"})]}),i.jsxs("div",{className:"card-item group bg-background rounded-2xl p-8 text-center hover:shadow-xl hover:shadow-primary/5 transition-all duration-300 border border-border hover:border-primary/30 hover:-translate-y-1",children:[i.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-primary/20 group-hover:scale-110 transition-all duration-300",children:i.jsx(cg,{className:"h-8 w-8 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-xl)] font-bold mb-3 text-foreground leading-snug group-hover:text-primary transition-colors",children:"Trustless Asset Distribution"}),i.jsx("p",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground leading-relaxed",children:"Smart contracts securely manage prizes without need for intervention from creators"})]})]})]}),i.jsxs(Cf,{id:"why-dropr-gamechanger",className:"py-20 bg-card",children:[i.jsx("div",{className:"reveal",children:i.jsx(Gx,{title:"Why Dropr is a Gamechanger",subtitle:"Revolutionary features that set Dropr apart from traditional NFT launchpads"})}),i.jsx("div",{className:"reveal mt-12",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-border",children:[i.jsx("th",{className:"text-center p-4 font-display text-[length:var(--text-lg)] font-semibold text-foreground",children:"Narratives"}),i.jsx("th",{className:"text-center p-4",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center mb-2 p-1 ${n().id==="light"?"bg-background border-2 border-primary":"bg-primary"}`,children:i.jsx("img",{src:n().id==="light"?"/images/logo/Asset 25.svg":"/images/logo/Asset 26.svg",alt:"Dropr",className:"w-full h-full object-contain"})}),i.jsx("span",{className:"font-display text-[length:var(--text-base)] font-semibold text-primary",children:"Dropr"})]})}),i.jsx("th",{className:"text-center p-4",children:i.jsxs("div",{className:"flex flex-col items-center opacity-50",children:[i.jsx("div",{className:"w-12 h-12 bg-muted rounded-lg flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-muted-foreground font-bold text-lg",children:"OS"})}),i.jsx("span",{className:"font-display text-[length:var(--text-base)] font-semibold text-muted-foreground",children:"OpenSea"})]})}),i.jsx("th",{className:"text-center p-4",children:i.jsxs("div",{className:"flex flex-col items-center opacity-50",children:[i.jsx("div",{className:"w-12 h-12 bg-muted rounded-lg flex items-center justify-center mb-2",children:i.jsx("span",{className:"text-muted-foreground font-bold text-lg",children:"ME"})}),i.jsx("span",{className:"font-display text-[length:var(--text-base)] font-semibold text-muted-foreground",children:"MagicEden"})]})})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b border-border hover:bg-primary/5 transition-colors",children:[i.jsx("td",{className:"p-4 text-center font-body text-[length:var(--text-sm)] text-foreground",children:i.jsx("span",{children:"Community-centred distribution"})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-full",children:i.jsx(hn,{className:"h-5 w-5 text-primary"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-muted rounded-full",children:i.jsx(vi,{className:"h-5 w-5 text-muted-foreground"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-muted rounded-full",children:i.jsx(vi,{className:"h-5 w-5 text-muted-foreground"})})})]}),i.jsxs("tr",{className:"border-b border-border hover:bg-primary/5 transition-colors",children:[i.jsx("td",{className:"p-4 text-center font-body text-[length:var(--text-sm)] text-foreground",children:i.jsx("span",{children:"Anti-sybil measures"})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-full",children:i.jsx(hn,{className:"h-5 w-5 text-primary"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-muted rounded-full",children:i.jsx(vi,{className:"h-5 w-5 text-muted-foreground"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-muted rounded-full",children:i.jsx(vi,{className:"h-5 w-5 text-muted-foreground"})})})]}),i.jsxs("tr",{className:"border-b border-border hover:bg-primary/5 transition-colors",children:[i.jsx("td",{className:"p-4 text-center font-body text-[length:var(--text-sm)] text-foreground",children:i.jsx("span",{children:"Team allocations & vesting"})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-full",children:i.jsx(hn,{className:"h-5 w-5 text-primary"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-muted rounded-full",children:i.jsx(vi,{className:"h-5 w-5 text-muted-foreground"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-muted rounded-full",children:i.jsx(vi,{className:"h-5 w-5 text-muted-foreground"})})})]}),i.jsxs("tr",{className:"border-b border-border hover:bg-primary/5 transition-colors",children:[i.jsx("td",{className:"p-4 text-center font-body text-[length:var(--text-sm)] text-foreground",children:i.jsx("span",{children:"Ultra flexible drop experience"})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-full",children:i.jsx(hn,{className:"h-5 w-5 text-primary"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-muted rounded-full",children:i.jsx(vi,{className:"h-5 w-5 text-muted-foreground"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-muted rounded-full",children:i.jsx(vi,{className:"h-5 w-5 text-muted-foreground"})})})]}),i.jsxs("tr",{className:"border-b border-border hover:bg-primary/5 transition-colors",children:[i.jsx("td",{className:"p-4 text-center font-body text-[length:var(--text-sm)] text-foreground",children:i.jsx("span",{children:"Guaranteed healthy post-mint price action"})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-full",children:i.jsx(hn,{className:"h-5 w-5 text-primary"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-muted rounded-full",children:i.jsx(vi,{className:"h-5 w-5 text-muted-foreground"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-muted rounded-full",children:i.jsx(vi,{className:"h-5 w-5 text-muted-foreground"})})})]}),i.jsxs("tr",{className:"hover:bg-primary/5 transition-colors",children:[i.jsx("td",{className:"p-4 text-center font-body text-[length:var(--text-sm)] text-foreground",children:i.jsx("span",{children:"Permissionless"})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-full",children:i.jsx(hn,{className:"h-5 w-5 text-primary"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-full",children:i.jsx(hn,{className:"h-5 w-5 text-primary"})})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-full",children:i.jsx(hn,{className:"h-5 w-5 text-primary"})})})]})]})]})}),i.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"card-item bg-background rounded-2xl p-6 text-center hover:shadow-xl transition-all duration-300 border border-border",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(os,{className:"h-6 w-6 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-lg)] font-bold mb-2 text-foreground",children:"Community First"}),i.jsx("p",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Fair distribution mechanisms that put your community at the center"})]}),i.jsxs("div",{className:"card-item bg-background rounded-2xl p-6 text-center hover:shadow-xl transition-all duration-300 border border-border",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(xs,{className:"h-6 w-6 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-lg)] font-bold mb-2 text-foreground",children:"Bot Resistant"}),i.jsx("p",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Anti-sybil measures ensure genuine participation"})]}),i.jsxs("div",{className:"card-item bg-background rounded-2xl p-6 text-center hover:shadow-xl transition-all duration-300 border border-border",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(th,{className:"h-6 w-6 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-lg)] font-bold mb-2 text-foreground",children:"Price Stability"}),i.jsx("p",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Healthy supply distribution guarantees healthy price action post-mint"})]})]})]})})]}),i.jsxs(Cf,{id:"use-cases",className:"py-20 bg-background",children:[i.jsx("div",{className:"reveal",children:i.jsx(Gx,{title:"Built for Web3",subtitle:"Launch NFT drops, grow and reward communities, build genuine engagement"})}),i.jsxs("div",{className:"card-grid grid grid-cols-1 lg:grid-cols-3 gap-8 mt-16",children:[i.jsxs("div",{className:"card-item bg-card rounded-2xl p-8 hover:shadow-xl transition-all duration-300 border border-border",children:[i.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-6",children:i.jsx(Pi,{className:"h-8 w-8 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-2xl)] font-bold mb-4 text-foreground leading-snug",children:"Projects"}),i.jsx("p",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground mb-6 leading-relaxed",children:"Fairly distribute whitelist spots for new mints. Eliminate gas wars and ensure equal opportunity for all community members."}),i.jsxs("ul",{className:"space-y-2 font-body text-[length:var(--text-sm)] text-muted-foreground",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Supports ERC721 & ERC1155 standards"})]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Flexible launch strategies"})]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Inter-community collabs simplified"})]})]})]}),i.jsxs("div",{className:"card-item bg-card rounded-2xl p-8 hover:shadow-xl transition-all duration-300 border border-border",children:[i.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-6",children:i.jsx(th,{className:"h-8 w-8 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-2xl)] font-bold mb-4 text-foreground whitespace-nowrap leading-snug",children:"KOLs & Influencers"}),i.jsx("p",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground mb-6 leading-relaxed",children:"Host trustless giveaways that protect your reputation. Build authentic engagement with your community using provably fair raffling mechanics."}),i.jsxs("ul",{className:"space-y-2 font-body text-[length:var(--text-sm)] text-muted-foreground",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Build reputation and trust"})]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Flexible prize options for community rewards"})]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Project collabs made easy"})]})]})]}),i.jsxs("div",{className:"card-item bg-card rounded-2xl p-8 hover:shadow-xl transition-all duration-300 border border-border",children:[i.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-6",children:i.jsx(sg,{className:"h-8 w-8 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-2xl)] font-bold mb-4 text-foreground leading-snug",children:"Creators"}),i.jsx("p",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground mb-6 leading-relaxed",children:"Grow your community and holder base by transparently distributing rewards to holders of creator tokens."}),i.jsxs("ul",{className:"space-y-2 font-body text-[length:var(--text-sm)] text-muted-foreground",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Token-gated raffles for holder rewards"})]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Flexible prize options for holder rewards"})]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-body text-[length:var(--text-sm)] text-muted-foreground",children:"Easy collabs with projects and other creators"})]})]})]})]})]}),i.jsxs(Cf,{id:"faq",className:"py-20 bg-background",children:[i.jsx("div",{className:"reveal",children:i.jsx(Gx,{title:"Frequently Asked Questions"})}),i.jsx("div",{className:"reveal max-w-4xl mx-auto mt-12",children:i.jsx(mF,{type:"single",collapsible:!0,className:"space-y-4",children:r.map((s,o)=>i.jsxs(gF,{value:`item-${o}`,className:"rounded-2xl border border-border bg-card overflow-hidden hover:border-primary/30 transition-all duration-300 hover:shadow-lg hover:shadow-primary/5",children:[i.jsx(yF,{children:i.jsxs(xF,{className:"w-full p-4 sm:p-6 flex items-center justify-between text-left font-semibold hover:bg-primary/5 transition-all duration-300 group",children:[i.jsx("span",{className:"pr-4 text-base sm:text-lg text-foreground group-hover:text-primary leading-relaxed transition-colors",children:s.q}),i.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-all duration-300",children:i.jsx(Ii,{className:"h-5 w-5 shrink-0 transition-transform duration-300 data-[state=open]:rotate-180 text-primary"})})]})}),i.jsx(bF,{className:"px-4 sm:px-6 pb-4 sm:pb-6 pt-2 border-t border-border/50 overflow-hidden data-[state=open]:animate-slideDown data-[state=closed]:animate-slideUp",children:i.jsx(ide,{remarkPlugins:[xhe],components:{p:a=>i.jsx("p",{className:"text-sm text-muted-foreground",...a}),li:a=>i.jsx("li",{className:"list-disc ml-5 text-sm text-muted-foreground",...a}),strong:a=>i.jsx("strong",{className:"text-primary font-semibold",...a}),a:a=>i.jsx("a",{className:"text-primary underline hover:text-primary/80",...a})},children:s.aMd})})]},o))})})]}),i.jsxs(Cf,{id:"final-cta",className:"py-16 sm:py-20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-500 via-brand-400 to-brand-600 bg-[length:200%_200%] animate-gradient-shift"}),i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,255,255,0.1),transparent_50%)]"}),i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,255,255,0.08),transparent_50%)]"}),i.jsxs("div",{className:"reveal text-center relative z-10 text-white",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 sm:mb-6 drop-shadow-lg",children:"Ready to Build Trust with Your Community?"}),i.jsx("p",{className:"text-lg sm:text-xl md:text-2xl mb-6 sm:mb-8 opacity-90 max-w-3xl mx-auto",children:"Create Your Distribution Event - No Code Required"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[i.jsxs(ji,{to:"/create-raffle",target:"_blank",rel:"noopener noreferrer",className:"group inline-flex items-center justify-center gap-2 px-8 sm:px-10 py-4 sm:py-5 rounded-full bg-white text-brand-600 hover:bg-white/90 transition-all duration-300 shadow-lg hover:shadow-2xl hover:shadow-white/20 font-bold text-lg sm:text-xl hover:-translate-y-0.5",children:["Launch Your Event Now",i.jsx(Lc,{className:"h-5 w-5 transition-transform group-hover:translate-x-1"})]}),i.jsxs(ji,{to:"/docs",className:"inline-flex items-center justify-center px-8 sm:px-10 py-4 sm:py-5 rounded-full border-2 border-white/80 text-white hover:bg-white hover:text-brand-600 transition-all duration-300 font-bold text-lg sm:text-xl hover:-translate-y-0.5",children:[i.jsx(wh,{className:"mr-3 h-5 w-5 sm:h-6 sm:w-6"}),"Read Documentation"]})]}),i.jsxs("div",{className:"mt-10 flex flex-wrap justify-center items-center gap-8 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 opacity-90 hover:opacity-100 transition-opacity",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center",children:i.jsx(ag,{className:"h-4 w-4"})}),i.jsx("span",{children:"Permissionless"})]}),i.jsxs("div",{className:"flex items-center gap-2 opacity-90 hover:opacity-100 transition-opacity",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center",children:i.jsx(xs,{className:"h-4 w-4"})}),i.jsx("span",{children:"Secure"})]}),i.jsxs("div",{className:"flex items-center gap-2 opacity-90 hover:opacity-100 transition-opacity",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center",children:i.jsx(cg,{className:"h-4 w-4"})}),i.jsx("span",{children:"Deploy in seconds"})]})]})]})]})]})}const khe=()=>{const[t,e]=k.useState(0),n=k.useCallback(()=>{e(r=>r+1)},[]);return{refreshTrigger:t,triggerRefresh:n}},The=(t={})=>{const{autoFetch:e=!0,enablePolling:n=!1,pollingInterval:r=12e4,maxRaffles:s=null,useCache:o=!0}=t,a=an(),l=xn(),{isMobile:c}=Ln(),[u,f]=k.useState([]),[p,m]=k.useState(!1),[g,w]=k.useState(!1),[y,T]=k.useState(null),[j,_]=k.useState(null),v=k.useRef(null),P=k.useRef(!0);k.useEffect(()=>{a&&l&&Ba.initialize(a,l)},[a,l]),k.useEffect(()=>{a!=null&&a.chainId&&(console.log(" Network changed, clearing cache and resetting state"),Ba.clearCache(),f([]),T(null),_(null))},[a==null?void 0:a.chainId]),k.useEffect(()=>()=>{P.current=!1,v.current&&clearInterval(v.current)},[]);const D=k.useCallback(async(X=!1)=>{var V,A,x,C,L,z,R;if(console.log(" fetchRaffles called:",{connected:a==null?void 0:a.connected,chainId:a==null?void 0:a.chainId,isBackground:X,environment:"production",userAgent:typeof window<"u"?window.navigator.userAgent:"N/A",isMobile:c,maxRaffles:s}),!(a!=null&&a.connected)){console.log(" Wallet not connected"),f([]),T("Please connect your wallet to view raffles");return}if(!(a!=null&&a.chainId)){console.log(" ChainId not yet available, skipping fetch");return}if(a!=null&&a.isReconnecting){console.log(" Wallet is reconnecting, skipping fetch");return}if(!(l!=null&&l.isContractsReady)){console.log(" Contracts not ready yet, skipping fetch");return}if(!Ba.areContractsAvailable()){console.log(" Contracts not available for current network, skipping fetch"),X||(T("CONTRACTS_NOT_AVAILABLE"),f([]));return}if(!P.current){console.log(" Component unmounted");return}try{X?w(!0):(m(!0),T(null));const I={isMobile:c,useCache:o,maxRaffles:s};console.log(" Calling raffleService.fetchAllRaffles with options:",I);const N=await Ba.fetchAllRaffles(I);if(console.log(" fetchAllRaffles completed:",{count:(N==null?void 0:N.length)||0,firstRaffle:((V=N==null?void 0:N[0])==null?void 0:V.name)||"N/A"}),!P.current)return;f(N),_(new Date),N.length===0?(console.log(" No raffles found"),T("NO_RAFFLES_FOUND")):(console.log(" Raffles set successfully"),T(null))}catch(I){if(!P.current)return;console.error(" Error fetching raffles:",{error:I.message,stack:I.stack,environment:"production",chainId:a==null?void 0:a.chainId});let N="NETWORK_ERROR";(A=I.message)!=null&&A.includes("CONTRACTS_NOT_AVAILABLE")?N="CONTRACTS_NOT_AVAILABLE":(x=I.message)!=null&&x.includes("Too Many Requests")?N="RATE_LIMIT":(C=I.message)!=null&&C.includes("timeout")?N="TIMEOUT":(L=I.message)!=null&&L.includes("network")?N="NETWORK_ERROR":((z=I.message)!=null&&z.includes("not available")||(R=I.message)!=null&&R.includes("ProtocolManager contract not available"))&&(N="CONTRACTS_NOT_AVAILABLE"),T(N),X||f([])}finally{if(!P.current)return;console.log(" fetchRaffles completed, setting loading states"),X?w(!1):m(!1)}},[a==null?void 0:a.connected,a==null?void 0:a.chainId,a==null?void 0:a.isReconnecting,l==null?void 0:l.isContractsReady,c,o,s]),$=k.useCallback(async X=>{if(!(X!=null&&X.trim()))return[];try{const V={isMobile:c,useCache:!0,maxRaffles:null};return await Ba.searchRaffles(X,V)}catch(V){return console.error("Error searching raffles:",V),[]}},[c]),U=k.useCallback(async()=>{Ba.clearCache(),await D(!1)},[D]),K=k.useCallback(async X=>{try{return await Ba.fetchRaffleDetails(X)}catch(V){return console.error(`Error fetching raffle details for ${X}:`,V),null}},[]);k.useEffect(()=>{if(console.log(" Auto-fetch effect triggered:",{autoFetch:e,connected:a==null?void 0:a.connected,chainId:a==null?void 0:a.chainId,isReconnecting:a==null?void 0:a.isReconnecting,isContractsReady:l==null?void 0:l.isContractsReady,environment:"production"}),e&&(a!=null&&a.connected)&&(a!=null&&a.chainId)&&!(a!=null&&a.isReconnecting)&&(l!=null&&l.isContractsReady)){const X=setTimeout(()=>{console.log(" Triggering auto-fetch with full context ready"),D()},500);return()=>clearTimeout(X)}else console.log(" Auto-fetch conditions not met:",{autoFetch:e,connected:a==null?void 0:a.connected,chainId:a==null?void 0:a.chainId,isReconnecting:a==null?void 0:a.isReconnecting,isContractsReady:l==null?void 0:l.isContractsReady})},[e,a==null?void 0:a.connected,a==null?void 0:a.chainId,a==null?void 0:a.isReconnecting,l==null?void 0:l.isContractsReady,D]),k.useEffect(()=>{if(n&&(a!=null&&a.connected)&&r>0)return v.current=setInterval(()=>{Ba.fetchAllRaffles({isMobile:c,useCache:!1,maxRaffles:s}).then(X=>{P.current&&(f(X),_(new Date))}).catch(()=>{})},r),()=>{v.current&&(clearInterval(v.current),v.current=null)}},[n,a==null?void 0:a.connected,r,D]);const Y=k.useCallback(()=>{const X=Math.floor(Date.now()/1e3);return u.reduce((V,A)=>{const x=A.startTime,C=x+A.duration;return A.stateNum===0||X<x?V.pending.push(A):A.stateNum===1&&X>=x&&X<C?V.active.push(A):A.stateNum===2?V.ended.push(A):A.stateNum===3?V.drawing.push(A):A.stateNum===4?V.completed.push(A):A.stateNum===5?V.ended.push(A):A.stateNum===6?V.completed.push(A):(A.stateNum,V.ended.push(A)),V},{pending:[],active:[],drawing:[],completed:[],ended:[]})},[u]),G=k.useCallback(()=>Ba.getCacheStats(),[]);return{raffles:u,categorizedRaffles:Y(),loading:p,backgroundLoading:g,error:y,lastFetch:j,fetchRaffles:D,refreshRaffles:U,searchRaffles:$,getRaffleDetails:K,getCacheStats:G,service:Ba}},J$=(t,e={})=>{const{onWinnersSelected:n,onStateChange:r,onTicketsPurchased:s,onRpcError:o,enablePolling:a=!0,pollingInterval:l=1e4,autoStart:c=!0,raffleState:u=null,enableStateConditionalListening:f=!0,stopOnCompletion:p=!1}=e,{getContractInstance:m,provider:g}=xn(),{connected:w}=an(),[y,T]=k.useState(!1),[j,_]=k.useState(null),[v,P]=k.useState([]),[D,$]=k.useState(u),U=k.useRef(null),K=k.useRef([]),Y=k.useRef(null),G=k.useRef(!0),X=k.useRef(u);k.useEffect(()=>{t&&m?U.current=m(t,"pool"):U.current=null},[t,m]),k.useEffect(()=>{u!==X.current&&(console.log(` Raffle state updated: ${X.current}  ${u}`),$(u),X.current=u)},[u]);const V=k.useCallback(()=>{if(!f)return!0;if(p&&(D===4||D===7))return console.log(` Stopping winner selection listening - raffle completed (state=${D})`),!1;const F=D===null||[1,3,4,7].includes(D);return console.log(` Should listen check: state=${D}, shouldListen=${F}, stopOnCompletion=${p}`),F},[D,f,p]),A=k.useCallback((N,F)=>(...E)=>{var M;try{if(G.current&&F){console.log(` Raffle Event [${N}]:`,E);const ee={eventName:N,args:E,timestamp:Date.now(),blockNumber:((M=E[E.length-1])==null?void 0:M.blockNumber)||null};P(O=>[...O.slice(-9),ee]),N==="WinnersSelected"?(console.log(" WinnersSelected event - triggering immediate callback with RPC resilience"),setTimeout(()=>{try{F(...E),setTimeout(()=>{G.current&&U.current&&(console.log(" Additional state poll after WinnersSelected event"),(async()=>{try{const q=await U.current.state(),H=q.toNumber?q.toNumber():Number(q);r&&r(H,null)}catch(q){console.warn("Error in additional state poll:",q)}})())},3e3)}catch(O){console.error("Error in WinnersSelected callback:",O)}},1e3)):F(...E)}}catch(ee){console.error(`Error handling ${N} event:`,ee)}},[]),x=k.useCallback(()=>{if(!(!U.current||!w)){if(!V()){console.log(` Skipping event listeners setup - raffle state ${D} doesn't require listening`);return}try{console.log(` Setting up event listeners for raffle: ${t} (state: ${D})`),K.current.forEach(({contract:F,event:E,handler:M})=>{F.off(E,M)}),K.current=[];const N=U.current;if(n){const F=A("WinnersSelected",(E,M)=>{n(E,M)});N.on("WinnersSelected",F),K.current.push({contract:N,event:"WinnersSelected",handler:F})}if(s){const F=A("SlotsPurchased",(E,M,ee)=>{s(E,M,ee)});N.on("SlotsPurchased",F),K.current.push({contract:N,event:"SlotsPurchased",handler:F})}T(!0),console.log(` Event listeners active for ${K.current.length} events`)}catch(N){console.error("Error setting up event listeners:",N),T(!1)}}},[t,w,n,s,A]),C=k.useCallback(()=>{console.log(` Cleaning up event listeners for raffle: ${t}`),K.current.forEach(({contract:N,event:F,handler:E})=>{try{N.off(F,E)}catch(M){console.warn(`Error removing ${F} listener:`,M)}}),K.current=[],T(!1)},[t]),L=k.useCallback(()=>{if(!a||!U.current||!r)return;if(p&&(D===4||D===7)){console.log(` Stopping state polling - raffle completed (state=${D})`);return}const N=async()=>{let F=0;const E=3,M=2e3;await(async()=>{try{if(!G.current||!U.current)return;const O=await(g==null?void 0:g.getBlockNumber().catch(async q=>{var H;if((H=q.message)!=null&&H.includes("500")&&F<E)return console.warn(`RPC 500 error on getBlockNumber, retrying (${F+1}/${E})...`),F===0&&o&&o(q),F++,await new Promise(J=>setTimeout(J,M)),g==null?void 0:g.getBlockNumber();throw q}));if(O&&O!==j){_(O);const q=await U.current.state().catch(async J=>{var Q;if((Q=J.message)!=null&&Q.includes("500")&&F<E)return console.warn(`RPC 500 error on state(), retrying (${F+1}/${E})...`),F===0&&o&&o(J),F++,await new Promise(ne=>setTimeout(ne,M)),U.current.state();throw J}),H=q.toNumber?q.toNumber():Number(q);r&&r(H,O)}}catch(O){const q=O.message||O.toString();q.includes("500")||q.includes("Non-200 status code")?(console.warn("RPC server error during state polling, will retry on next cycle:",q),o&&o(O)):console.warn("Error during state polling:",O)}})()};N(),Y.current=setInterval(N,l),console.log(` State polling enabled (${l}ms interval)`)},[a,r,g,j,l,p,D]),z=k.useCallback(()=>{Y.current&&(clearInterval(Y.current),Y.current=null,console.log(" State polling disabled"))},[]),R=k.useCallback(()=>{if(!t||!U.current){console.warn("Cannot start listening: missing raffle address or contract");return}x(),L()},[t,x,L]),I=k.useCallback(()=>{C(),z()},[C,z]);return k.useEffect(()=>(c&&t&&U.current&&w&&(console.log(` Auto-starting listeners due to dependency change (state: ${D})`),R()),()=>{I()}),[c,t,w,D,R,I]),k.useEffect(()=>()=>{G.current=!1,I()},[I]),{isListening:y,eventHistory:v,lastBlockNumber:j,startListening:R,stopListening:I,clearEventHistory:()=>P([])}};class g0e extends Ae.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Mobile component error:",e,n)}render(){return this.state.hasError?i.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-md border-b border-border/50",children:i.jsxs("div",{className:"flex items-center justify-between h-14 px-4",children:[i.jsx("div",{className:"text-lg font-bold text-foreground",style:{fontFamily:"Orbitron, monospace"},children:"Dropr"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Mobile Menu"})]})}):this.props.children}}const ql=({children:t,variant:e="default",className:n=""})=>{const{isMobile:r}=Ln(),o=(()=>{switch(e){case"narrow":return"mx-auto px-4 sm:px-6 md:px-8 lg:px-12 xl:px-20 2xl:px-32";case"wide":return"container mx-auto px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-20";case"profile":return r?"mx-auto px-4":"mx-auto px-2 sm:px-3 md:px-4 lg:px-6 xl:px-8 2xl:px-10";case"default":default:return r?"mx-auto px-4":"mx-auto px-2 sm:px-3 md:px-4 lg:px-6 xl:px-8 2xl:px-10"}})();return i.jsx("div",{className:`${o} ${n}`,children:t})},er=()=>{const{chainId:t,networkInfo:e}=an(),n=k.useMemo(()=>(e==null?void 0:e.nativeCurrency)||{symbol:"ETH",name:"Ether",decimals:18},[e]),r=k.useMemo(()=>(m,g={})=>{const{showSymbol:w=!0,decimals:y=4,fallbackSymbol:T=n.symbol}=g;if(m==null||m==="")return w?`0 ${n.symbol}`:"0";try{let j;ce.isBigNumber(m)?j=Zt(m):typeof m=="string"?/^0x/i.test(m)||/^[0-9]+$/.test(m)?j=Zt(m):j=m:typeof m=="number"?j=m.toString():j=Zt(m);const _=parseFloat(j);let v;if(!isFinite(_)||isNaN(_))v="0";else if(_===0)v="0";else if(_<Math.pow(10,-y)){const P=Math.max(y,8);v=_.toFixed(P),v=v.replace(/\.?0+$/,""),(v==="0"||v==="")&&(v=_.toFixed(P))}else v=_.toFixed(y),_>=.01&&(v=v.replace(/\.?0+$/,""));return w?`${v} ${n.symbol}`:v}catch(j){return console.warn("Error formatting amount:",j),w?`0 ${T}`:"0"}},[n.symbol]),s=k.useMemo(()=>m=>r(m,{decimals:8}),[r]),o=k.useMemo(()=>m=>r(m,{decimals:6}),[r]),a=k.useMemo(()=>m=>r(m,{decimals:6}),[r]),l=k.useMemo(()=>()=>n.symbol,[n.symbol]),c=k.useMemo(()=>()=>n,[n]),u=k.useMemo(()=>n.symbol==="ETH",[n.symbol]),f=k.useMemo(()=>n.symbol==="AVAX",[n.symbol]),p=k.useMemo(()=>(m="general")=>{switch(m){case"ticket":return`Slot Fee (${n.symbol})`;case"prize":return`Prize Amount (${n.symbol})`;case"revenue":return`Revenue (${n.symbol})`;case"amount":return`Amount (${n.symbol})`;default:return n.symbol}},[n.symbol]);return{nativeCurrency:n,getCurrencyInfo:c,getCurrencySymbol:l,getCurrencyLabel:p,formatAmount:r,formatSlotFee:s,formatPrizeAmount:o,formatRevenueAmount:a,isEthNetwork:u,isAvaxNetwork:f,chainId:t,networkName:(e==null?void 0:e.name)||"Unknown Network"}},jg=({size:t="default",className:e="",text:n="",showText:r=!0})=>{const s={sm:"h-4 w-4",default:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"};return i.jsx("div",{className:je("flex items-center justify-center",e),children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx($r,{className:je("animate-spin text-primary",s[t])}),r&&n&&i.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})})},X$=({message:t="Loading...",isMobile:e=!1,showProgress:n=!1,progress:r=0,maxProgress:s=100})=>i.jsx("div",{className:"min-h-[calc(100vh-4rem)] flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center space-y-4 px-4",children:[i.jsx(jg,{size:e?"lg":"xl",text:t,showText:!0}),n&&i.jsxs("div",{className:"w-64 max-w-full mx-auto",children:[i.jsx("div",{className:"bg-muted rounded-full h-2",children:i.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${r/s*100}%`}})}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[r," / ",s]})]})]})}),Nv=({error:t,onRetry:e,isMobile:n=!1,showCreateButton:r=!0})=>{const s=mo(),o=u=>{switch(u){case"CONTRACTS_NOT_AVAILABLE":return{title:"Network Not Supported",message:"Dropr is not available on this network. Check back soon!",icon:i.jsx(Kt,{className:"h-8 w-8 text-orange-500"}),showRetry:!1,showCreate:!1};case"NO_RAFFLES_FOUND":return{title:"No Pools Found",message:"No Pools are found on this network! Be the first user to create a Pool.",icon:i.jsx(Kt,{className:"h-8 w-8 text-blue-500"}),showRetry:!0,showCreate:!0};case"RATE_LIMIT":return{title:"Rate Limit Exceeded",message:"Too many requests. Please wait a moment and try again.",icon:i.jsx(Kt,{className:"h-8 w-8 text-yellow-500"}),showRetry:!0,showCreate:!1};case"TIMEOUT":return{title:"Request Timeout",message:"Request timed out. Please check your connection and try again.",icon:i.jsx(Kt,{className:"h-8 w-8 text-red-500"}),showRetry:!0,showCreate:!1};case"NETWORK_ERROR":default:return{title:"Network Error",message:"Unable to connect to the blockchain. Please check your connection and try again.",icon:i.jsx(Kt,{className:"h-8 w-8 text-red-500"}),showRetry:!0,showCreate:!1}}},a=()=>{s("/create-raffle")},l=typeof t=="string"?t:(t==null?void 0:t.message)||"NETWORK_ERROR",c=o(l);return i.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:i.jsxs("div",{className:"text-center max-w-md mx-auto",children:[i.jsx("div",{className:"flex justify-center mb-4",children:c.icon}),i.jsx("h3",{className:`font-semibold mb-3 ${n?"text-lg":"text-xl"}`,children:c.title}),i.jsx("p",{className:`text-muted-foreground mb-6 ${n?"text-sm":"text-base"}`,children:c.message}),i.jsxs("div",{className:`flex gap-3 ${n?"flex-col":"flex-row justify-center"}`,children:[c.showRetry&&e&&i.jsxs(we,{onClick:e,variant:"outline",className:`${n?"w-full":""}`,children:[i.jsx(ul,{className:"h-4 w-4 mr-2"}),"Try Again"]}),c.showCreate&&r&&i.jsx(we,{onClick:a,className:`${n?"w-full":""}`,children:"Create Pool"})]})]})})},Q$=t=>{if(!t.startTime||!t.duration)return!1;const e=Math.floor(Date.now()/1e3),n=t.startTime+t.duration;return e>=n},q2=t=>({0:"pending",1:"active",2:"ended",3:"drawing",4:"completed",5:"deleted",6:"all_prizes_claimed",7:"unengaged",8:"unengaged"})[t]||"ended",Z$=t=>t.isCollabPool?"nft_collab":t.isPrized?"prized":"non_prized",eB=t=>t.isPrized?t.nativePrizeAmount&&t.nativePrizeAmount.gt&&t.nativePrizeAmount.gt(0)?"native":t.erc20PrizeToken&&t.erc20PrizeToken!==$e&&t.erc20PrizeAmount&&t.erc20PrizeAmount.gt&&t.erc20PrizeAmount.gt(0)?"erc20":t.prizeCollection&&t.prizeCollection!==$e?"nft":"token_giveaway":null,tB=t=>{if(!t.isPrized)return[];const e=[];return t.nativePrizeAmount&&t.nativePrizeAmount.gt&&t.nativePrizeAmount.gt(0)&&e.push("native"),t.erc20PrizeToken&&t.erc20PrizeToken!==$e&&t.erc20PrizeAmount&&t.erc20PrizeAmount.gt&&t.erc20PrizeAmount.gt(0)&&e.push("erc20"),t.prizeCollection&&t.prizeCollection!==$e&&(t.standard===0?e.push("erc721"):t.standard===1&&e.push("erc1155")),e},Nhe=(t,e)=>!t||t.length===0?[]:t.filter(r=>{if(e.raffleState&&e.raffleState.length>0)if(e.raffleState.includes("ended")){const s=q2(r.stateNum),o=Q$(r),a=e.raffleState.filter(l=>l!=="ended").includes(s);if(!o&&!a)return!1}else{const s=q2(r.stateNum);if(!e.raffleState.includes(s))return!1}if(e.raffleType&&e.raffleType.length>0){const s=Z$(r);if(!e.raffleType.includes(s))return!1}if(e.prizeType&&e.prizeType.length>0){if(!r.isPrized)return!1;const s=eB(r);if(!e.prizeType.includes(s))return!1}if(e.prizeStandard&&e.prizeStandard.length>0){if(!r.isPrized)return!1;const s=tB(r);if(!e.prizeStandard.some(a=>s.includes(a)))return!1}return!0}),jhe=t=>{if(!t||t.length===0)return{raffleState:{},raffleType:{},prizeType:{},prizeStandard:{}};const e={raffleState:{},raffleType:{},prizeType:{},prizeStandard:{}};return t.forEach(n=>{const r=q2(n.stateNum);e.raffleState[r]=(e.raffleState[r]||0)+1,Q$(n)&&(e.raffleState.ended=(e.raffleState.ended||0)+1);const s=Z$(n);if(e.raffleType[s]=(e.raffleType[s]||0)+1,n.isPrized){const o=eB(n);o&&(e.prizeType[o]=(e.prizeType[o]||0)+1),tB(n).forEach(l=>{e.prizeStandard[l]=(e.prizeStandard[l]||0)+1})}}),e},zI=()=>({raffleState:[],raffleType:[],prizeType:[],prizeStandard:[]}),Yk=t=>Object.values(t).every(e=>!e||e.length===0),Che=({onFilterChange:t,hasActiveFilters:e=!1,className:n=""})=>{const r=[{label:"Active",icon:yr,filters:{raffleState:["active"]},description:"Currently running raffles"},{label:"Pending",icon:os,filters:{raffleState:["pending"]},description:"Raffles starting soon"},{label:"NFT Prizes",icon:dl,filters:{raffleType:["prized"],prizeType:["nft"]},description:"Raffles with NFT prizes"},{label:"Whitelist",icon:Kb,filters:{raffleType:["non_prized"]},description:"Whitelist/Allowlist raffles"}],s=a=>{t(a)},o=()=>{t({raffleState:[],raffleType:[],prizeType:[],prizeStandard:[]})};return i.jsxs("div",{className:`space-y-2 sm:space-y-3 ${n}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Quick Filters"}),e&&i.jsx(we,{variant:"ghost",size:"sm",onClick:o,className:"text-xs h-5 sm:h-6 px-1.5 sm:px-2",children:"Clear"})]}),i.jsx("div",{className:"grid grid-cols-2 gap-1.5 sm:gap-2",children:r.map(a=>{const l=a.icon,c=["Active","Pending","NFT Prizes","Whitelist"].includes(a.label);return i.jsxs(we,{variant:"outline",size:"sm",onClick:()=>s(a.filters),className:`flex items-center justify-start gap-1.5 sm:gap-2 h-auto p-2 sm:p-3 text-left ${c?"border border-[#614E41] hover:bg-transparent":""}`,title:a.description,children:[i.jsx(l,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),i.jsx("span",{className:"text-xs font-medium",children:a.label})]},a.label)})})]})},She=`
  @media (max-width: 640px) {
    .mobile-checkbox-radio {
      width: 12px !important;
      height: 12px !important;
      min-width: 12px !important;
      min-height: 12px !important;
      max-width: 12px !important;
      max-height: 12px !important;
    }
  }
`,Ehe=()=>{const[t,e]=k.useState({top:56,height:56});return k.useEffect(()=>{const n=document.querySelector("header"),r=n?n.getBoundingClientRect().height:56,s=()=>window.matchMedia&&window.matchMedia("(max-width: 640px)").matches,o=()=>{const a=window.scrollY||window.pageYOffset||0;s()?e({top:r,height:window.innerHeight-r}):a>=r?e({top:0,height:window.innerHeight}):e({top:r-a,height:window.innerHeight-(r-a)})};return o(),window.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",o),()=>{window.removeEventListener("scroll",o),window.removeEventListener("resize",o)}},[]),t},_he=({isOpen:t,onToggle:e,filters:n,onFiltersChange:r,raffleCount:s=0,allRaffles:o=[],className:a=""})=>{const{countEnhancedRaffleTypes:l}=Bb(),{getCurrencySymbol:c}=er(),u=Ehe(),[f,p]=k.useState({raffleState:!0,raffleType:!0,prizeType:!0,prizeStandard:!0}),m=k.useMemo(()=>{const v=jhe(o),P=l(o);return{...v,raffleType:P}},[o,l]),g=k.useMemo(()=>({raffleState:[{value:"pending",label:"Pending",count:m.raffleState.pending||0},{value:"active",label:"Active",count:m.raffleState.active||0},{value:"ended",label:"Ended",count:m.raffleState.ended||0},{value:"drawing",label:"Drawing",count:m.raffleState.drawing||0},{value:"completed",label:"Completed",count:m.raffleState.completed||0},{value:"deleted",label:"Deleted",count:m.raffleState.deleted||0},{value:"all_prizes_claimed",label:"All Prizes Claimed",count:m.raffleState.all_prizes_claimed||0},{value:"unengaged",label:"Unengaged",count:m.raffleState.unengaged||0}],raffleType:[{value:"non_prized",label:"Whitelist",count:m.raffleType.non_prized||0},{value:"prized",label:"Prized",count:m.raffleType.prized||0},{value:"nft_collab",label:"NFT Collab",count:m.raffleType.nft_collab||0},{value:"whitelist_collab",label:"Whitelist Collab",count:m.raffleType.whitelist_collab||0}],prizeType:[{value:"nft",label:"NFT",count:m.prizeType.nft||0},{value:"erc20",label:"ERC20",count:m.prizeType.erc20||0},{value:"native",label:c(),count:m.prizeType.native||0}],prizeStandard:[{value:"erc721",label:"ERC721",count:m.prizeStandard.erc721||0},{value:"erc1155",label:"ERC1155",count:m.prizeStandard.erc1155||0},{value:"erc20",label:"ERC20",count:m.prizeStandard.erc20||0},{value:"native",label:c(),count:m.prizeStandard.native||0}]}),[m,c]),w=k.useCallback(v=>{p(P=>({...P,[v]:!P[v]}))},[]),y=k.useCallback((v,P,D)=>{const $={...n};v==="raffleType"?$[v]=D?[P]:[]:($[v]||($[v]=[]),D?$[v]=[...$[v],P]:$[v]=$[v].filter(U=>U!==P)),r($)},[n,r]),T=k.useCallback(()=>{r({raffleState:[],raffleType:[],prizeType:[],prizeStandard:[]})},[r]),j=k.useMemo(()=>Object.values(n).some(v=>v.length>0),[n]),_=k.useCallback((v,P,D)=>{var G;const $=f[P],U=P==="raffleType",Y=(P==="prizeType"||P==="prizeStandard")&&!((G=n.raffleType)!=null&&G.includes("prized"));return i.jsxs("div",{className:"border-b border-border/30 last:border-b-0",children:[i.jsxs("button",{onClick:()=>w(P),className:"w-full flex items-center justify-between p-3 sm:p-4 text-left hover:bg-muted/50 transition-colors",disabled:Y,style:P==="raffleState"||P==="raffleType"||P==="prizeType"||P==="prizeStandard"?{border:"1px solid #614E41"}:void 0,children:[i.jsx("span",{className:`text-sm sm:text-base font-medium ${Y?"text-muted-foreground":""}`,children:v}),$?i.jsx(qg,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-muted-foreground"}):i.jsx(Ii,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-muted-foreground"})]}),$&&!Y&&i.jsx("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4 space-y-1 sm:space-y-2",children:D.map(X=>{var A;const V=((A=n[P])==null?void 0:A.includes(X.value))||!1;return i.jsxs("label",{className:"flex items-center space-x-2 sm:space-x-3 cursor-pointer hover:bg-muted/30 p-1.5 sm:p-2 rounded-md transition-colors",children:[i.jsx("input",{type:U?"radio":"checkbox",name:U?P:void 0,checked:V,onChange:x=>y(P,X.value,x.target.checked),className:`mobile-checkbox-radio ${U?"h-3 w-3 sm:h-4 sm:w-4 text-primary bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-full focus:ring-0 focus:outline-none checked:bg-primary checked:border-primary appearance-none relative"+(V?' after:content-[""] after:absolute after:top-1/2 after:left-1/2 after:transform after:-translate-x-1/2 after:-translate-y-1/2 after:w-1 after:h-1 sm:after:w-1.5 sm:after:h-1.5 after:bg-white after:rounded-full':""):"h-3 w-3 sm:h-4 sm:w-4 text-primary accent-primary bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-primary focus:ring-offset-0 checked:bg-primary checked:border-primary"}`,style:U?{minHeight:"12px",minWidth:"12px",maxHeight:"12px",maxWidth:"12px"}:{minHeight:"12px",minWidth:"12px",maxHeight:"12px",maxWidth:"12px"}}),i.jsx("span",{className:"flex-1 text-xs sm:text-sm leading-tight",children:X.label}),X.count>0&&i.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full",children:X.count})]},X.value)})})]},P)},[f,n,y,w]);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:She}}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:e}),i.jsxs("div",{style:{top:u.top,height:u.height},className:`
        fixed left-0
        w-72 sm:w-80 md:w-96
        bg-background border-r border-border
        transform transition-transform duration-300 ease-in-out
        z-40
        flex flex-col
        ${t?"translate-x-0":"-translate-x-full"}
        ${a}
      `,children:[i.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-3 sm:p-4 border-b border-border bg-muted/80 backdrop-blur supports-[backdrop-filter]:bg-muted/60",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Z6,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),i.jsx("h2",{className:"font-semibold text-base sm:text-lg",children:"Filter Raffles"})]}),i.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[j&&i.jsx(we,{variant:"ghost",size:"sm",onClick:T,className:"text-xs px-2 sm:px-3 h-7 sm:h-8 hover:bg-destructive/10 hover:text-destructive",children:"Clear All"}),i.jsx(we,{variant:"ghost",size:"sm",onClick:e,className:"hover:bg-muted h-7 w-7 sm:h-8 sm:w-8 p-0",title:"Close filters",children:i.jsx(vi,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]}),i.jsx("div",{className:"p-3 sm:p-4 bg-muted/30",children:i.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Showing ",i.jsx("span",{className:"font-medium text-foreground",children:s})," raffles"]})}),i.jsx("div",{className:"p-3 sm:p-4 border-b border-border/30",children:i.jsx(Che,{onFilterChange:r,hasActiveFilters:j})}),i.jsxs("div",{className:"flex-1 overflow-y-auto",children:[_("Raffle State","raffleState",g.raffleState),_("Raffle Type","raffleType",g.raffleType),_("Prize Type","prizeType",g.prizeType),_("Prize Standard","prizeStandard",g.prizeStandard)]})]})]})},Ahe=({onClick:t,hasActiveFilters:e=!1,className:n="",variant:r="outline",size:s="default"})=>($b(),i.jsxs(we,{variant:"primary",size:s,onClick:t,className:`
        relative flex items-center gap-2 border-0
        ${n}
      `,children:[i.jsx("span",{className:"font-medium",children:e?"Filters Applied":"Filter Pools"}),e&&i.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-primary-foreground/20 rounded-full",children:"Active"})]})),Phe=({raffles:t=[],loading:e=!1,error:n=null,RaffleCardComponent:r,emptyMessage:s="No raffles found matching your filters.",className:o="",totalCount:a,showCount:l=!0})=>e?i.jsx("div",{className:`space-y-6 ${o}`,children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((c,u)=>i.jsx("div",{className:"bg-card/80 backdrop-blur-sm border border-border/50 rounded-xl p-6 shadow-lg animate-pulse",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-3 bg-muted rounded"}),i.jsx("div",{className:"h-3 bg-muted rounded w-5/6"})]}),i.jsx("div",{className:"h-10 bg-muted rounded"})]})},u))})}):n?i.jsx("div",{className:o,children:i.jsx(Nv,{error:n,onRetry:null,showCreateButton:!0})}):!t||t.length===0?i.jsx("div",{className:`flex flex-col items-center justify-center py-12 ${o}`,children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"w-16 h-16 mx-auto bg-muted/20 rounded-full flex items-center justify-center",children:i.jsx(dl,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Raffles Found"}),i.jsx("p",{className:"text-muted-foreground max-w-md",children:s})]})}):i.jsx("div",{className:`space-y-6 ${o}`,children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(c=>i.jsx(r,{raffle:c},c.id||c.address))})}),Rhe=(t=[],e="")=>{const{filterByEnhancedType:n}=Bb(),[r,s]=k.useState(zI()),[o,a]=k.useState(!1),l=k.useMemo(()=>{let _=t;if(e&&e.trim()){const P=e.toLowerCase().trim();_=_.filter(D=>!!(D.name&&D.name.toLowerCase().includes(P)||D.address&&D.address.toLowerCase().includes(P)))}if(Yk(r)&&!e)return _;r.raffleType&&r.raffleType.length>0&&(_=n(_,r.raffleType));const v={...r,raffleType:[]};return Yk(v)||(_=Nhe(_,v)),_},[t,r,e,n]),c=k.useMemo(()=>!Yk(r)||e&&e.trim()!=="",[r,e]),u=k.useCallback(_=>{s(_)},[]),f=k.useCallback(()=>{s(zI())},[]),p=k.useCallback(()=>{a(_=>!_)},[]),m=k.useCallback(()=>{a(!0)},[]),g=k.useCallback(()=>{a(!1)},[]),w=k.useCallback(_=>{s(v=>({...v,raffleState:Array.isArray(_)?_:[_]}))},[]),y=k.useCallback(_=>{s(v=>({...v,raffleType:[_]}))},[]),T=k.useCallback(_=>{s(v=>({...v,prizeType:Array.isArray(_)?_:[_]}))},[]),j=k.useCallback(_=>{s(v=>({...v,prizeStandard:Array.isArray(_)?_:[_]}))},[]);return{filters:r,filteredRaffles:l,isFilterOpen:o,hasActiveFilters:c,updateFilters:u,clearFilters:f,toggleFilter:p,openFilter:m,closeFilter:g,filterByState:w,filterByType:y,filterByPrizeType:T,filterByPrizeStandard:j,totalRaffles:t.length,filteredCount:l.length}},Ihe=({initialCount:t=12,cacheTTLms:e=120*1e3,useCache:n=!0}={})=>{const{chainId:r,provider:s}=an(),[o,a]=k.useState([]),[l,c]=k.useState(!1),[u,f]=k.useState(null),[p,m]=k.useState(null),g=k.useRef(!0),w=k.useMemo(()=>r?`raffle_summaries_${r}`:null,[r]),y=k.useMemo(()=>{var A;if(s)return s;if(r&&((A=jt[r])!=null&&A.rpcUrl))try{return new yh(jt[r].rpcUrl)}catch{}return null},[s,r]),T=k.useCallback(()=>{var A,x;return r&&((x=(A=jt[r])==null?void 0:A.contractAddresses)==null?void 0:x.protocolManager)},[r]),j=k.useCallback(()=>{if(!n||!w)return null;try{const A=localStorage.getItem(w);if(!A)return null;const x=JSON.parse(A);return!(x!=null&&x.timestamp)||!Array.isArray(x==null?void 0:x.summaries)||Date.now()-x.timestamp>e?null:x.summaries}catch{return null}},[w,e,n]),_=k.useCallback(A=>{if(!(!n||!w))try{localStorage.setItem(w,JSON.stringify({timestamp:Date.now(),summaries:A}))}catch{}},[w,n]),v=k.useCallback(async()=>{const A=T();if(!A||!y)throw new Error("ProtocolManager not available");const x=new Mt(A,tn.protocolManager,y),C=[];let L=0,z=!0;const R=100,I=1e3;for(;z&&C.length<I;){const[F,E,M]=await x.getAllPools(L,R);if(C.push(...F),L=E.toNumber?E.toNumber():Number(E),z=M,F.length===0)break}const N=C.slice().reverse();return g.current&&m(N.length),N},[T,y]),P=(A,x)=>{let C;return Promise.race([A.finally(()=>clearTimeout(C)),new Promise((L,z)=>C=setTimeout(()=>z(new Error("timeout")),x))])},D=k.useCallback((A,{name:x,startTime:C,duration:L,slotFee:z,ticketLimit:R,winnersCount:I,stateNum:N})=>({id:A,address:A,chainId:r,name:x,startTime:C!=null&&C.toNumber?C.toNumber():Number(C||0),duration:L!=null&&L.toNumber?L.toNumber():Number(L||0),slotFee:z,ticketLimit:R!=null&&R.toNumber?R.toNumber():Number(R||0),winnersCount:I!=null&&I.toNumber?I.toNumber():Number(I||0),stateNum:(()=>{if(N!=null&&N.toNumber)return N.toNumber();if(N===0)return 0;if(typeof N=="number")return N;if(N==null)return 5;const F=Number(N);return Number.isFinite(F)?F:5})(),isSummary:!0}),[r]),$="0xca11bde05977b3631167028862be2a173976ca11",U=[{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"bool",name:"allowFailure",type:"bool"},{internalType:"bytes",name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{internalType:"bool",name:"success",type:"bool"},{internalType:"bytes",name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"payable",type:"function"}],K=k.useCallback(async()=>{if(!y)return!1;try{const A=await y.getCode($);return A&&A!=="0x"}catch{return!1}},[y]),Y=k.useCallback(async A=>{const x=new Gm(tn.pool),C=[];for(const N of A)C.push({target:N,allowFailure:!0,callData:x.encodeFunctionData("name",[])},{target:N,allowFailure:!0,callData:x.encodeFunctionData("startTime",[])},{target:N,allowFailure:!0,callData:x.encodeFunctionData("duration",[])},{target:N,allowFailure:!0,callData:x.encodeFunctionData("slotFee",[])},{target:N,allowFailure:!0,callData:x.encodeFunctionData("ticketLimit",[])},{target:N,allowFailure:!0,callData:x.encodeFunctionData("winnersCount",[])},{target:N,allowFailure:!0,callData:x.encodeFunctionData("state",[])});const z=await new Mt($,U,y).callStatic.aggregate3(C,{value:0}),R=7,I=[];for(let N=0;N<A.length;N++){const F=N*R,E=(se,ie)=>{const pe=z[F+se];if(!pe||!pe.success)return null;try{return x.decodeFunctionResult(ie,pe.returnData)[0]}catch{return null}},M=E(0,"name")||"Raffle",ee=E(1,"startTime")||ce.from(0),O=E(2,"duration")||ce.from(0),q=E(3,"slotFee")||ce.from(0),H=E(4,"ticketLimit")||ce.from(0),J=E(5,"winnersCount")||ce.from(0);let Q=E(6,"state");Q==null&&(Q=ce.from(5));const ne=D(A[N],{name:M,startTime:ee,duration:O,slotFee:q,ticketLimit:H,winnersCount:J,stateNum:Q});I.push(ne)}return I},[y,D]),G=k.useCallback(async(A,x=8e3)=>{const C=new Mt(A,tn.pool,y),[L,z,R,I,N,F,E]=await Promise.all([P(C.name(),x).catch(()=>"Raffle"),P(C.startTime(),x).catch(()=>ce.from(0)),P(C.duration(),x).catch(()=>ce.from(0)),P(C.slotFee(),x).catch(()=>ce.from(0)),P(C.ticketLimit(),x).catch(()=>ce.from(0)),P(C.winnersCount(),x).catch(()=>ce.from(0)),P(C.state(),x).catch(()=>ce.from(5))]);return D(A,{name:L,startTime:z,duration:R,slotFee:I,ticketLimit:N,winnersCount:F,stateNum:E})},[y,D]),X=k.useCallback(async()=>{if(!(!r||!y)){c(!0),f(null);try{const x=(await v()).slice(0,Math.max(1,t));let C=[];try{await K()&&(C=await Y(x))}catch{}if(!C||C.length===0){const L=[];let R=0;async function I(){if(R>=x.length)return;const F=R++;try{const E=await G(x[F]);E&&L.push(E)}catch{}await I()}const N=Array.from({length:Math.min(3,x.length)},()=>I());await Promise.all(N),C=L}C.sort((L,z)=>x.indexOf(L.address)-x.indexOf(z.address)),g.current&&(a(C),_(C))}catch(A){g.current&&f(A.message||"Failed to load summaries")}finally{g.current&&c(!1)}}},[r,y,t,v,K,Y,G,_]),V=k.useCallback(()=>{X()},[X]);return k.useEffect(()=>(g.current=!0,()=>{g.current=!1}),[]),k.useEffect(()=>{if(!r)return;const A=j();A&&A.length&&a(A),X()},[r,j,X]),{summaries:o,loading:l,error:u,refresh:V,totalAvailable:p}};var WC="Progress",HC=100,[Mhe,y0e]=Mi(WC),[Dhe,Ohe]=Mhe(WC),nB=k.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=Lhe,...a}=t;(s||s===0)&&!$I(s)&&console.error(Fhe(`${s}`,"Progress"));const l=$I(s)?s:HC;r!==null&&!BI(r,l)&&console.error(zhe(`${r}`,"Progress"));const c=BI(r,l)?r:null,u=kb(c)?o(c,l):void 0;return i.jsx(Dhe,{scope:n,value:c,max:l,children:i.jsx(Pt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":kb(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":iB(c,l),"data-value":c??void 0,"data-max":l,...a,ref:e})})});nB.displayName=WC;var rB="ProgressIndicator",sB=k.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=Ohe(rB,n);return i.jsx(Pt.div,{"data-state":iB(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});sB.displayName=rB;function Lhe(t,e){return`${Math.round(t/e*100)}%`}function iB(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function kb(t){return typeof t=="number"}function $I(t){return kb(t)&&!isNaN(t)&&t>0}function BI(t,e){return kb(t)&&!isNaN(t)&&t<=e&&t>=0}function Fhe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${HC}\`.`}function zhe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${HC} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var $he=nB,Bhe=sB;const Uhe=uu("relative w-full overflow-hidden rounded-full",{variants:{size:{sm:"h-1.5",default:"h-2",md:"h-3",lg:"h-4"},variant:{default:"bg-primary/20",muted:"bg-muted/50",gradient:"bg-muted/30"}},defaultVariants:{size:"default",variant:"default"}}),Vhe=uu("h-full w-full flex-1 transition-all duration-500",{variants:{variant:{default:"bg-primary",gradient:"bg-gradient-to-r from-primary via-primary/80 to-primary",success:"bg-gradient-to-r from-green-500 to-green-400",warning:"bg-gradient-to-r from-yellow-500 to-yellow-400",danger:"bg-gradient-to-r from-red-500 to-red-400"}},defaultVariants:{variant:"default"}});function UI({className:t,value:e,size:n,variant:r="default",indicatorVariant:s,showGlow:o=!1,showShimmer:a=!1,...l}){const c=Math.min(100,Math.max(0,e||0));return i.jsxs($he,{"data-slot":"progress",className:je(Uhe({size:n,variant:r}),t),...l,children:[i.jsx(Bhe,{"data-slot":"progress-indicator",className:je(Vhe({variant:s||r}),"rounded-full"),style:{transform:`translateX(-${100-c}%)`}}),a&&c>0&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer rounded-full",style:{width:`${c}%`}}),o&&c>0&&c<100&&i.jsx("div",{className:"absolute top-0 bottom-0 w-2 bg-primary/50 blur-sm rounded-full",style:{left:`calc(${c}% - 4px)`}})]})}const jv=(t,e)=>{const[n,r]=k.useState(0),[s,o]=k.useState(!1),{getContractInstance:a}=xn();return k.useEffect(()=>{(async()=>{if(!t||e!==4&&e!==6){r(0);return}o(!0);try{const c=a(t,"pool");if(!c){r(0);return}const u=await c.winnersCount(),f=u.toNumber?u.toNumber():Number(u);r(f)}catch(c){console.warn("Failed to fetch winner count for",t,c),r(0)}finally{o(!1)}})()},[t,e,a]),{winnerCount:n,loading:s}},oB=(t,e)=>t===6?e===1?"Prize Claimed":"Prizes Claimed":null,aB=(t,e,n,r={})=>{const s=[],o=/\/$/.test(t),a=t.replace(/\/$/,""),l=e!=null?e.toString():"0",u=(e!=null?BigInt(e):0n).toString(16).padStart(64,"0"),f=u.toUpperCase(),p=n===1,m=n===0,g=y=>{const T=[],j=y.replace(/\/?(?:[0-9]+|[a-fA-F0-9]{64})(?:\.json)?$/,"");return j&&j!==y&&(T.push(j),T.push(`${j}/`),T.push(`${j}/index.json`),T.push(`${j}/metadata.json`)),T};if(t.match(/\/(?:[0-9]+|[a-fA-F0-9]{64})(?:\.json)?$/)!==null){if((p||r.prioritizeRoot)&&s.push(...g(t)),s.push(t),t.includes(".json")||s.push(`${t}.json`),m&&s.push(...g(t)),p){const y=(T,j=!0)=>{const _=[];return T.match(new RegExp(`/${l}(?:\\.json)?$`))&&(_.push(T.replace(new RegExp(`/${l}(?:\\.json)?$`),`/${u}`)),j&&_.push(T.replace(new RegExp(`/${l}(?:\\.json)?$`),`/${u}.json`)),_.push(T.replace(new RegExp(`/${l}(?:\\.json)?$`),`/${f}`)),j&&_.push(T.replace(new RegExp(`/${l}(?:\\.json)?$`),`/${f}.json`))),T.match(new RegExp(`${l}(?:\\.json)?$`))&&(_.push(T.replace(new RegExp(`${l}(?:\\.json)?$`),`${u}`)),j&&_.push(T.replace(new RegExp(`${l}(?:\\.json)?$`),`${u}.json`)),_.push(T.replace(new RegExp(`${l}(?:\\.json)?$`),`${f}`)),j&&_.push(T.replace(new RegExp(`${l}(?:\\.json)?$`),`${f}.json`))),_};s.push(...y(t,!0))}}else p?(s.push(t),o&&s.push(a+"/"),s.push(`${a}.json`),s.push(`${a}/index.json`),s.push(`${a}/metadata.json`),s.push(`${a}/${u}`),s.push(`${a}${u}`),s.push(`${a}/${u}.json`),s.push(`${a}${u}.json`),s.push(`${a}/${f}`),s.push(`${a}${f}`),s.push(`${a}/${f}.json`),s.push(`${a}${f}.json`),s.push(`${a}/${l}`),s.push(`${a}${l}`),s.push(`${a}/${l}.json`),s.push(`${a}${l}.json`)):(s.push(t),o&&s.push(a+"/"),s.push(`${a}.json`),s.push(`${a}/index.json`),s.push(`${a}/metadata.json`),s.push(`${a}/${l}`),s.push(`${a}${l}`),s.push(`${a}/${l}.json`),s.push(`${a}${l}.json`)),t.includes("{id}")&&(s.push(t.replace("{id}",u)),s.push(t.replace("{id}",l)),s.push(t.replace("{id}",f)));return[...new Set(s)]},lB="fairpad_uri_registry",cB="fairpad_collection_uris";function ph(t){return!t||t.trim()===""?Rb:ir(li(t))}function Er(t){return!t||typeof t!="string"?!1:/^0x[a-fA-F0-9]{64}$/.test(t)}function Od(t){return t===Rb||t==="0x0000000000000000000000000000000000000000000000000000000000000000"}function uB(){try{const t=localStorage.getItem(lB);return t?JSON.parse(t):{}}catch(t){return console.warn("[URIRegistry] Failed to read from localStorage:",t),{}}}function qhe(t){try{localStorage.setItem(lB,JSON.stringify(t))}catch(e){console.warn("[URIRegistry] Failed to save to localStorage:",e)}}function VI(t){if(!t||t.trim()==="")return Rb;const e=ph(t),n=uB();return n[e]||(n[e]=t,qhe(n),console.log("[URIRegistry] Registered URI:",{hash:e.slice(0,10)+"...",uri:t.slice(0,50)+"..."})),e}function Whe(t){return!t||Od(t)?null:uB()[t]||null}function dB(){try{const t=localStorage.getItem(cB);return t?JSON.parse(t):{}}catch(t){return console.warn("[URIRegistry] Failed to read collection URIs:",t),{}}}function Hhe(t){try{localStorage.setItem(cB,JSON.stringify(t))}catch(e){console.warn("[URIRegistry] Failed to save collection URIs:",e)}}function fB(t,e){if(!t||!bn(t)){console.warn("[URIRegistry] Invalid collection address");return}const n=t.toLowerCase(),r=dB();r[n]={dropURI:e.dropURI||"",unrevealedURI:e.unrevealedURI||"",dropURIHash:e.dropURIHash||ph(e.dropURI||""),unrevealedURIHash:e.unrevealedURIHash||ph(e.unrevealedURI||""),timestamp:Date.now()},Hhe(r),e.dropURI&&VI(e.dropURI),e.unrevealedURI&&VI(e.unrevealedURI),console.log("[URIRegistry] Stored collection URIs:",n)}function Rh(t){if(!t||!bn(t))return null;const e=t.toLowerCase();return dB()[e]||null}async function Ghe(t,e,n){if(!t||!e||!n)return null;try{const r=e.filters.CollectionURIsSet(t),s=await n.getBlockNumber(),o=Math.max(0,s-1e4),a=await e.queryFilter(r,o,s);if(a.length>0){const l=a[a.length-1],{dropURI:c,unrevealedURI:u,dropURIHash:f,unrevealedURIHash:p}=l.args;return fB(t,{dropURI:c,unrevealedURI:u,dropURIHash:f,unrevealedURIHash:p}),{dropURI:c,unrevealedURI:u,dropURIHash:f,unrevealedURIHash:p,source:"event"}}return null}catch(r){return console.warn("[URIRegistry] Failed to resolve URIs from events:",r),null}}async function gd(t,e={}){if(!t||Od(t))return null;const n=Whe(t);if(n)return n;if(e.collectionAddress&&e.uriType){const r=Rh(e.collectionAddress);if(r){const s=r[e.uriType];if(s&&ph(s)===t)return s}}if(e.collectionAddress&&e.nftFactoryContract&&e.provider){const r=await Ghe(e.collectionAddress,e.nftFactoryContract,e.provider);if(r){if(e.uriType==="dropURI"&&r.dropURIHash===t)return r.dropURI;if(e.uriType==="unrevealedURI"&&r.unrevealedURIHash===t)return r.unrevealedURI;if(r.dropURI&&ph(r.dropURI)===t)return r.dropURI;if(r.unrevealedURI&&ph(r.unrevealedURI)===t)return r.unrevealedURI}}return null}const hB=["Pending","Active","Ended","Drawing","Completed","Deleted","AllPrizesClaimed","Unengaged"],Khe=({raffle:t})=>{const e=mo(),{chainId:n}=an(),[r,s]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(""),{getContractInstance:u}=xn(),{updateCollabStatus:f,setCollabLoading:p,getCollabStatus:m}=Bb(),{formatSlotFee:g,formatPrizeAmount:w,getCurrencySymbol:y}=er(),[T,j]=k.useState(null),{winnerCount:_}=jv(t.address,t.stateNum),[v,P]=k.useState(null),[D,$]=k.useState(null),[U,K]=k.useState(null),[Y,G]=k.useState(null),[X,V]=k.useState(!1),[A,x]=k.useState([]),[C,L]=k.useState(0);k.useEffect(()=>{let q;function H(){const ne=Math.floor(Date.now()/1e3);let se="",ie=0;if(t.stateNum===2||t.stateNum===3||t.stateNum===4||t.stateNum===5||t.stateNum===6||t.stateNum===7){se="Duration";const pe=t.actualDuration&&(t.actualDuration.toNumber?t.actualDuration.toNumber():Number(t.actualDuration));ie=pe&&pe>0?pe:t.duration,s(se),a(Q(ie));return}ne<t.startTime?(se="Starts In",ie=t.startTime-ne):(se="Ends In",ie=t.startTime+t.duration-ne),s(se),a(ie>0?J(ie):"Ended")}function J(ne){const se=Math.floor(ne/86400),ie=Math.floor(ne%86400/3600),pe=Math.floor(ne%3600/60),le=ne%60;let me="";return se>0&&(me+=`${se}d `),(ie>0||se>0)&&(me+=`${ie}h `),(pe>0||ie>0||se>0)&&(me+=`${pe}m `),me+=`${le}s`,me.trim()}function Q(ne){const se=Math.floor(ne/86400),ie=Math.floor(ne%86400/3600),pe=Math.floor(ne%3600/60);let le="";return se>0&&(le+=`${se}d `),(ie>0||se>0)&&(le+=`${ie}h `),(pe>0||ie>0||se>0)&&(le+=`${pe}m`),le||(le="0m"),le.trim()}return H(),q=setInterval(H,1e3),()=>clearInterval(q)},[t]),k.useEffect(()=>{let q=!0;return(async()=>{if(t.erc20PrizeToken&&t.erc20PrizeToken!==$e){if(window.__erc20SymbolCache||(window.__erc20SymbolCache={}),window.__erc20SymbolCache[t.erc20PrizeToken]){c(window.__erc20SymbolCache[t.erc20PrizeToken]);return}await new Promise(J=>setTimeout(J,100));try{const J=window.ethereum?new zl(window.ethereum):Ju(),Q=["function symbol() view returns (string)"],se=await new Mt(t.erc20PrizeToken,Q,J).symbol();q&&(c(se),window.__erc20SymbolCache[t.erc20PrizeToken]=se)}catch{q&&c("TOKEN")}}})(),()=>{q=!1}},[t.erc20PrizeToken]),k.useEffect(()=>{let q=!0;async function H(){try{const J=u&&u(t.address,"pool");if(!J){q&&j(null);return}const Q=await t3(J);q&&j(Q)}catch{j(null)}}H()},[t.address,u]),k.useEffect(()=>{async function q(){if(!(!t.prizeCollection||t.prizeCollection===$e))try{const H=u(t.address,"pool");if(!H)return;const[J,Q,ne]=await Promise.all([H.isCollabPool().catch(()=>null),H.usesCustomFee().catch(()=>null),H.isEscrowedPrize().catch(()=>null)]);K({isCollabPool:J,usesCustomFee:Q,isEscrowedPrize:ne})}catch{}}q()},[t.address,t.prizeCollection,u]),k.useEffect(()=>{(async()=>{if(!t||!t.prizeCollection||t.prizeCollection===$e){P(null),$(null);return}try{let H=null,J=null,Q=null;if(typeof t.standard<"u"){const ne=t.standard===0?"erc721Prize":"erc1155Prize";if(H=u(t.prizeCollection,ne),H){try{typeof H.name=="function"&&(J=await H.name())}catch{J=null}try{typeof H.symbol=="function"&&(Q=await H.symbol())}catch{Q=null}}}else try{if(H=u(t.prizeCollection,"erc721Prize"),H){try{typeof H.name=="function"&&(J=await H.name())}catch{J=null}try{typeof H.symbol=="function"&&(Q=await H.symbol())}catch{Q=null}}}catch{try{if(H=u(t.prizeCollection,"erc1155Prize"),H){try{typeof H.name=="function"&&(J=await H.name())}catch{J=null}try{typeof H.symbol=="function"&&(Q=await H.symbol())}catch{Q=null}}}catch{}}P(J),$(Q)}catch{P(null),$(null)}})()},[t,u]),k.useEffect(()=>{let q=!0;const H=async()=>{if(m(t.address)!==void 0)return;p(t.address,!0);let Q=!1,ne=0;const se=3;for(;ne<se&&q;)try{const pe=u(t.address,"pool");if(!pe)throw new Error("Failed to get contract instance");const le=await pe.holderTokenAddress();Q=le&&le!==$e;break}catch{ne++,ne>=se?Q=!1:await new Promise(le=>setTimeout(le,1e3*ne))}if(!q)return;let ie;t.isCollabPool?ie="nft_collab":Q?ie="whitelist_collab":ie="not_collab",f(t.address,ie)};return t.address&&u?H():f(t.address,"not_collab"),()=>{q=!1}},[t,u,m,p,f]),k.useEffect(()=>{let q=!0;const H=["https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/"],J=H.map(me=>me.replace("/ipfs/","/ipns/")),Q=["https://arweave.net/"],ne=me=>{if(!me)return[];if(me.startsWith("ipfs://")){let Ee=me.replace("ipfs://","");return Ee.startsWith("ipfs/")&&(Ee=Ee.slice(5)),H.map(te=>`${te}${Ee}`)}if(me.startsWith("ipns://")){let Ee=me.replace("ipns://","");return Ee.startsWith("ipns/")&&(Ee=Ee.slice(5)),J.map(te=>`${te}${Ee}`)}if(me.startsWith("ar://")){const Ee=me.replace("ar://","");return Q.map(te=>`${te}${Ee}`)}try{const Ee=new URL(me),Ne=Ee.pathname.replace(/\/ipfs\/ipfs\//,"/ipfs/").split("/").filter(Boolean),Pe=Ne.indexOf("ipfs");if(Pe!==-1&&Ne[Pe+1]){const Le=Ne.slice(Pe+1).join("/");return H.map(Se=>`${Se}${Le}`)}const et=Ne.indexOf("ipns");if(et!==-1&&Ne[et+1]){const Le=Ne.slice(et+1).join("/");return J.map(Se=>`${Se}${Le}`)}if(Ee.hostname.endsWith("arweave.net")||Ee.hostname==="arweave.net"){const Le=Ne.join("/");return Q.map(Se=>`${Se}${Le}`)}}catch{}return[me]},se=me=>{const Ee=["image","image_url","imageUrl","animation_url","media","artwork"];for(const te of Ee)if(me[te]){const Ne=me[te];return ne(String(Ne))}return null},ie=async(me,Ee=8e3)=>{const te=new AbortController,Ne=setTimeout(()=>te.abort(),Ee);try{const Pe=await fetch(me,{signal:te.signal});return clearTimeout(Ne),Pe}catch(Pe){throw clearTimeout(Ne),Pe}},pe=async me=>{for(const Ee of me)try{const te=await ie(Ee);if(te.ok){const Ne=te.headers.get("content-type");if(Ne!=null&&Ne.startsWith("image/")||Ne!=null&&Ne.startsWith("video/")||Ee.match(/\.(jpg|jpeg|png|gif|svg|webp|mp4|webm)$/i))return{imageUrl:[Ee]};try{const Pe=await te.text(),et=JSON.parse(Pe);if(et&&typeof et=="object"){const Le=se(et);if(Le)return{metadata:et,imageUrl:Le}}}catch{if(Ee.match(/\.(jpg|jpeg|png|gif|svg|webp)$/i))return{imageUrl:[Ee]}}}}catch{continue}return null};async function le(){if(!t.prizeCollection||t.prizeCollection===$e)return;const me=U&&U.isEscrowedPrize!==null?U.isEscrowedPrize===!0:t.isEscrowedPrize===!0,Ee=!me;if(!(t.isCollabPool&&me)){V(!0);try{const te=t.standard===0?"erc721Prize":"erc1155Prize",Ne=u(t.prizeCollection,te);if(!Ne){V(!1);return}let Pe=null;if(t.standard===0)if(Ee){try{Pe=await Ne.unrevealedBaseURI()}catch{}if(!Pe||Pe.trim()===""||Er(Pe)){let Te=null;try{typeof Ne.unrevealedURIHash=="function"&&(Te=await Ne.unrevealedURIHash())}catch{}if(Te&&!Od(Te)){const ze=await gd(Te,{collectionAddress:t.prizeCollection,uriType:"unrevealedURI"});ze&&(Pe=ze)}}if(!Pe||Pe.trim()===""||Er(Pe)){const Te=Rh(t.prizeCollection);Te!=null&&Te.unrevealedURI&&(Pe=Te.unrevealedURI)}if(!Pe||Pe.trim()===""||Er(Pe)){V(!1);return}}else try{Pe=await Ne.tokenURI(t.prizeTokenId)}catch{V(!1);return}else if(t.standard===1)if(Ee){try{Pe=await Ne.unrevealedURI()}catch{}if(Pe&&Er(Pe)&&(Pe=await gd(Pe,{collectionAddress:t.prizeCollection,uriType:"unrevealedURI"})||null),!Pe||Pe.trim()===""){let Te=null;try{typeof Ne.unrevealedURIHash=="function"&&(Te=await Ne.unrevealedURIHash())}catch{}if(Te&&!Od(Te)){const ze=await gd(Te,{collectionAddress:t.prizeCollection,uriType:"unrevealedURI"});ze&&(Pe=ze)}}if(!Pe||Pe.trim()===""||Er(Pe)){const Te=Rh(t.prizeCollection);Te!=null&&Te.unrevealedURI&&(Pe=Te.unrevealedURI)}if(!Pe||Pe.trim()===""||Er(Pe))try{Pe=await Ne.tokenURI(t.prizeTokenId)}catch{}if(!Pe||Pe.trim()===""||Er(Pe))try{Pe=await Ne.uri(t.prizeTokenId)}catch{}}else try{Pe=await Ne.uri(t.prizeTokenId)}catch{V(!1);return}if(!Pe||Pe.trim()===""||Er(Pe)){V(!1);return}const et=aB(Pe,t.prizeTokenId,t.standard),Le=[];for(const Te of et){const ze=ne(Te);Le.push(...ze)}const Se=await pe(Le);if(q&&Se&&Se.imageUrl){const Te=Array.isArray(Se.imageUrl)?Se.imageUrl:[Se.imageUrl];x(Te),L(0),G(Te[0])}}catch{}q&&V(!1)}}return t.prizeCollection&&t.prizeCollection!==$e&&U!==null&&le(),()=>{q=!1}},[t,u,U]);const z=()=>{C+1<A.length?(L(C+1),G(A[C+1])):G(null)},R=()=>{var pe;const q=Math.floor(Date.now()/1e3),H=t.startTime+t.duration,J=q>=H,Q=((pe=t.state)==null?void 0:pe.toLowerCase())==="pending"&&t.startTime&&q>=t.startTime&&!J&&(t.totalSlotsPurchased||0)===0,ne=le=>{const me=oB(le,_);return me||hB[le]||"Unknown"},se=Q?"Live":J&&(t.stateNum===0||t.stateNum===1)?"Ended":ne(t.stateNum),ie={Pending:"pending",Active:"active",Live:"live",Ended:"ended",Drawing:"drawing",Completed:"completed",Deleted:"deleted","Activation Failed":"ended","Prizes Claimed":"completed","Prize Claimed":"completed",Unengaged:"secondary",Unknown:"secondary"};return i.jsx(ll,{variant:ie[se]||"secondary",size:"default",children:se})},I=()=>{var se;const q=Math.floor(Date.now()/1e3),H=t.startTime+t.duration,J=q>=H;return((se=t.state)==null?void 0:se.toLowerCase())==="pending"&&t.startTime&&q>=t.startTime&&!J&&(t.totalSlotsPurchased||0)===0?"bg-gradient-to-r from-green-500 to-green-400":J&&(t.stateNum===0||t.stateNum===1)?"bg-gradient-to-r from-red-500 to-red-400":{0:"bg-gradient-to-r from-yellow-500 to-yellow-400",1:"bg-gradient-to-r from-green-500 to-green-400",2:"bg-gradient-to-r from-red-500 to-red-400",3:"bg-gradient-to-r from-purple-500 to-pink-500",4:"bg-gradient-to-r from-blue-500 to-blue-400",5:"bg-gradient-to-r from-gray-500 to-gray-400",6:"bg-gradient-to-r from-blue-500 to-blue-400",7:"bg-gradient-to-r from-gray-400 to-gray-300"}[t.stateNum]||"bg-gradient-to-r from-gray-400 to-gray-300"},N=()=>{if(!t.prizeCollection||t.prizeCollection===$e)return null;U&&U.isCollabPool!==null?U.isCollabPool:t.isCollabPool;const q=U&&U.usesCustomFee!==null?U.usesCustomFee===!0:t.usesCustomFee===!0,H=U&&U.isEscrowedPrize!==null&&U.isEscrowedPrize!==void 0?U.isEscrowedPrize===!0:t.isEscrowedPrize===!0,J=H===!1;return H&&q?"Lucky NFT Sale":H&&!q?"NFT Giveaway":J&&!q?"NFT Drop (Free Mint)":J&&q?"NFT Drop (Paid Mint)":"NFT Prize"},F=()=>{if(t.isCollabPool)return"NFT Collab";const q=m(t.address);if(q==="nft_collab")return"NFT Collab";if(q===void 0)return"Checking...";if(t.nativePrizeAmount&&t.nativePrizeAmount.gt&&t.nativePrizeAmount.gt(0))return`${y()} Giveaway`;if(t.erc20PrizeToken&&t.erc20PrizeToken!==$e&&t.erc20PrizeAmount&&t.erc20PrizeAmount.gt&&t.erc20PrizeAmount.gt(0))return"Token Giveaway";const H=N();return H||(q==="whitelist_collab"&&!t.isPrized?"Whitelist Collab":t.isPrized?"Token Giveaway":"Whitelist")},E=()=>t.nativePrizeAmount&&t.nativePrizeAmount.gt&&t.nativePrizeAmount.gt(0)?w(t.nativePrizeAmount):t.erc20PrizeAmount&&t.erc20PrizeAmount.gt&&t.erc20PrizeAmount.gt(0)?`${Is(t.erc20PrizeAmount,18)} ${l||"TOKEN"}`:null,M=()=>{const q=t.chainId||n,H=q&&jt[q]?jt[q].name.toLowerCase().replace(/[^a-z0-9]+/g,"-"):q||"",J=H?`/${H}/raffle/${t.address}`:`/raffle/${t.address}`;e(J)};return t.prizeCollection&&t.prizeCollection!==$e&&(Y||X)?i.jsxs("div",{className:"landing-raffle-card group relative bg-card/80 text-foreground backdrop-blur-sm border border-border/50 rounded-xl overflow-hidden shadow-lg hover:shadow-xl hover:border-primary/30 hover:bg-card/90 transition-all duration-300 hover:-translate-y-1 flex flex-col h-full w-full max-w-full cursor-pointer",onClick:M,children:[i.jsx("div",{className:`h-1 w-full ${I()}`}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),i.jsxs("div",{className:"relative w-full h-40 bg-muted/30 overflow-hidden",children:[X?i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-primary border-t-transparent rounded-full"})}):Y?i.jsx(i.Fragment,{children:i.jsx("img",{src:Y,alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",onError:z})}):i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/50",children:i.jsx(dl,{className:"h-10 w-10 text-muted-foreground/50"})}),i.jsx("div",{className:"absolute top-2 right-2",children:R()})]}),i.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-1",children:[i.jsx("h3",{className:"font-display text-[length:var(--text-lg)] font-semibold truncate mb-4 group-hover:text-primary transition-colors duration-200",children:t.name}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("span",{className:"text-muted-foreground text-[length:var(--text-sm)] block",children:"Slot Fee"}),i.jsx("span",{className:"font-medium text-[length:var(--text-sm)]",children:g(t.slotFee||"0")})]}),i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("span",{className:"text-muted-foreground text-[length:var(--text-sm)] block",children:"Winners"}),i.jsx("span",{className:"font-medium text-[length:var(--text-sm)]",children:t.winnersCount})]})]}),i.jsxs("div",{className:"relative mt-auto pt-3 border-t border-border/30 space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-[length:var(--text-sm)]",children:[i.jsx("span",{className:"text-muted-foreground",children:"Progress (Slots Sold)"}),i.jsx("span",{className:"font-medium",children:T!==null?`${T} / ${t.slotLimit}`:"..."})]}),T!==null&&t.slotLimit&&i.jsx(UI,{value:Math.min(100,T/t.slotLimit*100),size:"default",variant:"gradient",indicatorVariant:"gradient",showShimmer:!0})]})]})]}):i.jsxs("div",{className:"landing-raffle-card group relative bg-card/80 text-foreground backdrop-blur-sm border border-border/50 rounded-xl overflow-hidden shadow-lg hover:shadow-xl hover:border-primary/30 hover:bg-card/90 transition-all duration-300 hover:-translate-y-1 flex flex-col h-full w-full max-w-full cursor-pointer",onClick:M,children:[i.jsx("div",{className:`h-1 w-full ${I()}`}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),i.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-1",children:[i.jsxs("div",{className:"relative flex items-start justify-between mb-4 min-w-0 gap-2",children:[i.jsx("h3",{className:"font-display text-[length:var(--text-lg)] font-semibold truncate flex-1 min-w-0 group-hover:text-primary transition-colors duration-200",children:t.name}),i.jsx("div",{className:"flex-shrink-0",children:R()})]}),i.jsxs("div",{className:"relative grid grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("span",{className:"text-muted-foreground text-[length:var(--text-sm)] block",children:"Slot Fee"}),i.jsx("span",{className:"font-medium text-[length:var(--text-sm)]",children:g(t.slotFee||"0")})]}),i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("span",{className:"text-muted-foreground text-[length:var(--text-sm)] block",children:"Winners"}),i.jsx("span",{className:"font-medium text-[length:var(--text-sm)]",children:t.winnersCount})]})]}),i.jsxs("div",{className:"relative grid grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("span",{className:"text-muted-foreground text-[length:var(--text-sm)] block",children:r}),i.jsx("span",{className:"font-medium text-[length:var(--text-sm)]",children:o})]}),!t.isSummary&&i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("span",{className:"text-muted-foreground text-[length:var(--text-sm)] block",children:"Pool Type"}),i.jsx("span",{className:"font-medium text-[length:var(--text-sm)] truncate block",children:F()})]})]}),i.jsxs("div",{className:"relative grid grid-cols-2 gap-3 mb-4 min-w-0",children:[(()=>{var Q,ne,se;if(F(),!(t.prizeCollection&&t.prizeCollection!==$e))return null;const H=U&&U.isEscrowedPrize!==null?U.isEscrowedPrize===!0:t.isEscrowedPrize===!0,J=!H;if(H){const ie=t.prizeTokenId!==void 0&&t.prizeTokenId!==null?`#${t.prizeTokenId}`:"#Unknown",pe=D?`${D} ${ie}`:v?`${v} ${ie}`:`${(Q=t.prizeCollection)==null?void 0:Q.slice(0,10)}... ${ie}`;return i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("span",{className:"text-muted-foreground text-[length:var(--text-sm)] block",children:"Prize Token ID"}),i.jsx("span",{className:`font-medium text-[length:var(--text-sm)] truncate block ${D||v?"":"font-mono"}`,children:pe})]})}else if(J){const ie=v&&v.trim()!=="";t.standard===0||t.standard;const pe=t.standard===1,le=pe?`${(ne=t.prizeCollection)==null?void 0:ne.slice(0,10)}...`:ie?v:`${(se=t.prizeCollection)==null?void 0:se.slice(0,10)}...`;return i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("span",{className:"text-muted-foreground text-[length:var(--text-sm)] block",children:"Collection"}),i.jsx("span",{className:`font-medium text-[length:var(--text-sm)] truncate block ${ie&&!pe?"":"font-mono"}`,children:le})]})}return null})(),(()=>{const q=F();return t.prizeCollection&&t.prizeCollection!==$e&&t.isCollabPool===!1?null:q==="Token Giveaway"||q.includes("Giveaway")?i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("span",{className:"text-muted-foreground text-[length:var(--text-sm)] block",children:"Prize Amount"}),i.jsx("span",{className:"font-medium text-[length:var(--text-sm)] truncate block",children:E()})]}):null})()]}),i.jsxs("div",{className:"relative mt-auto pt-3 border-t border-border/30 space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-[length:var(--text-sm)]",children:[i.jsx("span",{className:"text-muted-foreground",children:"Progress (Slots Sold)"}),i.jsx("span",{className:"font-medium",children:T!==null?`${T} / ${t.slotLimit}`:"..."})]}),T!==null&&t.slotLimit&&i.jsx(UI,{value:Math.min(100,T/t.slotLimit*100),size:"default",variant:"gradient",indicatorVariant:"gradient",showShimmer:!0})]})]})]})},Yhe=()=>{const{connected:t}=an(),{isMobile:e}=Ln();er();const[n,r]=k.useState(1),[s,o]=k.useState(""),{raffles:a,loading:l,error:c,refreshRaffles:u}=The({autoFetch:!0,enablePolling:!0,pollingInterval:12e4,maxRaffles:null}),{summaries:f,totalAvailable:p}=Ihe({initialCount:12}),{filters:m,filteredRaffles:g,isFilterOpen:w,hasActiveFilters:y,updateFilters:T,clearFilters:j,toggleFilter:_,filteredCount:v}=Rhe(a,s),P=()=>{j(),o("")};if(k.useEffect(()=>{r(1)},[e,l,a==null?void 0:a.length,g==null?void 0:g.length,f==null?void 0:f.length,y,s]),!t)return i.jsxs(ql,{className:"pt-8 pb-4",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsxs("h1",{className:"font-display text-[length:var(--text-4xl)] font-bold mb-4 leading-tight tracking-tighter",children:["Fairness and Transparency,"," ",i.jsx("span",{className:"bg-gradient-to-r from-brand-500 via-brand-400 to-brand-300 bg-clip-text text-transparent bg-[length:200%_100%] animate-gradient-x",children:"On-Chain"})]}),i.jsx("p",{className:"font-body text-[length:var(--text-lg)] text-muted-foreground max-w-2xl mx-auto leading-relaxed mb-8",children:"Dropr is a permissionless platform built to host decentralized, on-chain raffles. All draws are public and auditable."}),i.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-2",children:[i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(xs,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"VRF Powered"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(hn,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Fair Draws"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(nl,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Fully Auditable"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(Qp,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Trustless"})]})]})]}),i.jsx("div",{className:"max-w-md mx-auto",children:i.jsxs("div",{className:"bg-card/80 backdrop-blur-sm border border-border/50 rounded-2xl p-8 text-center shadow-lg",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(vm,{className:"h-8 w-8 text-primary"})}),i.jsx("h3",{className:"font-display text-[length:var(--text-2xl)] font-bold mb-3 leading-tight",children:"Connect Your Wallet"}),i.jsx("p",{className:"font-body text-[length:var(--text-base)] text-muted-foreground mb-6",children:"Connect your wallet to view and interact with raffles on the blockchain."})]})})]});const D=e&&(f==null?void 0:f.length)>0&&(!a||a.length===0||l);let $=null;if(D)if(!m||!m.raffleState||m.raffleState.length===0)$=f;else{const K=new Set(m.raffleState.map(Y=>Y.toLowerCase()));$=f.filter(Y=>{var X;const G=(X=hB[Y.stateNum])==null?void 0:X.toLowerCase();return K.has(G)})}return!D&&l?i.jsxs(ql,{className:"pt-8 pb-4",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsxs("h1",{className:"font-display text-[length:var(--text-4xl)] font-bold mb-4 leading-tight tracking-tighter",children:["Fairness and Transparency,"," ",i.jsx("span",{className:"bg-gradient-to-r from-brand-500 via-brand-400 to-brand-300 bg-clip-text text-transparent bg-[length:200%_100%] animate-gradient-x",children:"On-Chain"})]}),i.jsx("p",{className:"font-body text-[length:var(--text-lg)] text-muted-foreground max-w-2xl mx-auto leading-relaxed mb-8",children:"Dropr is a permissionless platform built to host decentralized, on-chain raffles. All draws are public and auditable."}),i.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-2",children:[i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(xs,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"VRF Powered"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(hn,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Fair Draws"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(nl,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Fully Auditable"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(Qp,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Trustless"})]})]})]}),i.jsx(X$,{message:"Loading raffles from blockchain...",isMobile:e})]}):!D&&c?i.jsxs(ql,{className:"pt-8 pb-4",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsxs("h1",{className:"font-display text-[length:var(--text-4xl)] font-bold mb-4 leading-tight tracking-tighter",children:["Fairness and Transparency,"," ",i.jsx("span",{className:"bg-gradient-to-r from-brand-500 via-brand-400 to-brand-300 bg-clip-text text-transparent bg-[length:200%_100%] animate-gradient-x",children:"On-Chain"})]}),i.jsx("p",{className:"font-body text-[length:var(--text-lg)] text-muted-foreground max-w-2xl mx-auto leading-relaxed mb-8",children:"Dropr is a permissionless platform built to host decentralized, on-chain raffles. All draws are public and auditable."}),i.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-2",children:[i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(xs,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"VRF Powered"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(hn,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Fair Draws"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(nl,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Fully Auditable"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(Qp,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Trustless"})]})]})]}),i.jsx(Nv,{error:c,onRetry:u,isMobile:e,showCreateButton:!0})]}):i.jsxs(Ae.Fragment,{children:[i.jsx(_he,{isOpen:w,onToggle:_,filters:m,onFiltersChange:T,raffleCount:v,allRaffles:a}),i.jsx("div",{className:"min-h-screen",style:{position:"relative",zIndex:1},children:i.jsxs(ql,{className:"pt-8 pb-4",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsxs("h1",{className:"font-display text-[length:var(--text-4xl)] font-bold mb-4 leading-tight tracking-tighter",children:["Fairness and Transparency,"," ",i.jsx("span",{className:"bg-gradient-to-r from-brand-500 via-brand-400 to-brand-300 bg-clip-text text-transparent bg-[length:200%_100%] animate-gradient-x",children:"On-Chain"})]}),i.jsx("p",{className:"font-body text-[length:var(--text-lg)] text-muted-foreground max-w-2xl mx-auto leading-relaxed mb-8",children:"Dropr is a permissionless platform built to host decentralized, on-chain raffles. All draws are public and auditable."}),i.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-2",children:[i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(xs,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"VRF Powered"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(hn,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Fair Draws"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(nl,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Fully Auditable"})]}),i.jsx("div",{className:"hidden sm:block w-1 h-1 rounded-full bg-primary/40"}),i.jsxs("div",{className:"group relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:border-primary/40 hover:from-primary/10 hover:to-primary/20 transition-all duration-300 cursor-default",children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full bg-primary/20 group-hover:bg-primary/30 transition-colors",children:i.jsx(Qp,{className:"h-3 w-3 text-primary"})}),i.jsx("span",{className:"relative font-body text-[length:var(--text-xs)] font-medium text-foreground/80 group-hover:text-foreground transition-colors",children:"Trustless"})]})]})]}),i.jsxs("div",{className:"bg-card/40 backdrop-blur-md border border-border/30 rounded-xl p-4 mb-8 shadow-elevation-1",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative flex-1 group",children:[i.jsx(Xu,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-muted-foreground h-5 w-5 group-focus-within:text-primary transition-colors"}),i.jsx(gs,{type:"text",placeholder:"Search by pool name or contract address...",value:s,onChange:K=>o(K.target.value),variant:"filled",className:"pl-12 pr-4 h-12 text-[length:var(--text-base)] w-full rounded-lg focus:shadow-glow-primary"})]}),i.jsx(Ahe,{onClick:_,hasActiveFilters:y})]}),i.jsxs("div",{className:"flex items-center justify-between mt-3",children:[i.jsx("div",{className:"flex items-center gap-3",children:y&&i.jsx(we,{variant:"ghost",size:"sm",onClick:P,className:"font-body text-muted-foreground hover:text-foreground text-[length:var(--text-sm)]",children:"Clear All Filters"})}),!e&&(()=>{const G=Math.max(1,Math.ceil((g||[]).length/24));if(G<=1)return null;const X=Math.min(n,G),V=()=>r(R=>Math.max(1,R-1)),A=()=>r(R=>Math.min(G,R+1)),x=2,C=Math.max(1,X-x),L=Math.min(G,X+x),z=[];C>1&&(z.push(1),C>2&&z.push("..."));for(let R=C;R<=L;R++)z.push(R);return L<G&&(L<G-1&&z.push("..."),z.push(G)),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:V,disabled:X===1,className:"px-3 py-2 rounded-md border border-border bg-background text-sm disabled:opacity-50","aria-label":"Previous page",children:"Prev"}),z.map((R,I)=>R==="..."?i.jsx("span",{className:"px-1 font-body text-muted-foreground",children:""},`ellipsis-top-${I}`):i.jsx("button",{onClick:()=>r(R),className:`px-1 font-body text-[length:var(--text-sm)] leading-none ${X===R?"font-semibold text-foreground":"text-foreground/80"} bg-transparent`,"aria-label":`Go to page ${R}`,children:R},`page-top-${R}`)),i.jsx("button",{onClick:A,disabled:X===G,className:"px-3 py-2 rounded-md border border-border bg-background text-sm disabled:opacity-50","aria-label":"Next page",children:"Next"})]})})()]})]}),i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-1 h-6 bg-primary rounded-full"}),i.jsx("h2",{className:"font-display text-[length:var(--text-xl)] font-semibold text-foreground",children:y||s?"Filtered Raffles":"All Raffles"})]})}),(()=>{const K=e?12:24,Y=!!D,G=e&&Y&&typeof p=="number"?p:null,X=Y?$||[]:g||[],V=X.length,A=Math.max(1,Math.ceil(V/K)),x=Math.min(n,A),C=(x-1)*K,L=C+K,z=X.slice(C,L),R=A>1||e&&Y&&X.length>=K,I=(()=>{const M=A,ee=x,O=e?1:2,q=[],H=Math.max(1,ee-O),J=Math.min(M,ee+O);H>1&&(q.push(1),H>2&&q.push("..."));for(let Q=H;Q<=J;Q++)q.push(Q);return J<M&&(J<M-1&&q.push("..."),q.push(M)),q})(),N=()=>r(M=>Math.max(1,M-1)),F=()=>r(M=>Math.min(A,M+1)),E=!(e&&Y&&(l||!a||a.length===0));return i.jsxs("div",{children:[i.jsx(Phe,{raffles:z,loading:Y?!1:l,error:Y?null:c,RaffleCardComponent:Khe,emptyMessage:s&&s.trim()?"No raffles found matching your search. Try a different search term.":y?"No raffles match your current filters. Try adjusting your filter criteria.":"There are currently no raffles available on the blockchain. Check back later or create your own!",totalCount:G??V,showCount:E}),R&&i.jsxs("div",{className:"mt-6 flex flex-col items-center gap-3",children:[i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("button",{onClick:N,disabled:x===1,className:"px-3 py-2 rounded-md border border-border bg-background text-sm disabled:opacity-50","aria-label":"Previous page",children:"Prev"}),I.map((M,ee)=>M==="..."?i.jsx("span",{className:"px-1 text-muted-foreground",children:""},`ellipsis-bottom-${ee}`):i.jsx("button",{onClick:()=>r(M),className:`px-1 text-sm leading-none ${x===M?"font-semibold text-foreground":"text-foreground/80"} bg-transparent`,"aria-label":`Go to page ${M}`,children:M},`page-bottom-${M}`)),i.jsx("button",{onClick:F,disabled:x===A,className:"px-3 py-2 rounded-md border border-border bg-background text-sm disabled:opacity-50","aria-label":"Next page",children:"Next"})]}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",x," of ",Math.max(1,A)]})]})]},Y?"summaries":"full")})()]})})]})},GC=Ae.forwardRef(({type:t="text",value:e,onChange:n,placeholder:r,className:s,disabled:o=!1,required:a=!1,min:l,max:c,step:u,onFocus:f,onBlur:p,...m},g)=>{const{isMobile:w}=Ln(),y=k.useRef(null),T=k.useCallback(_=>{w&&(y.current=_.target,_.target.style.transform="translateZ(0)"),f&&f(_)},[w,f]),j=k.useCallback(_=>{w&&y.current&&(_.target.style.transform=""),p&&p(_)},[w,p]);return i.jsx("input",{ref:g,type:t,value:e,onChange:n,placeholder:r,disabled:o,required:a,min:l,max:c,step:u,className:je("w-full px-3 py-2 border border-[#614E41] rounded-md bg-background","text-foreground placeholder:text-muted-foreground","focus:outline-none focus:ring-0 focus:border-[#614E41]","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors duration-200",w&&["text-[length:var(--text-base)]","min-h-[44px]","touch-manipulation"],!w&&["text-[length:var(--text-base)]","min-h-[40px]"],s),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onFocus:T,onBlur:j,style:{fontSize:w?"16px":void 0,...m.style},...m})});GC.displayName="ResponsiveInput";const Jhe=Ae.forwardRef(({value:t,onChange:e,placeholder:n,className:r,rows:s=3,disabled:o=!1,required:a=!1,...l},c)=>{const{isMobile:u}=Ln();return i.jsx("textarea",{ref:c,value:t,onChange:e,placeholder:n,disabled:o,required:a,rows:s,className:je("w-full px-3 py-2 border border-[#614E41] rounded-md bg-background","text-foreground placeholder:text-muted-foreground","focus:outline-none focus:ring-0 focus:border-[#614E41]","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors duration-200 resize-vertical",u&&["text-[length:var(--text-base)]","min-h-[44px]","touch-manipulation"],!u&&["text-[length:var(--text-base)]"],r),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,style:{fontSize:u?"16px":void 0,...l.style},...l})});Jhe.displayName="ResponsiveTextarea";const Ti=Ae.forwardRef(({value:t,onChange:e,placeholder:n,className:r,min:s,max:o,step:a="any",disabled:l=!1,required:c=!1,...u},f)=>{const{isMobile:p}=Ln();return i.jsx(GC,{ref:f,type:"number",value:t,onChange:e,placeholder:n,min:s,max:o,step:a,disabled:l,required:c,className:je("[appearance:textfield]","[&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:appearance-none",r),inputMode:p?"decimal":void 0,pattern:p?"[0-9]*":void 0,...u})});Ti.displayName="ResponsiveNumberInput";const Ps=Ae.forwardRef(({value:t,onChange:e,placeholder:n="0x...",className:r,disabled:s=!1,required:o=!1,...a},l)=>i.jsx(GC,{ref:l,type:"text",value:t,onChange:e,placeholder:n,disabled:s,required:o,className:je("font-mono","tracking-tight",r),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,...a}));Ps.displayName="ResponsiveAddressInput";const Xhe=()=>{const{connected:t,address:e}=an(),{getContractInstance:n,executeTransaction:r}=xn(),[s,o]=k.useState(!1),[a,l]=k.useState({address:"",type:null,royaltyPercentage:"",royaltyRecipient:""}),[c,u]=k.useState(null),[f,p]=k.useState(!1),[m,g]=k.useState(null),[w,y]=k.useState(!1),T=(D,$)=>{l(U=>({...U,[D]:$}))};k.useEffect(()=>{(!a.address||a.address.trim()==="")&&(u(null),g(null))},[a.address]),k.useEffect(()=>{const D=a.address;if(!D||!t||!bn(D))return;const $=setTimeout(()=>{_()},450);return()=>clearTimeout($)},[a.address,t]);const j=async D=>{try{if(!D)return;const $=await D.isRevealed();g(!!$)}catch($){console.log("Could not fetch reveal status:",$.message),g(null)}},_=async()=>{if(!a.address||!t){re.error("Please enter a collection address and connect your wallet");return}p(!0);try{let D=null,$=null;try{const x=n(a.address,"erc721Prize");if(x)try{await x.supportsInterface("0x80ac58cd")&&(D=x,$="erc721")}catch{try{await x.totalSupply(),D=x,$="erc721"}catch{}}}catch{}if(!D)try{const x=n(a.address,"erc1155Prize");if(x)try{await x.supportsInterface("0xd9b67a26")&&(D=x,$="erc1155")}catch{try{await x.uri(0),D=x,$="erc1155"}catch{}}}catch{}if(!D||!$)throw new Error("Invalid collection address or unsupported contract type");l(x=>({...x,type:$}));let U="Unknown Collection",K="Unknown",Y="Unknown";try{typeof D.name=="function"&&(U=await D.name())}catch{}try{typeof D.symbol=="function"&&(K=await D.symbol())}catch{}try{typeof D.owner=="function"&&(Y=await D.owner())}catch{}const G=Y!=="Unknown"&&Y.toLowerCase()===e.toLowerCase(),X=await D.royaltyInfo(1,1e4),V=await D.royaltyPercentage(),A=await D.royaltyRecipient();u({address:a.address,name:U,symbol:K,owner:Y,type:$,isOwner:G,currentRoyaltyPercentage:V.toString(),currentRoyaltyRecipient:A,royaltyAmount:X[1].toString()}),l(x=>({...x,royaltyPercentage:(V.toNumber()/100).toString(),royaltyRecipient:A})),await j(D)}catch(D){console.error("Error loading collection info:",D),re.error("Error loading collection info: "+D.message),u(null),g(null)}finally{p(!1)}},v=async()=>{if(!t||!c){re.error("Please connect your wallet and load collection info first");return}if(!c.isOwner){re.error("You are not the owner of this collection");return}const D=parseFloat(a.royaltyPercentage);if(isNaN(D)||D<0){re.error("Please enter a valid royalty percentage (minimum 0%)");return}if(!a.royaltyRecipient){re.error("Please enter a royalty recipient address");return}o(!0);try{const $=a.type==="erc721"?"erc721Prize":"erc1155Prize",U=n(a.address,$);if(!U)throw new Error("Failed to create contract instance");const K=Math.floor(D*100),Y=await r(U.setRoyalty,K,a.royaltyRecipient);if(Y.success)re.success(`Royalty updated successfully! Transaction: ${Y.hash}`),await _();else throw new Error(Y.error)}catch($){console.error("Error updating royalty:",$),re.error("Error updating royalty: "+$.message)}finally{o(!1)}},P=async()=>{if(!t||!c){re.error("Please connect your wallet and load collection info first");return}y(!0);try{const D=a.type==="erc721"?"erc721Prize":"erc1155Prize",$=n(a.address,D);if(!$)throw new Error("Failed to create contract instance");const U=await r($.reveal);if(U.success)re.success("Collection revealed successfully!"),await _();else throw new Error(U.error)}catch(D){re.error("Error revealing collection: "+(D.message||D))}finally{y(!1)}};return i.jsx(ut,{children:i.jsxs(It,{className:"space-y-6 p-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage royalties and collection reveals for your NFT collections"}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Collection Address"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ps,{value:a.address,onChange:D=>T("address",D.target.value),placeholder:"0x..."}),f&&i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:i.jsx(jg,{size:"sm",showText:!1})})]})]})}),c&&i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"Collection Information"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",c.name]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Symbol:"})," ",c.symbol]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Owner:"})," ",c.isOwner?"You":"Other"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Current Royalty:"})," ",(parseInt(c.currentRoyaltyPercentage)/100).toFixed(2),"%"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Revealed:"})," ",m===null?"Unknown":m?"Yes":"No"]})]}),i.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-sm font-medium",children:"Reveal Status:"}),i.jsx("span",{className:"text-sm font-semibold",children:m===null?"Unknown":m?"Revealed":"Not Revealed"}),i.jsx(we,{onClick:P,disabled:w||m||!c.isOwner,variant:"primary",size:"md",className:"px-4 py-2 h-10 shadow-sm text-sm",title:c.isOwner?m?"Collection already revealed":"Reveal collection":"Only collection owner can reveal",children:w?"Revealing...":"Reveal Collection"})]})}),!c.isOwner&&i.jsxs("div",{className:"mt-3 p-3 bg-destructive/10 border border-destructive/20 rounded-md flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),i.jsx("span",{className:"text-sm text-destructive",children:"You are not the owner of this collection and cannot modify royalties."})]})]})}),c&&c.isOwner&&i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"Update Royalty Settings"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure royalty percentage and recipient for this collection"}),i.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"mb-2",children:i.jsx("span",{className:"font-medium",children:"Current Royalty Recipient:"})}),i.jsx("div",{className:"font-mono text-sm break-all",children:c.currentRoyaltyRecipient})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 items-start",children:[i.jsxs("div",{className:"h-full",children:[i.jsx("label",{className:"block text-xs font-medium mb-1",children:"New Royalty (%)"}),i.jsx(Ti,{min:"0",step:"0.01",value:a.royaltyPercentage,onChange:D=>T("royaltyPercentage",D.target.value),placeholder:"2.5"})]}),i.jsxs("div",{className:"h-full",children:[i.jsx("label",{className:"block text-xs font-medium mb-1",children:"New Recipient"}),i.jsx(Ps,{value:a.royaltyRecipient,onChange:D=>T("royaltyRecipient",D.target.value),placeholder:"0x..."})]})]}),i.jsx(we,{onClick:v,disabled:s||!t||!c||!c.isOwner,variant:"primary",size:"md",className:"w-full h-10 flex items-center justify-center gap-2 shadow-sm text-sm",title:t?c?c.isOwner?!a.royaltyPercentage||!a.royaltyRecipient?"Please fill in all required fields":"Update royalty settings":"Only collection owner can update royalties":"Please load collection info first":"Please connect your wallet",children:s?"Updating...":"Update Royalty Settings"})]})}),!t&&i.jsx("div",{className:"text-center p-4 bg-muted rounded-lg",children:i.jsx("p",{className:"text-muted-foreground",children:"Please connect your wallet to manage collection royalties."})})]})})};var Cv="Tabs",[Qhe,x0e]=Mi(Cv,[av]),pB=av(),[Zhe,KC]=Qhe(Cv),mB=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=t,f=Vh(l),[p,m]=_a({prop:r,onChange:s,defaultProp:o??"",caller:Cv});return i.jsx(Zhe,{scope:n,baseId:ao(),value:p,onValueChange:m,orientation:a,dir:f,activationMode:c,children:i.jsx(Pt.div,{dir:f,"data-orientation":a,...u,ref:e})})});mB.displayName=Cv;var gB="TabsList",yB=k.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,o=KC(gB,n),a=pB(n);return i.jsx(QO,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:i.jsx(Pt.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});yB.displayName=gB;var xB="TabsTrigger",bB=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=t,a=KC(xB,n),l=pB(n),c=kB(a.baseId,r),u=TB(a.baseId,r),f=r===a.value;return i.jsx(ZO,{asChild:!0,...l,focusable:!s,active:f,children:i.jsx(Pt.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:e,onMouseDown:nt(t.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?a.onValueChange(r):p.preventDefault()}),onKeyDown:nt(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&a.onValueChange(r)}),onFocus:nt(t.onFocus,()=>{const p=a.activationMode!=="manual";!f&&!s&&p&&a.onValueChange(r)})})})});bB.displayName=xB;var vB="TabsContent",wB=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...a}=t,l=KC(vB,n),c=kB(l.baseId,r),u=TB(l.baseId,r),f=r===l.value,p=k.useRef(f);return k.useEffect(()=>{const m=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(Vs,{present:s||f,children:({present:m})=>i.jsx(Pt.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:m&&o})})});wB.displayName=vB;function kB(t,e){return`${t}-trigger-${e}`}function TB(t,e){return`${t}-content-${e}`}var epe=mB,tpe=yB,npe=bB,rpe=wB;function ny({className:t,...e}){return i.jsx(epe,{"data-slot":"tabs",className:je("flex flex-col gap-2",t),...e})}function Sv({className:t,...e}){return i.jsx(tpe,{"data-slot":"tabs-list",className:je("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...e})}function $o({className:t,...e}){return i.jsx(npe,{"data-slot":"tabs-trigger",className:je("data-[state=active]:bg-background dark:data-[state=active]:text-foreground dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] outline-none focus:outline-none focus:ring-0 focus-visible:ring-0 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function Bo({className:t,...e}){return i.jsx(rpe,{"data-slot":"tabs-content",className:je("flex-1 outline-none",t),...e})}const NB=()=>{const{connected:t,address:e,provider:n,chainId:r}=an(),{contracts:s,getContractInstance:o}=xn(),[a,l]=k.useState([]),[c,u]=k.useState(!0),[f,p]=k.useState(null),m=k.useCallback(async()=>{if(!t||!e||!n){l([]),u(!1);return}try{u(!0),p(null);const g=s.protocolManager;if(!g){console.warn("ProtocolManager contract not available yet"),l([]),u(!1);return}const w=[],y=new Set;try{const T=await g.getAllInternalCollections();if(Array.isArray(T))for(const j of T)try{if(y.has(j.toLowerCase()))continue;const _=new Mt(j,["function owner() view returns (address)","function name() view returns (string)","function symbol() view returns (string)","function totalSupply() view returns (uint256)"],n),v=await _.owner().catch(()=>null);if(v&&v.toLowerCase()===e.toLowerCase()){y.add(j.toLowerCase());const[P,D,$]=await Promise.all([_.name().catch(()=>"Unknown"),_.symbol().catch(()=>"N/A"),_.totalSupply().catch(()=>ce.from(0))]);w.push({address:j,name:P,symbol:D,totalSupply:$.toString(),type:"Protocol-Native",isInternal:!0})}}catch(_){console.error(`Error processing internal collection ${j}:`,_)}}catch(T){console.error("Error fetching protocol-native collections:",T)}try{let T=[];try{let _=0,v=!0;const P=100,D=1e3;for(;v&&T.length<D;){const[$,U,K]=await g.getAllPools(_,P);if(T.push(...$),_=U.toNumber?U.toNumber():Number(U),v=K,$.length===0)break}}catch(_){console.error("Error fetching all pools:",_)}const j=[];for(const _ of T)try{const v=await g.getPoolCreator(_);v&&v.toLowerCase()===e.toLowerCase()&&j.push(_)}catch{continue}for(const _ of j)try{const v=o(_,"pool");if(!v||await v.isCollabPool())continue;if(await v.isExternalCollection()){const $=await v.prizeCollection();if(!$||$===$e||y.has($.toLowerCase()))continue;y.add($.toLowerCase());try{const U=new Mt($,["function name() view returns (string)","function symbol() view returns (string)","function totalSupply() view returns (uint256)"],n),[K,Y,G]=await Promise.all([U.name().catch(()=>"Unknown"),U.symbol().catch(()=>"N/A"),U.totalSupply().catch(()=>ce.from(0))]);w.push({address:$,name:K,symbol:Y,totalSupply:G.toString(),type:"External",isInternal:!1,poolAddress:_})}catch(U){console.error(`Error fetching details for external collection ${$}:`,U)}}}catch(v){console.error(`Error processing pool for external collections ${_}:`,v)}}catch(T){console.error("Error fetching external collections:",T)}l(w)}catch(g){console.error("Error fetching collections:",g),p(g.message||"Failed to fetch collections"),l([])}finally{u(!1)}},[t,e,n,s,o]);return k.useEffect(()=>{m()},[m]),{collections:a,loading:c,error:f,refetch:m}};function W2({...t}){return i.jsx(GL,{"data-slot":"dialog",...t})}function qI({...t}){return i.jsx(KL,{"data-slot":"dialog-trigger",...t})}function spe({...t}){return i.jsx(YL,{"data-slot":"dialog-portal",...t})}function ipe({className:t,...e}){return i.jsx(JL,{"data-slot":"dialog-overlay",className:je("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function H2({className:t,children:e,...n}){return i.jsxs(spe,{"data-slot":"dialog-portal",children:[i.jsx(ipe,{}),i.jsxs(XL,{"data-slot":"dialog-content",className:je("bg-card/90 backdrop-blur-md text-card-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-xl border border-border/50 p-6 shadow-2xl duration-200 sm:max-w-lg",t),...n,children:[e,i.jsxs(wse,{className:"data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 outline-none focus:outline-none focus:ring-0 disabled:pointer-events-none text-muted-foreground hover:text-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[i.jsx(vi,{}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function G2({className:t,...e}){return i.jsx("div",{"data-slot":"dialog-header",className:je("flex flex-col gap-2 text-center sm:text-left",t),...e})}function K2({className:t,...e}){return i.jsx(QL,{"data-slot":"dialog-title",className:je("text-lg leading-none font-semibold text-foreground",t),...e})}function ope({className:t,...e}){return i.jsx(vse,{"data-slot":"dialog-description",className:je("text-muted-foreground text-sm",t),...e})}const ape=({title:t,description:e,icon:n,component:r,defaultExpanded:s=!1,className:o="",dialogContentClassName:a,isExpanded:l,onToggle:c,...u})=>{const{isMobile:f,isTablet:p,isDesktop:m}=Ln(),[g,w]=k.useState(!1),y=()=>{w(!0)};return i.jsxs(ut,{"data-dashboard-card":"true",className:je("relative transition-all duration-300 ease-in-out",f&&"w-full",p&&"w-full",o),children:[i.jsxs(Jr,{className:je("pb-3",f&&"pb-2"),children:[i.jsx(Fs,{className:je("flex items-center gap-2",f?"text-base":"text-lg"),children:i.jsx("span",{className:"flex-1",children:t})}),i.jsx(wm,{className:je("text-muted-foreground","text-sm"),children:e})]}),i.jsxs(It,{className:je("pt-0",f&&"px-4 pb-4"),children:[m&&i.jsxs(W2,{open:g,onOpenChange:w,children:[i.jsx(qI,{asChild:!0,children:i.jsxs(we,{onClick:y,variant:"primary",size:"md",className:je("w-full","transition-all duration-200","shadow-sm hover:shadow-md h-10 text-sm"),children:[i.jsx(Ur,{className:"mr-2 h-4 w-4"}),"Open ",t]})}),i.jsxs(H2,{className:je("max-w-4xl max-h-[90vh] overflow-y-auto overflow-x-hidden",a),children:[i.jsx(G2,{children:i.jsx(K2,{className:"text-xl font-semibold",children:t})}),i.jsx("div",{className:"mt-4",children:r&&i.jsx(r,{})})]})]}),!m&&i.jsxs(W2,{open:g,onOpenChange:w,children:[i.jsx(qI,{asChild:!0,children:i.jsxs(we,{onClick:y,variant:"primary",size:f?"lg":"md",className:je("w-full","transition-all duration-200","shadow-sm hover:shadow-md h-10 text-sm"),children:[i.jsx(Ur,{className:"mr-2 h-4 w-4"}),"Open ",t]})}),i.jsxs(H2,{className:je("max-w-4xl max-h-[90vh] overflow-y-auto overflow-x-hidden",a),children:[i.jsx(G2,{children:i.jsx(K2,{className:"text-xl font-semibold",children:t})}),i.jsx("div",{className:"mt-4",children:r&&i.jsx(r,{})})]})]})]})]})},lpe=()=>{const{connected:t,address:e}=an(),{getContractInstance:n,executeTransaction:r}=xn(),{isMobile:s}=Ln(),[o,a]=k.useState(!1),[l,c]=k.useState({address:""}),[u,f]=k.useState({tokenId:"",maxSupply:""}),[p,m]=k.useState({tokenId:"",tokenURI:""}),[g,w]=k.useState(null),[y,T]=k.useState(!1);k.useEffect(()=>{(!l.address||l.address.trim()==="")&&w(null)},[l.address]),k.useEffect(()=>{if(!t||!l.address||!bn(l.address))return;const K=setTimeout(()=>{y||D()},400);return()=>clearTimeout(K)},[l.address,t]);const j=(K,Y)=>{c(G=>({...G,[K]:Y}))},_=(K,Y)=>{f(G=>({...G,[K]:Y}))},v=(K,Y)=>{m(G=>({...G,[K]:Y}))},P=async K=>{try{const Y=n(K,"erc1155Prize");if(Y)try{if(await Y.supportsInterface("0xd9b67a26"))return{type:"erc1155",contract:Y}}catch{try{return await Y.balanceOf(K,0),{type:"erc1155",contract:Y}}catch{}}const G=n(K,"erc721Prize");if(G)try{if(await G.supportsInterface("0x80ac58cd"))return{type:"erc721",contract:G}}catch{try{return await G.balanceOf(K),{type:"erc721",contract:G}}catch{}}throw new Error("Contract does not support ERC721 or ERC1155 interfaces")}catch(Y){throw console.error("Contract type detection error:",Y),new Error("Unable to determine contract type. Please verify the contract address.")}},D=async()=>{if(!l.address||!t){re.error("Please enter a collection address and connect your wallet");return}T(!0);try{const{type:K,contract:Y}=await P(l.address);if(K!=="erc1155"){re.error(" This component is only for ERC1155 collections. The provided address appears to be an ERC721 collection. Please use the appropriate component for ERC721 collections."),w({address:l.address,isOwner:!1,owner:"N/A",type:"erc721",isBlocked:!0}),T(!1);return}const G=await Y.owner(),X=G.toLowerCase()===e.toLowerCase();w({address:l.address,isOwner:X,owner:G,type:"erc1155"}),X?re.success("ERC1155 collection loaded successfully"):re.error("You are not the owner of this collection")}catch(K){console.error("Error loading collection info:",K),re.error("Failed to load collection info. Please verify the address is a valid ERC1155 collection."),w(null)}finally{T(!1)}},$=async()=>{if(!t||!e){re.error("Please connect your wallet");return}if(!g||!g.isOwner||g.isBlocked){g!=null&&g.isBlocked?re.error("This component only works with ERC1155 collections. The provided address is an ERC721 collection."):re.error("Please load collection info first and ensure you are the owner");return}if(!u.tokenId||!u.maxSupply){re.error("Please fill in all required fields");return}const K=parseInt(u.tokenId),Y=parseInt(u.maxSupply);if(isNaN(K)||K<0){re.error("Please enter a valid token ID (non-negative integer)");return}if(isNaN(Y)||Y<=0){re.error("Please enter a valid max supply (positive integer)");return}a(!0);try{const G=n(l.address,"erc1155Prize"),X=await r(G.createNewToken,K,Y);if(X.success)re.success(`Token ID ${K} created successfully with max supply of ${Y}!`),f({tokenId:"",maxSupply:""});else throw new Error(X.error)}catch(G){console.error("Error creating new token:",G),gn(G)}finally{a(!1)}},U=async()=>{if(!t||!e){re.error("Please connect your wallet");return}if(!g||!g.isOwner||g.isBlocked){g!=null&&g.isBlocked?re.error("This component only works with ERC1155 collections. The provided address is an ERC721 collection."):re.error("Please load collection info first and ensure you are the owner");return}if(!p.tokenId||!p.tokenURI){re.error("Please fill in all required fields");return}const K=parseInt(p.tokenId);if(isNaN(K)||K<0){re.error("Please enter a valid token ID (non-negative integer)");return}a(!0);try{const Y=n(l.address,"erc1155Prize"),G=await r(Y.setURI,K,p.tokenURI.trim());if(G.success)re.success(`URI set successfully for token ID ${K}!`),m({tokenId:"",tokenURI:""});else throw new Error(G.error)}catch(Y){console.error("Error setting URI:",Y),gn(Y)}finally{a(!1)}};return i.jsx(ut,{children:i.jsxs(It,{className:"space-y-6 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"Token ID & URI Management"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create new token IDs for ERC1155 collections and configure token URIs"}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Collection Address"}),i.jsx(Ps,{value:l.address,onChange:K=>j("address",K.target.value),placeholder:"0x...",rightElement:y&&i.jsx(jg,{size:"sm"})})]})}),g&&i.jsxs("div",{className:`p-4 rounded-lg border ${g.isBlocked?"bg-destructive/10 border-destructive/20":"bg-muted/50"}`,children:[g.isBlocked&&i.jsxs("div",{className:"mt-3 p-3 bg-destructive/10 border border-destructive/20 rounded-md flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),i.jsx("span",{className:"text-sm text-destructive",children:"This component only works with ERC1155 collections. The provided address is an ERC721 collection. Please use the appropriate component for ERC721 collections."})]}),!g.isBlocked&&!g.isOwner&&i.jsxs("div",{className:"mt-3 p-3 bg-destructive/10 border border-destructive/20 rounded-md flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),i.jsx("span",{className:"text-sm text-destructive",children:"You are not the owner of this collection and cannot create new tokens."})]})]}),g&&g.isOwner&&!g.isBlocked&&i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"Create New Token ID"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create a new token ID for your ERC1155 collection with specified supply"}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Token ID"}),i.jsx(Ti,{min:"0",value:u.tokenId,onChange:K=>_("tokenId",K.target.value),placeholder:"0"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Unique identifier for the new token"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Supply"}),i.jsx(Ti,{min:"1",value:u.maxSupply,onChange:K=>_("maxSupply",K.target.value),placeholder:"100"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum number of tokens that can be minted"})]})]}),i.jsx(we,{onClick:$,disabled:o||!t||!g.isOwner||g.isBlocked||!u.tokenId||!u.maxSupply,variant:"primary",size:"md",className:"w-full",title:t?g.isOwner?!u.tokenId||!u.maxSupply?"Please fill in all required fields":"Create new token ID":"Only collection owner can create new tokens":"Please connect your wallet",children:o?"Creating...":"Create New Token ID"})]})}),g&&g.isOwner&&!g.isBlocked&&i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"Set Token URI"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set the metadata URI for a specific token ID in your collection"}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Token ID"}),i.jsx(Ti,{min:"0",value:p.tokenId,onChange:K=>v("tokenId",K.target.value),placeholder:"0"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Token ID to set URI for"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Token URI"}),i.jsx("input",{type:"text",value:p.tokenURI,onChange:K=>v("tokenURI",K.target.value),placeholder:"https://example.com/metadata/{id}.json",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-colors text-sm",style:s?{fontSize:"16px"}:{}}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Metadata URI for the token"})]})]}),i.jsx(we,{onClick:U,disabled:o||!t||!g.isOwner||g.isBlocked||!p.tokenId||!p.tokenURI,variant:"primary",size:"md",className:"w-full",title:t?g.isOwner?!p.tokenId||!p.tokenURI?"Please fill in all required fields":"Set token URI":"Only collection owner can set URIs":"Please connect your wallet",children:o?"Setting...":"Set Token URI"})]})})]})})},cpe=()=>{const{connected:t,address:e}=an(),{getContractInstance:n,executeTransaction:r}=xn(),{formatRevenueAmount:s}=er(),[o,a]=k.useState(!1),[l,c]=k.useState({address:"",name:"",revenueAmount:"0",isOwner:!1,raffleState:"unknown"}),[u,f]=k.useState(!1),[p,m]=k.useState([]),[g,w]=k.useState(!1),[y,T]=k.useState({collectionAddress:"",collectionType:"erc721",recipient:"",quantity:"",tokenId:""}),[j,_]=k.useState(!1),[v,P]=k.useState(null),[D,$]=k.useState(!1),U=(R,I)=>{c(N=>({...N,[R]:I}))},K=(R,I)=>{if(T(N=>({...N,[R]:I})),R==="tokenId"&&v&&v.type==="erc1155"){const N=parseInt(I);!isNaN(N)&&N>=0&&G(N)}},Y=async()=>{if(!y.collectionAddress||!t){re.error("Please enter a collection address and connect your wallet");return}$(!0);try{let R=null,I=null;try{const H=n(y.collectionAddress,"erc721Prize");if(H)try{await H.supportsInterface("0x80ac58cd")&&(R=H,I="erc721")}catch{try{await H.totalSupply(),R=H,I="erc721"}catch{}}}catch{}if(!R)try{const H=n(y.collectionAddress,"erc1155Prize");if(H)try{await H.supportsInterface("0xd9b67a26")&&(R=H,I="erc1155")}catch{try{await H.uri(0),R=H,I="erc1155"}catch{}}}catch{}if(!R||!I)throw new Error("Invalid collection address or unsupported contract type");T(H=>({...H,collectionType:I}));let N="Unknown Collection",F="Unknown",E="Unknown";try{typeof R.name=="function"&&(N=await R.name())}catch{}try{typeof R.symbol=="function"&&(F=await R.symbol())}catch{}try{typeof R.owner=="function"&&(E=await R.owner())}catch{}const M=E!=="Unknown"&&E.toLowerCase()===e.toLowerCase();let ee=!1,O="0",q="0";try{I==="erc721"?(ee=await R.vestingConfigured(),ee&&(O=(await R.getUnlockedCreatorAllocation()).toString(),q=(await R.getAvailableCreatorMint()).toString())):I==="erc1155"&&(ee=await R.vestingConfigured(1),ee&&(O=(await R.getUnlockedCreatorAllocation(1)).toString(),q=(await R.getAvailableCreatorMint(1)).toString()))}catch(H){console.log("Vesting info not available:",H.message)}P({address:y.collectionAddress,name:N,symbol:F,owner:E,type:I,isOwner:M,vestingConfigured:ee,unlockedAmount:O,availableAmount:q}),I==="erc1155"?re.success("Collection loaded"):re.success(`Collection loaded: ${N} (${I.toUpperCase()})`)}catch(R){console.error("Error loading collection info:",R),re.error("Failed to load collection information: "+R.message),P(null)}finally{$(!1)}},G=async R=>{if(!(!v||v.type!=="erc1155"||!v.isOwner))try{const I=n(v.address,"erc1155Prize");if(!I)throw new Error("Failed to create contract instance");let N=!1,F="0",E="0";try{await I.maxSupply(R)}catch{console.log("Token ID does not exist:",R),P(ee=>({...ee,vestingConfigured:!1,unlockedAmount:"0",availableAmount:"0"}));return}N=await I.vestingConfigured(R),N&&(F=(await I.getUnlockedCreatorAllocation(R)).toString(),E=(await I.getAvailableCreatorMint(R)).toString()),P(M=>({...M,vestingConfigured:N,unlockedAmount:F,availableAmount:E}))}catch(I){console.log("Vesting info not available for token ID:",R,I.message),P(N=>({...N,vestingConfigured:!1,unlockedAmount:"0",availableAmount:"0"}))}},X=async()=>{if(!t||!v){re.error("Please connect your wallet and load collection info first");return}if(!v.isOwner){re.error("You are not the owner of this collection");return}if(!y.recipient||!y.quantity){re.error("Please fill in recipient address and quantity");return}if(y.collectionType==="erc1155"&&!y.tokenId){re.error("Please specify token ID for ERC1155 minting");return}const R=parseInt(y.quantity);if(isNaN(R)||R<=0){re.error("Please enter a valid quantity");return}_(!0);try{const I=y.collectionType==="erc721"?"erc721Prize":"erc1155Prize",N=n(y.collectionAddress,I);if(!N)throw new Error("Failed to create contract instance");let F;if(y.collectionType==="erc721")F=await r(()=>N.creatorMint(y.recipient,R));else{const E=parseInt(y.tokenId);if(isNaN(E))throw new Error("Invalid token ID");F=await r(()=>N.creatorMint(y.recipient,E,R))}if(F.success)re.success(`Successfully minted ${R} token(s)! Transaction: ${F.hash}`),T(E=>({...E,recipient:"",quantity:"",tokenId:""}));else throw new Error(F.error)}catch(I){console.error("Error minting tokens:",I),gn(I)}finally{_(!1)}},V=async R=>{if(!R||!t){re.error("Please enter a raffle address and connect your wallet");return}f(!0);try{const I=n(R,"pool");if(!I)throw new Error("Failed to create raffle contract instance");const[N,F,E,M,ee]=await Promise.all([I.creator(),I.revenueRecipient(),I.totalCreatorRevenue(),I.state(),I.name().catch(()=>`Pool ${R.slice(0,8)}...`)]),O=N.toLowerCase()===e.toLowerCase(),q=F.toLowerCase()===e.toLowerCase(),H=O&&q,Q=["Pending","Active","Ended","Drawing","Completed","Deleted","AllPrizesClaimed","Unengaged"][M]||"Unknown";c({address:R,name:ee,revenueAmount:Zt(E),isCreator:O,isRevenueRecipient:q,isBothCreatorAndRecipient:H,raffleState:Q,totalRevenue:E})}catch(I){console.error("Error loading raffle info:",I),re.error("Error loading raffle info: "+I.message),c({address:R,revenueAmount:"0",isCreator:!1,raffleState:"error"})}finally{f(!1)}},A=async()=>{if(t){w(!0);try{m([])}catch(R){console.error("Error loading created raffles:",R)}finally{w(!1)}}},x=async()=>{if(!t||!l.address){re.error("Please connect your wallet and load raffle info first");return}if(!l.isRevenueRecipient){re.error("You are not the revenue recipient of this raffle");return}if(parseFloat(l.revenueAmount)<=0){re.info("No revenue available for withdrawal");return}if(!["Completed","AllPrizesClaimed","Ended"].includes(l.raffleState)){re.info(`Revenue can only be withdrawn from completed raffles. Current state: ${l.raffleState}`);return}a(!0);try{const I=n(l.address,"pool");if(!I)throw new Error("Failed to create raffle contract instance");const N=await r(I.withdrawCreatorRevenue);if(N.success)re.success(`Revenue withdrawn successfully! Transaction: ${N.hash}`),await V(l.address);else throw new Error(N.error)}catch(I){console.error("Error withdrawing revenue:",I),gn(I)}finally{a(!1)}};k.useEffect(()=>{t&&A()},[t]),k.useEffect(()=>{(!l.address||l.address.trim()==="")&&c({address:"",name:"",revenueAmount:"0",isOwner:!1,raffleState:"unknown"})},[l.address]),k.useEffect(()=>{(!y.collectionAddress||y.collectionAddress.trim()==="")&&P(null)},[y.collectionAddress]),k.useEffect(()=>{const R=l.address;if(!t||!R||!bn(R))return;const I=setTimeout(()=>{u||V(R)},400);return()=>clearTimeout(I)},[l.address,t]),k.useEffect(()=>{const R=y.collectionAddress;if(!t||!R||!bn(R))return;const I=setTimeout(()=>{D||Y()},400);return()=>clearTimeout(I)},[y.collectionAddress,t]);const C=R=>{switch(R){case"Completed":case"AllPrizesClaimed":return"text-green-600";case"Ended":return"text-red-600";case"Active":return"text-blue-600";case"Pending":return"text-yellow-600";case"Drawing":return"text-purple-600";default:return"text-muted-foreground"}},L=l.totalRevenue&&ce.isBigNumber(l.totalRevenue)?!l.totalRevenue.isZero():parseFloat(l.revenueAmount)>0,z=l.isRevenueRecipient&&L&&["Completed","AllPrizesClaimed","Ended"].includes(l.raffleState);return i.jsxs("div",{className:"space-y-6",children:[i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"Withdraw Revenue"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Withdraw available revenue from completed raffles"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Pool Contract Address"}),i.jsx(Ps,{value:l.address,onChange:R=>U("address",R.target.value),placeholder:"0x...",rightElement:u&&i.jsx(jg,{size:"sm"})})]}),l.address&&l.raffleState!=="unknown"&&i.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-4",children:[i.jsxs("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:[i.jsx(Kt,{className:"h-5 w-5"}),"Pool Information"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"}),i.jsx("div",{className:"font-semibold",children:l.name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"State:"}),i.jsx("div",{className:`font-semibold ${C(l.raffleState)}`,children:l.raffleState})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Creator Revenue:"}),i.jsx("div",{className:"font-semibold",children:s(l.totalRevenue||l.revenueAmount)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Your Role:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[l.isBothCreatorAndRecipient&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:[i.jsx(hn,{className:"h-3 w-3"}),"Creator"]}),l.isRevenueRecipient&&!l.isBothCreatorAndRecipient&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs",children:[i.jsx(hn,{className:"h-3 w-3"}),"Revenue Recipient"]}),l.isOwner&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[i.jsx(hn,{className:"h-3 w-3"}),"Owner"]}),!l.isCreator&&!l.isRevenueRecipient&&!l.isOwner&&i.jsx("span",{className:"text-muted-foreground text-xs",children:"No special role"})]})]})]}),!l.isRevenueRecipient&&i.jsxs("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-md flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),i.jsx("span",{className:"text-sm text-destructive",children:"You are not the revenue recipient of this raffle"})]}),l.isRevenueRecipient&&!L&&i.jsxs("div",{className:"p-3 bg-yellow-50/80 dark:bg-yellow-900/20 backdrop-blur-sm border border-yellow-200/50 dark:border-yellow-700/50 rounded-lg flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-yellow-600"}),i.jsx("span",{className:"text-sm text-yellow-800",children:"No revenue available for withdrawal"})]}),l.isRevenueRecipient&&!["Completed","AllPrizesClaimed","Ended"].includes(l.raffleState)&&i.jsxs("div",{className:"p-3 bg-blue-50/80 dark:bg-blue-900/20 backdrop-blur-sm border border-blue-200/50 dark:border-blue-700/50 rounded-lg flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"text-sm text-blue-800",children:"Revenue can only be withdrawn from completed raffles."})]}),z&&i.jsxs("div",{className:"p-3 bg-green-50/80 dark:bg-green-900/20 backdrop-blur-sm border border-green-200/50 dark:border-green-700/50 rounded-lg flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm text-green-800",children:"Revenue is available for withdrawal!"})]}),i.jsx(we,{onClick:x,disabled:o||!t||!z,variant:"primary",size:"md",className:"w-full h-10 flex items-center justify-center gap-2 shadow-sm text-sm",title:t?l.address?l.raffleState==="unknown"?"Raffle state unknown":l.isRevenueRecipient?z?`Withdraw ${s(l.totalRevenue||l.revenueAmount)}`:"Withdrawal not available - check raffle state and revenue amount":"Only revenue recipient can withdraw revenue":"Please load raffle info first":"Please connect your wallet",children:o?"Withdrawing...":l.address&&(l.totalRevenue||l.revenueAmount)?`Withdraw ${s(l.totalRevenue||l.revenueAmount)}`:"Withdraw Revenue"}),!z&&l.isRevenueRecipient&&l.address&&i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Withdrawal is not available at this time. Check the raffle state and revenue amount."})]})]})}),!t&&i.jsx("div",{className:"text-center p-4 bg-muted rounded-lg",children:i.jsx("p",{className:"text-muted-foreground",children:"Please connect your wallet to withdraw creator revenue."})}),i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"Creator Mint"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Mint your allocated supply from your collection"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Collection Contract Address"}),i.jsx(Ps,{value:y.collectionAddress,onChange:R=>K("collectionAddress",R.target.value),placeholder:"0x...",rightElement:D&&i.jsx(jg,{size:"sm"})})]}),v&&i.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Name:"})," ",v.name]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Symbol:"})," ",v.symbol]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Owner:"})," ",v.isOwner?"You":"Other"]})]}),v.vestingConfigured&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[i.jsx("div",{className:"text-sm font-medium mb-2 text-primary",children:"Vesting Information"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Unlocked Amount:"})," ",v.unlockedAmount]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Available Amount:"})," ",v.availableAmount]})]}),v.type==="erc1155"&&i.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:["Vesting info shown for Token ID ",y.tokenId||"1",". Enter a specific Token ID to see accurate vesting amounts."]})]}),!v.isOwner&&i.jsxs("div",{className:"mt-2 p-2 bg-destructive/10 border border-destructive/20 rounded-md flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),i.jsx("span",{className:"text-sm text-destructive",children:"You are not the owner of this collection and cannot mint tokens."})]})]}),v&&v.isOwner&&i.jsxs("div",{className:"space-y-4",children:[v.type==="erc1155"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Token ID"}),i.jsx("input",{type:"number",value:y.tokenId,onChange:R=>K("tokenId",R.target.value),placeholder:"1",min:"0",className:"w-full px-3 py-2 border border-border rounded-md bg-background"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Recipient Address"}),i.jsx(Ps,{value:y.recipient,onChange:R=>K("recipient",R.target.value),placeholder:"0x..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),i.jsx("input",{type:"number",value:y.quantity,onChange:R=>K("quantity",R.target.value),placeholder:"1",min:"1",className:"w-full px-3 py-2 border border-border rounded-md bg-background"})]})]}),i.jsx(we,{onClick:X,disabled:j||!t||!v.isOwner||!y.recipient||!y.quantity||v.type==="erc1155"&&!y.tokenId,variant:"primary",size:"lg",className:"w-full flex items-center justify-center gap-2 shadow-sm",children:j?"Minting...":"Mint"})]})]})]})})]})};var upe="Label",jB=k.forwardRef((t,e)=>i.jsx(Pt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));jB.displayName=upe;var dpe=jB;function Bl({className:t,...e}){return i.jsx(dpe,{"data-slot":"label",className:je("flex items-center gap-2 text-[length:var(--text-base)] leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}const fpe=uu("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-red-600 dark:text-red-500 bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-red-600/90"}},defaultVariants:{variant:"default"}});function Ja({className:t,variant:e,...n}){return i.jsx("div",{"data-slot":"alert",role:"alert",className:je(fpe({variant:e}),t),...n})}function Xa({className:t,...e}){return i.jsx("div",{"data-slot":"alert-description",className:je("text-gray-500 dark:text-gray-400 col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}const CB=()=>{const{address:t,connected:e,provider:n}=an(),{getContractInstance:r}=xn(),[s,o]=k.useState(!1),[a,l]=k.useState(""),[c,u]=k.useState(""),[f,p]=k.useState(""),[m,g]=k.useState(""),[w,y]=k.useState(""),[T,j]=k.useState(""),[_,v]=k.useState(""),[P,D]=k.useState(""),[$,U]=k.useState(""),[K,Y]=k.useState(""),[G,X]=k.useState(null),[V,A]=k.useState(null),[x,C]=k.useState(!1),[L,z]=k.useState(!1);k.useEffect(()=>{(!a||a.trim()==="")&&(u(""),U(""),Y(""),X(null),z(!1),v(""),D(""))},[a]),k.useEffect(()=>{(!f||f.trim()==="")&&A(null)},[f]);const R=async()=>{if(v(""),D(""),u(""),U(""),Y(""),X(null),A(null),z(!1),!a||!bn(a)){v("Please enter a valid collection address");return}if(!e){v("Please connect your wallet");return}o(!0);try{try{const M=new Mt(a,tn.erc721Prize,n),ee=await M.name(),O=await M.symbol();U(ee),Y(O),X("erc721"),u(a);try{const H=(await M.owner()).toLowerCase()===t.toLowerCase();z(H)}catch{z(!1)}return}catch{console.log("Not an ERC721 collection, trying ERC1155...")}try{const M=new Mt(a,tn.erc1155Prize,n);try{const ee=await M.uri(0);U("ERC1155 Collection"),Y("ERC1155")}catch{U("ERC1155 Collection"),Y("ERC1155")}X("erc1155"),u(a),D("ERC1155 Collection found");try{const O=(await M.owner()).toLowerCase()===t.toLowerCase();z(O)}catch{z(!1)}return}catch{console.log("Not an ERC1155 collection either")}v("Collection not found or not a supported type (ERC721/ERC1155)")}catch(M){console.error("Error fetching collection:",M),v(`Failed to fetch collection: ${ro(M)}`)}finally{o(!1)}};k.useEffect(()=>{const M=a&&bn(a);if(!e||!M)return;const ee=setTimeout(()=>{s||R()},300);return()=>clearTimeout(ee)},[a,e]);const I=async()=>{try{if(!c||!G||!n||!bn(f))return;C(!0);const ee=await new Mt(c,G==="erc721"?tn.erc721Prize:tn.erc1155Prize,n).getKOLApprovalDetails(f),O={approved:ee.approved,poolLimit:ee.poolLimit?Number(ee.poolLimit):0,enforcedSlotFee:ee.enforcedSlotFee?ee.enforcedSlotFee:ce.from(0),winnerLimit:ee.winnerLimit?Number(ee.winnerLimit):0,poolCount:ee.poolCount?Number(ee.poolCount):0,winnerCount:ee.winnerCount?Number(ee.winnerCount):0};A(O)}catch(M){console.error("Error fetching KOL details:",M),v(`Failed to fetch KOL details: ${ro(M)}`),A(null)}finally{C(!1)}};k.useEffect(()=>{if(!(f&&bn(f))||!c||!G)return;const ee=setTimeout(()=>{I()},250);return()=>clearTimeout(ee)},[f,c,G]);const N=async()=>{if(!c||!n){re.error("Please fetch a collection first");return}if(!bn(f)){re.error("Please enter a valid KOL address");return}if(!m||isNaN(m)||parseInt(m)<=0){re.error("Please enter a valid pool limit");return}if(!w||isNaN(w)||parseFloat(w)<0){re.error("Please enter a valid enforced slot fee");return}if(!T||isNaN(T)||parseInt(T)<=0){re.error("Please enter a valid winner limit");return}try{o(!0),v(""),D("");const M=n.getSigner();let ee;G==="erc721"?ee=new Mt(c,tn.erc721Prize,M):G==="erc1155"&&(ee=new Mt(c,tn.erc1155Prize,M));let O;try{if(typeof ee.owner=="function")O=await ee.owner();else{re.error("Contract does not support owner functionality");return}}catch{re.error("Failed to get contract owner");return}const q=await M.getAddress();if(O.toLowerCase()!==q.toLowerCase()){re.error("Only the contract owner can approve KOLs");return}const H=ac(w.toString());await(await ee.approveKOL(f,parseInt(m),H,parseInt(T))).wait(),re.success("KOL approved successfully!"),re.success(`KOL ${f} approved with pool limit ${m}, slot fee ${w} ETH, and ${T} winner limit`),p(""),g(""),y(""),j(""),await I()}catch(M){console.error("Error approving KOL:",M),gn(M),v(`Failed to approve KOL: ${ro(M)}`)}finally{o(!1)}},F=async()=>{if(!c||!n){re.error("Please fetch a collection first");return}if(!bn(f)){re.error("Please enter a valid KOL address");return}try{o(!0),v(""),D("");const M=n.getSigner(),ee=new Mt(c,G==="erc721"?tn.erc721Prize:tn.erc1155Prize,M);let O;try{typeof ee.owner=="function"&&(O=await ee.owner())}catch{}const q=await M.getAddress();if(!O||O.toLowerCase()!==q.toLowerCase()){re.error("Only the contract owner can revoke KOLs");return}await(await ee.revokeKOL(f)).wait(),re.success("KOL revoked successfully!"),D(`KOL ${f} revoked`),await I()}catch(M){console.error("Error revoking KOL:",M),gn(M),v(`Failed to revoke KOL: ${ro(M)}`)}finally{o(!1)}},E=M=>bn(M);return e?i.jsx(ut,{children:i.jsxs(It,{className:"space-y-6 p-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Approve Key Opinion Leaders (KOLs) for collections with specific pool limits and slot fees"}),i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-muted/50",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Bl,{htmlFor:"collection",children:"Collection Address"}),i.jsx(Ps,{id:"collection",placeholder:"0x...",value:a,onChange:M=>l(M.target.value),disabled:s}),a&&!bn(a)&&i.jsx("p",{className:"text-sm text-red-600",children:"Invalid Ethereum address"})]}),c&&i.jsx("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Name:"})," ",$]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Symbol:"})," ",K]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Owner:"})," ",L?"You":"Other"]})]})})]}),c&&i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-muted/50",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"KOL Approval"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Bl,{htmlFor:"kol",children:"KOL Address"}),i.jsx(Ps,{id:"kol",placeholder:"0x...",value:f,onChange:M=>p(M.target.value),disabled:s}),f&&!bn(f)&&i.jsx("p",{className:"text-sm text-red-600",children:"Invalid Ethereum address"})]}),x&&i.jsx("div",{className:"p-3 bg-muted border rounded-lg text-sm",children:"Loading KOL details..."}),V&&i.jsxs("div",{className:"p-3 bg-muted border rounded-lg space-y-1 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ll,{variant:V.approved?"default":"secondary",children:V.approved?"Approved":"Not Approved"}),i.jsx("span",{className:"text-muted-foreground",children:"Current approval status"})]}),i.jsxs("div",{children:["Pool Limit: ",i.jsx("strong",{children:V.poolLimit})]}),i.jsxs("div",{children:["Enforced Slot Fee: ",i.jsxs("strong",{children:[Zt(V.enforcedSlotFee)," ETH"]})]}),i.jsxs("div",{children:["Winner Limit: ",i.jsx("strong",{children:V.winnerLimit})]}),i.jsxs("div",{children:["Pool Count: ",i.jsx("strong",{children:V.poolCount})]}),i.jsxs("div",{children:["Winner Count: ",i.jsx("strong",{children:V.winnerCount})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Bl,{htmlFor:"poolLimit",children:"Pool Limit"}),i.jsx(Ti,{id:"poolLimit",placeholder:"Enter pool limit (e.g., 100)",value:m,onChange:M=>g(M.target.value),disabled:s}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"The allowed number of raffle pools a KOL can create using your collection as prize"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Bl,{htmlFor:"enforcedSlotFee",children:"Enforced Slot Fee (ETH)"}),i.jsx(Ti,{id:"enforcedSlotFee",placeholder:"Enter slot fee in ETH (e.g., 0.01)",value:w,onChange:M=>y(M.target.value),disabled:s,step:"0.001"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Fixed slot fee that participants must pay to join the KOL's pool"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Bl,{htmlFor:"winnerLimit",children:"Winner Limit"}),i.jsx(Ti,{id:"winnerLimit",placeholder:"Enter winner limit (e.g., 5)",value:T,onChange:M=>j(M.target.value),disabled:s}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total winner limit that the KOL can allocate across all pools"})]}),i.jsxs(we,{onClick:N,disabled:!c||!E(f)||!m||!w||!T||s,variant:"primary",size:"md",className:"w-full",children:[s?i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Approve KOL"]}),i.jsxs(we,{onClick:F,disabled:!c||!E(f)||s,variant:"destructive",className:"w-full",children:[s?i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Revoke KOL"]})]})]}),_&&i.jsxs(Ja,{variant:"destructive",children:[i.jsx(Kt,{className:"h-4 w-4"}),i.jsx(Xa,{children:_})]}),P&&i.jsxs(Ja,{children:[i.jsx(hn,{className:"h-4 w-4"}),i.jsx(Xa,{children:P})]}),c&&L&&i.jsxs(Ja,{children:[i.jsx(lt,{className:"h-4 w-4"}),i.jsxs(Xa,{children:[i.jsx("strong",{children:"Note:"})," Only the collection owner can approve KOLs. KOL approval allows the approved address to create pools using this collection as prize."]})]})]})}):i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"KOL Approval Management"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Please connect your wallet to manage KOL approvals for collections."}),i.jsxs(Ja,{children:[i.jsx(Kt,{className:"h-4 w-4"}),i.jsx(Xa,{children:"Please connect your wallet to manage KOL approvals."})]})]})})},SB=()=>{const{address:t,provider:e}=an(),{getContractInstance:n,executeTransaction:r}=xn(),[s,o]=k.useState(""),[a,l]=k.useState(null),[c,u]=k.useState(null),[f,p]=k.useState(!1),[m,g]=k.useState(""),[w,y]=k.useState(2),[T,j]=k.useState(7),[_,v]=k.useState(1),[P,D]=k.useState(null),[$,U]=k.useState(null),[K,Y]=k.useState(!1),[G,X]=k.useState(!1),[V,A]=k.useState(!1),[x,C]=k.useState(!1),[L,z]=k.useState(""),[R,I]=k.useState(""),[N,F]=k.useState(""),[E,M]=k.useState(""),[ee,O]=k.useState(!1),[q,H]=k.useState(!1),[J,Q]=k.useState(""),[ne,se]=k.useState(""),[ie,pe]=k.useState(!1),le=async Se=>{if(!Se||!bn(Se)){l(null),D(null),U(null),u(null),H(!1);return}p(!0);try{let Te=n(Se,"erc721Prize"),ze=!1;try{await Te.supportsInterface("0x80ac58cd")?ze=!0:Te=n(Se,"erc1155Prize")}catch{Te=n(Se,"erc1155Prize")}const dt=await Te.owner();if(t&&dt.toLowerCase()===t.toLowerCase()?H(!0):H(!1),u(ze),l(Te),ze){let oe="Unknown",ue="Unknown";try{typeof Te.name=="function"&&(oe=await Te.name())}catch{}try{typeof Te.symbol=="function"&&(ue=await Te.symbol())}catch{}const[ge,be,ve,Ke,Me,He,ct,Je]=await Promise.all([Te.maxSupply(),Te.creatorAllocation(),Te.creationTime(),Te.vestingConfigured(),Te.creatorClaimedCount(),Te.getUnlockedCreatorAllocation(),Te.availableSupply(),Te.creatorAllocationDeclared()]),Ye={name:oe,symbol:ue,maxSupply:ge.toString(),creatorAllocation:be.toString(),creationTime:ve.toString(),vestingConfigured:Ke,creatorClaimedCount:Me.toString(),unlockedAmount:He.toString(),availableSupply:ct.toString(),creatorAllocationDeclared:Je,isERC721:!0};if(D(Ye),Ke){const[St,bt,Ze]=await Promise.all([Te.vestingConfig(),Te.getAvailableCreatorMint(),Te.getUnlockedCreatorAllocation()]);U({cliffEnd:St.cliffEnd.toString(),numberOfUnlocks:St.numberOfUnlocks.toString(),durationBetweenUnlocks:St.durationBetweenUnlocks.toString(),amountPerUnlock:St.amountPerUnlock.toString(),availableToMint:bt.toString(),unlockedAmount:Ze.toString()})}}else{const[oe,ue,ge,be,ve,Ke,Me,He]=await Promise.all([Te.maxSupply(_),Te.creatorAllocation(_),Te.tokenCreationTime(_),Te.vestingConfigured(_),Te.creatorClaimedCount(_),Te.getUnlockedCreatorAllocation(_),Te.availableSupply(_),Te.creatorAllocationDeclared(_)]),ct={maxSupply:oe.toString(),creatorAllocation:ue.toString(),creationTime:ge.toString(),vestingConfigured:be,creatorClaimedCount:ve.toString(),unlockedAmount:Ke.toString(),availableSupply:Me.toString(),creatorAllocationDeclared:He,isERC721:!1,tokenId:_};if(D(ct),be){const[Je,Ye,St]=await Promise.all([Te.vestingConfig(_),Te.getAvailableCreatorMint(_),Te.getUnlockedCreatorAllocation(_)]);U({cliffEnd:Je.cliffEnd.toString(),numberOfUnlocks:Je.numberOfUnlocks.toString(),durationBetweenUnlocks:Je.durationBetweenUnlocks.toString(),amountPerUnlock:Je.amountPerUnlock.toString(),availableToMint:Ye.toString(),unlockedAmount:St.toString()})}}re.success("Collection details fetched successfully")}catch(Te){console.error("Error fetching collection:",Te),re.error(`Failed to fetch collection: ${Te.message}`),l(null),D(null),U(null)}finally{p(!1)}};k.useEffect(()=>{const Se=new Date;Se.setDate(Se.getDate()+7),g(Se.toISOString().slice(0,16))},[]),k.useEffect(()=>{const Se=setTimeout(()=>{s&&bn(s)?le(s):s===""&&(l(null),D(null),U(null),u(null))},500);return()=>clearTimeout(Se)},[s,t]),k.useEffect(()=>{s&&bn(s)&&!c&&a&&le(s)},[_]);const me=async()=>{if(!a||!P){re.error("Please enter a valid collection address");return}if(P.vestingConfigured){re.error("Vesting is already configured for this collection/token");return}if(!m){re.error("Please select a cliff end date and time");return}const Se=new Date(m);if(Se<new Date){re.error("Cliff date must be in the future");return}if(T<1){re.error("Unlock interval must be at least 1 day");return}const ze=parseInt(P.creatorAllocation);let dt=2;if(ze>=2e3||ze>=1e3?dt=8:ze>=500&&(dt=4),w<dt){re.error(`For an allocation of ${ze} tokens, minimum ${dt} unlocks required`);return}Y(!0);try{const oe=Math.floor(Se.getTime()/1e3),ue=T*86400;let ge;c?ge=await r(()=>a.configureCreatorVesting(oe,w,ue)):ge=await r(()=>a.configureCreatorVesting(_,oe,w,ue)),ge&&(re.success("Vesting configured successfully!"),await le())}catch(oe){console.error("Error configuring vesting:",oe),gn(oe)}finally{Y(!1)}},Ee=async()=>{if(!a||!P){re.error("Please enter a valid collection address");return}X(!0);try{const Se=Number(R);if(!isFinite(Se)||Se<=0||Se>100){re.error("Enter a valid percentage between 0 and 100"),X(!1);return}const Te=ce.from(Se);if(c)await a.callStatic.declareCreatorAllocation(Te),await r(()=>a.declareCreatorAllocation(Te));else{const ze=N?parseInt(N):_;await a.callStatic.declareCreatorAllocation(ze,Te),await r(()=>a.declareCreatorAllocation(ze,Te))}re.success("Creator allocation declared"),await le(s)}catch(Se){gn(Se)}finally{X(!1)}},te=async()=>{if(!a||!P){re.error("Please enter a valid collection address");return}if(!J||!bn(J)){re.error("Please enter a valid pool address");return}pe(!0);try{if(c)await a.callStatic.restoreMinterAllocation(J),(await r(()=>a.restoreMinterAllocation(J))).success&&(re.success("Pool allocation restored successfully"),await le(s),Q(""));else{const Se=ne?parseInt(ne):_;await a.callStatic.restoreMinterAllocation(J,Se),(await r(()=>a.restoreMinterAllocation(J,Se))).success&&(re.success("Pool allocation restored successfully"),await le(s),Q(""),se(""))}}catch(Se){gn(Se)}finally{pe(!1)}},Ne=async()=>{if(!a||!P){re.error("Please enter a valid collection address");return}C(!0);try{const Se=Number(E);if(!isFinite(Se)||Se<=0||Se>100){re.error("Enter a valid percentage between 0 and 100"),C(!1);return}const Te=Number(P.creatorAllocation),ze=Number(P.creatorClaimedCount);if(Te-ze<=0){re.error("No remaining creator allocation to reduce"),C(!1);return}const oe=ce.from(Se);if(c)await a.callStatic.reduceCreatorAllocation(oe),await r(()=>a.reduceCreatorAllocation(oe));else{const ue=P.tokenId||_;await a.callStatic.reduceCreatorAllocation(ue,oe),await r(()=>a.reduceCreatorAllocation(ue,oe))}re.success("Creator allocation reduced successfully"),M(""),O(!1),await le(s)}catch(Se){console.error("Error reducing creator allocation:",Se),Se.message.includes("No remaining creator allocation")?re.error("No remaining creator allocation to reduce"):Se.message.includes("Creator allocation must be declared")?re.error("Creator allocation must be declared first"):re.error("Failed to reduce creator allocation: "+Se.message)}finally{C(!1)}},Pe=async()=>{if(!a||!P){re.error("Please enter a valid collection address");return}A(!0);try{const Se=Number(L);if(!isFinite(Se)||Se<=0||Se>100){re.error("Enter a valid percentage between 0 and 100"),A(!1);return}const Te=ce.from(Se);if(c)await a.callStatic.cutSupply(Te),await r(()=>a.cutSupply(Te));else{const ze=N?parseInt(N):_;await a.callStatic.cutSupply(ze,Te),await r(()=>a.cutSupply(ze,Te))}re.success("Supply cut successfully"),await le(s)}catch(Se){gn(Se)}finally{A(!1)}},et=Se=>!Se||Se==="0"?"Not set":new Date(parseInt(Se)*1e3).toLocaleString(),Le=Se=>{if(!Se||Se==="0")return"N/A";const Te=Math.floor(Date.now()/1e3),ze=parseInt(Se);if(Te>=ze)return"Ended";const dt=ze-Te,oe=Math.floor(dt/86400),ue=Math.floor(dt%86400/3600);return`${oe}d ${ue}h`};return i.jsxs("div",{className:"space-y-6",children:[i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your collection address to view and configure supply, creator allocation and vesting"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Collection Address"}),i.jsx("input",{type:"text",placeholder:"0x...",value:s,onChange:Se=>o(Se.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background"}),f&&i.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[i.jsx("span",{className:"animate-spin",children:""})," Fetching collection details..."]})]}),!c&&a&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Token ID (ERC1155 only)"}),i.jsx("input",{type:"number",placeholder:"1",value:_,onChange:Se=>v(parseInt(Se.target.value)||1),className:"w-full px-3 py-2 border border-border rounded-md bg-background",min:"1"})]})]})}),P&&i.jsx(ut,{children:i.jsxs(It,{className:"space-y-3 p-4",children:[i.jsxs("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:[i.jsx(Kt,{className:"h-5 w-5"}),"Collection Information"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"}),i.jsx("p",{className:"font-semibold",children:P.name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Symbol:"}),i.jsx("p",{className:"font-semibold",children:P.symbol})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Max Supply:"}),i.jsx("p",{className:"font-semibold",children:P.maxSupply})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Creator Allocation:"}),i.jsxs("p",{className:"font-semibold",children:[P.creatorAllocation," tokens"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Already Claimed:"}),i.jsxs("p",{className:"font-semibold",children:[P.creatorClaimedCount," tokens"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Unlocked Amount:"}),i.jsxs("p",{className:"font-semibold",children:[P.unlockedAmount," tokens"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Available Supply:"}),i.jsxs("p",{className:"font-semibold",children:[P.availableSupply," tokens"]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-muted-foreground",children:"Creation Time:"}),i.jsx("p",{className:"font-semibold",children:et(P.creationTime)})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-muted-foreground",children:"Vesting Status:"}),i.jsx("p",{className:`font-semibold flex items-center gap-2 ${P.vestingConfigured?"text-green-600":"text-yellow-600"}`,children:P.vestingConfigured?i.jsxs(i.Fragment,{children:[i.jsx(fo,{className:"h-4 w-4"})," Configured"]}):i.jsxs(i.Fragment,{children:[i.jsx(Kt,{className:"h-4 w-4"})," Not Configured"]})})]})]})]})}),$&&i.jsx(ut,{className:"border-green-500/50",children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsxs("div",{className:"text-base font-medium flex items-center gap-2 text-green-600 mb-1",children:[i.jsx(fo,{className:"h-5 w-5"}),"Vesting Schedule ",!c&&P.tokenId&&`(Token ID: ${P.tokenId})`]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Cliff Ends:"}),i.jsx("p",{className:"font-semibold",children:et($.cliffEnd)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Le($.cliffEnd)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Unlocks:"}),i.jsx("p",{className:"font-semibold",children:$.numberOfUnlocks})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Unlock Interval:"}),i.jsxs("p",{className:"font-semibold",children:[parseInt($.durationBetweenUnlocks)/86400," days"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Tokens per Unlock:"}),i.jsx("p",{className:"font-semibold",children:$.amountPerUnlock})]}),i.jsxs("div",{className:"col-span-2 pt-2 border-t",children:[i.jsx("span",{className:"text-muted-foreground",children:"Currently Unlocked:"}),i.jsxs("p",{className:"font-semibold text-lg text-blue-600",children:[$.unlockedAmount," tokens"]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-muted-foreground",children:"Available to Mint:"}),i.jsxs("p",{className:"font-semibold text-lg text-green-600",children:[$.availableToMint," tokens"]})]})]})]})}),P&&i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsxs("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:[i.jsx(th,{className:"h-5 w-5"}),"Cut Supply"]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Reduce the maximum supply and proportionally reduce creator allocation"}),!c&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Token ID (ERC1155 only)"}),i.jsx("input",{type:"number",placeholder:"1",value:N,onChange:Se=>F(Se.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Cut Percentage (%)"}),i.jsx("input",{type:"number",placeholder:"20",value:L,onChange:Se=>z(Se.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter percentage as a whole number (e.g., 20 = 20%). This will reduce both maxSupply and creatorAllocation proportionally."}),L&&Number(L)>0&&Number(L)<=100&&i.jsxs("p",{className:"text-xs text-red-600",children:["Will remove: ",Math.floor(Number(P.maxSupply)*Number(L)/100)," tokens from max supply",P.creatorAllocationDeclared&&i.jsxs(i.Fragment,{children:[i.jsx("br",{}),"Will remove: ",Math.floor(Number(P.creatorAllocation)*Number(L)/100)," tokens from creator allocation"]})]})]}),i.jsx(we,{onClick:Pe,disabled:!L||V||!q,className:"w-full",children:V?"Cutting...":q?"Cut Supply":"Connect as Owner to Cut"})]})}),P&&!P.creatorAllocationDeclared&&i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsxs("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:[i.jsx(th,{className:"h-5 w-5"}),"Declare Creator Allocation"]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Declare the creator allocation percentage for this collection"}),!c&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Token ID (ERC1155 only)"}),i.jsx("input",{type:"number",placeholder:"1",value:N,onChange:Se=>F(Se.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Allocation Percentage (%)"}),i.jsx("input",{type:"number",placeholder:"20",value:R,onChange:Se=>I(Se.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter percentage as a whole number (e.g., 20 = 20%)"})]}),i.jsx(we,{onClick:Ee,disabled:!R||G||!q,className:"w-full",children:G?"Declaring...":q?"Declare Allocation":"Connect as Owner to Declare"})]})}),P&&i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsxs("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:[i.jsx(ul,{className:"h-5 w-5"}),"Restore Pool Allocation"]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Restore a pool's unmintable allocation back to the collection's available supply"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Pool Address"}),i.jsx("input",{type:"text",placeholder:"0x...",value:J,onChange:Se=>Q(Se.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the pool address"})]}),!c&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Token ID (ERC1155 only)"}),i.jsx("input",{type:"number",placeholder:"1",value:ne,onChange:Se=>se(Se.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Leave empty to use the token ID from above (",_,")"]})]}),i.jsx(we,{onClick:te,disabled:!J||ie||!q,className:"w-full",children:ie?"Restoring...":q?"Restore Allocation":"Connect as Owner to Restore"})]})}),P&&P.creatorAllocationDeclared&&i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsxs("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:[i.jsx(EQ,{className:"h-5 w-5"}),"Reduce Creator Allocation"]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Reduce your remaining locked creator allocation by a percentage"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm bg-muted/50 p-3 rounded-md",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Allocation:"}),i.jsxs("p",{className:"font-semibold",children:[P.creatorAllocation," tokens"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Already Claimed:"}),i.jsxs("p",{className:"font-semibold",children:[P.creatorClaimedCount," tokens"]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-muted-foreground",children:"Remaining Locked:"}),i.jsxs("p",{className:"font-semibold",children:[Math.max(0,Number(P.creatorAllocation)-Number(P.creatorClaimedCount)-Number(P.unlockedAmount||0))," tokens"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Reduction Percentage"}),i.jsx("input",{type:"number",placeholder:"25",value:E,onChange:Se=>{M(Se.target.value),Se.target.value||O(!1)},className:"w-full px-3 py-2 border border-border rounded-md bg-background",min:"1",max:"100"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter percentage to reduce from your total allocation (e.g., 10 = 10%)."}),E&&Number(E)>0&&Number(E)<=100&&i.jsxs("p",{className:"text-xs text-red-600",children:["Will reduce your total allocation by: ",Math.floor(Number(P.creatorAllocation)*Number(E)/100)," tokens"]}),Number(P.unlockedAmount||0)>0&&i.jsx("div",{className:"mt-2 p-2 bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-md",children:i.jsxs("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:[" ",i.jsx("strong",{children:"Warning:"})," You have ",P.unlockedAmount," unlocked tokens. Reducing your allocation will also reduce your unlocked tokens that are available to claim."]})})]}),ee?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-md",children:[i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium mb-2",children:" Confirmation Required"}),i.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400",children:["You are about to reduce your creator allocation by ",E,"%. This will reduce both your locked and unlocked tokens, and cannot be undone."]}),Number(P.unlockedAmount||0)>0&&i.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:["Your unlocked tokens will be reduced from ",P.unlockedAmount," to ",Math.max(0,Number(P.unlockedAmount)-Math.floor(Number(P.creatorAllocation)*Number(E)/100)),"."]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(we,{onClick:Ne,disabled:x,className:"flex-1 bg-red-600 hover:bg-red-700",children:x?"Confirming...":"Confirm Reduction"}),i.jsx(we,{onClick:()=>O(!1),disabled:x,variant:"outline",className:"flex-1",children:"Cancel"})]})]}):i.jsx(we,{onClick:()=>O(!0),disabled:!E||x||!q,className:"w-full",children:x?"Reducing...":q?"Reduce Allocation":"Connect as Owner to Reduce"})]})}),P&&!P.vestingConfigured&&i.jsxs(ut,{children:[i.jsxs(Jr,{children:[i.jsxs(Fs,{className:"flex items-center gap-2",children:[i.jsx(Vg,{className:"h-5 w-5"}),"Configure Vesting Schedule"]}),i.jsx(wm,{children:"Set up the vesting schedule for your creator allocation"})]}),i.jsxs(It,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Cliff End Date & Time"}),i.jsx("input",{type:"datetime-local",value:m,onChange:Se=>g(Se.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Select the date and time when the cliff period ends. Must be at least 7 days from now."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Number of Unlocks"}),i.jsx("input",{type:"number",placeholder:"2",value:w,onChange:Se=>y(parseInt(Se.target.value)||2),className:"w-full px-3 py-2 border border-border rounded-md bg-background"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[P.creatorAllocation<500&&"Minimum 2 unlocks for allocation < 500",P.creatorAllocation>=500&&P.creatorAllocation<1e3&&"Minimum 4 unlocks for allocation 500-999",P.creatorAllocation>=1e3&&P.creatorAllocation<2e3&&"Minimum 8 unlocks for allocation 1000-1999",P.creatorAllocation>=2e3&&"Minimum 8 unlocks for allocation  2000"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Days Between Unlocks"}),i.jsx("input",{type:"number",placeholder:"7",value:T,onChange:Se=>j(parseInt(Se.target.value)||7),className:"w-full px-3 py-2 border border-border rounded-md bg-background"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum 7 days between each unlock period."})]}),i.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-2",children:[i.jsxs("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[i.jsx(th,{className:"h-4 w-4"}),"Preview"]}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("p",{children:[" Cliff ends on ",i.jsx("strong",{children:m?new Date(m).toLocaleString():"Not set"})]}),i.jsxs("p",{children:[" ",i.jsx("strong",{children:w})," unlock periods"]}),i.jsxs("p",{children:[" ",i.jsx("strong",{children:Math.ceil(parseInt(P.creatorAllocation)/w)})," tokens per unlock"]}),i.jsxs("p",{children:[" New unlock every ",i.jsxs("strong",{children:[T," days"]})]}),m&&i.jsxs("p",{children:[" Full allocation available in ",i.jsxs("strong",{children:[Math.ceil((new Date(m).getTime()-Date.now())/(1e3*60*60*24)+(w-1)*T)," days"]})]})]})]}),i.jsx(we,{onClick:me,disabled:K,className:"w-full",children:K?"Configuring...":"Configure Vesting"})]})]}),!P&&i.jsx(ut,{className:"bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",children:i.jsxs(It,{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 p-4",children:[i.jsxs("div",{className:"text-base font-medium flex items-center gap-2 text-blue-700 dark:text-blue-400 mb-1",children:[i.jsx(Kt,{className:"h-4 w-4"}),"About Vesting"]}),i.jsx("p",{children:"Vesting prevents creators from immediately minting and selling their entire 20% allocation, protecting holders from rug pulls."}),i.jsxs("p",{children:[i.jsx("strong",{children:"Cliff Period:"})," No tokens can be minted until the cliff period ends."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Unlocks:"})," After the cliff, tokens become available in batches at regular intervals."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Important:"})," Vesting can only be configured once and cannot be changed later."]})]})})]})},EB=({onBack:t})=>{const{address:e,connected:n,provider:r,chainId:s}=an(),{getContractInstance:o}=xn(),[a,l]=k.useState(!1),[c,u]=k.useState("deposit"),[f,p]=k.useState(""),[m,g]=k.useState(null),[w,y]=k.useState(!1),[T,j]=k.useState(!1),[_,v]=k.useState(""),[P,D]=k.useState(""),[$,U]=k.useState(null),[K,Y]=k.useState("0"),[G,X]=k.useState("0"),[V,A]=k.useState(!1),[x,C]=k.useState(""),[L,z]=k.useState("0"),[R,I]=k.useState(""),[N,F]=k.useState([]),[E,M]=k.useState({}),[ee,O]=k.useState("0"),[q,H]=k.useState(!1),[J,Q]=k.useState(!1),[ne,se]=k.useState(!1),[ie,pe]=k.useState(!1),[le,me]=k.useState("0"),[Ee,te]=k.useState("");k.useEffect(()=>{te("")},[c]),k.useEffect(()=>{f&&bn(f)?Ne():(g(null),j(!1),U(null),Y("0"),X("0"),A(!1))},[f]),k.useEffect(()=>{_&&bn(_)?Pe():(U(null),Y("0"),X("0"),A(!1))},[_,n]),k.useEffect(()=>{c==="claim"&&n&&(Le(),et())},[c,n,f,e]),k.useEffect(()=>{m&&c==="claim"&&Se()},[m,c,e]),k.useEffect(()=>{f&&c==="claim"&&n&&et()},[f,c,n,e]),k.useEffect(()=>{R&&bn(R)&&T&&c==="claim"&&Te()},[R,T,c,e]);const Ne=async()=>{var ge,be,ve,Ke;if(!(!n||!r)){y(!0),te("");try{const Me=(be=(ge=jt[s])==null?void 0:ge.contractAddresses)==null?void 0:be.rewardsFlywheel;if(!Me)return;const He=o(Me,"rewardsFlywheel");if(!He)return;const ct=(Ke=(ve=jt[s])==null?void 0:ve.contractAddresses)==null?void 0:Ke.protocolManager;if(ct){const Ye=o(ct,"protocolManager");if(Ye){const St=await Ye.isPoolContract(f);if(j(St),!St){te("Invalid pool address"),g(null),pe(!1),me("0"),y(!1);return}}}const Je=await He.poolRewards(f);if(Je.totalDeposited.gt(0)){const Ye={totalDeposited:Zt(Je.totalDeposited),rewardPerSlot:Zt(Je.rewardPerSlot),totalEligibleSlots:Je.totalEligibleSlots.toString(),claimedSlots:Je.claimedSlots.toString(),token:Je.token,depositor:Je.depositor,rewardPerSlotCalculated:Je.rewardPerSlotCalculated};g(Ye),Je.token!==$e&&v(Je.token),pe(Je.depositor.toLowerCase()===e.toLowerCase());const St=Je.totalDeposited.sub(Je.totalClaimedAmount);me(Zt(St))}else g(null),pe(!1),me("0")}catch(Me){console.error("Error fetching pool info:",Me),te("Failed to fetch pool information"),j(!1)}finally{y(!1)}}},Pe=async()=>{var ge,be;if(!n||!r){U(null),Y("0"),X("0"),A(!1);return}try{const ve=new Mt(_,["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)","function allowance(address owner, address spender) view returns (uint256)"],r),[Ke,Me,He,ct]=await Promise.all([ve.name(),ve.symbol(),ve.decimals(),ve.balanceOf(e)]);if(U({name:Ke,symbol:Me,decimals:He}),Y(Is(ct,He)),(be=(ge=jt[s])==null?void 0:ge.contractAddresses)!=null&&be.rewardsFlywheel){const Je=await ve.allowance(e,jt[s].contractAddresses.rewardsFlywheel),Ye=Is(Je,He);X(Ye),P&&parseFloat(P)>parseFloat(Ye)?A(!0):A(!1)}}catch(ve){console.error("Error fetching token info:",ve),te("Failed to fetch token information")}},et=async()=>{var ge,be;if(!(!n||!r||!f))try{const ve=(be=(ge=jt[s])==null?void 0:ge.contractAddresses)==null?void 0:be.protocolManager;if(!ve)return;const He=(await new Mt(ve,["function getPoolCreator(address pool) view returns (address)"],r).getPoolCreator(f)).toLowerCase()===e.toLowerCase();Q(He)}catch(ve){console.error("Error checking if user is creator:",ve),Q(!1)}},Le=async()=>{var ge,be;if(!(!n||!r))try{const ve=(be=(ge=jt[s])==null?void 0:ge.contractAddresses)==null?void 0:be.rewardsFlywheel;if(!ve)return;const Ke=o(ve,"rewardsFlywheel");if(!Ke)return;const Me=await Ke.getCreatorRewardTokens();F(Me);const He={};for(const ct of Me)try{const[Je,Ye,St]=await Ke.getCreatorRewardConfig(ct),bt=new Mt(ct,["function symbol() view returns (string)","function decimals() view returns (uint8)"],r),[Ze,An]=await Promise.all([bt.symbol(),bt.decimals()]);He[ct]={rewardAmount:Is(Je,An),totalDeposited:Is(Ye,An),tokenAddress:St,symbol:Ze,decimals:An}}catch(Je){console.error(`Error fetching config for token ${ct}:`,Je)}M(He)}catch(ve){console.error("Error fetching creator reward tokens:",ve)}},Se=async()=>{var ge,be;if(!(!n||!r||!m))try{const ve=(be=(ge=jt[s])==null?void 0:ge.contractAddresses)==null?void 0:be.rewardsFlywheel;if(!ve)return;const Ke=o(ve,"rewardsFlywheel");if(!Ke)return;const Me=await Ke.hasClaimed(f,e),He=new Mt(f,["function slotsPurchased(address) view returns (uint256)","function winsPerAddress(address) view returns (uint256)"],r),ct=await He.slotsPurchased(e);if(se(ct.gt(0)),ct.eq(0)){z("0");return}const Je=await Ke.getClaimableReward(f,e);let Ye="0";if(Je.gt(0)&&m.token)try{const St=new Mt(m.token,["function decimals() view returns (uint8)","function symbol() view returns (string)"],r),[bt,Ze]=await Promise.all([St.decimals(),St.symbol()]);Ye=`${Is(Je,bt)} ${Ze}`}catch{Ye=Zt(Je)}else if(ct.gt(0)&&!Me){const St=await He.winsPerAddress(e);ct.gt(St)&&(Ye="pending")}z(Ye)}catch(ve){console.error("Error checking participant claim eligibility:",ve)}},Te=async()=>{var ge,be,ve,Ke;if(!(!n||!r||!f||!R))try{const Me=(be=(ge=jt[s])==null?void 0:ge.contractAddresses)==null?void 0:be.rewardsFlywheel;if(!Me)return;const He=o(Me,"rewardsFlywheel");if(!He)return;const ct=(Ke=(ve=jt[s])==null?void 0:ve.contractAddresses)==null?void 0:Ke.protocolManager;if(!ct)return;const St=(await new Mt(ct,["function getPoolCreator(address pool) view returns (address)"],r).getPoolCreator(f)).toLowerCase()===e.toLowerCase();Q(St);const bt=await He.creatorHasClaimed(f,e);H(bt);const Ze=await He.getCreatorClaimableAmount(f,R);let An="0";if(Ze.gt(0))try{const Dt=new Mt(R,["function decimals() view returns (uint8)","function symbol() view returns (string)"],r),[Ot,wn]=await Promise.all([Dt.decimals(),Dt.symbol()]);An=`${Is(Ze,Ot)} ${wn}`,C(R)}catch{An=Zt(Ze),C(R)}else C(R);O(An)}catch(Me){console.error("Error checking creator claim eligibility:",Me),te("Failed to check creator claim eligibility")}},ze=async()=>{if(!n||!_||!P){te("Please fill all fields");return}l(!0),te("");try{const ge=new Mt(_,["function approve(address spender, uint256 amount) returns (bool)"],r.getSigner()),be=xh(P,$.decimals),ve=await ge.approve(jt[s].contractAddresses.rewardsFlywheel,be);re.info("Approval transaction sent..."),await ve.wait(),re.success("Token approved successfully!"),A(!1),await Pe()}catch(ge){const be=await ro(ge);te(be||"Approval failed"),gn(be||"Token approval failed")}finally{l(!1)}},dt=async()=>{var ge,be;if(!n||!f||!_||!P){te("Please fill all fields");return}if(!bn(f)){te("Invalid pool address");return}l(!0),te("");try{const ve=(be=(ge=jt[s])==null?void 0:ge.contractAddresses)==null?void 0:be.rewardsFlywheel;if(!ve){te("RewardsFlywheel contract not available on this network");return}const Ke=o(ve,"rewardsFlywheel");if(!Ke){te("RewardsFlywheel contract not available on this network");return}const Me=xh(P,$.decimals),He=await Ke.depositERC20Rewards(f,_,Me);re.info("Deposit transaction sent..."),await He.wait(),re.success("Rewards deposited successfully!"),await Ne(),await Pe(),D("")}catch(ve){const Ke=await ro(ve);te(Ke||"Deposit failed"),gn(Ke||"Failed to deposit rewards")}finally{l(!1)}},oe=async()=>{var ve,Ke;if(!n){te("Please connect your wallet");return}const ge=L==="pending"||parseFloat(L)>0,be=parseFloat(ee)>0;if(!ge&&!be){te("No rewards available to claim");return}l(!0),te("");try{const Me=(Ke=(ve=jt[s])==null?void 0:ve.contractAddresses)==null?void 0:Ke.rewardsFlywheel;if(!Me){te("RewardsFlywheel contract not available on this network");return}const He=o(Me,"rewardsFlywheel");if(!He){te("RewardsFlywheel contract not available on this network");return}if(ge){const ct=await He.claimRewards(f);re.info("Participant reward claim transaction sent..."),await ct.wait(),re.success("Participant rewards claimed successfully!")}if(be&&x){const ct=await He.claimCreatorRewards(f,x);re.info("Creator reward claim transaction sent..."),await ct.wait(),re.success("Creator rewards claimed successfully!")}await Ne(),await Se(),R&&bn(R)&&await Te()}catch(Me){const He=await ro(Me);te(He||"Claim failed"),gn(He||"Failed to claim rewards")}finally{l(!1)}},ue=async()=>{var ge,be;if(!n||!f){te("Invalid pool address");return}if(!ie){te("Only the depositor can withdraw rewards");return}l(!0),te("");try{const ve=(be=(ge=jt[s])==null?void 0:ge.contractAddresses)==null?void 0:be.rewardsFlywheel;if(!ve){te("RewardsFlywheel contract not available on this network");return}const Ke=o(ve,"rewardsFlywheel");if(!Ke){te("RewardsFlywheel contract not available on this network");return}const Me=await Ke.withdrawDepositedRewards(f);re.info("Withdraw transaction sent..."),await Me.wait(),re.success("Rewards withdrawn successfully!"),await Ne(),pe(!1),me("0")}catch(ve){const Ke=await ro(ve);te(Ke||"Withdraw failed"),gn(Ke||"Failed to withdraw rewards")}finally{l(!1)}};return i.jsxs("div",{className:"w-full mx-auto space-y-6 overflow-x-hidden",children:[i.jsx(ut,{className:"w-full",children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Enter the pool contract address to view and manage its rewards"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Pool Contract Address"}),i.jsx(gs,{id:"poolAddress",placeholder:"0x...",value:f,onChange:ge=>p(ge.target.value),disabled:a,className:"w-full text-xs sm:text-sm focus:ring-0 focus-visible:ring-0 focus:border-border"})]}),w&&i.jsx("div",{className:"flex items-center justify-center py-4",children:i.jsx($r,{className:"h-6 w-6 animate-spin"})}),m&&i.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-4",children:[i.jsx("div",{className:"flex flex-col gap-1",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap",children:"Total Deposited"}),i.jsxs("span",{className:"text-xs sm:text-sm text-right break-all",children:[m.totalDeposited," ",m.token===$e?"ETH":"Tokens"]})]})}),i.jsx("div",{className:"flex flex-col gap-1",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap",children:"Depositor"}),i.jsxs("span",{className:"text-xs sm:text-sm font-mono text-right break-all",children:[m.depositor.slice(0,6),"...",m.depositor.slice(-4)]})]})}),i.jsx("div",{className:"flex flex-col gap-1",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap",children:"Claimed Slots"}),i.jsxs("span",{className:"text-xs sm:text-sm text-right",children:[m.claimedSlots," / ",m.totalEligibleSlots||"Not calculated"]})]})}),ie&&i.jsx("div",{className:"flex flex-col gap-1",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap",children:"Remaining Amount"}),i.jsxs("span",{className:"text-xs sm:text-sm text-right break-all",children:[le," ",m.token===$e?"ETH":"Tokens"]})]})})]}),!m&&f&&!w&&i.jsxs(Ja,{children:[i.jsx(lt,{className:"h-4 w-4"}),i.jsx(Xa,{children:"No participant rewards found for this pool."})]})]})}),Ee&&i.jsxs(Ja,{variant:"destructive",className:"w-full",children:[i.jsx(Kt,{className:"h-4 w-4"}),i.jsx(Xa,{className:"text-xs sm:text-sm break-words",children:Ee})]}),f&&i.jsxs("div",{className:"flex flex-wrap gap-2 p-1 bg-muted rounded-lg w-full",children:[i.jsxs(we,{variant:c==="deposit"?"default":"ghost",onClick:()=>u("deposit"),className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm flex-1 min-w-[80px]",children:[i.jsx(Yr,{className:"h-3 w-3 sm:h-4 sm:w-4"}),i.jsx("span",{className:"truncate",children:"Deposit"})]}),T&&i.jsxs(i.Fragment,{children:[i.jsxs(we,{variant:c==="claim"?"default":"ghost",onClick:()=>u("claim"),className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm flex-1 min-w-[80px]",children:[i.jsx(Ql,{className:"h-3 w-3 sm:h-4 sm:w-4"}),i.jsx("span",{className:"truncate",children:"Claim"})]}),ie&&i.jsxs(we,{variant:c==="withdraw"?"default":"ghost",onClick:()=>u("withdraw"),className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm flex-1 min-w-[80px]",children:[i.jsx(hQ,{className:"h-3 w-3 sm:h-4 sm:w-4"}),i.jsx("span",{className:"truncate",children:"Withdraw"})]})]})]}),c==="deposit"&&f&&i.jsx(ut,{children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:m?"Increase Participant Reward Pool":"Deposit ERC20 Rewards"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:m?`Add more ${m.token===$e?"ETH":"tokens"} to the existing reward pool`:"Deposit ERC20 tokens as rewards for non-winning pool participants"}),m&&!m.rewardPerSlotCalculated&&i.jsxs("div",{className:"p-3 bg-blue-50/80 dark:bg-blue-900/20 backdrop-blur-sm border border-blue-200/50 dark:border-blue-700/50 rounded-lg flex items-center gap-2",children:[i.jsx(lt,{className:"h-4 w-4 text-blue-600"}),i.jsxs("span",{className:"text-sm text-blue-800 dark:text-blue-200",children:["This pool already has ",m.totalDeposited," ",m.token===$e?"ETH":"tokens"," deposited. You can add more rewards to increase the amount per participant."]})]}),m&&m.rewardPerSlotCalculated&&i.jsxs(Ja,{className:"border-amber-200 bg-amber-50 dark:border-amber-800 dark:bg-amber-900/20",children:[i.jsx(Kt,{className:"h-4 w-4 text-amber-600"}),i.jsx(Xa,{className:"text-sm text-amber-800 dark:text-amber-200",children:"Claiming has already started for this pool. Additional deposits are not allowed once participants begin claiming rewards."})]}),!m&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Token Address"}),i.jsx(gs,{id:"tokenAddress",placeholder:"0x...",value:_,onChange:ge=>v(ge.target.value),disabled:a,className:"focus:ring-0 focus-visible:ring-0 focus:border-border"})]}),$&&i.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Token:"})," ",$.symbol]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Decimals:"})," ",$.decimals]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-medium",children:"Balance:"})," ",K," ",$.symbol]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Deposit Amount"}),i.jsx(gs,{id:"depositAmount",type:"number",placeholder:"0.0",value:P,onChange:ge=>{D(ge.target.value),$&&ge.target.value&&A(parseFloat(ge.target.value)>parseFloat(G.toString()))},disabled:a||!$&&!m,className:"focus:ring-0 focus-visible:ring-0 focus:border-border"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:m?"Additional amount to deposit":"Amount of tokens to deposit"})]}),$&&parseFloat(P)>parseFloat(K)&&i.jsxs(Ja,{children:[i.jsx(Kt,{className:"h-4 w-4"}),i.jsxs(Xa,{children:["Insufficient balance. You have ",K," ",$.symbol]})]}),V&&i.jsxs(we,{onClick:ze,disabled:a,variant:"outline",className:"w-full",children:[a?i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Approve ",$==null?void 0:$.symbol]}),i.jsxs(we,{onClick:dt,disabled:a||!f||!m&&!_||!P||V||$&&parseFloat(P)>parseFloat(K)||m&&m.rewardPerSlotCalculated,className:"w-full",children:[a?i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}):null,m?"Add More Rewards":"Deposit Rewards"]})]})}),c==="claim"&&T&&i.jsx(ut,{className:"w-full",children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"Claim Rewards"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Claim participant rewards or creator rewards"}),!m&&N.length===0?i.jsxs(Ja,{children:[i.jsx(lt,{className:"h-4 w-4"}),i.jsx(Xa,{children:"No rewards found for this pool"})]}):i.jsxs(i.Fragment,{children:[m&&ne&&i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ql,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Pool Participant Rewards"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Rewards for your non-winning slots in this pool"}),L==="pending"?i.jsx("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-800",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(lt,{className:"h-4 w-4 text-blue-600"}),i.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"You have purchased slots in this pool. Claim to calculate and receive your rewards."})]})}):parseFloat(L)>0?i.jsx("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-800",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Claimable:"}),i.jsx("span",{className:"text-xs sm:text-sm font-semibold text-green-600 text-right break-all",children:L})]})}):i.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No participant rewards available"})]}),N.length>0&&J&&i.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Creator Rewards"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Rewards from global creator pool based on pool performance"}),i.jsxs("div",{className:"border border-purple-200 dark:border-purple-700 bg-purple-50/50 dark:bg-purple-900/10 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(lt,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),i.jsx("h4",{className:"text-sm font-semibold text-purple-900 dark:text-purple-100",children:"Reward Tiers Based on Pool Fill Rate"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded border border-purple-100 dark:border-purple-800",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),i.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"50-74% Pool Filled"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-xs font-bold text-orange-600 dark:text-orange-400",children:"50%"}),i.jsx("span",{className:"text-xs text-gray-500",children:"of reward"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded border border-purple-100 dark:border-purple-800",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),i.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"75-94% Pool Filled"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400",children:"75%"}),i.jsx("span",{className:"text-xs text-gray-500",children:"of reward"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded border border-purple-100 dark:border-purple-800",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),i.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"95%+ Pool Filled"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-xs font-bold text-green-600 dark:text-green-400",children:"100%"}),i.jsx("span",{className:"text-xs text-gray-500",children:"of reward"})]})]})]}),i.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-300 mt-2 italic",children:"Higher pool participation = Higher creator rewards"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select Creator Reward Token"}),N.length>0?i.jsxs("select",{id:"creatorRewardToken",value:R,onChange:ge=>I(ge.target.value),disabled:a,className:"w-full px-3 py-2 text-xs sm:text-sm border border-input bg-background rounded-md focus:outline-none focus:ring-0",children:[i.jsx("option",{value:"",children:"-- Select a reward token --"}),N.map(ge=>{const be=E[ge];return i.jsxs("option",{value:ge,children:[(be==null?void 0:be.symbol)||"Unknown"," - ",(be==null?void 0:be.rewardAmount)||"0"," per creator"]},ge)})]}):i.jsx("div",{className:"p-3 bg-muted rounded-md",children:i.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No creator reward tokens available yet"})}),R&&E[R]&&i.jsx("div",{className:"p-3 bg-muted/50 rounded-lg border mt-2",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Token:"})," ",E[R].symbol]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Per Creator:"})," ",E[R].rewardAmount]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-medium",children:"Total Deposited:"})," ",E[R].totalDeposited," ",E[R].symbol]})]})})]}),R&&bn(R)&&i.jsxs("div",{className:"space-y-2 mt-2",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[J?i.jsx(hn,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}):i.jsx(Kt,{className:"h-4 w-4 text-red-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-xs break-words",children:J?"You are the creator":"You are not the creator"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[q?i.jsx(Kt,{className:"h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0"}):i.jsx(hn,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-xs break-words",children:q?"Already claimed":"Available to claim"})]}),parseFloat(ee)>0&&i.jsx("div",{className:"pt-2 border-t border-purple-200 dark:border-purple-800",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Claimable:"}),i.jsx("span",{className:"text-xs sm:text-sm font-semibold text-green-600 text-right break-all",children:ee})]})})]})]})]}),i.jsxs(we,{onClick:oe,disabled:a||L!=="pending"&&parseFloat(L)===0&&parseFloat(ee)===0,className:"w-full text-sm",children:[a?i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}):null,(()=>{const ge=L==="pending"||parseFloat(L)>0,be=parseFloat(ee)>0;return ge&&be?"Claim Rewards":ge?"Claim Participant Reward":be?"Claim Creator Reward":"Claim Rewards"})()]})]})}),c==="withdraw"&&m&&ie&&i.jsx(ut,{className:"w-full",children:i.jsxs(It,{className:"space-y-4 p-4",children:[i.jsx("div",{className:"text-base font-medium flex items-center gap-2 mb-1",children:"Withdraw Deposited Rewards"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Withdraw remaining rewards after all eligible slots have claimed"}),i.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-4",children:[i.jsx("div",{className:"flex flex-col gap-1 mb-2",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap",children:"Total Deposited"}),i.jsxs("span",{className:"text-xs sm:text-sm text-right break-all",children:[m.totalDeposited," ",m.token===$e?"ETH":"Tokens"]})]})}),i.jsx("div",{className:"flex flex-col gap-1 mb-2",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap",children:"Total Claimed"}),i.jsxs("span",{className:"text-xs sm:text-sm text-right break-all",children:[(parseFloat(m.totalDeposited)-parseFloat(le)).toFixed(6)," ",m.token===$e?"ETH":"Tokens"]})]})}),i.jsx("div",{className:"flex flex-col gap-1",children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap",children:"Remaining to Withdraw"}),i.jsxs("span",{className:"text-xs sm:text-sm font-semibold text-right break-all",children:[le," ",m.token===$e?"ETH":"Tokens"]})]})})]}),i.jsxs(Ja,{className:"w-full",children:[i.jsx(lt,{className:"h-4 w-4"}),i.jsx(Xa,{className:"text-xs sm:text-sm",children:"You can only withdraw rewards after all eligible slots have claimed or if the pool is in a terminal state (Deleted/Unengaged)."})]}),i.jsxs(we,{onClick:ue,disabled:a||parseFloat(le)===0,className:"w-full text-sm",children:[a?i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Withdraw Remaining Rewards"]})]})})]})},hpe=({className:t="",showStats:e=!0,...n})=>{const{isMobile:r,isTablet:s,isDesktop:o}=Ln(),a=[{id:"royalty",title:"Royalty & Reveal",description:"Reveal your collection and manage royalties",component:Xhe,priority:1},{id:"flywheel",title:"Flywheel Rewards",description:"Deposit and claim rewards from the RewardsFlywheel contract",component:EB,priority:2},{id:"vesting",title:"Supply, Creator Allocation & Vesting Management",description:"Configure vesting schedules for creator token allocations to prevent rug pulls",component:SB,priority:3},{id:"kol",title:"KOL Approval Management",description:"Approve Key Opinion Leaders (KOLs) for collections with specific pool limits and slot fees",component:CB,priority:4},{id:"tokenCreator",title:"Create New Token ID & Set Token URI",description:"Add new token IDs to existing ERC1155 collections and set metadata URIs",component:lpe,priority:5},{id:"revenue",title:"Creator Mint & Revenue Withdrawal",description:"Mint tokens to winners and withdraw revenue from your raffles",component:cpe,priority:6}],c=r?1:2;return i.jsxs("div",{className:je("w-full space-y-6",t),...n,children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:je("font-semibold text-foreground",r?"text-lg":"text-xl"),children:"Creator Dashboard"}),i.jsx("p",{className:je("text-muted-foreground",r?"text-sm":"text-base"),children:"Manage your collections, royalties, and revenue"})]}),i.jsx("div",{className:je("grid gap-4 w-full",c===1&&"grid-cols-1",c===2&&"grid-cols-1 md:grid-cols-2",r&&"gap-3"),children:a.map(u=>i.jsx(ape,{title:u.title,description:u.description,component:u.component,className:je(r&&"w-full",!r&&"h-fit"),dialogContentClassName:u.id==="minter"?"max-w-4xl xl:max-w-4xl":void 0},u.id))}),r&&i.jsx("div",{className:"mt-6 p-3 bg-muted/50 rounded-lg border border-border/50",children:i.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Tap any card above to open it in a modal. All dashboard components are accessible via modal dialogs."})})]})},ppe=["Pending","Active","Ended","Drawing","Completed","Deleted","All Prizes Claimed","Unengaged"],mpe=({raffle:t,onRaffleClick:e,formatRevenueAmount:n,getCurrencySymbol:r})=>{const{winnerCount:s}=jv(t.address,t.stateNum),o=()=>{const l=(u=>{const f=oB(u,s);return f||ppe[u]||"Unknown"})(t.stateNum),c={Pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",Active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",Ended:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",Drawing:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",Completed:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",Deleted:"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300","Activation Failed":"bg-red-200 text-red-900 dark:bg-red-900/40 dark:text-red-300","Prizes Claimed":"bg-blue-200 text-blue-900 dark:bg-blue-900/40 dark:text-blue-300","Prize Claimed":"bg-blue-200 text-blue-900 dark:bg-blue-900/40 dark:text-blue-300",Unengaged:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",Unknown:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c[l]||c.Unknown}`,children:l})};return i.jsxs("div",{className:"bg-card/80 backdrop-blur-sm border border-border/50 rounded-xl p-4 shadow-xl transition-all duration-300 min-h-[160px] flex flex-col",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("div",{className:"flex-1 min-w-0",children:i.jsx("h3",{className:"font-semibold text-sm mb-1 truncate cursor-pointer hover:text-[#614E41] transition-colors duration-200",onClick:()=>e(t.address),children:t.name})}),o()]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Slots Sold"}),i.jsxs("p",{className:"font-semibold",children:[t.ticketsSold||0,"/",t.maxTickets]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Revenue"}),i.jsx("p",{className:"font-semibold text-green-600",children:n(t.revenue||0)})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-muted-foreground",children:"Created"}),i.jsx("p",{className:"font-semibold",children:t.createdAt?new Date(t.createdAt<1e12?t.createdAt*1e3:t.createdAt).toLocaleString():"Unknown"})]})]})]})},gpe=({activities:t,createdRaffles:e,purchasedTickets:n,creatorStats:r,onDeleteRaffle:s,onViewRevenue:o,onClaimPrize:a,onClaimRefund:l})=>{const c=mo(),{chainId:u}=an(),[f,p]=k.useState("activity"),{isMobile:m}=Ln(),{formatRevenueAmount:g,getCurrencySymbol:w}=er();k.useEffect(()=>(wF(),()=>kF()),[]);const[y,T]=k.useState({royalty:!1,minter:!1,tokenCreator:!1,revenue:!1});k.useEffect(()=>{if(m&&Object.values(y).some(Boolean))return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[y,m]),k.useEffect(()=>()=>{m&&(document.body.style.overflow="unset")},[m]);const j=U=>({ticket_purchase:{color:"text-blue-500",bg:"bg-blue-500/10",border:"border-l-blue-500",icon:og},raffle_created:{color:"text-green-500",bg:"bg-green-500/10",border:"border-l-green-500",icon:Yr},raffle_deleted:{color:"text-red-500",bg:"bg-red-500/10",border:"border-l-red-500",icon:Uh},prize_won:{color:"text-yellow-500",bg:"bg-yellow-500/10",border:"border-l-yellow-500",icon:tl},prize_claimed:{color:"text-yellow-500",bg:"bg-yellow-500/10",border:"border-l-yellow-500",icon:tl},refund_claimed:{color:"text-orange-500",bg:"bg-orange-500/10",border:"border-l-orange-500",icon:ul},revenue_withdrawn:{color:"text-emerald-500",bg:"bg-emerald-500/10",border:"border-l-emerald-500",icon:Ms},admin_withdrawn:{color:"text-purple-500",bg:"bg-purple-500/10",border:"border-l-purple-500",icon:Ms}})[U]||{color:"text-muted-foreground",bg:"bg-muted/50",border:"border-l-muted-foreground",icon:Xl},_=U=>{if(!U)return"Unknown";try{const K=new Date(U),G=new Date-K,X=Math.floor(G/6e4),V=Math.floor(G/36e5),A=Math.floor(G/864e5);return X<1?"Just now":X<60?`${X}m ago`:V<24?`${V}h ago`:A<7?`${A}d ago`:K.toLocaleDateString()}catch{return"Unknown"}},v=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Recent Activity"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Your latest transactions and events"})]}),i.jsxs(ll,{variant:"secondary",className:"font-medium",children:[t.length," ",t.length===1?"activity":"activities"]})]}),t.length===0?i.jsx(ut,{className:"border-dashed",children:i.jsxs(It,{className:"text-center py-12",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted/50 mb-4",children:i.jsx(yr,{className:"h-8 w-8 text-muted-foreground"})}),i.jsx("h4",{className:"font-medium text-foreground mb-1",children:"No activity yet"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-sm mx-auto",children:"Your transaction history will appear here once you start participating in raffles or creating events."})]})}):i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-[19px] top-2 bottom-2 w-px bg-border"}),i.jsx("div",{className:"space-y-3",children:t.slice(0,15).map((U,K)=>{const Y=j(U.type),G=Y.icon;return i.jsxs("div",{className:`relative pl-12 pr-4 py-3 bg-card/60 backdrop-blur-sm border border-border/40 rounded-xl hover:bg-card/80 hover:shadow-sm hover:border-border/60 transition-all duration-200 border-l-4 ${Y.border}`,children:[i.jsx("div",{className:`absolute left-2 top-1/2 -translate-y-1/2 w-8 h-8 rounded-full ${Y.bg} flex items-center justify-center ring-4 ring-background`,children:i.jsx(G,{className:`h-4 w-4 ${Y.color}`})}),i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm text-foreground leading-tight",children:U.title}),U.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:U.description})]}),i.jsx("div",{className:"flex-shrink-0 text-right",children:i.jsx("p",{className:"text-xs text-muted-foreground",title:U.timestamp,children:_(U.timestamp)})})]})]},K)})}),t.length>15&&i.jsx("div",{className:"text-center pt-4",children:i.jsxs("p",{className:"text-sm text-muted-foreground",children:["+ ",t.length-15," more activities"]})})]})]}),P=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"My Raffles"}),i.jsxs(ll,{variant:"outline",children:[e.length," raffles"]})]}),e.length===0?i.jsx(ut,{children:i.jsxs(It,{className:"text-center py-8",children:[i.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't created any raffles yet"}),i.jsx(we,{onClick:()=>c("/create-raffle"),variant:"primary",size:"md",children:"Create Your First Raffle"})]})}):i.jsx("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:e.map(U=>i.jsx(mpe,{raffle:U,onRaffleClick:K=>{const Y=u&&jt[u]?jt[u].name.toLowerCase().replace(/[^a-z0-9]+/g,"-"):u||"",G=Y?`/${Y}/raffle/${K}`:`/raffle/${K}`;c(G)},formatRevenueAmount:g,getCurrencySymbol:w},U.address))})]}),D=()=>{const{collections:U,loading:K}=NB(),[Y,G]=k.useState(null),X=async x=>{try{await navigator.clipboard.writeText(x),G(x),setTimeout(()=>G(null),2e3)}catch(C){console.error("Failed to copy:",C)}},V=(x,C)=>C==="ERC721"?"from-purple-500 to-pink-500":C==="ERC1155"?"from-indigo-500 to-purple-500":"from-primary to-primary/70",A=x=>x==="ERC721"?"bg-purple-500/10 text-purple-600 dark:text-purple-400 border-purple-500/20":x==="ERC1155"?"bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 border-indigo-500/20":"bg-muted text-muted-foreground";return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"My Collections"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"NFT collections you've deployed"})]}),i.jsxs(ll,{variant:"secondary",className:"font-medium",children:[U.length," ",U.length===1?"collection":"collections"]})]}),K?i.jsx(ut,{className:"border-dashed",children:i.jsxs(It,{className:"text-center py-12",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted/50 mb-4",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"})}),i.jsx("p",{className:"text-muted-foreground",children:"Loading your collections..."})]})}):U.length===0?i.jsx(ut,{className:"border-dashed",children:i.jsxs(It,{className:"text-center py-12",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted/50 mb-4",children:i.jsx(Ho,{className:"h-8 w-8 text-muted-foreground"})}),i.jsx("h4",{className:"font-medium text-foreground mb-1",children:"No collections yet"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-sm mx-auto mb-4",children:"Deploy your first NFT collection to start creating drop events and raffles."}),i.jsx(we,{onClick:()=>c("/deploy-collection"),variant:"primary",size:"md",children:"Deploy Collection"})]})}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:U.map((x,C)=>i.jsxs("div",{className:"group relative overflow-hidden rounded-xl border border-border/50 bg-card/80 backdrop-blur-sm hover:shadow-lg hover:border-border/80 transition-all duration-300",children:[i.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${V(x.address,x.type)}`}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[i.jsx("div",{className:`flex-shrink-0 w-14 h-14 rounded-lg bg-gradient-to-br ${V(x.address,x.type)} flex items-center justify-center shadow-sm`,children:i.jsx(Ho,{className:"h-6 w-6 text-white/90"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("h4",{className:"font-semibold text-foreground text-sm truncate",title:x.name,children:x.name}),i.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:i.jsx("span",{className:"text-xs font-medium text-muted-foreground bg-muted/50 px-1.5 py-0.5 rounded",children:x.symbol})})]}),i.jsx("span",{className:`flex-shrink-0 text-xs font-medium px-2 py-0.5 rounded-full border ${A(x.type)}`,children:x.type})]})})]}),i.jsxs("div",{className:"flex items-center gap-4 py-2 px-3 bg-muted/30 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Supply"}),i.jsx("p",{className:"text-sm font-semibold",children:x.totalSupply||"0"})]}),i.jsx("div",{className:"w-px h-8 bg-border"}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-0.5",children:"Address"}),i.jsxs("p",{className:"text-sm font-mono font-medium truncate",title:x.address,children:[x.address.slice(0,6),"...",x.address.slice(-4)]})]}),i.jsx(we,{size:"sm",variant:"ghost",onClick:()=>X(x.address),className:"h-7 w-7 p-0 flex-shrink-0 hover:bg-muted/80",title:Y===x.address?"Copied!":"Copy address",children:Y===x.address?i.jsx(Bs,{className:"h-3.5 w-3.5 text-green-500"}):i.jsx(Wg,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})})]})]})]},`${x.address}-${C}`))})]})},$=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`grid gap-4 ${m?"grid-cols-1":"md:grid-cols-2 lg:grid-cols-4"}`,children:[i.jsxs(ut,{children:[i.jsxs(Jr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Fs,{className:"text-sm font-medium",children:"Total Raffles"}),i.jsx(Yr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(It,{children:[i.jsx("div",{className:"text-2xl font-bold",children:Number(r.totalRaffles||0).toLocaleString()}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[Number(r.activeRaffles||0).toLocaleString()," currently active"]})]})]}),i.jsxs(ut,{children:[i.jsxs(Jr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Fs,{className:"text-sm font-medium",children:"Withdrawable Revenue"}),i.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(It,{children:[i.jsx("div",{className:"text-2xl font-bold",children:g(r.withdrawableRevenue||"0")}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Available to withdraw across all raffles"})]})]}),i.jsxs(ut,{children:[i.jsxs(Jr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Fs,{className:"text-sm font-medium",children:"Total Slots Sold"}),i.jsx(os,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(It,{children:[i.jsx("div",{className:"text-2xl font-bold",children:Number(r.totalParticipants||0).toLocaleString()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total slots purchased across all your raffles"})]})]}),i.jsxs(ut,{children:[i.jsxs(Jr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Fs,{className:"text-sm font-medium",children:"Success Rate"}),i.jsx(th,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(It,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[r.successRate,"%"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed raffles"})]})]})]}),i.jsx(hpe,{})]});return i.jsx(i.Fragment,{children:i.jsxs(ny,{value:f,onValueChange:p,className:"w-full","data-profile-tab":"true",children:[m?i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[i.jsx("button",{onClick:()=>p("activity"),className:`flex flex-col items-center gap-2 p-4 rounded-lg border transition-colors ${f==="activity"?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-muted text-foreground"}`,children:i.jsx("span",{className:"text-sm font-medium",children:"Activity"})}),i.jsx("button",{onClick:()=>p("created"),className:`flex flex-col items-center gap-2 p-4 rounded-lg border transition-colors ${f==="created"?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-muted text-foreground"}`,children:i.jsx("span",{className:"text-sm font-medium",children:"Created"})}),i.jsx("button",{onClick:()=>p("purchased"),className:`flex flex-col items-center gap-2 p-4 rounded-lg border transition-colors ${f==="purchased"?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-muted text-foreground"}`,children:i.jsx("span",{className:"text-sm font-medium",children:"My Collections"})}),i.jsx("button",{onClick:()=>p("dashboard"),className:`flex flex-col items-center gap-2 p-4 rounded-lg border transition-colors ${f==="dashboard"?"border-primary bg-primary text-primary-foreground":"border-border bg-background hover:bg-muted text-foreground"}`,children:i.jsx("span",{className:"text-sm font-medium",children:"Dashboard"})})]}):i.jsxs(Sv,{className:"grid w-full grid-cols-4",children:[i.jsx($o,{value:"activity",children:"Activity"}),i.jsx($o,{value:"created",children:"My Raffles"}),i.jsx($o,{value:"purchased",children:"My Collections"}),i.jsx($o,{value:"dashboard",children:"Dashboard"})]}),i.jsx(Bo,{value:"activity",className:m?"mt-4":"mt-6",children:i.jsx(v,{})}),i.jsx(Bo,{value:"created",className:m?"mt-4":"mt-6",children:i.jsx(P,{})}),i.jsx(Bo,{value:"purchased",className:m?"mt-4":"mt-6",children:i.jsx(D,{})}),i.jsx(Bo,{value:"dashboard",className:m?"mt-4":"mt-6",children:i.jsx($,{})})]})})};function WI(t){switch(t){case 0:return"pending";case 1:return"active";case 2:return"ended";case 3:return"drawing";case 4:return"completed";case 5:return"deleted";case 6:return"allPrizesClaimed";case 7:return"unengaged";default:return"unknown"}}const YC=()=>{const{connected:t,address:e,provider:n,chainId:r}=an(),{contracts:s,getContractInstance:o,executeTransaction:a,executeCall:l}=xn(),c=k.useMemo(()=>t,[t]),u=k.useMemo(()=>e,[e]),f=k.useMemo(()=>s,[s]),[p,m]=k.useState(!0),[g,w]=k.useState([]),[y,T]=k.useState([]),[j,_]=k.useState([]),[v,P]=k.useState([]),[D,$]=k.useState({totalTicketsPurchased:0,totalRafflesCreated:0,totalPrizesWon:0,totalClaimableRefunds:0,withdrawableRevenue:"0"}),[U,K]=k.useState(!1),[Y,G]=k.useState(null),X=k.useCallback(q=>{var H;if(q!=null&&q.reason)return q.reason;if((H=q==null?void 0:q.data)!=null&&H.message)return q.data.message;if(q!=null&&q.message){const J=q.message.match(/revert (.+)/);return J?J[1]:q.message}return"Transaction failed"},[]),V=k.useCallback(q=>{switch(q&&typeof q=="object"&&typeof q.toNumber=="function"?q.toNumber():Number(q)){case 0:return"pending";case 1:return"active";case 2:return"ended";case 3:return"drawing";case 4:return"completed";case 5:return"deleted";case 6:return"allPrizesClaimed";case 7:return"unengaged";default:return"unknown"}},[]);k.useRef(new Map);const A=k.useCallback(q=>{try{const H=localStorage.getItem(q);if(!H)return null;const J=JSON.parse(H);return!J||!J.data||!J.ts||!J.ttl||Date.now()-J.ts>J.ttl?null:J.data}catch{return null}},[]),x=k.useCallback((q,H,J)=>{try{localStorage.setItem(q,JSON.stringify({data:H,ts:Date.now(),ttl:J}))}catch{}},[]),C=900*1e3,L="v2";k.useCallback(async()=>{if(!f.protocolManager)return 0;try{const q=await l(f.protocolManager.getPoolCount,"getPoolCount");return q.success?q.result.toNumber?q.result.toNumber():Number(q.result):0}catch(q){return console.error("Error fetching pool count:",q),0}},[f.protocolManager,l]);const z=k.useCallback(async(q={})=>{const{maxPools:H=1e3,pageSize:J=100,signal:Q=null}=q;if(!f.protocolManager)return[];const ne=`raffles:all:paginated:${L}:${r}`,se=A(ne);if(se)return se;try{const ie=[];let pe=0,le=!0;for(;le&&ie.length<H;){if(Q!=null&&Q.aborted)throw new Error("Fetch cancelled");const me=await l(f.protocolManager.getAllPools,"getAllPools",pe,J);if(!me.success){console.warn("Failed to fetch pools at cursor",pe);break}const[Ee,te,Ne]=me.result;if(ie.push(...Ee),pe=te.toNumber?te.toNumber():Number(te),le=Ne,Ee.length===0)break}return ie.length>0&&x(ne,ie,C),ie}catch(ie){return ie.message!=="Fetch cancelled"&&console.error("Error fetching paginated pools:",ie),[]}},[f.protocolManager,r,l,A,x]),R=k.useCallback(async()=>{const q=await z();return q&&q.length>0||!f.protocolManager?q:(await new Promise(J=>setTimeout(J,1200)),await z())},[z,f.protocolManager]),I=k.useCallback(async(q,H={})=>{if(!f.protocolManager||!q)return[];const{maxPools:J=500,pageSize:Q=100}=H,ne=`raffles:byCreator:paginated:${L}:${r}:${q.toLowerCase()}`,se=A(ne);if(se)return se;try{const ie=[];let pe=0,le=!0;for(;le&&ie.length<J;){const me=await l(f.protocolManager.getPoolsByCreator,"getPoolsByCreator",q,pe,Q);if(!me.success){console.warn("Failed to fetch creator pools at cursor",pe);break}const[Ee,te,Ne]=me.result;if(ie.push(...Ee),pe=te.toNumber?te.toNumber():Number(te),le=Ne,Ee.length===0)break}return ie.length>0&&x(ne,ie,C),ie}catch(ie){return console.error("Error fetching creator pools:",ie),[]}},[f.protocolManager,r,l,A,x]),N=k.useCallback(async q=>{const H=await I(q);return H&&H.length>0||!f.protocolManager?H:(await new Promise(Q=>setTimeout(Q,1200)),await I(q))},[I,f.protocolManager]),F=k.useCallback(async()=>{if(!c||!u||!n){console.log("Missing requirements for fetchCreatedRaffles:",{stableConnected:c,stableAddress:!!u,provider:!!n});return}try{const q=[],H=[];let J=ce.from(0);const Q=await N(u);console.log("Profile: Found",Q.length,"created raffles for",u);for(const ne of Q)try{const se=o(ne,"pool");if(!se)continue;const[ie,pe,le,me,Ee,te,Ne,Pe,et,Le]=await Promise.all([l(se.name,"name"),l(se.slotFee,"slotFee"),l(se.slotLimit,"slotLimit"),l(se.startTime,"startTime"),l(se.duration,"duration"),l(se.state,"state"),l(se.winnersCount,"winnersCount"),l(se.usesCustomFee,"usesCustomFee"),l(se.totalCreatorRevenue,"totalCreatorRevenue"),f.protocolManager?l(f.protocolManager.poolCreationTimestamps,"poolCreationTimestamps",ne):Promise.resolve({success:!1})]),Se=ie.success?ie.result:`Raffle ${ne.slice(0,8)}...`,Te=pe.success?pe.result:ce.from(0),ze=le.success?le.result:ce.from(0),dt=me.success?me.result:ce.from(0),oe=Ee.success?Ee.result:ce.from(0),ue=te.success?te.result:0,ge=Ne.success?Ne.result:ce.from(0),be=Pe.success?!!Pe.result:!1,ve=et.success?et.result:ce.from(0),Ke=await t3(se),Me=ce.from(Ke),He=new Date(dt.add(oe).toNumber()*1e3);let ct=ce.from(0);J=J.add?J.add(ve):ce.from(J).add(ve),be?ct=ve:ct=ce.from(0);const Je=Le&&Le.success&&Le.result?Le.result.toNumber?Le.result.toNumber():Number(Le.result):dt.toNumber?dt.toNumber():Math.floor(Date.now()/1e3);q.push({address:ne,chainId:r,name:Se,slotFee:Zt(Te),maxTickets:ze.toString(),ticketsSold:Me.toString(),endTime:He,createdAt:Je*1e3,state:V(ue),stateNum:ue,revenue:Zt(ct),usesCustomFee:be}),H.push({id:`getter-created-${ne}`,type:"raffle_created",raffleAddress:ne,raffleName:Se,timestamp:Je*1e3})}catch(se){console.error(`Error processing created raffle ${ne}:`,se)}T(q),$(ne=>({...ne,withdrawableRevenue:Zt(J)})),H.length>0&&w(ne=>{const se=new Set(ne.map(pe=>pe.id)),ie=[...ne];for(const pe of H)se.has(pe.id)||ie.push(pe);return ie.sort((pe,le)=>(le.timestamp||0)-(pe.timestamp||0)),ie}),$(ne=>({...ne,totalRafflesCreated:q.length}))}catch(q){const H=(q.message||q.toString()||"").toLowerCase(),J=q.data?(q.data.message||q.data.toString()||"").toLowerCase():"",Q=`${H} ${J}`;if(Q.includes("block range")||Q.includes("too large")||Q.includes("exceed")||Q.includes("limit")||Q.includes("range too large")||Q.includes("maximum")||Q.includes("query returned more than")||Q.includes("block range limit")||Q.includes("too many blocks")||Q.includes("range exceeded")||H.includes("10000")||H.includes("5000")||H.includes("50000")){console.warn("Mobile: Block range error in fetchCreatedRaffles (enhanced detection), suppressing toast:",H);return}m0(q,{context:{operation:"fetchCreatedRaffles",isReadOnly:!0},fallbackMessage:"Failed to load created raffles"})}},[c,u,n,f.poolDeployer,l,o,V]),E=k.useCallback(async()=>{if(!c||!u||!n){console.log("Missing requirements for fetchPurchasedTickets:",{stableConnected:c,stableAddress:!!u,provider:!!n});return}try{const q=[],H=[],J=[];if(f.protocolManager){const Q=await R();console.log("Profile: Checking",Q.length,"pools for purchased slots via getSlotsPurchased");for(const ne of Q)try{const se=o(ne,"pool");if(!se)continue;const[ie,pe,le,me,Ee,te]=await Promise.all([l(se.getSlotsPurchased,"getSlotsPurchased",u),l(se.name,"name"),l(se.slotFee,"slotFee"),l(se.state,"state"),l(se.startTime,"startTime"),l(se.duration,"duration")]),Ne=ie.success?ie.result:ce.from(0),Pe=Ne.toNumber?Ne.toNumber():Number(Ne);if(Pe<=0)continue;const et=pe.success?pe.result:`Pool ${ne.slice(0,8)}...`,Le=le.success?le.result:ce.from(0),Se=Le.mul?Le.mul(Ne):ce.from(0),Te=me.success?me.result:0,ze=Ee.success?Ee.result:ce.from(0),dt=te.success?te.result:ce.from(0),oe=new Date(ze.add(dt).toNumber()*1e3),ue=ze.toNumber?ze.toNumber():Math.floor(Date.now()/1e3),ge={id:ne,address:ne,poolName:et,name:et,slotCount:Pe,slotFee:Zt(Le),totalSpent:Zt(Se),state:WI(Te),endTime:oe,purchaseTime:ue,canClaimPrize:!1,canClaimRefund:!1,slots:Array.from({length:Pe},(be,ve)=>ve.toString())};H.push(ge),J.push({id:`getter-slot-${ne}-${ue}`,type:"ticket_purchase",poolAddress:ne,poolName:et,raffleName:et,quantity:Pe,ticketCount:Pe,amount:Zt(Se),timestamp:ue*1e3,raffleAddress:ne})}catch(se){console.error(`Error processing getSlotsPurchased for pool ${ne}:`,se)}}else console.log("protocolManager contract not available");console.log("Setting purchased slots:",H.length,"pools with slots using getters"),P(H),_(H),J.length>0&&w(Q=>{const ne=new Set(Q.map(ie=>ie.id)),se=[...Q];for(const ie of J)ne.has(ie.id)||se.push(ie);return se.sort((ie,pe)=>(pe.timestamp||0)-(ie.timestamp||0)),se})}catch(q){m0(q,{context:{operation:"fetchPurchasedSlots",isReadOnly:!0},fallbackMessage:"Failed to load purchased slots"})}},[c,u,n,f.protocolManager,l,o,WI,R]),M=k.useCallback(async()=>{if(!(!c||!u||!n||!f.protocolManager))try{const q=await R();let H=0,J=0,Q=ce.from(0);for(const ne of q)try{const se=o(ne,"pool");if(!se)continue;const[ie,pe,le]=await Promise.all([l(se.getSlotsPurchased,"getSlotsPurchased",u),l(se.winsPerAddress,"winsPerAddress",u),l(se.getRefundableAmount,"getRefundableAmount",u)]),me=ie.success?ie.result:ce.from(0),Ee=pe.success?pe.result:ce.from(0),te=le.success?le.result:ce.from(0);H+=me.toNumber?me.toNumber():Number(me),J+=Ee.toNumber?Ee.toNumber():Number(Ee),Q=Q.add?Q.add(te):ce.from(Q).add(te)}catch(se){console.warn("Skipping pool for totals due to error:",ne,(se==null?void 0:se.message)||se)}$(ne=>({...ne,totalSlotsPurchased:H,totalPrizesWon:J,totalClaimableRefunds:Q}))}catch(q){m0(q,{context:{operation:"fetchDirectTotals",isReadOnly:!0},fallbackMessage:"Failed to compute profile totals"})}},[c,u,n,f.protocolManager,R,o,l]);k.useEffect(()=>{c&&u&&f.protocolManager?(w([]),T([]),_([]),$(H=>({...H,totalTicketsPurchased:0,totalRafflesCreated:0,totalPrizesWon:0,totalClaimableRefunds:0,withdrawableRevenue:"0"})),(async()=>{m(!0);try{await Promise.all([F(),E(),M()])}catch(H){console.error("Error loading profile data:",H)}finally{m(!1)}})()):(!c||!u)&&(w([]),T([]),_([]),m(!1),K(!1),G(null),$({totalTicketsPurchased:0,totalRafflesCreated:0,totalPrizesWon:0,totalClaimableRefunds:0,withdrawableRevenue:"0"}))},[c,u,f.protocolManager,F,E,M]);const ee=k.useCallback(async q=>{if(!q||!c){re.error("Please connect your wallet");return}try{const H=o(q,"pool");if(!H){re.error("Invalid raffle contract");return}await a(H,"withdrawRevenue",[]),re.success("Revenue withdrawn successfully!"),F(),K(!1),G(null)}catch(H){console.error("Error withdrawing revenue:",H),re.error(X(H))}},[c,o,a,F,X]),O=k.useCallback(async q=>{if(!q||!c){re.error("Please connect your wallet");return}try{const H=o(q,"pool");if(!H){re.error("Invalid raffle contract");return}await a(H,"claimRefund",[]),re.success("Refund claimed successfully!"),E(),M()}catch(H){console.error("Error claiming refund:",H),re.error(X(H))}},[c,o,a,E,M,X]);return{userActivity:g,createdRaffles:y,purchasedTickets:j,purchasedSlots:v,activityStats:D,loading:p,showRevenueModal:U,setShowRevenueModal:K,selectedRaffle:Y,setSelectedRaffle:G,fetchCreatedRaffles:F,fetchPurchasedTickets:E,withdrawRevenue:ee,claimRefund:O,extractRevertReason:X,mapRaffleState:V,creatorStats:{totalRaffles:y.length,activeRaffles:y.filter(q=>q.state==="active").length,withdrawableRevenue:D.withdrawableRevenue||"0.0000",totalParticipants:y.reduce((q,H)=>q+parseInt(H.ticketsSold||0),0),uniqueParticipants:y.reduce((q,H)=>q+parseInt(H.ticketsSold||0),0),successRate:y.length>0?Math.round(y.filter(q=>q.state==="completed"||q.state==="allPrizesClaimed").length/y.length*100):0}}},_B=()=>{const{connected:t,address:e,provider:n}=an(),{getContractInstance:r,executeTransaction:s}=xn(),o=mo(),[a,l]=k.useState("activity"),[c,u]=k.useState(null),{getCurrencySymbol:f,formatRevenueAmount:p}=er();k.useRef(0);const{userActivity:m,createdRaffles:g,activityStats:w,loading:y,claimRefund:T}=YC(),{collections:j,loading:_}=NB(),v=(R,I={})=>{const{stateNum:N,winnerCount:F}=I,E=["Pending","Active","Ended","Drawing","Completed","Deleted","AllPrizesClaimed","Unengaged"];let M="Unknown";if(Number.isFinite(N))M=N===6&&typeof F=="number"?F===1?"Prize Claimed":"Prizes Claimed":E[N]||"Unknown";else if(typeof R=="string"){const O=R.toLowerCase().replace(/[^a-z]/g,"");M={pending:"Pending",active:"Active",ended:"Ended",drawing:"Drawing",completed:"Completed",deleted:"Deleted",allprizesclaimed:"AllPrizesClaimed",all_prizes_claimed:"AllPrizesClaimed",unengaged:"Unengaged",unknown:"Unknown"}[O]||R.charAt(0).toUpperCase()+R.slice(1)}const ee={Pending:"bg-yellow-100 text-yellow-800",Active:"bg-green-100 text-green-800",Ended:"bg-red-100 text-red-800",Drawing:"bg-purple-100 text-purple-800",Completed:"bg-blue-100 text-blue-800",Deleted:"bg-gray-200 text-gray-800",AllPrizesClaimed:"bg-blue-200 text-blue-900","Prize Claimed":"bg-blue-200 text-blue-900",Unengaged:"bg-gray-100 text-gray-800",Unknown:"bg-gray-100 text-gray-800"};return i.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs font-medium ${ee[M]||ee.Unknown}`,children:M})},[P,D]=k.useState({royalty:{loading:!1,collectionData:{address:"",type:null,royaltyPercentage:"",royaltyRecipient:""},collectionInfo:null,loadingInfo:!1,revealing:!1,updating:!1,error:"",success:""},flywheel:{loading:!1},vesting:{loading:!1,collectionData:{address:"",type:null},collectionInfo:null,loadingInfo:!1,updating:!1,error:"",success:""},minter:{loading:!1,collectionAddress:"",minterAddress:"",isApproved:!1,isLocked:!1,currentMinter:"",collectionName:"",collectionSymbol:"",collectionType:null,fetchedCollection:"",error:"",success:""},kol:{loading:!1,collectionAddress:"",kolAddress:"",poolLimit:"",enforcedSlotFee:"",enforcedWinnerCount:"",error:"",success:"",collectionName:"",collectionSymbol:"",collectionType:null,kolDetails:null,kolDetailsLoading:!1},tokenCreator:{loading:!1,collectionData:{address:"",type:null},collectionInfo:null,loadingInfo:!1,tokenCreationData:{tokenId:"",maxSupply:""},uriData:{tokenId:"",tokenURI:""}},revenue:{loading:!1,raffleData:{address:"",isCreator:!1,revenueAmount:"0",raffleState:"unknown"},createdRaffles:[],mintData:{collectionAddress:"",collectionType:"erc721",recipient:"",quantity:"",tokenId:""},mintLoading:!1,collectionInfo:null,loadingCollectionInfo:!1}});if(!t)return i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Connect Your Wallet"}),i.jsx("p",{className:"text-muted-foreground",children:"Please connect your wallet to view your profile and activity."})]})});const $=()=>{const R=E=>{switch(E){case"ticket_purchase":return i.jsx(og,{className:"h-4 w-4 text-blue-500"});case"raffle_created":return i.jsx(Yr,{className:"h-4 w-4 text-green-500"});case"raffle_deleted":return i.jsx(Xl,{className:"h-4 w-4 text-red-500"});case"prize_won":return i.jsx(tl,{className:"h-4 w-4 text-yellow-500"});case"prize_claimed":return i.jsx(tl,{className:"h-4 w-4 text-yellow-500"});case"refund_claimed":return i.jsx(ul,{className:"h-4 w-4 text-orange-500"});case"revenue_withdrawn":return i.jsx(Ms,{className:"h-4 w-4 text-green-500"});case"admin_withdrawn":return i.jsx(Ms,{className:"h-4 w-4 text-purple-500"});default:return i.jsx(Xl,{className:"h-4 w-4 text-gray-500"})}},I=E=>{var O;const M=E.raffleName||E.name||`Raffle ${(O=E.raffleAddress)==null?void 0:O.slice(0,8)}...`,ee=E.quantity||E.ticketCount||1;switch(E.type){case"ticket_purchase":return`Purchased ${ee} ${M} slot${ee>1?"s":""}`;case"raffle_created":return`Created raffle "${M}"`;case"raffle_deleted":return`Deleted raffle "${M}"`;case"prize_won":return`Won prize in "${M}"`;case"prize_claimed":return`Claimed prize from "${M}"`;case"refund_claimed":return`Claimed refund from "${M}"`;case"revenue_withdrawn":return`Withdrew revenue from "${M}"`;case"admin_withdrawn":return`Admin withdrawal: ${E.amount} ${f()}`;default:return E.description||"Activity"}},N=E=>{var ee;const M=E.raffleName||E.name||`Raffle ${(ee=E.raffleAddress)==null?void 0:ee.slice(0,8)}...`;switch(E.type){case"ticket_purchase":return E.amount?`${E.amount} ${f()}`:"";case"prize_won":return`${M}  Congratulations!`;case"prize_claimed":const O=E.prizeType||"Prize",q=E.amount?` (${E.amount} ${E.prizeType==="Native Currency"?f():E.prizeType==="ERC20 Token"?"tokens":""})`:E.tokenId?` (Token ID: ${E.tokenId})`:"";return`${O}${q}`;case"refund_claimed":return E.amount?`${M}  ${E.amount} ${f()}`:M;case"revenue_withdrawn":return E.amount?`${E.amount} ${f()}`:"";default:return E.description||""}},F=E=>{try{if(!E&&E!==0)return"Unknown";let M;if(E instanceof Date)M=E.getTime();else if(typeof E=="number")M=E<1e12?E*1e3:E;else{const Q=new Date(E);M=isNaN(Q.getTime())?null:Q.getTime()}if(M==null)return"Unknown";const ee=Date.now();let O=Math.floor((ee-M)/1e3);if(O<0&&(O=0),O<60)return O<=1?"Just now":`${O}s ago`;const q=Math.floor(O/60);if(q<60)return`${q}m ago`;const H=Math.floor(q/60);return H<24?`${H}h ago`:`${Math.floor(H/24)}d ago`}catch{return"Unknown"}};return!m||m.length===0?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(yr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Activity Yet"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Activity will appear here once you participate in raffles."})]})}):i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Recent Activity"}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[m.length," activities"]})]}),m.slice(0,10).map((E,M)=>i.jsx("div",{className:"bg-card border border-border rounded-lg p-4 hover:bg-card/90 transition-colors",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:R(E.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-foreground text-sm",children:I(E)}),i.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:N(E)})]}),i.jsx("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:F(E.timestamp)})]}),i.jsx("div",{className:"flex gap-2 mt-3",children:E.type==="ticket_purchase"&&E.state==="ended"&&i.jsx(we,{onClick:()=>T(E.raffleAddress),variant:"primary",size:"sm",children:"Claim Refund"})})]})]})},E.id||M))]})},U=()=>c?i.jsx("div",{className:"fixed inset-0 bg-background z-50 overflow-y-auto",children:K(c)}):i.jsxs("div",{className:"p-4 space-y-4 mobile-component-container",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h3",{className:"text-lg font-semibold",children:"Creator Dashboard"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[i.jsx("div",{className:"text-2xl font-bold",children:g.length}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Raffles"})]}),i.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[i.jsx("div",{className:"text-2xl font-bold",children:g.filter(R=>R.state==="active").length}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Raffles"})]}),i.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[i.jsx("div",{className:"text-2xl font-bold",children:p(w.withdrawableRevenue||"0")}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Revenue"})]}),i.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[i.jsxs("div",{className:"text-2xl font-bold",children:[g.length>0?Math.round(g.filter(R=>R.state==="completed").length/g.length*100):0,"%"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Success Rate"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Creator Tools"}),i.jsx("button",{onClick:()=>u("royalty"),"data-dashboard-card":!0,className:"w-full bg-card border border-border rounded-lg p-4 text-left hover:bg-card/90 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mf,{className:"h-5 w-5 text-primary"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Royalty & Reveal"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Manage royalties and reveal collection"})]})]})}),i.jsx("button",{onClick:()=>u("flywheel"),"data-dashboard-card":!0,className:"w-full bg-card border border-border rounded-lg p-4 text-left hover:bg-card/90 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ca,{className:"h-5 w-5 text-primary"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Flywheel Rewards"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Deposit and claim rewards"})]})]})}),i.jsx("button",{onClick:()=>u("vesting"),"data-dashboard-card":!0,className:"w-full bg-card border border-border rounded-lg p-4 text-left hover:bg-card/90 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(rD,{className:"h-5 w-5 text-primary"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Supply, Creator Allocation & Vesting Management"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Configure vesting schedules for creator token allocations"})]})]})}),i.jsx("button",{onClick:()=>u("kol"),"data-dashboard-card":!0,className:"w-full bg-card border border-border rounded-lg p-4 text-left hover:bg-card/90 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(os,{className:"h-5 w-5 text-primary"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"KOL Approval Management"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Approve Key Opinion Leaders (KOLs) for collections with specific pool limits and slot fees"})]})]})}),i.jsx("button",{onClick:()=>u("tokenCreator"),"data-dashboard-card":!0,className:"w-full bg-card border border-border rounded-lg p-4 text-left hover:bg-card/90 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Yr,{className:"h-5 w-5 text-primary"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Create New Token ID & Set Token URI"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Add new token IDs to ERC1155 collections and set metadata URIs"})]})]})}),i.jsx("button",{onClick:()=>u("revenue"),"data-dashboard-card":!0,className:"w-full bg-card border border-border rounded-lg p-4 text-left hover:bg-card/90 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ms,{className:"h-5 w-5 text-primary"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Creator Mint & Revenue Withdrawal"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Withdraw revenue from completed raffles"})]})]})})]})]}),K=R=>{const I=()=>u(null);switch(R){case"royalty":return Y(I);case"flywheel":return X(I);case"vesting":return G(I);case"kol":return V(I);case"tokenCreator":return A(I);case"revenue":return x(I);default:return U()}},Y=R=>{var O;const I=P.royalty,N=q=>{D(H=>({...H,royalty:{...H.royalty,...q}}))},F=(q,H)=>{const J={...I.collectionData,[q]:H};if(N({collectionData:J}),q==="address"){const Q=(H||"").trim();console.log("royalty.handleChange.address",{addr:Q,connected:t,hasProvider:!!n,loadingInfo:I.loadingInfo}),bn(Q)&&!I.loadingInfo&&(console.log("royalty.handleChange.scheduleLoad",{delayMs:400}),setTimeout(()=>{console.log("royalty.handleChange.invokeLoad",{invokedAddr:Q,loadingInfo:I.loadingInfo}),I.loadingInfo||E(Q)},400))}},E=async q=>{const H=((q??I.collectionData.address)||"").trim();if(console.log("royalty.load.start",{addr:H,connected:t,hasProvider:!!n}),!bn(H)){console.warn("royalty.load.invalidAddress",{addr:H}),re.error("Please enter a valid collection address");return}if(!n){console.warn("royalty.load.noProvider"),re.error("Provider not available. Please connect your wallet");return}N({loadingInfo:!0});try{let J=null,Q=null;try{const te=r(H,"erc721Prize");if(te)try{const Ne=await te.supportsInterface("0x80ac58cd");console.log("royalty.detect.erc721.supports",{supportsERC721:Ne}),Ne&&(J=te,Q="erc721")}catch{try{await te.balanceOf(H),console.log("royalty.detect.erc721.balanceOf.success"),J=te,Q="erc721"}catch(Pe){console.log("royalty.detect.erc721.balanceOf.fail",{error:Pe==null?void 0:Pe.message})}}}catch(te){console.log("royalty.detect.erc721.error",{error:te==null?void 0:te.message})}if(!J)try{const te=r(H,"erc1155Prize");if(te)try{const Ne=await te.supportsInterface("0xd9b67a26");console.log("royalty.detect.erc1155.supports",{supportsERC1155:Ne}),Ne&&(J=te,Q="erc1155")}catch{try{await te.uri(0),console.log("royalty.detect.erc1155.uri.success"),J=te,Q="erc1155"}catch(Pe){console.log("royalty.detect.erc1155.uri.fail",{error:Pe==null?void 0:Pe.message})}}}catch(te){console.log("royalty.detect.erc1155.error",{error:te==null?void 0:te.message})}if(!J||!Q)throw new Error("Invalid collection address or unsupported contract type");console.log("royalty.detect.done",{detectedType:Q}),N({collectionData:{...I.collectionData,type:Q}});let ne="Unknown Collection",se="Unknown",ie="Unknown";try{typeof J.name=="function"&&(ne=await J.name())}catch{}try{typeof J.symbol=="function"&&(se=await J.symbol())}catch{}try{typeof J.owner=="function"&&(ie=await J.owner())}catch{}const pe=ie!=="Unknown"&&ie.toLowerCase()===e.toLowerCase(),le=await J.royaltyInfo(1,1e4),me=await J.royaltyPercentage(),Ee=await J.royaltyRecipient();N({collectionInfo:{address:H,name:ne,symbol:se,owner:ie,type:Q,isOwner:pe,currentRoyaltyPercentage:me.toString(),currentRoyaltyRecipient:Ee,royaltyAmount:le[1].toString()},collectionData:{...I.collectionData,type:Q,royaltyPercentage:(me.toNumber()/100).toString(),royaltyRecipient:Ee}}),console.log("royalty.load.info",{name:ne,symbol:se,owner:ie,isOwner:pe,royaltyPercentage:me.toString(),royaltyRecipient:Ee});try{const te=await J.isRevealed();N({isRevealed:!!te}),console.log("royalty.load.revealed",{revealed:!!te})}catch(te){console.log("royalty.load.revealed.fail",{error:te==null?void 0:te.message}),N({isRevealed:null})}re.success("Collection loaded successfully!"),console.log("royalty.load.success")}catch(J){console.error("royalty.load.error",J),gn(J),N({collectionInfo:null,isRevealed:null})}finally{N({loadingInfo:!1}),console.log("royalty.load.end")}},M=async()=>{if(!t||!I.collectionInfo){re.error("Please connect your wallet and load collection info first");return}if(!I.collectionInfo.isOwner){re.error("You are not the owner of this collection");return}const q=parseFloat(I.collectionData.royaltyPercentage);if(isNaN(q)||q<0){re.error("Please enter a valid royalty percentage (minimum 0%)");return}if(!I.collectionData.royaltyRecipient){re.error("Please enter a royalty recipient address");return}N({loading:!0});try{const H=I.collectionData.type==="erc721"?"erc721Prize":"erc1155Prize",J=r(I.collectionData.address,H);if(!J)throw new Error("Failed to create contract instance");const Q=Math.floor(q*100),ne=await s(J.setRoyalty,Q,I.collectionData.royaltyRecipient);if(ne.success)re.success(`Royalty updated successfully! Transaction: ${ne.hash}`),await E();else throw new Error(ne.error)}catch(H){console.error("Error updating royalty:",H),gn(H)}finally{N({loading:!1})}},ee=async()=>{if(!t||!I.collectionInfo){re.error("Please connect your wallet and load collection info first");return}N({revealing:!0});try{const q=I.collectionData.type==="erc721"?"erc721Prize":"erc1155Prize",H=r(I.collectionData.address,q);if(!H)throw new Error("Failed to create contract instance");const J=await s(H.reveal);if(J.success)re.success("Collection revealed successfully!"),await E();else throw new Error(J.error)}catch(q){gn(q)}finally{N({revealing:!1})}};return i.jsxs("div",{className:"p-4 space-y-4 max-w-full overflow-x-hidden dashboard-component",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(we,{onClick:R,variant:"tertiary",size:"md",children:" Back"}),i.jsx("h3",{className:"text-lg font-semibold",children:"Royalty & Reveal"})]}),i.jsxs(ut,{children:[i.jsxs(Jr,{children:[i.jsxs(Fs,{className:"flex items-center gap-2",children:[i.jsx(Mf,{className:"h-5 w-5"}),"Royalty & Reveal Management"]}),i.jsx(wm,{children:"Manage royalties and reveal collections for your NFT contracts"})]}),i.jsxs(It,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Xu,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Collection Lookup"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Collection Address"}),i.jsx(Ps,{value:I.collectionData.address,onChange:q=>F("address",q.target.value),placeholder:"0x...",className:"flex-1"})]})]}),I.collectionInfo&&i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Mf,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Collection Information"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"break-words",children:[i.jsx("span",{className:"font-medium",children:"Name:"})," ",I.collectionInfo.name]}),I.collectionInfo.symbol&&i.jsxs("div",{className:"break-words",children:[i.jsx("span",{className:"font-medium",children:"Symbol:"})," ",I.collectionInfo.symbol]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",(O=I.collectionInfo.type)==null?void 0:O.toUpperCase()]}),i.jsxs("div",{className:"break-all",children:[i.jsx("span",{className:"font-medium",children:"Owner:"}),i.jsx("span",{className:"ml-1 font-mono text-xs",children:I.collectionInfo.owner})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Current Royalty:"})," ",(parseFloat(I.collectionInfo.currentRoyaltyPercentage)/100).toFixed(2),"%"]}),i.jsxs("div",{className:"break-all",children:[i.jsx("span",{className:"font-medium",children:"Royalty Recipient:"}),i.jsx("span",{className:"ml-1 font-mono text-xs",children:I.collectionInfo.currentRoyaltyRecipient})]}),I.isRevealed!==null&&i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Revealed:"})," ",I.isRevealed?"Yes":"No"]})]}),I.collectionInfo.isOwner&&I.isRevealed===!1&&i.jsx(we,{onClick:ee,disabled:I.revealing||!t,variant:"primary",size:"md",className:"w-full",children:I.revealing?"Revealing...":"Reveal Collection"})]}),I.collectionInfo&&I.collectionInfo.isOwner&&i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Mf,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Update Royalty Settings"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"New Royalty Percentage (%)"}),i.jsx(Ti,{min:"0",step:"0.01",value:I.collectionData.royaltyPercentage,onChange:q=>F("royaltyPercentage",q.target.value),placeholder:"2.5"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"New Royalty Recipient"}),i.jsx(Ps,{value:I.collectionData.royaltyRecipient,onChange:q=>F("royaltyRecipient",q.target.value),placeholder:"0x..."})]})]}),i.jsxs(we,{onClick:M,disabled:I.loading||!t||!I.collectionInfo||!I.collectionInfo.isOwner,variant:"primary",size:"md",className:"w-full h-10 flex items-center justify-center gap-2 shadow-sm text-sm",children:[i.jsx(Mf,{className:"h-4 w-4"}),I.loading?"Updating...":"Update Royalty Settings"]})]})]})]})]})},G=R=>i.jsxs("div",{className:"p-4 space-y-4 max-w-full overflow-x-hidden dashboard-component",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(we,{onClick:R,variant:"tertiary",size:"md",children:" Back"}),i.jsx("h2",{className:"text-xl font-semibold",children:"Supply, Creator Allocation & Vesting Management"})]}),i.jsx(SB,{})]}),X=R=>i.jsxs("div",{className:"p-4 space-y-4 max-w-full overflow-x-hidden dashboard-component",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(we,{onClick:R,variant:"tertiary",size:"md",children:" Back"}),i.jsx("h3",{className:"text-lg font-semibold",children:"Flywheel Rewards"})]}),i.jsx("div",{className:"w-full",children:i.jsx(EB,{})})]}),V=R=>i.jsxs("div",{className:"p-4 space-y-4 max-w-full overflow-x-hidden dashboard-component",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(we,{onClick:R,variant:"tertiary",size:"md",children:" Back"}),i.jsx("h3",{className:"text-lg font-semibold",children:"KOL Approval Management"})]}),i.jsx("div",{className:"w-full",children:i.jsx(CB,{})})]}),A=R=>{const I=P.tokenCreator,N=O=>{D(q=>({...q,tokenCreator:{...q.tokenCreator,...O}}))},F=async O=>{try{const q=r(O,"erc1155Prize");if(q)try{if(await q.supportsInterface("0xd9b67a26"))return{type:"erc1155",contract:q}}catch{try{return await q.balanceOf(O,0),{type:"erc1155",contract:q}}catch{}}const H=r(O,"erc721Prize");if(H)try{if(await H.supportsInterface("0x80ac58cd"))return{type:"erc721",contract:H}}catch{try{return await H.balanceOf(O),{type:"erc721",contract:H}}catch{}}throw new Error("Contract is neither ERC721 nor ERC1155 compatible")}catch(q){throw new Error(`Failed to detect contract type: ${q.message}`)}},E=async()=>{if(!I.collectionData.address||!t){re.error("Please enter a collection address");return}N({loadingInfo:!0});try{const{type:O,contract:q}=await F(I.collectionData.address);if(O!=="erc1155"){re.error(" This component is only for ERC1155 collections. The provided address appears to be an ERC721 collection. Please use the appropriate component for ERC721 collections."),N({collectionInfo:{address:I.collectionData.address,isOwner:!1,owner:"N/A",type:"erc721",isBlocked:!0},loadingInfo:!1});return}const H=await q.owner(),J=H.toLowerCase()===e.toLowerCase();N({collectionInfo:{address:I.collectionData.address,isOwner:J,owner:H,type:"erc1155"},collectionData:{...I.collectionData,type:"erc1155"}}),J?re.success("ERC1155 collection loaded successfully"):re.error("You are not the owner of this collection")}catch(O){console.error("Error loading collection info:",O),re.error("Failed to load collection info. Please verify the address is a valid ERC1155 collection."),N({collectionInfo:null})}finally{N({loadingInfo:!1})}},M=async()=>{if(!t||!I.collectionInfo){re.error("Please connect your wallet and load collection info first");return}const O=parseInt(I.tokenCreationData.tokenId),q=parseInt(I.tokenCreationData.maxSupply);if(isNaN(O)||O<0){re.error("Please enter a valid token ID");return}if(isNaN(q)||q<=0){re.error("Please enter a valid max supply");return}N({loading:!0});try{const H=r(I.collectionData.address,"erc1155Prize"),J=await s(H.createNewToken,O,q);if(J.success)re.success(`Token ID ${O} created successfully with max supply of ${q}!`),N({tokenCreationData:{tokenId:"",maxSupply:""}});else throw new Error(J.error)}catch(H){console.error("Error creating new token:",H),re.error(`Failed to create new token: ${H.message}`)}finally{N({loading:!1})}},ee=async()=>{if(!t||!I.collectionInfo){re.error("Please connect your wallet and load collection info first");return}const O=parseInt(I.uriData.tokenId);if(isNaN(O)||O<0){re.error("Please enter a valid token ID");return}if(!I.uriData.tokenURI){re.error("Please enter a token URI");return}N({loading:!0});try{const q=r(I.collectionData.address,"erc1155Prize"),H=await s(q.setURI,O,I.uriData.tokenURI);if(H.success)re.success(`Token URI set successfully for token ID ${O}!`),N({uriData:{tokenId:"",tokenURI:""}});else throw new Error(H.error)}catch(q){console.error("Error setting token URI:",q),re.error(`Failed to set token URI: ${q.message}`)}finally{N({loading:!1})}};return i.jsxs("div",{className:"p-4 space-y-4 max-w-full overflow-x-hidden dashboard-component",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(we,{onClick:R,variant:"tertiary",size:"md",children:" Back"}),i.jsx("h3",{className:"text-lg font-semibold",children:"Create New Token ID & Set Token URI"})]}),i.jsxs(ut,{children:[i.jsxs(Jr,{children:[i.jsxs(Fs,{className:"flex items-center gap-2",children:[i.jsx(Yr,{className:"h-5 w-5"}),"Token Creator"]}),i.jsx(wm,{children:"Add new token IDs to ERC1155 collections and set metadata URIs"})]}),i.jsxs(It,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Xu,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Collection Lookup"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"ERC1155 Collection Address"}),i.jsx(Ps,{value:I.collectionData.address,onChange:O=>{N({collectionData:{...I.collectionData,address:O.target.value}});const q=O.target.value;q&&bn(q)&&t&&!I.loadingInfo&&setTimeout(()=>{I.loadingInfo||E()},400)},placeholder:"0x...",className:"flex-1"})]})]}),I.collectionInfo&&i.jsxs("div",{className:`space-y-4 p-4 border border-border rounded-lg ${I.collectionInfo.isBlocked?"bg-destructive/10 border-destructive/20":"bg-card"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Kt,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Collection Information"})]}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("p",{className:"break-all",children:[i.jsx("span",{className:"font-medium",children:"Address:"})," ",I.collectionInfo.address]}),i.jsxs("p",{className:"break-all",children:[i.jsx("span",{className:"font-medium",children:"Owner:"})," ",I.collectionInfo.owner]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"You are owner:"})," ",I.collectionInfo.isOwner?" Yes":" No"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",I.collectionInfo.type==="erc721"?" ERC721 Collection (Incompatible)":" ERC1155 Collection"]})]}),I.collectionInfo.isBlocked&&i.jsxs("div",{className:"mt-3 p-3 bg-destructive/10 border border-destructive/20 rounded-md flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),i.jsx("span",{className:"text-sm text-destructive",children:"This component only works with ERC1155 collections. The provided address is an ERC721 collection. Please use the appropriate component for ERC721 collections."})]}),!I.collectionInfo.isBlocked&&!I.collectionInfo.isOwner&&i.jsxs("div",{className:"mt-3 p-3 bg-destructive/10 border border-destructive/20 rounded-md flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),i.jsx("span",{className:"text-sm text-destructive",children:"You are not the owner of this collection and cannot create new tokens."})]})]}),I.collectionInfo&&I.collectionInfo.isOwner&&!I.collectionInfo.isBlocked&&i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Yr,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Create New Token ID"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Token ID"}),i.jsx(Ti,{min:"0",value:I.tokenCreationData.tokenId,onChange:O=>N({tokenCreationData:{...I.tokenCreationData,tokenId:O.target.value}}),placeholder:"1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Supply"}),i.jsx(Ti,{min:"1",value:I.tokenCreationData.maxSupply,onChange:O=>N({tokenCreationData:{...I.tokenCreationData,maxSupply:O.target.value}}),placeholder:"100"})]})]}),i.jsxs(we,{onClick:M,disabled:I.loading||!t||!I.collectionInfo.isOwner||I.collectionInfo.isBlocked||!I.tokenCreationData.tokenId||!I.tokenCreationData.maxSupply,variant:"primary",size:"md",className:"w-full h-10 flex items-center justify-center gap-2 shadow-sm text-sm",children:[i.jsx(Yr,{className:"h-4 w-4"}),I.loading?"Creating...":"Create New Token ID"]})]}),I.collectionInfo&&I.collectionInfo.isOwner&&!I.collectionInfo.isBlocked&&i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Xu,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Set Token URI"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Token ID"}),i.jsx(Ti,{min:"0",value:I.uriData.tokenId,onChange:O=>N({uriData:{...I.uriData,tokenId:O.target.value}}),placeholder:"1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Token URI"}),i.jsx(Ps,{value:I.uriData.tokenURI,onChange:O=>N({uriData:{...I.uriData,tokenURI:O.target.value}}),placeholder:"https://..."})]})]}),i.jsxs(we,{onClick:ee,disabled:I.loading||!t||!I.collectionInfo.isOwner||I.collectionInfo.isBlocked||!I.uriData.tokenId||!I.uriData.tokenURI,variant:"primary",size:"md",className:"w-full h-10 flex items-center justify-center gap-2 shadow-sm text-sm",children:[i.jsx(Xu,{className:"h-4 w-4"}),I.loading?"Setting...":"Set Token URI"]})]})]})]})]})},x=R=>{const I=P.revenue,N=J=>{D(Q=>({...Q,revenue:{...Q.revenue,...J}}))},F=async J=>{if(!J||!t){re.error("Please enter a raffle address and connect your wallet");return}N({loading:!0});try{const Q=r(J,"pool");if(!Q)throw new Error("Failed to create raffle contract instance");const[ne,se,ie]=await Promise.all([Q.creator(),Q.totalCreatorRevenue(),Q.state()]),pe=ne.toLowerCase()===e.toLowerCase(),le=["Pending","Active","Ended","Drawing","Completed","Deleted","AllPrizesClaimed","Unengaged"],me=ie&&typeof ie=="object"&&typeof ie.toNumber=="function"?ie.toNumber():Number(ie),Ee=Number.isFinite(me)&&me>=0&&me<le.length?le[me]:"Unknown";N({raffleData:{address:J,revenueAmount:Zt(se),isCreator:pe,raffleState:Ee,totalRevenue:se}})}catch(Q){console.error("Error loading raffle info:",Q),gn(Q),N({raffleData:{address:J,revenueAmount:"0",isCreator:!1,raffleState:"error"}})}finally{N({loading:!1})}},E=async()=>{if(!t||!I.raffleData.address){re.error("Please connect your wallet and load raffle info first");return}if(!I.raffleData.isCreator){re.error("You are not the creator of this raffle");return}if(parseFloat(I.raffleData.revenueAmount)<=0){re.info("No revenue available for withdrawal");return}if(!["Completed","AllPrizesClaimed","Ended"].includes(I.raffleData.raffleState)){re.info(`Revenue can only be withdrawn from completed raffles. Current state: ${I.raffleData.raffleState}`);return}N({loading:!0});try{const Q=r(I.raffleData.address,"pool");if(!Q)throw new Error("Failed to create raffle contract instance");const ne=await s(Q.withdrawCreatorRevenue);if(ne.success)re.success(`Revenue withdrawn successfully! Transaction: ${ne.hash}`),await F(I.raffleData.address);else throw new Error(ne.error)}catch(Q){console.error("Error withdrawing revenue:",Q),gn(Q)}finally{N({loading:!1})}},M=async J=>{if(!(!I.collectionInfo||I.collectionInfo.type!=="erc1155"||!I.collectionInfo.isOwner))try{const Q=r(I.collectionInfo.address,"erc1155Prize");if(!Q)throw new Error("Failed to create contract instance");let ne=!1,se="0",ie="0";try{await Q.maxSupply(J)}catch{console.log("Token ID does not exist:",J),N({collectionInfo:{...I.collectionInfo,vestingConfigured:!1,unlockedAmount:"0",availableAmount:"0"}});return}ne=await Q.vestingConfigured(J),ne&&(se=(await Q.getUnlockedCreatorAllocation(J)).toString(),ie=(await Q.getAvailableCreatorMint(J)).toString()),N({collectionInfo:{...I.collectionInfo,vestingConfigured:ne,unlockedAmount:se,availableAmount:ie}})}catch(Q){console.log("Vesting info not available for token ID:",J,Q.message),N({collectionInfo:{...I.collectionInfo,vestingConfigured:!1,unlockedAmount:"0",availableAmount:"0"}})}},ee=(J,Q)=>{if(N({mintData:{...I.mintData,[J]:Q}}),J==="collectionAddress"&&(window.collectionFetchTimeout&&clearTimeout(window.collectionFetchTimeout),window.collectionFetchTimeout=setTimeout(()=>{O(Q)},500)),J==="tokenId"&&I.collectionInfo&&I.collectionInfo.type==="erc1155"){const ne=parseInt(Q);!isNaN(ne)&&ne>=0&&M(ne)}},O=async J=>{if(!J||!t){N({collectionInfo:null});return}N({loadingCollectionInfo:!0});try{let Q=null,ne=null;try{const Ne=r(J,"erc721Prize");Ne&&await Ne.supportsInterface("0x80ac58cd")&&(Q=Ne,ne="erc721")}catch{}if(!Q&&ne!=="erc721")try{const Ne=r(J,"erc1155Prize");Ne&&await Ne.supportsInterface("0xd9b67a26")&&(Q=Ne,ne="erc1155")}catch{}if(!Q||!ne)throw new Error("Invalid collection address or unsupported contract type");N({mintData:{...I.mintData,collectionType:ne,collectionAddress:J}});let se="Unknown Collection",ie="Unknown",pe="Unknown";try{typeof Q.name=="function"&&(se=await Q.name())}catch{}try{typeof Q.symbol=="function"&&(ie=await Q.symbol())}catch{}try{typeof Q.owner=="function"&&(pe=await Q.owner())}catch{}const le=pe!=="Unknown"&&pe.toLowerCase()===e.toLowerCase();let me=!1,Ee="0",te="0";try{ne==="erc721"?(me=await Q.vestingConfigured(),me&&(Ee=(await Q.getUnlockedCreatorAllocation()).toString(),te=(await Q.getAvailableCreatorMint()).toString())):ne==="erc1155"&&(me=await Q.vestingConfigured(1),me&&(Ee=(await Q.getUnlockedCreatorAllocation(1)).toString(),te=(await Q.getAvailableCreatorMint(1)).toString()))}catch(Ne){console.log("Vesting info not available:",Ne.message)}N({collectionInfo:{address:J,name:se,symbol:ie,owner:pe,type:ne,isOwner:le,vestingConfigured:me,unlockedAmount:Ee,availableAmount:te}}),re.success(`Collection loaded: ${se} (${ne.toUpperCase()})`)}catch(Q){console.error("Error loading collection info:",Q),re.error("Failed to load collection information: "+Q.message),N({collectionInfo:null})}finally{N({loadingCollectionInfo:!1})}},q=async()=>{if(!t||!e){re.error("Please connect your wallet");return}if(!I.mintData.collectionAddress||!I.mintData.recipient||!I.mintData.quantity){re.error("Please fill in all required fields");return}if(!bn(I.mintData.recipient)){re.error("Please enter a valid recipient address");return}const J=parseInt(I.mintData.quantity);if(isNaN(J)||J<=0){re.error("Please enter a valid quantity");return}if(I.mintData.collectionType==="erc1155"){const Q=parseInt(I.mintData.tokenId);if(isNaN(Q)||Q<0){re.error("Please enter a valid token ID for ERC1155");return}}N({mintLoading:!0});try{const Q=I.mintData.collectionType==="erc721"?"erc721Prize":"erc1155Prize",ne=r(I.mintData.collectionAddress,Q);if(!ne)throw new Error("Failed to create contract instance");let se;if(I.mintData.collectionType==="erc721")se=await s(()=>ne.creatorMint(I.mintData.recipient,J));else{const ie=parseInt(I.mintData.tokenId);se=await s(()=>ne.creatorMint(I.mintData.recipient,ie,J))}if(se.success)re.success(`Successfully minted ${J} token(s)! Transaction: ${se.hash}`),N({mintData:{...I.mintData,recipient:"",quantity:"",tokenId:""}});else throw new Error(se.error)}catch(Q){console.error("Error minting tokens:",Q),gn(Q)}finally{N({mintLoading:!1})}},H=I.raffleData.isCreator&&parseFloat(I.raffleData.revenueAmount)>0&&["Completed","AllPrizesClaimed","Ended"].includes(I.raffleData.raffleState);return i.jsxs("div",{className:"p-4 space-y-4 max-w-full overflow-x-hidden dashboard-component",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("button",{onClick:R,className:"text-primary hover:text-primary/80",children:" Back"}),i.jsx("h3",{className:"text-lg font-semibold",children:"Creator Mint & Revenue Withdrawal"})]}),i.jsxs(ut,{children:[i.jsxs(Jr,{children:[i.jsxs(Fs,{className:"flex items-center gap-2",children:[i.jsx(Ms,{className:"h-5 w-5"}),"Creator Mint & Revenue Withdrawal"]}),i.jsx(wm,{children:"Withdraw revenue from completed raffles and mint creator tokens"})]}),i.jsxs(It,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Xu,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Raffle Lookup"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Raffle Address"}),i.jsx(Ps,{value:I.raffleData.address,onChange:J=>{N({raffleData:{...I.raffleData,address:J.target.value}});const Q=J.target.value;Q&&bn(Q)&&t&&!I.loading&&setTimeout(()=>{I.loading||F(Q)},400)},placeholder:"0x...",className:"flex-1"})]})]}),g.length>0&&i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(og,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Your Created Raffles"})]}),i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:g.slice(0,5).map(J=>i.jsxs("button",{onClick:()=>F(J.address),className:"w-full text-left bg-card border border-border rounded-lg p-3 hover:bg-card/90 transition-colors",children:[i.jsx("div",{className:"text-sm font-medium",children:J.name||`Raffle ${J.address.slice(0,8)}...`}),i.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:["State: ",v(J.state,{stateNum:J.stateNum})]})]},J.address))})]}),I.raffleData.address&&I.raffleData.raffleState!=="unknown"&&i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ms,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Raffle Information"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"break-all",children:[i.jsx("span",{className:"font-medium",children:"Address:"}),i.jsx("span",{className:"ml-1 font-mono text-xs",children:I.raffleData.address})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"State:"})," ",v(I.raffleData.raffleState,{stateNum:I.raffleData.stateNum,winnerCount:I.raffleData.winnerCount})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"You are creator:"})," ",I.raffleData.isCreator?"Yes":"No"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Available Revenue:"})," ",I.raffleData.revenueAmount," ",f()]})]}),I.raffleData.isCreator&&i.jsx("div",{className:"mt-4",children:H?i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:i.jsx("div",{className:"text-sm text-green-800",children:" Revenue withdrawal is available"})}):i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:i.jsx("div",{className:"text-sm text-yellow-800",children:parseFloat(I.raffleData.revenueAmount)<=0?"No revenue available for withdrawal":`Revenue withdrawal not available - raffle state: ${I.raffleData.raffleState}`})})})]}),I.raffleData.isCreator&&i.jsxs(we,{onClick:E,disabled:I.loading||!t||!H,variant:"primary",size:"md",className:"w-full h-10 flex items-center justify-center gap-2 shadow-sm text-sm",children:[i.jsx(Ms,{className:"h-4 w-4"}),I.loading?"Withdrawing...":`Withdraw ${I.raffleData.revenueAmount} ${f()}`]}),i.jsxs("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-card",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(tl,{className:"h-4 w-4"}),i.jsx("h3",{className:"text-sm font-medium",children:"Creator Mint"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Mint tokens directly to winners or any address"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Collection Type"}),i.jsxs(Cd,{value:I.mintData.collectionType,onValueChange:J=>ee("collectionType",J),children:[i.jsx(Ed,{children:i.jsx(Sd,{placeholder:"Select collection type"})}),i.jsxs(_d,{children:[i.jsx(Ds,{value:"erc721",children:"ERC721"}),i.jsx(Ds,{value:"erc1155",children:"ERC1155"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Collection Address"}),i.jsx(Ps,{value:I.mintData.collectionAddress,onChange:J=>ee("collectionAddress",J.target.value),placeholder:"0x..."})]}),I.collectionInfo&&i.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[I.collectionInfo.type==="erc721"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Name:"})," ",I.collectionInfo.name]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Symbol:"})," ",I.collectionInfo.symbol]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",I.collectionInfo.type.toUpperCase()]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Owner:"})," ",I.collectionInfo.isOwner?"You":"Other"]})]}),I.collectionInfo.vestingConfigured&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[i.jsx("div",{className:"text-sm font-medium mb-2 text-primary",children:"Vesting Information"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Unlocked Amount:"})," ",I.collectionInfo.unlockedAmount]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Available Amount:"})," ",I.collectionInfo.availableAmount]})]}),I.collectionInfo.type==="erc1155"&&i.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:["Vesting info shown for Token ID ",I.mintData.tokenId||"1",". Enter a specific Token ID to see accurate vesting amounts."]})]}),!I.collectionInfo.isOwner&&i.jsxs("div",{className:"mt-2 p-2 bg-destructive/10 border border-destructive/20 rounded-md flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),i.jsx("span",{className:"text-sm text-destructive",children:"You are not the owner of this collection and cannot mint tokens."})]})]}),I.mintData.collectionType==="erc1155"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Token ID"}),i.jsx(Ti,{min:"0",value:I.mintData.tokenId,onChange:J=>ee("tokenId",J.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Recipient Address"}),i.jsx(Ps,{value:I.mintData.recipient,onChange:J=>ee("recipient",J.target.value),placeholder:"0x..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),i.jsx(Ti,{min:"1",value:I.mintData.quantity,onChange:J=>ee("quantity",J.target.value),placeholder:"1"})]}),i.jsx(we,{onClick:q,disabled:I.mintLoading||!t||!I.mintData.collectionAddress||!I.mintData.recipient||!I.mintData.quantity||I.mintData.collectionType==="erc1155"&&!I.mintData.tokenId,variant:"primary",size:"md",className:"w-full h-10 flex items-center justify-center gap-2 shadow-sm text-sm",children:I.mintLoading?"Minting...":"Mint"}),!t&&i.jsx("div",{className:"text-center p-4 bg-card rounded-lg",children:i.jsx("p",{className:"text-muted-foreground text-sm",children:"Please connect your wallet to use creator mint functionality."})})]})]})]})]})},C=()=>{const R=I=>{const N=typeof window<"u"&&window.ethereum&&window.ethereum.chainId?parseInt(window.ethereum.chainId,16):null,F=N&&jt[N]?jt[N].name.toLowerCase().replace(/[^a-z0-9]+/g,"-"):N||"",E=F?`/${F}/raffle/${I}`:`/raffle/${I}`;o(E)};return!g||g.length===0?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(tl,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Raffles Created Yet"}),i.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"You haven't created any raffles yet. Start by creating your first raffle!"}),i.jsx(we,{onClick:()=>o("/create-raffle"),variant:"primary",size:"md",children:"Create Your First Raffle"})]})}):i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"My Raffles"}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[g.length," raffles"]})]}),g.map(I=>i.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 hover:bg-card/90 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-foreground text-sm mb-1",children:I.name||`Raffle ${I.address.slice(0,8)}...`}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"text-xs text-muted-foreground",children:[i.jsx("span",{className:"font-medium",children:"Slots Sold:"})," ",I.ticketsSold||0," / ",I.maxTickets||"Unlimited"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[i.jsx("span",{className:"font-medium",children:"Revenue:"})," ",p(I.revenue||"0")]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[i.jsx("span",{className:"font-medium",children:"Created:"})," ",I.createdAt?new Date(I.createdAt<1e12?I.createdAt*1e3:I.createdAt).toLocaleString():"Unknown"]})]})]}),i.jsx("div",{className:"flex flex-col gap-2",children:i.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${I.state==="active"?"bg-green-100 text-green-800":I.state==="completed"?"bg-blue-100 text-blue-800":I.state==="ended"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:I.state})})]}),i.jsx("div",{className:"flex gap-2 mt-3",children:i.jsx(we,{onClick:()=>R(I.address),variant:"primary",size:"sm",children:"View Details"})})]},I.address))]})},L=()=>_?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Loading collections..."})]})}):!j||j.length===0?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ho,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Collections Yet"}),i.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"You haven't created any NFT collections yet. Create a raffle with an NFT prize to get started!"}),i.jsx("button",{onClick:()=>o("/create-raffle"),className:"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90 transition-colors",children:"Create Raffle"})]})}):i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"My Collections"}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[j.length," collections"]})]}),j.map((R,I)=>i.jsx("div",{className:"bg-card border border-border rounded-lg p-4 hover:bg-card/90 transition-colors",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:i.jsx(Ho,{className:"h-5 w-5 text-purple-500"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-foreground text-sm mb-1",children:R.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:R.symbol})]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex-shrink-0 ${R.isInternal?"bg-primary/10 text-primary":"bg-secondary/10 text-secondary-foreground"}`,children:R.type})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.jsx("span",{className:"font-medium",children:"Total Supply:"})," ",R.totalSupply]}),i.jsxs("p",{className:"text-xs text-muted-foreground font-mono",children:[i.jsx("span",{className:"font-medium",children:"Address:"})," ",R.address.slice(0,6),"...",R.address.slice(-4)]})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(R.address),re.success("Address copied to clipboard")},className:"flex-1 text-xs bg-secondary/10 text-secondary-foreground px-3 py-1.5 rounded-md hover:bg-secondary/20 transition-colors",children:"Copy Address"}),i.jsxs("button",{onClick:()=>{var F;const N=(F=jt[chainId])==null?void 0:F.blockExplorer;N&&window.open(`${N}/address/${R.address}`,"_blank")},className:"flex-1 text-xs bg-secondary/10 text-secondary-foreground px-3 py-1.5 rounded-md hover:bg-secondary/20 transition-colors flex items-center justify-center gap-1",children:[i.jsx(nl,{className:"h-3 w-3"}),"Explorer"]})]})]})]})},`${R.address}-${I}`))]}),z=()=>a==="activity"?$():a==="created"?C():a==="purchased"?L():a==="dashboard"?U():$();return i.jsxs("div",{className:"min-h-screen bg-background overflow-x-hidden",children:[i.jsxs("div",{className:"bg-background border-b border-border p-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Profile"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Track activities and manage your raffles"}),i.jsxs("div",{className:"bg-card border border-border rounded-lg p-3",children:[i.jsx("p",{className:"text-sm font-medium",children:"Connected Account:"}),i.jsx("p",{className:"text-xs font-mono break-all",children:e})]})]}),i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[i.jsx("button",{onClick:()=>l("activity"),"data-profile-tab":!0,className:`p-4 rounded-lg border transition-colors ${a==="activity"?"border-primary bg-primary/10 text-primary":"border-border bg-background hover:bg-card/90 text-foreground"}`,children:i.jsx("span",{className:"text-sm font-medium",children:"Activity"})}),i.jsx("button",{onClick:()=>l("created"),"data-profile-tab":!0,className:`p-4 rounded-lg border transition-colors ${a==="created"?"border-primary bg-primary/10 text-primary":"border-border bg-background hover:bg-card/90 text-foreground"}`,children:i.jsx("span",{className:"text-sm font-medium",children:"My Raffles"})}),i.jsx("button",{onClick:()=>l("purchased"),"data-profile-tab":!0,className:`p-4 rounded-lg border transition-colors ${a==="purchased"?"border-primary bg-primary/10 text-primary":"border-border bg-background hover:bg-card/90 text-foreground"}`,children:i.jsx("span",{className:"text-sm font-medium",children:"Collections"})}),i.jsx("button",{onClick:()=>l("dashboard"),"data-profile-tab":!0,className:`p-4 rounded-lg border transition-colors ${a==="dashboard"?"border-primary bg-primary/10 text-primary":"border-border bg-background hover:bg-card/90 text-foreground"}`,children:i.jsx("span",{className:"text-sm font-medium",children:"Dashboard"})})]})}),i.jsx("div",{className:"pb-8",children:z()}),y&&i.jsxs("div",{className:"text-center py-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Loading on-chain data"})]})]})},ype=()=>{const{isMobile:t,isInitialized:e}=Ln();return e?t?i.jsx(_B,{}):i.jsx(xpe,{}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold mb-2",style:{fontFamily:"Orbitron, monospace"},children:"Dropr"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading..."})]})})},xpe=()=>{const{connected:t,address:e,provider:n,chainId:r}=an(),{contracts:s,getContractInstance:o,executeTransaction:a,executeCall:l}=xn();mo();const{isMobile:c}=Ln(),{getCurrencySymbol:u}=er(),{userActivity:f,createdRaffles:p,purchasedTickets:m,activityStats:g,creatorStats:w,loading:y,showRevenueModal:T,selectedRaffle:j,setSelectedRaffle:_,fetchCreatedRaffles:v,fetchPurchasedTickets:P}=YC(),[D,$]=k.useState("activity"),U=k.useMemo(()=>f.map(A=>{const x=()=>{var I;const z=A.raffleName||A.name||`Raffle ${(I=A.raffleAddress)==null?void 0:I.slice(0,8)}...`,R=A.quantity||A.ticketCount||1;switch(A.type){case"ticket_purchase":return`Purchased ${R} ${z} slot${R>1?"s":""}`;case"raffle_created":return`Created raffle "${z}"`;case"raffle_deleted":return`Deleted raffle "${z}"`;case"prize_won":return`Won prize in "${z}"`;case"prize_claimed":return`Claimed prize from "${z}"`;case"refund_claimed":return`Claimed refund from "${z}"`;case"revenue_withdrawn":return`Withdrew revenue from "${z}"`;case"admin_withdrawn":return`Admin withdrawal: ${A.amount} ${u()}`;default:return A.description||"Activity"}},C=()=>{switch(A.type){case"ticket_purchase":return A.amount?`${A.amount} ${u()}`:"";case"refund_claimed":return A.amount?`${A.amount} ${u()}`:"";default:return A.description||""}},L=()=>{switch(A.type){case"ticket_purchase":return i.jsx(og,{className:"h-4 w-4 text-blue-500"});case"raffle_created":return i.jsx(Yr,{className:"h-4 w-4 text-green-500"});case"raffle_deleted":return i.jsx(Xl,{className:"h-4 w-4 text-red-500"});case"prize_won":return i.jsx(tl,{className:"h-4 w-4 text-yellow-500"});case"prize_claimed":return i.jsx(tl,{className:"h-4 w-4 text-yellow-500"});case"refund_claimed":return i.jsx(ul,{className:"h-4 w-4 text-orange-500"});case"revenue_withdrawn":return i.jsx(Ms,{className:"h-4 w-4 text-green-500"});case"admin_withdrawn":return i.jsx(Ms,{className:"h-4 w-4 text-purple-500"});default:return i.jsx(Xl,{className:"h-4 w-4 text-gray-500"})}};return{...A,title:x(),description:C(),icon:L(),timestamp:A.timestamp?new Date(A.timestamp<1e12?A.timestamp*1e3:A.timestamp).toLocaleString():"Unknown date"}}),[f]);function K(A){var L,z;if(A!=null&&A.reason)return A.reason;if((L=A==null?void 0:A.data)!=null&&L.message)return A.data.message;const x=(A==null?void 0:A.message)||((z=A==null?void 0:A.data)==null?void 0:z.message)||(A==null?void 0:A.toString())||"",C=x.match(/execution reverted:?\s*([^\n]*)/i);return C&&C[1]?C[1].trim():x}const Y=async A=>{let x=`Are you sure you want to delete "${A.name}"?`;if(A.ticketsSold>0&&(x+=`

This raffle has ${A.ticketsSold} sold tickets. Deletion will automatically process refunds for all participants.`),!!window.confirm(x))try{const C=o(A.address,"pool");if(!C)throw new Error("Failed to get raffle contract");const L=await a(C.deleteRaffle);if(L.success){const z=A.ticketsSold>0?`Raffle deleted successfully! Refunds have been processed automatically for ${A.ticketsSold} sold tickets.`:"Raffle deleted successfully!";re.success(z),setLoading(!0),await Promise.all([v(),P()]),setLoading(!1)}else throw new Error(L.error)}catch(C){re.error(K(C))}},G=A=>{_(A),setShowRevenueModal(!0)},X=async A=>{try{const x=o(A.raffleAddress,"pool");if(!x)throw new Error("Failed to get pool contract");let C;if(A.prizeAmount>1?C=await a(x.claimPrizes,A.prizeAmount):C=await a(x.claimPrize),C.success)re.success("Prize claimed successfully!"),setLoading(!0),await Promise.all([v(),P()]),setLoading(!1);else throw new Error(C.error)}catch(x){re.error(K(x))}},V=async A=>{try{const x=o(A.raffleAddress,"pool");if(!x)throw new Error("Failed to get pool contract");const C=await x.refundedNonWinningTickets(e),L=C&&C.gt&&C.gt(0),z=await a(x.claimRefund);if(z.success)re.success("Refund claimed successfully!"),setLoading(!0),await Promise.all([v(),P()]),setLoading(!1);else throw new Error(z.error)}catch(x){re.error(K(x))}};return t?i.jsxs(ql,{variant:"profile",className:"pt-8 pb-4",children:[i.jsx("div",{className:"mb-8",children:i.jsx("div",{className:`${c?"mb-4":"flex items-center justify-between mb-4"}`,children:i.jsxs("div",{children:[i.jsx("h1",{className:`text-3xl font-bold mb-4 font-display ${c?"text-2xl mb-2":""}`,children:"Profile"}),i.jsx("p",{className:`text-muted-foreground ${c?"text-sm":"text-base"}`,children:"Track activities, manage your raffles, revenue and collections"})]})})}),!c&&i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:`font-semibold mb-4 ${c?"text-lg":"text-xl"}`,children:"Activity Overview"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[i.jsx("div",{className:"bg-card/80 backdrop-blur-sm border border-border/50 rounded-xl p-3 shadow-xl transition-all duration-300",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kb,{className:"h-6 w-6 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:`font-bold ${c?"text-lg":"text-xl"}`,children:Number(g.totalSlotsPurchased||0).toLocaleString()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Slots Purchased"})]})]})}),i.jsx("div",{className:"bg-card/80 backdrop-blur-sm border border-border/50 rounded-xl p-3 shadow-xl transition-all duration-300",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yr,{className:"h-6 w-6 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:`font-bold ${c?"text-lg":"text-xl"}`,children:Number(g.totalRafflesCreated||0).toLocaleString()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Raffles Created"})]})]})}),i.jsx("div",{className:"bg-card/80 backdrop-blur-sm border border-border/50 rounded-xl p-3 shadow-xl transition-all duration-300",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(dl,{className:"h-6 w-6 text-yellow-500"}),i.jsxs("div",{children:[i.jsx("p",{className:`font-bold ${c?"text-lg":"text-xl"}`,children:Number(g.totalPrizesWon||0).toLocaleString()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Wins"})]})]})}),i.jsx("div",{className:"bg-card/80 backdrop-blur-sm border border-border/50 rounded-xl p-3 shadow-xl transition-all duration-300",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ms,{className:"h-6 w-6 text-orange-500"}),i.jsxs("div",{children:[i.jsx("p",{className:`font-bold ${c?"text-lg":"text-xl"}`,children:(()=>{const A=g.totalClaimableRefunds,x=u();if(!A||!A.toString)return`0 ${x}`;try{const z=parseFloat(Zt(A)).toFixed(8).replace(/\.0+$/,"").replace(/(\.\d*[1-9])0+$/,"$1");return`${z===""||z==="."?"0":z} ${x}`}catch{return`0 ${x}`}})()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Claimable Refunds"})]})]})})]})]}),y&&i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading on-chain data"})]}),i.jsx(gpe,{activities:U,createdRaffles:p,purchasedTickets:m,creatorStats:w,onDeleteRaffle:Y,onViewRevenue:G,onClaimPrize:X,onClaimRefund:V}),T&&j&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-card/90 backdrop-blur-md border border-border/50 rounded-xl p-6 max-w-md w-full mx-4 shadow-2xl",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Revenue Details"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Raffle:"}),i.jsx("span",{className:"font-medium",children:j.name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total Revenue:"}),i.jsxs("span",{className:"font-medium",children:[Zt(j.totalRevenue)," ETH"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Tickets Sold:"}),i.jsx("span",{className:"font-medium",children:j.ticketsSold})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>setShowRevenueModal(!1),className:"flex-1 bg-[#614E41] text-white px-4 py-2 rounded-md hover:bg-[#4a3a30] transition-colors",children:"Close"}),i.jsx("button",{onClick:()=>{setShowRevenueModal(!1)},className:"flex-1 bg-[#614E41] text-white px-4 py-2 rounded-md hover:bg-[#4a3a30] transition-colors",children:"Withdraw"})]})]})})]}):i.jsx("div",{className:"container mx-auto px-4 pt-8 pb-4",children:i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4 font-display",children:"Connect Your Wallet"}),i.jsx("p",{className:"text-muted-foreground",children:"Please connect your wallet to view your profile and activity."})]})})},AB=k.forwardRef(({address:t,chainId:e,chainName:n,chainIcon:r,memberSince:s,className:o,...a},l)=>{const[c,u]=k.useState(!1),p=(T=>{if(!T)return{bg:"from-primary to-primary/60",text:"text-primary-foreground"};const j=T.toLowerCase().split("").reduce((P,D)=>D.charCodeAt(0)+((P<<5)-P),0),_=Math.abs(j%360),v=(_+40)%360;return{style:{background:`linear-gradient(135deg, hsl(${_}, 70%, 50%), hsl(${v}, 70%, 40%))`}}})(t),m=T=>T?`${T.slice(0,6)}...${T.slice(-4)}`:"",g=async()=>{if(t)try{await navigator.clipboard.writeText(t),u(!0),re.success("Address copied to clipboard"),setTimeout(()=>u(!1),2e3)}catch{re.error("Failed to copy address")}},w={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{duration:.4,staggerChildren:.1}}},y={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}};return i.jsxs(Be.div,{ref:l,variants:w,initial:"hidden",animate:"visible",className:je("relative rounded-2xl overflow-hidden","bg-gradient-to-br from-card/80 to-card/60 backdrop-blur-sm","border border-border/50 shadow-xl",o),...a,children:[i.jsx("div",{className:"absolute inset-0 opacity-10",style:p.style}),i.jsx("div",{className:"relative p-6 md:p-8",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-6",children:[i.jsxs(Be.div,{variants:y,className:"relative",children:[i.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-2xl flex items-center justify-center text-white shadow-lg",style:p.style,children:t?i.jsx("span",{className:"text-2xl md:text-3xl font-bold font-mono",children:t.slice(2,4).toUpperCase()}):i.jsx(lg,{className:"h-10 w-10"})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-success rounded-full border-2 border-card flex items-center justify-center",children:i.jsx(Bs,{className:"h-3 w-3 text-white"})})]}),i.jsxs("div",{className:"flex-1 space-y-3",children:[i.jsx(Be.div,{variants:y,className:"flex items-center gap-3",children:i.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-lg px-3 py-2",children:[i.jsx(vm,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm md:text-base",children:m(t)}),i.jsx(we,{variant:"ghost",size:"sm",onClick:g,className:"h-6 w-6 p-0 ml-1",children:c?i.jsx(Bs,{className:"h-3 w-3 text-success"}):i.jsx(Wg,{className:"h-3 w-3"})})]})}),i.jsxs(Be.div,{variants:y,className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[n&&i.jsxs("div",{className:"flex items-center gap-2 bg-muted/30 rounded-full px-3 py-1",children:[r?i.jsx(r,{className:"h-4 w-4"}):i.jsx("div",{className:"w-4 h-4 rounded-full bg-primary/20"}),i.jsx("span",{children:n})]}),s&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vg,{className:"h-4 w-4"}),i.jsxs("span",{children:["Member since ",s]})]})]})]}),t&&i.jsx(Be.div,{variants:y,children:i.jsxs(we,{variant:"secondary",size:"sm",className:"gap-2",onClick:()=>{window.open(`https://etherscan.io/address/${t}`,"_blank")},children:[i.jsx(Ur,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"View on Explorer"})]})})]})})]})});AB.displayName="ProfileHeader";const lm=k.forwardRef(({label:t,value:e,suffix:n="",prefix:r="",decimals:s=0,icon:o,gradient:a="from-primary to-primary/60",iconColor:l="text-primary",animationDuration:c=1.5,animateOnView:u=!0,className:f,...p},m)=>{const[g,w]=k.useState(!1),y=H6(0),T=qX(y,v=>s>0?v.toFixed(s):Math.round(v).toLocaleString()),j=k.useMemo(()=>{if(typeof e=="number")return e;if(typeof e=="string"){const v=parseFloat(e.replace(/[^0-9.-]/g,""));return isNaN(v)?0:v}return 0},[e]);k.useEffect(()=>g||!u?void 0:uQ(y,j,{duration:c,ease:"easeOut",onComplete:()=>w(!0)}).stop,[j,c,g,u]);const _={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:"easeOut"}},hover:{y:-4,scale:1.02,transition:{duration:.2}}};return i.jsx(Be.div,{ref:m,variants:_,initial:"hidden",animate:"visible",whileHover:"hover",className:je("relative",f),...p,children:i.jsxs(ut,{variant:"elevated",className:"relative overflow-hidden p-4 md:p-5",children:[i.jsx("div",{className:je("absolute inset-0 opacity-10 bg-gradient-to-br",a)}),i.jsx("div",{className:je("absolute top-0 left-0 right-0 h-1 bg-gradient-to-r",a)}),i.jsxs("div",{className:"relative flex items-center gap-4",children:[o&&i.jsx("div",{className:je("flex items-center justify-center w-12 h-12 rounded-xl","bg-gradient-to-br opacity-90",a),children:i.jsx(o,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs(Be.p,{className:"text-2xl md:text-3xl font-bold font-display truncate",children:[r,i.jsx(Be.span,{children:T}),n&&i.jsx("span",{className:"text-lg ml-1",children:n})]}),i.jsx("p",{className:"text-sm text-muted-foreground truncate mt-0.5",children:t})]})]}),i.jsx(Be.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full",whileHover:{translateX:"100%"},transition:{duration:.6}})]})})});lm.displayName="AnimatedStatCard";const PB=k.forwardRef(({children:t,columns:e=4,className:n,...r},s)=>i.jsx("div",{ref:s,className:je("grid gap-4",e===2&&"grid-cols-1 sm:grid-cols-2",e===3&&"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",e===4&&"grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",e===5&&"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",n),...r,children:t}));PB.displayName="StatCardGrid";const HI={ticket_purchase:{icon:og,color:"bg-blue-500",ringColor:"ring-blue-500/20",label:"Slot Purchased"},raffle_created:{icon:Yr,color:"bg-green-500",ringColor:"ring-green-500/20",label:"Raffle Created"},raffle_deleted:{icon:Uh,color:"bg-red-500",ringColor:"ring-red-500/20",label:"Raffle Deleted"},prize_won:{icon:tl,color:"bg-yellow-500",ringColor:"ring-yellow-500/20",label:"Prize Won"},prize_claimed:{icon:Ca,color:"bg-purple-500",ringColor:"ring-purple-500/20",label:"Prize Claimed"},refund_claimed:{icon:ul,color:"bg-orange-500",ringColor:"ring-orange-500/20",label:"Refund Claimed"},revenue_withdrawn:{icon:Ms,color:"bg-emerald-500",ringColor:"ring-emerald-500/20",label:"Revenue Withdrawn"},admin_withdrawn:{icon:Ms,color:"bg-indigo-500",ringColor:"ring-indigo-500/20",label:"Admin Withdrawal"},default:{icon:Xl,color:"bg-gray-500",ringColor:"ring-gray-500/20",label:"Activity"}},RB=k.forwardRef(({activity:t,isLast:e=!1,onViewRaffle:n,className:r,...s},o)=>{const[a,l]=k.useState(!1),c=HI[t.type]||HI.default,u=c.icon,f=m=>{if(!m)return"Unknown";const g=new Date(m<1e12?m*1e3:m),y=new Date-g,T=Math.floor(y/6e4),j=Math.floor(y/36e5),_=Math.floor(y/864e5);return T<1?"Just now":T<60?`${T}m ago`:j<24?`${j}h ago`:_<7?`${_}d ago`:g.toLocaleDateString()},p={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3}}};return i.jsxs(Be.div,{ref:o,variants:p,className:je("relative pl-8",r),...s,children:[!e&&i.jsx("div",{className:"absolute left-[15px] top-10 bottom-0 w-0.5 bg-border/50"}),i.jsx("div",{className:je("absolute left-0 top-2 w-8 h-8 rounded-full flex items-center justify-center","ring-4 ring-background",c.color),children:i.jsx(u,{className:"h-4 w-4 text-white"})}),i.jsxs(ut,{variant:"flat",className:je("p-4 ml-4 transition-all duration-200","hover:shadow-md hover:border-border/80",a&&"border-primary/30"),children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-sm truncate",children:t.title||c.label}),t.description&&i.jsx("p",{className:"text-sm text-muted-foreground mt-0.5 truncate",children:t.description}),i.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[i.jsx(yr,{className:"h-3 w-3"}),i.jsx("span",{children:f(t.timestamp)})]})]}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[t.raffleAddress&&n&&i.jsx(we,{variant:"ghost",size:"sm",onClick:()=>n(t),className:"h-8 w-8 p-0",children:i.jsx(Ur,{className:"h-4 w-4"})}),(t.txHash||t.amount)&&i.jsx(we,{variant:"ghost",size:"sm",onClick:()=>l(!a),className:"h-8 w-8 p-0",children:i.jsx(Be.div,{animate:{rotate:a?180:0},transition:{duration:.2},children:i.jsx(Ii,{className:"h-4 w-4"})})})]})]}),i.jsx(Jl,{children:a&&i.jsx(Be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:i.jsxs("div",{className:"pt-3 mt-3 border-t border-border/50 space-y-2",children:[t.amount&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Amount"}),i.jsx("span",{className:"font-medium",children:t.amount})]}),t.txHash&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Transaction"}),i.jsxs("a",{href:`https://etherscan.io/tx/${t.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-primary hover:underline",children:[t.txHash.slice(0,10),"..."]})]}),t.prizeType&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Prize Type"}),i.jsx("span",{className:"font-medium",children:t.prizeType})]}),t.tokenId&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Token ID"}),i.jsx("span",{className:"font-mono",children:t.tokenId})]})]})})})]})]})});RB.displayName="ActivityTimelineItem";const IB=k.forwardRef(({activities:t=[],onViewRaffle:e,maxItems:n=10,showLoadMore:r=!0,onLoadMore:s,loading:o=!1,emptyMessage:a="No activity yet",className:l,...c},u)=>{const[f,p]=k.useState(n),m=t.slice(0,f),g=t.length>f,w=()=>{s?s():p(T=>T+n)},y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return t.length===0&&!o?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(Xl,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:a})]}):i.jsxs(Be.div,{ref:u,variants:y,initial:"hidden",animate:"visible",className:je("space-y-4",l),...c,children:[m.map((T,j)=>i.jsx(RB,{activity:T,isLast:j===m.length-1&&!g,onViewRaffle:e},T.id||j)),o&&i.jsx("div",{className:"flex justify-center py-4",children:i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-primary border-t-transparent"})}),r&&g&&!o&&i.jsx("div",{className:"flex justify-center pt-4",children:i.jsxs(we,{variant:"secondary",onClick:w,className:"gap-2",children:[i.jsx(Ii,{className:"h-4 w-4"}),"Load More (",t.length-f," remaining)"]})})]})});IB.displayName="ActivityTimeline";const bpe=()=>{const{isMobile:t,isInitialized:e}=Ln();return e?t?i.jsx(_B,{}):i.jsx(kpe,{}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold mb-2",style:{fontFamily:"Orbitron, monospace"},children:"Dropr"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading..."})]})})},vpe=({raffle:t,onDelete:e,onViewRevenue:n,onNavigate:r})=>{const{winnerCount:s}=jv(t.address),{getCurrencySymbol:o}=er(),[a,l]=k.useState("");k.useEffect(()=>{let p;function m(){const w=Math.floor(Date.now()/1e3);let y;if(t.state==="pending"){y=t.startTime;const T=y-w;if(T>0)l(g(T));else{y=t.startTime+t.duration;const j=y-w;j>0?l(g(j)):l("Ended")}}else if(t.state==="active"){y=t.startTime+t.duration;const T=y-w;T>0?l(g(T)):l("Ended")}else l("Ended")}function g(w){const y=Math.floor(w/86400),T=Math.floor(w%86400/3600),j=Math.floor(w%3600/60);return y>0?`${y}d ${T}h`:T>0?`${T}h ${j}m`:`${j}m`}return m(),p=setInterval(m,1e3),()=>clearInterval(p)},[t]);const c=()=>{const p={pending:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",active:"bg-green-500/10 text-green-500 border-green-500/20",ended:"bg-red-500/10 text-red-500 border-red-500/20",drawing:"bg-purple-500/10 text-purple-500 border-purple-500/20",completed:"bg-blue-500/10 text-blue-500 border-blue-500/20",deleted:"bg-gray-500/10 text-gray-500 border-gray-500/20",allPrizesClaimed:"bg-blue-500/10 text-blue-500 border-blue-500/20",unengaged:"bg-gray-500/10 text-gray-500 border-gray-500/20"},m=t.state==="allPrizesClaimed"?s===1?"Prize Claimed":"Prizes Claimed":t.state.charAt(0).toUpperCase()+t.state.slice(1);return i.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium border ${p[t.state]||p.deleted}`,children:m})},u=t.state==="pending"||t.state==="active",f=t.slotLimit>0?t.ticketsSold/t.slotLimit*100:0;return i.jsx(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},children:i.jsxs(ut,{variant:"elevated",className:"overflow-hidden",children:[i.jsx("div",{className:"h-1 bg-muted",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/60 transition-all duration-500",style:{width:`${Math.min(f,100)}%`}})}),i.jsxs(It,{className:"p-5",children:[i.jsx("div",{className:"flex items-start justify-between gap-4 mb-4",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-semibold truncate",children:t.name}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c(),i.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[i.jsx(yr,{className:"h-3 w-3"}),a]})]})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Slots Sold"}),i.jsxs("p",{className:"text-lg font-semibold",children:[t.ticketsSold," / ",t.slotLimit]})]}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue"}),i.jsxs("p",{className:"text-lg font-semibold",children:[Zt(t.totalRevenue||"0")," ",o()]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(we,{variant:"primary",size:"sm",className:"flex-1",onClick:()=>r(t),children:[i.jsx(nl,{className:"h-4 w-4 mr-1"}),"View"]}),i.jsx(we,{variant:"secondary",size:"sm",onClick:()=>n(t),disabled:!t.totalRevenue||parseFloat(Zt(t.totalRevenue))<=0,children:i.jsx(Ms,{className:"h-4 w-4"})}),u&&i.jsx(we,{variant:"destructive",size:"sm",onClick:()=>e(t),children:i.jsx(Uh,{className:"h-4 w-4"})})]})]})]})})},wpe=({ticket:t,onClaimPrize:e,onClaimRefund:n,onNavigate:r})=>{const{winnerCount:s}=jv(t.raffleAddress),{getCurrencySymbol:o}=er(),a=t.isWinner&&(t.raffleState==="Completed"||t.raffleState==="AllPrizesClaimed")&&!t.prizeClaimed,l=!t.isWinner&&(t.raffleState==="Completed"||t.raffleState==="AllPrizesClaimed")&&!t.refundClaimed,c=()=>t.raffleState==="allPrizesClaimed"&&typeof s=="number"?s===1?"Prize Claimed":"Prizes Claimed":t.raffleState.charAt(0).toUpperCase()+t.raffleState.slice(1);return i.jsx(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},children:i.jsx(ut,{variant:"elevated",className:"overflow-hidden",children:i.jsxs(It,{className:"p-5",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-semibold truncate",children:t.raffleName}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.quantity," slot",t.quantity>1?"s":""]})]}),t.isWinner&&i.jsxs("div",{className:"flex items-center gap-1 px-2.5 py-1 rounded-full bg-yellow-500/10 text-yellow-500 text-xs font-medium",children:[i.jsx(tl,{className:"h-3 w-3"}),"Winner"]})]}),i.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Cost"}),i.jsxs("span",{className:"font-medium",children:[Zt(t.totalCost)," ",o()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Status"}),i.jsx("span",{className:"font-medium",children:c()})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(we,{variant:"secondary",size:"sm",className:"flex-1",onClick:()=>r(t),children:[i.jsx(Ur,{className:"h-4 w-4 mr-1"}),"View Raffle"]}),a&&i.jsxs(we,{variant:"primary",size:"sm",onClick:()=>e(t),children:[i.jsx(Ca,{className:"h-4 w-4 mr-1"}),"Claim Prize"]}),l&&i.jsxs(we,{variant:"secondary",size:"sm",onClick:()=>n(t),children:[i.jsx(ul,{className:"h-4 w-4 mr-1"}),"Claim Refund"]})]})]})})})},kpe=()=>{const{connected:t,address:e,chainId:n}=an(),{getContractInstance:r,executeTransaction:s}=xn(),o=mo(),{getCurrencySymbol:a}=er(),[l,c]=k.useState("activity"),[u,f]=k.useState(!1),[p,m]=k.useState(null),{userActivity:g,createdRaffles:w,purchasedTickets:y,activityStats:T,creatorStats:j,loading:_,fetchCreatedRaffles:v,fetchPurchasedTickets:P}=YC(),D=k.useMemo(()=>g.map(V=>({...V,title:Tpe(V,a),description:Npe(V,a)})),[g,a]),$=n?jt[n]:null,U=V=>{const A=V.raffleAddress||V.address,x=V.chainId,C=x&&jt[x]?jt[x].name.toLowerCase().replace(/[^a-z0-9]+/g,"-"):"",L=C?`/${C}/raffle/${A}`:`/raffle/${A}`;o(L)},K=async V=>{let A=`Are you sure you want to delete "${V.name}"?`;if(V.ticketsSold>0&&(A+=`

This raffle has ${V.ticketsSold} sold tickets. Deletion will automatically process refunds.`),!!window.confirm(A))try{const x=r(V.address,"pool");if(!x)throw new Error("Failed to get raffle contract");const C=await s(x.deleteRaffle);if(C.success)re.success(V.ticketsSold>0?`Raffle deleted! Refunds processed for ${V.ticketsSold} sold tickets.`:"Raffle deleted successfully!"),await Promise.all([v(),P()]);else throw new Error(C.error)}catch(x){re.error(x.message||"Failed to delete raffle")}},Y=V=>{m(V),f(!0)},G=async V=>{try{const A=r(V.raffleAddress,"pool");if(!A)throw new Error("Failed to get pool contract");const x=V.prizeAmount>1?await s(A.claimPrizes,V.prizeAmount):await s(A.claimPrize);if(x.success)re.success("Prize claimed successfully!"),await Promise.all([v(),P()]);else throw new Error(x.error)}catch(A){re.error(A.message||"Failed to claim prize")}},X=async V=>{try{const A=r(V.raffleAddress,"pool");if(!A)throw new Error("Failed to get pool contract");const x=await s(A.claimRefund);if(x.success)re.success("Refund claimed successfully!"),await Promise.all([v(),P()]);else throw new Error(x.error)}catch(A){re.error(A.message||"Failed to claim refund")}};return t?i.jsx("div",{className:"min-h-screen bg-background pb-12",children:i.jsxs("div",{className:"container mx-auto px-4 md:px-8 pt-8",children:[i.jsx(AB,{address:e,chainId:n,chainName:$==null?void 0:$.name,className:"mb-8"}),i.jsxs(PB,{columns:4,className:"mb-8",children:[i.jsx(lm,{label:"Slots Purchased",value:T.totalSlotsPurchased||0,icon:Kb,gradient:"from-blue-500 to-blue-600"}),i.jsx(lm,{label:"Raffles Created",value:T.totalRafflesCreated||0,icon:Yr,gradient:"from-green-500 to-green-600"}),i.jsx(lm,{label:"Total Wins",value:T.totalPrizesWon||0,icon:dl,gradient:"from-yellow-500 to-yellow-600"}),i.jsx(lm,{label:"Claimable Refunds",value:T.totalClaimableRefunds?typeof T.totalClaimableRefunds=="string"&&!T.totalClaimableRefunds.startsWith("0x")?parseFloat(T.totalClaimableRefunds).toFixed(4):parseFloat(Zt(T.totalClaimableRefunds)).toFixed(4):0,suffix:a(),decimals:4,icon:Ms,gradient:"from-orange-500 to-orange-600"})]}),_&&i.jsxs("div",{className:"flex items-center justify-center gap-3 py-4 mb-4",children:[i.jsx($r,{className:"h-5 w-5 animate-spin text-primary"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading on-chain data..."})]}),i.jsxs(ny,{value:l,onValueChange:c,className:"space-y-6",children:[i.jsxs(Sv,{className:"w-full grid grid-cols-4 h-12 p-1 bg-muted/50 border border-border/50 rounded-xl",children:[i.jsxs($o,{value:"activity",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-lg",children:[i.jsx(yr,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Activity"})]}),i.jsxs($o,{value:"created",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-lg",children:[i.jsx(os,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"My Raffles"})]}),i.jsxs($o,{value:"tickets",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-lg",children:[i.jsx(rk,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Slots"})]}),i.jsxs($o,{value:"dashboard",className:"gap-2 data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-lg",children:[i.jsx(Mf,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]})]}),i.jsx(Bo,{value:"activity",children:i.jsxs(ut,{variant:"flat",children:[i.jsx(Jr,{children:i.jsx(Fs,{children:"Recent Activity"})}),i.jsx(It,{children:i.jsx(IB,{activities:D,onViewRaffle:U,maxItems:10,loading:_,emptyMessage:"No activity yet. Create or join a raffle to get started!"})})]})}),i.jsx(Bo,{value:"created",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.length===0?i.jsx(ut,{variant:"flat",className:"col-span-full",children:i.jsxs(It,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(os,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't created any raffles yet."}),i.jsxs(we,{variant:"primary",onClick:()=>o("/create-raffle-v2"),children:[i.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Create Raffle"]})]})}):w.map(V=>i.jsx(vpe,{raffle:V,onDelete:K,onViewRevenue:Y,onNavigate:U},V.address))})}),i.jsx(Bo,{value:"tickets",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.length===0?i.jsx(ut,{variant:"flat",className:"col-span-full",children:i.jsxs(It,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(rk,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't purchased any raffle slots yet."}),i.jsxs(we,{variant:"primary",onClick:()=>o("/app"),children:[i.jsx(rg,{className:"h-4 w-4 mr-2"}),"Browse Raffles"]})]})}):y.map((V,A)=>i.jsx(wpe,{ticket:V,onClaimPrize:G,onClaimRefund:X,onNavigate:U},`${V.raffleAddress}-${A}`))})}),i.jsx(Bo,{value:"dashboard",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ut,{variant:"elevated",children:[i.jsx(Jr,{children:i.jsx(Fs,{children:"Creator Statistics"})}),i.jsxs(It,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Raffles"}),i.jsx("span",{className:"font-semibold",children:j.totalRaffles||0})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[i.jsx("span",{className:"text-muted-foreground",children:"Active Raffles"}),i.jsx("span",{className:"font-semibold",children:j.activeRaffles||0})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Revenue"}),i.jsx("span",{className:"font-semibold",children:j.totalRevenue?`${parseFloat(Zt(j.totalRevenue)).toFixed(4)} ${a()}`:`0 ${a()}`})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[i.jsx("span",{className:"text-muted-foreground",children:"Withdrawable"}),i.jsx("span",{className:"font-semibold text-success",children:j.withdrawableRevenue?`${parseFloat(Zt(j.withdrawableRevenue)).toFixed(4)} ${a()}`:`0 ${a()}`})]})]})]}),i.jsxs(ut,{variant:"elevated",children:[i.jsx(Jr,{children:i.jsx(Fs,{children:"Quick Actions"})}),i.jsxs(It,{className:"space-y-3",children:[i.jsxs(we,{variant:"primary",size:"lg",className:"w-full justify-start gap-3",onClick:()=>o("/create-raffle-v2"),children:[i.jsx(Yr,{className:"h-5 w-5"}),"Create New Raffle"]}),i.jsxs(we,{variant:"secondary",size:"lg",className:"w-full justify-start gap-3",onClick:()=>o("/deploy-collection-v2"),children:[i.jsx(Ca,{className:"h-5 w-5"}),"Deploy NFT Collection"]}),i.jsxs(we,{variant:"secondary",size:"lg",className:"w-full justify-start gap-3",onClick:()=>o("/app"),children:[i.jsx(rg,{className:"h-5 w-5"}),"Browse All Raffles"]})]})]})]})})]}),i.jsx(W2,{open:u,onOpenChange:f,children:i.jsxs(H2,{children:[i.jsxs(G2,{children:[i.jsx(K2,{children:"Revenue Details"}),i.jsx(ope,{children:"View and manage revenue for this raffle."})]}),p&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsx("span",{className:"text-muted-foreground",children:"Raffle"}),i.jsx("span",{className:"font-medium",children:p.name})]}),i.jsxs("div",{className:"flex justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Revenue"}),i.jsxs("span",{className:"font-medium",children:[Zt(p.totalRevenue)," ",a()]})]}),i.jsxs("div",{className:"flex justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsx("span",{className:"text-muted-foreground",children:"Tickets Sold"}),i.jsx("span",{className:"font-medium",children:p.ticketsSold})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(we,{variant:"secondary",className:"flex-1",onClick:()=>f(!1),children:"Close"}),i.jsx(we,{variant:"primary",className:"flex-1",onClick:()=>{f(!1)},children:"Withdraw"})]})]})]})})]})}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center mx-auto mb-4",children:i.jsx(rk,{className:"h-8 w-8 text-white"})}),i.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Connect Your Wallet"}),i.jsx("p",{className:"text-muted-foreground",children:"Please connect your wallet to view your profile."})]})})};function Tpe(t,e){var s;const n=t.raffleName||t.name||`Raffle ${(s=t.raffleAddress)==null?void 0:s.slice(0,8)}...`,r=t.quantity||t.ticketCount||1;switch(t.type){case"ticket_purchase":return`Purchased ${r} ${n} slot${r>1?"s":""}`;case"raffle_created":return`Created raffle "${n}"`;case"raffle_deleted":return`Deleted raffle "${n}"`;case"prize_won":return`Won prize in "${n}"`;case"prize_claimed":return`Claimed prize from "${n}"`;case"refund_claimed":return`Claimed refund from "${n}"`;case"revenue_withdrawn":return`Withdrew revenue from "${n}"`;case"admin_withdrawn":return`Admin withdrawal: ${t.amount} ${e()}`;default:return t.description||"Activity"}}function Npe(t,e){switch(t.type){case"ticket_purchase":return t.amount?`${t.amount} ${e()}`:"";case"refund_claimed":return t.amount?`${t.amount} ${e()}`:"";default:return t.description||""}}var Ev="Switch",[jpe,b0e]=Mi(Ev),[Cpe,Spe]=jpe(Ev),MB=k.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...p}=t,[m,g]=k.useState(null),w=un(e,v=>g(v)),y=k.useRef(!1),T=m?f||!!m.closest("form"):!0,[j,_]=_a({prop:s,defaultProp:o??!1,onChange:u,caller:Ev});return i.jsxs(Cpe,{scope:n,checked:j,disabled:l,children:[i.jsx(Pt.button,{type:"button",role:"switch","aria-checked":j,"aria-required":a,"data-state":FB(j),"data-disabled":l?"":void 0,disabled:l,value:c,...p,ref:w,onClick:nt(t.onClick,v=>{_(P=>!P),T&&(y.current=v.isPropagationStopped(),y.current||v.stopPropagation())})}),T&&i.jsx(LB,{control:m,bubbles:!y.current,name:r,value:c,checked:j,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});MB.displayName=Ev;var DB="SwitchThumb",OB=k.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Spe(DB,n);return i.jsx(Pt.span,{"data-state":FB(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});OB.displayName=DB;var Epe="SwitchBubbleInput",LB=k.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},o)=>{const a=k.useRef(null),l=un(a,o),c=MD(n),u=ND(e);return k.useEffect(()=>{const f=a.current;if(!f)return;const p=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==n&&g){const w=new Event("click",{bubbles:r});g.call(f,n),f.dispatchEvent(w)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});LB.displayName=Epe;function FB(t){return t?"checked":"unchecked"}var _pe=MB,Ape=OB;function zB({className:t,size:e="default",...n}){const r={default:{root:"h-5 w-9 rounded-full",thumb:"h-4 w-4 rounded-full data-[state=checked]:translate-x-4"},mobile:{root:"h-7 w-12 rounded-full",thumb:"h-5 w-5 rounded-full data-[state=checked]:translate-x-5"},large:{root:"h-8 w-14 rounded-full",thumb:"h-7 w-7 rounded-full data-[state=checked]:translate-x-6"}},s=r[e]||r.default;return i.jsx(_pe,{"data-slot":"switch",className:je("peer inline-flex shrink-0 cursor-pointer items-center border-2 border-transparent transition-all duration-200 ease-in-out outline-none focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-muted hover:data-[state=unchecked]:bg-muted/80 active:scale-95",s.root,t),...n,children:i.jsx(Ape,{"data-slot":"switch-thumb",className:je("pointer-events-none block bg-background shadow-lg ring-0 transition-all duration-200 ease-in-out data-[state=unchecked]:translate-x-0 data-[state=checked]:shadow-xl",s.thumb)})})}const Yo=({tokenGatedEnabled:t,onTokenGatedChange:e,formData:n,handleChange:r,required:s=!1,useFormDataEnabled:o=!1})=>{const{isMobile:a}=Ln(),l=o?n.tokenGatedEnabled:t,c=o?u=>r("tokenGatedEnabled",u):e;return i.jsxs(i.Fragment,{children:[a?i.jsx("div",{className:"p-4 bg-card/50 rounded-xl border border-border/50 mb-4 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between gap-4 cursor-pointer select-none transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:bg-muted/10 active:bg-muted/20 rounded-lg p-1 -m-1",onClick:()=>c(!l),onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),c(!l))},tabIndex:0,role:"button","aria-label":`${l?"Disable":"Enable"} token-gated access`,children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"font-medium block cursor-pointer text-base mb-1",children:"Enable Token-Gated Access"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Restrict raffle participation to token holders"})]}),i.jsx(hn,{className:`h-6 w-6 transition-colors duration-200 ${l?"text-green-600":"text-muted-foreground/40"}`})]})}):i.jsx("div",{className:"mb-2",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zB,{checked:l,onCheckedChange:c,size:"default"}),i.jsx("div",{className:"flex-1 cursor-pointer select-none transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:text-foreground/80 active:text-foreground",onClick:()=>c(!l),onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),c(!l))},tabIndex:0,role:"button","aria-label":`${l?"Disable":"Enable"} token-gated access`,children:i.jsx("label",{className:"font-medium block cursor-pointer text-sm",children:"Enable Token-Gated Access"})})]})}),l&&i.jsx("div",{className:"p-4 border rounded-lg bg-muted/10 mb-4",children:i.jsxs("div",{className:`${a?"space-y-4":"grid grid-cols-1 md:grid-cols-2 gap-4"}`,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-medium mb-1 text-base",children:"Token Address"}),i.jsx("input",{type:"text",value:n.holderTokenAddress||"",onChange:u=>r("holderTokenAddress",u.target.value),className:`w-full border border-border rounded-lg bg-background font-mono ${a?"px-4 py-3 text-base":"px-3 py-2.5 text-base"}`,placeholder:"0x...",required:s&&l})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-medium mb-1 text-base",children:"Token Standard"}),i.jsxs(Cd,{value:n.holderTokenStandard||"0",onValueChange:u=>r("holderTokenStandard",u),required:s&&l,children:[i.jsx(Ed,{className:`w-full border border-border rounded-lg bg-background ${a?"px-4 py-3 text-base h-12":"px-3 py-2.5 text-base"}`,children:i.jsx(Sd,{placeholder:"Select Token Standard"})}),i.jsxs(_d,{children:[i.jsx(Ds,{value:"0",children:"ERC721"}),i.jsx(Ds,{value:"1",children:"ERC1155"}),i.jsx(Ds,{value:"2",children:"ERC20"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-medium mb-1 text-base",children:"Minimum Holder Balance"}),i.jsx("input",{type:"number",value:n.minHolderTokenBalance||"",onChange:u=>r("minHolderTokenBalance",u.target.value),className:`w-full border border-border rounded-lg bg-background ${a?"px-4 py-3 text-base":"px-3 py-2.5 text-base"}`,placeholder:"Minimum balance required to enter",required:s&&l})]}),n.holderTokenStandard==="1"&&i.jsxs("div",{children:[i.jsx("label",{className:"block font-medium mb-1 text-base",children:"Token ID"}),i.jsx("input",{type:"number",value:n.holderTokenId||"",onChange:u=>r("holderTokenId",u.target.value),className:`w-full border border-border rounded-lg bg-background ${a?"px-4 py-3 text-base":"px-3 py-2.5 text-base"}`,placeholder:"Token ID (for ERC1155)",required:s&&l})]})]})})]})},Hu={MAX_TASKS:3,MAX_DESCRIPTION_LENGTH:1e3,TASK_SEPARATOR:"|"},Fu=Hu.MAX_TASKS,Jo=({socialEngagementEnabled:t,onSocialEngagementChange:e,setSocialEngagementEnabled:n,formData:r,handleChange:s,required:o=!1,useFormDataEnabled:a=!1})=>{const{isMobile:l}=Ln(),{getCurrencySymbol:c}=er(),{contracts:u}=xn(),[f,p]=k.useState(null),[m,g]=k.useState(!0),[w,y]=k.useState(!1),[T,j]=k.useState(!0);k.useEffect(()=>{(async()=>{if(!(u!=null&&u.protocolManager)){g(!1),j(!1);return}try{console.log(" Debug: contracts object:",u),console.log(" Debug: socialEngagementManager exists:",!!(u!=null&&u.socialEngagementManager));const x=await u.protocolManager.socialEngagementFee();if(p(x),u!=null&&u.socialEngagementManager){console.log(" Debug: Calling isTaskAssignmentPaused()...");const C=await u.socialEngagementManager.isTaskAssignmentPaused();console.log(" Debug: isTaskAssignmentPaused returned:",C),y(C)}else console.warn(" socialEngagementManager contract not available"),y(!1)}catch(x){console.error(" Error fetching social engagement data:",x),p(null),y(!1)}finally{g(!1),j(!1)}})()},[u]);const _=a?r.socialEngagementEnabled:t,v=w||T,P=a?A=>{v||s("socialEngagementEnabled",A)}:A=>{v||(e||n||(()=>{console.warn("No toggle change handler provided to SocialMediaTaskSection")}))(A)},D=r.socialTasks||[],$=()=>{if(D.length>=Fu){console.warn(`Maximum of ${Fu} social media tasks allowed`);return}const A=[...D,{id:Date.now(),platform:"twitter",action:"follow",target:"",description:""}];s("socialTasks",A)},U=A=>{const x=D.filter(C=>C.id!==A);s("socialTasks",x)},K=(A,x,C)=>{const L=D.map(z=>z.id===A?{...z,[x]:C}:z);s("socialTasks",L)},Y=A=>{switch(A){case"twitter":return i.jsx(wd,{className:"h-4 w-4"});case"discord":return i.jsx(ld,{className:"h-4 w-4"});case"telegram":return i.jsx(ig,{className:"h-4 w-4"});default:return i.jsx(ld,{className:"h-4 w-4"})}},G=A=>{switch(A){case"twitter":return[{value:"follow",label:"Follow Account"},{value:"like",label:"Like Tweet"},{value:"retweet",label:"Retweet"},{value:"comment",label:"Comment on Tweet"},{value:"quote",label:"Quote Tweet"}];case"discord":return[{value:"join",label:"Join Server"},{value:"react",label:"React to Message"}];case"telegram":return[{value:"join",label:"Join Channel/Group"},{value:"follow",label:"Follow Channel"}];default:return[]}},X=()=>D.length===0?"":D.map(x=>{var L;const C=((L=G(x.platform).find(z=>z.value===x.action))==null?void 0:L.label)||x.action;return`${x.platform.toUpperCase()}: ${C} - ${x.target}`}).join(Hu.TASK_SEPARATOR),V=A=>{if(!A)return!0;if(A.length>Hu.MAX_DESCRIPTION_LENGTH)return console.warn(`Task description too long (max ${Hu.MAX_DESCRIPTION_LENGTH} characters)`),!1;const x=A.split(Hu.TASK_SEPARATOR).length;return x>Hu.MAX_TASKS?(console.warn(`Too many tasks (${x}/${Hu.MAX_TASKS})`),!1):!0};return Ae.useEffect(()=>{if(_){const A=X();V(A)?s("socialTaskDescription",A):console.warn("Generated task description failed validation")}else s("socialTaskDescription","")},[D,_]),i.jsxs(i.Fragment,{children:[l?i.jsx("div",{className:`p-4 bg-card/50 rounded-xl border border-border/50 mb-4 shadow-sm ${v?"opacity-60":""}`,children:i.jsxs("div",{className:`flex items-center justify-between gap-4 transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-lg p-1 -m-1 ${v?"cursor-not-allowed":"cursor-pointer hover:bg-muted/10 active:bg-muted/20"}`,onClick:()=>!v&&P(!_),onKeyDown:A=>{!v&&(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),P(!_))},tabIndex:v?-1:0,role:v?void 0:"button","aria-label":`${_?"Disable":"Enable"} social media tasks`,children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{className:`font-medium block text-base mb-1 ${v?"cursor-not-allowed":"cursor-pointer"}`,children:["Enable Social Media Tasks",w?i.jsx("span",{className:"ml-2 text-base font-medium text-muted-foreground",children:"(Task assignments paused)"}):!m&&f&&i.jsxs("span",{className:"ml-2 text-base font-medium",children:["(Costs ",Zt(f)," ",c(),")"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Require participants to complete social media engagement tasks"})]}),i.jsx(hn,{className:`h-6 w-6 transition-colors duration-200 ${v?"text-muted-foreground/20":_?"text-green-600":"text-muted-foreground/40"}`})]})}):i.jsx("div",{className:"mb-2",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zB,{checked:_,onCheckedChange:P,disabled:v,size:"default"}),i.jsx("div",{className:`flex-1 transition-colors duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ${v?"cursor-not-allowed":"cursor-pointer hover:text-foreground/80 active:text-foreground"}`,onClick:()=>!v&&P(!_),onKeyDown:A=>{!v&&(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),P(!_))},tabIndex:v?-1:0,role:v?void 0:"button","aria-label":`${_?"Disable":"Enable"} social media tasks`,children:i.jsxs("label",{className:`font-medium block text-sm ${v?"cursor-not-allowed":"cursor-pointer"}`,children:["Enable Social Media Tasks",w?i.jsx("span",{className:"ml-2 text-sm font-medium text-muted-foreground",children:"(Task assignments paused)"}):!m&&f&&i.jsxs("span",{className:"ml-2 text-sm font-medium",children:["(Costs ",Zt(f)," ",c(),")"]})]})})]})}),_&&i.jsx("div",{className:"p-4 border rounded-lg bg-muted/10 mb-4",children:i.jsxs("div",{className:"space-y-4",children:[D.map((A,x)=>i.jsxs("div",{className:"p-3 border rounded-lg bg-background/50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[Y(A.platform),i.jsxs("span",{className:"font-medium text-sm",children:["Task ",x+1]})]}),i.jsx("button",{type:"button",onClick:()=>U(A.id),className:"text-red-500 hover:text-red-700 transition-colors",children:i.jsx(Uh,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:`${l?"space-y-3":"grid grid-cols-1 md:grid-cols-3 gap-3"}`,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-medium mb-1 text-sm",children:"Platform"}),i.jsxs(Cd,{value:A.platform,onValueChange:C=>K(A.id,"platform",C),children:[i.jsx(Ed,{className:`w-full border border-border rounded-lg bg-background ${l?"px-3 py-2 text-base h-10":"px-3 py-2 text-sm"}`,children:i.jsx(Sd,{})}),i.jsxs(_d,{children:[i.jsx(Ds,{value:"twitter",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wd,{className:"h-4 w-4"}),"Twitter"]})}),i.jsx(Ds,{value:"discord",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ld,{className:"h-4 w-4"}),"Discord"]})}),i.jsx(Ds,{value:"telegram",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ig,{className:"h-4 w-4"}),"Telegram"]})})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-medium mb-1 text-sm",children:"Action"}),i.jsxs(Cd,{value:A.action,onValueChange:C=>K(A.id,"action",C),children:[i.jsx(Ed,{className:`w-full border border-border rounded-lg bg-background ${l?"px-3 py-2 text-base h-10":"px-3 py-2 text-sm"}`,children:i.jsx(Sd,{})}),i.jsx(_d,{children:G(A.platform).map(C=>i.jsx(Ds,{value:C.value,children:C.label},C.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-medium mb-1 text-sm",children:"Target"}),i.jsx("input",{type:"text",value:A.target,onChange:C=>K(A.id,"target",C.target.value),className:`w-full border border-border rounded-lg bg-background ${l?"px-3 py-2 text-base":"px-3 py-2 text-sm"}`,placeholder:A.platform==="twitter"?"@username or tweet URL":A.platform==="discord"?"Server invite or message URL":"Channel username or URL",required:o&&_})]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsx("label",{className:"block font-medium mb-1 text-sm",children:"Description (Optional)"}),i.jsx("input",{type:"text",value:A.description,onChange:C=>K(A.id,"description",C.target.value),className:`w-full border border-border rounded-lg bg-background ${l?"px-3 py-2 text-base":"px-3 py-2 text-sm"}`,placeholder:"Additional instructions for participants"})]})]},A.id)),i.jsxs("button",{type:"button",onClick:$,disabled:D.length>=Fu,className:`w-full p-3 border-2 border-dashed rounded-lg flex items-center justify-center gap-2 transition-colors ${D.length>=Fu?"border-border/50 bg-muted/10 text-muted-foreground/50 cursor-not-allowed":"border-border hover:border-primary/50 hover:bg-muted/20 text-muted-foreground hover:text-foreground cursor-pointer"}`,children:[i.jsx(Yr,{className:"h-4 w-4"}),D.length>=Fu?`Maximum ${Fu} tasks reached`:`Add Social Media Task (${D.length}/${Fu})`]}),D.length>0&&i.jsxs("div",{className:"mt-4 p-3 bg-muted/20 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-sm mb-2",children:"Task Summary:"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:X()||"No tasks configured"})]})]})})]})},Xo=({formData:t,handleChange:e,isMobile:n=!1})=>{const[r,s]=k.useState(!1),o=c=>{const{name:u,value:f}=c.target;e(u,f)},a=`w-full px-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground ${n?"text-base":""}`,l="block text-base font-medium text-foreground mb-2";return i.jsxs("div",{className:"bg-card rounded-lg border border-border overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>s(!r),className:"w-full flex items-center justify-between px-4 py-3 hover:bg-muted/50 transition-colors",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("h3",{className:"font-semibold text-base text-foreground",children:"Pool Information (Optional)"})}),r?i.jsx(qg,{className:"h-5 w-5 text-muted-foreground"}):i.jsx(Ii,{className:"h-5 w-5 text-muted-foreground"})]}),i.jsx("div",{className:`transition-all duration-300 ease-in-out ${r?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"} overflow-hidden`,children:i.jsxs("div",{className:"px-6 pb-6 space-y-6 border-t border-border pt-6",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"description",className:l,children:["Description",i.jsx("span",{className:"text-muted-foreground text-xs ml-2",children:"(Max 1000 characters)"})]}),i.jsx("textarea",{id:"description",name:"description",value:t.description||"",onChange:o,placeholder:"Describe your raffle, prizes, or any special details...",maxLength:1e3,rows:4,className:`${a} resize-none`}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[(t.description||"").length," / 1000"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Social Media Links"}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"twitterLink",className:l,children:["Twitter / X",i.jsx("span",{className:"text-muted-foreground text-xs ml-2",children:"(Max 200 characters)"})]}),i.jsx("input",{type:"url",id:"twitterLink",name:"twitterLink",value:t.twitterLink||"",onChange:o,placeholder:"https://twitter.com/yourhandle or https://x.com/yourhandle",maxLength:200,className:a})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"discordLink",className:l,children:["Discord",i.jsx("span",{className:"text-muted-foreground text-xs ml-2",children:"(Max 200 characters)"})]}),i.jsx("input",{type:"url",id:"discordLink",name:"discordLink",value:t.discordLink||"",onChange:o,placeholder:"https://discord.gg/yourinvite",maxLength:200,className:a})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"telegramLink",className:l,children:["Telegram",i.jsx("span",{className:"text-muted-foreground text-xs ml-2",children:"(Max 200 characters)"})]}),i.jsx("input",{type:"url",id:"telegramLink",name:"telegramLink",value:t.telegramLink||"",onChange:o,placeholder:"https://t.me/yourchannel",maxLength:200,className:a})]})]}),i.jsxs("div",{className:"text-xs text-muted-foreground bg-muted p-3 rounded-lg",children:[i.jsx(lt,{className:"h-3 w-3 inline mr-1"}),"These fields are optional but recommended. They help participants learn more about your project and connect with your community."]})]})})]})},Ppe=({isOpen:t,onToggle:e,raffleType:n,setRaffleType:r,nftStandard:s,setNftStandard:o,erc721Source:a,setErc721Source:l,erc1155Source:c,setErc1155Source:u,className:f=""})=>{const{isMobile:p}=Ln(),{getCurrencySymbol:m}=er(),w=(()=>{const[X,V]=k.useState({top:56,height:56});return k.useEffect(()=>{const A=document.querySelector("header"),x=A?A.getBoundingClientRect().height:56,C=()=>window.matchMedia&&window.matchMedia("(max-width: 640px)").matches,L=()=>{const z=window.scrollY||window.pageYOffset||0;C()?V({top:x,height:window.innerHeight-x}):z>=x?V({top:0,height:window.innerHeight}):V({top:x-z,height:window.innerHeight-(x-z)})};return L(),window.addEventListener("scroll",L,{passive:!0}),window.addEventListener("resize",L),()=>{window.removeEventListener("scroll",L),window.removeEventListener("resize",L)}},[]),X})(),[y,T]=k.useState({raffleType:!0,nftConfiguration:!0,collectionSource:!0}),j=k.useMemo(()=>{const X=m();return[{value:"Whitelist/Allowlist",label:"Whitelist/Allowlist",description:"Whitelist Campaigns"},{value:"NFTDrop",label:"NFT Drop",description:"Raffles with Mintable NFT Prizes"},{value:"Lucky Sale/NFT Pool",label:"Lucky Sale/NFT Giveaway",description:"Discounted NFT sales/NFT Giveaways"},{value:"Native Token Pool",label:`${X} Giveaway`,description:"Native Coin Giveaways"},{value:"ERC20 Token Pool",label:"ERC20 Token Giveaway",description:"Token Giveaways"}]},[m]),_=k.useMemo(()=>n==="Lucky Sale/NFT Pool"?[{value:"ERC721",label:"ERC721"}]:[{value:"ERC721",label:"ERC721"},{value:"ERC1155",label:"ERC1155"}],[n]),v=[{value:"Existing ERC721 Collection",label:"ERC721 Collection",description:"Drop Event for ERC721 Collections"}],P=[{value:"Existing ERC1155 Collection",label:"ERC1155 Collection",description:"Drop Event for ERC1155 Collections"}],D=k.useCallback(X=>{T(V=>({...V,[X]:!V[X]}))},[]),$=k.useCallback(()=>{r("Whitelist/Allowlist"),o("ERC721"),l("Existing ERC721 Collection"),u("Existing ERC1155 Collection")},[r,o,l,u]),U=k.useMemo(()=>n!=="Whitelist/Allowlist"||s!=="ERC721"||a!=="Existing ERC721 Collection"||c!=="Existing ERC1155 Collection",[n,s,a,c]),K=n==="NFTDrop"||n==="Lucky Sale/NFT Pool",Y=n==="NFTDrop",G=k.useCallback((X,V,A,x,C,L=!1)=>{const z=y[V];return i.jsxs("div",{className:"border-b border-border/30 last:border-b-0",children:[i.jsxs("button",{onClick:()=>D(V),className:"w-full flex items-center justify-between p-3 sm:p-4 text-left hover:bg-muted/50 transition-colors",disabled:L,children:[i.jsx("span",{className:`text-sm sm:text-base font-medium ${L?"text-muted-foreground":""}`,children:X}),z?i.jsx(qg,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-muted-foreground"}):i.jsx(Ii,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-muted-foreground"})]}),z&&!L&&i.jsx("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4 space-y-1 sm:space-y-2",children:A.map(R=>{const I=x===R.value;return i.jsxs("label",{className:"flex items-start space-x-2 sm:space-x-3 cursor-pointer hover:bg-muted/30 p-1.5 sm:p-2 rounded-md transition-colors",children:[i.jsx("input",{type:"radio",name:V,checked:I,onChange:()=>C(R.value),className:`mt-1 h-3 w-3 sm:h-4 sm:w-4 text-primary bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-full focus:ring-0 focus:outline-none checked:bg-primary checked:border-primary appearance-none relative ${I?'after:content-[""] after:absolute after:top-1/2 after:left-1/2 after:transform after:-translate-x-1/2 after:-translate-y-1/2 after:w-1 after:h-1 sm:after:w-1.5 sm:after:h-1.5 after:bg-white after:rounded-full':""}`,style:{minHeight:"12px",minWidth:"12px",maxHeight:"12px",maxWidth:"12px"}}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium leading-tight",children:R.label}),R.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:R.description})]})]},R.value)})}),L&&i.jsx("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4",children:i.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Select appropriate raffle type to enable this filter"})})]},V)},[y,D]);return i.jsxs(i.Fragment,{children:[t&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:e}),i.jsxs("div",{style:{top:w.top,height:w.height},className:`
        fixed left-0
        w-64 sm:w-72 md:w-80
        bg-background border-r border-border
        transform transition-transform duration-300 ease-in-out
        z-40
        flex flex-col
        ${t?"translate-x-0":"-translate-x-full"}
        ${f}
      `,children:[i.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-3 sm:p-4 border-b border-border bg-muted/80 backdrop-blur supports-[backdrop-filter]:bg-muted/60",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Z6,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),i.jsx("h2",{className:"font-semibold text-base sm:text-lg",children:"Create Raffle"})]}),i.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[U&&i.jsx(we,{variant:"ghost",size:"sm",onClick:$,className:"text-xs px-2 sm:px-3 h-7 sm:h-8 hover:bg-destructive/10 hover:text-destructive",children:"Reset"}),i.jsx(we,{variant:"ghost",size:"sm",onClick:e,className:"hover:bg-muted h-7 w-7 sm:h-8 sm:w-8 p-0",title:"Close filters",children:i.jsx(vi,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]}),i.jsx("div",{className:"p-3 sm:p-4 bg-muted/30",children:i.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Configure Raffle type and Prizes"})}),i.jsxs("div",{className:"flex-1 overflow-y-auto",children:[G("Raffle Type","raffleType",j,n,r),K&&G("NFT Standard","nftConfiguration",_,s,o),Y&&s==="ERC721"&&G("ERC721 Source","collectionSource",v,a,l),Y&&s==="ERC1155"&&G("ERC1155 Source","collectionSource",P,c,u)]})]})]})};var[_v,v0e]=Mi("Tooltip",[Hh]),Av=Hh(),$B="TooltipProvider",Rpe=700,Y2="tooltip.open",[Ipe,JC]=_v($B),BB=t=>{const{__scopeTooltip:e,delayDuration:n=Rpe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=t,a=k.useRef(!0),l=k.useRef(!1),c=k.useRef(0);return k.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(Ipe,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:k.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:o})};BB.displayName=$B;var Cg="Tooltip",[Mpe,ry]=_v(Cg),UB=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:o,disableHoverableContent:a,delayDuration:l}=t,c=JC(Cg,t.__scopeTooltip),u=Av(e),[f,p]=k.useState(null),m=ao(),g=k.useRef(0),w=a??c.disableHoverableContent,y=l??c.delayDuration,T=k.useRef(!1),[j,_]=_a({prop:r,defaultProp:s??!1,onChange:U=>{U?(c.onOpen(),document.dispatchEvent(new CustomEvent(Y2))):c.onClose(),o==null||o(U)},caller:Cg}),v=k.useMemo(()=>j?T.current?"delayed-open":"instant-open":"closed",[j]),P=k.useCallback(()=>{window.clearTimeout(g.current),g.current=0,T.current=!1,_(!0)},[_]),D=k.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_(!1)},[_]),$=k.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{T.current=!0,_(!0),g.current=0},y)},[y,_]);return k.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),i.jsx(Aj,{...u,children:i.jsx(Mpe,{scope:e,contentId:m,open:j,stateAttribute:v,trigger:f,onTriggerChange:p,onTriggerEnter:k.useCallback(()=>{c.isOpenDelayedRef.current?$():P()},[c.isOpenDelayedRef,$,P]),onTriggerLeave:k.useCallback(()=>{w?D():(window.clearTimeout(g.current),g.current=0)},[D,w]),onOpen:P,onClose:D,disableHoverableContent:w,children:n})})};UB.displayName=Cg;var J2="TooltipTrigger",VB=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=ry(J2,n),o=JC(J2,n),a=Av(n),l=k.useRef(null),c=un(e,l,s.onTriggerChange),u=k.useRef(!1),f=k.useRef(!1),p=k.useCallback(()=>u.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),i.jsx(Pj,{asChild:!0,...a,children:i.jsx(Pt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:nt(t.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:nt(t.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:nt(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:nt(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:nt(t.onBlur,s.onClose),onClick:nt(t.onClick,s.onClose)})})});VB.displayName=J2;var XC="TooltipPortal",[Dpe,Ope]=_v(XC,{forceMount:void 0}),qB=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,o=ry(XC,e);return i.jsx(Dpe,{scope:e,forceMount:n,children:i.jsx(Vs,{present:n||o.open,children:i.jsx(Kg,{asChild:!0,container:s,children:r})})})};qB.displayName=XC;var Ih="TooltipContent",WB=k.forwardRef((t,e)=>{const n=Ope(Ih,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=t,a=ry(Ih,t.__scopeTooltip);return i.jsx(Vs,{present:r||a.open,children:a.disableHoverableContent?i.jsx(HB,{side:s,...o,ref:e}):i.jsx(Lpe,{side:s,...o,ref:e})})}),Lpe=k.forwardRef((t,e)=>{const n=ry(Ih,t.__scopeTooltip),r=JC(Ih,t.__scopeTooltip),s=k.useRef(null),o=un(e,s),[a,l]=k.useState(null),{trigger:c,onClose:u}=n,f=s.current,{onPointerInTransitChange:p}=r,m=k.useCallback(()=>{l(null),p(!1)},[p]),g=k.useCallback((w,y)=>{const T=w.currentTarget,j={x:w.clientX,y:w.clientY},_=Bpe(j,T.getBoundingClientRect()),v=Upe(j,_),P=Vpe(y.getBoundingClientRect()),D=Wpe([...v,...P]);l(D),p(!0)},[p]);return k.useEffect(()=>()=>m(),[m]),k.useEffect(()=>{if(c&&f){const w=T=>g(T,f),y=T=>g(T,c);return c.addEventListener("pointerleave",w),f.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",w),f.removeEventListener("pointerleave",y)}}},[c,f,g,m]),k.useEffect(()=>{if(a){const w=y=>{const T=y.target,j={x:y.clientX,y:y.clientY},_=(c==null?void 0:c.contains(T))||(f==null?void 0:f.contains(T)),v=!qpe(j,a);_?m():v&&(m(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,f,a,u,m]),i.jsx(HB,{...t,ref:o})}),[Fpe,zpe]=_v(Cg,{isInside:!1}),$pe=MQ("TooltipContent"),HB=k.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=t,c=ry(Ih,n),u=Av(n),{onClose:f}=c;return k.useEffect(()=>(document.addEventListener(Y2,f),()=>document.removeEventListener(Y2,f)),[f]),k.useEffect(()=>{if(c.trigger){const p=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&f()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,f]),i.jsx(Hg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:p=>p.preventDefault(),onDismiss:f,children:i.jsxs(Rj,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx($pe,{children:r}),i.jsx(Fpe,{scope:n,isInside:!0,children:i.jsx(Cee,{id:c.contentId,role:"tooltip",children:s||r})})]})})});WB.displayName=Ih;var GB="TooltipArrow",KB=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Av(n);return zpe(GB,n).isInside?null:i.jsx(Ij,{...s,...r,ref:e})});KB.displayName=GB;function Bpe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Upe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Vpe(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function qpe(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const l=e[o],c=e[a],u=l.x,f=l.y,p=c.x,m=c.y;f>r!=m>r&&n<(p-u)*(r-f)/(m-f)+u&&(s=!s)}return s}function Wpe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Hpe(e)}function Hpe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Gpe=BB,Kpe=UB,Ype=VB,Jpe=qB,Xpe=WB,Qpe=KB;function Zpe({delayDuration:t=0,...e}){return i.jsx(Gpe,{"data-slot":"tooltip-provider",delayDuration:t,...e})}function kt({...t}){return i.jsx(Zpe,{children:i.jsx(Kpe,{"data-slot":"tooltip",...t})})}const Tt=k.forwardRef(({...t},e)=>i.jsx(Ype,{ref:e,"data-slot":"tooltip-trigger",...t})),Nt=k.forwardRef(({className:t,sideOffset:e=0,children:n,...r},s)=>i.jsx(Jpe,{children:i.jsxs(Xpe,{ref:s,"data-slot":"tooltip-content",sideOffset:e,className:je("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance","max-w-[240px] sm:max-w-xs","text-xs sm:text-xs",t),...r,children:[n,i.jsx(Qpe,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})),X2=["https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/"],GI=X2.map(t=>t.replace("/ipfs/","/ipns/")),KI=["https://arweave.net/"],Q2=t=>{if(!t)return[];if(t.startsWith("ipfs://")){let e=t.replace("ipfs://","");return e.startsWith("ipfs/")&&(e=e.slice(5)),X2.map(n=>`${n}${e}`)}if(t.startsWith("ipns://")){let e=t.replace("ipns://","");return e.startsWith("ipns/")&&(e=e.slice(5)),GI.map(n=>`${n}${e}`)}if(t.startsWith("ar://")){const e=t.replace("ar://","");return KI.map(n=>`${n}${e}`)}try{const e=new URL(t),r=e.pathname.replace(/\/ipfs\/ipfs\//,"/ipfs/").split("/").filter(Boolean),s=r.indexOf("ipfs");if(s!==-1&&r[s+1]){const a=r.slice(s+1).join("/");return X2.map(l=>`${l}${a}`)}const o=r.indexOf("ipns");if(o!==-1&&r[o+1]){const a=r.slice(o+1).join("/");return GI.map(l=>`${l}${a}`)}if(e.hostname.endsWith("arweave.net")||e.hostname==="arweave.net"){const a=r.join("/");return KI.map(l=>`${l}${a}`)}}catch{}return[t]},eme=t=>{const e=["image","image_url","imageUrl","animation_url","animationUrl","media","artwork"];for(const n of e)if(t[n]){const r=t[n];if(typeof r=="string")return r.startsWith("ipfs://")||r.startsWith("ar://")?Q2(r):[r]}return null},tme=t=>{const e=[],n=/\/$/.test(t),r=t.replace(/\/$/,"");if(t.match(/\/(?:[0-9]+)(?:\.json)?$/)){e.push(t),t.includes(".json")||e.push(`${t}.json`);const o=r.replace(/\/(?:[0-9]+)(?:\.json)?$/,"");o&&o!==r&&(e.push(o),e.push(`${o}/`),e.push(`${o}.json`),e.push(`${o}/index.json`),e.push(`${o}/metadata.json`))}else e.push(t),n&&e.push(r),t.includes(".json")||(e.push(`${t}.json`),e.push(`${r}.json`)),e.push(`${t}index.json`),e.push(`${t}metadata.json`),n&&(e.push(`${r}/index.json`),e.push(`${r}/metadata.json`));return[...new Set(e)]},YB=async(t,e,n)=>{if(!t)return null;n(!0);try{const r=tme(t),s=[];for(const o of r){const a=Q2(o);s.push(...a)}for(const o of s)try{const a=await fetch(o,{headers:{Accept:"application/json, text/plain, */*"}});if(a.ok){const l=a.headers.get("content-type");try{const c=await a.text(),u=JSON.parse(c);if(u&&typeof u=="object"){const f=eme(u);if(f&&f.length>0){const p=f[0];if(p.startsWith("ipfs://")||p.startsWith("ar://")){const m=Q2(p);if(m.length>0)return e(m[0]),m[0]}return e(p),p}}}catch{if(l!=null&&l.startsWith("image/")||o.match(/\.(jpg|jpeg|png|gif|svg|webp)$/i))return e(o),o}}}catch{continue}}catch(r){console.error("Error fetching artwork:",r)}finally{n(!1)}return null},nme=()=>{const{connected:t,address:e}=an(),{contracts:n,executeTransaction:r}=xn(),s=Xh(n,!1),{extractRevertReason:o}=n3(),[a,l]=k.useState(!1),[c,u]=k.useState(!1),[f,p]=k.useState(!1),[m,g]=k.useState({name:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerParticipant:"",holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),w=(T,j)=>{g(_=>({..._,[T]:j}))},y=async T=>{var j;if(T.preventDefault(),!t||!n.poolDeployer){re.error("Please connect your wallet and ensure contracts are configured");return}l(!0);try{const _=Math.floor(new Date(m.startTime).getTime()/1e3),v=parseInt(m.duration)*60,P=c&&m.holderTokenAddress?m.holderTokenAddress:$e,D=c?parseInt(m.holderTokenStandard):0,$=c&&m.minHolderTokenBalance?ce.from(parseInt(m.minHolderTokenBalance)):ce.from(0),U=c&&m.holderTokenId?parseInt(m.holderTokenId):0,K={name:m.name,startTime:_,duration:v,slotLimit:parseInt(m.slotLimit),winnersCount:parseInt(m.winnersCount),maxSlotsPerAddress:1,isPrized:!1,customSlotFee:0,erc721Drop:!1,erc1155Drop:!0,prizeCollection:$e,standard:0,prizeTokenId:0,amountPerWinner:0,creator:e,erc20PrizeToken:$e,erc20PrizeAmount:0,nativePrizeAmount:0,holderTokenAddress:P,holderTokenStandard:D,minHolderTokenBalance:$,holderTokenBalance:$,holderTokenId:U,socialEngagementRequired:f,socialTaskDescription:f?m.socialTaskDescription:"",description:m.description||"",twitterLink:m.twitterLink||"",discordLink:m.discordLink||"",telegramLink:m.telegramLink||""};let Y=ce.from(0);f&&(Y=await n.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt(Y),"ETH"));const G=await r(n.poolDeployer.createPool,K,{value:Y});G.success?(re.success("Your raffle was created successfully!"),g({name:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxSlotsPerAddress:"",holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"",socialTaskDescription:"",socialTasks:[]}),u(!1),p(!1)):re.error(G.error||"Failed to create raffle")}catch(_){console.error("Error creating raffle:",_),(j=_.message)!=null&&j.includes("Transaction failed")||re.error(o(_))}finally{l(!1)}};return i.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 max-w-3xl mx-auto shadow-xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Ql,{className:"h-5 w-5"}),i.jsx("h3",{className:"font-display text-[length:var(--text-xl)] font-semibold",children:"Whitelist Raffle"})]}),i.jsxs("form",{onSubmit:y,className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Pool Name"}),i.jsx("input",{type:"text",value:m.name||"",onChange:T=>w("name",T.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Start Time"}),i.jsx("input",{type:"datetime-local",value:m.startTime||"",onChange:T=>w("startTime",T.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Duration (minutes)",s.minDuration&&s.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Duration Allowed: ",Math.ceil(Number(s.minDuration)/60)," min",i.jsx("br",{}),"Maximum Duration Allowed: ",Math.floor(Number(s.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",value:m.duration||"",onChange:T=>w("duration",T.target.value),onWheel:T=>T.target instanceof HTMLElement&&T.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Slot Limit",s.minSlot&&s.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Slot Limit Allowed: ",s.minSlot,i.jsx("br",{}),"Maximum Slot Limit Allowed: ",s.maxSlot]})})]})]}),i.jsx("input",{type:"number",value:m.slotLimit||"",onChange:T=>w("slotLimit",T.target.value),onWheel:T=>T.target instanceof HTMLElement&&T.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Number of Winning Slots",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Winners must not exceed 30% of your Slot Limit"})]})]}),i.jsx("input",{type:"number",value:m.winnersCount||"",onChange:T=>w("winnersCount",T.target.value),onWheel:T=>T.target instanceof HTMLElement&&T.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Each participant can only purchase one slot in Whitelist pools"})]})]}),i.jsx("input",{type:"number",value:1,disabled:!0,className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background opacity-60 cursor-not-allowed",required:!0})]})]}),i.jsx(Yo,{tokenGatedEnabled:c,onTokenGatedChange:u,formData:m,handleChange:w,required:!0}),i.jsx(Jo,{socialEngagementEnabled:f,onSocialEngagementChange:p,formData:m,handleChange:w,required:!1}),i.jsx(Xo,{formData:m,handleChange:w}),i.jsx("div",{className:"flex gap-4",children:i.jsx(we,{type:"submit",disabled:a||!t,variant:"primary",size:"lg",className:"flex-1",children:a?"Creating...":"Create Raffle"})})]})]})};function rme(){const{connected:t,address:e,provider:n}=an(),{contracts:r,executeTransaction:s}=xn(),{getCurrencyLabel:o}=er(),a=Xh(r,!0),[l,c]=k.useState(!1),[u,f]=k.useState(!1),[p,m]=k.useState(!1),[g,w]=k.useState(null),[y,T]=k.useState(!1),[j,_]=k.useState(!1),[v,P]=k.useState({name:"",collection:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerUser:"",slotFee:"",holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),D=(K,Y)=>{P(G=>({...G,[K]:Y}))};k.useEffect(()=>{(async()=>{if(!v.collection||!bn(v.collection)||!n){w(null),T(!1);return}try{const Y=new Mt(v.collection,tn.erc721Prize,n);let G=null;try{G=await Y.unrevealedBaseURI()}catch{}G&&G.trim()!==""?await YB(G,w,T):(w(null),T(!1))}catch(Y){console.error("Error querying collection URIs:",Y),w(null),T(!1)}})()},[v.collection,n]);const $=()=>{_(!0),T(!1)},U=async K=>{if(K.preventDefault(),!t||!r.poolDeployer||!n){re.error("Please connect your wallet and ensure contracts are configured");return}c(!0);try{const Y=n.getSigner(),G=Math.floor(new Date(v.startTime).getTime()/1e3),X=parseInt(v.duration)*60,V=v.slotFee?ac(v.slotFee):0,A=u&&v.holderTokenAddress?v.holderTokenAddress:$e,x=u?parseInt(v.holderTokenStandard):0,C=u&&v.minHolderTokenBalance?ce.from(parseInt(v.minHolderTokenBalance)):ce.from(0),L=u&&v.holderTokenId?parseInt(v.holderTokenId):0,z={name:v.name,startTime:G,duration:X,slotLimit:parseInt(v.slotLimit),winnersCount:parseInt(v.winnersCount),maxSlotsPerAddress:parseInt(v.maxTicketsPerUser),isPrized:!0,customSlotFee:V,erc721Drop:!0,erc1155Drop:!1,prizeCollection:v.collection,standard:0,prizeTokenId:0,amountPerWinner:1,creator:e,erc20PrizeToken:$e,erc20PrizeAmount:0,nativePrizeAmount:0,holderTokenAddress:A,holderTokenStandard:x,minHolderTokenBalance:C,holderTokenBalance:u&&v.minHolderTokenBalance?ce.from(parseInt(v.minHolderTokenBalance)):ce.from(0),holderTokenId:L,socialEngagementRequired:p,socialTaskDescription:p?v.socialTaskDescription:"",description:v.description||"",twitterLink:v.twitterLink||"",discordLink:v.discordLink||"",telegramLink:v.telegramLink||""};let R=ce.from(0);p&&(R=await r.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt(R),"ETH")),await(await r.poolDeployer.connect(Y).createPool(z,{value:R})).wait(),re.success("Your raffle was created successfully!"),P({name:"",collection:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerUser:"",slotFee:"",holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:""}),f(!1)}catch(Y){console.error("Error creating raffle:",Y),re.error(Pv(Y))}finally{c(!1)}};return i.jsxs("div",{className:"relative",children:[g&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:g,alt:"Collection artwork",onLoad:$,onError:()=>{T(!1),w(null)},style:{display:"none"}}),i.jsx("div",{className:"fixed inset-0 top-0 left-0 w-full h-1/2 opacity-40 pointer-events-none z-0",style:{backgroundImage:`url(${g})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(0.5px) brightness(1.2) contrast(1.1)"}})]}),y&&i.jsx("div",{className:"fixed inset-0 top-0 left-0 w-full h-1/2 flex items-center justify-center pointer-events-none z-20",children:i.jsxs("div",{className:"bg-background/90 backdrop-blur-sm rounded-lg px-4 py-3 flex items-center gap-3 shadow-lg",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-primary border-t-transparent"}),i.jsx("span",{className:"text-sm font-medium",children:"Loading artwork..."})]})}),i.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 max-w-3xl mx-auto shadow-xl relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Ho,{className:"h-5 w-5"}),i.jsx("h3",{className:"font-display text-[length:var(--text-xl)] font-semibold",children:"ERC721 Drop Event"})]}),i.jsxs("form",{onSubmit:U,className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Pool Name"}),i.jsx("input",{type:"text",value:v.name||"",onChange:K=>D("name",K.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Collection Address"}),i.jsx("input",{type:"text",placeholder:"0x...",value:v.collection,onChange:K=>D("collection",K.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background font-mono",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Start Time"}),i.jsx("input",{type:"datetime-local",value:v.startTime||"",onChange:K=>D("startTime",K.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Duration (minutes)",a.minDuration&&a.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Duration Allowed: ",Math.ceil(Number(a.minDuration)/60)," min",i.jsx("br",{}),"Maximum Duration Allowed: ",Math.floor(Number(a.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",min:"1",value:v.duration||"",onChange:K=>D("duration",K.target.value),onWheel:K=>K.target instanceof HTMLElement&&K.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Slot Limit",a.minSlot&&a.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Slot Limit Allowed: ",a.minSlot,i.jsx("br",{}),"Maximum Slot Limit Allowed: ",a.maxSlot]})})]})]}),i.jsx("input",{type:"number",min:"1",value:v.slotLimit||"",onChange:K=>D("slotLimit",K.target.value),onWheel:K=>K.target instanceof HTMLElement&&K.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Number of Winning Slots",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Winners must not exceed 30% of your Slot Limit"})]})]}),i.jsx("input",{type:"number",value:v.winnersCount||"",onChange:K=>D("winnersCount",K.target.value),onWheel:K=>K.target instanceof HTMLElement&&K.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Max Slots Per Address must not exceed 0.1% of your Slot Limit"})]})]}),i.jsx("input",{type:"number",min:"1",value:v.maxTicketsPerUser||"",onChange:K=>D("maxTicketsPerUser",K.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:[o("ticket")," ",i.jsx("span",{className:"font-normal text-xs text-muted-foreground",children:"(Enter 0 for NFT giveaway)"})]}),i.jsx("input",{type:"number",min:"0",step:"any",value:v.slotFee||"",onChange:K=>D("slotFee",K.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsx(Yo,{tokenGatedEnabled:u,onTokenGatedChange:f,formData:v,handleChange:D,required:!0}),i.jsx(Jo,{formData:v,handleChange:D,socialEngagementEnabled:p,setSocialEngagementEnabled:m}),i.jsx(Xo,{formData:v,handleChange:D}),i.jsx("div",{className:"flex gap-4",children:i.jsx(we,{type:"submit",disabled:l||!t,variant:"primary",size:"lg",className:"flex-1",children:l?"Creating...":"Create Raffle"})})]})]})]})}function sme(){const{connected:t,address:e,provider:n}=an(),{contracts:r}=xn(),{getCurrencyLabel:s}=er(),o=Xh(r,!0),[a,l]=k.useState(!1),[c,u]=k.useState(!1),[f,p]=k.useState(null),[m,g]=k.useState(!1),[w,y]=k.useState(!1),[T,j]=k.useState({name:"",collectionAddress:"",tokenId:"",amountPerWinner:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxSlotsPerAddress:"",slotFee:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),_=(D,$)=>{j(U=>({...U,[D]:$}))};k.useEffect(()=>{(async()=>{if(!T.collectionAddress||!bn(T.collectionAddress)||!n){p(null),g(!1);return}try{const $=new Mt(T.collectionAddress,tn.erc1155Prize,n);let U=null;try{U=await $.getUnrevealedURI()}catch{}U&&U.trim()!==""?await YB(U,p,g):(p(null),g(!1))}catch($){console.error("Error querying collection URIs:",$),p(null),g(!1)}})()},[T.collectionAddress,n]);const v=()=>{y(!0),g(!1)},P=async D=>{if(D.preventDefault(),!t||!r.poolDeployer||!n){re.error("Please connect your wallet and ensure contracts are configured");return}l(!0);try{const $=n.getSigner(),U=Math.floor(new Date(T.startTime).getTime()/1e3),K=parseInt(T.duration)*60,Y=T.slotFee&&T.slotFee!==""?ac(String(T.slotFee)):0,G={name:T.name,startTime:U,duration:K,slotLimit:parseInt(T.slotLimit),winnersCount:parseInt(T.winnersCount),maxSlotsPerAddress:parseInt(T.maxSlotsPerAddress),isPrized:!0,customSlotFee:Y,erc721Drop:!1,erc1155Drop:!0,prizeCollection:T.collectionAddress,standard:1,prizeTokenId:parseInt(T.tokenId),amountPerWinner:parseInt(T.amountPerWinner),creator:e,erc20PrizeToken:$e,erc20PrizeAmount:0,nativePrizeAmount:0,holderTokenAddress:T.tokenGatedEnabled&&T.holderTokenAddress||$e,holderTokenStandard:T.tokenGatedEnabled?parseInt(T.holderTokenStandard):0,minHolderTokenBalance:T.tokenGatedEnabled&&T.minHolderTokenBalance!==""?ce.from(parseInt(T.minHolderTokenBalance)):ce.from(0),holderTokenBalance:T.tokenGatedEnabled&&T.minHolderTokenBalance!==""?ce.from(parseInt(T.minHolderTokenBalance)):ce.from(0),holderTokenId:T.tokenGatedEnabled&&(T.holderTokenStandard==="0"||T.holderTokenStandard==="1")&&T.holderTokenId!==""?parseInt(T.holderTokenId):0,socialEngagementRequired:c,socialTaskDescription:c?T.socialTaskDescription:"",description:T.description||"",twitterLink:T.twitterLink||"",discordLink:T.discordLink||"",telegramLink:T.telegramLink||""};let X=ce.from(0);c&&(X=await r.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt(X),"ETH")),await(await r.poolDeployer.connect($).createPool(G,{value:X})).wait(),re.success("Your raffle was created successfully!"),j({name:"",collectionAddress:"",tokenId:"",amountPerWinner:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxSlotsPerAddress:"",slotFee:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:""})}catch($){console.error("Error creating raffle:",$),gn($)}finally{l(!1)}};return i.jsxs("div",{className:"relative",children:[f&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:f,alt:"Collection artwork",onLoad:v,onError:()=>{g(!1),p(null)},style:{display:"none"}}),i.jsx("div",{className:"fixed inset-0 top-0 left-0 w-full h-1/2 opacity-40 pointer-events-none z-0",style:{backgroundImage:`url(${f})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(0.5px) brightness(1.2) contrast(1.1)"}})]}),m&&i.jsx("div",{className:"fixed inset-0 top-0 left-0 w-full h-1/2 flex items-center justify-center pointer-events-none z-20",children:i.jsxs("div",{className:"bg-background/90 backdrop-blur-sm rounded-lg px-4 py-3 flex items-center gap-3 shadow-lg",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-primary border-t-transparent"}),i.jsx("span",{className:"text-sm font-medium",children:"Loading artwork..."})]})}),i.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 max-w-3xl mx-auto shadow-xl relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Ho,{className:"h-5 w-5"}),i.jsx("h3",{className:"font-display text-[length:var(--text-xl)] font-semibold",children:"ERC1155 Drop Event"})]}),i.jsxs("form",{onSubmit:P,className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Pool Name"}),i.jsx("input",{type:"text",value:T.name||"",onChange:D=>_("name",D.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Collection Address"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:T.collectionAddress||"",onChange:D=>_("collectionAddress",D.target.value),className:"w-full px-3 py-2.5 pr-10 text-base border border-border rounded-lg bg-background font-mono",placeholder:"0x...",required:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Prize Token ID"}),i.jsx("input",{type:"number",min:"0",value:T.tokenId||"",onChange:D=>_("tokenId",D.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Amount Per Winner"}),i.jsx("input",{type:"number",min:"1",value:T.amountPerWinner||"",onChange:D=>_("amountPerWinner",D.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Start Time"}),i.jsx("input",{type:"datetime-local",value:T.startTime||"",onChange:D=>_("startTime",D.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Duration (minutes)",o.minDuration&&o.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Duration Allowed: ",Math.ceil(Number(o.minDuration)/60)," min",i.jsx("br",{}),"Maximum Duration Allowed: ",Math.floor(Number(o.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",value:T.duration||"",onChange:D=>_("duration",D.target.value),onWheel:D=>D.target instanceof HTMLElement&&D.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Slot Limit",o.minSlot&&o.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Slot Limit Allowed: ",o.minSlot,i.jsx("br",{}),"Maximum Slot Limit Allowed: ",o.maxSlot]})})]})]}),i.jsx("input",{type:"number",value:T.slotLimit||"",onChange:D=>_("slotLimit",D.target.value),onWheel:D=>D.target instanceof HTMLElement&&D.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Number of Winning Slots",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Winners must not exceed 30% of your Slot Limit"})]})]}),i.jsx("input",{type:"number",value:T.winnersCount||"",onChange:D=>_("winnersCount",D.target.value),onWheel:D=>D.target instanceof HTMLElement&&D.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Max Slots Per Address must not exceed 0.1% of your Slot Limit"})]})]}),i.jsx("input",{type:"number",value:T.maxSlotsPerAddress||"",onChange:D=>_("maxSlotsPerAddress",D.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:s("ticket")}),i.jsx("input",{type:"number",step:"0.001",value:T.slotFee||"",onChange:D=>_("slotFee",D.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",placeholder:"Leave empty to use protocol default"})]})]}),i.jsx(Yo,{formData:T,handleChange:_,required:!0,useFormDataEnabled:!0}),i.jsx(Jo,{formData:T,handleChange:_,socialEngagementEnabled:c,setSocialEngagementEnabled:u}),i.jsx(Xo,{formData:T,handleChange:_}),i.jsx("div",{className:"flex gap-4",children:i.jsx(we,{type:"submit",disabled:a||!t,variant:"primary",size:"lg",className:"flex-1 text-base h-12",children:a?"Creating...":"Create Raffle"})})]})]})]})}const ime=()=>{const{connected:t,chainId:e}=an(),{contracts:n}=xn();er();const r=()=>{if(!e||!jt[e])return!1;const G=jt[e].contractAddresses;return(G==null?void 0:G.poolDeployer)&&G.poolDeployer!=="0x..."&&(G==null?void 0:G.protocolManager)&&G.protocolManager!=="0x..."},[s,o]=k.useState(null),[a,l]=k.useState("Whitelist/Allowlist"),[c,u]=k.useState("ERC721"),[f,p]=k.useState("New ERC721 Collection"),[m,g]=k.useState("Internal NFT Prize"),[w,y]=k.useState("Internal NFT Prize"),[T,j]=k.useState("Internal NFT Prize"),[_,v]=k.useState("New ERC1155 Collection"),[P,D]=k.useState(""),[$,U]=k.useState(!1);k.useEffect(()=>{(async()=>{if(a==="NFTDrop"&&c==="ERC721"&&f==="Existing ERC721 Collection"&&n.protocolManager)try{const X=await n.protocolManager.toggleAllowExistingCollection();o(!!X)}catch{o(!1)}})()},[a,c,f,n.protocolManager]),k.useEffect(()=>{a==="NFTDrop"&&c==="ERC721"&&p("Existing ERC721 Collection")},[a,c]),k.useEffect(()=>{a==="NFTDrop"&&c==="ERC1155"&&v("Existing ERC1155 Collection")},[a,c]),k.useEffect(()=>{a==="NFTDrop"&&c==="ERC721"&&f==="New ERC721 Collection"&&D("")},[a,c,f]);const K=()=>{if(a==="Whitelist/Allowlist")return i.jsx(nme,{});if(a==="NFTDrop"){if(c==="ERC721"&&f==="Existing ERC721 Collection")return i.jsx(rme,{collectionAddress:P,setCollectionAddress:D});if(c==="ERC1155"&&_==="Existing ERC1155 Collection")return i.jsx(sme,{})}if(a==="Lucky Sale/NFT Pool"){if(c==="ERC721")return i.jsx(YI,{});if(c==="ERC1155")return i.jsx(YI,{})}return a==="Native Token Pool"?i.jsx(ome,{}):a==="ERC20 Token Pool"?i.jsx(ame,{}):null},{isMobile:Y}=Ln();return t?r()?i.jsx("div",{className:"min-h-screen bg-background pb-6",children:i.jsxs("div",{className:`${Y?"px-4":"container mx-auto px-8"} pt-8 pb-4`,children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:`text-3xl font-bold mb-4 font-display ${Y?"text-2xl mb-2":""}`,children:"Create an onchain raffle pool for your community"}),i.jsxs("p",{className:"text-muted-foreground text-[length:var(--text-base)] leading-relaxed",children:["Click ",i.jsx("a",{href:"#",onClick:G=>{G.preventDefault(),U(!0)},className:"text-primary hover:text-primary/90 no-underline font-medium transition-colors",children:"here"})," to configure your pool"]})]}),i.jsx("div",{className:`max-w-7xl mx-auto ${Y?"mt-6":"mt-16"}`,children:Y?i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"w-full",children:K()})}):i.jsx("div",{className:"flex gap-2 items-start",children:i.jsx("div",{className:"flex-1",children:K()})})}),i.jsx(Ppe,{isOpen:$,onToggle:()=>U(!$),raffleType:a,setRaffleType:l,nftStandard:c,setNftStandard:u,erc721Source:f,setErc721Source:p,erc1155Source:_,setErc1155Source:v})]})}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsx(Nv,{error:"CONTRACTS_NOT_AVAILABLE",onRetry:null,isMobile:Y,showCreateButton:!1})}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Yr,{className:`mx-auto mb-4 text-muted-foreground ${Y?"h-12 w-12":"h-16 w-16"}`}),i.jsx("h2",{className:`font-bold mb-2 ${Y?"text-xl":"text-2xl"}`,children:"Connect Your Wallet"}),i.jsx("p",{className:`text-muted-foreground ${Y?"text-sm":"text-base"}`,children:"Please connect your wallet to create pools and deploy collections."})]})})};function YI(){const{connected:t,address:e,provider:n}=an(),{contracts:r}=xn(),{isMobile:s}=Ln(),{getCurrencyLabel:o}=er(),a=Xh(r,!0),[l,c]=k.useState(!1),[u,f]=k.useState(!1),[p,m]=k.useState({name:"",collectionAddress:"",tokenId:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerParticipant:"",slotFee:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),g=(y,T)=>{m(j=>({...j,[y]:T}))},w=async y=>{if(y.preventDefault(),!t||!r.poolDeployer||!n){re.error("Please connect your wallet and ensure contracts are configured");return}c(!0);try{const T=n.getSigner(),j=await JB({signer:T,tokenAddress:p.collectionAddress,prizeType:"erc721",spender:r.poolDeployer.address,tokenId:p.tokenId});if(!j.success){re.error("Token approval failed: "+j.error),c(!1);return}j.alreadyApproved||(re.success("ERC721 approval successful!"),await new Promise(K=>setTimeout(K,2e3)));const _=Math.floor(new Date(p.startTime).getTime()/1e3),v=parseInt(p.duration)*60,P=p.slotFee?ac(p.slotFee):0,D={name:p.name,startTime:_,duration:v,slotLimit:parseInt(p.slotLimit),winnersCount:parseInt(p.winnersCount),maxSlotsPerAddress:parseInt(p.maxSlotsPerAddress),isPrized:!0,customSlotFee:P,erc721Drop:!1,prizeCollection:p.collectionAddress,standard:0,prizeTokenId:parseInt(p.tokenId),amountPerWinner:1,collectionBaseURI:"",creator:e,erc20PrizeToken:$e,erc20PrizeAmount:0,nativePrizeAmount:0,holderTokenAddress:p.tokenGatedEnabled?p.holderTokenAddress:$e,holderTokenStandard:p.tokenGatedEnabled?parseInt(p.holderTokenStandard):0,minHolderTokenBalance:p.tokenGatedEnabled&&p.minHolderTokenBalance!==""&&p.minHolderTokenBalance!==void 0?ce.from(parseInt(p.minHolderTokenBalance)):ce.from(0),holderTokenBalance:p.tokenGatedEnabled&&p.minHolderTokenBalance!==""&&p.minHolderTokenBalance!==void 0?ce.from(parseInt(p.minHolderTokenBalance)):ce.from(0),holderTokenId:p.tokenGatedEnabled&&(p.holderTokenStandard==="0"||p.holderTokenStandard==="1")&&p.holderTokenId!==""&&p.holderTokenId!==void 0?parseInt(p.holderTokenId):0,socialEngagementRequired:u,socialTaskDescription:u?p.socialTaskDescription:"",description:p.description||"",twitterLink:p.twitterLink||"",discordLink:p.discordLink||"",telegramLink:p.telegramLink||""};let $=ce.from(0);u&&($=await r.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt($),"ETH")),await(await r.poolDeployer.connect(T).createPool(D,{value:$})).wait(),re.success("Your raffle was created successfully!"),m({name:"",collectionAddress:"",tokenId:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerParticipant:"",slotFee:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0"})}catch(T){console.error("Error creating raffle:",T),re.error(Pv(T))}finally{c(!1)}};return i.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 max-w-3xl mx-auto shadow-xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Ca,{className:"h-5 w-5"}),i.jsx("h3",{className:`font-semibold ${s?"text-lg":"text-xl"}`,children:"NFT Lucky Sale Event (Escrowed ERC721)"})]}),i.jsxs("form",{onSubmit:w,className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Pool Name"}),i.jsx("input",{type:"text",value:p.name||"",onChange:y=>g("name",y.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Prize Collection Address"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:p.collectionAddress||"",onChange:y=>g("collectionAddress",y.target.value),className:"w-full px-3 py-2.5 text-base border border-border rounded-lg bg-background font-mono",placeholder:"0x...",required:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Prize Token ID"}),i.jsx("input",{type:"number",min:"0",value:p.tokenId||"",onChange:y=>g("tokenId",y.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Start Time"}),i.jsx("input",{type:"datetime-local",value:p.startTime||"",onChange:y=>g("startTime",y.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Duration (minutes)",a.minDuration&&a.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Duration Allowed: ",Math.ceil(Number(a.minDuration)/60)," min",i.jsx("br",{}),"Maximum Duration Allowed: ",Math.floor(Number(a.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",value:p.duration||"",onChange:y=>g("duration",y.target.value),onWheel:y=>y.target instanceof HTMLElement&&y.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Slot Limit",a.minSlot&&a.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Slot Limit Allowed: ",a.minSlot,i.jsx("br",{}),"Maximum Slot Limit Allowed: ",a.maxSlot]})})]})]}),i.jsx("input",{type:"number",value:p.slotLimit||"",onChange:y=>g("slotLimit",y.target.value),onWheel:y=>y.target instanceof HTMLElement&&y.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Number of Winning Slots",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"This raffle type supports only one Winner"})]})]}),i.jsx("input",{type:"number",value:p.winnersCount||"",onChange:y=>g("winnersCount",y.target.value),onWheel:y=>y.target instanceof HTMLElement&&y.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Max Slots Per Address must not exceed 0.1% of your Slot Limit"})]})]}),i.jsx("input",{type:"number",value:p.maxSlotsPerAddress||"",onChange:y=>g("maxSlotsPerAddress",y.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:[o("ticket")," ",i.jsx("span",{className:"font-normal text-xs text-muted-foreground",children:"(Enter 0 for NFT giveaway)"})]}),i.jsx("input",{type:"number",step:"any",value:p.slotFee||"",onChange:y=>g("slotFee",y.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsx(Yo,{formData:p,handleChange:g,required:!0,useFormDataEnabled:!0}),i.jsx(Jo,{formData:p,handleChange:g,socialEngagementEnabled:u,setSocialEngagementEnabled:f}),i.jsx(Xo,{formData:p,handleChange:g}),i.jsx("div",{className:"flex gap-4",children:i.jsx(we,{type:"submit",disabled:l||!t,variant:"primary",size:"lg",className:"flex-1 text-base h-12",children:l?"Approving & Creating...":"Approve Prize & Create Raffle"})})]})]})}function ome(){const{connected:t,address:e,provider:n}=an(),{contracts:r,executeTransaction:s}=xn(),{isMobile:o}=Ln(),{getCurrencyLabel:a}=er(),l=Xh(r,!0),[c,u]=k.useState(!1),[f,p]=k.useState(!1),[m,g]=k.useState({name:"",ethAmount:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerParticipant:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),w=(T,j)=>{g(_=>({..._,[T]:j}))},y=async T=>{if(T.preventDefault(),!t||!r.poolDeployer||!n){re.error("Please connect your wallet and ensure contracts are configured");return}u(!0);try{const j=n.getSigner(),_=Math.floor(new Date(m.startTime).getTime()/1e3),v=parseInt(m.duration)*60,P=m.ethAmount?ac(m.ethAmount):ce.from(0),D={name:m.name,startTime:_,duration:v,slotLimit:parseInt(m.slotLimit),winnersCount:parseInt(m.winnersCount),maxSlotsPerAddress:parseInt(m.maxSlotsPerAddress),isPrized:!0,customSlotFee:0,erc721Drop:!1,prizeCollection:$e,standard:3,prizeTokenId:0,amountPerWinner:0,creator:e,erc20PrizeToken:$e,erc20PrizeAmount:ce.from(0),nativePrizeAmount:P,holderTokenAddress:m.tokenGatedEnabled?m.holderTokenAddress:$e,holderTokenStandard:m.tokenGatedEnabled?parseInt(m.holderTokenStandard):0,minHolderTokenBalance:m.tokenGatedEnabled&&m.minHolderTokenBalance!==""&&m.minHolderTokenBalance!==void 0?ce.from(parseInt(m.minHolderTokenBalance)):ce.from(0),holderTokenBalance:m.tokenGatedEnabled&&m.minHolderTokenBalance!==""&&m.minHolderTokenBalance!==void 0?ce.from(parseInt(m.minHolderTokenBalance)):ce.from(0),holderTokenId:m.tokenGatedEnabled&&(m.holderTokenStandard==="0"||m.holderTokenStandard==="1")&&m.holderTokenId!==""&&m.holderTokenId!==void 0?parseInt(m.holderTokenId):0,socialEngagementRequired:f,socialTaskDescription:f?m.socialTaskDescription:"",description:m.description||"",twitterLink:m.twitterLink||"",discordLink:m.discordLink||"",telegramLink:m.telegramLink||""};let $=ce.from(0);f&&($=await r.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt($),"ETH"));const U=P.add($);console.log("Native prize amount:",Zt(P),"ETH"),console.log("Total value to send:",Zt(U),"ETH");let K={success:!1};try{const Y=await r.poolDeployer.connect(j).createPool(D,{value:U});K={success:!0,receipt:await Y.wait(),hash:Y.hash}}catch(Y){K={success:!1,error:Y.message}}if(K.success)re.success("Your raffle was created successfully!"),g({name:"",ethAmount:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerParticipant:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0",socialTaskDescription:"",socialTasks:[]});else throw new Error(K.error)}catch(j){console.error("Error creating raffle:",j),re.error(Pv(j))}finally{u(!1)}};return i.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 max-w-3xl mx-auto shadow-xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Ql,{className:"h-5 w-5"}),i.jsxs("h3",{className:`font-semibold ${o?"text-lg":"text-xl"}`,children:[a()," Giveaway"]})]}),i.jsxs("form",{onSubmit:y,className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Pool Name"}),i.jsx("input",{type:"text",value:m.name||"",onChange:T=>w("name",T.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:a("prize")}),i.jsx("input",{type:"number",min:"0.00000001",step:"any",value:m.ethAmount||"",onChange:T=>w("ethAmount",T.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Start Time"}),i.jsx("input",{type:"datetime-local",value:m.startTime||"",onChange:T=>w("startTime",T.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Duration (minutes)",l.minDuration&&l.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Duration Allowed: ",Math.ceil(Number(l.minDuration)/60)," min",i.jsx("br",{}),"Maximum Duration Allowed: ",Math.floor(Number(l.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",value:m.duration||"",onChange:T=>w("duration",T.target.value),onWheel:T=>T.target instanceof HTMLElement&&T.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Slot Limit",l.minSlot&&l.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Slot Limit Allowed: ",l.minSlot,i.jsx("br",{}),"Maximum Slot Limit Allowed: ",l.maxSlot]})})]})]}),i.jsx("input",{type:"number",value:m.slotLimit||"",onChange:T=>w("slotLimit",T.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Number of Winning Slots",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Winners must not exceed 30% of your Slot Limit"})]})]}),i.jsx("input",{type:"number",value:m.winnersCount||"",onChange:T=>w("winnersCount",T.target.value),onWheel:T=>T.target instanceof HTMLElement&&T.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Max Slots Per Address must not exceed 0.1% of your Slot Limit"})]})]}),i.jsx("input",{type:"number",value:m.maxSlotsPerAddress||"",onChange:T=>w("maxSlotsPerAddress",T.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]})]}),i.jsx(Yo,{formData:m,handleChange:w,required:!0,useFormDataEnabled:!0}),i.jsx(Jo,{formData:m,handleChange:w,socialEngagementEnabled:f,setSocialEngagementEnabled:p}),i.jsx(Xo,{formData:m,handleChange:w}),i.jsx("div",{className:"flex gap-4",children:i.jsx(we,{type:"submit",disabled:c||!t,variant:"primary",size:"lg",className:"flex-1 text-base h-12",children:c?"Creating...":"Create Raffle"})})]})]})}function ame(){const{connected:t,address:e,provider:n}=an(),{contracts:r}=xn(),{isMobile:s}=Ln(),o=Xh(r,!0),[a,l]=k.useState(!1),[c,u]=k.useState(!1),[f,p]=k.useState({name:"",tokenAddress:"",tokenAmount:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxSlotsPerAddress:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),m=(w,y)=>{p(T=>({...T,[w]:y}))},g=async w=>{if(w.preventDefault(),!t||!r.poolDeployer||!n){re.error("Please connect your wallet and ensure contracts are configured");return}l(!0);try{const y=n.getSigner(),T=await JB({signer:y,tokenAddress:f.tokenAddress,prizeType:"erc20",spender:r.poolDeployer.address,amount:f.tokenAmount});if(!T.success){re.error("Token approval failed: "+T.error),l(!1);return}T.alreadyApproved||(re.success("Token approval granted"),await new Promise(K=>setTimeout(K,2e3)));const j=await new Mt(f.tokenAddress,tn.erc20,y).decimals(),_=Math.floor(new Date(f.startTime).getTime()/1e3),v=parseInt(f.duration)*60,P=f.tokenAmount?xh(f.tokenAmount,j):ce.from(0),D={name:f.name,startTime:_,duration:v,slotLimit:parseInt(f.slotLimit),winnersCount:parseInt(f.winnersCount),maxSlotsPerAddress:parseInt(f.maxSlotsPerAddress),isPrized:!0,customSlotFee:ce.from(0),erc721Drop:!1,prizeCollection:$e,standard:2,prizeTokenId:0,amountPerWinner:0,creator:e,erc20PrizeToken:f.tokenAddress,erc20PrizeAmount:P,nativePrizeAmount:ce.from(0),holderTokenAddress:f.tokenGatedEnabled?f.holderTokenAddress:$e,holderTokenStandard:f.tokenGatedEnabled?parseInt(f.holderTokenStandard):0,minHolderTokenBalance:f.tokenGatedEnabled&&f.minHolderTokenBalance!==""&&f.minHolderTokenBalance!==void 0?ce.from(parseInt(f.minHolderTokenBalance)):ce.from(0),holderTokenBalance:f.tokenGatedEnabled&&f.minHolderTokenBalance!==""&&f.minHolderTokenBalance!==void 0?ce.from(parseInt(f.minHolderTokenBalance)):ce.from(0),holderTokenId:f.tokenGatedEnabled&&(f.holderTokenStandard==="0"||f.holderTokenStandard==="1")&&f.holderTokenId!==""&&f.holderTokenId!==void 0?parseInt(f.holderTokenId):0,socialEngagementRequired:c,socialTaskDescription:c?f.socialTaskDescription:"",description:f.description||"",twitterLink:f.twitterLink||"",discordLink:f.discordLink||"",telegramLink:f.telegramLink||""};let $=ce.from(0);c&&($=await r.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt($),"ETH")),await(await r.poolDeployer.connect(y).createPool(D,{value:$})).wait(),re.success("Your raffle was created successfully!"),p({name:"",tokenAddress:"",tokenAmount:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxSlotsPerAddress:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0",socialTaskDescription:"",socialTasks:[]})}catch(y){console.error("Error creating raffle:",y),re.error(Pv(y))}finally{l(!1)}};return i.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 max-w-3xl mx-auto shadow-xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Ql,{className:"h-5 w-5"}),i.jsx("h3",{className:`font-semibold ${s?"text-lg":"text-xl"}`,children:"ERC20 Token Giveaway"})]}),i.jsxs("form",{onSubmit:g,className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Pool Name"}),i.jsx("input",{type:"text",value:f.name||"",onChange:w=>m("name",w.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Token Address"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"text",value:f.tokenAddress||"",onChange:w=>m("tokenAddress",w.target.value),className:"w-full px-3 py-2.5 text-base border border-border rounded-lg bg-background font-mono",placeholder:"0x...",required:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Total Token Amount"}),i.jsx("input",{type:"number",min:"0.00000001",step:"any",value:f.tokenAmount||"",onChange:w=>m("tokenAmount",w.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Start Time"}),i.jsx("input",{type:"datetime-local",value:f.startTime||"",onChange:w=>m("startTime",w.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Duration (minutes)",o.minDuration&&o.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Duration Allowed: ",Math.ceil(Number(o.minDuration)/60)," min",i.jsx("br",{}),"Maximum Duration Allowed: ",Math.floor(Number(o.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",value:f.duration||"",onChange:w=>m("duration",w.target.value),onWheel:w=>w.target instanceof HTMLElement&&w.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Slot Limit",o.minSlot&&o.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Minimum Slot Limit Allowed: ",o.minSlot,i.jsx("br",{}),"Maximum Slot Limit Allowed: ",o.maxSlot]})})]})]}),i.jsx("input",{type:"number",value:f.slotLimit||"",onChange:w=>m("slotLimit",w.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Number of Winning Slots",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Winners must not exceed 30% of your Slot Limit"})]})]}),i.jsx("input",{type:"number",value:f.winnersCount||"",onChange:w=>m("winnersCount",w.target.value),onWheel:w=>w.target instanceof HTMLElement&&w.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Max Slots Per Address must not exceed 0.1% of your Slot Limit"})]})]}),i.jsx("input",{type:"number",value:f.maxSlotsPerAddress||"",onChange:w=>m("maxSlotsPerAddress",w.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]})]}),i.jsx(Yo,{formData:f,handleChange:m,required:!0,useFormDataEnabled:!0}),i.jsx(Jo,{formData:f,handleChange:m,socialEngagementEnabled:c,setSocialEngagementEnabled:u}),i.jsx(Xo,{formData:f,handleChange:m}),i.jsx("div",{className:"flex gap-4",children:i.jsx(we,{type:"submit",disabled:a||!t,variant:"primary",size:"lg",className:"flex-1 text-base h-12",children:a?"Approving & Creating...":"Approve Prize & Create Raffle"})})]})]})}async function lme(t,e,n,r,s,o){try{let a;const l=await t.getAddress();if(n==="erc20"){a=new Mt(e,tn.erc20,t);const c=await a.decimals(),u=xh(s,c),f=await a.allowance(l,r);if(f.gte(u))return!0;if(f.isZero())try{const p=await t.provider.getBlockNumber(),m=Math.max(0,p-1e3),g="0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925",w="0x"+l.slice(2).padStart(64,"0"),y="0x"+r.slice(2).padStart(64,"0"),T=await t.provider.getLogs({address:e,topics:[g,w,y],fromBlock:m,toBlock:p});for(const j of T)if(ce.from(j.data).gte(u))return!0}catch{}return!1}else if(n==="erc721"){a=new Mt(e,tn.erc721Prize,t);try{if(await a.isApprovedForAll(l,r))return!0}catch{}const c=await a.getApproved(o);return c&&c.toLowerCase()===r.toLowerCase()}else if(n==="erc1155")return a=new Mt(e,tn.erc1155Prize,t),await a.isApprovedForAll(l,r);return!1}catch{return!1}}async function JB({signer:t,tokenAddress:e,prizeType:n,spender:r,amount:s,tokenId:o}){try{if(await lme(t,e,n,r,s,o))return{success:!0,alreadyApproved:!0};let l,c;if(n==="erc20"){l=new Mt(e,tn.erc20,t);const u=CN;c=await l.approve(r,u)}else if(n==="erc721"){l=new Mt(e,tn.erc721Prize,t);try{c=await l.setApprovalForAll(r,!0)}catch(u){if(u.code===4001)throw u;console.log("setApprovalForAll failed, falling back to individual approval:",u.message),c=await l.approve(r,o)}}else n==="erc1155"&&(l=new Mt(e,tn.erc1155Prize,t),c=await l.setApprovalForAll(r,!0));return await c.wait(),await new Promise(u=>setTimeout(u,2e3)),{success:!0}}catch(a){return{success:!1,error:a.message}}}function Pv(t){var r,s;if(t!=null&&t.reason)return t.reason;if((r=t==null?void 0:t.data)!=null&&r.message)return t.data.message;const e=(t==null?void 0:t.message)||((s=t==null?void 0:t.data)==null?void 0:s.message)||(t==null?void 0:t.toString())||"",n=e.match(/execution reverted:?\s*([^\n]*)/i);return n&&n[1]?n[1].trim():e}function Xh(t,e){const[n,r]=k.useState({minSlot:void 0,maxSlot:void 0,minDuration:void 0,maxDuration:void 0,maxTicketsPerParticipant:void 0});return k.useEffect(()=>{if(!(t!=null&&t.protocolManager))return;async function s(){var o,a,l,c,u,f,p,m,g,w;try{if(e){const[y,T,j]=await Promise.all([t.protocolManager.getAllSlotLimits(),t.protocolManager.getDurationLimits(),t.protocolManager.getMaxSlotsPerAddress()]);r({minSlot:(o=y.minPrized)==null?void 0:o.toString(),maxSlot:(a=y.max)==null?void 0:a.toString(),minDuration:(l=T[0])==null?void 0:l.toString(),maxDuration:(c=T[1])==null?void 0:c.toString(),maxTicketsPerParticipant:(u=j.max)==null?void 0:u.toString()})}else{const[y,T,j]=await Promise.all([t.protocolManager.getAllSlotLimits(),t.protocolManager.getDurationLimits(),t.protocolManager.getMaxSlotsPerAddress()]);r({minSlot:(f=y.minNonPrized)==null?void 0:f.toString(),maxSlot:(p=y.max)==null?void 0:p.toString(),minDuration:(m=T[0])==null?void 0:m.toString(),maxDuration:(g=T[1])==null?void 0:g.toString(),maxTicketsPerParticipant:(w=j.max)==null?void 0:w.toString()})}}catch{}}s()},[t,e]),n}const cme=k.forwardRef(({title:t,subtitle:e,icon:n,badge:r,variant:s="default",backgroundImage:o,overlay:a=!0,animate:l=!0,actions:c,className:u,contentClassName:f,children:p,...m},g)=>{const y={default:{container:"bg-gradient-to-br from-card/90 via-card/80 to-card/70 backdrop-blur-sm border-b border-border/30",content:"py-8 md:py-12"},gradient:{container:"bg-gradient-to-br from-primary/10 via-primary/5 to-transparent border-b border-border/30",content:"py-10 md:py-16"},glass:{container:"bg-white/5 backdrop-blur-xl border-b border-white/10",content:"py-10 md:py-14"},minimal:{container:"bg-transparent",content:"py-6 md:py-8"}}[s],T={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},j={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},_=l?Be.div:"div",v=l?Be.div:"div";return i.jsxs(_,{ref:g,className:je("relative overflow-hidden",y.container,u),variants:l?T:void 0,initial:l?"hidden":void 0,animate:l?"visible":void 0,...m,children:[o&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${o})`}}),a&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/80 via-background/70 to-background"})]}),s!=="minimal"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-primary/10 rounded-full blur-3xl opacity-50 pointer-events-none"}),i.jsx("div",{className:"absolute -bottom-24 -left-24 w-72 h-72 bg-primary/5 rounded-full blur-3xl opacity-50 pointer-events-none"})]}),i.jsx("div",{className:je("relative container mx-auto px-4 md:px-6",y.content,f),children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[i.jsxs("div",{className:"flex-1 max-w-3xl",children:[r&&i.jsx(v,{variants:l?j:void 0,className:"mb-3",children:i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary border border-primary/20",children:r})}),i.jsxs(v,{variants:l?j:void 0,className:"flex items-center gap-4",children:[n&&i.jsx("div",{className:"flex items-center justify-center w-14 h-14 rounded-2xl bg-primary/10 text-primary border border-primary/20",children:i.jsx(n,{className:"h-7 w-7"})}),i.jsx("h1",{className:"font-display text-3xl md:text-4xl lg:text-5xl font-bold tracking-tight",children:t})]}),e&&i.jsx(v,{variants:l?j:void 0,className:je("mt-3",n&&"md:ml-[4.5rem]"),children:i.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl",children:e})}),p&&i.jsx(v,{variants:l?j:void 0,className:je("mt-4",n&&"md:ml-[4.5rem]"),children:p})]}),c&&i.jsx(v,{variants:l?j:void 0,className:"flex flex-wrap items-center gap-3",children:c})]})})]})});cme.displayName="PageHero";const XB=[{id:"whitelist",name:"Whitelist Raffle",description:"Create a whitelisting event for your community.",icon:os,color:"from-blue-500 to-indigo-500",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/30",features:["100% Trustless","Optional token-gating","Multiple winners"],poolType:"Whitelist/Allowlist"},{id:"nft-drop-721",name:"NFT Drop (ERC721)",description:"Deploy pools to fairly distribute your collection.",icon:Ho,color:"from-purple-500 to-pink-500",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/30",features:["Supports customized contracts (must implement the IMintable interface)","Flexible ticket pricing","On-demand minting"],poolType:"NFTDrop",nftStandard:"ERC721"},{id:"nft-drop-1155",name:"NFT Drop (ERC1155)",description:"Distribute edition NFTs.",icon:Ho,color:"from-violet-500 to-purple-500",bgColor:"bg-violet-500/10",borderColor:"border-violet-500/30",features:["Supports customized contracts (must implement the IMintable interface)","Flexible ticket pricing","On-demand minting"],poolType:"NFTDrop",nftStandard:"ERC1155"},{id:"lucky-sale",name:"NFT Lucky Sale/NFT Giveaway",description:"Raffle off an existing NFT from your wallet.",icon:Ca,color:"from-amber-500 to-orange-500",bgColor:"bg-amber-500/10",borderColor:"border-amber-500/30",features:["Securely escrowed","Flexible ticket pricing","Single winner"],poolType:"Lucky Sale/NFT Pool",nftStandard:"ERC721"},{id:"native-giveaway",name:"Native Token Giveaway",description:"Reward your community with ETH/BSC/AVAX.",icon:Ql,color:"from-emerald-500 to-teal-500",bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/30",features:["Securely escrowed","Equally split among winners","Optional token-gating"],poolType:"Native Token Pool"},{id:"erc20-giveaway",name:"Token Giveaway",description:"Give away ERC20 tokens to lucky participants.",icon:yQ,color:"from-cyan-500 to-blue-500",bgColor:"bg-cyan-500/10",borderColor:"border-cyan-500/30",features:["Securely escrowed","Equally split among winners","Multiple winners"],poolType:"ERC20 Token Pool"}],QB=k.forwardRef(({selectedType:t,onTypeSelect:e,layout:n="grid",showFeatures:r=!0,showDescription:s=!0,className:o,...a},l)=>{const c={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},f={grid:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",list:"flex flex-col gap-3",compact:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3"};return i.jsx(Be.div,{ref:l,className:je(f[n],o),variants:c,initial:"hidden",animate:"visible",...a,children:XB.map(p=>i.jsx(ume,{type:p,isSelected:t===p.id,onSelect:()=>e(p),layout:n,showFeatures:r&&n!=="compact",showDescription:s&&n!=="compact",variants:u},p.id))})});QB.displayName="RaffleTypeSelector";const ume=({type:t,isSelected:e,onSelect:n,layout:r,showFeatures:s,showDescription:o,variants:a})=>(t.icon,r==="compact"?i.jsxs(Be.button,{type:"button",onClick:n,variants:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:je("relative flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all duration-200",e?"border-primary bg-primary/10 shadow-lg":"border-border/50 bg-card/50 hover:border-border hover:bg-card/80"),children:[i.jsx("span",{className:je("text-xs font-medium text-center leading-tight",e?"text-primary":"text-foreground"),children:t.name}),e&&i.jsx(Be.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-2 right-2",children:i.jsx(Bs,{className:"h-4 w-4 text-primary"})})]}):r==="list"?i.jsxs(Be.button,{type:"button",onClick:n,variants:a,whileHover:{x:4},className:je("relative flex items-center gap-4 p-4 rounded-xl border-2 transition-all duration-200 text-left",e?"border-primary bg-primary/5 shadow-lg":"border-border/50 bg-card/50 hover:border-border hover:bg-card/80"),children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:"font-semibold text-foreground",children:t.name}),e&&i.jsx(Bs,{className:"h-4 w-4 text-primary"})]}),o&&i.jsx("p",{className:"text-sm text-muted-foreground mt-0.5 truncate",children:t.description})]}),i.jsx(rg,{className:je("h-5 w-5 shrink-0 transition-transform",e?"text-primary":"text-muted-foreground")})]}):i.jsxs(Be.button,{type:"button",onClick:n,variants:a,whileHover:{y:-4,scale:1.01},whileTap:{scale:.98},className:je("relative flex flex-col p-5 rounded-xl border-2 transition-all duration-200 text-left h-full",e?"border-primary bg-primary/5 shadow-xl shadow-primary/10":"border-border/50 bg-card/50 hover:border-border hover:bg-card/80 hover:shadow-lg"),children:[e&&i.jsx(Be.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},className:"absolute top-3 right-3 flex items-center justify-center w-6 h-6 rounded-full bg-primary text-primary-foreground",children:i.jsx(Bs,{className:"h-4 w-4"})}),i.jsx("div",{className:je("absolute top-0 left-0 right-0 h-1 rounded-t-xl bg-gradient-to-r opacity-0 transition-opacity",t.color,e&&"opacity-100")}),i.jsx("h4",{className:je("font-display text-lg font-semibold mb-1",e?"text-primary":"text-foreground"),children:t.name}),o&&i.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:t.description}),s&&t.features&&i.jsx("div",{className:"mt-auto pt-4 border-t border-border/30",children:i.jsx("ul",{className:"space-y-1.5",children:t.features.map((l,c)=>i.jsxs("li",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(Pi,{className:"h-3 w-3 text-primary/60"}),l]},c))})})]})),dme=t=>k.useMemo(()=>XB.find(e=>e.id===t)||null,[t]),Z2=["https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/"],JI=Z2.map(t=>t.replace("/ipfs/","/ipns/")),XI=["https://arweave.net/"],eN=t=>{if(!t)return[];if(t.startsWith("ipfs://")){let e=t.replace("ipfs://","");return e.startsWith("ipfs/")&&(e=e.slice(5)),Z2.map(n=>`${n}${e}`)}if(t.startsWith("ipns://")){let e=t.replace("ipns://","");return e.startsWith("ipns/")&&(e=e.slice(5)),JI.map(n=>`${n}${e}`)}if(t.startsWith("ar://")){const e=t.replace("ar://","");return XI.map(n=>`${n}${e}`)}try{const e=new URL(t),r=e.pathname.replace(/\/ipfs\/ipfs\//,"/ipfs/").split("/").filter(Boolean),s=r.indexOf("ipfs");if(s!==-1&&r[s+1]){const a=r.slice(s+1).join("/");return Z2.map(l=>`${l}${a}`)}const o=r.indexOf("ipns");if(o!==-1&&r[o+1]){const a=r.slice(o+1).join("/");return JI.map(l=>`${l}${a}`)}if(e.hostname.endsWith("arweave.net")||e.hostname==="arweave.net"){const a=r.join("/");return XI.map(l=>`${l}${a}`)}}catch{}return[t]},fme=t=>{const e=["image","image_url","imageUrl","animation_url","animationUrl","media","artwork"];for(const n of e)if(t[n]){const r=t[n];if(typeof r=="string")return r.startsWith("ipfs://")||r.startsWith("ar://")?eN(r):[r]}return null},hme=t=>{const e=[],n=/\/$/.test(t),r=t.replace(/\/$/,"");if(t.match(/\/(?:[0-9]+)(?:\.json)?$/)){e.push(t),t.includes(".json")||e.push(`${t}.json`);const o=r.replace(/\/(?:[0-9]+)(?:\.json)?$/,"");o&&o!==r&&(e.push(o),e.push(`${o}/`),e.push(`${o}.json`),e.push(`${o}/index.json`),e.push(`${o}/metadata.json`))}else e.push(t),n&&e.push(r),t.includes(".json")||(e.push(`${t}.json`),e.push(`${r}.json`)),e.push(`${t}index.json`),e.push(`${t}metadata.json`),n&&(e.push(`${r}/index.json`),e.push(`${r}/metadata.json`));return[...new Set(e)]};function Qh(t,e){const[n,r]=k.useState({minSlot:void 0,maxSlot:void 0,minDuration:void 0,maxDuration:void 0,maxTicketsPerParticipant:void 0});return k.useEffect(()=>{if(!(t!=null&&t.protocolManager))return;async function s(){var o,a,l,c,u,f,p,m,g,w;try{const[y,T,j]=await Promise.all([t.protocolManager.getAllSlotLimits(),t.protocolManager.getDurationLimits(),t.protocolManager.getMaxSlotsPerAddress()]);r(e?{minSlot:(o=y.minPrized)==null?void 0:o.toString(),maxSlot:(a=y.max)==null?void 0:a.toString(),minDuration:(l=T[0])==null?void 0:l.toString(),maxDuration:(c=T[1])==null?void 0:c.toString(),maxTicketsPerParticipant:(u=j.max)==null?void 0:u.toString()}:{minSlot:(f=y.minNonPrized)==null?void 0:f.toString(),maxSlot:(p=y.max)==null?void 0:p.toString(),minDuration:(m=T[0])==null?void 0:m.toString(),maxDuration:(g=T[1])==null?void 0:g.toString(),maxTicketsPerParticipant:(w=j.max)==null?void 0:w.toString()})}catch{}}s()},[t,e]),n}function ZB(t,e,n="erc721Prize"){const[r,s]=k.useState(null),[o,a]=k.useState(!1),[l,c]=k.useState(!1);k.useEffect(()=>{(async()=>{if(!t||!bn(t)||!e){s(null),a(!1);return}try{const m=new Mt(t,tn[n],e);let g=null;try{n==="erc721Prize"?g=await m.unrevealedBaseURI():n==="erc1155Prize"&&(g=await m.getUnrevealedURI())}catch{}if(!g||g.trim()===""||Er(g)){let w=null;try{typeof m.unrevealedURIHash=="function"&&(w=await m.unrevealedURIHash())}catch{}if(w&&!Od(w)){const y=await gd(w,{collectionAddress:t,uriType:"unrevealedURI"});y&&(g=y)}}if(!g||g.trim()===""||Er(g)){const w=Rh(t);w!=null&&w.unrevealedURI&&(g=w.unrevealedURI)}g&&g.trim()!==""&&!Er(g)?await pme(g,s,a):(s(null),a(!1))}catch(m){console.error("Error querying collection URIs:",m),s(null),a(!1)}})()},[t,e,n]);const u=k.useCallback(()=>{c(!0),a(!1)},[]),f=k.useCallback(()=>{a(!1),s(null)},[]);return{backgroundImage:r,imageLoading:o,imageLoaded:l,handleImageLoad:u,handleImageError:f}}async function pme(t,e,n){if(!t)return null;n(!0);try{const r=hme(t),s=[];for(const o of r){const a=eN(o);s.push(...a)}for(const o of s)try{const a=await fetch(o,{headers:{Accept:"application/json, text/plain, */*"}});if(a.ok){const l=a.headers.get("content-type");try{const c=await a.text(),u=JSON.parse(c);if(u&&typeof u=="object"){const f=fme(u);if(f&&f.length>0){const p=f[0];if(p.startsWith("ipfs://")||p.startsWith("ar://")){const m=eN(p);if(m.length>0)return e(m[0]),m[0]}return e(p),p}}}catch{if(l!=null&&l.startsWith("image/")||o.match(/\.(jpg|jpeg|png|gif|svg|webp)$/i))return e(o),o}}}catch{continue}}catch(r){console.error("Error fetching artwork:",r)}finally{n(!1)}return null}async function mme(t,e,n,r,s,o){try{const a=await t.getAddress();let l;if(n==="erc20"){l=new Mt(e,tn.erc20,t);const c=ce.from(s||"0");try{return(await l.allowance(a,r)).gte(c)}catch{const f=t.provider;if(f)try{const p=await f.getBlockNumber(),m=Math.max(0,p-1e4),g=l.filters.Approval(a,r),w=await l.queryFilter(g,m,p);for(const y of w)if(ce.from(y.data).gte(c))return!0}catch{}return!1}}else if(n==="erc721"){l=new Mt(e,tn.erc721Prize,t);try{if(await l.isApprovedForAll(a,r))return!0}catch{}const c=await l.getApproved(o);return c&&c.toLowerCase()===r.toLowerCase()}else if(n==="erc1155")return l=new Mt(e,tn.erc1155Prize,t),await l.isApprovedForAll(a,r);return!1}catch{return!1}}async function e8({signer:t,tokenAddress:e,prizeType:n,spender:r,amount:s,tokenId:o}){try{if(await mme(t,e,n,r,s,o))return{success:!0,alreadyApproved:!0};let l,c;if(n==="erc20"){l=new Mt(e,tn.erc20,t);const u=CN;c=await l.approve(r,u)}else if(n==="erc721"){l=new Mt(e,tn.erc721Prize,t);try{c=await l.setApprovalForAll(r,!0)}catch(u){if(u.code===4001)throw u;console.log("setApprovalForAll failed, falling back to individual approval:",u.message),c=await l.approve(r,o)}}else n==="erc1155"&&(l=new Mt(e,tn.erc1155Prize,t),c=await l.setApprovalForAll(r,!0));return await c.wait(),await new Promise(u=>setTimeout(u,2e3)),{success:!0}}catch(a){return{success:!1,error:a.message}}}function sy(t){var r,s;if(t!=null&&t.reason)return t.reason;if((r=t==null?void 0:t.data)!=null&&r.message)return t.data.message;const e=(t==null?void 0:t.message)||((s=t==null?void 0:t.data)==null?void 0:s.message)||(t==null?void 0:t.toString())||"",n=e.match(/execution reverted:?\s*([^\n]*)/i);return n&&n[1]?n[1].trim():e}const gme=k.forwardRef(({raffleType:t,raffleTypeName:e,raffleTypeIcon:n,raffleTypeColor:r,formData:s={},variant:o="glass",showPlaceholders:a=!0,currencySymbol:l="ETH",className:c,...u},f)=>{const p=j=>{if(!j)return null;const _=parseInt(j);return _<60?`${_} min`:_<1440?`${Math.floor(_/60)} hr ${_%60>0?`${_%60} min`:""}`:`${Math.floor(_/1440)} days`},m=j=>{if(!j)return null;try{return new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return null}},g=()=>{switch(t){case"native-giveaway":return s.ethAmount?`${s.ethAmount} ${l}`:null;case"erc20-giveaway":return s.tokenAmount?`${s.tokenAmount} tokens`:null;case"nft-drop-721":case"nft-drop-1155":return s.collectionAddress?"NFT Collection":null;case"lucky-sale":return s.tokenId?`NFT #${s.tokenId}`:null;case"whitelist":return"Whitelist Spot";default:return null}},w={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3}}},y={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.2}}},T=s.name||g();return i.jsx(Be.div,{ref:f,variants:w,initial:"hidden",animate:"visible",className:je("relative",c),...u,children:i.jsxs(ut,{variant:o,className:"overflow-hidden border-2 border-border/50",children:[i.jsx("div",{className:je("h-1.5 bg-gradient-to-r",r||"from-primary to-primary/60")}),i.jsx(Jr,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[n&&i.jsx("div",{className:je("p-2 rounded-lg bg-gradient-to-br",r||"from-primary to-primary/60"),children:i.jsx(n,{className:"h-4 w-4 text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-medium",children:"Live Preview"}),i.jsx("p",{className:"text-sm font-medium text-foreground",children:e||"Raffle"})]})]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded-full",children:[i.jsx(Pi,{className:"h-3 w-3"}),i.jsx("span",{children:"Real-time"})]})]})}),i.jsxs(It,{className:"space-y-4",children:[i.jsx(Jl,{mode:"wait",children:i.jsxs(Be.div,{variants:y,initial:"hidden",animate:"visible",exit:"hidden",className:"space-y-1",children:[i.jsx("h3",{className:je("text-xl font-display font-bold truncate",s.name?"text-foreground":"text-muted-foreground/50"),children:s.name||(a?"Your Raffle Name":"")}),s.description&&i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description})]},s.name||"placeholder-name")}),(g()||a)&&i.jsxs(Be.div,{variants:y,className:"flex items-center gap-3 p-3 rounded-lg bg-primary/5 border border-primary/10",children:[i.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:t==="whitelist"?i.jsx(dl,{className:"h-5 w-5 text-primary"}):t!=null&&t.includes("nft")||t==="lucky-sale"?i.jsx(Ho,{className:"h-5 w-5 text-primary"}):i.jsx(Ql,{className:"h-5 w-5 text-primary"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Prize"}),i.jsx("p",{className:je("font-semibold",g()?"text-foreground":"text-muted-foreground/50"),children:g()||(a?"Configure prize...":"")})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs(Be.div,{variants:y,className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(Vg,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs",children:"Start Time"})]}),i.jsx("p",{className:je("text-sm font-medium",s.startTime?"text-foreground":"text-muted-foreground/50"),children:m(s.startTime)||(a?"Not set":"")})]}),i.jsxs(Be.div,{variants:y,className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(yr,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs",children:"Duration"})]}),i.jsx("p",{className:je("text-sm font-medium",s.duration?"text-foreground":"text-muted-foreground/50"),children:p(s.duration)||(a?"Not set":"")})]}),i.jsxs(Be.div,{variants:y,className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(os,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs",children:"Max Slots"})]}),i.jsx("p",{className:je("text-sm font-medium",s.slotLimit?"text-foreground":"text-muted-foreground/50"),children:s.slotLimit||(a?"":"")})]}),i.jsxs(Be.div,{variants:y,className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(dl,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs",children:"Winners"})]}),i.jsx("p",{className:je("text-sm font-medium",s.winnersCount?"text-foreground":"text-muted-foreground/50"),children:s.winnersCount||(a?"":"")})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.tokenGatedEnabled&&i.jsxs(Be.div,{variants:y,className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-blue-500/10 text-blue-500 text-xs font-medium",children:[i.jsx(xs,{className:"h-3 w-3"}),i.jsx("span",{children:"Token-Gated"})]}),s.socialEngagementRequired&&i.jsxs(Be.div,{variants:y,className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-purple-500/10 text-purple-500 text-xs font-medium",children:[i.jsx(wd,{className:"h-3 w-3"}),i.jsx("span",{children:"Social Tasks"})]}),s.slotFee&&parseFloat(s.slotFee)>0&&i.jsxs(Be.div,{variants:y,className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-amber-500/10 text-amber-500 text-xs font-medium",children:[i.jsx(Ql,{className:"h-3 w-3"}),i.jsxs("span",{children:[s.slotFee," ",l,"/slot"]})]})]}),(s.twitterLink||s.discordLink||s.telegramLink)&&i.jsxs(Be.div,{variants:y,className:"flex items-center gap-2 pt-2 border-t border-border/30",children:[s.twitterLink&&i.jsx("div",{className:"p-1.5 rounded-md bg-muted/50 text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(wd,{className:"h-3.5 w-3.5"})}),s.discordLink&&i.jsx("div",{className:"p-1.5 rounded-md bg-muted/50 text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(ld,{className:"h-3.5 w-3.5"})}),s.telegramLink&&i.jsx("div",{className:"p-1.5 rounded-md bg-muted/50 text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(eD,{className:"h-3.5 w-3.5"})})]}),!T&&a&&i.jsxs(Be.div,{variants:y,className:"flex items-center justify-center gap-2 py-4 text-sm text-muted-foreground",children:[i.jsx(rg,{className:"h-4 w-4"}),i.jsx("span",{children:"Fill in the form to see preview"})]})]})]})})});gme.displayName="LivePreviewCard";const lr=k.forwardRef(({title:t,subtitle:e,description:n,icon:r,defaultOpen:s=!0,open:o,onOpenChange:a,isComplete:l=!1,isOptional:c=!1,hasError:u=!1,className:f,headerClassName:p,contentClassName:m,variant:g="default",children:w,...y},T)=>{const[j,_]=k.useState(s),v=o!==void 0?o:j,P=()=>{const U=!v;_(U),a==null||a(U)},$={default:{container:"border-b border-border/50 last:border-b-0",header:"py-4",content:"pb-6"},bordered:{container:"border border-border/50 rounded-xl overflow-hidden mb-4 last:mb-0",header:"p-4 bg-muted/30",content:"p-4 pt-0"},elevated:{container:"bg-card/50 backdrop-blur-sm border border-border/30 rounded-xl shadow-lg mb-4 last:mb-0",header:"p-5 border-b border-border/30",content:"p-5"}}[g];return i.jsxs("div",{ref:T,className:je($.container,f),...y,children:[i.jsxs("button",{type:"button",onClick:P,className:je("w-full flex items-center justify-between gap-4 text-left transition-colors hover:bg-muted/20",$.header,p),"aria-expanded":v,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[r&&i.jsx("div",{className:je("flex items-center justify-center w-10 h-10 rounded-lg transition-colors",u?"bg-destructive/10 text-destructive":l?"bg-success/10 text-success":"bg-primary/10 text-primary"),children:l&&!u?i.jsx(fo,{className:"h-5 w-5"}):i.jsx(r,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:je("font-display text-[length:var(--text-lg)] font-semibold",u?"text-destructive":l&&"text-success"),children:t}),(e||c)&&i.jsx("span",{className:"text-[length:var(--text-sm)] font-normal text-muted-foreground",children:e||"(Optional)"})]}),n&&i.jsx("span",{className:"text-[length:var(--text-sm)] text-muted-foreground mt-0.5",children:n})]})]}),i.jsx(Be.div,{animate:{rotate:v?180:0},transition:{duration:.2},children:i.jsx(Ii,{className:"h-5 w-5 text-muted-foreground"})})]}),i.jsx(Jl,{initial:!1,children:v&&i.jsx(Be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:i.jsx("div",{className:je($.content,m),children:w})})})]})});lr.displayName="FormSection";const yme=k.forwardRef(({className:t,variant:e="default",children:n,...r},s)=>{const o=k.Children.map(n,a=>k.isValidElement(a)&&a.type===lr?k.cloneElement(a,{variant:e}):a);return i.jsx("div",{ref:s,className:je(e==="default"&&"divide-y divide-border/50",t),...r,children:o})});yme.displayName="FormSectionGroup";const hu=k.forwardRef(({title:t="Summary",description:e,data:n=[],warnings:r=[],errors:s=[],status:o="preview",statusMessage:a,onEdit:l,onSubmit:c,onCancel:u,submitLabel:f="Confirm",cancelLabel:p="Cancel",editLabel:m="Edit",variant:g="elevated",showCopyButton:w=!1,collapsible:y=!1,defaultCollapsed:T=!1,className:j,children:_,...v},P)=>{const[D,$]=k.useState(T),K={preview:{icon:null,color:"text-foreground",bgColor:"bg-muted/30"},submitting:{icon:$r,color:"text-primary",bgColor:"bg-primary/10",iconAnimation:"animate-spin"},success:{icon:fo,color:"text-success",bgColor:"bg-success/10"},error:{icon:Kt,color:"text-destructive",bgColor:"bg-destructive/10"}}[o],Y=async()=>{try{const V=n.map(A=>`${A.label}: ${A.value}`).join(`
`);await navigator.clipboard.writeText(V),re.success("Summary copied to clipboard")}catch{re.error("Failed to copy summary")}},G={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,staggerChildren:.05}}},X={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0}};return i.jsx(Be.div,{ref:P,variants:G,initial:"hidden",animate:"visible",children:i.jsxs(ut,{variant:g,className:je("overflow-hidden",j),...v,children:[i.jsxs(Jr,{className:"border-b border-border/30",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[K.icon&&i.jsx("div",{className:je("p-2 rounded-lg",K.bgColor),children:i.jsx(K.icon,{className:je("h-5 w-5",K.color,K.iconAnimation)})}),i.jsxs("div",{children:[i.jsx(Fs,{className:"text-lg",children:t}),e&&i.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:e})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[w&&i.jsx(we,{type:"button",variant:"ghost",size:"sm",onClick:Y,className:"h-8 w-8 p-0",children:i.jsx(Wg,{className:"h-4 w-4"})}),y&&i.jsx(we,{type:"button",variant:"ghost",size:"sm",onClick:()=>$(!D),className:"h-8 w-8 p-0",children:i.jsx(Be.div,{animate:{rotate:D?0:180},transition:{duration:.2},children:i.jsx(Ii,{className:"h-4 w-4"})})})]})]}),a&&i.jsx(Be.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:je("text-sm mt-2",K.color),children:a})]}),i.jsx(Jl,{initial:!1,children:!D&&i.jsxs(Be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:[i.jsxs(It,{className:"p-0",children:[r.length>0&&i.jsx("div",{className:"px-6 py-3 bg-warning/10 border-b border-warning/20",children:r.map((V,A)=>i.jsxs(Be.div,{variants:X,className:"flex items-start gap-2 text-sm text-warning",children:[i.jsx(Kt,{className:"h-4 w-4 mt-0.5 shrink-0"}),i.jsx("span",{children:V})]},A))}),s.length>0&&i.jsx("div",{className:"px-6 py-3 bg-destructive/10 border-b border-destructive/20",children:s.map((V,A)=>i.jsxs(Be.div,{variants:X,className:"flex items-start gap-2 text-sm text-destructive",children:[i.jsx(Kt,{className:"h-4 w-4 mt-0.5 shrink-0"}),i.jsx("span",{children:V})]},A))}),i.jsx("div",{className:"divide-y divide-border/30",children:n.map((V,A)=>i.jsx(xme,{item:V,index:A},V.key||A))}),_&&i.jsx("div",{className:"px-6 py-4 border-t border-border/30",children:_})]}),(c||u||l)&&i.jsxs(Zse,{className:"flex justify-between gap-3 border-t border-border/30 bg-muted/20",children:[i.jsx("div",{children:l&&i.jsxs(we,{type:"button",variant:"ghost",onClick:l,disabled:o==="submitting",children:[i.jsx(CQ,{className:"h-4 w-4 mr-2"}),m]})}),i.jsxs("div",{className:"flex gap-2",children:[u&&i.jsx(we,{type:"button",variant:"secondary",onClick:u,disabled:o==="submitting",children:p}),c&&i.jsx(we,{type:"button",variant:"primary",onClick:c,disabled:o==="submitting"||s.length>0,loading:o==="submitting",loadingText:"Processing...",children:f})]})]})]})})]})})});hu.displayName="SummaryCard";const xme=({item:t,index:e})=>{const n={time:yr,date:Vg,amount:Ql,users:os,prize:Ca,link:Ur},r=t.icon||n[t.type],s={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0,transition:{delay:e*.03}}};return i.jsxs(Be.div,{variants:s,className:je("flex items-start justify-between gap-4 px-6 py-3.5",t.highlight&&"bg-primary/5"),children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[r&&i.jsx("div",{className:"p-1.5 rounded-md bg-muted/50 text-muted-foreground shrink-0",children:i.jsx(r,{className:"h-4 w-4"})}),i.jsx("span",{className:"text-sm text-muted-foreground truncate",children:t.label})]}),i.jsxs("div",{className:"flex items-center gap-2 text-right min-w-0",children:[i.jsx("span",{className:je("text-sm font-medium truncate",t.variant==="success"&&"text-success",t.variant==="warning"&&"text-warning",t.variant==="error"&&"text-destructive",t.variant==="muted"&&"text-muted-foreground"),children:t.value}),t.suffix&&i.jsx("span",{className:"text-sm text-muted-foreground shrink-0",children:t.suffix}),t.link&&i.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80 shrink-0",children:i.jsx(Ur,{className:"h-3.5 w-3.5"})})]})]})},bme=({onFormDataChange:t,onReviewStateChange:e})=>{const{connected:n,address:r}=an(),{contracts:s,executeTransaction:o}=xn(),a=Qh(s,!1),[l,c]=k.useState(!1),[u,f]=k.useState(!1),[p,m]=k.useState(null),[g,w]=k.useState(!1),[y,T]=k.useState(!1),[j,_]=k.useState({basic:!1,timing:!1,participation:!1,tokenGated:!0,social:!0,metadata:!0}),[v,P]=k.useState({name:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerParticipant:"1",holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),[D,$]=k.useState({}),U=k.useCallback((C,L)=>{P(z=>{const R={...z,[C]:L};return t==null||t(R),R}),$(z=>({...z,[C]:void 0}))},[t]),K=k.useCallback(C=>{var z;const L={};switch(C){case"basic":(z=v.name)!=null&&z.trim()||(L.name="Pool name is required");break;case"timing":v.startTime||(L.startTime="Start time is required"),v.duration?a.minDuration&&parseInt(v.duration)*60<parseInt(a.minDuration)?L.duration=`Minimum duration is ${Math.ceil(parseInt(a.minDuration)/60)} minutes`:a.maxDuration&&parseInt(v.duration)*60>parseInt(a.maxDuration)&&(L.duration=`Maximum duration is ${Math.floor(parseInt(a.maxDuration)/60)} minutes`):L.duration="Duration is required";break;case"participation":v.slotLimit?a.minSlot&&parseInt(v.slotLimit)<parseInt(a.minSlot)?L.slotLimit=`Minimum slots is ${a.minSlot}`:a.maxSlot&&parseInt(v.slotLimit)>parseInt(a.maxSlot)&&(L.slotLimit=`Maximum slots is ${a.maxSlot}`):L.slotLimit="Slot limit is required",v.winnersCount?parseInt(v.winnersCount)>parseInt(v.slotLimit)*.3&&(L.winnersCount="Winners cannot exceed 30% of slot limit"):L.winnersCount="Number of winners is required";break;case"tokenGated":g&&(!v.holderTokenAddress||!bn(v.holderTokenAddress))&&(L.holderTokenAddress="Valid token address required");break}return $(R=>({...R,...L})),Object.keys(L).length===0},[v,a,g]);k.useEffect(()=>{var C;_({basic:!!((C=v.name)!=null&&C.trim()),timing:!!v.startTime&&!!v.duration,participation:!!v.slotLimit&&!!v.winnersCount,tokenGated:!g||!!v.holderTokenAddress,social:!0,metadata:!0})},[v,g]);const Y=k.useCallback(()=>{const C=["basic","timing","participation","tokenGated"];let L=!0;for(const z of C)K(z)||(L=!1);return L},[K]),G=k.useCallback(()=>{Y()?(f(!0),e==null||e(!0)):re.error("Please fix the errors before reviewing")},[Y,e]),X=async()=>{var C,L,z,R,I;if(!n||!s.poolDeployer){re.error("Please connect your wallet and ensure contracts are configured");return}c(!0);try{const N=Math.floor(new Date(v.startTime).getTime()/1e3),F=parseInt(v.duration)*60,E=g&&v.holderTokenAddress?v.holderTokenAddress:$e,M=g?parseInt(v.holderTokenStandard):0,ee=g&&v.minHolderTokenBalance?ce.from(parseInt(v.minHolderTokenBalance)):ce.from(0),O=g&&v.holderTokenId?parseInt(v.holderTokenId):0,q={name:v.name,startTime:N,duration:F,slotLimit:parseInt(v.slotLimit),winnersCount:parseInt(v.winnersCount),maxSlotsPerAddress:1,isPrized:!1,customSlotFee:0,erc721Drop:!1,erc1155Drop:!0,prizeCollection:$e,standard:0,prizeTokenId:0,amountPerWinner:0,creator:r,erc20PrizeToken:$e,erc20PrizeAmount:0,nativePrizeAmount:0,holderTokenAddress:E,holderTokenStandard:M,minHolderTokenBalance:ee,holderTokenBalance:ee,holderTokenId:O,socialEngagementRequired:y,socialTaskDescription:y?v.socialTaskDescription:"",description:v.description||"",twitterLink:v.twitterLink||"",discordLink:v.discordLink||"",telegramLink:v.telegramLink||""};let H=ce.from(0);y&&(H=await s.protocolManager.socialEngagementFee());const J=await o(s.poolDeployer.createPool,q,{value:H});if(J.success){const Q=(L=(C=J.receipt)==null?void 0:C.events)==null?void 0:L.find(se=>se.event==="PoolCreated"),ne=((z=Q==null?void 0:Q.args)==null?void 0:z.pool)||((R=Q==null?void 0:Q.args)==null?void 0:R[0]);ne&&m(ne),re.success("Your raffle was created successfully!")}else re.error(J.error||"Failed to create raffle")}catch(N){console.error("Error creating raffle:",N),(I=N.message)!=null&&I.includes("Transaction failed")||re.error(sy(N))}finally{c(!1)}},V=C=>C?new Date(C).toLocaleString():"Not set",A=[{label:"Pool Name",value:v.name||"Not set",type:"text"},{label:"Start Time",value:V(v.startTime),type:"date"},{label:"Duration",value:v.duration?`${v.duration} minutes`:"Not set",type:"time"},{label:"Max Slots",value:v.slotLimit||"Not set",type:"users"},{label:"Winners",value:v.winnersCount||"Not set",type:"prize"},{label:"Slots Per Address",value:"1 (fixed)",type:"users",variant:"muted"},...g?[{label:"Token-Gated",value:"Yes",variant:"success"},{label:"Gate Token",value:v.holderTokenAddress?`${v.holderTokenAddress.slice(0,6)}...${v.holderTokenAddress.slice(-4)}`:"Not set"}]:[],...y?[{label:"Social Tasks",value:"Enabled",variant:"success"}]:[]],x=()=>{m(null),f(!1),e==null||e(!1),P({name:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerParticipant:"1",holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"",socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),w(!1),T(!1)};return p?i.jsx(ut,{variant:"elevated",className:"p-8 max-w-3xl mx-auto text-center",children:i.jsxs(Be.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-success/10 mb-4",children:i.jsx(fo,{className:"h-8 w-8 text-success"})}),i.jsx("h2",{className:"font-display text-2xl font-bold mb-2",children:"Raffle Created Successfully!"}),i.jsx("p",{className:"text-muted-foreground",children:"Your whitelist raffle has been deployed to the blockchain."})]}),i.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Raffle Address"}),i.jsx("p",{className:"font-mono text-sm break-all",children:p})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx(ji,{to:`/raffle/${p}`,children:i.jsxs(we,{variant:"primary",className:"gap-2 w-full sm:w-auto",children:[i.jsx(Ur,{className:"h-4 w-4"}),"View Raffle"]})}),i.jsxs(we,{variant:"secondary",onClick:x,className:"gap-2",children:[i.jsx(Pi,{className:"h-4 w-4"}),"Create Another"]})]})]})}):u?i.jsx(hu,{title:"Review Your Raffle",description:"Please review the details before creating your raffle",data:A,status:l?"submitting":"preview",statusMessage:l?"Creating your raffle...":void 0,onEdit:()=>{f(!1),e==null||e(!1)},onCancel:()=>{f(!1),e==null||e(!1)},onSubmit:X,submitLabel:"Create Raffle",editLabel:"Edit Details",variant:"elevated"}):i.jsxs(ut,{variant:"elevated",className:"p-6 max-w-3xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-display text-xl font-semibold",children:"Whitelist Raffle"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a free entry raffle for your community"})]}),i.jsx("div",{className:"flex items-center gap-2 mb-6 p-3 rounded-lg bg-muted/30",children:Object.entries(j).slice(0,3).map(([C,L],z)=>i.jsxs(Ae.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-1.5 text-sm ${L?"text-success":"text-muted-foreground"}`,children:[L?i.jsx(Bs,{className:"h-4 w-4"}):i.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-current"}),i.jsx("span",{className:"hidden sm:inline capitalize",children:C})]}),z<2&&i.jsx("div",{className:"flex-1 h-px bg-border"})]},C))}),i.jsxs("form",{className:"space-y-4",children:[i.jsx(lr,{title:"Basic Information",icon:Wl,defaultOpen:!0,isComplete:j.basic,hasError:!!D.name,children:i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Pool Name *"}),i.jsx("input",{type:"text",value:v.name||"",onChange:C=>U("name",C.target.value),onBlur:()=>K("basic"),className:`w-full px-3 py-2.5 text-sm border rounded-lg bg-background transition-colors ${D.name?"border-destructive focus:ring-destructive":"border-border focus:ring-primary"}`,placeholder:"My Awesome Raffle",required:!0}),D.name&&i.jsxs("p",{className:"mt-1 text-xs text-destructive flex items-center gap-1",children:[i.jsx(Kt,{className:"h-3 w-3"}),D.name]})]})}),i.jsx(lr,{title:"Timing",icon:yr,defaultOpen:!0,isComplete:j.timing,hasError:!!D.startTime||!!D.duration,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Start Time *"}),i.jsx("input",{type:"datetime-local",value:v.startTime||"",onChange:C=>U("startTime",C.target.value),onBlur:()=>K("timing"),className:`w-full px-3 py-2.5 text-sm border rounded-lg bg-background ${D.startTime?"border-destructive":"border-border"}`,required:!0}),D.startTime&&i.jsx("p",{className:"mt-1 text-xs text-destructive",children:D.startTime})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Duration (minutes) *",a.minDuration&&a.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",Math.ceil(Number(a.minDuration)/60)," min",i.jsx("br",{}),"Max: ",Math.floor(Number(a.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",value:v.duration||"",onChange:C=>U("duration",C.target.value),onBlur:()=>K("timing"),onWheel:C=>C.target.blur(),className:`w-full px-3 py-2.5 text-sm border rounded-lg bg-background ${D.duration?"border-destructive":"border-border"}`,placeholder:"60",required:!0}),D.duration&&i.jsx("p",{className:"mt-1 text-xs text-destructive",children:D.duration})]})]})}),i.jsx(lr,{title:"Participation Rules",icon:os,defaultOpen:!0,isComplete:j.participation,hasError:!!D.slotLimit||!!D.winnersCount,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Slot Limit *",a.minSlot&&a.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",a.minSlot,i.jsx("br",{}),"Max: ",a.maxSlot]})})]})]}),i.jsx("input",{type:"number",value:v.slotLimit||"",onChange:C=>U("slotLimit",C.target.value),onBlur:()=>K("participation"),onWheel:C=>C.target.blur(),className:`w-full px-3 py-2.5 text-sm border rounded-lg bg-background ${D.slotLimit?"border-destructive":"border-border"}`,placeholder:"100",required:!0}),D.slotLimit&&i.jsx("p",{className:"mt-1 text-xs text-destructive",children:D.slotLimit})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Number of Winners *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Winners must not exceed 30% of slot limit"})]})]}),i.jsx("input",{type:"number",value:v.winnersCount||"",onChange:C=>U("winnersCount",C.target.value),onBlur:()=>K("participation"),onWheel:C=>C.target.blur(),className:`w-full px-3 py-2.5 text-sm border rounded-lg bg-background ${D.winnersCount?"border-destructive":"border-border"}`,placeholder:"10",required:!0}),D.winnersCount&&i.jsx("p",{className:"mt-1 text-xs text-destructive",children:D.winnersCount})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Fixed at 1 for whitelist raffles"})]})]}),i.jsx("input",{type:"number",value:1,disabled:!0,className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-muted/50 opacity-60 cursor-not-allowed"})]})]})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Yo,{tokenGatedEnabled:g,onTokenGatedChange:w,formData:v,handleChange:U,required:!0})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Jo,{socialEngagementEnabled:y,onSocialEngagementChange:T,formData:v,handleChange:U,required:!1})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Xo,{formData:v,handleChange:U})}),i.jsx("div",{className:"flex gap-4 pt-4",children:i.jsx(we,{type:"button",onClick:G,disabled:l||!n,variant:"primary",size:"lg",className:"flex-1",children:l?i.jsxs(i.Fragment,{children:[i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Review & Create"})})]})]})};function vme({collectionAddress:t,setCollectionAddress:e,onReviewStateChange:n}){const{connected:r,address:s,provider:o}=an(),{contracts:a}=xn(),{getCurrencyLabel:l}=er(),c=Qh(a,!0),[u,f]=k.useState(!1),[p,m]=k.useState(!1),[g,w]=k.useState(null),[y,T]=k.useState(!1),[j,_]=k.useState(!1),[v,P]=k.useState({basic:!1,timing:!1,participation:!1}),[D,$]=k.useState({}),[U,K]=k.useState({name:"",collection:t||"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerUser:"",slotFee:"",holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),{backgroundImage:Y,imageLoading:G,handleImageLoad:X,handleImageError:V}=ZB(U.collection,o,"erc721Prize"),A=(N,F)=>{K(E=>({...E,[N]:F})),N==="collection"&&e&&e(F),$(E=>({...E,[N]:void 0}))},x=N=>{var E,M;const F={};switch(N){case"basic":(E=U.name)!=null&&E.trim()||(F.name="Pool name is required"),(M=U.collection)!=null&&M.trim()||(F.collection="Collection address is required");break;case"timing":U.startTime||(F.startTime="Start time is required"),U.duration?c.minDuration&&parseInt(U.duration)*60<parseInt(c.minDuration)?F.duration=`Minimum duration is ${Math.ceil(parseInt(c.minDuration)/60)} minutes`:c.maxDuration&&parseInt(U.duration)*60>parseInt(c.maxDuration)&&(F.duration=`Maximum duration is ${Math.floor(parseInt(c.maxDuration)/60)} minutes`):F.duration="Duration is required";break;case"participation":U.slotLimit?c.minSlot&&parseInt(U.slotLimit)<parseInt(c.minSlot)?F.slotLimit=`Minimum slots is ${c.minSlot}`:c.maxSlot&&parseInt(U.slotLimit)>parseInt(c.maxSlot)&&(F.slotLimit=`Maximum slots is ${c.maxSlot}`):F.slotLimit="Slot limit is required",U.winnersCount||(F.winnersCount="Number of winners is required"),U.maxTicketsPerUser||(F.maxTicketsPerUser="Max tickets per user is required");break}return $(ee=>({...ee,...F})),Object.keys(F).length===0};k.useEffect(()=>{t&&t!==U.collection&&K(N=>({...N,collection:t}))},[t]),k.useEffect(()=>{var N,F;P({basic:!!((N=U.name)!=null&&N.trim())&&!!((F=U.collection)!=null&&F.trim()),timing:!!U.startTime&&!!U.duration,participation:!!U.slotLimit&&!!U.winnersCount&&!!U.maxTicketsPerUser})},[U]);const C=()=>{m(!0),n==null||n(!0)},L=async()=>{var N,F,E;if(!r||!a){re.error("Please connect your wallet");return}if(!a.poolDeployer||!o){re.error("Please connect your wallet and ensure contracts are configured");return}f(!0);try{const M=o.getSigner(),ee=Math.floor(new Date(U.startTime).getTime()/1e3),O=parseInt(U.duration)*60,q=U.slotFee?ac(U.slotFee):0,H=y&&U.holderTokenAddress?U.holderTokenAddress:$e,J=y?parseInt(U.holderTokenStandard):0,Q=y&&U.minHolderTokenBalance?ce.from(parseInt(U.minHolderTokenBalance)):ce.from(0),ne=y&&U.holderTokenId?parseInt(U.holderTokenId):0,se={name:U.name,startTime:ee,duration:O,slotLimit:parseInt(U.slotLimit),winnersCount:parseInt(U.winnersCount),maxSlotsPerAddress:parseInt(U.maxTicketsPerUser),isPrized:!0,customSlotFee:q,erc721Drop:!0,erc1155Drop:!1,prizeCollection:U.collection,standard:0,prizeTokenId:0,amountPerWinner:1,creator:s,erc20PrizeToken:$e,erc20PrizeAmount:0,nativePrizeAmount:0,holderTokenAddress:H,holderTokenStandard:J,minHolderTokenBalance:Q,holderTokenBalance:Q,holderTokenId:ne,socialEngagementRequired:j,socialTaskDescription:j?U.socialTaskDescription:"",description:U.description||"",twitterLink:U.twitterLink||"",discordLink:U.discordLink||"",telegramLink:U.telegramLink||""};let ie=ce.from(0);j&&(ie=await a.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt(ie),"ETH"));const le=await(await a.poolDeployer.connect(M).createPool(se,{value:ie})).wait(),me=(N=le==null?void 0:le.events)==null?void 0:N.find(te=>te.event==="PoolCreated"),Ee=((F=me==null?void 0:me.args)==null?void 0:F.pool)||((E=me==null?void 0:me.args)==null?void 0:E[0]);Ee&&w(Ee),re.success("Your raffle was created successfully!")}catch(M){console.error("Error creating raffle:",M),re.error(sy(M))}finally{f(!1)}},z=N=>N?new Date(N).toLocaleString():"Not set",R=[{label:"Pool Name",value:U.name||"Not set",type:"text"},{label:"Collection Address",value:U.collection||"Not set",type:"text"},{label:"Start Time",value:z(U.startTime),type:"date"},{label:"Duration",value:U.duration?`${U.duration} minutes`:"Not set",type:"time"},{label:"Max Slots",value:U.slotLimit||"Not set",type:"users"},{label:"Winners",value:U.winnersCount||"Not set",type:"prize"},{label:"Max Slots Per Address",value:U.maxTicketsPerUser||"Not set",type:"users"},{label:"Slot Fee",value:U.slotFee?`${U.slotFee} ${l()}`:"Not set",type:"currency"},...y?[{label:"Token-Gated",value:"Yes",variant:"success"}]:[],...j?[{label:"Social Tasks",value:"Enabled",variant:"success"}]:[]],I=()=>{w(null),m(!1),n==null||n(!1),K({name:"",collection:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerUser:"",slotFee:"",holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:""}),T(!1),_(!1)};return g?i.jsx(ut,{variant:"elevated",className:"p-8 max-w-3xl mx-auto text-center",children:i.jsxs(Be.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-success/10 mb-4",children:i.jsx(fo,{className:"h-8 w-8 text-success"})}),i.jsx("h2",{className:"font-display text-2xl font-bold mb-2",children:"Raffle Created Successfully!"}),i.jsx("p",{className:"text-muted-foreground",children:"Your ERC721 drop raffle has been deployed to the blockchain."})]}),i.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Raffle Address"}),i.jsx("p",{className:"font-mono text-sm break-all",children:g})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx(ji,{to:`/raffle/${g}`,children:i.jsxs(we,{variant:"primary",className:"gap-2 w-full sm:w-auto",children:[i.jsx(Ur,{className:"h-4 w-4"}),"View Raffle"]})}),i.jsxs(we,{variant:"secondary",onClick:I,className:"gap-2",children:[i.jsx(Pi,{className:"h-4 w-4"}),"Create Another"]})]})]})}):p?i.jsx(hu,{title:"Review Your Raffle",description:"Please review the details before creating your raffle",data:R,status:u?"submitting":"preview",statusMessage:u?"Creating your raffle...":void 0,onEdit:()=>{m(!1),n==null||n(!1)},onCancel:()=>{m(!1),n==null||n(!1)},onSubmit:L,submitLabel:"Create Raffle",editLabel:"Edit Details"}):i.jsxs("div",{className:"relative",children:[Y&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:Y,alt:"Collection artwork",onLoad:X,onError:V,style:{display:"none"}}),i.jsx("div",{className:"fixed inset-0 top-0 left-0 w-full h-1/2 opacity-40 pointer-events-none z-0",style:{backgroundImage:`url(${Y})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(0.5px) brightness(1.2) contrast(1.1)"}})]}),G&&i.jsx("div",{className:"fixed inset-0 top-0 left-0 w-full h-1/2 flex items-center justify-center pointer-events-none z-20",children:i.jsxs("div",{className:"bg-background/90 backdrop-blur-sm rounded-lg px-4 py-3 flex items-center gap-3 shadow-lg",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-primary border-t-transparent"}),i.jsx("span",{className:"text-sm font-medium",children:"Loading artwork..."})]})}),i.jsxs(ut,{variant:"elevated",className:"p-6 max-w-3xl mx-auto relative z-10",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-display text-xl font-semibold",children:"ERC721 Drop Event"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a raffle for NFT collection drops"})]}),i.jsx("div",{className:"flex items-center gap-2 mb-6 p-3 rounded-lg bg-muted/30",children:Object.entries(v).map(([N,F],E)=>i.jsxs(Ae.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-1.5 text-sm ${F?"text-success":"text-muted-foreground"}`,children:[F?i.jsx(Bs,{className:"h-4 w-4"}):i.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-current"}),i.jsx("span",{className:"hidden sm:inline capitalize",children:N})]}),E<2&&i.jsx("div",{className:"flex-1 h-px bg-border"})]},N))}),i.jsxs("form",{onSubmit:N=>{N.preventDefault(),C()},className:"space-y-4",children:[i.jsx(lr,{title:"Basic Information",icon:Wl,defaultOpen:!0,isComplete:v.basic,hasError:!!D.name||!!D.collection,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Pool Name *"}),i.jsx("input",{type:"text",value:U.name||"",onChange:N=>A("name",N.target.value),onBlur:()=>x("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"My NFT Drop",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Collection Address *"}),i.jsx("input",{type:"text",placeholder:"0x...",value:U.collection,onChange:N=>A("collection",N.target.value),onBlur:()=>x("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background font-mono",required:!0})]})]})}),i.jsx(lr,{title:"Timing",icon:yr,defaultOpen:!0,isComplete:v.timing,hasError:!!D.startTime||!!D.duration,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Start Time *"}),i.jsx("input",{type:"datetime-local",value:U.startTime||"",onChange:N=>A("startTime",N.target.value),onBlur:()=>x("timing"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Duration (minutes) *",c.minDuration&&c.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",Math.ceil(Number(c.minDuration)/60)," min",i.jsx("br",{}),"Max: ",Math.floor(Number(c.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",min:"1",value:U.duration||"",onChange:N=>A("duration",N.target.value),onBlur:()=>x("timing"),onWheel:N=>N.target instanceof HTMLElement&&N.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"60",required:!0})]})]})}),i.jsx(lr,{title:"Participation Rules",icon:os,defaultOpen:!0,isComplete:v.participation,hasError:!!D.slotLimit||!!D.winnersCount||!!D.maxTicketsPerUser,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Slot Limit *",c.minSlot&&c.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",c.minSlot,i.jsx("br",{}),"Max: ",c.maxSlot]})})]})]}),i.jsx("input",{type:"number",min:"1",value:U.slotLimit||"",onChange:N=>A("slotLimit",N.target.value),onBlur:()=>x("participation"),onWheel:N=>N.target instanceof HTMLElement&&N.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"100",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Number of Winners *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Winners must not exceed 30% of slot limit"})]})]}),i.jsx("input",{type:"number",value:U.winnersCount||"",onChange:N=>A("winnersCount",N.target.value),onBlur:()=>x("participation"),onWheel:N=>N.target instanceof HTMLElement&&N.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"10",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Max slots per address must not exceed 0.1% of slot limit"})]})]}),i.jsx("input",{type:"number",min:"1",value:U.maxTicketsPerUser||"",onChange:N=>A("maxTicketsPerUser",N.target.value),onBlur:()=>x("participation"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"5",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2",children:[l("ticket")," *"]}),i.jsx("input",{type:"number",min:"0",step:"any",value:U.slotFee||"",onChange:N=>A("slotFee",N.target.value),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"0 for free giveaway",required:!0}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Enter 0 for NFT giveaway"})]})]})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Yo,{tokenGatedEnabled:y,onTokenGatedChange:T,formData:U,handleChange:A,required:!0})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Jo,{formData:U,handleChange:A,socialEngagementEnabled:j,setSocialEngagementEnabled:_})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Xo,{formData:U,handleChange:A})}),i.jsx("div",{className:"flex gap-4 pt-4",children:i.jsx(we,{type:"button",onClick:C,disabled:u||!r,variant:"primary",size:"lg",className:"flex-1",children:u?i.jsxs(i.Fragment,{children:[i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Review & Create"})})]})]})]})}function wme({onReviewStateChange:t}){const{connected:e,address:n,provider:r}=an(),{contracts:s}=xn(),{getCurrencyLabel:o}=er(),a=Qh(s,!0),[l,c]=k.useState(!1),[u,f]=k.useState(!1),[p,m]=k.useState(null),[g,w]=k.useState(!1),[y,T]=k.useState({basic:!1,timing:!1,participation:!1}),[j,_]=k.useState({}),[v,P]=k.useState({name:"",collectionAddress:"",tokenId:"",amountPerWinner:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxSlotsPerAddress:"",slotFee:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),{backgroundImage:D,imageLoading:$,handleImageLoad:U,handleImageError:K}=ZB(v.collectionAddress,r,"erc1155Prize"),Y=(L,z)=>{P(R=>({...R,[L]:z})),_(R=>({...R,[L]:void 0}))},G=L=>{var R,I;const z={};switch(L){case"basic":(R=v.name)!=null&&R.trim()||(z.name="Pool name is required"),(I=v.collectionAddress)!=null&&I.trim()||(z.collectionAddress="Collection address is required"),v.tokenId||(z.tokenId="Token ID is required"),v.amountPerWinner||(z.amountPerWinner="Amount per winner is required");break;case"timing":v.startTime||(z.startTime="Start time is required"),v.duration?a.minDuration&&parseInt(v.duration)*60<parseInt(a.minDuration)?z.duration=`Minimum duration is ${Math.ceil(parseInt(a.minDuration)/60)} minutes`:a.maxDuration&&parseInt(v.duration)*60>parseInt(a.maxDuration)&&(z.duration=`Maximum duration is ${Math.floor(parseInt(a.maxDuration)/60)} minutes`):z.duration="Duration is required";break;case"participation":v.slotLimit?a.minSlot&&parseInt(v.slotLimit)<parseInt(a.minSlot)?z.slotLimit=`Minimum slots is ${a.minSlot}`:a.maxSlot&&parseInt(v.slotLimit)>parseInt(a.maxSlot)&&(z.slotLimit=`Maximum slots is ${a.maxSlot}`):z.slotLimit="Slot limit is required",v.winnersCount||(z.winnersCount="Number of winners is required"),v.maxSlotsPerAddress||(z.maxSlotsPerAddress="Max slots per address is required");break}return _(N=>({...N,...z})),Object.keys(z).length===0};k.useEffect(()=>{var L,z;T({basic:!!((L=v.name)!=null&&L.trim())&&!!((z=v.collectionAddress)!=null&&z.trim())&&!!v.tokenId&&!!v.amountPerWinner,timing:!!v.startTime&&!!v.duration,participation:!!v.slotLimit&&!!v.winnersCount&&!!v.maxSlotsPerAddress})},[v]);const X=()=>{f(!0),t==null||t(!0)},V=async()=>{var L,z,R;if(!e||!s.poolDeployer||!r){re.error("Please connect your wallet and ensure contracts are configured");return}c(!0);try{const I=r.getSigner(),N=Math.floor(new Date(v.startTime).getTime()/1e3),F=parseInt(v.duration)*60,E=v.slotFee&&v.slotFee!==""?ac(String(v.slotFee)):0,M={name:v.name,startTime:N,duration:F,slotLimit:parseInt(v.slotLimit),winnersCount:parseInt(v.winnersCount),maxSlotsPerAddress:parseInt(v.maxSlotsPerAddress),isPrized:!0,customSlotFee:E,erc721Drop:!1,erc1155Drop:!0,prizeCollection:v.collectionAddress,standard:1,prizeTokenId:parseInt(v.tokenId),amountPerWinner:parseInt(v.amountPerWinner),creator:n,erc20PrizeToken:$e,erc20PrizeAmount:0,nativePrizeAmount:0,holderTokenAddress:v.tokenGatedEnabled&&v.holderTokenAddress||$e,holderTokenStandard:v.tokenGatedEnabled?parseInt(v.holderTokenStandard):0,minHolderTokenBalance:v.tokenGatedEnabled&&v.minHolderTokenBalance!==""?ce.from(parseInt(v.minHolderTokenBalance)):ce.from(0),holderTokenBalance:v.tokenGatedEnabled&&v.minHolderTokenBalance!==""?ce.from(parseInt(v.minHolderTokenBalance)):ce.from(0),holderTokenId:v.tokenGatedEnabled&&(v.holderTokenStandard==="0"||v.holderTokenStandard==="1")&&v.holderTokenId!==""?parseInt(v.holderTokenId):0,socialEngagementRequired:g,socialTaskDescription:g?v.socialTaskDescription:"",description:v.description||"",twitterLink:v.twitterLink||"",discordLink:v.discordLink||"",telegramLink:v.telegramLink||""};let ee=ce.from(0);g&&(ee=await s.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt(ee),"ETH"));const q=await(await s.poolDeployer.connect(I).createPool(M,{value:ee})).wait(),H=(L=q==null?void 0:q.events)==null?void 0:L.find(Q=>Q.event==="PoolCreated"),J=((z=H==null?void 0:H.args)==null?void 0:z.pool)||((R=H==null?void 0:H.args)==null?void 0:R[0]);J&&m(J),re.success("Your raffle was created successfully!")}catch(I){console.error("Error creating raffle:",I),gn(I)}finally{c(!1)}},A=L=>L?new Date(L).toLocaleString():"Not set",x=[{label:"Pool Name",value:v.name||"Not set",type:"text"},{label:"Collection Address",value:v.collectionAddress||"Not set",type:"text"},{label:"Token ID",value:v.tokenId||"Not set",type:"text"},{label:"Amount Per Winner",value:v.amountPerWinner||"Not set",type:"text"},{label:"Start Time",value:A(v.startTime),type:"date"},{label:"Duration",value:v.duration?`${v.duration} minutes`:"Not set",type:"time"},{label:"Max Slots",value:v.slotLimit||"Not set",type:"users"},{label:"Winners",value:v.winnersCount||"Not set",type:"prize"},{label:"Max Slots Per Address",value:v.maxSlotsPerAddress||"Not set",type:"users"},{label:"Slot Fee",value:v.slotFee?`${v.slotFee} ${o()}`:"Not set",type:"currency"},...g?[{label:"Social Tasks",value:"Enabled",variant:"success"}]:[]],C=()=>{m(null),f(!1),t==null||t(!1),P({name:"",collectionAddress:"",tokenId:"",amountPerWinner:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxSlotsPerAddress:"",slotFee:""}),w(!1)};return p?i.jsx(ut,{variant:"elevated",className:"p-8 max-w-3xl mx-auto text-center",children:i.jsxs(Be.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-success/10 mb-4",children:i.jsx(fo,{className:"h-8 w-8 text-success"})}),i.jsx("h2",{className:"font-display text-2xl font-bold mb-2",children:"Raffle Created Successfully!"}),i.jsx("p",{className:"text-muted-foreground",children:"Your ERC1155 drop raffle has been deployed to the blockchain."})]}),i.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Raffle Address"}),i.jsx("p",{className:"font-mono text-sm break-all",children:p})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx(ji,{to:`/raffle/${p}`,children:i.jsxs(we,{variant:"primary",className:"gap-2 w-full sm:w-auto",children:[i.jsx(Ur,{className:"h-4 w-4"}),"View Raffle"]})}),i.jsxs(we,{variant:"secondary",onClick:C,className:"gap-2",children:[i.jsx(Pi,{className:"h-4 w-4"}),"Create Another"]})]})]})}):u?i.jsx(hu,{title:"Review Your Raffle",description:"Please review the details before creating your raffle",data:x,status:l?"submitting":"preview",statusMessage:l?"Creating your raffle...":void 0,onEdit:()=>{f(!1),t==null||t(!1)},onCancel:()=>{f(!1),t==null||t(!1)},onSubmit:V,submitLabel:"Create Raffle",editLabel:"Edit Details"}):i.jsxs("div",{className:"relative",children:[D&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:D,alt:"Collection artwork",onLoad:U,onError:K,style:{display:"none"}}),i.jsx("div",{className:"fixed inset-0 top-0 left-0 w-full h-1/2 opacity-40 pointer-events-none z-0",style:{backgroundImage:`url(${D})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(0.5px) brightness(1.2) contrast(1.1)"}})]}),$&&i.jsx("div",{className:"fixed inset-0 top-0 left-0 w-full h-1/2 flex items-center justify-center pointer-events-none z-20",children:i.jsxs("div",{className:"bg-background/90 backdrop-blur-sm rounded-lg px-4 py-3 flex items-center gap-3 shadow-lg",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-primary border-t-transparent"}),i.jsx("span",{className:"text-sm font-medium",children:"Loading artwork..."})]})}),i.jsxs(ut,{variant:"elevated",className:"p-6 max-w-3xl mx-auto relative z-10",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-display text-xl font-semibold",children:"ERC1155 Drop Event"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a raffle for semi-fungible token drops"})]}),i.jsx("div",{className:"flex items-center gap-2 mb-6 p-3 rounded-lg bg-muted/30",children:Object.entries(y).map(([L,z],R)=>i.jsxs(Ae.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-1.5 text-sm ${z?"text-success":"text-muted-foreground"}`,children:[z?i.jsx(Bs,{className:"h-4 w-4"}):i.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-current"}),i.jsx("span",{className:"hidden sm:inline capitalize",children:L})]}),R<2&&i.jsx("div",{className:"flex-1 h-px bg-border"})]},L))}),i.jsxs("form",{onSubmit:L=>{L.preventDefault(),X()},className:"space-y-4",children:[i.jsx(lr,{title:"Basic Information",icon:Wl,defaultOpen:!0,isComplete:y.basic,hasError:!!j.name||!!j.collectionAddress||!!j.tokenId||!!j.amountPerWinner,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Pool Name *"}),i.jsx("input",{type:"text",value:v.name||"",onChange:L=>Y("name",L.target.value),onBlur:()=>G("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"My ERC1155 Drop",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Collection Address *"}),i.jsx("input",{type:"text",value:v.collectionAddress||"",onChange:L=>Y("collectionAddress",L.target.value),onBlur:()=>G("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background font-mono",placeholder:"0x...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Token ID *"}),i.jsx("input",{type:"number",min:"0",value:v.tokenId||"",onChange:L=>Y("tokenId",L.target.value),onBlur:()=>G("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"0",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Amount Per Winner *"}),i.jsx("input",{type:"number",min:"1",value:v.amountPerWinner||"",onChange:L=>Y("amountPerWinner",L.target.value),onBlur:()=>G("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"1",required:!0})]})]})}),i.jsx(lr,{title:"Timing",icon:yr,defaultOpen:!0,isComplete:y.timing,hasError:!!j.startTime||!!j.duration,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Start Time *"}),i.jsx("input",{type:"datetime-local",value:v.startTime||"",onChange:L=>Y("startTime",L.target.value),onBlur:()=>G("timing"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Duration (minutes) *",a.minDuration&&a.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",Math.ceil(Number(a.minDuration)/60)," min",i.jsx("br",{}),"Max: ",Math.floor(Number(a.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",value:v.duration||"",onChange:L=>Y("duration",L.target.value),onBlur:()=>G("timing"),onWheel:L=>L.target instanceof HTMLElement&&L.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"60",required:!0})]})]})}),i.jsx(lr,{title:"Participation Rules",icon:os,defaultOpen:!0,isComplete:y.participation,hasError:!!j.slotLimit||!!j.winnersCount||!!j.maxSlotsPerAddress,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Slot Limit *",a.minSlot&&a.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",a.minSlot,i.jsx("br",{}),"Max: ",a.maxSlot]})})]})]}),i.jsx("input",{type:"number",value:v.slotLimit||"",onChange:L=>Y("slotLimit",L.target.value),onBlur:()=>G("participation"),onWheel:L=>L.target instanceof HTMLElement&&L.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"100",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Number of Winners *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Winners must not exceed 30% of slot limit"})]})]}),i.jsx("input",{type:"number",value:v.winnersCount||"",onChange:L=>Y("winnersCount",L.target.value),onBlur:()=>G("participation"),onWheel:L=>L.target instanceof HTMLElement&&L.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"10",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Max slots per address must not exceed 0.1% of slot limit"})]})]}),i.jsx("input",{type:"number",value:v.maxSlotsPerAddress||"",onChange:L=>Y("maxSlotsPerAddress",L.target.value),onBlur:()=>G("participation"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"5",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:o("ticket")}),i.jsx("input",{type:"number",step:"0.001",value:v.slotFee||"",onChange:L=>Y("slotFee",L.target.value),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"0 for free giveaway"}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Leave empty to use protocol default"})]})]})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Yo,{formData:v,handleChange:Y,required:!0,useFormDataEnabled:!0})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Jo,{formData:v,handleChange:Y,socialEngagementEnabled:g,setSocialEngagementEnabled:w})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Xo,{formData:v,handleChange:Y})}),i.jsx("div",{className:"flex gap-4 pt-4",children:i.jsx(we,{type:"button",onClick:X,disabled:l||!e,variant:"primary",size:"lg",className:"flex-1",children:l?i.jsxs(i.Fragment,{children:[i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Review & Create"})})]})]})]})}function kme({onReviewStateChange:t}){const{connected:e,address:n,provider:r}=an(),{contracts:s}=xn(),{isMobile:o}=Ln(),{getCurrencyLabel:a}=er(),l=Qh(s,!0),[c,u]=k.useState(!1),[f,p]=k.useState(!1),[m,g]=k.useState(null),[w,y]=k.useState(!1),[T,j]=k.useState({basic:!1,timing:!1,participation:!1}),[_,v]=k.useState({}),[P,D]=k.useState({name:"",collectionAddress:"",tokenId:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerParticipant:"",slotFee:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),$=(A,x)=>{D(C=>({...C,[A]:x})),v(C=>({...C,[A]:void 0}))},U=A=>{var C,L;const x={};switch(A){case"basic":(C=P.name)!=null&&C.trim()||(x.name="Pool name is required"),(L=P.collectionAddress)!=null&&L.trim()||(x.collectionAddress="Collection address is required"),P.tokenId||(x.tokenId="Token ID is required");break;case"timing":P.startTime||(x.startTime="Start time is required"),P.duration?l.minDuration&&parseInt(P.duration)*60<parseInt(l.minDuration)?x.duration=`Minimum duration is ${Math.ceil(parseInt(l.minDuration)/60)} minutes`:l.maxDuration&&parseInt(P.duration)*60>parseInt(l.maxDuration)&&(x.duration=`Maximum duration is ${Math.floor(parseInt(l.maxDuration)/60)} minutes`):x.duration="Duration is required";break;case"participation":P.slotLimit?l.minSlot&&parseInt(P.slotLimit)<parseInt(l.minSlot)?x.slotLimit=`Minimum slots is ${l.minSlot}`:l.maxSlot&&parseInt(P.slotLimit)>parseInt(l.maxSlot)&&(x.slotLimit=`Maximum slots is ${l.maxSlot}`):x.slotLimit="Slot limit is required",P.winnersCount||(x.winnersCount="Number of winners is required"),P.maxTicketsPerParticipant||(x.maxTicketsPerParticipant="Max tickets per participant is required");break}return v(z=>({...z,...x})),Object.keys(x).length===0};k.useEffect(()=>{var A,x;j({basic:!!((A=P.name)!=null&&A.trim())&&!!((x=P.collectionAddress)!=null&&x.trim())&&!!P.tokenId,timing:!!P.startTime&&!!P.duration,participation:!!P.slotLimit&&!!P.winnersCount&&!!P.maxTicketsPerParticipant})},[P]);const K=()=>{p(!0),t==null||t(!0)},Y=async()=>{var A,x,C;if(!e||!s.poolDeployer||!r){re.error("Please connect your wallet and ensure contracts are configured");return}u(!0);try{const L=r.getSigner(),z=await e8({signer:L,tokenAddress:P.collectionAddress,prizeType:"erc721",spender:s.poolDeployer.address,tokenId:P.tokenId});if(!z.success){re.error("Token approval failed: "+z.error),u(!1);return}z.alreadyApproved||(re.success("ERC721 approval successful!"),await new Promise(H=>setTimeout(H,2e3)));const R=Math.floor(new Date(P.startTime).getTime()/1e3),I=parseInt(P.duration)*60,N=P.slotFee?ac(P.slotFee):0,F={name:P.name,startTime:R,duration:I,slotLimit:parseInt(P.slotLimit),winnersCount:parseInt(P.winnersCount),maxSlotsPerAddress:parseInt(P.maxSlotsPerAddress),isPrized:!0,customSlotFee:N,erc721Drop:!1,prizeCollection:P.collectionAddress,standard:0,prizeTokenId:parseInt(P.tokenId),amountPerWinner:1,collectionBaseURI:"",creator:n,erc20PrizeToken:$e,erc20PrizeAmount:0,nativePrizeAmount:0,holderTokenAddress:P.tokenGatedEnabled?P.holderTokenAddress:$e,holderTokenStandard:P.tokenGatedEnabled?parseInt(P.holderTokenStandard):0,minHolderTokenBalance:P.tokenGatedEnabled&&P.minHolderTokenBalance!==""&&P.minHolderTokenBalance!==void 0?ce.from(parseInt(P.minHolderTokenBalance)):ce.from(0),holderTokenBalance:P.tokenGatedEnabled&&P.minHolderTokenBalance!==""&&P.minHolderTokenBalance!==void 0?ce.from(parseInt(P.minHolderTokenBalance)):ce.from(0),holderTokenId:P.tokenGatedEnabled&&(P.holderTokenStandard==="0"||P.holderTokenStandard==="1")&&P.holderTokenId!==""&&P.holderTokenId!==void 0?parseInt(P.holderTokenId):0,socialEngagementRequired:w,socialTaskDescription:w?P.socialTaskDescription:"",description:P.description||"",twitterLink:P.twitterLink||"",discordLink:P.discordLink||"",telegramLink:P.telegramLink||""};let E=ce.from(0);w&&(E=await s.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt(E),"ETH"));const ee=await(await s.poolDeployer.connect(L).createPool(F,{value:E})).wait(),O=(A=ee==null?void 0:ee.events)==null?void 0:A.find(H=>H.event==="PoolCreated"),q=((x=O==null?void 0:O.args)==null?void 0:x.pool)||((C=O==null?void 0:O.args)==null?void 0:C[0]);q&&g(q),re.success("Your raffle was created successfully!")}catch(L){console.error("Error creating raffle:",L),re.error(sy(L))}finally{u(!1)}},G=A=>A?new Date(A).toLocaleString():"Not set",X=[{label:"Pool Name",value:P.name||"Not set",type:"text"},{label:"Prize Collection",value:P.collectionAddress||"Not set",type:"text"},{label:"Prize Token ID",value:P.tokenId||"Not set",type:"text"},{label:"Start Time",value:G(P.startTime),type:"date"},{label:"Duration",value:P.duration?`${P.duration} minutes`:"Not set",type:"time"},{label:"Max Slots",value:P.slotLimit||"Not set",type:"users"},{label:"Winners",value:P.winnersCount||"1",type:"prize"},{label:"Max Slots Per Address",value:P.maxSlotsPerAddress||"Not set",type:"users"},{label:"Slot Fee",value:P.slotFee?`${P.slotFee} ${a()}`:"Not set",type:"currency"},...w?[{label:"Social Tasks",value:"Enabled",variant:"success"}]:[]],V=()=>{g(null),p(!1),t==null||t(!1),D({name:"",collectionAddress:"",tokenId:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxSlotsPerAddress:"",slotFee:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0"}),y(!1)};return m?i.jsx(ut,{variant:"elevated",className:"p-8 max-w-3xl mx-auto text-center",children:i.jsxs(Be.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-success/10 mb-4",children:i.jsx(fo,{className:"h-8 w-8 text-success"})}),i.jsx("h2",{className:"font-display text-2xl font-bold mb-2",children:"Raffle Created Successfully!"}),i.jsx("p",{className:"text-muted-foreground",children:"Your NFT lucky sale raffle has been deployed to the blockchain."})]}),i.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Raffle Address"}),i.jsx("p",{className:"font-mono text-sm break-all",children:m})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx(ji,{to:`/raffle/${m}`,children:i.jsxs(we,{variant:"primary",className:"gap-2 w-full sm:w-auto",children:[i.jsx(Ur,{className:"h-4 w-4"}),"View Raffle"]})}),i.jsxs(we,{variant:"secondary",onClick:V,className:"gap-2",children:[i.jsx(Pi,{className:"h-4 w-4"}),"Create Another"]})]})]})}):f?i.jsx(hu,{title:"Review Your Raffle",description:"Please review the details before creating your raffle",data:X,status:c?"submitting":"preview",statusMessage:c?"Creating your raffle...":void 0,onEdit:()=>{p(!1),t==null||t(!1)},onCancel:()=>{p(!1),t==null||t(!1)},onSubmit:Y,submitLabel:"Create Raffle",editLabel:"Edit Details"}):i.jsxs(ut,{variant:"elevated",className:"p-6 max-w-3xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-display text-xl font-semibold",children:"NFT Lucky Sale Event"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Raffle off an existing NFT from your wallet"})]}),i.jsx("div",{className:"flex items-center gap-2 mb-6 p-3 rounded-lg bg-muted/30",children:Object.entries(T).map(([A,x],C)=>i.jsxs(Ae.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-1.5 text-sm ${x?"text-success":"text-muted-foreground"}`,children:[x?i.jsx(Bs,{className:"h-4 w-4"}):i.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-current"}),i.jsx("span",{className:"hidden sm:inline capitalize",children:A})]}),C<2&&i.jsx("div",{className:"flex-1 h-px bg-border"})]},A))}),i.jsxs("form",{onSubmit:A=>{A.preventDefault(),K()},className:"space-y-4",children:[i.jsx(lr,{title:"Basic Information",icon:Wl,defaultOpen:!0,isComplete:T.basic,hasError:!!_.name||!!_.collectionAddress||!!_.tokenId,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Pool Name *"}),i.jsx("input",{type:"text",value:P.name||"",onChange:A=>$("name",A.target.value),onBlur:()=>U("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"My NFT Lucky Sale",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Prize Collection Address *"}),i.jsx("input",{type:"text",value:P.collectionAddress||"",onChange:A=>$("collectionAddress",A.target.value),onBlur:()=>U("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background font-mono",placeholder:"0x...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Token ID *"}),i.jsx("input",{type:"number",min:"0",value:P.tokenId||"",onChange:A=>$("tokenId",A.target.value),onBlur:()=>U("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"0",required:!0})]})]})}),i.jsx(lr,{title:"Timing",icon:yr,defaultOpen:!0,isComplete:T.timing,hasError:!!_.startTime||!!_.duration,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Start Time *"}),i.jsx("input",{type:"datetime-local",value:P.startTime||"",onChange:A=>$("startTime",A.target.value),onBlur:()=>U("timing"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Duration (minutes) *",l.minDuration&&l.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",Math.ceil(Number(l.minDuration)/60)," min",i.jsx("br",{}),"Max: ",Math.floor(Number(l.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",value:P.duration||"",onChange:A=>$("duration",A.target.value),onBlur:()=>U("timing"),onWheel:A=>A.target instanceof HTMLElement&&A.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"60",required:!0})]})]})}),i.jsx(lr,{title:"Participation Rules",icon:os,defaultOpen:!0,isComplete:T.participation,hasError:!!_.slotLimit||!!_.winnersCount||!!_.maxTicketsPerParticipant,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Slot Limit *",l.minSlot&&l.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",l.minSlot,i.jsx("br",{}),"Max: ",l.maxSlot]})})]})]}),i.jsx("input",{type:"number",value:P.slotLimit||"",onChange:A=>$("slotLimit",A.target.value),onBlur:()=>U("participation"),onWheel:A=>A.target instanceof HTMLElement&&A.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"100",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Number of Winners *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"This raffle type supports only one winner"})]})]}),i.jsx("input",{type:"number",value:P.winnersCount||"",onChange:A=>$("winnersCount",A.target.value),onBlur:()=>U("participation"),onWheel:A=>A.target instanceof HTMLElement&&A.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"1",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Max slots per address must not exceed 0.1% of slot limit"})]})]}),i.jsx("input",{type:"number",value:P.maxSlotsPerAddress||"",onChange:A=>$("maxSlotsPerAddress",A.target.value),onBlur:()=>U("participation"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"5",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2",children:[a("ticket")," *"]}),i.jsx("input",{type:"number",step:"any",value:P.slotFee||"",onChange:A=>$("slotFee",A.target.value),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"0 for free giveaway",required:!0}),i.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Enter 0 for NFT giveaway"})]})]})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Yo,{formData:P,handleChange:$,required:!0,useFormDataEnabled:!0})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Jo,{formData:P,handleChange:$,socialEngagementEnabled:w,setSocialEngagementEnabled:y})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Xo,{formData:P,handleChange:$})}),i.jsx("div",{className:"flex gap-4 pt-4",children:i.jsx(we,{type:"button",onClick:K,disabled:c||!e,variant:"primary",size:"lg",className:"flex-1",children:c?i.jsxs(i.Fragment,{children:[i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}),"Approving & Creating..."]}):"Review & Create"})})]})]})}function Tme({onReviewStateChange:t}){const{connected:e,address:n,provider:r}=an(),{contracts:s}=xn(),{isMobile:o}=Ln(),{getCurrencyLabel:a}=er(),l=Qh(s,!0),[c,u]=k.useState(!1),[f,p]=k.useState(!1),[m,g]=k.useState(null),[w,y]=k.useState(!1),[T,j]=k.useState({basic:!1,timing:!1,participation:!1}),[_,v]=k.useState({}),[P,D]=k.useState({name:"",ethAmount:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerParticipant:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),$=(A,x)=>{D(C=>({...C,[A]:x})),v(C=>({...C,[A]:void 0}))},U=A=>{var C;const x={};switch(A){case"basic":(C=P.name)!=null&&C.trim()||(x.name="Pool name is required"),P.ethAmount||(x.ethAmount="Prize amount is required");break;case"timing":P.startTime||(x.startTime="Start time is required"),P.duration?l.minDuration&&parseInt(P.duration)*60<parseInt(l.minDuration)?x.duration=`Minimum duration is ${Math.ceil(parseInt(l.minDuration)/60)} minutes`:l.maxDuration&&parseInt(P.duration)*60>parseInt(l.maxDuration)&&(x.duration=`Maximum duration is ${Math.floor(parseInt(l.maxDuration)/60)} minutes`):x.duration="Duration is required";break;case"participation":P.slotLimit?l.minSlot&&parseInt(P.slotLimit)<parseInt(l.minSlot)?x.slotLimit=`Minimum slots is ${l.minSlot}`:l.maxSlot&&parseInt(P.slotLimit)>parseInt(l.maxSlot)&&(x.slotLimit=`Maximum slots is ${l.maxSlot}`):x.slotLimit="Slot limit is required",P.winnersCount||(x.winnersCount="Number of winners is required"),P.maxTicketsPerParticipant||(x.maxTicketsPerParticipant="Max tickets per participant is required");break}return v(L=>({...L,...x})),Object.keys(x).length===0};k.useEffect(()=>{var A;j({basic:!!((A=P.name)!=null&&A.trim())&&!!P.ethAmount,timing:!!P.startTime&&!!P.duration,participation:!!P.slotLimit&&!!P.winnersCount&&!!P.maxTicketsPerParticipant})},[P]);const K=()=>{p(!0),t==null||t(!0)},Y=async()=>{var A,x,C,L;if(!e||!s.poolDeployer||!r){re.error("Please connect your wallet and ensure contracts are configured");return}u(!0);try{const z=r.getSigner(),R=Math.floor(new Date(P.startTime).getTime()/1e3),I=parseInt(P.duration)*60,N=P.ethAmount?ac(P.ethAmount):ce.from(0),F={name:P.name,startTime:R,duration:I,slotLimit:parseInt(P.slotLimit),winnersCount:parseInt(P.winnersCount),maxSlotsPerAddress:parseInt(P.maxSlotsPerAddress),isPrized:!0,customSlotFee:0,erc721Drop:!1,prizeCollection:$e,standard:3,prizeTokenId:0,amountPerWinner:0,creator:n,erc20PrizeToken:$e,erc20PrizeAmount:ce.from(0),nativePrizeAmount:N,holderTokenAddress:P.tokenGatedEnabled?P.holderTokenAddress:$e,holderTokenStandard:P.tokenGatedEnabled?parseInt(P.holderTokenStandard):0,minHolderTokenBalance:P.tokenGatedEnabled&&P.minHolderTokenBalance!==""&&P.minHolderTokenBalance!==void 0?ce.from(parseInt(P.minHolderTokenBalance)):ce.from(0),holderTokenBalance:P.tokenGatedEnabled&&P.minHolderTokenBalance!==""&&P.minHolderTokenBalance!==void 0?ce.from(parseInt(P.minHolderTokenBalance)):ce.from(0),holderTokenId:P.tokenGatedEnabled&&(P.holderTokenStandard==="0"||P.holderTokenStandard==="1")&&P.holderTokenId!==""&&P.holderTokenId!==void 0?parseInt(P.holderTokenId):0,socialEngagementRequired:w,socialTaskDescription:w?P.socialTaskDescription:"",description:P.description||"",twitterLink:P.twitterLink||"",discordLink:P.discordLink||"",telegramLink:P.telegramLink||""};let E=ce.from(0);w&&(E=await s.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt(E),"ETH"));const M=N.add(E);console.log("Native prize amount:",Zt(N),"ETH"),console.log("Total value to send:",Zt(M),"ETH");let ee={success:!1};try{const O=await s.poolDeployer.connect(z).createPool(F,{value:M});ee={success:!0,receipt:await O.wait(),hash:O.hash}}catch(O){ee={success:!1,error:O.message}}if(ee.success){const O=(x=(A=ee.receipt)==null?void 0:A.events)==null?void 0:x.find(H=>H.event==="PoolCreated"),q=((C=O==null?void 0:O.args)==null?void 0:C.pool)||((L=O==null?void 0:O.args)==null?void 0:L[0]);q&&g(q),re.success("Your raffle was created successfully!")}else throw new Error(ee.error)}catch(z){console.error("Error creating raffle:",z),re.error(sy(z))}finally{u(!1)}},G=A=>A?new Date(A).toLocaleString():"Not set",X=[{label:"Pool Name",value:P.name||"Not set",type:"text"},{label:"Prize Amount",value:P.ethAmount?`${P.ethAmount} ${a()}`:"Not set",type:"currency"},{label:"Start Time",value:G(P.startTime),type:"date"},{label:"Duration",value:P.duration?`${P.duration} minutes`:"Not set",type:"time"},{label:"Max Slots",value:P.slotLimit||"Not set",type:"users"},{label:"Winners",value:P.winnersCount||"Not set",type:"prize"},{label:"Max Slots Per Address",value:P.maxSlotsPerAddress||"Not set",type:"users"},...w?[{label:"Social Tasks",value:"Enabled",variant:"success"}]:[]],V=()=>{g(null),p(!1),t==null||t(!1),D({name:"",ethAmount:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxTicketsPerParticipant:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0",socialTaskDescription:"",socialTasks:[]}),y(!1)};return m?i.jsx(ut,{variant:"elevated",className:"p-8 max-w-3xl mx-auto text-center",children:i.jsxs(Be.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-success/10 mb-4",children:i.jsx(fo,{className:"h-8 w-8 text-success"})}),i.jsx("h2",{className:"font-display text-2xl font-bold mb-2",children:"Raffle Created Successfully!"}),i.jsxs("p",{className:"text-muted-foreground",children:["Your ",a()," giveaway raffle has been deployed to the blockchain."]})]}),i.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Raffle Address"}),i.jsx("p",{className:"font-mono text-sm break-all",children:m})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx(ji,{to:`/raffle/${m}`,children:i.jsxs(we,{variant:"primary",className:"gap-2 w-full sm:w-auto",children:[i.jsx(Ur,{className:"h-4 w-4"}),"View Raffle"]})}),i.jsxs(we,{variant:"secondary",onClick:V,className:"gap-2",children:[i.jsx(Pi,{className:"h-4 w-4"}),"Create Another"]})]})]})}):f?i.jsx(hu,{title:"Review Your Raffle",description:"Please review the details before creating your raffle",data:X,status:c?"submitting":"preview",statusMessage:c?"Creating your raffle...":void 0,onEdit:()=>{p(!1),t==null||t(!1)},onCancel:()=>{p(!1),t==null||t(!1)},onSubmit:Y,submitLabel:"Create Raffle",editLabel:"Edit Details"}):i.jsxs(ut,{variant:"elevated",className:"p-6 max-w-3xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"font-display text-xl font-semibold",children:[a()," Giveaway"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Give away native tokens to your community"})]}),i.jsx("div",{className:"flex items-center gap-2 mb-6 p-3 rounded-lg bg-muted/30",children:Object.entries(T).map(([A,x],C)=>i.jsxs(Ae.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-1.5 text-sm ${x?"text-success":"text-muted-foreground"}`,children:[x?i.jsx(Bs,{className:"h-4 w-4"}):i.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-current"}),i.jsx("span",{className:"hidden sm:inline capitalize",children:A})]}),C<2&&i.jsx("div",{className:"flex-1 h-px bg-border"})]},A))}),i.jsxs("form",{onSubmit:A=>{A.preventDefault(),K()},className:"space-y-4",children:[i.jsx(lr,{title:"Basic Information",icon:Wl,defaultOpen:!0,isComplete:T.basic,hasError:!!_.name||!!_.ethAmount,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Pool Name *"}),i.jsx("input",{type:"text",value:P.name||"",onChange:A=>$("name",A.target.value),onBlur:()=>U("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"My Token Giveaway",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2",children:[a("prize")," *"]}),i.jsx("input",{type:"number",min:"0.00000001",step:"any",value:P.ethAmount||"",onChange:A=>$("ethAmount",A.target.value),onBlur:()=>U("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"0.1",required:!0})]})]})}),i.jsx(lr,{title:"Timing",icon:yr,defaultOpen:!0,isComplete:T.timing,hasError:!!_.startTime||!!_.duration,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Start Time *"}),i.jsx("input",{type:"datetime-local",value:P.startTime||"",onChange:A=>$("startTime",A.target.value),onBlur:()=>U("timing"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Duration (minutes) *",l.minDuration&&l.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",Math.ceil(Number(l.minDuration)/60)," min",i.jsx("br",{}),"Max: ",Math.floor(Number(l.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",value:P.duration||"",onChange:A=>$("duration",A.target.value),onBlur:()=>U("timing"),onWheel:A=>A.target instanceof HTMLElement&&A.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"60",required:!0})]})]})}),i.jsx(lr,{title:"Participation Rules",icon:os,defaultOpen:!0,isComplete:T.participation,hasError:!!_.slotLimit||!!_.winnersCount||!!_.maxTicketsPerParticipant,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Slot Limit *",l.minSlot&&l.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",l.minSlot,i.jsx("br",{}),"Max: ",l.maxSlot]})})]})]}),i.jsx("input",{type:"number",value:P.slotLimit||"",onChange:A=>$("slotLimit",A.target.value),onBlur:()=>U("participation"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"100",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Number of Winners *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Winners must not exceed 30% of slot limit"})]})]}),i.jsx("input",{type:"number",value:P.winnersCount||"",onChange:A=>$("winnersCount",A.target.value),onBlur:()=>U("participation"),onWheel:A=>A.target instanceof HTMLElement&&A.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"10",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Max slots per address must not exceed 0.1% of slot limit"})]})]}),i.jsx("input",{type:"number",value:P.maxSlotsPerAddress||"",onChange:A=>$("maxSlotsPerAddress",A.target.value),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"5",required:!0})]})]})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Yo,{formData:P,handleChange:$,required:!0,useFormDataEnabled:!0})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Jo,{formData:P,handleChange:$,socialEngagementEnabled:w,setSocialEngagementEnabled:y})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Xo,{formData:P,handleChange:$})}),i.jsx("div",{className:"flex gap-4 pt-4",children:i.jsx(we,{type:"button",onClick:K,disabled:c||!e,variant:"primary",size:"lg",className:"flex-1",children:c?i.jsxs(i.Fragment,{children:[i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Review & Create"})})]})]})}function Nme({onReviewStateChange:t}){const{connected:e,address:n,provider:r}=an(),{contracts:s}=xn(),{isMobile:o}=Ln(),a=Qh(s,!0),[l,c]=k.useState(!1),[u,f]=k.useState(!1),[p,m]=k.useState(null),[g,w]=k.useState(!1),[y,T]=k.useState({basic:!1,timing:!1,participation:!1}),[j,_]=k.useState({}),[v,P]=k.useState({name:"",tokenAddress:"",tokenAmount:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxSlotsPerAddress:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0",socialEngagementRequired:!1,socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),D=(V,A)=>{P(x=>({...x,[V]:A})),_(x=>({...x,[V]:void 0}))},$=V=>{var x,C;const A={};switch(V){case"basic":(x=v.name)!=null&&x.trim()||(A.name="Pool name is required"),(C=v.tokenAddress)!=null&&C.trim()||(A.tokenAddress="Token address is required"),v.tokenAmount||(A.tokenAmount="Token amount is required");break;case"timing":v.startTime||(A.startTime="Start time is required"),v.duration?a.minDuration&&parseInt(v.duration)*60<parseInt(a.minDuration)?A.duration=`Minimum duration is ${Math.ceil(parseInt(a.minDuration)/60)} minutes`:a.maxDuration&&parseInt(v.duration)*60>parseInt(a.maxDuration)&&(A.duration=`Maximum duration is ${Math.floor(parseInt(a.maxDuration)/60)} minutes`):A.duration="Duration is required";break;case"participation":v.slotLimit?a.minSlot&&parseInt(v.slotLimit)<parseInt(a.minSlot)?A.slotLimit=`Minimum slots is ${a.minSlot}`:a.maxSlot&&parseInt(v.slotLimit)>parseInt(a.maxSlot)&&(A.slotLimit=`Maximum slots is ${a.maxSlot}`):A.slotLimit="Slot limit is required",v.winnersCount||(A.winnersCount="Number of winners is required"),v.maxSlotsPerAddress||(A.maxSlotsPerAddress="Max slots per address is required");break}return _(L=>({...L,...A})),Object.keys(A).length===0};k.useEffect(()=>{var V,A;T({basic:!!((V=v.name)!=null&&V.trim())&&!!((A=v.tokenAddress)!=null&&A.trim())&&!!v.tokenAmount,timing:!!v.startTime&&!!v.duration,participation:!!v.slotLimit&&!!v.winnersCount&&!!v.maxSlotsPerAddress})},[v]);const U=()=>{f(!0),t==null||t(!0)},K=async()=>{var V,A,x;if(!e||!s.poolDeployer||!r){re.error("Please connect your wallet and ensure contracts are configured");return}c(!0);try{const C=r.getSigner(),L=await e8({signer:C,tokenAddress:v.tokenAddress,prizeType:"erc20",spender:s.poolDeployer.address,amount:v.tokenAmount});if(!L.success){re.error("Token approval failed: "+L.error),c(!1);return}L.alreadyApproved||(re.success("Token approval granted"),await new Promise(J=>setTimeout(J,2e3)));const R=await new Mt(v.tokenAddress,tn.erc20,C).decimals(),I=Math.floor(new Date(v.startTime).getTime()/1e3),N=parseInt(v.duration)*60,F=v.tokenAmount?xh(v.tokenAmount,R):ce.from(0),E={name:v.name,startTime:I,duration:N,slotLimit:parseInt(v.slotLimit),winnersCount:parseInt(v.winnersCount),maxSlotsPerAddress:parseInt(v.maxSlotsPerAddress),isPrized:!0,customSlotFee:ce.from(0),erc721Drop:!1,prizeCollection:$e,standard:2,prizeTokenId:0,amountPerWinner:0,creator:n,erc20PrizeToken:v.tokenAddress,erc20PrizeAmount:F,nativePrizeAmount:ce.from(0),holderTokenAddress:v.tokenGatedEnabled?v.holderTokenAddress:$e,holderTokenStandard:v.tokenGatedEnabled?parseInt(v.holderTokenStandard):0,minHolderTokenBalance:v.tokenGatedEnabled&&v.minHolderTokenBalance!==""&&v.minHolderTokenBalance!==void 0?ce.from(parseInt(v.minHolderTokenBalance)):ce.from(0),holderTokenBalance:v.tokenGatedEnabled&&v.minHolderTokenBalance!==""&&v.minHolderTokenBalance!==void 0?ce.from(parseInt(v.minHolderTokenBalance)):ce.from(0),holderTokenId:v.tokenGatedEnabled&&(v.holderTokenStandard==="0"||v.holderTokenStandard==="1")&&v.holderTokenId!==""&&v.holderTokenId!==void 0?parseInt(v.holderTokenId):0,socialEngagementRequired:g,socialTaskDescription:g?v.socialTaskDescription:"",description:v.description||"",twitterLink:v.twitterLink||"",discordLink:v.discordLink||"",telegramLink:v.telegramLink||""};let M=ce.from(0);g&&(M=await s.protocolManager.socialEngagementFee(),console.log("Social engagement fee:",Zt(M),"ETH"));const O=await(await s.poolDeployer.connect(C).createPool(E,{value:M})).wait(),q=(V=O==null?void 0:O.events)==null?void 0:V.find(J=>J.event==="PoolCreated"),H=((A=q==null?void 0:q.args)==null?void 0:A.pool)||((x=q==null?void 0:q.args)==null?void 0:x[0]);H&&m(H),re.success("Your raffle was created successfully!")}catch(C){console.error("Error creating raffle:",C),re.error(sy(C))}finally{c(!1)}},Y=V=>V?new Date(V).toLocaleString():"Not set",G=[{label:"Pool Name",value:v.name||"Not set",type:"text"},{label:"Token Address",value:v.tokenAddress||"Not set",type:"text"},{label:"Total Token Amount",value:v.tokenAmount||"Not set",type:"text"},{label:"Start Time",value:Y(v.startTime),type:"date"},{label:"Duration",value:v.duration?`${v.duration} minutes`:"Not set",type:"time"},{label:"Max Slots",value:v.slotLimit||"Not set",type:"users"},{label:"Winners",value:v.winnersCount||"Not set",type:"prize"},{label:"Max Slots Per Address",value:v.maxSlotsPerAddress||"Not set",type:"users"},...g?[{label:"Social Tasks",value:"Enabled",variant:"success"}]:[]],X=()=>{m(null),f(!1),t==null||t(!1),P({name:"",tokenAddress:"",tokenAmount:"",startTime:"",duration:"",slotLimit:"",winnersCount:"",maxSlotsPerAddress:"",tokenGatedEnabled:!1,holderTokenAddress:"",holderTokenStandard:"0",minHolderTokenBalance:"",holderTokenId:"0",socialTaskDescription:"",socialTasks:[],description:"",twitterLink:"",discordLink:"",telegramLink:""}),w(!1)};return p?i.jsx(ut,{variant:"elevated",className:"p-8 max-w-3xl mx-auto text-center",children:i.jsxs(Be.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-success/10 mb-4",children:i.jsx(fo,{className:"h-8 w-8 text-success"})}),i.jsx("h2",{className:"font-display text-2xl font-bold mb-2",children:"Raffle Created Successfully!"}),i.jsx("p",{className:"text-muted-foreground",children:"Your ERC20 token giveaway raffle has been deployed to the blockchain."})]}),i.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Raffle Address"}),i.jsx("p",{className:"font-mono text-sm break-all",children:p})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx(ji,{to:`/raffle/${p}`,children:i.jsxs(we,{variant:"primary",className:"gap-2 w-full sm:w-auto",children:[i.jsx(Ur,{className:"h-4 w-4"}),"View Raffle"]})}),i.jsxs(we,{variant:"secondary",onClick:X,className:"gap-2",children:[i.jsx(Pi,{className:"h-4 w-4"}),"Create Another"]})]})]})}):u?i.jsx(hu,{title:"Review Your Raffle",description:"Please review the details before creating your raffle",data:G,status:l?"submitting":"preview",statusMessage:l?"Creating your raffle...":void 0,onEdit:()=>{f(!1),t==null||t(!1)},onCancel:()=>{f(!1),t==null||t(!1)},onSubmit:K,submitLabel:"Create Raffle",editLabel:"Edit Details"}):i.jsxs(ut,{variant:"elevated",className:"p-6 max-w-3xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-display text-xl font-semibold",children:"ERC20 Token Giveaway"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Give away ERC20 tokens to lucky participants"})]}),i.jsx("div",{className:"flex items-center gap-2 mb-6 p-3 rounded-lg bg-muted/30",children:Object.entries(y).map(([V,A],x)=>i.jsxs(Ae.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-1.5 text-sm ${A?"text-success":"text-muted-foreground"}`,children:[A?i.jsx(Bs,{className:"h-4 w-4"}):i.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-current"}),i.jsx("span",{className:"hidden sm:inline capitalize",children:V})]}),x<2&&i.jsx("div",{className:"flex-1 h-px bg-border"})]},V))}),i.jsxs("form",{onSubmit:V=>{V.preventDefault(),U()},className:"space-y-4",children:[i.jsx(lr,{title:"Basic Information",icon:Wl,defaultOpen:!0,isComplete:y.basic,hasError:!!j.name||!!j.tokenAddress||!!j.tokenAmount,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Pool Name *"}),i.jsx("input",{type:"text",value:v.name||"",onChange:V=>D("name",V.target.value),onBlur:()=>$("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"My Token Giveaway",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Token Address *"}),i.jsx("input",{type:"text",value:v.tokenAddress||"",onChange:V=>D("tokenAddress",V.target.value),onBlur:()=>$("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background font-mono",placeholder:"0x...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Total Token Amount *"}),i.jsx("input",{type:"number",min:"0.00000001",step:"any",value:v.tokenAmount||"",onChange:V=>D("tokenAmount",V.target.value),onBlur:()=>$("basic"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"1000",required:!0})]})]})}),i.jsx(lr,{title:"Timing",icon:yr,defaultOpen:!0,isComplete:y.timing,hasError:!!j.startTime||!!j.duration,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-sm font-medium mb-2",children:"Start Time *"}),i.jsx("input",{type:"datetime-local",value:v.startTime||"",onChange:V=>D("startTime",V.target.value),onBlur:()=>$("timing"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Duration (minutes) *",a.minDuration&&a.maxDuration&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",Math.ceil(Number(a.minDuration)/60)," min",i.jsx("br",{}),"Max: ",Math.floor(Number(a.maxDuration)/60)," min"]})})]})]}),i.jsx("input",{type:"number",value:v.duration||"",onChange:V=>D("duration",V.target.value),onBlur:()=>$("timing"),onWheel:V=>V.target instanceof HTMLElement&&V.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"60",required:!0})]})]})}),i.jsx(lr,{title:"Participation Rules",icon:os,defaultOpen:!0,isComplete:y.participation,hasError:!!j.slotLimit||!!j.winnersCount||!!j.maxSlotsPerAddress,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Slot Limit *",a.minSlot&&a.maxSlot&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsxs("div",{children:["Min: ",a.minSlot,i.jsx("br",{}),"Max: ",a.maxSlot]})})]})]}),i.jsx("input",{type:"number",value:v.slotLimit||"",onChange:V=>D("slotLimit",V.target.value),onBlur:()=>$("participation"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"100",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Number of Winners *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Winners must not exceed 30% of slot limit"})]})]}),i.jsx("input",{type:"number",value:v.winnersCount||"",onChange:V=>D("winnersCount",V.target.value),onBlur:()=>$("participation"),onWheel:V=>V.target instanceof HTMLElement&&V.target.blur(),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"10",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-sm font-medium mb-2 flex items-center gap-2",children:["Max Slots Per Address *",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:"Max slots per address must not exceed 0.1% of slot limit"})]})]}),i.jsx("input",{type:"number",value:v.maxSlotsPerAddress||"",onChange:V=>D("maxSlotsPerAddress",V.target.value),onBlur:()=>$("participation"),className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-background",placeholder:"5",required:!0})]})]})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Yo,{formData:v,handleChange:D,required:!0,useFormDataEnabled:!0})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Jo,{formData:v,handleChange:D,socialEngagementEnabled:g,setSocialEngagementEnabled:w})}),i.jsx("div",{className:"space-y-4",children:i.jsx(Xo,{formData:v,handleChange:D})}),i.jsx("div",{className:"flex gap-4 pt-4",children:i.jsx(we,{type:"button",onClick:U,disabled:l||!e,variant:"primary",size:"lg",className:"flex-1",children:l?i.jsxs(i.Fragment,{children:[i.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}),"Approving & Creating..."]}):"Review & Create"})})]})]})}const jme=()=>{const{connected:t,chainId:e}=an(),{isMobile:n}=Ln(),r=su(),[s,o]=k.useState(null),[a,l]=k.useState(!1),[c,u]=k.useState("");k.useEffect(()=>{var y;if((y=r.state)!=null&&y.fromDeployment){const{collectionType:T,collectionAddress:j}=r.state;T==="ERC721"?(o("nft-drop-721"),u(j||"")):T==="ERC1155"&&(o("nft-drop-1155"),u(j||"")),window.history.replaceState({},document.title)}},[r.state]),dme(s);const f=k.useCallback(()=>{if(!e||!jt[e])return!1;const y=jt[e].contractAddresses;return(y==null?void 0:y.poolDeployer)&&y.poolDeployer!=="0x..."&&(y==null?void 0:y.protocolManager)&&y.protocolManager!=="0x..."},[e]),p=k.useCallback(y=>{o(y.id)},[]),m=k.useCallback(()=>{o(null),u(""),l(!1)},[]),g=k.useMemo(()=>{if(!s)return null;const y={onReviewStateChange:l};switch(s){case"whitelist":return i.jsx(bme,{...y});case"nft-drop-721":return i.jsx(vme,{collectionAddress:c,setCollectionAddress:u,...y});case"nft-drop-1155":return i.jsx(wme,{...y});case"lucky-sale":return i.jsx(kme,{...y});case"native-giveaway":return i.jsx(Tme,{...y});case"erc20-giveaway":return i.jsx(Nme,{...y});default:return null}},[s,c]),w={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.3}}};return t?f()?i.jsx("div",{className:"min-h-screen bg-background",children:i.jsx("div",{className:`${n?"px-4":"container mx-auto px-6 lg:px-8"} py-8`,children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsx(Jl,{mode:"wait",children:s?i.jsxs(Be.div,{variants:w,initial:"hidden",animate:"visible",exit:"exit",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs(we,{variant:"ghost",onClick:m,className:"gap-2",children:[i.jsx(J6,{className:"h-4 w-4"}),"Back"]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium",children:[i.jsx(Bs,{className:"h-4 w-4"}),i.jsx("span",{children:a?"Step 3 of 3":"Step 2 of 3"})]})]}),i.jsx("div",{className:"max-w-3xl mx-auto",children:g})]},"form-section"):i.jsxs(Be.div,{variants:w,initial:"hidden",animate:"visible",exit:"exit",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium mb-4",children:[i.jsx(Pi,{className:"h-4 w-4"}),i.jsx("span",{children:"Step 1 of 3"})]}),i.jsx("h2",{className:`font-display font-bold mb-2 ${n?"text-xl":"text-2xl"}`,children:"What type of raffle do you want to create?"}),i.jsx("p",{className:"text-muted-foreground max-w-xl mx-auto",children:"Select the type that best fits your needs. Each option has different features and requirements."})]}),i.jsx(QB,{selectedType:s,onTypeSelect:p,layout:n?"list":"grid",showFeatures:!n,showDescription:!0})]},"type-selection")})})})}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsx(Nv,{error:"CONTRACTS_NOT_AVAILABLE",onRetry:null,isMobile:n,showCreateButton:!1})}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs(Be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center max-w-md mx-auto px-4",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-purple-500/20 rounded-full blur-3xl"}),i.jsx(Yr,{className:`relative mx-auto text-muted-foreground ${n?"h-12 w-12":"h-16 w-16"}`})]}),i.jsx("h2",{className:`font-display font-bold mb-2 ${n?"text-xl":"text-2xl"}`,children:"Connect Your Wallet"}),i.jsx("p",{className:`text-muted-foreground ${n?"text-sm":"text-base"}`,children:"Please connect your wallet to create raffles and deploy collections."})]})})},Cme=()=>{const{connected:t,address:e,provider:n}=an(),{contracts:r}=xn(),{isMobile:s}=Ln();mo();const[o,a]=k.useState(!1),[l,c]=k.useState("ERC721"),[u,f]=k.useState(null),[p,m]=k.useState(!1),[g,w]=k.useState(!1),[y,T]=k.useState({name:"",symbol:"",baseURI:"",dropURI:"",royaltyPercentage:"",royaltyRecipient:e||"",maxSupply:"",revealType:"0",unrevealedBaseURI:"",revealTime:""}),[j,_]=k.useState({name:"",symbol:"",baseURI:"",dropURI:"",royaltyPercentage:"",royaltyRecipient:e||"",maxSupply:"0",revealType:"0",unrevealedBaseURI:"",revealTime:""});k.useEffect(()=>{e&&!y.royaltyRecipient&&(T(x=>({...x,royaltyRecipient:e})),_(x=>({...x,royaltyRecipient:e})))},[e]);const v=["https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/"],P=v.map(x=>x.replace("/ipfs/","/ipns/")),D=["https://arweave.net/"],$=x=>{if(!x)return[];if(x.startsWith("ipfs://")){let C=x.replace("ipfs://","");return C.startsWith("ipfs/")&&(C=C.slice(5)),v.map(L=>`${L}${C}`)}if(x.startsWith("ipns://")){let C=x.replace("ipns://","");return C.startsWith("ipns/")&&(C=C.slice(5)),P.map(L=>`${L}${C}`)}if(x.startsWith("ar://")){const C=x.replace("ar://","");return D.map(L=>`${L}${C}`)}try{const C=new URL(x),z=C.pathname.replace(/\/ipfs\/ipfs\//,"/ipfs/").split("/").filter(Boolean),R=z.indexOf("ipfs");if(R!==-1&&z[R+1]){const N=z.slice(R+1).join("/");return v.map(F=>`${F}${N}`)}const I=z.indexOf("ipns");if(I!==-1&&z[I+1]){const N=z.slice(I+1).join("/");return P.map(F=>`${F}${N}`)}if(C.hostname.endsWith("arweave.net")||C.hostname==="arweave.net"){const N=z.join("/");return D.map(F=>`${F}${N}`)}}catch{}return[x]},U=x=>{const C=["image","image_url","imageUrl","animation_url","animationUrl","media","artwork"];for(const L of C)if(x[L]){const z=x[L];if(typeof z=="string")return z.startsWith("ipfs://")||z.startsWith("ar://")?$(z):[z]}return null},K=async x=>{if(!x)return null;m(!0),w(!1);try{const C=G(x),L=[];for(const z of C){const R=$(z);L.push(...R)}for(const z of L)try{const R=await fetch(z,{headers:{Accept:"application/json, text/plain, */*"}});if(R.ok){const I=R.headers.get("content-type");try{const N=await R.text(),F=JSON.parse(N);if(F&&typeof F=="object"){const E=U(F);if(E&&E.length>0){const M=E[0];if(M.startsWith("ipfs://")||M.startsWith("ar://")){const ee=$(M);if(ee.length>0)return f(ee[0]),ee[0]}return f(M),M}}}catch{if(I!=null&&I.startsWith("image/")||z.match(/\.(jpg|jpeg|png|gif|svg|webp)$/i))return f(z),z}}}catch{continue}}catch(C){console.error("Error fetching artwork:",C)}finally{u||m(!1)}return null},Y=()=>{w(!0),m(!1)},G=x=>{const C=[],L=/\/$/.test(x),z=x.replace(/\/$/,"");if(x.match(/\/(?:[0-9]+)(?:\.json)?$/)){C.push(x),x.includes(".json")||C.push(`${x}.json`);const I=z.replace(/\/(?:[0-9]+)(?:\.json)?$/,"");I&&I!==z&&(C.push(I),C.push(`${I}/`),C.push(`${I}.json`),C.push(`${I}/.json`),C.push(`${I}/index.json`),C.push(`${I}/metadata.json`))}else C.push(x),L&&C.push(z),x.includes(".json")||(C.push(`${x}.json`),C.push(`${z}.json`)),C.push(`${x}index.json`),C.push(`${x}metadata.json`),L&&(C.push(`${z}/index.json`),C.push(`${z}/metadata.json`));return[...new Set(C)]};k.useEffect(()=>{const x=l==="ERC721"?y.dropURI:j.dropURI,C=l==="ERC721"?y.unrevealedBaseURI:j.unrevealedBaseURI;x&&x.trim()!==""?K(x):C&&C.trim()!==""?K(C):f(null)},[y.dropURI,y.unrevealedBaseURI,j.dropURI,j.unrevealedBaseURI,l]);const X=(x,C)=>{T(L=>({...L,[x]:C}))},V=(x,C)=>{_(L=>({...L,[x]:C}))},A=async(x,C)=>{var L,z,R;if(!t||!r.nftFactory||!n){re.error("Please connect your wallet and ensure contracts are configured");return}a(!0);try{if(!x.royaltyRecipient||!bn(x.royaltyRecipient)){re.error("Please provide a valid royalty recipient address"),a(!1);return}const I=n.getSigner(),N=C?0:1;let F=parseInt(x.revealType),E=x.unrevealedBaseURI,M=0;F===2&&(M=Math.floor(new Date(x.revealTime).getTime()/1e3)),F===0&&(E="",M=0);const ee="0x0000000000000000000000000000000000000000000000000000000000000000",O=((L=x.dropURI)==null?void 0:L.trim())||"",q=O&&O.length>0?ir(li(O)):ee,H=E&&E.trim().length>0?ir(li(E)):ee,J=x.royaltyPercentage?parseInt(x.royaltyPercentage)*100:0,Q=parseInt(x.maxSupply||"0"),ne=M;console.log("Deployment parameters:",{standard:N,name:x.name,symbol:x.symbol,baseURI:x.baseURI,dropURIHash:q,initialOwner:e,royaltyBps:J,royaltyRecipient:x.royaltyRecipient,maxSupply:Q,revealType:F,unrevealedURIHash:H,revealTimeUint48:ne});const pe=(R=(z=(await(await r.nftFactory.connect(I).deployCollection(N,x.name,x.symbol,x.baseURI,q,e,J,x.royaltyRecipient,Q,F,H,ne)).wait()).events.find(le=>le.event==="PrizeCollectionCreated"))==null?void 0:z.args)==null?void 0:R.collection;re.success(`${C?"ERC721":"ERC1155"} collection deployed successfully!`),C?T({name:"",symbol:"",baseURI:"",dropURI:"",royaltyPercentage:"",royaltyRecipient:e||"",maxSupply:"",revealType:"0",unrevealedBaseURI:"",revealTime:""}):_({name:"",symbol:"",baseURI:"",dropURI:"",royaltyPercentage:"",royaltyRecipient:e||"",maxSupply:"0",revealType:"0",unrevealedBaseURI:"",revealTime:""}),pe&&console.log("Collection deployed at:",pe)}catch(I){console.error("Error deploying collection:",I),re.error(I.message||"Failed to deploy collection")}finally{a(!1)}};return t?i.jsxs("div",{className:"min-h-screen bg-background pb-6 relative",children:[u&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:u,alt:"Collection artwork",onLoad:Y,onError:()=>{m(!1),f(null)},style:{display:"none"}}),i.jsx("div",{className:"absolute inset-0 top-0 left-0 w-full h-1/2 opacity-40 pointer-events-none",style:{backgroundImage:`url(${u})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(0.5px) brightness(1.2) contrast(1.1)"}})]}),p&&i.jsx("div",{className:"absolute inset-0 top-0 left-0 w-full h-1/2 flex items-center justify-center pointer-events-none z-20",children:i.jsxs("div",{className:"bg-background/90 backdrop-blur-sm rounded-lg px-4 py-3 flex items-center gap-3 shadow-lg",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-primary border-t-transparent"}),i.jsx("span",{className:"text-sm font-medium",children:"Loading artwork..."})]})}),i.jsxs("div",{className:`${s?"px-4":"container mx-auto px-8"} pt-8 pb-4 relative z-10`,children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:`text-3xl font-bold mb-4 font-display ${s?"text-2xl mb-2":""}`,children:"Deploy NFT Collection"}),i.jsx("p",{className:"text-muted-foreground text-[length:var(--text-base)] leading-relaxed",children:"This is where it all begins. Create the collection for your drop event below."})]}),i.jsx("div",{className:`max-w-3xl mx-auto ${s?"mt-6":"mt-16"}`,children:i.jsxs(ny,{value:l,onValueChange:c,className:"w-full",children:[i.jsxs(Sv,{className:`w-full flex items-center justify-center gap-2 ${s?"p-1.5 h-12 mb-6":"p-1 h-10 mb-8"} bg-muted/80 border border-border/50 shadow-sm`,children:[i.jsxs($o,{value:"ERC721",className:`flex items-center gap-2 flex-1 data-[state=active]:bg-background data-[state=active]:border-primary/20 data-[state=active]:shadow-md transition-all ${s?"h-9 text-sm":"h-[calc(100%-1px)]"}`,children:[i.jsx(Y0,{className:`${s?"h-3.5 w-3.5":"h-4 w-4"}`}),i.jsx("span",{className:"font-medium",children:s?"ERC721":"ERC721 Collection"})]}),i.jsxs($o,{value:"ERC1155",className:`flex items-center gap-2 flex-1 data-[state=active]:bg-background data-[state=active]:border-primary/20 data-[state=active]:shadow-md transition-all ${s?"h-9 text-sm":"h-[calc(100%-1px)]"}`,children:[i.jsx(ag,{className:`${s?"h-3.5 w-3.5":"h-4 w-4"}`}),i.jsx("span",{className:"font-medium",children:s?"ERC1155":"ERC1155 Collection"})]})]}),i.jsx(Bo,{value:"ERC721",children:i.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-card border border-border rounded-xl p-6 shadow-xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Y0,{className:"h-5 w-5"}),i.jsx("h3",{className:"font-display text-[length:var(--text-xl)] font-semibold",children:"Deploy ERC721 Collection"})]}),i.jsxs("form",{onSubmit:x=>{x.preventDefault(),A(y,!0)},className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Collection Name"}),i.jsx("input",{type:"text",value:y.name,onChange:x=>X("name",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Symbol"}),i.jsx("input",{type:"text",value:y.symbol,onChange:x=>X("symbol",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background uppercase",maxLength:10,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Base URI"}),i.jsx("input",{type:"url",value:y.baseURI,onChange:x=>X("baseURI",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background font-mono",placeholder:"https://api.example.com/metadata/",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Drop URI",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsx("div",{children:"Optional URI for your collection's drop page or storefront"})})]})]}),i.jsx("input",{type:"url",value:y.dropURI,onChange:x=>X("dropURI",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background font-mono",placeholder:"https://your-drops-page.com/collection"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Max Supply"}),i.jsx("input",{type:"number",value:y.maxSupply,onChange:x=>X("maxSupply",x.target.value),onWheel:x=>x.target instanceof HTMLElement&&x.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",min:"1",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Royalty Percentage (%)",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsx("div",{children:"Secondary sale royalty (e.g., 5 for 5%)"})})]})]}),i.jsx("input",{type:"number",value:y.royaltyPercentage,onChange:x=>X("royaltyPercentage",x.target.value),onWheel:x=>x.target instanceof HTMLElement&&x.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",min:"0",max:"10",step:"0.01",placeholder:"5"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Royalty Recipient"}),i.jsx("input",{type:"text",value:y.royaltyRecipient,onChange:x=>X("royaltyRecipient",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background font-mono",placeholder:"0x...",required:!0,pattern:"^0x[a-fA-F0-9]{40}$"})]}),i.jsxs("div",{children:[i.jsx(Bl,{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Reveal Type"}),i.jsxs(Cd,{value:y.revealType,onValueChange:x=>X("revealType",x),required:!0,children:[i.jsx(Ed,{className:"w-full",children:i.jsx(Sd,{placeholder:"Select Reveal Type"})}),i.jsxs(_d,{children:[i.jsx(Ds,{value:"0",children:"Instant Reveal"}),i.jsx(Ds,{value:"1",children:"Manual Reveal"}),i.jsx(Ds,{value:"2",children:"Scheduled Reveal"})]})]})]}),(y.revealType==="1"||y.revealType==="2")&&i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Unrevealed Base URI"}),i.jsx("input",{type:"url",value:y.unrevealedBaseURI,onChange:x=>X("unrevealedBaseURI",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background font-mono",required:y.revealType==="1"||y.revealType==="2",placeholder:"https://api.example.com/hidden/"})]}),y.revealType==="2"&&i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Reveal Time"}),i.jsx("input",{type:"datetime-local",value:y.revealTime,onChange:x=>X("revealTime",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:y.revealType==="2"})]})]}),i.jsx("div",{className:"flex gap-4 pt-4",children:i.jsx(we,{type:"submit",disabled:o,variant:"primary",size:"lg",className:"flex-1 text-base h-12",children:o?"Deploying...":"Deploy Collection"})})]})]})}),i.jsx(Bo,{value:"ERC1155",children:i.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-card border border-border rounded-xl p-6 shadow-xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(ag,{className:"h-5 w-5"}),i.jsx("h3",{className:"font-display text-[length:var(--text-xl)] font-semibold",children:"Deploy ERC1155 Collection"})]}),i.jsxs("form",{onSubmit:x=>{x.preventDefault(),A(j,!1)},className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Collection Name"}),i.jsx("input",{type:"text",value:j.name,onChange:x=>V("name",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Symbol"}),i.jsx("input",{type:"text",value:j.symbol,onChange:x=>V("symbol",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background uppercase",maxLength:10,required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Base URI"}),i.jsx("input",{type:"url",value:j.baseURI,onChange:x=>V("baseURI",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background font-mono",placeholder:"https://api.example.com/metadata/",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Drop URI",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsx("div",{children:"Optional URI for your collection's drop page or storefront"})})]})]}),i.jsx("input",{type:"url",value:j.dropURI,onChange:x=>V("dropURI",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background font-mono",placeholder:"https://your-drops-page.com/collection"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Max Supply",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsx("div",{children:"Set to 0 for unlimited supply"})})]})]}),i.jsx("input",{type:"number",value:j.maxSupply,onChange:x=>V("maxSupply",x.target.value),onWheel:x=>x.target instanceof HTMLElement&&x.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",min:"0"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2 flex items-center gap-2",children:["Royalty Percentage (%)",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:i.jsx("div",{children:"Secondary sale royalty (e.g., 5 for 5%)"})})]})]}),i.jsx("input",{type:"number",value:j.royaltyPercentage,onChange:x=>V("royaltyPercentage",x.target.value),onWheel:x=>x.target instanceof HTMLElement&&x.target.blur(),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",min:"0",max:"10",step:"0.01",placeholder:"5"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Royalty Recipient"}),i.jsx("input",{type:"text",value:j.royaltyRecipient,onChange:x=>V("royaltyRecipient",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background font-mono",placeholder:"0x...",required:!0,pattern:"^0x[a-fA-F0-9]{40}$"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Reveal Type"}),i.jsxs(Cd,{value:j.revealType,onValueChange:x=>V("revealType",x),required:!0,children:[i.jsx(Ed,{className:"w-full",children:i.jsx(Sd,{placeholder:"Select Reveal Type"})}),i.jsxs(_d,{children:[i.jsx(Ds,{value:"0",children:"Instant Reveal"}),i.jsx(Ds,{value:"1",children:"Manual Reveal"}),i.jsx(Ds,{value:"2",children:"Scheduled Reveal"})]})]})]}),(j.revealType==="1"||j.revealType==="2")&&i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Unrevealed Base URI"}),i.jsx("input",{type:"url",value:j.unrevealedBaseURI,onChange:x=>V("unrevealedBaseURI",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background font-mono",required:j.revealType==="1"||j.revealType==="2",placeholder:"https://api.example.com/hidden/"})]}),j.revealType==="2"&&i.jsxs("div",{children:[i.jsx("label",{className:"block font-body text-[length:var(--text-base)] font-medium mb-2",children:"Reveal Time"}),i.jsx("input",{type:"datetime-local",value:j.revealTime,onChange:x=>V("revealTime",x.target.value),className:"w-full px-3 py-2.5 font-body text-[length:var(--text-base)] border border-border rounded-lg bg-background",required:j.revealType==="2"})]})]}),i.jsx("div",{className:"flex gap-4 pt-4",children:i.jsx(we,{type:"submit",disabled:o,variant:"primary",size:"lg",className:"flex-1 text-base h-12",children:o?"Deploying...":"Deploy Collection"})})]})]})})]})})]})]}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Ca,{className:`mx-auto mb-4 text-muted-foreground ${s?"h-12 w-12":"h-16 w-16"}`}),i.jsx("h2",{className:`font-bold mb-2 ${s?"text-xl":"text-2xl"}`,children:"Connect Your Wallet"}),i.jsx("p",{className:`text-muted-foreground ${s?"text-sm":"text-base"}`,children:"Please connect your wallet to deploy NFT collections."})]})})},Sme=uu("space-y-2 w-full",{variants:{layout:{vertical:"flex flex-col",horizontal:"flex flex-row items-center gap-4"}},defaultVariants:{layout:"vertical"}}),Va=k.forwardRef(({label:t,name:e,type:n="text",placeholder:r,helperText:s,tooltip:o,required:a=!1,disabled:l=!1,readOnly:c=!1,value:u,defaultValue:f,onChange:p,onBlur:m,error:g,success:w,warning:y,className:T,inputClassName:j,labelClassName:_,layout:v="vertical",min:P,max:D,step:$,maxLength:U,pattern:K,autoComplete:Y,children:G,prefix:X,suffix:V,...A},x)=>{const C=()=>g?"error":w?"success":y?"warning":"default",L=k.useId(),z=e||L,R=`${z}-helper`,I=`${z}-error`,N=F=>{n==="number"&&F.target instanceof HTMLElement&&F.target.blur()};return i.jsxs("div",{className:je(Sme({layout:v}),T),children:[t&&i.jsxs(Bl,{htmlFor:z,className:je("flex items-center gap-2",g&&"text-destructive",_),children:[t,a&&i.jsx("span",{className:"text-destructive",children:"*"}),o&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx(lt,{className:"h-4 w-4 text-muted-foreground cursor-help",tabIndex:0})}),i.jsx(Nt,{sideOffset:6,children:typeof o=="string"?i.jsx("p",{children:o}):o})]})]}),i.jsxs("div",{className:"relative",children:[X&&i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",children:X}),G||i.jsx(gs,{ref:x,id:z,name:e,type:n,value:u,defaultValue:f,onChange:p,onBlur:m,onWheel:N,placeholder:r,disabled:l,readOnly:c,required:a,min:P,max:D,step:$,maxLength:U,pattern:K,autoComplete:Y,state:C(),"aria-describedby":g?I:s?R:void 0,"aria-invalid":!!g,className:je(X&&"pl-10",V&&"pr-10",j),...A}),V&&i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",children:V}),(g||w)&&!V&&i.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:[g&&i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),w&&!g&&i.jsx(fo,{className:"h-4 w-4 text-success"})]})]}),(s||g||y)&&i.jsx("p",{id:g?I:R,className:je("text-sm",g?"text-destructive":y?"text-warning":"text-muted-foreground"),children:g||y||s})]})});Va.displayName="FormField";const t8=k.forwardRef(({label:t,name:e,placeholder:n="0x...",helperText:r,tooltip:s,required:o=!1,disabled:a=!1,value:l,onChange:c,onBlur:u,onValidationChange:f,validateOnChange:p=!0,allowEmpty:m=!1,explorerUrl:g,chainId:w,className:y,inputClassName:T,...j},_)=>{const[v,P]=k.useState(null),[D,$]=k.useState(l||"");k.useEffect(()=>{l!==void 0&&$(l)},[l]);const U=k.useCallback(x=>{const C=x?String(x):"";if(!C||C.trim()==="")return m?{isValid:!0,state:null}:{isValid:!1,state:null};const L=C.trim(),z=bn(L);return{isValid:z,state:z?"valid":"invalid",checksummed:z?Xr(L):null}},[m]),K=k.useCallback(x=>{const C=x.target.value;if($(C),p){const{isValid:L,state:z,checksummed:R}=U(C);P(z),f==null||f(L,R)}c==null||c(C)},[c,p,U,f]),Y=k.useCallback(x=>{const{isValid:C,state:L,checksummed:z}=U(D);P(L),f==null||f(C,z),u==null||u(x)},[D,U,f,u]),G=k.useCallback(async()=>{if(D)try{await navigator.clipboard.writeText(D),re.success("Address copied to clipboard")}catch{re.error("Failed to copy address")}},[D]),X=k.useCallback(()=>{if(g)return`${g}/address/${D}`;const x={1:"https://etherscan.io",5:"https://goerli.etherscan.io",137:"https://polygonscan.com",43113:"https://testnet.snowtrace.io",43114:"https://snowtrace.io"};return`${x[w]||x[1]}/address/${D}`},[g,w,D]),V=k.useId(),A=e||V;return i.jsxs("div",{className:je("space-y-2 w-full",y),children:[t&&i.jsxs(Bl,{htmlFor:A,className:"flex items-center gap-2",children:[t,o&&i.jsx("span",{className:"text-destructive",children:"*"}),s&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx("span",{className:"text-muted-foreground cursor-help",children:i.jsx(Kt,{className:"h-4 w-4"})})}),i.jsx(Nt,{children:s})]})]}),i.jsxs("div",{className:"relative group",children:[i.jsx(gs,{ref:_,id:A,name:e,type:"text",value:D,onChange:K,onBlur:Y,placeholder:n,disabled:a,required:o,state:v==="invalid"?"error":v==="valid"?"success":"default",className:je("font-mono text-sm pr-24",T),...j}),i.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[v==="validating"&&i.jsx($r,{className:"h-4 w-4 animate-spin text-muted-foreground"}),v==="valid"&&i.jsx(fo,{className:"h-4 w-4 text-success"}),v==="invalid"&&i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),D&&v==="valid"&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx("button",{type:"button",onClick:G,className:"p-1 rounded hover:bg-muted/50 text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(Wg,{className:"h-4 w-4"})})}),i.jsx(Nt,{children:"Copy address"})]}),D&&v==="valid"&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx("a",{href:X(),target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded hover:bg-muted/50 text-muted-foreground hover:text-foreground transition-colors",children:i.jsx(Ur,{className:"h-4 w-4"})})}),i.jsx(Nt,{children:"View on block explorer"})]})]})]}),(r||v==="invalid")&&i.jsx("p",{className:je("text-sm",v==="invalid"?"text-destructive":"text-muted-foreground"),children:v==="invalid"?"Please enter a valid Ethereum address":r})]})});t8.displayName="AddressInput";const n8=k.forwardRef(({collectionType:t="ERC721",formData:e={},artworkUrl:n,artworkLoading:r=!1,artworkError:s=!1,variant:o="glass",showPlaceholders:a=!0,sticky:l=!1,className:c,...u},f)=>{var j,_,v;const m=(P=>{switch(P){case"0":return{label:"Instant",icon:nl,color:"text-success"};case"1":return{label:"Manual",icon:Q6,color:"text-amber-500"};case"2":return{label:"Scheduled",icon:yr,color:"text-blue-500"};default:return{label:"Not set",icon:nl,color:"text-muted-foreground"}}})(e.revealType),g=P=>{if(!P)return null;try{return new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}catch{return null}},w={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3}}},y={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.2}}},T=e.name||e.symbol;return i.jsx(Be.div,{ref:f,variants:w,initial:"hidden",animate:"visible",className:je("relative",l&&"lg:sticky lg:top-24",c),...u,children:i.jsxs(ut,{variant:o,className:"overflow-hidden border-2 border-border/50",children:[i.jsx("div",{className:je("h-1.5 bg-gradient-to-r",t==="ERC721"?"from-purple-500 to-pink-500":"from-amber-500 to-orange-500")}),i.jsx(Jr,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-medium",children:"Collection Preview"}),i.jsxs("p",{className:"text-sm font-medium text-foreground",children:[t," Collection"]})]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded-full",children:[i.jsx(Pi,{className:"h-3 w-3"}),i.jsx("span",{children:"Real-time"})]})]})}),i.jsxs(It,{className:"space-y-4",children:[i.jsx(Be.div,{variants:y,className:"relative aspect-square rounded-xl overflow-hidden bg-muted/30 border border-border/30",children:i.jsx(Jl,{mode:"wait",children:r?i.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center gap-3",children:[i.jsx($r,{className:"h-8 w-8 animate-spin text-primary"}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading artwork..."})]},"loading"):n&&!s?i.jsx(Be.img,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:.3},src:n,alt:"Collection artwork preview",className:"w-full h-full object-cover",onError:()=>{}},"artwork"):i.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center gap-3 text-muted-foreground",children:s?i.jsxs(i.Fragment,{children:[i.jsx(nD,{className:"h-10 w-10 opacity-50"}),i.jsx("span",{className:"text-sm",children:"Failed to load artwork"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:je("w-20 h-20 rounded-2xl flex items-center justify-center text-3xl font-bold",t==="ERC721"?"bg-gradient-to-br from-purple-500/20 to-pink-500/20 text-purple-400":"bg-gradient-to-br from-amber-500/20 to-orange-500/20 text-amber-400"),children:((j=e.symbol)==null?void 0:j.slice(0,2))||(t==="ERC721"?"721":"1155")}),i.jsx("span",{className:"text-sm",children:e.dropURI||e.unrevealedBaseURI?"Fetching artwork...":"Add Drop URI to preview artwork"})]})},"placeholder")})}),i.jsx(Jl,{mode:"wait",children:i.jsxs(Be.div,{variants:y,initial:"hidden",animate:"visible",exit:"hidden",className:"space-y-1",children:[i.jsx("h3",{className:je("text-xl font-display font-bold truncate",e.name?"text-foreground":"text-muted-foreground/50"),children:e.name||(a?"Collection Name":"")}),(e.symbol||a)&&i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("span",{className:je("px-2 py-0.5 rounded-full text-xs font-mono uppercase",e.symbol?"bg-primary/10 text-primary":"bg-muted text-muted-foreground/50"),children:["$",e.symbol||"SYM"]})})]},e.name||"placeholder-name")}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs(Be.div,{variants:y,className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(Ho,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs",children:"Max Supply"})]}),i.jsx("p",{className:je("text-sm font-medium",e.maxSupply?"text-foreground":"text-muted-foreground/50"),children:e.maxSupply==="0"||!e.maxSupply?t==="ERC1155"?"Unlimited":a?"Not set":"":((v=(_=e.maxSupply)==null?void 0:_.toLocaleString)==null?void 0:v.call(_))||e.maxSupply})]}),i.jsxs(Be.div,{variants:y,className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(iD,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs",children:"Royalty"})]}),i.jsx("p",{className:je("text-sm font-medium",e.royaltyPercentage?"text-foreground":"text-muted-foreground/50"),children:e.royaltyPercentage?`${e.royaltyPercentage}%`:a?"0%":""})]}),i.jsxs(Be.div,{variants:y,className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(m.icon,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs",children:"Reveal"})]}),i.jsx("p",{className:je("text-sm font-medium",m.color),children:m.label})]}),i.jsxs(Be.div,{variants:y,className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(lg,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs",children:"Owner"})]}),i.jsx("p",{className:je("text-sm font-medium font-mono text-foreground"),children:e.royaltyRecipient?`${String(e.royaltyRecipient).slice(0,6)}...${String(e.royaltyRecipient).slice(-4)}`:a?"Connected wallet":""})]})]}),e.revealType==="2"&&e.revealTime&&i.jsxs(Be.div,{variants:y,className:"flex items-center gap-3 p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[i.jsx(yr,{className:"h-5 w-5 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Reveals on"}),i.jsx("p",{className:"text-sm font-medium text-foreground",children:g(e.revealTime)})]})]}),i.jsxs("div",{className:"space-y-2",children:[e.baseURI&&i.jsxs(Be.div,{variants:y,className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(qT,{className:"h-3 w-3"}),i.jsxs("span",{className:"truncate font-mono",children:[String(e.baseURI).slice(0,40),"..."]})]}),e.dropURI&&i.jsxs(Be.div,{variants:y,className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(eD,{className:"h-3 w-3"}),i.jsxs("span",{className:"truncate font-mono",children:[String(e.dropURI).slice(0,40),"..."]})]})]}),!T&&a&&i.jsxs(Be.div,{variants:y,className:"flex items-center justify-center gap-2 py-4 text-sm text-muted-foreground border-t border-border/30",children:[i.jsx(Pi,{className:"h-4 w-4"}),i.jsx("span",{children:"Fill in the form to see preview"})]})]})]})})});n8.displayName="CollectionPreviewCard";const r8=k.forwardRef(({value:t="0",onValueChange:e,disabled:n=!1,className:r,...s},o)=>{const a=[{value:"0",label:"Instant Reveal",description:"NFTs are fully revealed immediately upon minting",icon:cg,secondaryIcon:nl,gradient:"from-green-500 to-emerald-500",bgColor:"bg-green-500/10",borderColor:"border-green-500/30",textColor:"text-green-500"},{value:"1",label:"Manual Reveal",description:"You control when NFTs are revealed via contract call",icon:wQ,secondaryIcon:Q6,gradient:"from-amber-500 to-orange-500",bgColor:"bg-amber-500/10",borderColor:"border-amber-500/30",textColor:"text-amber-500"},{value:"2",label:"Scheduled Reveal",description:"NFTs automatically reveal at a specified time",icon:Vg,secondaryIcon:yr,gradient:"from-blue-500 to-indigo-500",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/30",textColor:"text-blue-500"}];return i.jsx("div",{ref:o,className:je("grid grid-cols-1 md:grid-cols-3 gap-3",r),...s,children:a.map(l=>{const c=t===l.value,u=l.icon,f=l.secondaryIcon;return i.jsxs(Be.button,{type:"button",onClick:()=>!n&&(e==null?void 0:e(l.value)),disabled:n,className:je("relative p-4 rounded-xl border-2 text-left transition-all duration-200","hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50",c?je(l.borderColor,l.bgColor,"shadow-sm"):"border-border/50 bg-card/50 hover:border-border hover:bg-card",n&&"opacity-50 cursor-not-allowed hover:shadow-none"),whileHover:n?void 0:{scale:1.02},whileTap:n?void 0:{scale:.98},children:[c&&i.jsx(Be.div,{initial:{scale:0},animate:{scale:1},className:je("absolute top-2 right-2 w-5 h-5 rounded-full flex items-center justify-center",`bg-gradient-to-br ${l.gradient}`),children:i.jsx(Bs,{className:"h-3 w-3 text-white"})}),i.jsx("div",{className:je("w-10 h-10 rounded-lg flex items-center justify-center mb-3 transition-colors",c?`bg-gradient-to-br ${l.gradient}`:"bg-muted/50"),children:i.jsx(u,{className:je("h-5 w-5",c?"text-white":"text-muted-foreground")})}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:je("font-medium text-sm",c?l.textColor:"text-foreground"),children:l.label}),i.jsx(f,{className:je("h-3.5 w-3.5",c?l.textColor:"text-muted-foreground")})]}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:l.description})]}),c&&i.jsx(Be.div,{layoutId:"reveal-selector-border",className:je("absolute inset-0 rounded-xl border-2 pointer-events-none",l.borderColor),initial:!1,transition:{type:"spring",bounce:.2,duration:.4}})]},l.value)})})});r8.displayName="RevealTypeSelector";const Eme=()=>{const{connected:t,address:e,provider:n}=an(),{contracts:r}=xn(),{isMobile:s,isTablet:o}=Ln(),a=mo(),[l,c]=k.useState(!1),[u,f]=k.useState("ERC721"),[p,m]=k.useState(!1),[g,w]=k.useState(null),[y,T]=k.useState(null),[j,_]=k.useState(!1),[v,P]=k.useState(!1),[D,$]=k.useState({name:"",symbol:"",baseURI:"",dropURI:"",royaltyPercentage:"",royaltyRecipient:e||"",maxSupply:"",revealType:"0",unrevealedBaseURI:"",revealTime:""}),[U,K]=k.useState({name:"",symbol:"",baseURI:"",dropURI:"",royaltyPercentage:"",royaltyRecipient:e||"",maxSupply:"0",revealType:"0",unrevealedBaseURI:"",revealTime:""}),Y=u==="ERC721"?D:U,G=u==="ERC721"?$:K;k.useEffect(()=>{e&&!D.royaltyRecipient&&($(O=>({...O,royaltyRecipient:e})),K(O=>({...O,royaltyRecipient:e})))},[e]);const X=["https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/"],V=X.map(O=>O.replace("/ipfs/","/ipns/")),A=["https://arweave.net/"],x=k.useCallback(O=>{if(!O)return[];if(O.startsWith("ipfs://")){let q=O.replace("ipfs://","");return q.startsWith("ipfs/")&&(q=q.slice(5)),X.map(H=>`${H}${q}`)}if(O.startsWith("ipns://")){let q=O.replace("ipns://","");return q.startsWith("ipns/")&&(q=q.slice(5)),V.map(H=>`${H}${q}`)}if(O.startsWith("ar://")){const q=O.replace("ar://","");return A.map(H=>`${H}${q}`)}try{const q=new URL(O),J=q.pathname.replace(/\/ipfs\/ipfs\//,"/ipfs/").split("/").filter(Boolean),Q=J.indexOf("ipfs");if(Q!==-1&&J[Q+1]){const se=J.slice(Q+1).join("/");return X.map(ie=>`${ie}${se}`)}const ne=J.indexOf("ipns");if(ne!==-1&&J[ne+1]){const se=J.slice(ne+1).join("/");return V.map(ie=>`${ie}${se}`)}if(q.hostname.endsWith("arweave.net")){const se=J.join("/");return A.map(ie=>`${ie}${se}`)}}catch{}return[O]},[]),C=k.useCallback(O=>{const q=["image","image_url","imageUrl","animation_url","animationUrl","media","artwork"];for(const H of q)if(O[H]){const J=O[H];if(typeof J=="string")return J.startsWith("ipfs://")||J.startsWith("ar://")?x(J):[J]}return null},[x]),L=k.useCallback(O=>{const q=[],H=/\/$/.test(O),J=O.replace(/\/$/,"");if(O.match(/\/(?:[0-9]+)(?:\.json)?$/)){q.push(O),O.includes(".json")||q.push(`${O}.json`);const ne=J.replace(/\/(?:[0-9]+)(?:\.json)?$/,"");ne&&ne!==J&&q.push(ne,`${ne}/`,`${ne}.json`,`${ne}/.json`,`${ne}/index.json`,`${ne}/metadata.json`)}else q.push(O),H&&q.push(J),O.includes(".json")||q.push(`${O}.json`,`${J}.json`),q.push(`${O}index.json`,`${O}metadata.json`),H&&q.push(`${J}/index.json`,`${J}/metadata.json`);return[...new Set(q)]},[]),z=k.useCallback(async O=>{if(!O)return null;_(!0),P(!1);try{const q=L(O),H=[];for(const J of q){const Q=x(J);H.push(...Q)}for(const J of H)try{const Q=await fetch(J,{headers:{Accept:"application/json, text/plain, */*"}});if(Q.ok){const ne=Q.headers.get("content-type");try{const se=await Q.text(),ie=JSON.parse(se);if(ie&&typeof ie=="object"){const pe=C(ie);if(pe&&pe.length>0){let le=pe[0];if(le.startsWith("ipfs://")||le.startsWith("ar://")){const me=x(le);me.length>0&&(le=me[0])}return T(le),_(!1),le}}}catch{if(ne!=null&&ne.startsWith("image/")||J.match(/\.(jpg|jpeg|png|gif|svg|webp)$/i))return T(J),_(!1),J}}}catch{continue}}catch(q){console.error("Error fetching artwork:",q)}return _(!1),null},[L,x,C]);k.useEffect(()=>{const O=Y.dropURI,q=Y.unrevealedBaseURI;O&&O.trim()!==""?z(O):q&&q.trim()!==""?z(q):T(null)},[Y.dropURI,Y.unrevealedBaseURI,z]);const R=(O,q)=>{G(H=>({...H,[O]:q}))},I=k.useMemo(()=>{var H,J,Q,ne;const O=[],q=Y;return(H=q.name)!=null&&H.trim()||O.push("Collection name is required"),(J=q.symbol)!=null&&J.trim()||O.push("Symbol is required"),(Q=q.baseURI)!=null&&Q.trim()||O.push("Base URI is required"),u==="ERC721"&&!q.maxSupply&&O.push("Max supply is required for ERC721"),(!q.royaltyRecipient||!bn(q.royaltyRecipient))&&O.push("Valid royalty recipient address is required"),(q.revealType==="1"||q.revealType==="2")&&!((ne=q.unrevealedBaseURI)!=null&&ne.trim())&&O.push("Unrevealed Base URI is required for delayed reveal"),q.revealType==="2"&&!q.revealTime&&O.push("Reveal time is required for scheduled reveal"),O},[Y,u]),N=k.useMemo(()=>{const O=Y,q={0:"Instant",1:"Manual",2:"Scheduled"},H=J=>{if(!J)return"";const Q=String(J);return Q.length<18?Q:`${Q.slice(0,10)}...${Q.slice(-8)}`};return[{label:"Collection Name",value:O.name||"",icon:Wl},{label:"Symbol",value:O.symbol?`$${O.symbol.toUpperCase()}`:"",icon:Wl},{label:"Collection Type",value:u,icon:u==="ERC721"?Y0:ag},{label:"Max Supply",value:O.maxSupply==="0"||!O.maxSupply?"Unlimited":O.maxSupply,icon:Ho},{label:"Royalty",value:O.royaltyPercentage?`${O.royaltyPercentage}%`:"0%",icon:iD},{label:"Royalty Recipient",value:H(O.royaltyRecipient),icon:lg},{label:"Base URI",value:O.baseURI?`${O.baseURI.slice(0,30)}...`:"",icon:qT,link:O.baseURI},{label:"Reveal Type",value:q[O.revealType]||"Instant",icon:yr}]},[Y,u]),F=async()=>{var O,q,H;if(!t||!r.nftFactory||!n){re.error("Please connect your wallet and ensure contracts are configured");return}c(!0);try{const J=n.getSigner(),Q=Y,ne=u==="ERC721",se=ne?0:1;let ie=parseInt(Q.revealType),pe=Q.unrevealedBaseURI,le=0;ie===2&&(le=Math.floor(new Date(Q.revealTime).getTime()/1e3)),ie===0&&(pe="",le=0);const me="0x0000000000000000000000000000000000000000000000000000000000000000",Ee=((O=Q.dropURI)==null?void 0:O.trim())||"",te=Ee&&Ee.length>0?ir(li(Ee)):me,Ne=pe&&pe.trim().length>0?ir(li(pe)):me,Pe=Q.royaltyPercentage?parseInt(Q.royaltyPercentage)*100:0,et=parseInt(Q.maxSupply||"0"),Le=le,ze=(await(await r.nftFactory.connect(J).deployCollection(se,Q.name,Q.symbol,Q.baseURI,Ee,te,e,Pe,Q.royaltyRecipient,et,ie,pe,Ne,Le)).wait()).events.find(oe=>oe.event==="PrizeCollectionCreated"),dt=((q=ze==null?void 0:ze.args)==null?void 0:q.collection)||((H=ze==null?void 0:ze.args)==null?void 0:H[0]);dt&&(w(dt),console.log("Collection deployed at:",dt),fB(dt,{dropURI:Ee,unrevealedURI:pe,dropURIHash:te,unrevealedURIHash:Ne}),console.log("Collection URIs registered for hash-based resolution")),re.success(`${ne?"ERC721":"ERC1155"} collection deployed successfully!`),m(!1)}catch(J){console.error("Error deploying collection:",J),re.error(J.message||"Failed to deploy collection")}finally{c(!1)}},E=async()=>{if(g)try{await navigator.clipboard.writeText(g),re.success("Collection address copied to clipboard")}catch{re.error("Failed to copy address")}},M=()=>{w(null),G({name:"",symbol:"",baseURI:"",dropURI:"",royaltyPercentage:"",royaltyRecipient:e||"",maxSupply:u==="ERC721"?"":"0",revealType:"0",unrevealedBaseURI:"",revealTime:""})};if(!t)return i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Ca,{className:`mx-auto mb-4 text-muted-foreground ${s?"h-12 w-12":"h-16 w-16"}`}),i.jsx("h2",{className:`font-bold mb-2 ${s?"text-xl":"text-2xl"}`,children:"Connect Your Wallet"}),i.jsx("p",{className:`text-muted-foreground ${s?"text-sm":"text-base"}`,children:"Please connect your wallet to deploy NFT collections."})]})});const ee=!s&&!o;return g?i.jsx("div",{className:"min-h-screen bg-background pb-6 relative",children:i.jsx("div",{className:`${s?"px-4":"container mx-auto px-8"} pt-8 pb-4 relative z-10`,children:i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsx("div",{className:"bg-card border border-border rounded-xl p-8 text-center",children:i.jsxs(Be.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-success/10 mb-4",children:i.jsx(fo,{className:"h-8 w-8 text-success"})}),i.jsx("h2",{className:"font-display text-2xl font-bold mb-2",children:"Collection Deployed Successfully!"}),i.jsxs("p",{className:"text-muted-foreground",children:["Your ",u," collection has been deployed to the blockchain."]})]}),i.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Collection Address"}),i.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[i.jsx("p",{className:"font-mono text-sm break-all",children:g}),i.jsx(we,{variant:"ghost",size:"sm",onClick:E,className:"shrink-0",children:"Copy"})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.jsx(we,{variant:"primary",onClick:()=>a("/create-raffle",{state:{fromDeployment:!0,collectionType:u,collectionAddress:g}}),children:"Create Drop Event"}),i.jsx(we,{variant:"secondary",onClick:M,children:"Back"})]})]})})})})}):i.jsxs("div",{className:"min-h-screen bg-background pb-6 relative",children:[y&&i.jsx("div",{className:"absolute inset-0 top-0 left-0 w-full h-1/3 opacity-30 pointer-events-none",style:{backgroundImage:`url(${y})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(2px) brightness(1.1)",maskImage:"linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%)",WebkitMaskImage:"linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%)"}}),i.jsxs("div",{className:`${s?"px-4":"container mx-auto px-8"} pt-8 pb-4 relative z-10`,children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h1",{className:"font-display text-[length:var(--text-4xl)] font-bold mb-4 leading-tight tracking-tighter",children:"Deploy NFT Collection"}),i.jsx("p",{className:"font-body text-[length:var(--text-lg)] text-muted-foreground max-w-2xl mx-auto leading-relaxed",children:"This is where it all begins. Create the collection for your drop event below."})]}),i.jsxs("div",{className:`${ee?"grid grid-cols-5 gap-8":"flex flex-col gap-6"} max-w-6xl mx-auto mt-8`,children:[i.jsx("div",{className:ee?"col-span-3":"",children:i.jsxs(ny,{value:u,onValueChange:f,className:"w-full",children:[i.jsxs(Sv,{className:`w-full flex items-center justify-center gap-2 ${s?"p-1.5 h-12 mb-6":"p-1 h-10 mb-6"} bg-muted/80 border border-border/50 shadow-sm rounded-xl`,children:[i.jsxs($o,{value:"ERC721",className:`flex items-center gap-2 flex-1 data-[state=active]:bg-background data-[state=active]:border-primary/20 data-[state=active]:shadow-md transition-all rounded-lg ${s?"h-9 text-sm":"h-[calc(100%-1px)]"}`,children:[i.jsx(Y0,{className:`${s?"h-3.5 w-3.5":"h-4 w-4"}`}),i.jsx("span",{className:"font-medium",children:s?"ERC721":"ERC721 Collection"})]}),i.jsxs($o,{value:"ERC1155",className:`flex items-center gap-2 flex-1 data-[state=active]:bg-background data-[state=active]:border-primary/20 data-[state=active]:shadow-md transition-all rounded-lg ${s?"h-9 text-sm":"h-[calc(100%-1px)]"}`,children:[i.jsx(ag,{className:`${s?"h-3.5 w-3.5":"h-4 w-4"}`}),i.jsx("span",{className:"font-medium",children:s?"ERC1155":"ERC1155 Collection"})]})]}),i.jsx(Bo,{value:u,forceMount:!0,className:u!==u?"hidden":"",children:i.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-card/80 backdrop-blur-sm border border-border/50 rounded-xl shadow-xl overflow-hidden",children:[i.jsx(lr,{title:"Basic Information",icon:Wl,defaultOpen:!0,variant:"bordered",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Va,{label:"Collection Name",required:!0,children:i.jsx(gs,{type:"text",value:Y.name,onChange:O=>R("name",O.target.value),placeholder:"My Awesome Collection",required:!0})}),i.jsx(Va,{label:"Symbol",required:!0,helperText:"Short identifier (max 10 characters)",children:i.jsx(gs,{type:"text",value:Y.symbol,onChange:O=>R("symbol",O.target.value.toUpperCase()),placeholder:"MAC",maxLength:10,className:"uppercase",required:!0})})]})}),i.jsx(lr,{title:"URI Configuration",icon:qT,defaultOpen:!0,variant:"bordered",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx(Va,{label:"Base URI",required:!0,helperText:"Metadata endpoint for your NFTs (e.g., ipfs://..., https://api.example.com/)",children:i.jsx(gs,{type:"text",value:Y.baseURI,onChange:O=>R("baseURI",O.target.value),placeholder:"ipfs://QmXxx... or https://api.example.com/metadata/",className:"font-mono text-sm",required:!0})}),i.jsx(Va,{label:"Drop URI",tooltip:"Optional URI for your collection's drop page artwork. Used for preview.",children:i.jsx(gs,{type:"text",value:Y.dropURI,onChange:O=>R("dropURI",O.target.value),placeholder:"ipfs://QmXxx... for preview artwork",className:"font-mono text-sm"})})]})}),i.jsx(lr,{title:"Supply & Royalties",icon:Ho,defaultOpen:!0,variant:"bordered",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Va,{label:"Max Supply",required:u==="ERC721",helperText:u==="ERC1155"?"Set to 0 for unlimited supply":void 0,children:i.jsx(gs,{type:"number",value:Y.maxSupply,onChange:O=>R("maxSupply",O.target.value),onWheel:O=>O.target instanceof HTMLElement&&O.target.blur(),placeholder:u==="ERC1155"?"0 (unlimited)":"10000",min:u==="ERC1155"?"0":"1",required:u==="ERC721"})}),i.jsx(Va,{label:"Royalty Percentage",tooltip:"Secondary sale royalty (e.g., 5 for 5%)",children:i.jsx(gs,{type:"number",value:Y.royaltyPercentage,onChange:O=>R("royaltyPercentage",O.target.value),onWheel:O=>O.target instanceof HTMLElement&&O.target.blur(),placeholder:"5",min:"0",max:"10",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(Va,{label:"Royalty Recipient",required:!0,children:i.jsx(t8,{value:Y.royaltyRecipient,onChange:O=>R("royaltyRecipient",O),placeholder:"0x...",required:!0})})})]})}),i.jsx(lr,{title:"Reveal Settings",icon:yr,defaultOpen:!0,variant:"bordered",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx(Bl,{className:"block text-sm font-medium mb-3",children:"Reveal Type"}),i.jsx(r8,{value:Y.revealType,onValueChange:O=>R("revealType",O)}),i.jsx(Jl,{children:(Y.revealType==="1"||Y.revealType==="2")&&i.jsxs(Be.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"space-y-4 pt-4",children:[i.jsx(Va,{label:"Unrevealed Base URI",required:!0,helperText:"Metadata to show before reveal (placeholder image)",children:i.jsx(gs,{type:"text",value:Y.unrevealedBaseURI,onChange:O=>R("unrevealedBaseURI",O.target.value),placeholder:"ipfs://QmXxx... for unrevealed metadata",className:"font-mono text-sm",required:!0})}),Y.revealType==="2"&&i.jsx(Va,{label:"Reveal Time",required:!0,children:i.jsx(gs,{type:"datetime-local",value:Y.revealTime,onChange:O=>R("revealTime",O.target.value),required:!0})})]})})]})}),i.jsxs("div",{className:"p-6 border-t border-border/30 bg-muted/20",children:[i.jsx(we,{type:"button",onClick:()=>m(!0),disabled:l||I.length>0,variant:"primary",size:"lg",className:"w-full text-base h-12",children:"Review & Deploy"}),I.length>0&&i.jsxs("div",{className:"mt-3 text-sm text-destructive flex items-start gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 mt-0.5 shrink-0"}),i.jsx("span",{children:I[0]})]})]})]})})]})}),!s&&i.jsx("div",{className:ee?"col-span-2":"",children:p?i.jsx("div",{className:ee?"sticky top-24":"",children:i.jsx(hu,{title:"Review Your Collection",description:`Please review the details below before deploying your ${u} collection.`,data:N,errors:I,status:l?"submitting":"preview",statusMessage:l?"Deploying collection to the blockchain...":void 0,onSubmit:F,onEdit:()=>m(!1),onCancel:()=>m(!1),submitLabel:l?"Deploying...":"Deploy Collection",editLabel:"Edit Details",variant:"elevated"})}):i.jsx(n8,{collectionType:u,formData:Y,artworkUrl:y,artworkLoading:j,artworkError:v,sticky:ee})})]})]})]})};function Kx(t){if(!t)return null;if(/^\d+$/.test(t))return parseInt(t,10);const e=Object.entries(jt),n=t.toLowerCase();for(const[r,s]of e)if(s.name.toLowerCase().replace(/[^a-z0-9]+/g,"-")===n)return parseInt(r,10);return null}const Jk=new Map,_me=300*1e3;async function Ame(t,e,n){try{const r=Math.max(0,n-1e4),s=e.filters.PoolCreated(t);let o=await e.queryFilter(s,r,n);if(o.length>0)return o[0].blockNumber;let a=0,l=r;const c=5e3;for(;a<=l;){const u=Math.max(0,l-c),f=l;try{if(o=await e.queryFilter(s,u,f),o.length>0)return o[0].blockNumber;l=u-1}catch(p){console.warn(`Error searching blocks ${u}-${f}:`,p.message),l=u-1}if(n-l>1e5)break}return null}catch(r){return console.error("Error finding pool creation block:",r),null}}async function Pme(t,e){if(!t||!e)return null;const n=t.toLowerCase(),r=Jk.get(n);if(r&&Date.now()-r.timestamp<_me)return r.data;try{const o=await e.provider.getBlockNumber(),a=e.filters.PoolMetadataSet(t),l=Math.max(0,o-1e4);let c=await e.queryFilter(a,l,o);if(c.length===0){const p=await Ame(t,e,o);if(p!==null){const m=p,g=Math.min(p+100,o);try{c=await e.queryFilter(a,m,g)}catch(w){console.warn("Error querying metadata from creation block:",w.message)}}}if(c.length===0){const p={description:"",twitterLink:"",discordLink:"",telegramLink:"",hasMetadata:!1};return Jk.set(n,{data:p,timestamp:Date.now()}),p}const u=c[c.length-1],f={description:u.args.description||"",twitterLink:u.args.twitterLink||"",discordLink:u.args.discordLink||"",telegramLink:u.args.telegramLink||"",hasMetadata:!0,blockNumber:u.blockNumber,transactionHash:u.transactionHash};return Jk.set(n,{data:f,timestamp:Date.now()}),f}catch(s){return console.error("Error fetching pool metadata:",s),null}}function Rme(t){return t?!!(t.description||t.twitterLink||t.discordLink||t.telegramLink):!1}function Xk(t,e){if(!t)return"";try{const r=new URL(t).pathname;switch(e){case"twitter":const s=r.match(/\/@?([a-zA-Z0-9_]+)/);return s?`@${s[1]}`:t;case"discord":const o=r.match(/\/([a-zA-Z0-9]+)$/);return o?`discord.gg/${o[1]}`:t;case"telegram":const a=r.match(/\/([a-zA-Z0-9_]+)/);return a?`t.me/${a[1]}`:t;default:return t}}catch{return t}}const Ime="modulepreload",Mme=function(t){return"/"+t},QI={},Zh=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let a=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=a(n.map(u=>{if(u=Mme(u),u in QI)return;QI[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":Ime,f||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((g,w)=>{m.addEventListener("load",g),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},Dme=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zh(async()=>{const{default:r}=await Promise.resolve().then(()=>qd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class QC extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class ZI extends QC{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class eM extends QC{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class tM extends QC{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tN;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(tN||(tN={}));class Ome{constructor(e,{headers:n={},customFetch:r,region:s=tN.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Dme(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return xt(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:o,method:a,body:l,signal:c}=r;let u={},{region:f}=r;f||(f=this.region);const p=new URL(`${this.url}/${n}`);f&&f!=="any"&&(u["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let m;l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;const g=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),o),body:m,signal:c}).catch(j=>{throw j.name==="AbortError"?j:new ZI(j)}),w=g.headers.get("x-relay-error");if(w&&w==="true")throw new eM(g);if(!g.ok)throw new tM(g);let y=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),T;return y==="application/json"?T=yield g.json():y==="application/octet-stream"||y==="application/pdf"?T=yield g.blob():y==="text/event-stream"?T=g:y==="multipart/form-data"?T=yield g.formData():T=yield g.text(),{data:T,error:null,response:g}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new ZI(o)}:{data:null,error:o,response:o instanceof tM||o instanceof eM?o.context:void 0}}})}}var Ss={};const ep=gN(Iee);var Yx={},Jx={},Xx={},Qx={},Zx={},Lme=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Mh=Lme();const Fme=Mh.fetch,s8=Mh.fetch.bind(Mh),i8=Mh.Headers,zme=Mh.Request,$me=Mh.Response,qd=Object.freeze(Object.defineProperty({__proto__:null,Headers:i8,Request:zme,Response:$me,default:s8,fetch:Fme},Symbol.toStringTag,{value:"Module"})),Bme=gN(qd);var e0={},nM;function o8(){if(nM)return e0;nM=1,Object.defineProperty(e0,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return e0.default=t,e0}var rM;function a8(){if(rM)return Zx;rM=1,Object.defineProperty(Zx,"__esModule",{value:!0});const t=ep,e=t.__importDefault(Bme),n=t.__importDefault(o8());class r{constructor(o){var a,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(a=o.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,a){return this.headers=new Headers(this.headers),this.headers.set(o,a),this}then(o,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var f,p,m,g;let w=null,y=null,T=null,j=u.status,_=u.statusText;if(u.ok){if(this.method!=="HEAD"){const $=await u.text();$===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?y=$:y=JSON.parse($))}const P=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),D=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");P&&D&&D.length>1&&(T=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(w={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,T=null,j=406,_="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const P=await u.text();try{w=JSON.parse(P),Array.isArray(w)&&u.status===404&&(y=[],w=null,j=200,_="OK")}catch{u.status===404&&P===""?(j=204,_="No Content"):w={message:P}}if(w&&this.isMaybeSingle&&(!((g=w==null?void 0:w.details)===null||g===void 0)&&g.includes("0 rows"))&&(w=null,j=200,_="OK"),w&&this.shouldThrowOnError)throw new n.default(w)}return{error:w,data:y,count:T,status:j,statusText:_}});return this.shouldThrowOnError||(c=c.catch(u=>{var f,p,m;return{error:{message:`${(f=u==null?void 0:u.name)!==null&&f!==void 0?f:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(p=u==null?void 0:u.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,a)}returns(){return this}overrideTypes(){return this}}return Zx.default=r,Zx}var sM;function l8(){if(sM)return Qx;sM=1,Object.defineProperty(Qx,"__esModule",{value:!0});const e=ep.__importDefault(a8());class n extends e.default{select(s){let o=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:a,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${s}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,o,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:a=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var f;const p=[s?"analyze":null,o?"verbose":null,a?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${p};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Qx.default=n,Qx}var iM;function ZC(){if(iM)return Xx;iM=1,Object.defineProperty(Xx,"__esModule",{value:!0});const e=ep.__importDefault(l8()),n=new RegExp("[,()]");class r extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const l=Array.from(new Set(a)).map(c=>typeof c=="string"&&n.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${u}fts${f}.${a}`),this}match(o){return Object.entries(o).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(o,a,l){return this.url.searchParams.append(o,`not.${a}.${l}`),this}or(o,{foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,a,l){return this.url.searchParams.append(o,`${a}.${l}`),this}}return Xx.default=r,Xx}var oM;function c8(){if(oM)return Jx;oM=1,Object.defineProperty(Jx,"__esModule",{value:!0});const e=ep.__importDefault(ZC());class n{constructor(s,{headers:o={},schema:a,fetch:l}){this.url=s,this.headers=new Headers(o),this.schema=a,this.fetch=l}select(s,o){const{head:a=!1,count:l}=o??{},c=a?"HEAD":"GET";let u=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",f),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:a=!0}={}){var l;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(u.length>0){const f=[...new Set(u)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:a=!1,count:l,defaultToNull:c=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:o}={}){var a;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var o;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Jx.default=n,Jx}var aM;function Ume(){if(aM)return Yx;aM=1,Object.defineProperty(Yx,"__esModule",{value:!0});const t=ep,e=t.__importDefault(c8()),n=t.__importDefault(ZC());class r{constructor(o,{headers:a={},schema:l,fetch:c}={}){this.url=o,this.headers=new Headers(a),this.schemaName=l,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:c=!1,count:u}={}){var f;let p;const m=new URL(`${this.url}/rpc/${o}`);let g;l||c?(p=l?"HEAD":"GET",Object.entries(a).filter(([y,T])=>T!==void 0).map(([y,T])=>[y,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([y,T])=>{m.searchParams.append(y,T)})):(p="POST",g=a);const w=new Headers(this.headers);return u&&w.set("Prefer",`count=${u}`),new n.default({method:p,url:m,headers:w,schema:this.schemaName,body:g,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Yx.default=r,Yx}var lM;function Vme(){if(lM)return Ss;lM=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.PostgrestError=Ss.PostgrestBuilder=Ss.PostgrestTransformBuilder=Ss.PostgrestFilterBuilder=Ss.PostgrestQueryBuilder=Ss.PostgrestClient=void 0;const t=ep,e=t.__importDefault(Ume());Ss.PostgrestClient=e.default;const n=t.__importDefault(c8());Ss.PostgrestQueryBuilder=n.default;const r=t.__importDefault(ZC());Ss.PostgrestFilterBuilder=r.default;const s=t.__importDefault(l8());Ss.PostgrestTransformBuilder=s.default;const o=t.__importDefault(a8());Ss.PostgrestBuilder=o.default;const a=t.__importDefault(o8());return Ss.PostgrestError=a.default,Ss.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:a.default},Ss}var u8=Vme();const d8=rc(u8),qme=BM({__proto__:null,default:d8},[u8]),{PostgrestClient:Wme,PostgrestQueryBuilder:w0e,PostgrestFilterBuilder:k0e,PostgrestTransformBuilder:T0e,PostgrestBuilder:N0e,PostgrestError:j0e}=d8||qme;class Hme{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Gme="2.78.0",Kme=`realtime-js/${Gme}`,Yme="1.0.0",nN=1e4,Jme=1e3,Xme=100;var Lm;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Lm||(Lm={}));var Hr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Hr||(Hr={}));var ka;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ka||(ka={}));var rN;(function(t){t.websocket="websocket"})(rN||(rN={}));var Qu;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Qu||(Qu={}));class Qme{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+s));a=a+s;const c=r.decode(e.slice(a,a+o));a=a+o;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class f8{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Wn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Wn||(Wn={}));const cM=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=Zme(a,t,e,s),o),{}):{}},Zme=(t,e,n,r)=>{const s=e.find(l=>l.name===t),o=s==null?void 0:s.type,a=n[t];return o&&!r.includes(o)?h8(o,a):sN(a)},h8=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return rge(e,n)}switch(t){case Wn.bool:return ege(e);case Wn.float4:case Wn.float8:case Wn.int2:case Wn.int4:case Wn.int8:case Wn.numeric:case Wn.oid:return tge(e);case Wn.json:case Wn.jsonb:return nge(e);case Wn.timestamp:return sge(e);case Wn.abstime:case Wn.date:case Wn.daterange:case Wn.int4range:case Wn.int8range:case Wn.money:case Wn.reltime:case Wn.text:case Wn.time:case Wn.timestamptz:case Wn.timetz:case Wn.tsrange:case Wn.tstzrange:return sN(e);default:return sN(e)}},sN=t=>t,ege=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},tge=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},nge=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},rge=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>h8(e,l))}return t},sge=t=>typeof t=="string"?t.replace(" ","T"):t,p8=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Qk{constructor(e,n,r={},s=nN){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var uM;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(uM||(uM={}));class Fm{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fm.syncState(this.state,s,o,a),this.pendingDiffs.forEach(c=>{this.state=Fm.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Fm.syncDiff(this.state,s,o,a),l())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),a=this.transformState(n),l={},c={};return this.map(o,(u,f)=>{a[u]||(c[u]=f)}),this.map(a,(u,f)=>{const p=o[u];if(p){const m=f.map(T=>T.presence_ref),g=p.map(T=>T.presence_ref),w=f.filter(T=>g.indexOf(T.presence_ref)<0),y=p.filter(T=>m.indexOf(T.presence_ref)<0);w.length>0&&(l[u]=w),y.length>0&&(c[u]=y)}else l[u]=f}),this.syncDiff(o,{joins:l,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const f=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),f.length>0){const p=e[l].map(g=>g.presence_ref),m=f.filter(g=>p.indexOf(g.presence_ref)<0);e[l].unshift(...m)}r(l,f,c)}),this.map(a,(l,c)=>{let u=e[l];if(!u)return;const f=c.map(p=>p.presence_ref);u=u.filter(p=>f.indexOf(p.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dM;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(dM||(dM={}));var zm;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zm||(zm={}));var Ml;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ml||(Ml={}));class eS{constructor(e,n={config:{}},r){var s,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Hr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qk(this,ka.join,this.params,this.timeout),this.rejoinTimer=new f8(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Hr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Hr.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Hr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Hr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Hr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ka.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Fm(this),this.broadcastEndpointURL=p8(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Hr.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[zm.PRESENCE]&&this.bindings[zm.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,p={},m={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Ml.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Ml.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var w;if(this.socket.setAuth(),g===void 0){e==null||e(Ml.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,T=(w=y==null?void 0:y.length)!==null&&w!==void 0?w:0,j=[];for(let _=0;_<T;_++){const v=y[_],{filter:{event:P,schema:D,table:$,filter:U}}=v,K=g&&g[_];if(K&&K.event===P&&K.schema===D&&K.table===$&&K.filter===U)j.push(Object.assign(Object.assign({},v),{id:K.id}));else{this.unsubscribe(),this.state=Hr.errored,e==null||e(Ml.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,e&&e(Ml.SUBSCRIBED);return}}).receive("error",g=>{this.state=Hr.errored,e==null||e(Ml.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ml.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Hr.joined&&e===zm.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Hr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ka.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Qk(this,ka.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Hr.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Qk(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Xme){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=ka;if(r&&[l,c,u,f].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var w,y,T;return((w=g.filter)===null||w===void 0?void 0:w.event)==="*"||((T=(y=g.filter)===null||y===void 0?void 0:y.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===a}).map(g=>g.callback(m,r)):(o=this.bindings[a])===null||o===void 0||o.filter(g=>{var w,y,T,j,_,v;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const P=g.id,D=(w=g.filter)===null||w===void 0?void 0:w.event;return P&&((y=n.ids)===null||y===void 0?void 0:y.includes(P))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((T=n.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const P=(_=(j=g==null?void 0:g.filter)===null||j===void 0?void 0:j.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return P==="*"||P===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof m=="object"&&"ids"in m){const w=m.data,{schema:y,table:T,commit_timestamp:j,type:_,errors:v}=w;m=Object.assign(Object.assign({},{schema:y,table:T,commit_timestamp:j,eventType:_,new:{},old:{},errors:v}),this._getPayloadRecords(w))}g.callback(m,r)})}_isClosed(){return this.state===Hr.closed}_isJoined(){return this.state===Hr.joined}_isJoining(){return this.state===Hr.joining}_isLeaving(){return this.state===Hr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&eS.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ka.close,{},e)}_onError(e){this._on(ka.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Hr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=cM(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=cM(e.columns,e.old_record)),n}}const Zk=()=>{},t0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ige=[1e3,2e3,5e3,1e4],oge=1e4,age=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lge{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nN,this.transport=null,this.heartbeatIntervalMs=t0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Zk,this.ref=0,this.reconnectTimer=null,this.logger=Zk,this.conn=null,this.sendBuffer=[],this.serializer=new Qme,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Zh(async()=>{const{default:l}=await Promise.resolve().then(()=>qd);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...a)=>o(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${rN.websocket}`,this.httpEndpoint=p8(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hme.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Yme}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Lm.connecting:return Qu.Connecting;case Lm.open:return Qu.Open;case Lm.closing:return Qu.Closing;default:return Qu.Closed}}isConnected(){return this.connectionState()===Qu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new eS(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:s,ref:o}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Jme,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},t0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:a}=n,l=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ka.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([age],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Kme};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(ka.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new f8(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},t0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,o,a,l,c,u,f;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:nN,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:t0.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Zk,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:p=>ige[p-1]||oge,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(p,m)=>m(JSON.stringify(p)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class tS extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class cge extends tS{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class iN extends tS{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const nS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zh(async()=>{const{default:r}=await Promise.resolve().then(()=>qd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},uge=()=>xt(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zh(()=>Promise.resolve().then(()=>qd),void 0)).Response:Response}),oN=t=>{if(Array.isArray(t))return t.map(n=>oN(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=oN(r)}),e},dge=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},eT=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},fge=(t,e,n)=>xt(void 0,void 0,void 0,function*(){const r=yield uge();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const o=t.status||500,a=(s==null?void 0:s.statusCode)||o+"";e(new cge(eT(s),o,a))}).catch(s=>{e(new iN(eT(s),s))}):e(new iN(eT(t),t))}),hge=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(dge(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function iy(t,e,n,r,s,o){return xt(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(n,hge(e,r,s,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>fge(c,l,r))})})}function Sg(t,e,n,r){return xt(this,void 0,void 0,function*(){return iy(t,"GET",e,n,r)})}function wa(t,e,n,r,s){return xt(this,void 0,void 0,function*(){return iy(t,"POST",e,r,s,n)})}function aN(t,e,n,r,s){return xt(this,void 0,void 0,function*(){return iy(t,"PUT",e,r,s,n)})}function pge(t,e,n,r){return xt(this,void 0,void 0,function*(){return iy(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function rS(t,e,n,r,s){return xt(this,void 0,void 0,function*(){return iy(t,"DELETE",e,r,s,n)})}class mge{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return xt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pr(e))return{data:null,error:e};throw e}})}}var m8;class gge{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[m8]="BlobDownloadBuilder",this.promise=null}asStream(){return new mge(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return xt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pr(e))return{data:null,error:e};throw e}})}}m8=Symbol.toStringTag;const yge={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fM={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xge{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=nS(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return xt(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},fM),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),p=yield(e=="PUT"?aN:wa)(this.fetch,`${this.url}/object/${f}`,o,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(pr(o))return{data:null,error:o};throw o}})}upload(e,n,r){return xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return xt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:fM.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const p=yield aN(this.fetch,l.toString(),c,{headers:f});return{data:{path:o,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(pr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return xt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield wa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new tS("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}})}update(e,n,r){return xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return xt(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pr(s))return{data:null,error:s};throw s}})}copy(e,n,r){return xt(this,void 0,void 0,function*(){try{return{data:{path:(yield wa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pr(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return xt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield wa(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pr(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return xt(this,void 0,void 0,function*(){try{const s=yield wa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pr(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=o?`?${o}`:"",l=this._getFinalPath(e),c=()=>Sg(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new gge(c,this.shouldThrowOnError)}info(e){return xt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Sg(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:oN(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}})}exists(e){return xt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield pge(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pr(r)&&r instanceof iN){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return xt(this,void 0,void 0,function*(){try{return{data:yield rS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}})}list(e,n,r){return xt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},yge),n),{prefix:e||""});return{data:yield wa(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pr(s))return{data:null,error:s};throw s}})}listV2(e,n){return xt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield wa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const g8="2.78.0",y8={"X-Client-Info":`storage-js/${g8}`};class bge{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},y8),n),this.fetch=nS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return xt(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Sg(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}})}getBucket(e){return xt(this,void 0,void 0,function*(){try{return{data:yield Sg(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}})}createBucket(e){return xt(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield wa(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pr(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return xt(this,void 0,void 0,function*(){try{return{data:yield aN(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return xt(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}})}deleteBucket(e){return xt(this,void 0,void 0,function*(){try{return{data:yield rS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class vge{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},y8),n),this.fetch=nS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return xt(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}})}listBuckets(e){return xt(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Sg(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}})}deleteBucket(e){return xt(this,void 0,void 0,function*(){try{return{data:yield rS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}})}}const sS={"X-Client-Info":`storage-js/${g8}`,"Content-Type":"application/json"};class x8 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Zi(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class tT extends x8{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wge extends x8{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var hM;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(hM||(hM={}));const iS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zh(async()=>{const{default:r}=await Promise.resolve().then(()=>qd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},kge=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pM=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Tge=(t,e,n)=>xt(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,o=t;if(typeof o.json=="function")o.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";e(new tT(pM(a),s,l))}).catch(()=>{const a=s+"",l=o.statusText||`HTTP ${s} error`;e(new tT(l,s,a))});else{const a=s+"",l=o.statusText||`HTTP ${s} error`;e(new tT(l,s,a))}}else e(new wge(pM(t),t))}),Nge=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(kge(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function jge(t,e,n,r,s,o){return xt(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(n,Nge(e,r,s,o)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>Tge(c,l,r))})})}function eo(t,e,n,r,s){return xt(this,void 0,void 0,function*(){return jge(t,"POST",e,r,s,n)})}class Cge{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sS),n),this.fetch=iS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return xt(this,void 0,void 0,function*(){try{return{data:(yield eo(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}getIndex(e,n){return xt(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zi(r))return{data:null,error:r};throw r}})}listIndexes(e){return xt(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return xt(this,void 0,void 0,function*(){try{return{data:(yield eo(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zi(r))return{data:null,error:r};throw r}})}}class Sge{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sS),n),this.fetch=iS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return xt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield eo(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}getVectors(e){return xt(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}listVectors(e){return xt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield eo(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}queryVectors(e){return xt(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}deleteVectors(e){return xt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield eo(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}}class Ege{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sS),n),this.fetch=iS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return xt(this,void 0,void 0,function*(){try{return{data:(yield eo(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}getBucket(e){return xt(this,void 0,void 0,function*(){try{return{data:yield eo(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}listBuckets(){return xt(this,arguments,void 0,function*(e={}){try{return{data:yield eo(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}deleteBucket(e){return xt(this,void 0,void 0,function*(){try{return{data:(yield eo(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}})}}class _ge extends Ege{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Age(this.url,this.headers,e,this.fetch)}}class Age extends Cge{constructor(e,n,r,s){super(e,n,s),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return xt(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return xt(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return xt(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return xt(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Pge(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Pge extends Sge{constructor(e,n,r,s,o){super(e,n,o),this.vectorBucketName=r,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return xt(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return xt(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return xt(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return xt(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return xt(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Rge extends bge{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new xge(this.url,this.headers,e,this.fetch)}get vectors(){return new _ge(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new vge(this.url+"/iceberg",this.headers,this.fetch)}}const Ige="2.78.0";let cm="";typeof Deno<"u"?cm="deno":typeof document<"u"?cm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cm="react-native":cm="node";const Mge={"X-Client-Info":`supabase-js-${cm}/${Ige}`},Dge={headers:Mge},Oge={schema:"public"},Lge={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fge={},zge=t=>{let e;return t?e=t:typeof fetch>"u"?e=s8:e=fetch,(...n)=>e(...n)},$ge=()=>typeof Headers>"u"?i8:Headers,Bge=(t,e,n)=>{const r=zge(n),s=$ge();return async(o,a)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},a),{headers:u}))}};function Uge(t){return t.endsWith("/")?t:t+"/"}function Vge(t,e){var n,r;const{db:s,auth:o,realtime:a,global:l}=t,{db:c,auth:u,realtime:f,global:p}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},f),a),storage:{},global:Object.assign(Object.assign(Object.assign({},p),l),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function qge(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Uge(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const b8="2.78.0",Ff=30*1e3,lN=3,nT=lN*Ff,Wge="http://localhost:9999",Hge="supabase.auth.token",Gge={"X-Client-Info":`gotrue-js/${b8}`},cN="X-Supabase-Api-Version",v8={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Kge=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Yge=600*1e3;class Eg extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function At(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Jge extends Eg{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Xge(t){return At(t)&&t.name==="AuthApiError"}class Zu extends Eg{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pu extends Eg{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class ma extends pu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qge(t){return At(t)&&t.name==="AuthSessionMissingError"}class Sf extends pu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class n0 extends pu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class r0 extends pu{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zge(t){return At(t)&&t.name==="AuthImplicitGrantRedirectError"}class mM extends pu{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uN extends pu{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function rT(t){return At(t)&&t.name==="AuthRetryableFetchError"}class gM extends pu{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class dN extends pu{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yM=` 	
\r=`.split(""),eye=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<yM.length;e+=1)t[yM[e].charCodeAt(0)]=-2;for(let e=0;e<Tb.length;e+=1)t[Tb[e].charCodeAt(0)]=e;return t})();function xM(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Tb[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Tb[r]),e.queuedBits-=6}}function w8(t,e,n){const r=eye[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function bM(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{rye(a,r,n)};for(let a=0;a<t.length;a+=1)w8(t.charCodeAt(a),s,o);return e.join("")}function tye(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nye(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}tye(r,e)}}function rye(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function mh(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)w8(t.charCodeAt(s),n,r);return new Uint8Array(e)}function sye(t){const e=[];return nye(t,n=>e.push(n)),new Uint8Array(e)}function id(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>xM(s,n,r)),xM(null,n,r),e.join("")}function iye(t){return Math.round(Date.now()/1e3)+t}function oye(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Qs=()=>typeof window<"u"&&typeof document<"u",zu={tested:!1,writable:!1},k8=()=>{if(!Qs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zu.tested)return zu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),zu.tested=!0,zu.writable=!0}catch{zu.tested=!0,zu.writable=!1}return zu.writable};function aye(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const T8=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zh(async()=>{const{default:r}=await Promise.resolve().then(()=>qd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},lye=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",zf=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},$u=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ac=async(t,e)=>{await t.removeItem(e)};class Rv{constructor(){this.promise=new Rv.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Rv.promiseConstructor=Promise;function sT(t){const e=t.split(".");if(e.length!==3)throw new dN("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Kge.test(e[r]))throw new dN("JWT not in base64url format");return{header:JSON.parse(bM(e[0])),payload:JSON.parse(bM(e[1])),signature:mh(e[2]),raw:{header:e[0],payload:e[1]}}}async function cye(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function uye(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){s(a);return}}})()})}function dye(t){return("0"+t.toString(16)).substr(-2)}function fye(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,dye).join("")}async function hye(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function pye(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await hye(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ef(t,e,n=!1){const r=fye();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await zf(t,`${e}-code-verifier`,s);const o=await pye(r);return[o,r===o?"plain":"s256"]}const mye=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gye(t){const e=t.headers.get(cN);if(!e||!e.match(mye))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yye(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function xye(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bye=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _f(t){if(!bye.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function iT(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vye(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function vM(t){return JSON.parse(JSON.stringify(t))}const Gu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wye=[502,503,504];async function wM(t){var e;if(!lye(t))throw new uN(Gu(t),0);if(wye.includes(t.status))throw new uN(Gu(t),t.status);let n;try{n=await t.json()}catch(o){throw new Zu(Gu(o),o)}let r;const s=gye(t);if(s&&s.getTime()>=v8["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new gM(Gu(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ma}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new gM(Gu(n),t.status,n.weak_password.reasons);throw new Jge(Gu(n),t.status||500,r)}const kye=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function qt(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[cN]||(o[cN]=v8["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Tye(t,e,n+l,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Tye(t,e,n,r,s,o){const a=kye(e,r,s,o);let l;try{l=await t(n,Object.assign({},a))}catch(c){throw console.error(c),new uN(Gu(c),0)}if(l.ok||await wM(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await wM(c)}}function ga(t){var e;let n=null;Cye(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=iye(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function kM(t){const e=ga(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Fc(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Nye(t){return{data:t,error:null}}function jye(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,a=au(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function TM(t){return t}function Cye(t){return t.access_token&&t.refresh_token&&t.expires_in}const oT=["global","local","others"];class Sye{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=T8(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=oT[0]){if(oT.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${oT.join(", ")}`);try{return await qt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Fc})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=au(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:jye,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(At(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await qt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Fc})}catch(n){if(At(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:TM});if(f.error)throw f.error;const p=await f.json(),m=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(w=>{const y=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(w.split(";")[1].split("=")[1]);u[`${T}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(At(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){_f(e);try{return await qt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Fc})}catch(n){if(At(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){_f(e);try{return await qt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Fc})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){_f(e);try{return await qt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Fc})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){_f(e.userId);try{const{data:n,error:r}=await qt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(At(n))return{data:null,error:n};throw n}}async _deleteFactor(e){_f(e.userId),_f(e.id);try{return{data:await qt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await qt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:TM});if(f.error)throw f.error;const p=await f.json(),m=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(w=>{const y=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(w.split(";")[1].split("=")[1]);u[`${T}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(At(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await qt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await qt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await qt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(At(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await qt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await qt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(At(n))return{data:null,error:n};throw n}}}function NM(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Af={debug:!!(globalThis&&k8()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class N8 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Eye extends N8{}async function _ye(t,e,n){Af.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Af.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Af.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Af.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Af.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Eye(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Af.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Aye(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function j8(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Pye(t){return parseInt(t,16)}function Rye(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Iye(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:f,uri:p,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=j8(t.address),w=f?`${f}://${r}`:r,y=t.statement?`${t.statement}
`:"",T=`${w} wants you to sign in with your Ethereum account:
${g}

${y}`;let j=`URI: ${p}
Version: ${m}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(s&&(j+=`
Expiration Time: ${s.toISOString()}`),l&&(j+=`
Not Before: ${l.toISOString()}`),c&&(j+=`
Request ID: ${c}`),u){let _=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);_+=`
- ${v}`}j+=_}return`${T}
${j}`}class Ir extends Error{constructor({message:e,code:n,cause:r,name:s}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Nb extends Ir{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Mye({error:t,options:e}){var n,r,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ir({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ir({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ir({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ir({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ir({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ir({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Ir({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ir({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(C8(a)){if(o.rp.id!==a)return new Ir({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ir({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ir({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ir({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ir({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Dye({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ir({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ir({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(C8(r)){if(n.rpId!==r)return new Ir({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ir({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ir({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ir({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Oye{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Lye=new Oye;function Fye(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=au(t,["challenge","user","excludeCredentials"]),o=mh(e).buffer,a=Object.assign(Object.assign({},n),{id:mh(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:o,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:mh(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function zye(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=au(t,["challenge","allowCredentials"]),s=mh(e).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},l),{id:mh(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function $ye(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:id(new Uint8Array(t.response.attestationObject)),clientDataJSON:id(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Bye(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:id(new Uint8Array(s.authenticatorData)),clientDataJSON:id(new Uint8Array(s.clientDataJSON)),signature:id(new Uint8Array(s.signature)),userHandle:s.userHandle?id(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function C8(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function jM(){var t,e;return!!(Qs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Uye(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nb("Browser returned unexpected credential type",e)}:{data:null,error:new Nb("Empty credential response",e)}}catch(e){return{data:null,error:Mye({error:e,options:t})}}}async function Vye(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Nb("Browser returned unexpected credential type",e)}:{data:null,error:new Nb("Empty credential response",e)}}catch(e){return{data:null,error:Dye({error:e,options:t})}}}const qye={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Wye={userVerification:"preferred",hints:["security-key"]};function jb(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const o in s){const a=s[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const l=r[o];e(l)?r[o]=jb(l,a):r[o]=jb(a)}else r[o]=a}return r}function Hye(t,e){return jb(qye,t,e||{})}function Gye(t,e){return jb(Wye,t,e||{})}class Kye{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},o){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};const c=s??Lye.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=Hye(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:f,error:p}=await Uye({publicKey:u,signal:c});return f?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const u=Gye(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:f,error:p}=await Vye(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return f?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(a){return At(a)?{data:null,error:a}:{data:null,error:new Zu("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},o){if(!n)return{data:null,error:new Eg("rpId is required for WebAuthn authentication")};try{if(!jM())return{data:null,error:new Zu("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:o});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return At(a)?{data:null,error:a}:{data:null,error:new Zu("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},o){if(!n)return{data:null,error:new Eg("rpId is required for WebAuthn registration")};try{if(!jM())return{data:null,error:new Zu("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:o});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return At(a)?{data:null,error:a}:{data:null,error:new Zu("Unexpected error in register",a)}}}}Aye();const Yye={url:Wge,storageKey:Hge,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gge,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function CM(t,e,n){return await n()}const Pf={};class _g{get jwks(){var e,n;return(n=(e=Pf[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Pf[this.storageKey]=Object.assign(Object.assign({},Pf[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Pf[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Pf[this.storageKey]=Object.assign(Object.assign({},Pf[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_g.nextInstanceID,_g.nextInstanceID+=1,this.instanceID>0&&Qs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Yye),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Sye({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=T8(s.fetch),this.lock=s.lock||CM,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Qs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=_ye:this.lock=CM,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Kye(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:k8()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=NM(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=NM(this.memoryStorage)),Qs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${b8}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=aye(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Qs()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Zge(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return At(n)?{error:n}:{error:new Zu("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ga}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(At(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:f,password:p,options:m}=e;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await Ef(this.storage,this.storageKey)),o=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:f,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:w},xform:ga})}else if("phone"in e){const{phone:f,password:p,options:m}=e;o=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ga})}else throw new n0("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(At(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:l}=e;n=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:kM})}else if("phone"in e){const{phone:o,password:a,options:l}=e;n=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:kM})}else throw new n0("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Sf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,o,a,l,c,u,f,p,m;let g,w;if("message"in e)g=e.message,w=e.signature;else{const{chain:y,wallet:T,statement:j,options:_}=e;let v;if(Qs())if(typeof T=="object")v=T;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")v=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=T}const P=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),D=await v.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=j8(D[0]);let U=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!U){const Y=await v.request({method:"eth_chainId"});U=Pye(Y)}const K={domain:P.host,address:$,statement:j,uri:P.href,version:"1",chainId:U,nonce:(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=_==null?void 0:_.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=_==null?void 0:_.signInWithEthereum)===null||f===void 0?void 0:f.resources};g=Iye(K),w=await v.request({method:"personal_sign",params:[Rye(g),$]})}try{const{data:y,error:T}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:w},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ga});if(T)throw T;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Sf}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:T})}catch(y){if(At(y))return{data:{user:null,session:null},error:y};throw y}}async signInWithSolana(e){var n,r,s,o,a,l,c,u,f,p,m,g;let w,y;if("message"in e)w=e.message,y=e.signature;else{const{chain:T,wallet:j,statement:_,options:v}=e;let P;if(Qs())if(typeof j=="object")P=j;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))P=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=j}const D=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in P&&P.signIn){const $=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),_?{statement:_}:null));let U;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")U=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)U=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)w=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),y=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${D.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((p=(f=v==null?void 0:v.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...v.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const $=await P.signMessage(new TextEncoder().encode(w),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=$}}try{const{data:T,error:j}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:id(y)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ga});if(j)throw j;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new Sf}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:j})}catch(T){if(At(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const n=await $u(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:a}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ga});if(await Ac(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Sf}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(At(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:a}=e,l=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ga}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Sf}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,o,a;try{if("email"in e){const{email:l,options:c}=e;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Ef(this.storage,this.storageKey));const{error:p}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:f}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new n0("You must provide either an email or phone number.")}catch(l){if(At(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:ga});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(At(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await Ef(this.storage,this.storageKey)),await qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:Nye})}catch(o){if(At(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ma;const{error:s}=await qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(At(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:a}=await qt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:a,error:l}=await qt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new n0("You must provide either an email or phone number and a type")}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await $u(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<nT:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await $u(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=iT()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=vye(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Fc}):await this._useSession(async n=>{var r,s,o;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ma}:await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Fc})})}catch(n){if(At(n))return Qge(n)&&(await this._removeSession(),await Ac(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new ma;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ef(this.storage,this.storageKey));const{data:u,error:f}=await qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Fc});if(f)throw f;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ma;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:a}=sT(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(At(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:l}=n;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ma;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Qs())throw new r0("No browser detected.");if(e.error||e.error_description||e.error_code)throw new r0(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new mM("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new r0("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new mM("No code detected.");const{data:_,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!o||!l||!a||!u)throw new r0("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(l);let m=f+p;c&&(m=parseInt(c));const g=m-f;g*1e3<=Ff&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const w=m-p;f-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,m,f):f-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,m,f);const{data:y,error:T}=await this._getUser(o);if(T)throw T;const j={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:p,expires_at:m,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:e.type},error:null}}catch(r){if(At(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await $u(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(Xge(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ac(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=oye(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ef(this.storage,this.storageKey,!0));try{return await qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(At(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var a,l,c,u,f;const{data:p,error:m}=o;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await qt(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Qs()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(At(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:o}}=n;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:f}=e,p=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ga}),{data:m,error:g}=p;return g?{data:{user:null,session:null},error:g}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Sf}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:g})}catch(s){if(At(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:a}=n;if(a)throw a;return await qt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await uye(async s=>(s>0&&await cye(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ga})),(s,o)=>{const a=200*Math.pow(2,s);return o&&rT(o)&&Date.now()+a-r<Ff})}catch(r){if(this._debug(n,"error",r),At(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Qs()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await $u(this.storage,this.storageKey);if(s&&this.userStorage){let a=await $u(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await zf(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:iT()}else if(s&&!s.user&&!s.user){const a=await $u(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Ac(this.storage,this.storageKey+"-user"),await zf(this.storage,this.storageKey,s)):s.user=iT()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<nT;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${nT}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),rT(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ma;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Rv;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new ma;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),At(o)){const a={data:null,error:o};return rT(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await zf(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=vM(s);await zf(this.storage,this.storageKey,o)}else{const s=vM(n);await zf(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Ac(this.storage,this.storageKey),await Ac(this.storage,this.storageKey+"-code-verifier"),await Ac(this.storage,this.storageKey+"-user"),this.userStorage&&await Ac(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ff);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ff);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ff}ms, refresh threshold is ${lN} ticks`),s<=lN&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof N8)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await Ef(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await qt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await qt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?$ye(e.webauthn.credential_response):Bye(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await qt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(n){if(At(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=await qt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Fye(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:zye(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(At(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=sT(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?{data:null,error:s}:r?await qt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):{data:null,error:new ma}})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return{data:null,error:o};if(!s)return{data:null,error:new ma};const a=await qt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Qs()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(At(r))return{data:null,error:r};throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return{data:null,error:o};if(!s)return{data:null,error:new ma};const a=await qt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Qs()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(At(r))return{data:null,error:r};throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Yge>s)return r;const{data:o,error:a}=await qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:w}=await this.getSession();if(w||!g.session)return{data:null,error:w};r=g.session.access_token}const{header:s,payload:o,signature:a,raw:{header:l,payload:c}}=sT(r);n!=null&&n.allowExpired||yye(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:o,header:s,signature:a},error:null}}const f=xye(s.alg),p=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,a,sye(`${l}.${c}`)))throw new dN("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}}}_g.nextInstanceID=0;const Jye=_g;class Xye extends Jye{constructor(e){super(e)}}class Qye{constructor(e,n,r){var s,o,a;this.supabaseUrl=e,this.supabaseKey=n;const l=qge(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Oge,realtime:Fge,auth:Object.assign(Object.assign({},Lge),{storageKey:c}),global:Dge},f=Vge(r??{},u);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=Bge(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Wme(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Rge(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Ome(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,storageKey:a,flowType:l,lock:c,debug:u},f,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xye({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,flowType:l,lock:c,debug:u,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new lge(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zye=(t,e,n)=>new Qye(t,e,n);function exe(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}exe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const S8="http://127.0.0.1:54321",oS="sb_publishable_ACJWlzQHlZjBrEguHvfOxg_3BJgxAaH",txe=oS==="your-supabase-anon-key",en=Zye(S8,oS,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),Ll={USER_SOCIAL_ACCOUNTS:"user_social_accounts",VERIFICATION_RECORDS:"social_media_verifications",PURCHASE_SIGNATURES:"purchase_signatures"},Cr={TWITTER:"twitter",DISCORD:"discord",TELEGRAM:"telegram"},fa={PENDING:"pending",VERIFIED:"completed",FAILED:"failed",EXPIRED:"expired"},Bu={TWITTER_LIKE:"twitter_like",TWITTER_RETWEET:"twitter_retweet",TWITTER_FOLLOW:"twitter_follow",TWITTER_MENTION:"twitter_mention",DISCORD_JOIN:"discord_join",DISCORD_ROLE:"discord_role",TELEGRAM_JOIN:"telegram_join"},E8={VERIFY_TWITTER:"verify-twitter",VERIFY_DISCORD:"verify-discord",VERIFY_TELEGRAM:"verify-telegram",GENERATE_SIGNATURE:"generate-signature",OAUTH_TWITTER:"oauth-twitter",OAUTH_DISCORD:"oauth-discord"},Ya=async(t,e={})=>{try{const{data:n,error:r}=await en.functions.invoke(t,{body:e});if(r)throw r;return{data:n,error:null}}catch(n){return console.error(`Error calling edge function ${t}:`,n),{data:null,error:n}}};class nxe{constructor(){this.authenticatedAccounts=new Map}async initiateTwitterAuth(e){try{const{data:n,error:r}=await Ya("oauth-twitter",{user_address:e,action:"initiate"});if(r)throw r;return{success:!0,authUrl:n.auth_url,error:null}}catch(n){return console.error("Twitter OAuth initiation failed:",n),{success:!1,authUrl:null,error:n.message}}}async handleTwitterCallback(e,n,r){try{const{data:s,error:o}=await Ya("oauth-twitter",{code:e,state:n,user_address:r,action:"callback"});if(o)throw o;return await this.storeSocialAccount({walletAddress:r,platform:Cr.TWITTER,platformUserId:s.user_id,platformUsername:s.username,accessToken:s.access_token,refreshToken:s.refresh_token,expiresAt:s.expires_at}),this.authenticatedAccounts.set(`${r}_${Cr.TWITTER}`,s),{success:!0,error:null}}catch(s){return console.error("Twitter OAuth callback failed:",s),{success:!1,error:s.message}}}async initiateDiscordAuth(e){try{const{data:n,error:r}=await Ya("oauth-discord",{user_address:e,action:"initiate"});if(r)throw r;return{success:!0,authUrl:n.auth_url,error:null}}catch(n){return console.error("Discord OAuth initiation failed:",n),{success:!1,authUrl:null,error:n.message}}}async handleDiscordCallback(e,n,r){try{const{data:s,error:o}=await Ya("oauth-discord",{code:e,state:n,user_address:r,action:"callback"});if(o)throw o;return await this.storeSocialAccount({walletAddress:r,platform:Cr.DISCORD,platformUserId:s.user_id,platformUsername:s.username,accessToken:s.access_token,refreshToken:s.refresh_token,expiresAt:s.expires_at}),this.authenticatedAccounts.set(`${r}_${Cr.DISCORD}`,s),{success:!0,error:null}}catch(s){return console.error("Discord OAuth callback failed:",s),{success:!1,error:s.message}}}async initiateTelegramAuth(e,n){try{const{data:r,error:s}=await Ya("oauth-telegram",{user_address:e,telegram_username:n,action:"initiate"});if(s)throw s;return{success:!0,verificationCode:r.verification_code,botUsername:r.bot_username,error:null}}catch(r){return console.error("Telegram auth initiation failed:",r),{success:!1,verificationCode:null,error:r.message}}}async verifyTelegramAuth(e,n){try{const{data:r,error:s}=await Ya("oauth-telegram",{user_address:e,verification_code:n,action:"verify"});if(s)throw s;return await this.storeSocialAccount({walletAddress:e,platform:Cr.TELEGRAM,platformUserId:r.user_id,platformUsername:r.username,accessToken:null,refreshToken:null,expiresAt:null}),this.authenticatedAccounts.set(`${e}_${Cr.TELEGRAM}`,r),{success:!0,error:null}}catch(r){return console.error("Telegram auth verification failed:",r),{success:!1,error:r.message}}}async storeSocialAccount(e){const{walletAddress:n,platform:r,platformUserId:s,platformUsername:o,accessToken:a,refreshToken:l,expiresAt:c}=e,{data:u}=await en.from(Ll.USER_SOCIAL_ACCOUNTS).select("id").eq("user_address",n).eq("platform",r).single(),f={user_address:n,platform:r,platform_user_id:s,platform_username:o,access_token:a,refresh_token:l,expires_at:c,updated_at:new Date().toISOString()};if(u){const{error:p}=await en.from(Ll.USER_SOCIAL_ACCOUNTS).update(f).eq("id",u.id);if(p)throw p}else{const{error:p}=await en.from(Ll.USER_SOCIAL_ACCOUNTS).insert(f);if(p)throw p}}async getAuthenticatedAccounts(e){try{if(console.log("Fetching authenticated accounts for wallet:",e),!en||!en.from||typeof en.from!="function")return console.warn("Supabase not configured, returning empty accounts"),{accounts:[],error:"Supabase not configured"};const{data:n,error:r}=await en.from(Ll.USER_SOCIAL_ACCOUNTS).select("*").eq("user_address",e);if(console.log("Supabase query result:",{data:n,error:r}),r&&r.message==="Supabase not configured")return console.warn("Supabase not configured, returning empty accounts"),{accounts:[],error:null};if(r)throw console.error("Supabase query error:",r),r;const o=(Array.isArray(n)?n:[]).filter(a=>!(a.token_expires_at&&new Date(a.token_expires_at)<new Date));return console.log("Valid accounts found:",o.length),{accounts:o,error:null}}catch(n){return console.error("Failed to load authenticated accounts:",n),{accounts:[],error:n.message}}}async isAuthenticated(e,n){try{if(console.log("Checking authentication for platform:",n,"wallet:",e),!en||!en.from||typeof en.from!="function")return console.warn("Supabase not configured, returning not authenticated"),{success:!0,isAuthenticated:!1,account:null};const{data:r,error:s}=await en.from(Ll.USER_SOCIAL_ACCOUNTS).select("*").eq("user_address",e).eq("platform",n).maybeSingle();return console.log("Authentication check result:",{data:r,error:s}),s&&s.message==="Supabase not configured"?(console.warn("Supabase not configured, returning not authenticated"),{success:!0,isAuthenticated:!1,account:null}):s&&s.code!=="PGRST116"?(console.error("Authentication check error:",s),{success:!1,error:s.message,isAuthenticated:!1}):r?r.token_expires_at&&new Date(r.token_expires_at)<new Date?{success:!0,isAuthenticated:!1,account:null}:{success:!0,isAuthenticated:!0,account:r}:{success:!0,isAuthenticated:!1,account:null}}catch(r){return console.error("Failed to check authentication status:",r),{success:!1,error:r.message,isAuthenticated:!1}}}async refreshToken(e,n){try{const{account:r}=await this.isAuthenticated(e,n);if(!r||!r.refresh_token)throw new Error("No refresh token available");const{data:s,error:o}=await Ya(`oauth-${n}`,{user_address:e,refresh_token:r.refresh_token,action:"refresh"});if(o)throw o;return await this.storeSocialAccount({walletAddress:e,platform:n,platformUserId:r.platform_user_id,platformUsername:r.platform_username,accessToken:s.access_token,refreshToken:s.refresh_token||r.refresh_token,expiresAt:s.expires_at}),{success:!0,error:null}}catch(r){return console.error("Token refresh failed:",r),{success:!1,error:r.message}}}async disconnectAccount(e,n){try{const{error:r}=await en.from(Ll.USER_SOCIAL_ACCOUNTS).delete().eq("user_address",e).eq("platform",n);if(r)throw r;return this.authenticatedAccounts.delete(`${e}_${n}`),{success:!0,error:null}}catch(r){return console.error("Failed to disconnect account:",r),{success:!1,error:r.message}}}getAuthInstructions(e){return{[Cr.TWITTER]:{title:"Connect Twitter/X Account",description:"Connect your Twitter/X account to verify social media tasks",steps:['Click "Connect Twitter" button',"You will be redirected to Twitter/X","Authorize Dropr to access your account","You will be redirected back to complete the connection"]},[Cr.DISCORD]:{title:"Connect Discord Account",description:"Connect your Discord account to verify server membership and roles",steps:['Click "Connect Discord" button',"You will be redirected to Discord","Authorize Dropr to access your account","You will be redirected back to complete the connection"]},[Cr.TELEGRAM]:{title:"Connect Telegram Account",description:"Connect your Telegram account to verify group membership",steps:["Enter your Telegram username",'Click "Connect Telegram" button',"Send the verification code to our bot","Your account will be connected automatically"]}}[e]||null}}const io=new nxe;class rxe{constructor(){this.verificationCache=new Map}async verifyTwitterTask(e,n,r,s){try{const{isAuthenticated:o,account:a}=await io.isAuthenticated(e,Cr.TWITTER);if(!o)throw new Error("Twitter account not authenticated. Please connect your Twitter account first.");const l=await this.createVerificationRecord({walletAddress:e,raffleAddress:n,platform:Cr.TWITTER,taskType:r,taskData:s}),{data:c,error:u}=await Ya("verify-twitter",{user_address:e,raffle_id:n,verification_id:l.id,task_type:r,task_data:s,twitter_user_id:a.platform_user_id,access_token:a.access_token});if(u)throw await this.updateVerificationStatus(l.id,fa.FAILED,u.message),u;return await this.updateVerificationStatus(l.id,fa.VERIFIED),{success:!0,verificationId:l.id,error:null,details:c}}catch(o){return console.error("Twitter verification failed:",o),{success:!1,verificationId:null,error:o.message}}}async verifyDiscordTask(e,n,r,s){try{const{isAuthenticated:o,account:a}=await io.isAuthenticated(e,Cr.DISCORD);if(!o)throw new Error("Discord account not authenticated. Please connect your Discord account first.");const l=await this.createVerificationRecord({walletAddress:e,raffleAddress:n,platform:Cr.DISCORD,taskType:r,taskData:s}),{data:c,error:u}=await Ya("verify-discord",{user_address:e,raffle_id:n,verification_id:l.id,task_type:r,task_data:s,discord_user_id:a.platform_user_id,access_token:a.access_token});if(u)throw await this.updateVerificationStatus(l.id,fa.FAILED,u.message),u;return await this.updateVerificationStatus(l.id,fa.VERIFIED),{success:!0,verificationId:l.id,error:null,details:c}}catch(o){return console.error("Discord verification failed:",o),{success:!1,verificationId:null,error:o.message}}}async verifyTelegramTask(e,n,r,s){try{const{isAuthenticated:o,account:a}=await io.isAuthenticated(e,Cr.TELEGRAM);if(!o)throw new Error("Telegram account not authenticated. Please connect your Telegram account first.");const l=await this.createVerificationRecord({walletAddress:e,raffleAddress:n,platform:Cr.TELEGRAM,taskType:r,taskData:s}),{data:c,error:u}=await Ya("verify-telegram",{user_address:e,raffle_id:n,verification_id:l.id,task_type:r,task_data:s,telegram_user_id:a.platform_user_id});if(u)throw await this.updateVerificationStatus(l.id,fa.FAILED,u.message),u;return await this.updateVerificationStatus(l.id,fa.VERIFIED),{success:!0,verificationId:l.id,error:null,details:c}}catch(o){return console.error("Telegram verification failed:",o),{success:!1,verificationId:null,error:o.message}}}async createVerificationRecord(e){try{if(!en||!en.from||typeof en.from!="function")return console.warn("Supabase not configured, returning mock verification record"),{id:"mock-id",...e,status:fa.PENDING};const{walletAddress:n,raffleAddress:r,platform:s,taskType:o,taskData:a}=e,l={user_address:n,raffle_id:r,platform:s,task_type:o,task_data:a,status:fa.PENDING,updated_at:new Date().toISOString(),created_at:new Date().toISOString()},{data:c,error:u}=await en.from(Ll.VERIFICATION_RECORDS).upsert(l,{onConflict:"user_address,raffle_id,platform,task_type",ignoreDuplicates:!1}).select().single();if(u)throw u;return c}catch(n){return console.error("Failed to create verification record:",n),{id:"mock-id",...e,status:fa.PENDING}}}async updateVerificationStatus(e,n,r=null){try{if(!en||!en.from||typeof en.from!="function"){console.warn("Supabase not configured, skipping verification status update");return}const s={status:n,updated_at:new Date().toISOString()};n===fa.VERIFIED&&(s.verified_at=new Date().toISOString()),r&&(s.error_message=r);const{error:o}=await en.from(Ll.VERIFICATION_RECORDS).update(s).eq("id",e);if(o)throw o}catch(s){console.error("Failed to update verification status:",s)}}async getVerificationRecords(e,n){try{if(!en||!en.from||typeof en.from!="function")return console.warn("Supabase not configured, returning empty verification records"),{records:[],error:"Supabase not configured"};const r=en.from(Ll.VERIFICATION_RECORDS).select("*").eq("user_address",e).eq("raffle_id",n).order("created_at",{ascending:!1});if(!r||typeof r.then!="function")return console.warn("Supabase query not properly formed, returning empty records"),{records:[],error:"Supabase query failed"};const{data:s,error:o}=await r;return o&&o.message==="Supabase not configured"?(console.warn("Supabase not configured, returning empty records"),{records:[],error:null}):o?(console.error("Failed to get verification records:",o),{records:[],error:o.message||o}):{records:s||[],error:null}}catch(r){return console.error("Failed to get verification records:",r),{records:[],error:(r==null?void 0:r.message)||String(r)}}}async checkAllTasksVerified(e,n,r){try{const s=Array.isArray(r)?r:[],{records:o}=await this.getVerificationRecords(e,n),l=(Array.isArray(o)?o:[]).filter(f=>f.status===fa.VERIFIED),c=l.map(f=>`${f.platform}_${f.task_type}_${JSON.stringify(f.task_data)}`),u=s.filter(f=>{const p=`${f.platform}_${f.type}_${JSON.stringify(f.data)}`;return!c.includes(p)});return{allVerified:u.length===0,verifiedTasks:l,missingTasks:u}}catch(s){return console.error("Failed to check task verification status:",s),{allVerified:!1,verifiedTasks:[],missingTasks:Array.isArray(r)?r:[]}}}async verifyTask(e,n,r,s){switch(e){case Cr.TWITTER:return await this.verifyTwitterTask(n,r,s);case Cr.DISCORD:return await this.verifyDiscordTask(n,r,s);case Cr.TELEGRAM:return await this.verifyTelegramTask(n,r,s);default:return{success:!1,verificationId:null,error:`Unsupported platform: ${e}`}}}getTaskInstructions(e,n){var s;return((s={[Cr.TWITTER]:{[Bu.TWITTER_LIKE]:{title:"Like Tweet",description:"Like the specified tweet to complete this task",steps:["Click the heart icon on the tweet","Ensure the heart is filled (red color)",'Click "Verify" to check completion']},[Bu.TWITTER_RETWEET]:{title:"Retweet",description:"Retweet the specified tweet to complete this task",steps:["Click the retweet icon on the tweet",'Choose "Retweet" or "Quote Tweet"','Click "Verify" to check completion']},[Bu.TWITTER_FOLLOW]:{title:"Follow Account",description:"Follow the specified Twitter account",steps:["Visit the Twitter profile",'Click the "Follow" button','Click "Verify" to check completion']},[Bu.TWITTER_MENTION]:{title:"Mention in Tweet",description:"Create a tweet mentioning the specified account",steps:["Create a new tweet","Include the required mention (@username)","Post the tweet",'Click "Verify" to check completion']}},[Cr.DISCORD]:{[Bu.DISCORD_JOIN]:{title:"Join Discord Server",description:"Join the specified Discord server",steps:["Click the Discord invite link","Accept the server invitation","Ensure you remain in the server",'Click "Verify" to check membership']},[Bu.DISCORD_ROLE]:{title:"Obtain Discord Role",description:"Get the specified role in the Discord server",steps:["Join the Discord server first","Follow server instructions to get the role","Check that you have the required role",'Click "Verify" to check role assignment']}},[Cr.TELEGRAM]:{[Bu.TELEGRAM_JOIN]:{title:"Join Telegram Group",description:"Join the specified Telegram group or channel",steps:["Click the Telegram invite link","Join the group or channel","Ensure you remain a member",'Click "Verify" to check membership']}}}[e])==null?void 0:s[n])||{title:"Unknown Task",description:"Task instructions not available",steps:["Contact support for assistance"]}}clearCache(){this.verificationCache.clear()}getCachedResult(e){return this.verificationCache.get(e)||null}setCachedResult(e,n,r=3e5){this.verificationCache.set(e,n),setTimeout(()=>{this.verificationCache.delete(e)},r)}}const zc=new rxe;class sxe{constructor(){this.subscriptions=new Map,this.listeners=new Map}subscribeToVerification(e,n,r={}){const s=`${e}-${n}`;if(this.subscriptions.has(s)&&this.unsubscribe(s),console.log(`[RealTime] Subscribing to verification updates for ${e} on raffle ${n}`),!en||typeof en.channel!="function")return console.warn("[RealTime] Supabase not configured, skipping real-time subscription"),()=>{};const o=en.channel(`verification-events-${s}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"verification_events",filter:`user_address=eq.${e.toLowerCase()},raffle_id=eq.${n}`},l=>{console.log("[RealTime] Verification event received:",l),this.handleVerificationEvent(l.new,r)}).subscribe(l=>{console.log(`[RealTime] Events subscription status: ${l}`)}),a=en.channel(`verifications-${s}`).on("postgres_changes",{event:"*",schema:"public",table:"social_media_verifications",filter:`user_address=eq.${e.toLowerCase()},raffle_id=eq.${n}`},l=>{console.log("[RealTime] Verification status changed:",l),this.handleVerificationStatusChange(l,r)}).subscribe(l=>{console.log(`[RealTime] Verifications subscription status: ${l}`)});return this.subscriptions.set(s,{eventsChannel:o,verificationsChannel:a,userAddress:e,raffleId:n}),()=>this.unsubscribe(s)}handleVerificationEvent(e,n){const{event_type:r,task_type:s,metadata:o}=e;switch(r){case"task_completed":n.onTaskCompleted&&n.onTaskCompleted({taskType:s,metadata:o});break;case"all_completed":n.onAllTasksCompleted&&n.onAllTasksCompleted({totalTasks:o.total_tasks,completedAt:o.completed_at});break;case"verification_ready":n.onVerificationReady&&n.onVerificationReady({canPurchase:o.can_purchase,readyAt:o.ready_at});break;default:console.log("[RealTime] Unknown event type:",r)}n.onUpdate&&n.onUpdate(e)}handleVerificationStatusChange(e,n){const{eventType:r,new:s,old:o}=e;r==="UPDATE"&&(o==null?void 0:o.status)!==(s==null?void 0:s.status)&&s.status==="completed"&&n.onTaskCompleted&&n.onTaskCompleted({taskType:s.task_type,platform:s.platform,verificationId:s.id}),n.onStatusChange&&n.onStatusChange({eventType:r,newRecord:s,oldRecord:o})}unsubscribe(e){const n=this.subscriptions.get(e);n&&(console.log(`[RealTime] Unsubscribing from ${e}`),n.eventsChannel.unsubscribe(),n.verificationsChannel.unsubscribe(),this.subscriptions.delete(e))}unsubscribeAll(){console.log("[RealTime] Unsubscribing from all verification updates"),this.subscriptions.forEach((e,n)=>{this.unsubscribe(n)}),this.subscriptions.clear(),this.listeners.clear()}async getVerificationProgress(e,n){try{const{data:r,error:s}=await en.rpc("get_verification_progress",{p_user_address:e.toLowerCase(),p_raffle_id:n});if(s)throw s;return{success:!0,data:(r==null?void 0:r[0])||{total_tasks:0,completed_tasks:0,pending_tasks:0,progress_percentage:0,all_completed:!1,tasks:[]}}}catch(r){return console.error("[RealTime] Error fetching verification progress:",r),{success:!1,error:r.message}}}async areAllTasksCompleted(e,n){const r=await this.getVerificationProgress(e,n);return r.success&&r.data.all_completed}async getRecentEvents(e,n,r=10){try{const{data:s,error:o}=await en.from("verification_events").select("*").eq("user_address",e.toLowerCase()).eq("raffle_id",n).order("created_at",{ascending:!1}).limit(r);if(o)throw o;return{success:!0,events:s||[]}}catch(s){return console.error("[RealTime] Error fetching recent events:",s),{success:!1,error:s.message,events:[]}}}}const ixe=new sxe;class oxe{constructor(){this.cache=new Map,this.cacheTimeout=300*1e3}async getSocialTasksFromEvents(e,n,r){try{const s=this.cache.get(e);if(s&&Date.now()-s.timestamp<this.cacheTimeout)return s.tasks;const o=new Mt(r,tn.socialEngagementManager,n),a=await n.getBlockNumber(),l=Math.max(0,a-1e4);console.log(`Searching SocialTasksEnabled events for pool ${e} in blocks ${l} to ${a}`);const c=o.filters.SocialTasksEnabled(e),u=await o.queryFilter(c,l,a);if(console.log(`Found ${(u==null?void 0:u.length)||0} SocialTasksEnabled events`),u.length===0)return console.log("No SocialTasksEnabled events found in last 10000 blocks"),[];const p=u[u.length-1].args.taskDescription;console.log("Task description from event:",p);const m=this.parseTaskDescription(p);return this.cache.set(e,{tasks:m,timestamp:Date.now()}),m}catch(s){return console.error("Failed to fetch tasks from events:",s),[]}}parseTaskDescription(e){if(!e)return[];const n=[],r=["|",",",";",`
`];let s=[e];for(const o of r)if(e.includes(o)){s=e.split(o);break}return s.forEach((o,a)=>{if(o=o.trim(),!o)return;const l=this.detectPlatform(o),c=this.detectAction(o);n.push({id:`task-${a}`,platform:l,type:c,description:o,required:!0})}),n}detectPlatform(e){const n=e.toLowerCase();return n.includes("twitter")||n.includes("x.com")||n.includes("tweet")?"twitter":n.includes("discord")?"discord":n.includes("telegram")?"telegram":"unknown"}detectAction(e){const n=e.toLowerCase();return n.includes("follow")?"follow":n.includes("like")||n.includes("retweet")?"engage":n.includes("join")||n.includes("subscribe")?"join":"custom"}clearCache(e){this.cache.delete(e)}clearAllCache(){this.cache.clear()}}const axe=new oxe,SM={twitter:wd,discord:ld,telegram:ig,instagram:kQ,youtube:AQ,facebook:bQ,linkedin:TQ,website:sg,default:sg},EM={follow:LR,like:tD,retweet:SQ,comment:jQ,mention:pQ,join:LR,share:Ur,default:Ur},lxe=t=>{if(!t)return[];try{const e=JSON.parse(t);console.log("Parsed JSON tasks:",e);const n=Array.isArray(e)?e.map(uxe):[];return console.log("Enhanced JSON tasks:",n),n}catch{console.log("Parsing text-based tasks from:",t);const e=cxe(t);return console.log("Parsed text tasks:",e),e}},cxe=t=>{const e=[],n=[{pattern:/twitter[:\s]+follow(?:\s+account)?[:\s\-]+@?([a-zA-Z0-9_]+)/gi,platform:"twitter",action:"follow",extractTarget:s=>s[1]},{pattern:/twitter[:\s]+like[:\s\-]+(https?:\/\/(?:twitter\.com|x\.com)\/[^\s]+)/gi,platform:"twitter",action:"like",extractTarget:s=>s[1]},{pattern:/twitter[:\s]+retweet[:\s\-]+(https?:\/\/(?:twitter\.com|x\.com)\/[^\s]+)/gi,platform:"twitter",action:"retweet",extractTarget:s=>s[1]},{pattern:/twitter[:\s]+comment(?:\s+on\s+tweet)?[:\s\-]+(https?:\/\/(?:twitter\.com|x\.com)\/[^\s]+)/gi,platform:"twitter",action:"comment",extractTarget:s=>s[1]},{pattern:/discord[:\s]+join[:\s]+(https?:\/\/discord\.gg\/[^\s]+)/gi,platform:"discord",action:"join",extractTarget:s=>s[1]},{pattern:/telegram[:\s]+join[:\s]+(https?:\/\/t\.me\/[^\s]+)/gi,platform:"telegram",action:"join",extractTarget:s=>s[1]},{pattern:/telegram[:\s]+join[:\s]+@?([a-zA-Z0-9_]+)/gi,platform:"telegram",action:"join",extractTarget:s=>s[1]}];let r=1;return n.forEach(({pattern:s,platform:o,action:a,extractTarget:l})=>{let c;for(;(c=s.exec(t))!==null;){const u=l(c);e.push({id:`${o}_${a}_${r++}`,platform:o,action:a,target:u,title:`${o.charAt(0).toUpperCase()+o.slice(1)} ${a.charAt(0).toUpperCase()+a.slice(1)}`,description:`${a.charAt(0).toUpperCase()+a.slice(1)} ${u}`,actionData:_8(o,a,u)})}}),e.length===0&&e.push({id:"generic_task",platform:"default",action:"complete",target:"",title:"Social Media Engagement",description:t,actionData:null}),e},uxe=t=>{console.log("Enhancing task with action data:",t);const e=_8(t.platform,t.action||t.type,t.target||t.data);console.log("Generated action data:",e);const n={...t,actionData:e};return console.log("Enhanced task:",n),n},_8=(t,e,n)=>{switch(t==null?void 0:t.toLowerCase()){case"twitter":return dxe(e,n);case"discord":return fxe(e,n);case"telegram":return hxe(e,n);default:return null}},dxe=(t,e)=>{switch(t==null?void 0:t.toLowerCase()){case"follow":return{type:"follow",url:`https://twitter.com/${e.replace("@","")}`,buttonText:"Follow on Twitter",icon:"follow"};case"like":case"twitter_like":const n=aT(e);return{type:"like",url:e.startsWith("http")?e:`https://twitter.com/i/status/${n}`,buttonText:"Like Tweet",icon:"like"};case"retweet":case"twitter_retweet":const r=aT(e);return{type:"retweet",url:e.startsWith("http")?e:`https://twitter.com/i/status/${r}`,buttonText:"Retweet",icon:"retweet"};case"comment":case"twitter_comment":const s=aT(e);return{type:"comment",url:e.startsWith("http")?e:`https://twitter.com/i/status/${s}`,buttonText:"Comment on Tweet",icon:"comment"};case"mention":case"twitter_mention":return{type:"mention",url:`https://twitter.com/compose/tweet?text=${encodeURIComponent(`@${e.replace("@","")} `)}`,buttonText:"Create Mention Tweet",icon:"mention"};default:return{type:"generic",url:`https://twitter.com/${e.replace("@","")}`,buttonText:"Open on Twitter",icon:"default"}}},fxe=(t,e)=>{switch(t==null?void 0:t.toLowerCase()){case"join":case"discord_join":return{type:"join",url:e.startsWith("http")?e:`https://discord.gg/${e}`,buttonText:"Join Discord Server",icon:"join"};default:return{type:"generic",url:e.startsWith("http")?e:`https://discord.gg/${e}`,buttonText:"Open Discord",icon:"default"}}},hxe=(t,e)=>{switch(t==null?void 0:t.toLowerCase()){case"join":case"telegram_join":return{type:"join",url:e.startsWith("http")?e:`https://t.me/${e.replace("@","")}`,buttonText:"Join Telegram",icon:"join"};default:return{type:"generic",url:e.startsWith("http")?e:`https://t.me/${e.replace("@","")}`,buttonText:"Open Telegram",icon:"default"}}},aT=t=>{if(typeof t!="string")return"";const e=t.match(/status\/(\d+)/);return e?e[1]:t},pxe=({task:t,onComplete:e,onAuthenticate:n,isCompleted:r,isVerifying:s,isAuthenticated:o,userAddress:a,raffleId:l,taskStatus:c,onRetry:u,authenticatedAccounts:f})=>{var U,K,Y;const[p,m]=k.useState(!1),[g,w]=k.useState(!1),y=SM[(U=t.platform)==null?void 0:U.toLowerCase()]||SM.default,T=EM[(K=t.actionData)==null?void 0:K.icon]||EM.default,j=(c==null?void 0:c.status)==="verifying",_=(c==null?void 0:c.status)==="failed",v=async()=>{var G;if(!a){re.error("Please connect your wallet first");return}m(!0);try{let X;switch((G=t.platform)==null?void 0:G.toLowerCase()){case"twitter":X=await io.initiateTwitterAuth(a);break;case"discord":X=await io.initiateDiscordAuth(a);break;case"telegram":X=await io.initiateTelegramAuth(a);break;default:throw new Error(`Unsupported platform: ${t.platform}`)}if(X.success){if(X.authUrl){console.log("Opening OAuth popup for platform:",t.platform);const V=window.open(X.authUrl,"_blank","width=600,height=600");re.success("Authentication window opened. Please complete the OAuth process.");const A=setInterval(()=>{console.log("Checking if popup is closed...",V==null?void 0:V.closed),V&&V.closed&&(console.log("Popup closed, refreshing authentication status for:",t.platform),clearInterval(A),n(t.platform))},1e3);setTimeout(()=>{console.log("Fallback timeout reached, forcing popup close and refresh"),clearInterval(A),V&&!V.closed&&(V.close(),n(t.platform))},3e5)}}else re.error(X.error||"Authentication failed")}catch(X){console.error("Authentication error:",X),re.error("Failed to initiate authentication")}finally{m(!1)}},P=()=>{var G;(G=t.actionData)!=null&&G.url&&(window.open(t.actionData.url,"_blank","noreferrer"),re.success("Task page opened in new tab. Complete the action and return to verify."))},D=async()=>{if(!a||!t.platform){re.error("Missing required information");return}w(!0);try{const G=await io.disconnectAccount(a,t.platform.toLowerCase());G.success?(re.success(`${t.platform.charAt(0).toUpperCase()+t.platform.slice(1)} account disconnected successfully!`),n&&n(t.platform.toLowerCase())):re.error(G.error||"Failed to disconnect account")}catch(G){console.error("Disconnect error:",G),re.error("Failed to disconnect account")}finally{w(!1)}},$=async()=>{var G;if(!a||!l){re.error("Missing required information");return}console.log("Task data for verification:",{task:t,taskType:t.type,taskAction:t.action,taskData:t.data,taskTarget:t.target});try{let X;switch((G=t.platform)==null?void 0:G.toLowerCase()){case"twitter":let V=t.type||t.action||"follow";V==="following"?V="follow":V==="liking"?V="like":V==="retweeting"&&(V="retweet");const A=t.data||{target:t.target};console.log("Calling verification with:",{userAddress:a,raffleId:l,taskType:V,taskData:A}),X=await zc.verifyTwitterTask(a,l,V,A);break;case"discord":const x=t.type||t.action||"follow",C=t.data||{target:t.target};X=await zc.verifyDiscordTask(a,l,x,C);break;case"telegram":const L=t.type||t.action||"follow",z=t.data||{target:t.target};X=await zc.verifyTelegramTask(a,l,L,z);break;default:throw new Error(`Unsupported platform: ${t.platform}`)}X.success?(re.success("Task verified successfully!"),e(t.id,X.data)):re.error(X.error||"Verification failed")}catch(X){console.error("Verification error:",X),re.error("Failed to verify task")}};return i.jsxs("div",{className:"border border-border rounded-lg p-3 bg-card",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(y,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:"font-medium text-sm",children:t.title}),t.platform&&i.jsx(ll,{variant:"outline",className:"text-xs",children:t.platform.charAt(0).toUpperCase()+t.platform.slice(1)})]}),i.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.description}),t.platform&&["twitter","discord","telegram"].includes(t.platform.toLowerCase())&&i.jsx("div",{className:"flex items-center gap-1 mt-1",children:o?i.jsxs(i.Fragment,{children:[i.jsx(xs,{className:"h-3 w-3 text-green-600"}),i.jsx("span",{className:"text-xs text-foreground",children:((Y=f[t.platform.toLowerCase()])==null?void 0:Y.platform_username)==="pending"?"Connecting...":"Authenticated"})]}):i.jsxs(i.Fragment,{children:[i.jsx(rD,{className:"h-3 w-3 text-orange-600"}),i.jsx("span",{className:"text-xs text-foreground",children:"Auth Required"})]})})]}),i.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:!r&&i.jsxs(i.Fragment,{children:[(()=>{const G=t.platform&&["twitter","discord","telegram"].includes(t.platform.toLowerCase())&&!o;return console.log("Connect button display check:",{taskPlatform:t.platform,platformIncluded:t.platform&&["twitter","discord","telegram"].includes(t.platform.toLowerCase()),isAuthenticated:o,shouldShow:G}),G})()&&i.jsx(we,{onClick:v,disabled:p,size:"sm",variant:"outline",className:"text-xs whitespace-nowrap",children:p?"Connecting...":"Connect"}),o&&t.actionData&&i.jsxs(we,{variant:"outline",size:"sm",onClick:P,className:"text-xs whitespace-nowrap",children:[i.jsx(T,{className:"h-3 w-3 mr-1"}),t.actionData.buttonText.replace("on Twitter","").replace("on Discord","").replace("on Telegram","").trim()]}),o&&t.platform&&["twitter","discord","telegram"].includes(t.platform.toLowerCase())&&i.jsx(we,{onClick:D,disabled:g,size:"sm",variant:"outline",className:"text-xs whitespace-nowrap text-red-600 hover:text-red-700 hover:border-red-300",children:g?"Disconnecting...":"Disconnect"}),o&&!r&&t.platform&&["twitter","discord","telegram"].includes(t.platform.toLowerCase())&&i.jsx(we,{onClick:$,disabled:s,size:"sm",variant:"default",className:"text-xs whitespace-nowrap bg-green-600 hover:bg-green-700",children:s?"Verifying...":"Verify Task"}),o&&t.actionUrl&&!t.actionData&&i.jsxs(we,{variant:"outline",size:"sm",onClick:()=>window.open(t.actionUrl,"_blank"),className:"text-xs whitespace-nowrap",children:[i.jsx(Ur,{className:"h-3 w-3 mr-1"}),"Complete"]})]})}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[_&&i.jsx(we,{onClick:()=>u(t.id),size:"sm",variant:"ghost",className:"text-xs h-6 px-2",title:"Retry verification",children:i.jsx(ul,{className:"h-3 w-3"})}),i.jsx(ll,{variant:r?"default":_?"destructive":"secondary",className:"text-xs",children:r?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(hn,{className:"h-3 w-3"}),"Done"]}):_?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(_Q,{className:"h-3 w-3"}),"Failed"]}):j?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(NQ,{className:"h-3 w-3 animate-spin"}),"Verifying"]}):i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(yr,{className:"h-3 w-3"}),"Pending"]})})]})]}),_&&(c==null?void 0:c.error)&&i.jsxs("div",{className:"mt-2 flex items-start gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-xs",children:[i.jsx(Kt,{className:"h-3 w-3 text-red-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm text-foreground",children:c.error}),i.jsx("button",{onClick:()=>u(t.id),className:"text-red-600 dark:text-red-400 underline hover:no-underline mt-1",children:"Click to retry"})]})]})]})},_M=({raffle:t,userAddress:e,socialEngagementRequired:n,hasCompletedSocialEngagement:r,onVerificationComplete:s})=>{const{connected:o,provider:a}=an(),{contracts:l,executeTransaction:c}=xn(),[u,f]=k.useState([]),[p,m]=k.useState(new Set),[g,w]=k.useState(!1),[y,T]=k.useState(!1),[j,_]=k.useState({}),[v,P]=k.useState([]),[D,$]=k.useState(!1),[U,K]=k.useState(!1),[Y,G]=k.useState({}),[X,V]=k.useState(new Set);k.useEffect(()=>{t!=null&&t.address&&a&&(l!=null&&l.socialEngagementManager)&&A()},[t==null?void 0:t.address,a,l==null?void 0:l.socialEngagementManager]),k.useEffect(()=>{if(u.length===0&&!D&&(t!=null&&t.socialTaskDescription)){console.log("Using fallback: parsing tasks from raffle data");const N=lxe(t.socialTaskDescription);f(N)}},[u.length,D,t==null?void 0:t.socialTaskDescription]);const A=async()=>{try{if($(!0),!(t!=null&&t.socialEngagementRequired)){f([]);return}const N=await axe.getSocialTasksFromEvents(t.address,a,l.socialEngagementManager.address);f(N)}catch(N){console.error("Failed to load tasks from events:",N),f([])}finally{$(!1)}};k.useEffect(()=>{o&&e&&x()},[o,e,t==null?void 0:t.address]),k.useEffect(()=>{o&&e&&(l!=null&&l.socialEngagementManager)&&(l!=null&&l.getContractInstance)&&C()},[o,e,l==null?void 0:l.socialEngagementManager,l==null?void 0:l.getContractInstance,t==null?void 0:t.address,v]),k.useEffect(()=>{if(!e||!(t!=null&&t.address))return;const N=ixe.subscribeToVerification(e,t.address,{onTaskCompleted:F=>{re.success(`Task completed: ${F.taskType}`),G(E=>({...E,[F.taskId]:{status:"completed",timestamp:Date.now()}})),x()},onAllTasksCompleted:F=>{re.success(" All tasks completed! You can now purchase slots."),x(),s&&s()},onVerificationReady:()=>{re.success(" Verification complete! Purchase slots button is now active.")},onTaskFailed:F=>{G(E=>({...E,[F.taskId]:{status:"failed",error:F.error,timestamp:Date.now()}})),re.error(`Task verification failed: ${F.error}`)}});return()=>{N()}},[e,t==null?void 0:t.address,s]);const x=async()=>{if(e){$(!0);try{const N=await io.getAuthenticatedAccounts(e);if(console.log("Accounts result from service:",N),N&&!N.error&&Array.isArray(N.accounts)){const F={};N.accounts.forEach(E=>{F[E.platform]=E}),_(F)}else N&&N.error?(console.warn("Failed to load authenticated accounts:",N.error),_({})):(console.warn("Unexpected response format from getAuthenticatedAccounts"),_({}));if(t!=null&&t.address)try{const F=await zc.getVerificationRecords(e,t.address);if(console.log("Verification records result:",F),F&&!F.error&&Array.isArray(F.records)){P(F.records);const E=new Set;F.records.forEach(M=>{if(M.status==="completed"){const ee=u.find(O=>O.platform===M.platform&&O.type===M.task_type);ee&&E.add(ee.id)}}),m(E)}else console.warn("No verification records found or invalid format"),P([])}catch(F){console.error("Error loading verification records:",F),P([]),F.message&&F.message.includes("fetch")&&re.error("Unable to connect to verification service. Please check your connection.")}}catch(N){console.error("Error loading user data:",N),_({}),P([]),N.message&&N.message.includes("fetch")?re.error("Unable to connect to backend services. Please check your internet connection."):N.message&&N.message.includes("Supabase")?re.error("Backend service temporarily unavailable. Please try again later."):re.error("Failed to load verification data. Please refresh the page.")}finally{$(!1)}}},C=async()=>{var N;try{if(!(t!=null&&t.address)||!e)return;let F=!1;try{const M=(N=l==null?void 0:l.getContractInstance)==null?void 0:N.call(l,t.address,"pool");M&&typeof M.hasCompletedSocialEngagement=="function"?F=await M.hasCompletedSocialEngagement(e):console.warn("Pool contract not available or hasCompletedSocialEngagement method not found",{hasContracts:!!l,hasGetContractInstance:!!(l!=null&&l.getContractInstance),hasPoolContract:!!M,poolAddress:t==null?void 0:t.address,hasMethod:M?typeof M.hasCompletedSocialEngagement=="function":!1})}catch(M){console.error("Error checking blockchain completion status:",M)}let E={success:!1};try{E=await zc.checkAllTasksVerified(e,t.address)}catch(M){console.error("Error checking Supabase verification status:",M),M.message&&M.message.includes("fetch")&&console.warn("Unable to connect to verification service")}(F||E.success)&&m(new Set(u.map(M=>M.id)))}catch(F){console.error("Error checking completion status:",F)}},L=async N=>{console.log("Starting authentication status refresh for platform:",N);try{console.log("Fetching authenticated accounts for user:",e);const F=await io.getAuthenticatedAccounts(e);if(console.log("Received accounts result:",F),F&&!F.error&&Array.isArray(F.accounts)){const E={};F.accounts.forEach(M=>{console.log("Found authenticated account:",M.platform,M),E[M.platform]=M}),console.log("Setting authenticated accounts map:",E),_(E);try{console.log("Checking if platform is authenticated:",N);const M=await io.isAuthenticated(e,N);console.log("Authentication check result:",M),M.success&&M.isAuthenticated?re.success(`${N.charAt(0).toUpperCase()+N.slice(1)} account connected successfully!`):M.error&&console.warn("Authentication check failed:",M.error)}catch(M){console.error("Error checking authentication status:",M)}}else F&&F.error&&(console.warn("Failed to refresh authenticated accounts:",F.error),F.error.includes("fetch")&&re.error("Unable to verify authentication status. Please check your connection."))}catch(F){console.error("Error refreshing authentication status:",F),F.message&&F.message.includes("fetch")&&re.error("Unable to connect to authentication service. Please try again.")}finally{console.log("Authentication status refresh completed for platform:",N)}},z=async N=>{var E;const F=u.find(M=>M.id===N);if(F){G(M=>({...M,[N]:{status:"verifying",timestamp:Date.now()}})),V(M=>new Set([...M,N]));try{let M;switch((E=F.platform)==null?void 0:E.toLowerCase()){case"twitter":M=await zc.verifyTwitterTask(e,t.address,F.type||F.action,F.data||{target:F.target});break;case"discord":M=await zc.verifyDiscordTask(e,t.address,F.type||F.action,F.data||{target:F.target});break;case"telegram":M=await zc.verifyTelegramTask(e,t.address,F.type||F.action,F.data||{target:F.target});break;default:throw new Error(`Unsupported platform: ${F.platform}`)}M.success?(G(ee=>({...ee,[N]:{status:"completed",timestamp:Date.now()}})),re.success("Task verified successfully!"),x()):(G(ee=>({...ee,[N]:{status:"failed",error:M.error,timestamp:Date.now()}})),re.error(M.error||"Verification failed"))}catch(M){console.error("Retry verification error:",M),G(ee=>({...ee,[N]:{status:"failed",error:M.message,timestamp:Date.now()}})),re.error("Failed to retry verification")}finally{V(M=>{const ee=new Set(M);return ee.delete(N),ee})}}},R=async(N,F)=>{if(!o||!e){re.error("Please connect your wallet");return}T(!0);try{if(!u.find(M=>M.id===N))throw new Error("Task not found");if(typeof F=="object"&&F.verified){m(ee=>new Set([...ee,N]));try{await x()}catch(ee){console.warn("Failed to refresh user data after task completion:",ee)}u.every(ee=>p.has(ee.id)||ee.id===N)&&s&&s(),re.success("Task verification completed!");return}}catch(E){console.error("Error completing task:",E),E.message&&E.message.includes("fetch")?re.error("Unable to connect to verification service. Please check your connection and try again."):E.message&&E.message.includes("Task not found")?re.error("Task not found. Please refresh the page and try again."):re.error("Failed to complete task. Please try again.")}finally{T(!1)}},I=async N=>{try{const F=await io.disconnectAccount(e,N);F.success?(_(E=>{const M={...E};return delete M[N],M}),re.success(`${N.charAt(0).toUpperCase()+N.slice(1)} account disconnected`)):F.error&&F.error.includes("fetch")?re.error("Unable to connect to authentication service. Please check your connection and try again."):re.error(F.error||"Failed to disconnect account")}catch(F){console.error("Error disconnecting account:",F),F.message&&F.message.includes("fetch")?re.error("Connection failed. Please check your internet connection and try again."):re.error("Failed to disconnect account. Please try again.")}};return n?r?i.jsx(ut,{className:"detail-beige-card bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",children:i.jsx(It,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(hn,{className:"h-6 w-6 text-green-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-foreground",children:"Social Media Tasks Completed"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"You have successfully completed all required social media tasks for this raffle."})]})]})})}):i.jsxs(ut,{className:"detail-beige-card bg-card/80 text-foreground backdrop-blur-sm border border-border",children:[i.jsx(Jr,{className:"pb-0",children:i.jsxs(Fs,{className:"flex items-center justify-between cursor-pointer",onClick:()=>K(!U),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kt,{className:"h-5 w-5 text-orange-500"}),"Social Media Tasks Required"]}),U?i.jsx(qg,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(Ii,{className:"h-4 w-4 text-muted-foreground"})]})}),i.jsx(It,{className:U?"pt-3 space-y-4":"pt-1",children:U&&i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-foreground",children:"Complete the following social media tasks to participate in this raffle:"}),Object.keys(j).length>0&&i.jsxs("div",{className:"border border-border rounded-lg p-3",children:[i.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Connected Accounts:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(j).map(([N,F])=>i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-800 rounded-full px-3 py-1 text-xs",children:[i.jsx(xs,{className:"h-3 w-3 text-green-600"}),i.jsx("span",{className:"text-muted-foreground",children:N.charAt(0).toUpperCase()+N.slice(1)}),i.jsxs("span",{className:"text-muted-foreground",children:["@",F.platform_username]}),i.jsx(we,{variant:"ghost",size:"sm",onClick:()=>I(N),className:"h-4 w-4 p-0 text-red-500 hover:text-red-700",children:""})]},N))})]}),D&&i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading verification data..."})]}),i.jsx("div",{className:"space-y-3",children:u.map(N=>i.jsx(pxe,{task:N,onComplete:R,onAuthenticate:L,isCompleted:p.has(N.id),isVerifying:y,isAuthenticated:(()=>{var M;const F=(M=N.platform)==null?void 0:M.toLowerCase(),E=F?!!j[F]:!1;return console.log("Task authentication check:",{taskPlatform:N.platform,normalizedPlatform:F,authenticatedAccounts:Object.keys(j),isAuthenticated:E}),E})(),userAddress:e,raffleId:t==null?void 0:t.address,taskStatus:Y[N.id],onRetry:z,authenticatedAccounts:j},N.id))}),u.length>0&&i.jsxs("div",{className:"pt-4 border-t border-border",children:[u.some(N=>!p.has(N.id))&&i.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Complete all tasks above. Verification happens automatically."}),i.jsxs("div",{className:"mt-3",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Progress: ",p.size," of ",u.length," tasks completed"]})}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2.5 rounded-full transition-all duration-500 ease-out",style:{width:`${p.size/u.length*100}%`}})}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1.5 text-center",children:"Updates automatically when you complete tasks"})]})]})]})})]}):null},mxe=({metadata:t,loading:e})=>e?i.jsxs("div",{className:"bg-card rounded-lg border border-border p-6 animate-pulse",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-1/4 mb-4"}),i.jsx("div",{className:"h-20 bg-muted rounded"})]}):!t||!t.description&&!t.twitterLink&&!t.discordLink&&!t.telegramLink?null:i.jsxs("div",{className:"space-y-3",children:[t.description&&i.jsx("p",{className:"text-foreground/80 whitespace-pre-wrap leading-relaxed text-base",children:t.description}),(t.twitterLink||t.discordLink||t.telegramLink)&&i.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.twitterLink&&i.jsxs("a",{href:t.twitterLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-[#1DA1F2] hover:bg-[#1a8cd8] text-white rounded-lg transition-colors text-sm",children:[i.jsx(wd,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs font-medium",children:Xk(t.twitterLink,"twitter")}),i.jsx(Ur,{className:"h-3 w-3"})]}),t.discordLink&&i.jsxs("a",{href:t.discordLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-[#5865F2] hover:bg-[#4752c4] text-white rounded-lg transition-colors text-sm",children:[i.jsx(ld,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs font-medium",children:Xk(t.discordLink,"discord")}),i.jsx(Ur,{className:"h-3 w-3"})]}),t.telegramLink&&i.jsxs("a",{href:t.telegramLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-[#0088cc] hover:bg-[#0077b3] text-white rounded-lg transition-colors text-sm",children:[i.jsx(ig,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"text-xs font-medium",children:Xk(t.telegramLink,"telegram")}),i.jsx(Ur,{className:"h-3 w-3"})]})]})]}),A8=async(t,e,n=1,r={})=>{try{if(!t||!e)throw new Error("User address and raffle ID are required");if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error("Invalid user address format");const s={user_address:t.toLowerCase(),raffle_id:e,raffle_address:e,slot_count:n,...r},{data:o,error:a}=await en.functions.invoke(E8.GENERATE_SIGNATURE,{body:s});if(a)throw console.error("Signature generation error:",a),new Error(`Failed to generate signature: ${a.message}`);return await bxe({userAddress:s.user_address,raffleId:s.raffle_id,slotCount:s.slot_count,signature:o.signature,deadline:o.deadline,signatureData:JSON.stringify(s),expiresAt:new Date(Date.now()+900*1e3)}),{success:!0,signature:o.signature,deadline:o.deadline,signatureData:s,expiresAt:o.expires_at,metadata:o.metadata||{}}}catch(s){return console.error("Error generating purchase signature:",s),{success:!1,error:s.message}}},gxe=async(t,e)=>{try{const{data:n,error:r}=await en.functions.invoke(E8.VERIFY_SIGNATURE,{body:{signature:t,signatureData:e}});if(r)throw new Error(`Signature verification failed: ${r.message}`);return{success:!0,isValid:n.isValid,metadata:n.metadata||{}}}catch(n){return console.error("Error verifying signature:",n),{success:!1,error:n.message,isValid:!1}}},yxe=async(t,e=10)=>{try{if(!en||!en.from||typeof en.from!="function")return console.warn("Supabase not configured, returning empty signature history"),[];const{data:n,error:r}=await en.from("purchase_signatures").select("*").eq("user_address",t.toLowerCase()).order("created_at",{ascending:!1}).limit(e);if(r)throw new Error(`Failed to fetch signature history: ${r.message}`);return n||[]}catch(n){return console.error("Error fetching signature history:",n),[]}},xxe=async(t,e)=>{try{if(!en||!en.from||typeof en.from!="function")return console.warn("Supabase not configured, returning no existing signature"),null;const{data:n,error:r}=await en.from("purchase_signatures").select("*").eq("user_address",t.toLowerCase()).eq("raffle_id",e).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1}).limit(1);if(r)throw new Error(`Failed to fetch existing signature: ${r.message}`);return n&&n.length>0?n[0]:null}catch(n){return console.error("Error fetching existing signature:",n),null}},bxe=async t=>{try{const{data:e,error:n}=await en.from("purchase_signatures").insert([{user_address:t.userAddress,raffle_id:t.raffleId,slot_count:t.slotCount,signature:t.signature,signature_data:t.signatureData,expires_at:t.expiresAt,created_at:new Date().toISOString()}]).select();if(n)throw new Error(`Failed to store signature: ${n.message}`);return e[0]}catch(e){throw console.error("Error storing signature:",e),e}},vxe=t=>new Date>new Date(t),wxe=async t=>{try{return(await Promise.allSettled(t.map(n=>A8(n.userAddress,n.raffleId,n.slotCount)))).map((n,r)=>({purchase:t[r],success:n.status==="fulfilled",data:n.status==="fulfilled"?n.value:null,error:n.status==="rejected"?n.reason.message:null}))}catch(e){throw console.error("Error in batch signature generation:",e),e}},kxe=async()=>{try{const{data:t,error:e}=await en.from("purchase_signatures").delete().lt("expires_at",new Date().toISOString()).select();if(e)throw new Error(`Failed to cleanup expired signatures: ${e.message}`);return t?t.length:0}catch(t){return console.error("Error cleaning up expired signatures:",t),0}},Txe={generatePurchaseSignature:A8,verifyPurchaseSignature:gxe,getUserSignatureHistory:yxe,getExistingSignature:xxe,isSignatureExpired:vxe,batchGenerateSignatures:wxe,cleanupExpiredSignatures:kxe},AM={ERC721:0,ERC1155:1},Nxe=t=>!t||t.isPrized!==!0||!(t.prizeCollection&&t.prizeCollection!==$e)?!1:t.standard===AM.ERC721||t.standard===AM.ERC1155,I0=["https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/"],lT=I0.map(t=>t.replace("/ipfs/","/ipns/")),cT=["https://arweave.net/"],PM={default:{containerClass:"w-64 h-64",imageClass:"w-64 h-64",maxWidth:"256px"},hero:{containerClass:"w-full max-w-[480px] aspect-square",imageClass:"w-full h-full max-w-[480px]",maxWidth:"480px"},compact:{containerClass:"w-48 h-48",imageClass:"w-48 h-48",maxWidth:"192px"}},jxe=({raffle:t,isMintableERC721:e,isEscrowedPrize:n,variant:r="default",showFrame:s=!0,className:o="",collectionName:a=null})=>{const{getContractInstance:l}=xn(),{getCollabStatus:c}=Bb(),[u,f]=k.useState(null),[p,m]=k.useState(!0),[g,w]=k.useState(null),[y,T]=k.useState(!1),[j,_]=k.useState([]),[v,P]=k.useState(0),D=PM[r]||PM.default,$=E=>{if(!E)return[];if(E.startsWith("ipfs://")){let M=E.replace("ipfs://","");return M.startsWith("ipfs/")&&(M=M.slice(5)),I0.map(ee=>`${ee}${M}`)}if(E.startsWith("ipns://")){let M=E.replace("ipns://","");return M.startsWith("ipns/")&&(M=M.slice(5)),lT.map(ee=>`${ee}${M}`)}if(E.startsWith("ar://")){const M=E.replace("ar://","");return cT.map(ee=>`${ee}${M}`)}try{const M=new URL(E),O=M.pathname.replace(/\/ipfs\/ipfs\//,"/ipfs/").split("/").filter(Boolean),q=O.indexOf("ipfs");if(q!==-1&&O[q+1]){const J=O.slice(q+1).join("/");return I0.map(Q=>`${Q}${J}`)}const H=O.indexOf("ipns");if(H!==-1&&O[H+1]){const J=O.slice(H+1).join("/");return lT.map(Q=>`${Q}${J}`)}if(M.hostname.endsWith("arweave.net")||M.hostname==="arweave.net"){const J=O.join("/");return cT.map(Q=>`${Q}${J}`)}}catch{}return[E]},U=E=>{const M=["image","image_url","imageUrl","animation_url","animationUrl","media","artwork"],ee=O=>{if(!O)return null;if(O.startsWith("ipfs://")){let q=O.slice(7);return q.startsWith("ipfs/")&&(q=q.slice(5)),I0.map(H=>`${H}${q}`)}if(O.startsWith("ipns://")){let q=O.slice(7);return q.startsWith("ipns/")&&(q=q.slice(5)),lT.map(H=>`${H}${q}`)}if(O.startsWith("ar://")){const q=O.slice(5);return cT.map(H=>`${H}${q}`)}return[O]};for(const O of M)if(E[O]){const q=E[O];return ee(String(q))}return null},K=()=>{Array.isArray(j)&&v+1<j.length?(P(v+1),f(j[v+1])):f(null)},Y=async(E,M=1e4)=>{const ee=new AbortController,O=setTimeout(()=>ee.abort(),M);try{const q=await fetch(E,{signal:ee.signal,headers:{Accept:"application/json, text/plain, */*"}});return clearTimeout(O),q}catch(q){throw clearTimeout(O),q}},G=async(E,M=1e4)=>{for(const ee of E)try{if(ee.startsWith("data:")){const[q,H]=ee.split(",",2),[,J,Q]=q.match(/^data:([^;]+);([^,]+)$/)||[];if(J!=null&&J.includes("application/json")&&Q==="base64"){const ne=JSON.parse(atob(H)),se=U(ne)||null;if(se)return{metadata:ne,imageUrl:se,sourceUri:ee}}else if(J!=null&&J.startsWith("image/")||J!=null&&J.startsWith("video/"))return{metadata:{image:ee},imageUrl:ee,sourceUri:ee};continue}const O=await Y(ee,M);if(O.ok){const q=O.headers.get("content-type");try{const H=await O.text(),J=JSON.parse(H);if(J&&typeof J=="object"){const Q=U(J);if(Q)return{metadata:J,imageUrl:Q,sourceUri:ee}}}catch{if(q!=null&&q.startsWith("image/")||q!=null&&q.startsWith("video/")||ee.match(/\.(jpg|jpeg|png|gif|svg|webp|mp4|webm|ogg)$/i))return{metadata:{image:ee},imageUrl:ee,sourceUri:ee}}}}catch{continue}throw new Error("All metadata fetch attempts failed")};if(k.useEffect(()=>{async function E(){if(t.isPrized||t.prizeCollection&&t.prizeCollection!==$e||t.standard!==void 0&&t.prizeTokenId!==void 0){m(!0),f(null),w(null);try{let O=null;const q=t.standard===0?"erc721Prize":"erc1155Prize",H=l(t.prizeCollection,q),J=!n;if(!H){f(null),m(!1);return}if(t.standard===0)if(J){try{O=await H.unrevealedBaseURI()}catch{}if(!O||O.trim()===""||Er(O)){let le=null;try{typeof H.unrevealedURIHash=="function"&&(le=await H.unrevealedURIHash())}catch{}if(le&&!Od(le)){const me=await gd(le,{collectionAddress:t.prizeCollection,uriType:"unrevealedURI"});me&&(O=me)}}if(!O||O.trim()===""||Er(O)){const le=Rh(t.prizeCollection);le!=null&&le.unrevealedURI&&(O=le.unrevealedURI)}if(!O||O.trim()===""||Er(O)){T(!0),f(null),m(!1);return}}else try{O=await H.tokenURI(t.prizeTokenId)}catch{f(null),m(!1);return}else if(t.standard===1)if(J){let le=null,me=null,Ee=null;try{le=await H.unrevealedURI()}catch{}try{me=await H.tokenURI(t.prizeTokenId)}catch{}try{Ee=await H.isRevealed()}catch{Ee=null}if(le&&Er(le)){const te=await gd(le,{collectionAddress:t.prizeCollection,uriType:"unrevealedURI"});te?le=te:le=null}if(!le||le.trim()===""){let te=null;try{typeof H.unrevealedURIHash=="function"&&(te=await H.unrevealedURIHash())}catch{}if(te&&!Od(te)){const Ne=await gd(te,{collectionAddress:t.prizeCollection,uriType:"unrevealedURI"});Ne&&(le=Ne)}}if(!le||le.trim()===""){const te=Rh(t.prizeCollection);te!=null&&te.unrevealedURI&&(le=te.unrevealedURI)}if(Ee===!1)if(le&&le.trim()!==""&&!Er(le))O=le;else if(me&&me.trim()!==""&&!Er(me))O=me;else try{O=await H.uri(t==null?void 0:t.prizeTokenId)}catch{f(null),m(!1);return}else if(Ee===!0)if(me&&me.trim()!==""&&!Er(me))O=me;else try{O=await H.uri(t.prizeTokenId)}catch{if(le&&le.trim()!==""&&!Er(le))O=le;else{f(null),m(!1);return}}else if(me&&me.trim()!==""&&!Er(me))O=me;else if(le&&le.trim()!==""&&!Er(le))O=le;else try{O=await H.uri(t.prizeTokenId)}catch{f(null),m(!1);return}}else try{O=await H.uri(t.prizeTokenId)}catch{f(null),m(!1);return}else{f(null),m(!1);return}if(!O||O.trim()===""){f(null),m(!1);return}const Q=aB(O,t.prizeTokenId,t.standard),ne=[];for(const le of Q)ne.push(...$(le));const se=t.standard===0&&!n?5e3:1e4,ie=await G(ne,se),pe=Array.isArray(ie.imageUrl)?ie.imageUrl:[ie.imageUrl];_(pe),P(0),f(pe[0]),w(ie.sourceUri)}catch{f(null),w(null)}m(!1)}}(t==null?void 0:t.isPrized)===!0&&(t==null?void 0:t.prizeCollection)&&t.prizeCollection!==$e&&((t==null?void 0:t.standard)===0||(t==null?void 0:t.standard)===1)&&E()},[t,l,n]),!((t==null?void 0:t.isPrized)===!0&&(t==null?void 0:t.prizeCollection)&&t.prizeCollection!==$e&&((t==null?void 0:t.standard)===0||(t==null?void 0:t.standard)===1)))return null;const V=r==="hero",A=V?`nft-artwork-showcase ${o}`:`detail-beige-card h-full flex flex-col items-center justify-center text-foreground border border-border rounded-xl ${o}`;if(p)return i.jsx(ut,{className:A,children:i.jsx(It,{className:"flex flex-col items-center justify-center p-6",children:i.jsx("div",{className:`${D.containerClass} flex items-center justify-center border rounded-lg bg-muted/30`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading prize media..."})]})})})});if(!u)return V?i.jsxs("div",{className:`${D.containerClass} flex flex-col items-center justify-center border-2 border-dashed border-border/50 rounded-xl bg-muted/20 ${o}`,children:[i.jsx(nD,{className:"h-12 w-12 text-muted-foreground/50 mb-3"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Artwork unavailable"})]}):null;const x=typeof u=="string"&&/\.(mp4|webm|ogg)$/i.test(u),L=!n&&(t==null?void 0:t.prizeCollection)&&t.prizeCollection!==$e,z=c(t==null?void 0:t.address),R=L&&(z==="nft_collab"||z===void 0&&(t==null?void 0:t.isCollabPool)===!0||(t==null?void 0:t.isCollabPool)===!0),I=n&&(a||(t==null?void 0:t.prizeTokenId)!==void 0),N=L&&r==="hero",F=E=>E==null?"":`#${E.toString?E.toString():String(E)}`;if(V){const E=x?i.jsx("video",{src:u,className:`${D.imageClass} object-contain rounded-xl`,style:{background:"#000"},controls:!0,playsInline:!0,onError:K}):i.jsx("img",{src:u,alt:"NFT Prize Artwork",className:`${D.imageClass} object-contain rounded-xl`,style:{background:"transparent"},onError:K});return!I&&!N?i.jsx("div",{className:o,children:E}):i.jsxs("div",{className:`relative ${o}`,children:[E,I&&i.jsx("div",{className:"absolute top-3 right-3",children:i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs sm:text-sm font-medium whitespace-nowrap bg-amber-100 text-amber-800",children:[a||"NFT",(t==null?void 0:t.prizeTokenId)!==void 0?` ${F(t.prizeTokenId)}`:""]})}),N&&i.jsxs("div",{className:"absolute bottom-3 right-3 flex flex-row items-center gap-2",children:[i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs sm:text-sm font-medium whitespace-nowrap bg-purple-100 text-purple-800",children:a||"NFT"}),R&&i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs sm:text-sm font-medium whitespace-nowrap bg-blue-100 text-blue-800",children:"Collab Drop"})]})]})}return i.jsx(ut,{className:A,children:i.jsx(It,{className:"flex flex-col items-center justify-center p-6",children:x?i.jsx("video",{src:u,className:`${D.imageClass} object-contain rounded-lg border`,style:{background:"#000"},controls:!0,playsInline:!0,onError:K}):i.jsx("img",{src:u,alt:"Prize Art",className:`${D.imageClass} object-contain rounded-lg border`,style:{background:"#fff"},onError:K})})})};function RM(t){const e=Math.floor(t/86400),n=Math.floor(t%86400/3600),r=Math.floor(t%3600/60);let s="";return e>0&&(s+=`${e}d `),(n>0||e>0)&&(s+=`${n}h `),(r>0||n>0||e>0)&&(s+=`${r}m`),s||(s="0m"),s.trim()}function IM({token:t,amount:e}){const[n,r]=Ae.useState("TOKEN");return Ae.useEffect(()=>{let s=!0;async function o(){try{if(window.__erc20SymbolCache||(window.__erc20SymbolCache={}),window.__erc20SymbolCache[t]){r(window.__erc20SymbolCache[t]);return}const a=window.ethereum?new zl(window.ethereum):Ju(),l=["function symbol() view returns (string)"],u=await new Mt(t,l,a).symbol();s&&(r(u),window.__erc20SymbolCache[t]=u)}catch{s&&r("TOKEN")}}return o(),()=>{s=!1}},[t]),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-foreground/80 dark:text-foreground",children:"Prize Amount:"}),i.jsxs("span",{children:[Is(e,18)," ",n]})]})}function Rf(t,e,n=!1){let r=1;typeof e=="number"?r=e:window.ethereum&&window.ethereum.chainId&&(r=parseInt(window.ethereum.chainId,16));const s={1:"https://etherscan.io",5:"https://goerli.etherscan.io",11155111:"https://sepolia.etherscan.io",137:"https://polygonscan.com",80001:"https://mumbai.polygonscan.com",10:"https://optimistic.etherscan.io",420:"https://goerli-optimism.etherscan.io",42161:"https://arbiscan.io",56:"https://bscscan.com",97:"https://testnet.bscscan.com",43114:"https://snowtrace.io",43113:"https://testnet.snowtrace.io",8453:"https://basescan.org",84531:"https://goerli.basescan.org",84532:"https://sepolia.basescan.org",11155420:"https://sepolia-optimism.etherscan.io"};return`${s[r]||s[1]}/${n?"tx":"address"}/${t}`}const MM=({raffle:t,isEscrowedPrize:e,raffleCollectionName:n,gatingTokenName:r,isMobile:s=!1,variant:o="default",className:a=""})=>{const{formatPrizeAmount:l}=er();if(!t)return null;const c=o==="compact"||o==="sidebar",u=o==="tab",f=u?`raffle-details-tab-content h-full ${a}`:c?`bg-card/80 backdrop-blur-sm border border-border rounded-xl p-4 ${a}`:`detail-beige-card bg-card/80 text-foreground backdrop-blur-sm border border-border rounded-xl p-6 shadow-lg h-full ${a}`;return u?i.jsx("div",{className:f,children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm p-6",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Creator:"}),i.jsxs("p",{className:"font-mono font-medium truncate",title:t.creator,children:[t.creator.slice(0,6),"...",t.creator.slice(-4)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Pool Contract:"}),i.jsxs("a",{href:Rf(t.address,t.chainId),target:"_blank",rel:"noopener noreferrer",className:"font-mono font-medium text-blue-600 hover:text-blue-800 truncate block",title:t.address,children:[t.address.slice(0,6),"...",t.address.slice(-4)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Start Time:"}),i.jsx("p",{className:"font-medium",children:new Date(t.startTime*1e3).toLocaleString()})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:["Duration:",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx("span",{className:"inline-flex items-center cursor-help",children:i.jsx(lt,{className:"h-3.5 w-3.5 opacity-70"})})}),i.jsx(Nt,{side:"top",align:"center",children:"Shows the default duration until the raffle ends, then shows the actual duration taken."})]})]}),i.jsx("p",{className:"font-medium",children:(()=>{const p=[2,3,4,5,6,7,8].includes(t.stateNum),m=(t==null?void 0:t.actualDuration)&&(t.actualDuration.toNumber?t.actualDuration.toNumber():Number(t.actualDuration)),g=t==null?void 0:t.duration,w=p&&m&&m>0?m>g?g:m:g;return RM(w)})()})]}),t.holderTokenAddress&&t.holderTokenAddress!==$e&&t.holderTokenStandard!==void 0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Gating Requirement:"}),i.jsxs("p",{className:"font-medium flex items-center gap-2",children:[i.jsx("span",{children:(()=>{let p=1;try{const g=t.minHolderTokenBalance;g&&(g.toString?g.toString().length>10?p=parseFloat(Is(g,18)):p=g.toNumber?g.toNumber():Number(g):p=Number(g))}catch{p=1}let m="";return t.holderTokenStandard===1?m=`${t.holderTokenAddress.slice(0,6)}...${t.holderTokenAddress.slice(-4)}`:m=r||`${t.holderTokenAddress.slice(0,6)}...${t.holderTokenAddress.slice(-4)}`,`${p} ${m}`})()}),i.jsx("a",{href:Rf(t.holderTokenAddress,t.chainId),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",title:t.holderTokenAddress,children:i.jsx(lt,{className:"h-3.5 w-3.5 opacity-70"})})]})]}),t.nativePrizeAmount&&t.nativePrizeAmount.gt&&t.nativePrizeAmount.gt(0)&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Prize Amount:"}),i.jsx("p",{className:"font-medium",children:l(t.nativePrizeAmount)})]}),t.erc20PrizeToken&&t.erc20PrizeToken!==$e&&t.erc20PrizeAmount&&t.erc20PrizeAmount.gt&&t.erc20PrizeAmount.gt(0)&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Prize Amount:"}),i.jsx("div",{className:"font-medium",children:i.jsx(IM,{token:t.erc20PrizeToken,amount:t.erc20PrizeAmount})})]}),t.prizeCollection&&t.prizeCollection!==$e&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Prize Collection:"}),i.jsx("a",{href:Rf(t.prizeCollection,t.chainId),target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 underline hover:text-blue-800 truncate block",title:t.prizeCollection,children:n||`${t.prizeCollection.slice(0,8)}...${t.prizeCollection.slice(-6)}`})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:e?"Prize Type:":"Collection Type:"}),i.jsx("p",{className:"font-medium",children:(()=>{if(typeof e=="boolean"&&typeof t.standard<"u"){if(!e&&t.standard===0)return"Mintable ERC721";if(!e&&t.standard===1)return"Mintable ERC1155";if(e&&t.standard===0)return"Escrowed ERC721";if(e&&t.standard===1)return"Escrowed ERC1155"}return"Unknown"})()})]}),e&&t.prizeTokenId!==void 0&&t.prizeTokenId!==null&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Prize Token ID:"}),i.jsx("p",{className:"font-mono font-medium",children:t.prizeTokenId.toString?t.prizeTokenId.toString():t.prizeTokenId})]})]})]})}):i.jsxs("div",{className:f,children:[i.jsx("h3",{className:`font-display font-semibold mb-4 ${s?"text-base":"text-lg"}`,children:"Raffle Details"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Creator:"}),i.jsx("span",{className:"font-mono text-foreground",title:t.creator,children:s?`${t.creator.slice(0,12)}...`:`${t.creator.slice(0,16)}...`})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Pool Contract:"}),i.jsx("a",{href:Rf(t.address,t.chainId),target:"_blank",rel:"noopener noreferrer",className:"font-mono text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",title:t.address,children:s?`${t.address.slice(0,12)}...`:`${t.address.slice(0,16)}...`})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Start Time:"}),i.jsx("span",{children:new Date(t.startTime*1e3).toLocaleString()})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:["Raffle Duration",i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx("span",{className:"inline-flex items-center cursor-help","aria-label":"Raffle Duration info",children:i.jsx(lt,{className:"h-3.5 w-3.5 opacity-70"})})}),i.jsx(Nt,{side:"top",align:"center",children:"Shows the default duration until the raffle ends, then shows the actual duration taken."})]})]}),i.jsx("span",{children:(()=>{const p=[2,3,4,5,6,7,8].includes(t.stateNum),m=(t==null?void 0:t.actualDuration)&&(t.actualDuration.toNumber?t.actualDuration.toNumber():Number(t.actualDuration)),g=t==null?void 0:t.duration,w=p&&m&&m>0?m>g?g:m:g;return RM(w)})()})]}),t.holderTokenAddress&&t.holderTokenAddress!==$e&&t.holderTokenStandard!==void 0&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Gating Requirement:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-foreground",children:(()=>{let p=1;try{const g=t.minHolderTokenBalance;g&&(g.toString?g.toString().length>10?p=parseFloat(Is(g,18)):p=g.toNumber?g.toNumber():Number(g):p=Number(g))}catch{p=1}let m="";return t.holderTokenStandard===1?m=`${t.holderTokenAddress.slice(0,8)}...${t.holderTokenAddress.slice(-6)}`:m=r||`${t.holderTokenAddress.slice(0,8)}...${t.holderTokenAddress.slice(-6)}`,`${p} ${m}`})()}),i.jsx("a",{href:Rf(t.holderTokenAddress,t.chainId),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",title:t.holderTokenAddress,children:i.jsx(lt,{className:"h-3.5 w-3.5 opacity-70"})})]})]}),t.nativePrizeAmount&&t.nativePrizeAmount.gt&&t.nativePrizeAmount.gt(0)&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Prize Amount:"}),i.jsx("span",{children:l(t.nativePrizeAmount)})]}),t.erc20PrizeToken&&t.erc20PrizeToken!==$e&&t.erc20PrizeAmount&&t.erc20PrizeAmount.gt&&t.erc20PrizeAmount.gt(0)&&i.jsx(IM,{token:t.erc20PrizeToken,amount:t.erc20PrizeAmount}),t.prizeCollection&&t.prizeCollection!==$e&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Prize Collection:"}),i.jsx("a",{href:Rf(t.prizeCollection,t.chainId),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 underline hover:text-blue-800 dark:hover:text-blue-200",title:t.prizeCollection,children:n||`${t.prizeCollection.slice(0,10)}...${t.prizeCollection.slice(-8)}`})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-foreground/80 dark:text-foreground",children:e?"Prize Type:":"Collection Type:"}),i.jsx("span",{className:"font-semibold",children:(()=>{if(typeof e=="boolean"&&typeof t.standard<"u"){if(!e&&t.standard===0)return"Mintable ERC721";if(!e&&t.standard===1)return"Mintable ERC1155";if(e&&t.standard===0)return"Escrowed ERC721";if(e&&t.standard===1)return"Escrowed ERC1155"}return"Unknown"})()})]}),e&&t.prizeTokenId!==void 0&&t.prizeTokenId!==null&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-foreground/80 dark:text-foreground",children:"Prize Token ID:"}),i.jsx("span",{className:"font-mono font-semibold",children:t.prizeTokenId.toString?t.prizeTokenId.toString():t.prizeTokenId})]})]})]})]})},fN=({raffle:t,winnersSection:e,raffleDetailsCard:n,poolActivitySection:r,isMobile:s=!1,isUnengaged:o=!1,defaultTab:a="winners",variant:l="standard",className:c=""})=>{const u=k.useMemo(()=>o||a==="winners"?"activity":a,[o,a]),[f,p]=k.useState(u),m=k.useMemo(()=>{const w=[];return r&&w.push({id:"activity",label:"Activity",icon:Xl,content:r}),!o&&e&&w.push({id:"winners",label:"Winners",icon:dl,content:e}),n&&w.push({id:"details",label:"Details",icon:lt,content:n}),w},[o,e,n,r]),g=()=>{if(!t)return null;const w=t.stateNum,y=t.winnersSelected||0,T=t.winnersCount||0;return w===3?i.jsxs("span",{className:"ml-1.5 inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 text-blue-800",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),y,"/",T]}):w===4||w===6?i.jsxs("span",{className:"ml-1.5 inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[10px] font-medium bg-green-100 text-green-800",children:[i.jsx(hn,{className:"h-3 w-3"}),T]}):null};return m.length===0?null:i.jsx("div",{className:`raffle-info-tabs ${c}`,children:i.jsx("div",{className:"detail-beige-card bg-card/80 text-foreground backdrop-blur-sm border border-border rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 h-full flex flex-col",children:i.jsxs(ny,{value:f,onValueChange:p,className:"w-full h-full flex flex-col",children:[i.jsx("div",{className:"grid w-full border-b border-border",style:{gridTemplateColumns:`repeat(${m.length}, 1fr)`},children:m.map(w=>i.jsxs("button",{onClick:()=>p(w.id),className:`flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium transition-colors border-b-2 -mb-px ${f===w.id?"border-primary text-foreground bg-muted/30":"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/20"}`,children:[i.jsx(w.icon,{className:"h-4 w-4"}),i.jsx("span",{children:w.label}),w.id==="winners"&&g()]},w.id))}),i.jsx("div",{className:"flex-1 overflow-hidden",children:m.map(w=>i.jsx(Bo,{value:w.id,className:"mt-0 h-full focus-visible:outline-none focus-visible:ring-0 data-[state=inactive]:hidden",children:i.jsx("div",{className:"h-full overflow-y-auto",children:w.content})},w.id))})]})})})},Cxe=({raffle:t,prizeImageCard:e,ticketPurchaseSection:n,winnersSection:r,raffleDetailsCard:s,poolActivitySection:o,socialVerification:a,collectionName:l,isMobile:c=!1,className:u=""})=>{if(!t)return null;const f=t.stateNum===7;return c?i.jsxs("div",{className:`nft-pool-layout space-y-6 ${u}`,children:[i.jsx("div",{className:"nft-artwork-showcase-mobile rounded-2xl overflow-hidden",children:e}),a&&i.jsx("div",{className:"social-verification-section",children:a}),i.jsx("div",{className:"ticket-purchase-section",children:n}),i.jsx(fN,{raffle:t,winnersSection:r,raffleDetailsCard:s,poolActivitySection:o,isMobile:c,isUnengaged:f,defaultTab:"activity",variant:"nft"})]}):i.jsxs("div",{className:`nft-pool-layout ${u}`,children:[a&&i.jsx("div",{className:"social-verification-section mb-8",children:a}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"ticket-purchase-section",children:n}),i.jsx("div",{className:"flex items-start justify-center",children:e})]}),i.jsx(fN,{raffle:t,winnersSection:r,raffleDetailsCard:s,poolActivitySection:o,isMobile:c,isUnengaged:f,defaultTab:"activity",variant:"nft"})]})]})},Sxe=({raffle:t,ticketPurchaseSection:e,winnersSection:n,raffleDetailsCard:r,poolActivitySection:s,prizeImageCard:o,socialVerification:a,isMobile:l=!1,className:c=""})=>{if(!t)return null;const u=t.stateNum===7;return i.jsxs("div",{className:`standard-pool-layout ${c}`,children:[a&&i.jsx("div",{className:"mb-8",children:a}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-stretch",children:[i.jsx("div",{className:"ticket-purchase-section h-full",children:e}),i.jsx("div",{className:"raffle-info-tabs-section h-full",children:i.jsx(fN,{raffle:t,winnersSection:n,raffleDetailsCard:r,poolActivitySection:s,isMobile:l,isUnengaged:u,defaultTab:"activity",variant:"standard",className:"h-full"})})]})]})},Exe=t=>{const n=Date.now()-t,r=Math.floor(n/1e3),s=Math.floor(r/60),o=Math.floor(s/60),a=Math.floor(o/24);return a>0?`${a}d`:o>0?`${o}h`:s>0?`${s}m`:"Now"},DM=({raffle:t,variant:e="standard",className:n=""})=>{const[r,s]=k.useState([]),[o,a]=k.useState(!1),[l,c]=k.useState(null),[u,f]=k.useState(!1);k.useEffect(()=>{(async()=>{if(t!=null&&t.address){a(!0),c(null);try{f(!1),s([])}catch(g){console.error("Failed to fetch pool activity:",g),c("Failed to load activity"),f(!1)}finally{a(!1)}}})()},[t==null?void 0:t.address]);const p=()=>o?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):u?r.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(Xl,{className:"h-10 w-10 text-muted-foreground/50 mb-3"}),i.jsx("h4",{className:"font-medium text-foreground mb-1",children:"No Activity Yet"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Slot purchases will appear here"})]}):i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"grid grid-cols-12 gap-2 px-4 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider border-b border-border/50 bg-muted/20",children:[i.jsx("div",{className:"col-span-1",children:"#"}),i.jsx("div",{className:"col-span-5",children:"Participant"}),i.jsx("div",{className:"col-span-3 text-center",children:"Slots"}),i.jsx("div",{className:"col-span-3 text-right",children:"Time"})]}),i.jsx("div",{className:"divide-y divide-border/30",children:r.map((m,g)=>i.jsxs("div",{className:"grid grid-cols-12 gap-2 px-4 py-3 items-center hover:bg-muted/30 transition-colors",children:[i.jsx("div",{className:"col-span-1 text-sm font-medium text-muted-foreground",children:g+1}),i.jsxs("div",{className:"col-span-5 flex items-center gap-2 min-w-0",children:[i.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0 bg-primary"}),i.jsxs("span",{className:"font-mono text-sm truncate",title:m.address,children:[m.address.slice(0,6),"...",m.address.slice(-4)]})]}),i.jsx("div",{className:"col-span-3 text-center",children:i.jsxs("span",{className:"inline-flex items-center gap-1 text-sm font-medium text-foreground",children:[i.jsx(Kb,{className:"h-3 w-3 text-primary"}),m.slots]})}),i.jsx("div",{className:"col-span-3 flex justify-end",children:i.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(yr,{className:"h-3 w-3"}),Exe(m.timestamp)]})})]},m.id||g))})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(Kt,{className:"h-10 w-10 text-muted-foreground/50 mb-3"}),i.jsx("h4",{className:"font-medium text-foreground mb-1",children:"Activity Tracking Coming Soon"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Backend service not yet implemented"})]});return i.jsx("div",{className:`pool-activity-content h-full flex flex-col ${n}`,children:p()})},_xe=["Pending","Active","Ended","Drawing","Completed","Deleted","AllPrizesClaimed","Unengaged"];function Axe(t,e,n=!1){let r=1;typeof e=="number"?r=e:window.ethereum&&window.ethereum.chainId&&(r=parseInt(window.ethereum.chainId,16));const s={1:"https://etherscan.io",5:"https://goerli.etherscan.io",11155111:"https://sepolia.etherscan.io",137:"https://polygonscan.com",80001:"https://mumbai.polygonscan.com",10:"https://optimistic.etherscan.io",420:"https://goerli-optimism.etherscan.io",42161:"https://arbiscan.io",56:"https://bscscan.com",97:"https://testnet.bscscan.com",43114:"https://snowtrace.io",43113:"https://testnet.snowtrace.io",8453:"https://basescan.org",84531:"https://goerli.basescan.org",84532:"https://sepolia.basescan.org",11155420:"https://sepolia-optimism.etherscan.io"};return`${s[r]||s[1]}/${n?"tx":"address"}/${t}`}const hN=Ae.memo(({raffle:t,isMintableERC721:e,isEscrowedPrize:n,isMobile:r,onWinnerCountChange:s,onWinnersSelectedChange:o})=>{const{getContractInstance:a,executeTransaction:l}=xn(),{address:c}=an();er();const[u,f]=k.useState([]),[p,m]=k.useState(!1),[g,w]=k.useState(null),[y,T]=k.useState({}),[j,_]=k.useState(null),[v,P]=k.useState({}),[D,$]=k.useState(null),[U,K]=k.useState(null),[Y,G]=k.useState((t==null?void 0:t.winnersSelected)||0),X=k.useCallback(async()=>{if(console.log("fetchWinnerSelectionTx called:",{raffle:!!t,winnerSelectionTx:j,stateNum:t==null?void 0:t.stateNum}),!t||j)return;const z=t.stateNum===4||t.stateNum===6;if(console.log("Is raffle completed?",z),!!z)try{const R=a&&a(t.address,"pool");if(console.log("Pool contract:",!!R),!R)return;console.log("Fetching from block explorer...");const N=await R.provider.getBlockNumber(),F=Math.max(0,N-1e4);console.log(`Searching blocks ${F} to ${N}`);const E=R.filters.WinnersSelected(),M=await R.queryFilter(E,F,N);if(console.log("Events found:",(M==null?void 0:M.length)||0),M&&M.length>0){const ee={};for(const q of M)q.args&&q.args.winners&&q.args.winners.forEach(H=>{const J=H.toLowerCase();ee[J]||(ee[J]=q.transactionHash)});P(ee);const O=M[M.length-1];console.log("Historical WinnersSelected event:",O),console.log("Transaction hash:",O.transactionHash),console.log("Winner-to-Tx mapping:",ee),_(O.transactionHash)}else{console.log("No WinnersSelected events found in last 10000 blocks");try{const ee=R.filters.StateChanged(3,4),O=await R.queryFilter(ee,F,N);if(O&&O.length>0){const q=O[O.length-1];console.log("Using state change transaction:",q.transactionHash),_(q.transactionHash)}}catch(ee){console.warn("Fallback also failed:",ee)}}}catch(R){console.warn("Failed to fetch historical WinnersSelected event:",R);try{const N=(t.chainId||84532)===84532?"https://api-sepolia.basescan.org/api":"https://api.etherscan.io/api",F=await fetch(`${N}?module=logs&action=getLogs&address=${t.address}&topic0=0x${ed("WinnersSelected(address[])").slice(2)}&apikey=YourApiKeyToken`);if(F.ok){const E=await F.json();if(E.status==="1"&&E.result.length>0){const M=E.result[0].transactionHash;console.log("Found transaction via explorer API:",M),_(M)}}}catch(I){console.warn("Explorer API fallback failed:",I)}}},[t,j,a]),V=(t==null?void 0:t.stateNum)===4||(t==null?void 0:t.stateNum)===6,A=!!t&&!V;J$(t==null?void 0:t.address,{onWinnersSelected:(z,R)=>{var I,N;console.log("WinnersSelected event:",R),console.log("Event transactionHash:",R==null?void 0:R.transactionHash),console.log("Event log:",R==null?void 0:R.log),console.log("Event log transactionHash:",(I=R==null?void 0:R.log)==null?void 0:I.transactionHash),_((R==null?void 0:R.transactionHash)||((N=R==null?void 0:R.log)==null?void 0:N.transactionHash)),K(Date.now()),x(),setTimeout(()=>{x()},5e3)},onStateChange:(z,R)=>{(z===4||z===6)&&(K(Date.now()),setTimeout(()=>{x()},1e3),setTimeout(()=>{x()},6e3))},onRpcError:z=>{console.warn("WinnersSection RPC error:",z)},enablePolling:!0,pollingInterval:(t==null?void 0:t.stateNum)===3?8e3:12e3,autoStart:A,raffleState:(t==null?void 0:t.stateNum)||null,enableStateConditionalListening:!0,stopOnCompletion:!0}),k.useEffect(()=>{_(null)},[t]),k.useEffect(()=>{(async()=>{if(!t||!t.prizeCollection||t.prizeCollection===$e){$(null);return}try{const I=await a(t.prizeCollection,t.standard===0?"erc721Prize":"erc1155Prize").name();$(I)}catch{$(null)}})()},[t,a]);const x=k.useCallback(async()=>{if(!t){f([]),s==null||s(0);return}if(![3,4,6].includes(t.stateNum)){f([]),s==null||s(0);return}m(!0);try{const R=a&&a(t.address,"pool");if(!R){f([]),s==null||s(0),m(!1);return}const I=await R.winnersCount(),N=I.toNumber?I.toNumber():Number(I);if(N===0){f([]),s==null||s(0),m(!1);return}const F=[];for(let E=0;E<N;E++)try{const M=await R.winners(E);if(M===$e||M==="0x0000000000000000000000000000000000000000")continue;const ee=await R.claimedWins(M),O=await R.prizeClaimed(M);F.push({address:M,index:E,claimedWins:ee.toNumber?ee.toNumber():Number(ee),prizeClaimed:O&&(O.toNumber?O.toNumber()>0:Number(O)>0),batchTxHash:v[M.toLowerCase()]||j})}catch{continue}f(F),s==null||s(F.length)}catch{f([]),s==null||s(0)}finally{m(!1)}},[t,a,v,j,s]);k.useEffect(()=>{Object.keys(v).length>0&&u.length>0&&f(z=>z.map(R=>({...R,batchTxHash:v[R.address.toLowerCase()]||j})))},[v,j,u.length]),k.useEffect(()=>{x()},[x,U]),k.useEffect(()=>{X()},[X]),k.useEffect(()=>{(t==null?void 0:t.winnersSelected)!==void 0&&G(t.winnersSelected)},[t==null?void 0:t.winnersSelected]),k.useEffect(()=>{if(!t||t.stateNum!==3)return;console.log(" WinnersSection: Starting winner polling for Drawing state");let z=Y;const R=setInterval(async()=>{try{const I=a&&a(t.address,"pool");if(!I)return;const N=await I.winnersSelected(),F=N.toNumber?N.toNumber():Number(N);console.log(` Polling: ${F} winners on-chain, ${z} in local state`),F>z&&(console.log(" New winners detected! Fetching updated list..."),G(F),o==null||o(F),await x(),z=F)}catch(I){console.warn("Winner polling error:",I)}},15e3);return()=>{console.log(" WinnersSection: Stopping winner polling"),clearInterval(R)}},[t,t==null?void 0:t.stateNum,Y,a,x,o]);const C=()=>{if(p)return i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(u.length===0)return i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(dl,{className:"h-10 w-10 text-muted-foreground/50 mb-3"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"No winners yet"})]});const z=R=>R.batchTxHash||j;return i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:`grid gap-2 px-4 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider border-b border-border/50 bg-muted/20 ${t.isPrized,"grid-cols-12"}`,children:[i.jsx("div",{className:"col-span-1",children:"#"}),i.jsx("div",{className:t.isPrized?"col-span-5":"col-span-11",children:"Winner"}),t.isPrized&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-span-3 text-center",children:"Prize"}),i.jsx("div",{className:"col-span-3 text-right",children:"Status"})]})]}),i.jsx("div",{className:"divide-y divide-border/30",children:u.map((R,I)=>{const N=c&&R.address.toLowerCase()===c.toLowerCase(),F=R.prizeClaimed?{text:"Claimed",color:"text-green-600 dark:text-green-400",bg:"bg-green-500/10"}:{text:"Unclaimed",color:"text-orange-600 dark:text-orange-400",bg:"bg-orange-500/10"},E=z(R);return i.jsxs("div",{className:`grid gap-2 px-4 py-3 items-center hover:bg-muted/30 transition-colors ${t.isPrized,"grid-cols-12"} ${N?"bg-yellow-500/10 border-l-2 border-l-yellow-400":""}`,children:[i.jsx("div",{className:"col-span-1 text-sm font-medium text-muted-foreground",children:I+1}),i.jsxs("div",{className:`flex items-center gap-2 min-w-0 ${t.isPrized?"col-span-5":"col-span-11"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${N?"bg-yellow-400":"bg-primary"}`}),i.jsxs("span",{className:"font-mono text-sm truncate",title:R.address,children:[R.address.slice(0,6),"...",R.address.slice(-4)]}),E&&i.jsx("a",{href:Axe(E,t.chainId,!0),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center flex-shrink-0",title:"View winner selection transaction on block explorer",children:i.jsx("img",{src:"/images/etherscan logos/etherscan-logo-circle.svg",alt:"Etherscan",width:"16",height:"16",className:"opacity-70 hover:opacity-100 transition-opacity"})}),N&&i.jsx("span",{className:"text-[10px] font-medium text-yellow-800 bg-yellow-100 px-1.5 py-0.5 rounded flex-shrink-0",children:"You"})]}),t.isPrized&&i.jsx("div",{className:"col-span-3 text-center text-sm font-medium",children:i.jsx("span",{className:"text-foreground",children:t.winnersCount>0?`1/${t.winnersCount}`:""})}),t.isPrized&&i.jsx("div",{className:"col-span-3 flex justify-end",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${F.bg} ${F.color}`,children:[R.prizeClaimed&&i.jsx(hn,{className:"h-3 w-3"}),F.text]})})]},R.index)})})]})},L=()=>{switch(_xe[t.stateNum]||"Unknown"){case"Pending":return i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(yr,{className:"h-10 w-10 text-yellow-500 mb-3"}),i.jsx("h4",{className:"font-medium text-foreground mb-1",children:"Raffle Pending"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Winners will be announced after the raffle ends."})]});case"Active":return i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(os,{className:"h-10 w-10 text-green-500 mb-3"}),i.jsx("h4",{className:"font-medium text-foreground mb-1",children:"Raffle Active"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Winners will be announced after it ends."})]});case"Ended":return i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(yr,{className:"h-10 w-10 text-red-500 mb-3"}),i.jsx("h4",{className:"font-medium text-foreground mb-1",children:"Raffle Ended"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Waiting for winner selection to begin."})]});case"Drawing":return i.jsxs("div",{className:"h-full flex flex-col",children:[u.length>0&&i.jsx("div",{className:"px-4 py-3 border-b border-border/50 bg-muted/20",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"relative w-full h-2 bg-muted rounded-full overflow-hidden",children:i.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-500 ease-out rounded-full",style:{width:`${Math.min(Y/t.winnersCount*100,100)}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})}),i.jsxs("span",{className:"text-xs font-semibold text-foreground whitespace-nowrap",children:[Y,"/",t.winnersCount]})]})}),C()]});case"Completed":case"Prizes Claimed":case"AllPrizesClaimed":return C();case"Deleted":return i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(Uh,{className:"h-10 w-10 text-muted-foreground/50 mb-3"}),i.jsx("h4",{className:"font-medium text-foreground mb-1",children:"Raffle Deleted"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"This raffle has been deleted."})]});case"Unengaged":return i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(Kt,{className:"h-10 w-10 text-muted-foreground/50 mb-3"}),i.jsx("h4",{className:"font-medium text-foreground mb-1",children:"Unengaged Raffle"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Not enough participants before duration elapsed."})]});default:return i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(Kt,{className:"h-10 w-10 text-muted-foreground/50 mb-3"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Unknown raffle state."})]})}};return i.jsx("div",{className:"winners-section-content h-full flex flex-col",children:L()})});hN.displayName="WinnersSection";const OM=["Pending","Active","Ended","Drawing","Completed","Deleted","AllPrizesClaimed","Unengaged"];function P8(t){return ce.isBigNumber(t)?t:t!=null?ce.from(t):ce.from(0)}const Gp=t=>(console.log("Token Selector Debug:",{holderTokenAddress:t.holderTokenAddress,holderTokenStandard:t.holderTokenStandard,holderTokenStandardType:typeof t.holderTokenStandard,holderTokenStandardNumber:t.holderTokenStandard!==void 0&&t.holderTokenStandard!==null?t.holderTokenStandard.toNumber?t.holderTokenStandard.toNumber():Number(t.holderTokenStandard):"N/A",zeroAddress:$e,addressMatches:t.holderTokenAddress===$e,standardMatches:t.holderTokenStandard===0,standardMatchesGTE:t.holderTokenStandard!==void 0&&t.holderTokenStandard!==null&&(t.holderTokenStandard.toNumber?t.holderTokenStandard.toNumber()===0:Number(t.holderTokenStandard)===0),tokenGatingEnabled:t.holderTokenStandard===0}),!t.holderTokenAddress||t.holderTokenAddress===$e||t.holderTokenStandard===void 0||t.holderTokenStandard===null?!1:(t.holderTokenStandard.toNumber?t.holderTokenStandard.toNumber():Number(t.holderTokenStandard))===0),Kp=t=>t.holderTokenAddress&&t.holderTokenAddress!==$e,R8=Ae.memo(({raffle:t,selectedTokenIds:e,setSelectedTokenIds:n,loadingTokens:r,tokenError:s,userTokenIds:o})=>{let a=1;try{const f=t.minHolderTokenBalance;f&&f.toString?f.toString().length>10?a=parseFloat(Is(f,18)):f.toNumber?a=f.toNumber():a=Number(f):f&&(a=Number(f))}catch(f){console.warn("Could not convert minHolderTokenBalance to number, using default 1:",f),a=1}const l=a>1,[c,u]=k.useState("");if(k.useEffect(()=>{s&&e.length>0&&u(e.join(", "))},[s,e]),r)return i.jsx("div",{className:"mb-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Loading your tokens..."})]})});if(s){const f=s.toLowerCase().includes("enumeration");return i.jsx("div",{className:"mb-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:f&&i.jsxs("div",{className:"mt-3",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Enter Token ID",a>1?"s":""," manually:"]}),i.jsx("input",{type:"text",value:c,onChange:p=>{const m=p.target.value;u(m);const g=m.split(",").map(w=>w.trim()).filter(w=>w&&!isNaN(w)).map(w=>w.toString());console.log("Manual token input updated (real-time):",g),n(g)},onKeyDown:p=>{p.key==="Enter"&&p.preventDefault()},placeholder:a>1?`Enter ${a} token IDs, separated by commas`:"Enter token ID",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Enter the token ID",a>1?"s":""," you own from this collection. The Purchase button will enable automatically when valid token IDs are entered."]})]})})}return o.length===0?i.jsx("div",{className:"mb-4 p-4 border border-yellow-200 rounded-lg bg-yellow-50",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-yellow-500"}),i.jsx("span",{className:"text-sm text-yellow-600",children:"You do not own any tokens from the required collection"})]})}):o.length<a?i.jsx("div",{className:"mb-4 p-4 border border-yellow-200 rounded-lg bg-yellow-50",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-yellow-500"}),i.jsx("span",{className:"text-sm text-yellow-600",children:"Your token balance of the required collection is insufficient"})]})}):i.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Select ",a," token",a>1?"s":""," to participate"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l?`Choose ${a} tokens from your collection`:"Choose one token from your collection"})]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:o.map(f=>{const p=e.includes(f),m=!l||e.length<a||p;return i.jsxs("button",{onClick:()=>{l?p?n(e.filter(g=>g!==f)):e.length<a&&n([...e,f]):n([f])},disabled:!m,className:`
                p-3 border rounded-lg text-center transition-all
                ${p?"border-blue-500 bg-blue-50 text-blue-700":m?"border-gray-300 hover:border-gray-400 bg-white text-gray-700":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}
              `,children:[i.jsxs("div",{className:"text-xs font-mono",children:["#",f]}),p&&i.jsx("div",{className:"text-xs mt-1",children:" Selected"})]},f)})}),l&&i.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:["Selected: ",e.length," / ",a," tokens"]})]})});R8.displayName="TokenSelector";const LM=Ae.memo(({raffle:t,onPurchase:e,timeRemaining:n,winners:r,shouldShowClaimPrize:s,prizeAlreadyClaimed:o,claimingPrize:a,handleClaimPrize:l,shouldShowClaimRefund:c,claimingRefund:u,handleClaimRefund:f,refundableAmount:p,isMintableERC721:m,isEscrowedPrize:g,isCollabPool:w,isPrized:y,isMobile:T,onStateChange:j,socialEngagementRequired:_,hasCompletedSocialEngagement:v})=>{var dt;const{connected:P,address:D,provider:$}=an(),{getContractInstance:U,executeTransaction:K}=xn(),{formatSlotFee:Y,getCurrencySymbol:G}=er(),[X,V]=k.useState(1),[A,x]=k.useState(!1),[C,L]=k.useState(0),[z,R]=k.useState(null),[I,N]=k.useState([]),[F,E]=k.useState([]),[M,ee]=k.useState(!1),[O,q]=k.useState(""),[H,J]=k.useState(!1),[Q,ne]=k.useState(!1);k.useEffect(()=>{pe()},[t.address,D]),k.useEffect(()=>{Gp(t)&&D&&t.holderTokenAddress&&se()},[t.address,D,t.holderTokenAddress,t.holderTokenStandard]);const se=async()=>{if(!D||!t.holderTokenAddress||!Gp(t)){E([]);return}ee(!0),q(null);try{const oe=new Mt(t.holderTokenAddress,["function balanceOf(address) view returns (uint256)","function tokenOfOwnerByIndex(address, uint256) view returns (uint256)"],$),ue=await oe.balanceOf(D);if(ue.toNumber()===0){E([]),q("You do not own any tokens from the required collection");return}const ge=[];try{for(let be=0;be<ue.toNumber();be++){const ve=await oe.tokenOfOwnerByIndex(D,be);ge.push(ve.toString())}E(ge)}catch{q("Token collection does not support token enumeration. Please contact the raffle creator."),E([])}}catch(oe){console.error("Error fetching user tokens:",oe),q("Failed to fetch your tokens. Please try again."),E([])}finally{ee(!1)}},ie=()=>{if(console.log("Token Selection Validation Debug:",{shouldShowSelector:Gp(t),selectedTokenIds:I,selectedTokenIdsLength:I.length,requiredTokens:t.minHolderTokenBalance,requiredTokensType:typeof t.minHolderTokenBalance}),!Gp(t))return!0;const oe=t.minHolderTokenBalance;if(!oe)return!1;let ue=1;try{oe.toString?oe.toString().length>10?ue=parseFloat(Is(oe,18)):oe.toNumber?ue=oe.toNumber():ue=Number(oe):ue=Number(oe)}catch(ge){console.warn("Error converting requiredTokens:",ge),ue=1}return console.log("Validation Result:",{requiredTokensNumber:ue,selectedLength:I.length,isValid:I.length>=ue}),I.length>=ue},pe=async()=>{if(!t.address||!D){L(0),R(null);return}try{const oe=U(t.address,"pool");if(!oe)return;const ue=await oe.slotsPurchased(D);L(ue.toNumber?ue.toNumber():Number(ue));let ge=0;try{ge=(await oe.getParticipantsCount()).toNumber()}catch{let ve=0;for(;;)try{await oe.participants(ve),ge++,ve++}catch{break}}ge>0&&ue>0?R((ue/ge*100).toFixed(2)):R(null)}catch{L(0),R(null)}},le=async(oe,ue)=>{var ge;if(!P||!D){re.error("Please connect your wallet");return}if(console.log("Early Purchase Debug:",{selectedTokenIds:ue,selectedTokenIdsLength:ue.length,minHolderTokenBalance:(ge=t.minHolderTokenBalance)==null?void 0:ge.toString(),minHolderTokenBalanceType:typeof t.minHolderTokenBalance,minHolderTokenBalanceFormatted:t.minHolderTokenBalance?Is(t.minHolderTokenBalance,18):"N/A",holderTokenAddress:t.holderTokenAddress,holderTokenStandard:t.holderTokenStandard}),!ie()){const be=t.minHolderTokenBalance,ve=be?be.toNumber?be.toNumber():Number(be):1;re.error(`Please select ${ve} token${ve>1?"s":""} to participate`);return}x(!0);try{await e(oe,ue)}catch(be){ih(be,"purchase tickets"),oh(be,"Purchase Tickets",{quantity:oe,selectedTokenIds:ue}),gn(be)}finally{x(!1)}},me=()=>{var ve,Ke,Me;const oe=Math.floor(Date.now()/1e3),ue=t.startTime+t.duration,ge=((ve=t.state)==null?void 0:ve.toLowerCase())==="pending"&&t.startTime&&oe>=t.startTime&&oe<ue;return!((D==null?void 0:D.toLowerCase())===((Ke=t.creator)==null?void 0:Ke.toLowerCase()))&&(((Me=t.state)==null?void 0:Me.toLowerCase())==="active"&&oe<ue||ge)},Ee=()=>{var Ke,Me,He,ct,Je;const oe=Math.floor(Date.now()/1e3),ue=t.startTime+t.duration,ge=t.slotsSold,be=Kp(t),ve=be?Math.ceil(t.winnersCount*50/100):t.winnersCount;return console.log("canClosePool debug:",{now:oe,raffleEndTime:ue,timePassed:oe>=ue,participantsCount:ge,winnersCount:t.winnersCount,isTokenGated:be,minimumRequired:ve,sufficientParticipants:ge<t.winnersCount,belowMinimum:ge<ve,state:(Ke=t.state)==null?void 0:Ke.toLowerCase(),validState:((Me=t.state)==null?void 0:Me.toLowerCase())==="active"||((He=t.state)==null?void 0:He.toLowerCase())==="pending"}),oe>=ue&&ge<ve&&(((ct=t.state)==null?void 0:ct.toLowerCase())==="active"||((Je=t.state)==null?void 0:Je.toLowerCase())==="pending")},te=()=>{var Ke,Me;const oe=Math.floor(Date.now()/1e3),ue=t.startTime+t.duration,ge=t.slotsSold,be=Kp(t),ve=be?Math.ceil(t.winnersCount*50/100):t.winnersCount;return console.log("canRequestRandomness debug:",{now:oe,raffleEndTime:ue,timePassed:oe>=ue,participantsCount:ge,winnersCount:t.winnersCount,winnersSelected:t.winnersSelected,isTokenGated:be,minimumRequired:ve,sufficientParticipants:ge>=ve,moreWinnersNeeded:t.winnersSelected<t.winnersCount,state:(Ke=t.state)==null?void 0:Ke.toLowerCase(),stateNum:t.stateNum}),t.stateNum===2?ge>=ve:t.stateNum===3?t.winnersSelected<t.winnersCount:((Me=t.state)==null?void 0:Me.toLowerCase())==="active"&&oe>=ue?ge>=ve:!1},Ne=async()=>{J(!0);try{const oe=U(t.address,"pool");if(!oe)throw new Error("Failed to get pool contract");try{await oe.callStatic.closePool()}catch(ge){throw gn(ge,{action:"closePool",phase:"preflight"}),ge}const ue=await K(oe.closePool);if(ue.success)re.success("Pool closed successfully!"),j&&j();else throw new Error(ue.error)}catch(oe){ih(oe,"close pool"),oh(oe,"Close Pool"),gn(oe)}finally{J(!1)}},Pe=async()=>{ne(!0);try{const oe=U(t.address,"pool");if(!oe)throw new Error("Failed to get pool contract");try{await oe.callStatic.requestRandomness()}catch(ge){throw gn(ge,{action:"requestRandomness",phase:"preflight"}),ge}const ue=await K(oe.requestRandomness);if(ue.success)re.success("Randomness requested successfully!"),j&&j();else throw new Error(ue.error)}catch(oe){ih(oe,"request randomness"),oh(oe,"Request Randomness"),gn(oe)}finally{ne(!1)}},et=()=>s&&!o,Le=()=>{const oe=!t.usesCustomFee,ue=y===!0||w===!0||t.isPrized||t.isCollabPool,ge=[4,5,6,7].includes(t.stateNum);return(oe||ue)&&ge&&p&&p.gt&&p.gt(0)},Se=Math.floor(Date.now()/1e3);t&&t.startTime&&Se>=t.startTime;const Te=t.slotLimit-t.slotsSold,ze=Math.min(Te,t.maxSlotsPerAddress);return i.jsxs("div",{className:"detail-beige-card bg-card/80 text-foreground backdrop-blur-sm border border-border rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 h-full flex flex-col min-h-[360px] sm:min-h-[380px] lg:min-h-[420px] overflow-hidden",children:[i.jsxs("h3",{className:"font-display text-[length:var(--text-lg)] font-semibold mb-4 flex items-center justify-between",children:["Purchase Slots",Kp(t)&&i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Token-Gated"})]}),i.jsxs("div",{className:"flex-1 flex flex-col h-full gap-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"text-muted-foreground flex items-center gap-2",children:["Slot Fee:",typeof t.usesCustomFee=="boolean"&&i.jsxs(kt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsx("span",{className:"inline-flex items-center cursor-help","aria-label":"Slot Fee info",children:i.jsx(lt,{className:"h-3.5 w-3.5 opacity-70",tabIndex:0})})}),i.jsx(Nt,{side:"top",align:"center",children:t.usesCustomFee===!0?"Set by Creator":"Protocol Slot Fee"})]})]}),i.jsx("p",{className:"font-body text-[length:var(--text-base)] font-medium",children:Y(t.slotFee||"0")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Remaining slots:"}),i.jsx("p",{className:"font-body text-[length:var(--text-base)] font-medium",children:t.slotLimit-t.slotsSold})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Your slots:"}),i.jsx("p",{className:"font-body text-[length:var(--text-base)] font-medium",children:C||0})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Winning Chance:"}),i.jsx("p",{className:"font-body text-[length:var(--text-base)] font-medium",children:z!==null?`${z}%`:"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Max per user:"}),i.jsx("p",{className:"font-body text-[length:var(--text-base)] font-medium",children:t.maxSlotsPerAddress})]}),Le()&&p&&p.gt&&p.gt(0)&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Your Refundable Amount:"}),i.jsxs("p",{className:"font-body text-[length:var(--text-base)] font-medium",children:[Zt(p)," ",G()]})]}),i.jsx("div",{})]}),t.stateNum===4||t.stateNum===5||t.stateNum===6||t.stateNum===7?i.jsx(i.Fragment,{children:i.jsx("div",{className:"mt-auto",children:et()||Le()?i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[et()&&i.jsx(we,{onClick:l,disabled:a||!P,variant:"primary",size:"lg",className:"flex-1",children:a?g?"Claiming...":"Minting...":g?"Claim Prize":"Mint"}),Le()&&i.jsx(we,{onClick:f,disabled:u||!P,variant:"primary",size:"lg",className:"flex-1",children:u?"Claiming...":"Claim Refund"})]}):i.jsx(we,{disabled:!0,variant:"primary",size:"lg",className:"w-full opacity-60 cursor-not-allowed",children:t.state==="Deleted"||t.stateNum===5?"Pool Deleted":"Pool Closed"})})}):i.jsxs("div",{className:"mt-auto",children:[Ee()?i.jsxs(i.Fragment,{children:[i.jsx(we,{onClick:Ne,disabled:H,variant:"primary",size:"lg",className:"w-full",children:H?"Closing...":!Kp(t)&&g&&(D==null?void 0:D.toLowerCase())===t.creator.toLowerCase()?"Withdraw Prize":"Close Pool"}),P&&(D==null?void 0:D.toLowerCase())===t.creator.toLowerCase()&&g&&i.jsx("p",{className:"text-muted-foreground mt-4 text-center text-sm",children:"Closing this pool will automatically transfer the escrowed prize to your wallet"})]}):te()&&((D==null?void 0:D.toLowerCase())===t.creator.toLowerCase()||C>0)?i.jsxs(i.Fragment,{children:[i.jsx(we,{onClick:Pe,disabled:Q,variant:"primary",size:"lg",className:"w-full",children:Q?"Requesting...":"Request Randomness"}),i.jsx("p",{className:"text-muted-foreground mt-4 text-center text-sm",children:t.stateNum===3?`Batch ${Math.ceil(t.winnersSelected/25)} complete. ${t.winnersCount-t.winnersSelected} more winner${t.winnersCount-t.winnersSelected!==1?"s":""} needed. ${(D==null?void 0:D.toLowerCase())===t.creator.toLowerCase()?"As the creator":"As a participant"}, you can request the next batch.`:`The pool has ended. ${(D==null?void 0:D.toLowerCase())===t.creator.toLowerCase()?"As the creator":"As a participant"}, you can request the randomness to initiate winner selection.`})]}):t.state==="Completed"||t.stateNum===4||t.stateNum===6||t.state==="Deleted"||t.stateNum===5?i.jsx(we,{disabled:!0,variant:"primary",size:"lg",className:"w-full opacity-60 cursor-not-allowed",children:t.state==="Deleted"||t.stateNum===5?"Pool Deleted":"Pool Closed"}):Ee()?i.jsx(we,{onClick:Ne,disabled:H,variant:"primary",size:"lg",className:"w-full",children:H?"Closing...":!Kp(t)&&g&&(D==null?void 0:D.toLowerCase())===t.creator.toLowerCase()?"Withdraw Prize":"Close Pool"}):ze<=0?i.jsx(we,{disabled:!0,variant:"primary",size:"lg",className:"w-full opacity-60 cursor-not-allowed",children:t.state==="Deleted"||t.stateNum===5?"Pool Deleted":"Pool Closed"}):C>=t.maxSlotsPerAddress?i.jsx(we,{disabled:!0,variant:"primary",size:"lg",className:"w-full opacity-60 cursor-not-allowed",children:"Limit Reached"}):i.jsxs(i.Fragment,{children:[me()?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Quantity"}),i.jsx("input",{type:"number",min:1,max:t.maxSlotsPerAddress,value:X,onChange:oe=>{const ue=oe.target.value;if(ue===""||ue===null||ue===void 0)V(1);else{const ge=parseInt(ue);isNaN(ge)?V(1):V(Math.max(1,Math.min(t.maxSlotsPerAddress,ge)))}},className:"w-full px-3 py-2.5 text-sm border border-border rounded-lg bg-card text-card-foreground transition-colors focus:ring-primary focus:border-primary"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:i.jsxs("span",{className:"cursor-pointer hover:text-primary hover:underline transition-colors",onClick:()=>V(Math.max(1,t.maxSlotsPerAddress-C)),title:"Click to set quantity to maximum",children:["Max: ",Math.max(0,t.maxSlotsPerAddress-C)," slots remaining"]})})]}),i.jsx("div",{className:"p-4 bg-muted/50 backdrop-blur-sm border border-border/30 rounded-lg",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium",children:"Total Cost:"}),i.jsx("span",{className:"font-body text-[length:var(--text-base)] font-bold",children:Y(P8(t.slotFee).mul(isNaN(X)?1:X))})]})})]}):null,Gp(t)&&i.jsx(R8,{raffle:t,selectedTokenIds:I,setSelectedTokenIds:N,loadingTokens:M,tokenError:O,userTokenIds:F}),i.jsx(we,{onClick:()=>le(X,I),disabled:A||!P||!me()||_&&!v||!ie(),variant:"primary",size:"lg",className:"w-full shadow-sm",children:A?"Processing...":`Purchase ${X} Slot${X>1?"s":""}`}),_&&!v&&i.jsx("div",{className:"text-center py-2",children:i.jsx("p",{className:"text-muted-foreground text-sm",children:"Complete social media verification to enable slot purchase."})}),(D==null?void 0:D.toLowerCase())===((dt=t.creator)==null?void 0:dt.toLowerCase())&&i.jsx("div",{className:"text-center py-2",children:i.jsx("p",{className:"text-muted-foreground text-sm",children:"You cannot purchase slots from your own pool."})})]}),!P&&i.jsx("div",{className:"text-center py-4",children:i.jsx("p",{className:"text-muted-foreground",children:"Please connect your wallet to purchase slots."})})]})]})]})}),Pxe=({raffle:t,isMintableERC721:e,isEscrowedPrize:n})=>{const{getContractInstance:r}=xn(),[s,o]=k.useState(null),[a,l]=k.useState(!0),[c,u]=k.useState(null),[f,p]=k.useState(!1),[m,g]=k.useState([]),[w,y]=k.useState(0),T=["https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://cloudflare-ipfs.com/ipfs/","https://dweb.link/ipfs/"],j=T.map(X=>X.replace("/ipfs/","/ipns/")),_=["https://arweave.net/"],v=(X,V,A,x={})=>{const C=[],L=/\/$/.test(X),z=X.replace(/\/$/,""),R=V!=null?V.toString():"0",N=(V!=null?BigInt(V):0n).toString(16).padStart(64,"0"),F=N.toUpperCase(),E=A===1,M=A===0,ee=q=>{const H=[],J=q.replace(/\/?(?:[0-9]+|[a-fA-F0-9]{64})(?:\.json)?$/,"");return J&&J!==q&&(H.push(J),H.push(`${J}/`),H.push(`${J}/index.json`),H.push(`${J}/metadata.json`)),H};if(X.match(/\/(?:[0-9]+|[a-fA-F0-9]{64})(?:\.json)?$/)!==null){if((E||x.prioritizeRoot)&&C.push(...ee(X)),C.push(X),X.includes(".json")||C.push(`${X}.json`),M&&C.push(...ee(X)),E){const q=(H,J=!0)=>{const Q=[];return H.match(new RegExp(`/${R}(?:\\.json)?$`))&&(Q.push(H.replace(new RegExp(`/${R}(?:\\.json)?$`),`/${N}`)),J&&Q.push(H.replace(new RegExp(`/${R}(?:\\.json)?$`),`/${N}.json`)),Q.push(H.replace(new RegExp(`/${R}(?:\\.json)?$`),`/${F}`)),J&&Q.push(H.replace(new RegExp(`/${R}(?:\\.json)?$`),`/${F}.json`))),H.match(new RegExp(`${R}(?:\\.json)?$`))&&(Q.push(H.replace(new RegExp(`${R}(?:\\.json)?$`),`${N}`)),J&&Q.push(H.replace(new RegExp(`${R}(?:\\.json)?$`),`${N}.json`)),Q.push(H.replace(new RegExp(`${R}(?:\\.json)?$`),`${F}`)),J&&Q.push(H.replace(new RegExp(`${R}(?:\\.json)?$`),`${F}.json`))),Q};C.push(...q(X,!0))}}else E?(C.push(X),L&&C.push(z+"/"),C.push(`${z}.json`),C.push(`${z}/index.json`),C.push(`${z}/metadata.json`),C.push(`${z}/${N}`),C.push(`${z}${N}`),C.push(`${z}/${N}.json`),C.push(`${z}${N}.json`),C.push(`${z}/${F}`),C.push(`${z}${F}`),C.push(`${z}/${F}.json`),C.push(`${z}${F}.json`),C.push(`${z}/${R}`),C.push(`${z}${R}`),C.push(`${z}/${R}.json`),C.push(`${z}${R}.json`)):(C.push(X),L&&C.push(z+"/"),C.push(`${z}.json`),C.push(`${z}/index.json`),C.push(`${z}/metadata.json`),C.push(`${z}/${R}`),C.push(`${z}${R}`),C.push(`${z}/${R}.json`),C.push(`${z}${R}.json`)),X.includes("{id}")&&(C.push(X.replace("{id}",N)),C.push(X.replace("{id}",R)),C.push(X.replace("{id}",F)));return[...new Set(C)]},P=X=>{if(!X)return[];if(X.startsWith("ipfs://")){let V=X.replace("ipfs://","");return V.startsWith("ipfs/")&&(V=V.slice(5)),T.map(A=>`${A}${V}`)}if(X.startsWith("ipns://")){let V=X.replace("ipns://","");return V.startsWith("ipns/")&&(V=V.slice(5)),j.map(A=>`${A}${V}`)}if(X.startsWith("ar://")){const V=X.replace("ar://","");return _.map(A=>`${A}${V}`)}try{const V=new URL(X),x=V.pathname.replace(/\/ipfs\/ipfs\//,"/ipfs/").split("/").filter(Boolean),C=x.indexOf("ipfs");if(C!==-1&&x[C+1]){const z=x.slice(C+1).join("/");return T.map(R=>`${R}${z}`)}const L=x.indexOf("ipns");if(L!==-1&&x[L+1]){const z=x.slice(L+1).join("/");return j.map(R=>`${R}${z}`)}if(V.hostname.endsWith("arweave.net")||V.hostname==="arweave.net"){const z=x.join("/");return _.map(R=>`${R}${z}`)}}catch{}return[X]},D=X=>{const V=["image","image_url","imageUrl","animation_url","animationUrl","media","artwork"],A=x=>{if(!x)return null;if(x.startsWith("ipfs://")){let C=x.slice(7);return C.startsWith("ipfs/")&&(C=C.slice(5)),T.map(z=>`${z}${C}`)}if(x.startsWith("ipns://")){let C=x.slice(7);return C.startsWith("ipns/")&&(C=C.slice(5)),j.map(z=>`${z}${C}`)}if(x.startsWith("ar://")){const C=x.slice(5);return _.map(z=>`${z}${C}`)}return[x]};for(const x of V)if(X[x]){const C=X[x];return A(String(C))}return null},$=()=>{Array.isArray(m)&&w+1<m.length?(y(w+1),o(m[w+1])):o(null)},U=async(X,V=1e4)=>{const A=new AbortController,x=setTimeout(()=>A.abort(),V);try{const C=await fetch(X,{signal:A.signal,headers:{Accept:"application/json, text/plain, */*"}});return clearTimeout(x),C}catch(C){throw clearTimeout(x),C}},K=async(X,V=1e4)=>{for(const A of X)try{if(A.startsWith("data:")){const[C,L]=A.split(",",2),[,z,R]=C.match(/^data:([^;]+);([^,]+)$/)||[];if(z!=null&&z.includes("application/json")&&R==="base64"){const I=JSON.parse(atob(L)),N=D(I)||null;if(N)return{metadata:I,imageUrl:N,sourceUri:A}}else if(z!=null&&z.startsWith("image/")||z!=null&&z.startsWith("video/"))return{metadata:{image:A},imageUrl:A,sourceUri:A};continue}const x=await U(A,V);if(x.ok){const C=x.headers.get("content-type");try{const L=await x.text(),z=JSON.parse(L);if(z&&typeof z=="object"){const R=D(z);if(R)return{metadata:z,imageUrl:R,sourceUri:A}}}catch{if(C!=null&&C.startsWith("image/")||C!=null&&C.startsWith("video/")||A.match(/\.(jpg|jpeg|png|gif|svg|webp|mp4|webm|ogg)$/i))return{metadata:{image:A},imageUrl:A,sourceUri:A}}}}catch{continue}throw new Error("All metadata fetch attempts failed")};if(k.useEffect(()=>{async function X(){if(t.isPrized||t.prizeCollection&&t.prizeCollection!==$e||t.standard!==void 0&&t.prizeTokenId!==void 0){l(!0),o(null),u(null);try{let x=null;const C=t.standard===0?"erc721Prize":"erc1155Prize",L=r(t.prizeCollection,C),z=!n;if(!L){o(null),l(!1);return}if(t.standard===0)if(z)try{if(x=await L.unrevealedBaseURI(),!x||x.trim()===""){p(!0),o(null),l(!1);return}}catch{p(!0),o(null),l(!1);return}else try{x=await L.tokenURI(t.prizeTokenId)}catch{o(null),l(!1);return}else if(t.standard===1)if(z){let M=null,ee=null,O=null;try{M=await L.unrevealedURI()}catch{}try{ee=await L.tokenURI(t.prizeTokenId)}catch{}try{O=await L.isRevealed()}catch{O=null}if(O===!1)if(M&&M.trim()!=="")x=M;else if(ee&&ee.trim()!=="")x=ee;else try{const q=t==null?void 0:t.prizeTokenId;x=await L.uri(q)}catch{o(null),l(!1);return}else if(O===!0)if(ee&&ee.trim()!=="")x=ee;else try{x=await L.uri(t.prizeTokenId)}catch{if(M&&M.trim()!=="")x=M;else{o(null),l(!1);return}}else if(ee&&ee.trim()!=="")x=ee;else if(M&&M.trim()!=="")x=M;else try{x=await L.uri(t.prizeTokenId)}catch{o(null),l(!1);return}}else try{x=await L.uri(t.prizeTokenId)}catch{o(null),l(!1);return}else{o(null),l(!1);return}if(!x||x.trim()===""){o(null),l(!1);return}const R=v(x,t.prizeTokenId,t.standard),I=[];for(const M of R)I.push(...P(M));const N=t.standard===0&&z?5e3:1e4,F=await K(I,N),E=Array.isArray(F.imageUrl)?F.imageUrl:[F.imageUrl];g(E),y(0),o(E[0]),u(F.sourceUri)}catch{o(null),u(null)}l(!1)}}(t==null?void 0:t.isPrized)===!0&&(t==null?void 0:t.prizeCollection)&&t.prizeCollection!==$e&&((t==null?void 0:t.standard)===0||(t==null?void 0:t.standard)===1)&&X()},[t,r,n]),!((t==null?void 0:t.isPrized)===!0&&(t==null?void 0:t.prizeCollection)&&t.prizeCollection!==$e&&((t==null?void 0:t.standard)===0||(t==null?void 0:t.standard)===1)))return null;if(a)return i.jsx(ut,{className:"detail-beige-card h-full flex flex-col items-center justify-center text-foreground border border-border rounded-xl",children:i.jsx(It,{className:"flex flex-col items-center justify-center",children:i.jsx("div",{className:"w-64 h-64 flex items-center justify-center border rounded-lg bg-muted/30",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading prize media..."})]})})})});if(!s)return null;const G=typeof s=="string"&&/\.(mp4|webm|ogg)$/i.test(s);return i.jsx(ut,{className:"detail-beige-card h-full flex flex-col items-center justify-center text-foreground border border-border rounded-xl",children:i.jsx(It,{className:"flex flex-col items-center justify-center",children:G?i.jsx("video",{src:s,className:"w-64 h-64 object-contain rounded-lg border",style:{background:"#000"},controls:!0,playsInline:!0,onError:$}):i.jsx("img",{src:s,alt:"Prize Art",className:"w-64 h-64 object-contain rounded-lg border",style:{background:"#fff"},onError:$})})})};function Rxe(t){return t?t.state==="Deleted"?{label:"All Slots Refundable",refundable:!0,reason:"Raffle was deleted before ending. All slots are refundable."}:t.usesCustomFee?t.isPrized&&t.winnersCount===1&&t.standard!==void 0&&(t.standard===0||t.standard===1)?{label:"Slots Refundable if Deleted",refundable:!1,reason:"Single-winner NFT raffles are not refundable unless deleted before ending."}:{label:"Non-winning Slots Refundable",refundable:!0,reason:"This raffle supports refunds for non-winning slots."}:{label:"Slot Fees Refundable",refundable:!0,reason:"This raffle uses the global slot fee. All participants can claim 80% refunds after completion."}:{label:"Non-Refundable",refundable:!1,reason:"Unknown"}}const FM=()=>{const{raffleAddress:t}=L_(),n=L_().chainSlug,r=mo(),{connected:s,address:o,provider:a,isInitialized:l,isReconnecting:c}=an(),{getContractInstance:u,executeTransaction:f,isContractsReady:p,contracts:m}=xn(),{isMobile:g}=Ln(),{formatPrizeAmount:w}=er(),y=k.useCallback(()=>{var qe;const _e=(qe=a==null?void 0:a.network)==null?void 0:qe.chainId,Ce=_e&&jt[_e]?jt[_e].name.toLowerCase().replace(/[^a-z0-9]+/g,"-"):_e||"";return`${Ce?`/${Ce}`:""}/raffle/${t}`},[a,t]),{refreshTrigger:T,triggerRefresh:j}=khe(),{handleError:_}=n3(),[v,P]=k.useState(null),[D,$]=k.useState(!0),[U,K]=k.useState(null),[Y,G]=k.useState(""),[X,V]=k.useState(!1),[A,x]=k.useState(!1),[C,L]=k.useState(null),[z,R]=k.useState(null),[I,N]=k.useState(!1),[F,E]=k.useState(!1),[M,ee]=k.useState(!1),[O,q]=k.useState(!1),[H,J]=k.useState(!1),[Q,ne]=k.useState(null),[se,ie]=k.useState(0),[pe,le]=k.useState(!1),[me,Ee]=k.useState(!1),[te,Ne]=k.useState(!1),[Pe,et]=k.useState(!1),[Le,Se]=k.useState(!1),[Te,ze]=k.useState(!1),[dt]=k.useState(!1),[oe,ue]=k.useState(null),[ge,be]=k.useState(!1),[ve,Ke]=k.useState(null),[Me,He]=k.useState(!1);k.useEffect(()=>{async function _e(){var qe;if(!n)return;const Ce=Kx(n);if(Ce&&!(!s||!window.ethereum))try{if(((qe=a==null?void 0:a.network)==null?void 0:qe.chainId)!==Ce)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${Ce.toString(16)}`}]})}catch(vt){if((vt==null?void 0:vt.code)===4902&&jt[Ce]){const _t=jt[Ce];await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${Ce.toString(16)}`,chainName:_t.name,rpcUrls:[_t.rpcUrl],blockExplorerUrls:[_t.explorer],nativeCurrency:_t.nativeCurrency||{name:"ETH",symbol:"ETH",decimals:18}}]}),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${Ce.toString(16)}`}]})}}}catch(vt){console.warn("Network switch via URL failed (non-fatal):",vt)}}_e()},[n,s,a]);const ct=k.useMemo(()=>s,[s]),Je=k.useMemo(()=>o,[o]),Ye=k.useMemo(()=>t,[t]),St=k.useRef(null),bt=k.useCallback(async()=>{try{const _e=u(Ye||t,"pool");if(!_e)return;const Ce=await _e.getActualPoolDuration(),qe=Ce!=null&&Ce.toNumber?Ce.toNumber():Number(Ce);qe&&qe>0&&P(vt=>vt&&{...vt,actualDuration:qe})}catch{}},[u,Ye,t]),Ze=(v==null?void 0:v.stateNum)===4||(v==null?void 0:v.stateNum)===6,An=!!v&&!Ze;J$(t,{onWinnersSelected:(_e,Ce)=>{re.success(`Winners have been selected! ${_e.length} winner${_e.length!==1?"s":""} chosen.`),ie(0),ne(null),j(),setTimeout(()=>{j()},5e3)},onStateChange:(_e,Ce)=>{_e!==3&&(ie(0),ne(null)),[2,3,4,5,6,7,8].includes(_e)&&(St.current&&clearTimeout(St.current),St.current=setTimeout(()=>{bt()},600)),j()},onTicketsPurchased:(_e,Ce,qe)=>{_e.toLowerCase()!==(o==null?void 0:o.toLowerCase())&&re.info(`${Ce.toString()} slot${Ce.toString()!=="1"?"s":""} purchased by ${_e.slice(0,6)}...${_e.slice(-4)}`),j()},onRpcError:_e=>{console.warn("RPC error detected:",_e)},enablePolling:!0,pollingInterval:(v==null?void 0:v.stateNum)===3?1e4:15e3,autoStart:An,raffleState:(v==null?void 0:v.stateNum)||null,enableStateConditionalListening:!0,stopOnCompletion:!0});const Dt=k.useCallback(async()=>{var _e,Ce,qe,vt,_t,Yn,us,ds,Hs;$(!0),K(null);try{if(!Ye)throw new Error("No raffle address provided");if(!l||c)throw new Error("Wallet is initializing, please wait...");if(!u)throw new Error("Contract context not ready");const Vr=LN(),yo=ON(),rn=u(Ye,"pool");if(!rn)throw new Error("Failed to create contract instance - no signer/provider available");const Wd=Kx(n)||((_e=a==null?void 0:a.network)==null?void 0:_e.chainId),xr=u((qe=(Ce=jt[Wd])==null?void 0:Ce.contractAddresses)==null?void 0:qe.socialEngagementManager,"socialEngagementManager"),xl=await q0(()=>rn.name(),"name",{timeout:Vr.timeout,retries:Vr.retries,required:!0});if(!xl.success)throw new Error(`Contract connectivity test failed: ${xl.error}`);const tp=[{method:()=>rn.name(),name:"name",required:!0,fallback:"Unknown Pool"},{method:()=>rn.creator(),name:"creator",required:!0,fallback:$e},{method:()=>rn.startTime(),name:"startTime",required:!0,fallback:ce.from(0)},{method:()=>rn.duration(),name:"duration",required:!0,fallback:ce.from(0)},{method:()=>rn.slotFee(),name:"slotFee",required:!0,fallback:ce.from(0)},{method:()=>rn.slotLimit(),name:"slotLimit",required:!0,fallback:ce.from(0)},{method:()=>rn.winnersCount(),name:"winnersCount",required:!0,fallback:ce.from(0)},{method:()=>rn.winnersSelected(),name:"winnersSelected",required:!0,fallback:ce.from(0)},{method:()=>rn.maxSlotsPerAddress(),name:"maxSlotsPerAddress",required:!0,fallback:ce.from(0)},{method:()=>rn.isPrized(),name:"isPrized",required:!0,fallback:!1},{method:()=>rn.prizeCollection(),name:"prizeCollection",required:!0,fallback:$e},{method:()=>rn.prizeTokenId(),name:"prizeTokenId",required:!0,fallback:ce.from(0)},{method:()=>rn.standard(),name:"standard",required:!0,fallback:ce.from(0)},{method:()=>rn.state(),name:"state",required:!0,fallback:ce.from(0)},{method:So(rn,"erc20PrizeToken",$e),name:"erc20PrizeToken",required:!1,fallback:$e},{method:So(rn,"erc20PrizeAmount",ce.from(0)),name:"erc20PrizeAmount",required:!1,fallback:ce.from(0)},{method:So(rn,"nativePrizeAmount",ce.from(0)),name:"nativePrizeAmount",required:!1,fallback:ce.from(0)},{method:So(rn,"usesCustomFee",!1),name:"usesCustomFee",required:!1,fallback:!1},{method:()=>o?rn.hasClaimedFeeRefund(o):!1,name:"hasClaimedFeeRefund",required:!1,fallback:!1},{method:So(rn,"isRefundable",!1),name:"isRefundable",required:!1,fallback:!1},{method:So(rn,"isCollabPool",!1),name:"isCollabPool",required:!1,fallback:!1},{method:So(rn,"isEscrowedPrize",!0),name:"isEscrowedPrize",required:!1,fallback:!0},{method:So(rn,"amountPerWinner",ce.from(1)),name:"amountPerWinner",required:!1,fallback:ce.from(1)},{method:async()=>{try{const nr=await rn.state();if(typeof nr=="number"?nr>=2:nr.toNumber?nr.toNumber()>=2:Number(nr)>=2)return await rn.getActualPoolDuration()}catch{}return ce.from(0)},name:"actualDuration",required:!1,fallback:ce.from(0)},{method:So(rn,"socialEngagementRequired",!1),name:"socialEngagementRequired",required:!1,fallback:!1},{method:So(rn,"holderTokenAddress",$e),name:"holderTokenAddress",required:!1,fallback:$e},{method:So(rn,"holderTokenStandard",0),name:"holderTokenStandard",required:!1,fallback:0},{method:So(rn,"minHolderTokenBalance",0),name:"minHolderTokenBalance",required:!1,fallback:0}],[mu,Dv,np,Mn,oy,ay,rp,ly,gu,sp,Hd,Gd,Ra,xo,Ia,yu,xu,Ma,uS,cy,bl,Ov,bu,vl,uy,Lv,Da,vu]=await ZH(tp,{timeout:Vr.timeout,useSequential:Vr.useSequential,batchSize:Vr.batchSize,delayBetweenCalls:Vr.delayBetweenCalls});let Zo=0;try{Zo=(await rn.getParticipantsCount()).toNumber()}catch{let Qr=0;for(;;)try{await rn.participants(Qr),Zo++,Qr++}catch{break}}let wl=0,dy=gu.toNumber();if(s&&o)try{wl=(await rn.slotsPurchased(o)).toNumber(),dy=Math.max(0,gu.toNumber()-wl)}catch{let Qr=0;for(;Qr<Zo;)try{(await rn.participants(Qr)).toLowerCase()===o.toLowerCase()&&wl++,Qr++}catch{break}dy=Math.max(0,gu.toNumber()-wl)}const dS=!!sp,Kd=[2,3,4,5,6,7,8].includes(xo)&&vl?vl.toNumber?vl.toNumber():Number(vl):void 0,bo={address:t,name:mu,creator:Dv,startTime:np.toNumber(),duration:Mn.toNumber(),actualDuration:Kd,slotFee:oy,slotLimit:ay.toNumber(),slotsSold:Zo,winnersCount:rp.toNumber(),winnersSelected:ly.toNumber(),maxSlotsPerAddress:gu.toNumber(),isPrized:sp,prizeCollection:Hd,prizeTokenId:Gd,standard:Ra,stateNum:xo,state:OM[xo]||"Unknown",erc20PrizeToken:Ia,erc20PrizeAmount:yu,nativePrizeAmount:xu,usesCustomFee:Ma,isEscrowedPrize:Ov,isCollabPool:bl,amountPerWinner:bu?bu.toNumber?bu.toNumber():Number(bu):1,socialEngagementRequired:!!uy,holderTokenAddress:Lv,holderTokenStandard:Da?Da.toNumber?Da.toNumber():Number(Da):0,minHolderTokenBalance:vu};console.log("[VRF Debug] Checking poolToSubscriptionId",{chainSlug:n,providerChainId:(vt=a==null?void 0:a.network)==null?void 0:vt.chainId,resolvedChainId:Kx(n)||((_t=a==null?void 0:a.network)==null?void 0:_t.chainId),raffleAddress:t});let ea=!1;try{const nr=Kx(n)||((Yn=a==null?void 0:a.network)==null?void 0:Yn.chainId),Qr=nr?(ds=(us=jt[nr])==null?void 0:us.contractAddresses)==null?void 0:ds.protocolManager:void 0;if(Qr){const na=u(Qr,"protocolManager");if(console.log("[VRF Debug] Built manager contract?",{hasContract:!!na}),na&&na.getPoolSubscription){const ra=await na.getPoolSubscription(t);ea=ra!=="0",bo.subscriptionId=ra,console.log("[VRF Debug] manager.getPoolSubscription result",{subscriptionId:ra,hasVRFSubscription:ea})}const cc=u(t,"pool");if(cc&&cc.poolSubscriptionId){const ra=await cc.poolSubscriptionId();bo.poolSubscriptionId=ra,console.log("[VRF Debug] pool.poolSubscriptionId result",{poolSubscriptionId:ra})}}}catch{}console.log("[VRF Debug] Setting raffle.isVrfConsumer based on subscription",{hasVRFSubscription:!!ea}),bo.isVrfConsumer=!!ea,P(bo);try{if(!ea&&((Hs=m==null?void 0:m.protocolManager)!=null&&Hs.getPoolSubscription)){console.log("[VRF Debug] Using context manager to check getPoolSubscription",{manager:m.protocolManager.address,raffleAddress:t});const nr=await m.protocolManager.getPoolSubscription(t);ea=nr!=="0",bo.subscriptionId=nr,console.log("[VRF Debug] Context manager getPoolSubscription result",{hasVRFSubscription:ea}),bo.isVrfConsumer=!!ea;const Qr=u(t,"pool");if(Qr&&Qr.poolSubscriptionId){const na=await Qr.poolSubscriptionId();bo.poolSubscriptionId=na,console.log("[VRF Debug] Fallback pool.poolSubscriptionId result",{poolSubscriptionId:na})}}}catch(nr){console.warn("[VRF Debug] Context manager poolToSubscriptionId check failed",nr)}ue(cy),be(bl);let ta=Hd;if(bl)try{ta=await rn.prizeCollection()}catch{}P({...bo,prizeCollection:ta})}catch(Vr){const yo=_(Vr,{context:{operation:"fetchRaffleData",isReadOnly:!0},fallbackMessage:"Failed to load raffle data"});K(yo)}finally{$(!1)}},[Ye,u,ct,Je,l,c,T]),Ot=k.useCallback(async()=>{if(!s||!o||!(v!=null&&v.address)||!u){J(!1);return}try{const _e=u(v.address,"pool");if(!_e){J(!1);return}if(typeof _e.hasCompletedSocialEngagement!="function"){console.warn("hasCompletedSocialEngagement method not found on pool contract"),J(!1);return}const Ce=await _e.hasCompletedSocialEngagement(o);J(!!Ce)}catch(_e){console.error("Error checking social engagement status:",_e),J(!1)}},[s,o,v==null?void 0:v.address,u]);k.useEffect(()=>{v!=null&&v.socialEngagementRequired&&s&&o&&Ot()},[v==null?void 0:v.socialEngagementRequired,s,o,Ot]),k.useEffect(()=>{Ye&&u&&l&&!c&&Dt()},[Dt,Ye,u,l,c,T]),k.useEffect(()=>{(async()=>{if(!v||!v.prizeCollection||v.prizeCollection===$e){L(null);return}try{const qe=await u(v.prizeCollection,v.standard===0?"erc721Prize":"erc1155Prize").name();L(qe)}catch{L(null)}})()},[v,u]),k.useEffect(()=>{(async()=>{if(!v||!v.holderTokenAddress||v.holderTokenAddress===$e){R(null);return}if(v.holderTokenStandard===1){R(null);return}try{let Ce=null;if(v.holderTokenStandard===0){const qe=window.ethereum?new zl(window.ethereum):Ju(),vt=["function name() view returns (string)","function symbol() view returns (string)"],_t=new Mt(v.holderTokenAddress,vt,qe);try{Ce=await _t.symbol()}catch{try{Ce=await _t.name()}catch{Ce=null}}}else if(v.holderTokenStandard===2){const qe=window.ethereum?new zl(window.ethereum):Ju(),vt=["function symbol() view returns (string)","function name() view returns (string)"],_t=new Mt(v.holderTokenAddress,vt,qe);try{Ce=await _t.symbol()}catch{try{Ce=await _t.name()}catch{Ce=null}}}R(Ce)}catch(Ce){console.warn("Failed to fetch gating token name:",Ce),R(null)}})()},[v]);const wn=k.useCallback(_e=>{const Ce=Math.floor(_e/86400),qe=Math.floor(_e%86400/3600),vt=Math.floor(_e%3600/60),_t=_e%60;let Yn="";return Ce>0&&(Yn+=`${Ce}d `),(qe>0||Ce>0)&&(Yn+=`${qe}h `),(vt>0||qe>0||Ce>0)&&(Yn+=`${vt}m `),Yn+=`${_t}s`,Yn.trim()},[]),nn=k.useCallback(_e=>{const Ce=Math.floor(_e/86400),qe=Math.floor(_e%86400/3600),vt=Math.floor(_e%3600/60);let _t="";return Ce>0&&(_t+=`${Ce}d `),(qe>0||Ce>0)&&(_t+=`${qe}h `),(vt>0||qe>0||Ce>0)&&(_t+=`${vt}m`),_t||(_t="0m"),_t.trim()},[]),Xe=k.useCallback(()=>{if(!v)return;const _e=Math.floor(Date.now()/1e3);let Ce="",qe=0;if([2,3,4,5,6,7,8].includes(v.stateNum)){Ce="Duration";const vt=v.actualDuration&&(v.actualDuration.toNumber?v.actualDuration.toNumber():Number(v.actualDuration)),_t=v.duration,Yn=vt&&vt>0?vt>_t?_t:vt:_t;it(Ce),tt(nn(Yn));return}_e<v.startTime?(Ce="Starts In",qe=v.startTime-_e):(Ce="Remaining",qe=v.startTime+v.duration-_e),it(Ce),tt(qe>0?wn(qe):"Ended")},[v,wn,nn]);k.useEffect(()=>{if(!v)return;Xe();const _e=setInterval(Xe,1e3);return()=>clearInterval(_e)},[Xe]),k.useEffect(()=>{async function _e(){if(t&&u)try{const Ce=u(t,"pool");if(Ce){const qe=await Ce.isEscrowedPrize();V(qe)}}catch{V(!1)}}_e()},[t,u]),k.useEffect(()=>{(async()=>{if(!t||!(m!=null&&m.poolDeployer)){Ke(null);return}He(!0);try{const Ce=await Pme(t,m.poolDeployer);Ke(Ce)}catch(Ce){console.error("Error fetching pool metadata:",Ce),Ke(null)}finally{He(!1)}})()},[t,m==null?void 0:m.poolDeployer]),k.useEffect(()=>{(async()=>{if(v&&v.standard===1&&v.prizeCollection&&o&&o.toLowerCase()===v.creator.toLowerCase()){ee(!0);try{const qe=(window.ethereum?new zl(window.ethereum):Ju()).getSigner(),_t=await new Mt(v.prizeCollection,tn.erc1155Prize,qe).isApprovedForAll(o,v.address);E(_t)}catch{E(!1)}finally{ee(!1)}}})()},[v,o]),k.useEffect(()=>{(async()=>{if(v&&v.erc20PrizeToken&&v.erc20PrizeToken!==$e&&v.erc20PrizeAmount&&o&&o.toLowerCase()===v.creator.toLowerCase()){Ne(!0);try{const qe=(window.ethereum?new zl(window.ethereum):Ju()).getSigner(),_t=await new Mt(v.erc20PrizeToken,tn.erc20,qe).allowance(o,v.address);Ee(_t.gte(v.erc20PrizeAmount))}catch{Ee(!1)}finally{Ne(!1)}}})()},[v,o]),k.useEffect(()=>{(async()=>{if(v&&v.standard===0&&v.prizeCollection&&typeof v.prizeTokenId<"u"&&o&&o.toLowerCase()===v.creator.toLowerCase()){ze(!0);try{const qe=(window.ethereum?new zl(window.ethereum):Ju()).getSigner(),vt=new Mt(v.prizeCollection,tn.erc721Prize,qe),_t=await vt.getApproved(v.prizeTokenId);if(_t&&_t.toLowerCase()===v.address.toLowerCase())Se(!0);else{const Yn=await vt.isApprovedForAll(o,v.address);Se(Yn)}}catch{Se(!1)}finally{ze(!1)}}})()},[v,o]);const Ft=async(_e,Ce=[])=>{var yo,rn,Wd;if(console.log(" handlePurchaseTickets START:",{quantity:_e,selectedTokenIds:Ce,selectedTokenIdsType:typeof Ce,selectedTokenIdsLength:Ce==null?void 0:Ce.length,minHolderTokenBalance:(yo=v.minHolderTokenBalance)==null?void 0:yo.toString(),minHolderTokenBalanceFormatted:v.minHolderTokenBalance?Is(v.minHolderTokenBalance,18):"N/A",holderTokenAddress:v.holderTokenAddress,holderTokenStandard:v.holderTokenStandard,userAddress:o}),!s||!v)throw new Error("Wallet not connected or raffle not loaded");const qe=u(v.address,"pool");if(!qe)throw new Error("Failed to get pool contract");const _t=P8(v.slotFee).mul(_e);let Yn=null,us=0,ds="0x";if(v.socialEngagementRequired)try{console.log("Generating signature for social engagement required pool...");const xr=await Txe.generatePurchaseSignature(o,v.address,_e);if(xr.success)Yn=xr.signature,us=xr.deadline,ds=Yn,console.log("Signature generated successfully with deadline:",us);else throw new Error(xr.error||"Failed to generate signature")}catch(xr){throw console.error("Signature generation failed:",xr),H?new Error("Failed to generate signature. Please try again."):new Error("Please complete all social media tasks before purchasing slots")}console.log("Purchase Debug:",{quantity:_e,deadline:us,signatureLength:ds.length,selectedTokenIds:Ce,selectedTokenIdsLength:Ce.length,selectedTokenIdsTypes:Ce.map(xr=>typeof xr),convertedTokenIds:Ce.map(xr=>xr.toString()),numericTokenIds:Ce.map(xr=>Number(xr)),totalCost:_t.toString(),holderTokenStandard:v.holderTokenStandard,holderTokenAddress:v.holderTokenAddress,minHolderTokenBalance:(rn=v.minHolderTokenBalance)==null?void 0:rn.toString(),userAddress:o,validationChecks:{hasTokenIds:Ce.length>0,tokenIdsValid:Ce.every(xr=>!isNaN(Number(xr))),holderAddressValid:v.holderTokenAddress!==$e,userAddressValid:!!o}});const Hs=Ce.map(xr=>{const xl=Number(xr);if(isNaN(xl)||xl<0)throw new Error(`Invalid token ID: ${xr}`);return xl});console.log("Final Contract Call Args:",{numericTokenIds:Hs,numericTokenIdsLength:Hs.length,expectedMinBalance:(Wd=v.minHolderTokenBalance)==null?void 0:Wd.toString(),contractAddress:v.address}),await(await qe.purchaseSlots(_e,us,ds,Hs,{value:_t})).wait(),re.success(`Successfully purchased ${_e} slot${_e>1?"s":""}!`),j()},yt=async()=>{if(!(!v||!u)){N(!0);try{const _e=u(v.address,"pool");if(!_e)throw new Error("Contract instance not available");try{await _e.callStatic.deletePool()}catch(qe){throw gn(qe,{action:"deletePool",phase:"preflight"}),qe}await(await _e.deletePool()).wait(),re.success("Raffle deleted successfully!"),r("/")}catch(_e){ih(_e,"delete raffle"),oh(_e,"Delete Raffle"),gn(_e)}finally{N(!1)}}},Ge=()=>{const _e=Math.floor(Date.now()/1e3),Ce=v.startTime+v.duration;return s&&(o==null?void 0:o.toLowerCase())===(v==null?void 0:v.creator.toLowerCase())&&((v==null?void 0:v.state)==="Pending"||(v==null?void 0:v.state)==="Active")&&_e<Ce&&(v==null?void 0:v.usesCustomFee)===!0},rt=()=>{var Yn;if(!v)return null;const _e=Math.floor(Date.now()/1e3),vt=((Yn=v.state)==null?void 0:Yn.toLowerCase())==="pending"&&v.startTime&&_e>=v.startTime&&v.slotsSold===0?"Live":(us=>us===6?Ws===1?"Prize Claimed":"Prizes Claimed":OM[us]||"Unknown")(v.stateNum),_t={Pending:"bg-yellow-100 text-yellow-800",Live:"bg-blue-100 text-blue-800",Active:"bg-green-100 text-green-800",Ended:"bg-red-100 text-red-800",Drawing:"bg-purple-100 text-purple-800",Completed:"bg-blue-100 text-blue-800",Deleted:"bg-gray-200 text-gray-800","Activation Failed":"bg-red-200 text-red-900","Prizes Claimed":"bg-blue-200 text-blue-900","Prize Claimed":"bg-blue-200 text-blue-900",Unengaged:"bg-gray-100 text-gray-800",Unknown:"bg-gray-100 text-gray-800"};return i.jsx("span",{className:`inline-flex max-w-[60vw] items-center px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs sm:text-sm font-medium whitespace-nowrap ${_t[vt]||_t.Unknown}`,children:vt})},st=Math.floor(Date.now()/1e3);v&&v.startTime&&st>=v.startTime;const[Re,it]=k.useState(""),[Ue,tt]=k.useState(""),[Cn,at]=k.useState(!1),[Rt,On]=k.useState(!1),[zt,Et]=k.useState(!1),[Yt,Jt]=k.useState(!1),[Lt,Kn]=k.useState(!1),[Fn,Sn]=k.useState(null),[Tn,Pn]=k.useState(null),[Ws,Oi]=k.useState(0);k.useEffect(()=>{(async()=>{if(!v||!o||![3,4,6].includes(v.stateNum)){Et(!1),Pn(null);return}try{const Ce=u&&u(v.address,"pool");if(!Ce)return;const qe=await Ce.winnersCount(),vt=qe.toNumber?qe.toNumber():Number(qe);let _t=!1,Yn=null;for(let us=0;us<vt;us++)try{const ds=await Ce.winners(us);if(ds.toLowerCase()===o.toLowerCase()){const Hs=await Ce.claimedWins(ds),Vr=await Ce.prizeClaimed(ds),yo=Vr.toNumber?Vr.toNumber():Number(Vr);_t=!0,Yn={address:ds,index:us,claimedWins:Hs.toNumber?Hs.toNumber():Number(Hs),prizeClaimed:yo>0};break}}catch{continue}Et(_t),Pn(Yn)}catch{Et(!1),Pn(null)}})()},[v,u,o]),k.useEffect(()=>{(async()=>{if(!v||!o||![4,5,6,7].includes(v.stateNum)){Jt(!1),Sn(null);return}try{const Ce=u&&u(v.address,"pool");if(!Ce)return;try{const qe=await Ce.getRefundableAmount(o);console.log("Debug - Refund info:",{address:o,stateNum:v.stateNum,usesCustomFee:v.usesCustomFee,refundableAmount:qe==null?void 0:qe.toString(),refundableGt:qe&&qe.gt&&qe.gt(0)}),Sn(qe),Jt(qe&&qe.gt&&qe.gt(0))}catch(qe){console.log("Debug - getRefundableAmount error:",qe),Sn(null),Jt(!1)}}catch{Jt(!1),Sn(null)}})()},[v,u,o]);const Xt=k.useCallback(_e=>{P(Ce=>Ce&&{...Ce,winnersSelected:_e})},[]);k.useEffect(()=>{v&&(v.stateNum===3?Q||(ne(Date.now()),console.log(" Raffle entered Drawing state - starting auto-refresh monitoring")):Q&&(ne(null),ie(0),console.log(" Raffle left Drawing state - stopping auto-refresh monitoring")))},[v==null?void 0:v.stateNum,Q]),k.useEffect(()=>{if(!Q||(v==null?void 0:v.stateNum)!==3)return;console.log(" Drawing state active - visual indicator enabled");const _e=setInterval(async()=>{le(!0),ie(Ce=>Ce+1),console.log(` Drawing state monitoring active (${se+1})`);try{const Ce=u&&u(v.address,"pool");if(Ce){const qe=await Ce.state(),vt=qe.toNumber?qe.toNumber():Number(qe);vt!==3&&(console.log(` State changed from Drawing to ${vt}, triggering refresh`),j())}}catch(Ce){console.warn("State polling error:",Ce)}setTimeout(()=>{le(!1)},3e3)},15e3);return()=>{console.log(" Drawing state monitoring stopped"),clearInterval(_e)}},[Q,v==null?void 0:v.stateNum,v==null?void 0:v.address,se,u,j]);const zn=!!Tn&&((v==null?void 0:v.isPrized)&&((v==null?void 0:v.stateNum)===4||(v==null?void 0:v.stateNum)===6)||(v==null?void 0:v.isPrized)===!1&&(ge===!0||(v==null?void 0:v.isCollabPool)===!0)&&(v==null?void 0:v.stateNum)===4),Nr=Tn&&Tn.prizeClaimed,Li=(!(v!=null&&v.usesCustomFee)||(v==null?void 0:v.isPrized)||(v==null?void 0:v.isCollabPool))&&[4,5,6,7].includes(v==null?void 0:v.stateNum)&&Yt&&Fn&&Fn.gt&&Fn.gt(0),ui=async()=>{if(!o||!v||!u){re.error("Please connect your wallet to claim your prize");return}if(!zt||!Tn){re.error("You are not a winner of this raffle");return}if(Tn.prizeClaimed){re.error("You have already claimed your prize");return}at(!0);try{const _e=u(v.address,"pool");if(!_e)throw new Error("Failed to get pool contract");const Ce=v.isPrized&&!v.isEscrowedPrize,qe=Ce?"mint":"claimPrize";try{Ce?await _e.callStatic.mint():await _e.callStatic.claimPrize()}catch(_t){throw gn(_t,{action:qe,phase:"preflight"}),_t}const vt=await f(Ce?_e.mint:_e.claimPrize);if(vt.success){let _t="prize";v.nativePrizeAmount&&v.nativePrizeAmount.gt&&v.nativePrizeAmount.gt(0)?_t=w(v.nativePrizeAmount):v.erc20PrizeToken&&v.erc20PrizeToken!==$e&&v.erc20PrizeAmount&&v.erc20PrizeAmount.gt&&v.erc20PrizeAmount.gt(0)?_t=`${Is(v.erc20PrizeAmount,18)} ERC20 tokens`:v.prizeCollection&&v.prizeCollection!==$e&&(_t=v.standard===0?"ERC721 NFT":"ERC1155 NFT");const Yn=Ce?"minted":"claimed";re.success(`Successfully ${Yn} your ${_t}!`),window.location.reload()}else throw new Error(vt.error)}catch(_e){oh(_e,"claim prize",{raffleAddress:v.address,userAddress:o,prizeType:v.standard,isMintable:v.isPrized&&!v.isEscrowedPrize}),gn(_e,{action:v.isPrized&&!v.isEscrowedPrize?"mint":"claimPrize"})}finally{at(!1)}},di=async()=>{if(!o||!v||!u){re.error("Please connect your wallet to claim your refund");return}On(!0);try{const _e=u(v.address,"pool");if(!_e)throw new Error("Failed to get pool contract");try{await _e.callStatic.claimRefund()}catch(qe){throw gn(qe,{action:"claimRefund",phase:"preflight"}),qe}const Ce=await f(_e.claimRefund);if(Ce.success)re.success("Successfully claimed your refund!"),j();else throw new Error(Ce.error)}catch(_e){ih(_e,"claim refund"),oh(_e,"Claim Refund"),gn(_e)}finally{On(!1)}};if(D||c)return i.jsx(ql,{className:"max-w-[85rem]",children:i.jsx(X$,{message:c?"Reconnecting wallet...":"Loading raffle details...",isMobile:g})});if(U&&!D&&!c){const _e=U.toLowerCase().includes("wallet")||U.toLowerCase().includes("signer")||U.toLowerCase().includes("initializing");return i.jsx(ql,{variant:"wide",className:"max-w-[85rem] pt-8 pb-4",children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx(Kt,{className:"h-16 w-16 text-destructive mx-auto mb-4"}),i.jsx("h2",{className:"font-display text-[length:var(--text-3xl)] font-bold mb-4 leading-tight",children:_e?"Wallet Connection Issue":"Failed to Load Raffle"}),i.jsx("p",{className:"text-muted-foreground mb-4 max-w-md mx-auto",children:_e?"Please ensure your wallet is connected and try again.":U}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx(we,{onClick:Dt,variant:"primary",size:"md",children:"Try Again"}),i.jsx(we,{onClick:()=>r("/"),variant:"secondary",size:"md",children:"Back to Home"})]})]})})}if(!v)return i.jsx(ql,{variant:"wide",className:"max-w-[85rem] pt-8 pb-4",children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx(Kt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"font-display text-[length:var(--text-3xl)] font-bold mb-4 leading-tight",children:"Raffle Not Found"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"The raffle you're looking for doesn't exist or has been removed."}),i.jsx(we,{onClick:()=>r("/"),variant:"primary",size:"md",children:"Back to Home"})]})});const tr=v&&v.prizeCollection&&v.prizeCollection!==$e&&v.standard===0&&v.isCollabPool===!0;return i.jsxs(ql,{variant:"wide",className:"max-w-[85rem] pt-8 pb-4",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs(we,{onClick:()=>r("/app"),variant:"tertiary",size:"md",className:"flex items-center gap-2 mb-4",children:[i.jsx(J6,{className:"h-4 w-4"}),"Back to Raffles"]}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h1",{className:"font-display text-[length:var(--text-3xl)] font-bold mb-2 leading-tight",children:v.name}),i.jsx(we,{onClick:()=>{const _e=`${window.location.origin}${y()}`;navigator.clipboard.writeText(_e).then(()=>{re.success("Share link copied to clipboard")}).catch(()=>{re.error("Failed to copy link")})},title:"Copy share link",variant:"tertiary",size:"icon",className:"ml-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:i.jsx("path",{d:"M3.9 12a5 5 0 0 1 5-5h2v2h-2a3 3 0 0 0 0 6h2v2h-2a5 5 0 0 1-5-5zm7-1h2v2h-2v-2zm4.1-4a5 5 0 0 1 0 10h-2v-2h2a3 3 0 0 0 0-6h-2V7h2z"})})})]}),ve&&Rme(ve)&&i.jsx("div",{className:"mt-3",children:i.jsx(mxe,{metadata:ve,loading:Me})})]}),i.jsxs("div",{className:"flex flex-col items-start sm:flex-row sm:items-center sm:gap-3 gap-2 w-full sm:w-auto",children:[i.jsx("div",{className:"self-start sm:self-auto",children:rt()}),(pe||(v==null?void 0:v.stateNum)===3&&Q)&&i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[i.jsx("div",{className:"animate-spin h-3 w-3 border border-blue-500 border-t-transparent rounded-full"}),g?"Checking for winners...":"Checking for winner selection..."]}),Ge()&&i.jsxs(we,{onClick:yt,variant:"primary",size:"md",className:"flex items-center gap-2 text-sm font-medium",title:v.slotsSold>0?"Delete pool (refunds will be processed automatically)":"Delete this pool",disabled:I,children:[i.jsx(Uh,{className:"h-4 w-4"}),I?"Deleting...":"Delete Pool"]})]})]}),Ge()&&v.slotsSold>0&&i.jsx("div",{className:"mt-4 p-4 bg-blue-50/80 dark:bg-blue-900/20 backdrop-blur-sm border border-blue-200/50 dark:border-blue-700/50 rounded-lg",children:i.jsxs("p",{className:"text-sm text-blue-800",children:[" As the pool creator, you can delete this pool. Deletion will automatically process refunds for all ",v.slotsSold," sold slots."]})})]}),i.jsx("div",{className:"detail-beige-card mb-8 p-4 bg-card/80 text-foreground backdrop-blur-sm border border-border rounded-xl shadow-lg",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3 text-center items-center text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-body text-[length:var(--text-base)] font-medium mb-1",children:v.slotsSold}),i.jsx("p",{className:"text-xs text-foreground/70 dark:text-foreground/80",children:"Slots Sold"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-body text-[length:var(--text-base)] font-medium mb-1",children:v.slotLimit}),i.jsx("p",{className:"text-xs text-foreground/70 dark:text-foreground/80",children:"Total Slots"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-body text-[length:var(--text-base)] font-medium mb-1",children:v.winnersCount}),i.jsxs("p",{className:"text-xs text-foreground/70 dark:text-foreground/80",children:["Winner Slot",v.winnersCount!==1?"s":""]})]}),i.jsxs("div",{children:[i.jsx("p",{className:`font-medium mb-1 ${g?"text-base":"text-lg"}`,children:Ue}),i.jsx("p",{className:"text-xs text-foreground/70 dark:text-foreground/80",children:Re})]}),i.jsx("div",{className:"flex justify-center lg:justify-end items-center h-full w-full",children:(oe||!(v!=null&&v.usesCustomFee))&&v&&(()=>{const{refundable:_e,reason:Ce,label:qe}=Rxe(v);return i.jsxs("span",{className:`px-3 py-1 rounded-full font-semibold ${_e?"bg-green-100 text-green-800":"bg-gray-200 text-gray-800"} text-xs`,title:Ce,style:{whiteSpace:"nowrap"},children:[qe,i.jsx(lt,{className:"inline-block ml-1 h-4 w-4 text-gray-400 align-middle",title:Ce})]})})()})]})}),Nxe(v)?i.jsx(Cxe,{raffle:v,collectionName:C,isMobile:g,prizeImageCard:i.jsx(jxe,{raffle:v,isMintableERC721:tr,isEscrowedPrize:X,variant:"hero",showFrame:!0,collectionName:C}),ticketPurchaseSection:i.jsx(LM,{raffle:v,onPurchase:Ft,timeRemaining:Y,winners:[],shouldShowClaimPrize:zn,prizeAlreadyClaimed:Nr,claimingPrize:Cn,handleClaimPrize:ui,shouldShowClaimRefund:Li,claimingRefund:Rt,handleClaimRefund:di,refundableAmount:Fn,isMintableERC721:tr,isEscrowedPrize:X,isCollabPool:ge,isPrized:v.isPrized,isMobile:g,onStateChange:j,socialEngagementRequired:v==null?void 0:v.socialEngagementRequired,hasCompletedSocialEngagement:H}),winnersSection:i.jsx(hN,{raffle:v,isMintableERC721:tr,isEscrowedPrize:X,isMobile:g,onWinnerCountChange:Oi,onWinnersSelectedChange:Xt}),raffleDetailsCard:i.jsx(MM,{raffle:v,isEscrowedPrize:X,raffleCollectionName:C,gatingTokenName:z,isMobile:g,variant:"tab"}),poolActivitySection:i.jsx(DM,{raffle:v,variant:"nft"}),socialVerification:v!=null&&v.socialEngagementRequired?i.jsx(_M,{raffle:v,userAddress:o,socialEngagementRequired:v.socialEngagementRequired,hasCompletedSocialEngagement:H,onVerificationComplete:()=>j()}):null}):i.jsx(Sxe,{raffle:v,isMobile:g,ticketPurchaseSection:i.jsx(LM,{raffle:v,onPurchase:Ft,timeRemaining:Y,winners:[],shouldShowClaimPrize:zn,prizeAlreadyClaimed:Nr,claimingPrize:Cn,handleClaimPrize:ui,shouldShowClaimRefund:Li,claimingRefund:Rt,handleClaimRefund:di,refundableAmount:Fn,isMintableERC721:tr,isEscrowedPrize:X,isCollabPool:ge,isPrized:v.isPrized,isMobile:g,onStateChange:j,socialEngagementRequired:v==null?void 0:v.socialEngagementRequired,hasCompletedSocialEngagement:H}),winnersSection:i.jsx(hN,{raffle:v,isMintableERC721:tr,isEscrowedPrize:X,isMobile:g,onWinnerCountChange:Oi,onWinnersSelectedChange:Xt}),raffleDetailsCard:i.jsx(MM,{raffle:v,isEscrowedPrize:X,raffleCollectionName:C,gatingTokenName:z,isMobile:g,variant:"tab"}),poolActivitySection:i.jsx(DM,{raffle:v,variant:"standard"}),prizeImageCard:v.prizeCollection&&v.prizeCollection!==$e?i.jsx(Pxe,{raffle:v,isMintableERC721:tr,isEscrowedPrize:X}):null,socialVerification:v!=null&&v.socialEngagementRequired?i.jsx(_M,{raffle:v,userAddress:o,socialEngagementRequired:v.socialEngagementRequired,hasCompletedSocialEngagement:H,onVerificationComplete:()=>j()}):null})]})};function uT(){const[t]=I9(),e=mo(),[n,r]=k.useState("processing"),[s,o]=k.useState("Processing authentication...");k.useEffect(()=>{a()},[]);const a=async()=>{try{const l=t.get("code"),c=t.get("state"),u=t.get("error"),f=t.get("error_description");if(u){r("error"),o(`Authentication failed: ${f||u}`),ni.error(`Authentication failed: ${f||u}`),setTimeout(()=>{window.close(),e("/")},3e3);return}if(!l||!c){r("error"),o("Missing authorization code or state parameter"),ni.error("Invalid callback parameters"),setTimeout(()=>{window.close(),e("/")},3e3);return}let p;try{p=JSON.parse(atob(c))}catch{r("error"),o("Invalid state parameter"),ni.error("Invalid authentication state"),setTimeout(()=>{window.close(),e("/")},3e3);return}const{wallet_address:m}=p;if(!m){r("error"),o("Missing wallet address in state"),ni.error("Invalid authentication state"),setTimeout(()=>{window.close(),e("/")},3e3);return}const g=window.location.pathname;let w="twitter";g.includes("/discord")?w="discord":g.includes("/telegram")&&(w="telegram"),o(`Completing ${w} authentication...`);let y;switch(w){case"twitter":y=await io.handleTwitterCallback(l,c,m);break;case"discord":y=await io.handleDiscordCallback(l,c,m);break;default:throw new Error(`Unsupported platform: ${w}`)}y.success?(r("success"),o(`${w.charAt(0).toUpperCase()+w.slice(1)} account connected successfully!`),ni.success(`${w.charAt(0).toUpperCase()+w.slice(1)} account connected!`),localStorage.setItem("oauth_success",JSON.stringify({platform:w,timestamp:Date.now()})),setTimeout(()=>{window.close()},2e3)):(r("error"),o(y.error||"Authentication failed"),ni.error(y.error||"Authentication failed"),setTimeout(()=>{window.close(),e("/")},3e3))}catch(l){console.error("Callback error:",l),r("error"),o(l.message||"An unexpected error occurred"),ni.error("Authentication failed"),setTimeout(()=>{window.close(),e("/")},3e3)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8",children:i.jsxs("div",{className:"text-center",children:[n==="processing"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing..."}),i.jsx("p",{className:"text-gray-600",children:s})]}),n==="success"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-green-600 mb-4",children:i.jsx("svg",{className:"h-16 w-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Success!"}),i.jsx("p",{className:"text-gray-600",children:s}),i.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"This window will close automatically..."})]}),n==="error"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-red-600 mb-4",children:i.jsx("svg",{className:"h-16 w-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),i.jsx("p",{className:"text-gray-600",children:s}),i.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"This window will close automatically..."})]})]})})})}function Ixe(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var aS="ScrollArea",[I8,C0e]=Mi(aS),[Mxe,Qo]=I8(aS),M8=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...a}=t,[l,c]=k.useState(null),[u,f]=k.useState(null),[p,m]=k.useState(null),[g,w]=k.useState(null),[y,T]=k.useState(null),[j,_]=k.useState(0),[v,P]=k.useState(0),[D,$]=k.useState(!1),[U,K]=k.useState(!1),Y=un(e,X=>c(X)),G=Vh(s);return i.jsx(Mxe,{scope:n,type:r,dir:G,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:f,content:p,onContentChange:m,scrollbarX:g,onScrollbarXChange:w,scrollbarXEnabled:D,onScrollbarXEnabledChange:$,scrollbarY:y,onScrollbarYChange:T,scrollbarYEnabled:U,onScrollbarYEnabledChange:K,onCornerWidthChange:_,onCornerHeightChange:P,children:i.jsx(Pt.div,{dir:G,...a,ref:Y,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":v+"px",...t.style}})})});M8.displayName=aS;var D8="ScrollAreaViewport",O8=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=t,a=Qo(D8,n),l=k.useRef(null),c=un(e,l,a.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(Pt.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});O8.displayName=D8;var yl="ScrollAreaScrollbar",L8=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Qo(yl,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,l=t.orientation==="horizontal";return k.useEffect(()=>(l?o(!0):a(!0),()=>{l?o(!1):a(!1)}),[l,o,a]),s.type==="hover"?i.jsx(Dxe,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(Oxe,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(F8,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(lS,{...r,ref:e}):null});L8.displayName=yl;var Dxe=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Qo(yl,t.__scopeScrollArea),[o,a]=k.useState(!1);return k.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Vs,{present:n||o,children:i.jsx(F8,{"data-state":o?"visible":"hidden",...r,ref:e})})}),Oxe=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Qo(yl,t.__scopeScrollArea),o=t.orientation==="horizontal",a=Mv(()=>c("SCROLL_END"),100),[l,c]=Ixe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return k.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),k.useEffect(()=>{const u=s.viewport,f=o?"scrollLeft":"scrollTop";if(u){let p=u[f];const m=()=>{const g=u[f];p!==g&&(c("SCROLL"),a()),p=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,o,c,a]),i.jsx(Vs,{present:n||l!=="hidden",children:i.jsx(lS,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:nt(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:nt(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),F8=k.forwardRef((t,e)=>{const n=Qo(yl,t.__scopeScrollArea),{forceMount:r,...s}=t,[o,a]=k.useState(!1),l=t.orientation==="horizontal",c=Mv(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:f)}},10);return Dh(n.viewport,c),Dh(n.content,c),i.jsx(Vs,{present:r||o,children:i.jsx(lS,{"data-state":o?"visible":"hidden",...s,ref:e})})}),lS=k.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Qo(yl,t.__scopeScrollArea),o=k.useRef(null),a=k.useRef(0),[l,c]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=V8(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:m=>a.current=m};function p(m,g){return Uxe(m,a.current,l,g)}return n==="horizontal"?i.jsx(Lxe,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollLeft,g=zM(m,l,s.dir);o.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=p(m,s.dir))}}):n==="vertical"?i.jsx(Fxe,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollTop,g=zM(m,l);o.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=p(m))}}):null}),Lxe=k.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=Qo(yl,t.__scopeScrollArea),[a,l]=k.useState(),c=k.useRef(null),u=un(e,c,o.onScrollbarXChange);return k.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx($8,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Iv(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(o.viewport){const m=o.viewport.scrollLeft+f.deltaX;t.onWheelScroll(m),W8(m,p)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Sb(a.paddingLeft),paddingEnd:Sb(a.paddingRight)}})}})}),Fxe=k.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=Qo(yl,t.__scopeScrollArea),[a,l]=k.useState(),c=k.useRef(null),u=un(e,c,o.onScrollbarYChange);return k.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx($8,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Iv(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(o.viewport){const m=o.viewport.scrollTop+f.deltaY;t.onWheelScroll(m),W8(m,p)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Sb(a.paddingTop),paddingEnd:Sb(a.paddingBottom)}})}})}),[zxe,z8]=I8(yl),$8=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:p,...m}=t,g=Qo(yl,n),[w,y]=k.useState(null),T=un(e,Y=>y(Y)),j=k.useRef(null),_=k.useRef(""),v=g.viewport,P=r.content-r.viewport,D=ys(f),$=ys(c),U=Mv(p,10);function K(Y){if(j.current){const G=Y.clientX-j.current.left,X=Y.clientY-j.current.top;u({x:G,y:X})}}return k.useEffect(()=>{const Y=G=>{const X=G.target;(w==null?void 0:w.contains(X))&&D(G,P)};return document.addEventListener("wheel",Y,{passive:!1}),()=>document.removeEventListener("wheel",Y,{passive:!1})},[v,w,P,D]),k.useEffect($,[r,$]),Dh(w,U),Dh(g.content,U),i.jsx(zxe,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:ys(o),onThumbPointerUp:ys(a),onThumbPositionChange:$,onThumbPointerDown:ys(l),children:i.jsx(Pt.div,{...m,ref:T,style:{position:"absolute",...m.style},onPointerDown:nt(t.onPointerDown,Y=>{Y.button===0&&(Y.target.setPointerCapture(Y.pointerId),j.current=w.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),K(Y))}),onPointerMove:nt(t.onPointerMove,K),onPointerUp:nt(t.onPointerUp,Y=>{const G=Y.target;G.hasPointerCapture(Y.pointerId)&&G.releasePointerCapture(Y.pointerId),document.body.style.webkitUserSelect=_.current,g.viewport&&(g.viewport.style.scrollBehavior=""),j.current=null})})})}),Cb="ScrollAreaThumb",B8=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=z8(Cb,t.__scopeScrollArea);return i.jsx(Vs,{present:n||s.hasThumb,children:i.jsx($xe,{ref:e,...r})})}),$xe=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,o=Qo(Cb,n),a=z8(Cb,n),{onThumbPositionChange:l}=a,c=un(e,p=>a.onThumbChange(p)),u=k.useRef(void 0),f=Mv(()=>{u.current&&(u.current(),u.current=void 0)},100);return k.useEffect(()=>{const p=o.viewport;if(p){const m=()=>{if(f(),!u.current){const g=Vxe(p,l);u.current=g,l()}};return l(),p.addEventListener("scroll",m),()=>p.removeEventListener("scroll",m)}},[o.viewport,f,l]),i.jsx(Pt.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:nt(t.onPointerDownCapture,p=>{const g=p.target.getBoundingClientRect(),w=p.clientX-g.left,y=p.clientY-g.top;a.onThumbPointerDown({x:w,y})}),onPointerUp:nt(t.onPointerUp,a.onThumbPointerUp)})});B8.displayName=Cb;var cS="ScrollAreaCorner",U8=k.forwardRef((t,e)=>{const n=Qo(cS,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Bxe,{...t,ref:e}):null});U8.displayName=cS;var Bxe=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Qo(cS,n),[o,a]=k.useState(0),[l,c]=k.useState(0),u=!!(o&&l);return Dh(s.scrollbarX,()=>{var p;const f=((p=s.scrollbarX)==null?void 0:p.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),Dh(s.scrollbarY,()=>{var p;const f=((p=s.scrollbarY)==null?void 0:p.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),u?i.jsx(Pt.div,{...r,ref:e,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Sb(t){return t?parseInt(t,10):0}function V8(t,e){const n=t/e;return isNaN(n)?0:n}function Iv(t){const e=V8(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Uxe(t,e,n,r="ltr"){const s=Iv(n),o=s/2,a=e||o,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,p=r==="ltr"?[0,f]:[f*-1,0];return q8([c,u],p)(t)}function zM(t,e,n="ltr"){const r=Iv(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,a=e.content-e.viewport,l=o-r,c=n==="ltr"?[0,a]:[a*-1,0],u=WT(t,c);return q8([0,a],[0,l])(u)}function q8(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function W8(t,e){return t>0&&t<e}var Vxe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const o={left:t.scrollLeft,top:t.scrollTop},a=n.left!==o.left,l=n.top!==o.top;(a||l)&&e(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Mv(t,e){const n=ys(t),r=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),k.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Dh(t,e){const n=ys(e);as(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var qxe=M8,Wxe=O8,Hxe=U8;function Gxe({className:t,children:e,...n}){return i.jsxs(qxe,{"data-slot":"scroll-area",className:je("relative",t),...n,children:[i.jsx(Wxe,{"data-slot":"scroll-area-viewport",className:"size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus:outline-none focus:ring-0 focus-visible:ring-0",children:e}),i.jsx(Kxe,{}),i.jsx(Hxe,{})]})}function Kxe({className:t,orientation:e="vertical",...n}){return i.jsx(L8,{"data-slot":"scroll-area-scrollbar",orientation:e,className:je("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:i.jsx(B8,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var Yxe="Separator",$M="horizontal",Jxe=["horizontal","vertical"],H8=k.forwardRef((t,e)=>{const{decorative:n,orientation:r=$M,...s}=t,o=Xxe(r)?r:$M,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(Pt.div,{"data-orientation":o,...l,...s,ref:e})});H8.displayName=Yxe;function Xxe(t){return Jxe.includes(t)}var Qxe=H8;function Zxe({className:t,orientation:e="horizontal",decorative:n=!0,...r}){return i.jsx(Qxe,{"data-slot":"separator-root",decorative:n,orientation:e,className:je("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}const pN={sections:[{id:"executive-summary",title:"Executive Summary",icon:"BookOpen",subsections:[{id:"overview",title:"Executive Summary",content:[{type:"text",content:"Dropr.fun represents a paradigm shift in how NFT drops, whitelist raffles, and token distributions are conducted in the Web3 ecosystem. By addressing the four critical problems that have plagued digital asset distributionbot-driven supply manipulation, opaque allocation processes, unreliable prize delivery, and automated system exploitationthe protocol establishes a new standard for fairness, transparency, and community engagement."},{type:"text",content:"At its core, Dropr.fun is an EVM-based smart contract system that leverages cryptographic randomness, multi-layered bot protection, social media verification, and token-based access control to create a provably fair environment where genuine community members are rewarded and malicious actors are economically deterred. The protocol's sophisticated architecture combines nine specialized smart contracts working in concert to deliver gas-efficient, secure, and scalable NFT distribution mechanisms across multiple blockchain networks."},{type:"text",content:"The protocol's innovation extends beyond basic raffle functionality. Through its dual reward system, Dropr.fun incentivizes both quality pool creation and participant loyalty, creating a flywheel effect that drives ecosystem growth. Its support for customized NFT collections through a standardized interface enables seamless integration with several projects, while its KOL partnership framework facilitates controlled collaborations between influencers and collection owners. With gas optimizations achieving significant savings in interaction costs and comprehensive security measures including reentrancy protection, access controls, and emergency mechanisms, Dropr.fun delivers production-ready infrastructure for the next generation of fair NFT distribution."}]}]},{id:"introduction",title:"Introduction & Core Innovation",icon:"Zap",subsections:[{id:"web3-crisis",title:"The Web3 Distribution Crisis",content:[{type:"text",content:"The NFT and token distribution landscape has been fundamentally broken for some time. Projects launching new collections or conducting giveaways face an adversarial environment where sophisticated bot operators, sybil attackers, and opportunistic actors systematically exploit every available mechanism to gain unfair advantages. This exploitation manifests in several critical ways that undermine the entire ecosystem."},{type:"text",content:"Bot-driven supply grabs have become the norm rather than the exception. Automated systems deploy bundler contracts that coordinate purchases across hundreds of wallets in milliseconds, securing disproportionate allocations before legitimate community members can even submit transactions. These bots then immediately dump their acquisitions on secondary markets, creating downward price pressure and destroying the perceived value of the collection. The result is a demoralized community, poor marketplace performance, and lasting reputation damage for projects."},{type:"text",content:"Whitelist allocation processes, meant to reward early supporters and genuine community members, have devolved into opaque systems vulnerable to favoritism and manipulation. Projects struggle to verify authentic engagement, leading to allocations that often benefit insiders and bot operators rather than community members. The lack of transparency in selection criteria and the inability to prove fairness creates justified skepticism among community members."},{type:"text",content:"Prize distributions and token airdrops face similar challenges. Giveaways that promise NFTs or tokens to winners frequently fail to deliver, either through technical failures, malicious intent, or simple incompetence. When prizes are distributed, they often go to fake accounts and bot-controlled wallets rather than real community members. The absence of cryptographic proof for winner selection allows projects to manipulate outcomes, while the lack of automated enforcement mechanisms means promised rewards may never materialize."}]},{id:"foundational-innovation",title:"Dropr.fun's Foundational Innovation",content:[{type:"text",content:"Dropr.fun addresses these systemic failures through a comprehensive protocol that reimagines every aspect of NFT and reward distribution. The protocol's architecture is built on four foundational pillars that work synergistically to create an environment where fairness is not just promised but cryptographically guaranteed."},{type:"text",content:"The first pillar is provably fair randomness through Chainlink VRF v2 Plus integration. Unlike traditional systems that rely on block hashes or pseudo-random number generationboth of which can be manipulated by miners or predicted by sophisticated actorsDropr.fun leverages Chainlink's decentralized oracle network to generate verifiable random numbers that are cryptographically secure and publicly auditable. This ensures that winner selection is truly random and cannot be influenced by any party, including the protocol operators, pool creators, or participants."},{type:"text",content:"The second pillar is multi-layered bot protection that makes automated exploitation economically unviable. The protocol implements transaction origin checks that prevent bundler contracts from coordinating purchases across multiple wallets, participation limits that ensure fair distribution even in the presence of whale actors, and creator restrictions that eliminate conflicts of interest. These protections work in concert to create an environment where genuine users have equal opportunity to participate and win."},{type:"text",content:"The third pillar is social media engagement verification that rewards authentic community participation. Through a hybrid on-chain and off-chain system, Dropr.fun enables projects to require completion of social media tasksfollowing accounts, retweeting content, joining Discord serversbefore allowing participation. The verification process uses cryptographic signatures to prove task completion without storing personal data on-chain, creating a privacy-preserving mechanism that incentivizes genuine engagement while deterring bot-operated accounts."},{type:"text",content:"The fourth pillar is token gating with advanced anti-exploitation features. Projects can restrict pool participation to holders of specific tokens, creating exclusive experiences for their communities. The protocol's innovative token ID binding system prevents NFTs from being shared across multiple wallets, while re-verification at prize claim time ensures winners maintain their token holdings throughout the entire process. This eliminates flash loan attacks, temporary holder exploitation, and token sharing schemes."}]},{id:"architectural-sophistication",title:"Architectural Sophistication",content:[{type:"text",content:"The protocol's technical architecture reflects a deep understanding of smart contract design principles and gas optimization strategies. At the highest level, Dropr.fun consists of nine specialized contracts, each with a single, well-defined responsibility that contributes to the overall system functionality."},{type:"text",content:"The ProtocolManager serves as the central registry and coordination hub. It maintains protocol-wide configuration parameters, manages multiple Chainlink VRF subscriptions to handle high pool creation volume, tracks all deployed pools and their creators, and coordinates access control across the entire system. The manager's multi-subscription architecture is particularly innovativerecognizing that each VRF subscription supports a maximum of 100 consumers, the protocol automatically distributes new pools across multiple subscriptions to ensure unlimited scalability."},{type:"text",content:"The PoolDeployer acts as a factory for creating new pool instances. Rather than deploying full contract bytecode for each poolwhich would cost millions of gasthe deployer uses the EIP-1167 minimal proxy pattern to create lightweight clones that delegate all logic to a single implementation contract. This architectural decision reduces deployment costs significantly, making it economically feasible to create thousands of pools without prohibitive gas expenses. The deployer also enforces comprehensive validation rules on all pool parameters, ensuring that every created pool adheres to protocol standards for fairness and security."},{type:"text",content:"Individual Pool contracts execute the complete lifecycle of a raffle or drop. Each pool implements a sophisticated state machine that progresses through distinct phasespending, active, ended, drawing, completed, and terminal stateswith strict enforcement of valid transitions. The pool handles slot purchases with anti-bot protections, verifies completed social media tasks and token gating requirements, requests and processes Chainlink VRF randomness, selects winners using a provably fair algorithm, manages refunds for participants with non-winning slots, distributes revenue between creators and the protocol, and mints or transfers prizes to winners."},{type:"text",content:"The NFTFactory deploys NFT collections using the same minimal proxy pattern employed by the PoolDeployer. It supports both ERC721 and ERC1155 standards, enabling projects to create traditional one-of-one NFTs or semi-fungible tokens with multiple editions. The factory-deployed collections include advanced features like creator allocation with vesting schedules, supply management across multiple pools, reveal mechanics for delayed metadata disclosure, and royalty enforcement through EIP-2981 compliance."},{type:"text",content:"Supporting contracts handle specialized functions. The SocialEngagementManager verifies task completion through EIP-712 cryptographic signatures, enabling trustless validation of off-chain social media activities. The KOLApproval contract manages influencer partnerships, allowing collection owners to approve specific KOLs for creating collaboration pools with enforced parameters. The RewardsFlywheel implements a dual incentive system that rewards both participants and pool creators. The RevenueManager accumulates protocol fees for withdrawal by the protocol admin."},{type:"text",content:"This separation of concerns creates a modular architecture where each component can be upgraded independently, new features can be added without disrupting existing functionality, and security can be verified at the individual contract level. The architecture also enables gas optimizations that would be impossible in a monolithic design, as frequently accessed data can be stored in individual contracts."}]},{id:"security-first-design",title:"Security-First Design",content:[{type:"text",content:"Every aspect of Dropr.fun's architecture prioritizes security and robustness. The protocol implements defense-in-depth strategies where multiple independent security mechanisms protect against the same attack vectors."},{type:"text",content:"All contracts handling value transfers implement OpenZeppelin's ReentrancyGuard, which prevents reentrancy attacks where malicious contracts attempt to recursively call functions before state updates complete. This protection is critical for functions that transfer ETH or tokens, as reentrancy vulnerabilities have historically been one of the most common and devastating attack vectors in smart contract systems."},{type:"text",content:"The Pausable pattern provides emergency stop functionality. If a critical vulnerability is discovered or an exploit is detected, the protocol owner can immediately pause pool creation and certain operations, preventing further damage while a fix is developed and deployed. This capability is essential for production systems handling real user funds, as it provides a last line of defense against unforeseen issues."},{type:"text",content:"Access control is implemented through a combination of OpenZeppelin's Ownable pattern and custom modifiers. The protocol distinguishes between owner privilegeswhich include configuration changes and emergency functionsand operator privilegeswhich enable routine administrative tasks like revenue withdrawal and VRF subscription management. This separation ensures that even if operator keys are compromised, critical protocol parameters remain secure."},{type:"text",content:"The Checks-Effects-Interactions pattern is rigorously enforced throughout the codebase. Every function that makes external calls or transfers value follows the same sequence: first validate all conditions and revert if any fail, then update all state variables to reflect the operation's effects, and finally make external calls or transfers. This ordering ensures that even if an external call behaves unexpectedly, the contract's internal state remains consistent."},{type:"text",content:"Custom errors replace traditional require statements with string messages, providing gas-efficient error handling while maintaining clear revert reasons. This optimization reduces gas costs by approximately ninety-five percent for error cases while improving the developer experience through strongly-typed error definitions."}]}]},{id:"fairness-mechanisms",title:"Fairness Mechanisms & Economic Model",icon:"Shield",subsections:[{id:"anti-bot-protection",title:"Anti-Bot Protection: Multi-Layered Defense",content:[{type:"text",content:"The protocol's approach to bot prevention recognizes that no single mechanism can completely eliminate automated exploitation. Instead, Dropr.fun implements multiple independent protections that work together to make bot operations economically unviable."},{type:"text",content:"The transaction origin check forms the first line of defense. By requiring that the transaction originator matches the immediate function caller, the protocol prevents bundler contracts from coordinating purchases across multiple wallets in a single atomic transaction. While this check has been controversial in Ethereum security discussions due to its incompatibility with certain legitimate contract interactions, Dropr.fun explicitly prioritizes bot resistance over maximum flexibility. For NFT drops and raffles, the security benefit of preventing bundler bots outweighs the limitation of requiring direct wallet interaction."},{type:"text",content:"This design decision reflects a pragmatic understanding of the threat landscape. Bundler bots represent one of the most effective and commonly deployed attack vectors against NFT distributions. By eliminating the ability to coordinate multi-wallet purchases atomically, the protocol forces bot operators to submit separate transactions for each wallet, multiplying their gas costs and eliminating their timing advantage. The economic deterrent created by this multiplication of costs makes large-scale bot operations unprofitable."},{type:"text",content:"Participation limits provide the second layer of protection. Every pool enforces a maximum number of slots that any single participant can purchase, preventing whale dominance and ensuring fair distribution. For pools with NFT prizes, the protocol enforces a strict 0.1% ruleno participant can purchase more than 0.1% of the total slots available. This ensures that even in large pools with thousands of slots, no single actor can dominate the probability distribution."},{type:"text",content:"The mathematics of this limit are compelling. In a pool with 10,000 and 100 winners, a participant purchasing 1% allocation would acquire 100 slots, giving them a 10% chance of having one winning slot. Under the 0.1% rule, that same participant can only purchase 10 slots, reducing their winning probability to ~1%. This dramatic reduction in whale advantage creates a more equitable environment where community members with modest budgets have meaningful chances of winning."},{type:"text",content:"For whitelist raffles where the prize is simply inclusion on an allowlist, the limit is even stricterexactly one slot per participant. This ensures that whitelist allocation follows a true one-person-one-chance model, preventing wealthy actors from buying their way onto allowlists that should reward community engagement rather than capital deployment."},{type:"text",content:"Creator and administrator restrictions eliminate conflicts of interest. Pool creators cannot purchase slots in their own pools. The protocol administrator is also restricted, ensuring that those with privileged access cannot exploit their positions for personal gain. These restrictions are enforced at the smart contract level, making them impossible to bypass even by the protocol admin."},{type:"text",content:"The combination of these protections creates an environment where bot operators face multiple obstacles. They cannot coordinate purchases across wallets atomically, they cannot dominate supply through whale purchases, they cannot use insider access to guarantee wins, and they must compete on equal footing with legitimate community members. While determined attackers might still attempt to operate multiple wallets manually, the economic costs and reduced effectiveness make such attacks far less attractive than in unprotected systems."}]},{id:"social-media-campaigns",title:"Social Media Campaigns: Bridging On-Chain and Off-Chain",content:[{type:"text",content:"One of Dropr.fun's most innovative features is its social media task verification system, which creates a trustless bridge between off-chain social media activities and on-chain participation rights. This system addresses a fundamental challenge in Web3: how to incentivize and verify real-world engagement without compromising decentralization or privacy."},{type:"text",content:"The architecture is elegantly simple yet cryptographically robust. When a pool creator enables social engagement requirements, they specify the tasks participants must completefollowing Twitter accounts, retweeting announcements, joining Discord servers, engaging with content. Participants complete these tasks off-chain through normal social media interactions, then request verification from the Dropr.fun backend service."},{type:"text",content:"The backend service verifies task completion through social media APIs, checking that the user actually followed the account, that the retweet is genuine, that the Discord join is confirmed. Once verification succeeds, the backend generates an EIP-712 typed structured data signature that cryptographically proves the user completed the required tasks for the specific pool. This signature includes the user's wallet address, the pool contract address, and an expiration deadline, binding the proof to a specific context and preventing reuse."},{type:"text",content:"When the user attempts to purchase slots, they submit this signature along with their transaction. The Pool contract calls the SocialEngagementManager to verify the signature, which reconstructs the EIP-712 hash and recovers the signer address using elliptic curve cryptography. If the recovered signer matches the trusted backend signer configured by the protocol owner, and the deadline hasn't expired, the verification succeeds and the purchase proceeds."},{type:"text",content:"This hybrid approach achieves several important goals simultaneously. First, it maintains decentralizationthe smart contracts remain trustless and permissionless, with verification logic fully on-chain. Second, it preserves privacyno personal social media data is stored on-chain, only cryptographic proofs of task completion. Third, it prevents exploitationsignatures are time-limited, pool-specific, and user-specific, making them impossible to share or reuse. Fourth, it scales efficientlyverification happens off-chain through standard APIs, avoiding the impossibility of on-chain social media verification."},{type:"text",content:"The economic model reinforces genuine engagement. Pool creators pay a social engagement fee to enable task requirements, creating a revenue stream that supports the backend verification infrastructure. This fee is calibrated to be affordable for legitimate projects while deterring spam pools. The one-time verification per pool ensures that users aren't repeatedly burdened with task completion, reducing friction while maintaining the engagement incentive."},{type:"text",content:"From a project perspective, social engagement requirements transform pools from simple raffles into community growth engines. Every participant becomes a promoter, sharing content and expanding reach organically. The verification requirement ensures this engagement is real rather than bot-generated, creating genuine social proof and community expansion. Projects can customize task requirements to align with their specific growth objectives, whether that's Twitter followers, Discord members, or content engagement."}]},{id:"token-gating",title:"Token Gating: Rewarding Community Loyalty",content:[{type:"text",content:"Token gating represents another dimension of Dropr.fun's innovation, enabling projects to create exclusive experiences for their existing token holders while preventing the exploitation that has plagued similar systems."},{type:"text",content:"The system supports three token standardsERC721 for NFT collections, ERC1155 for semi-fungible tokens, and ERC20 for fungible tokensgiving projects flexibility in how they define their communities. A project can gate a pool to holders of their NFT collection, to holders of a specific token ID within an ERC1155 collection, or to holders of a minimum amount of their governance or utility token."},{type:"text",content:"The verification process occurs at two critical moments: slot purchase and prize claim. When a participant attempts to purchase slots, the contract verifies they hold the required tokens at that moment. This prevents users from borrowing tokens temporarily just to gain access. More importantly, when a winner attempts to claim their prize, the contract re-verifies token ownership. This second verification is what distinguishes Dropr.fun from naive implementations."},{type:"text",content:"The re-verification mechanism is particularly powerful for maintaining community alignment. Winners must hold their tokens from participation through prize claim, ensuring they remain committed community members throughout the entire process. This eliminates the temporary holder problem where opportunistic actors buy tokens solely to claim rewards and immediately dump them, creating sell pressure that harms long-term holders."},{type:"text",content:"For ERC721 tokens, Dropr.fun implements an innovative token ID binding system that prevents token sharing across wallets. When a participant purchases slots, they must specify which exact token IDs they're using to satisfy the gating requirement. The contract verifies they own those specific tokens and permanently binds those token IDs to their address for that pool. No other address can use those same token IDs to participate, even if the tokens are transferred."},{type:"text",content:"This binding system eliminates a subtle but significant attack vector. Without it, a single NFT could be passed between multiple wallets, with each wallet using it to gain access to the pool. The binding ensures that each NFT can only enable one address to participate, maintaining the exclusivity that token gating is meant to provide."},{type:"text",content:"From a project perspective, token gating transforms NFT collections and tokens from passive holdings into access keys that unlock exclusive opportunities. Holders gain tangible benefits beyond speculation, creating utility that supports long-term value. The cryptographic enforcement ensures these benefits actually reach holders rather than being exploited by opportunistic actors, maintaining community trust and engagement."}]},{id:"provably-fair-randomness",title:"Provably Fair Randomness: Foundation of Trust",content:[{type:"text",content:"At the heart of any fair randomized distribution system lies the question of randomness. How can participants trust that winner selection is truly random and not manipulated by creators, administrators, or sophisticated attackers?"},{type:"text",content:"Historically, projects have attempted various approaches to randomness, each with fatal flaws. Some relied on block hashesthe cryptographic fingerprints of blockchain blocksas sources of entropy. This approach fails because miners can manipulate block hashes by withholding blocks that don't produce favorable outcomes, and sophisticated actors can predict future block hashes with reasonable accuracy. Others used timestamps, which miners can adjust within certain bounds, creating opportunities for manipulation. The most common approach is off-chain selection, where winners are chosen by the project team using traditional random number generators, which still requires participants to completely trust the team's honesty and competence."},{type:"text",content:"Dropr.fun eliminates these trust assumptions through integration with Chainlink VRF v2.5, a decentralized oracle network that provides cryptographically verifiable randomness. The system works through a request-and-fulfill pattern where pools request random numbers from the Chainlink network, which generates them using a verifiable random function that produces cryptographic proofs of correctness."},{type:"text",content:"The integration architecture is sophisticated yet elegant. Each pool contract is assigned to one of multiple VRF subscriptions managed by the ProtocolManager. This multi-subscription system addresses a critical scalability challengeeach Chainlink VRF subscription supports a maximum of 100 consumer contracts. By maintaining multiple subscriptions and automatically distributing new pools across them, the protocol ensures unlimited scalability without hitting Chainlink's per-subscription limits."},{type:"text",content:"When a pool's slot limit sells out or its end time is reached, any stakeholderthe creator or any participantcan trigger randomness requests. This democratic access prevents griefing attacks where a single party could block winner selection. The pool contract registers itself as a consumer on its assigned VRF subscription, constructs a randomness request with specific parameters including the gas lane for oracle callbacks and the number of random words needed, and submits the request to the Chainlink coordinator."},{type:"text",content:"The Chainlink network processes the request through its decentralized oracle infrastructure, with multiple independent nodes participating in the randomness generation. The network generates a random number along with a cryptographic proof that the number was produced correctly, then calls back to the pool contract with both the random value and its proof. The pool contract verifies the proof on-chain before accepting the random number, ensuring that even the Chainlink network cannot provide manipulated randomness."},{type:"text",content:"The winner selection algorithm itself demonstrates careful engineering. Rather than attempting to select all winners in a single transactionwhich could exceed gas limits for large poolsthe protocol implements batched winner selection. For pools from which large amounts of winnersare to emerge, multiple sequential randomness requests are made, with each batch building on the previous selections."},{type:"text",content:"Critically, the protocol maintains a permanent audit trail of the entire winner selection process. Every randomness request emits events recording the batch number, participant count, shuffle starting index, and batch size."},{type:"text",content:"The system handles failures gracefully through try-catch blocks that prevent pool lockup if VRF requests fail. If a randomness request failsperhaps due to insufficient LINK tokens in the subscription or network congestionthe pool transitions back to the Ended state, allowing another request to be submitted. If batch processing fails during winner selection, the pool similarly reverts to a recoverable state. These failure modes ensure that technical issues never result in permanent loss of participant funds or prizes."}]},{id:"refund-mechanisms",title:"Comprehensive Refund Mechanisms",content:[{type:"text",content:"While provably fair randomness ensures winner selection integrity, Dropr.fun recognizes that fairness extends beyond the selection process. Participants deserve protection when pools fail to complete, when they don't win prizes, or when circumstances prevent normal pool completion. The protocol implements four distinct refund scenarios, each calibrated to the specific situation and pool type."},{type:"text",content:"The first scenario addresses pool deletion, providing full refunds when pools are deleted before completion. This can occur when creators delete pools before activation, recognizing they won't reach sufficient participation, or when minting failures occur due to malicious or buggy externally deployed NFT contracts. In these cases, participants receive 100% of their slot fees back, ensuring they aren't penalized for pool failures. The refund mechanism includes automatic cleanup of VRF subscription assignments, preventing orphaned consumer registrations."},{type:"text",content:"The second scenario handles unengaged poolsthose that end with insufficient participants (i.e less participants than the number of required winners). While rare in practice, this scenario could occur for pools with very high barriers to entry or insufficient promotion. The protocol treats these as complete failures, refunding any participants who managed to purchase slots before the pool ended."},{type:"text",content:"The third scenario provides partial refunds for non-winning slots in NFT drop pools. This represents one of Dropr.fun's most innovative features, addressing the fundamental unfairness of traditional raffles where non-winners receive nothing. In pools with custom slot fees and multiple winners, all participants can claim refunds for their non-winning slots. The refund amount equals the slot fee minus the protocol fee, ensuring participants recover most of their investment on slots that didn't win. This dramatically improves the economics of participation compared to traditional raffles where those eight slots would represent total losses."},{type:"text",content:"The fourth scenario applies to global fee poolsgiveaways and whitelist raffles where participants pay the protocol's standard fee rather than a creator-set slot fee. These pools refund 80% of slot fees to all participants regardless of winning status. The 20% retained by the protocol covers operational costs."},{type:"text",content:"The refund system's implementation demonstrates careful attention to security and gas efficiency. Refunds are pull-based rather than push-based, meaning participants must claim their refunds rather than having them automatically sent. This prevents reentrancy attacks and reduces gas costs by avoiding failed transfers to contracts that can't receive ETH. The claim function verifies eligibility, calculates the refund amount, marks the claim as processed to prevent double-claiming, and transfers the fundsall in a single atomic transaction that either succeeds completely or reverts entirely."},{type:"text",content:"Refund state management integrates with the pool lifecycle through strict state requirements. Refunds are only available in terminal or completed statesCompleted, AllPrizesClaimed, Deleted, or Unengaged. This prevents premature refund claims before winner selection completes while ensuring refunds become available as soon as appropriate."}]},{id:"revenue-distribution",title:"Transparent Revenue Distribution",content:[{type:"text",content:"Revenue flows in Web3 protocols are often opaque, with participants and creators uncertain about where their money goes and when it becomes accessible. Dropr.fun addresses this through a transparent, predictable revenue system where all flows are defined at pool creation, enforced by smart contracts, and fully auditable on-chain."},{type:"text",content:"The protocol distinguishes between two fundamental pool types with different economic models. Custom fee pools allow creators to set their own slot prices, with revenue flowing primarily to creators subject to protocol fees and refund obligations. Global fee pools use the protocol's standard fee, with revenue split between participant refunds and protocol operations. This dual model enables both creator-driven monetization and protocol-subsidized community engagement."},{type:"text",content:"For custom fee pools, the revenue flow follows a carefully designed path that balances creator compensation, participant protection, and protocol sustainability. When participants purchase slots, all slot fees initially accumulates in the creator revenue pool. At pool completion, if the pool is refundablemeaning it has multiple winnersthe revenue from non-winning slots is split between a protocol fee and a refundable pool. The protocol fee represents the protocol's share for providing infrastructure. The remaining 95% becomes available for participant refunds."},{type:"text",content:"Revenue from winning slots remains entirely with the creator, recognizing that these slots represent successful outcomes where participants received prizes. When creators withdraw their revenue, a creation fee is deducted and sent to the protocol's RevenueManager. The net amount transfers to the revenue recipient, which may be the creator themselves or, in 'Collab' pools, the collection owner who authorized the pool creation."},{type:"text",content:"The timing of revenue withdrawal is carefully controlled through state requirements that ensure proper pool completion. For pools using internal collections deployed through the NFTFactory, creators can withdraw once the pool reaches `Completed` or `AllPrizesClaimed` state. For pools using external collections with customized contracts, withdrawal requires `AllPrizesClaimed` state, ensuring all winners have minted their NFTs before creators access revenue."},{type:"text",content:"Global fee pools implement a simpler but equally transparent model. All slot fees accumulate in a global fee revenue pool. At completion, 80% becomes refundable to participants while 20% represents protocol revenue. The protocol revenue from global fee pools, combined with creation fees from custom pools and social engagement fees, funds ongoing development, infrastructure costs, and the backend services that verify social media task completions."},{type:"text",content:"Revenue security receives particular attention through the implementation of the Checks-Effects-Interactions pattern. When processing withdrawals, the contract first validates all conditions, then updates all state variables to reflect the withdrawal, and only then makes external transfers. This ordering prevents reentrancy attacks where malicious recipients could recursively call withdrawal functions to drain funds. State variables are reset to zero before transfers, ensuring that even if a reentrancy attempt occurs, no funds remain available to withdraw."}]}]},{id:"prize-systems",title:"Prize Systems & Creator Tools",icon:"Trophy",subsections:[{id:"external-collection-compatibility",title:"External Collection Compatibility",content:[{type:"text",content:"One of Dropr.fun's most powerful features is its ability to integrate with externally deployed NFT contracts, enabling projects with custom collections to leverage the protocol's distribution infrastructure without sacrificing their unique features."},{type:"text",content:"The challenge of external collection integration is substantial. Projects deploy custom NFT contracts for compelling reasonsadvanced reveal mechanics, dynamic metadata generation, on-chain art rendering, custom tokenomics, staking integration, governance mechanisms. These projects need fair distribution mechanisms but cannot migrate to new contracts without disrupting their ecosystems."},{type:"text",content:"Dropr.fun solves this through the IMintable interface, a standardized compatibility layer that defines the minimum functionality required for external contracts to integrate with the protocol. The interface specifies four essential functions that enable supply management and minting coordination between pools and NFT contracts. By implementing these functions, any NFT contractregardless of its internal complexitycan leverage Dropr.fun's ecosystem for fair and transparent distribution."},{type:"text",content:"The first required function, availableSupply, returns the unallocated supply available for new pool creation. This function must account for supply already allocated to active pools, tokens already minted, and any creator allocation reserved for the collection owner. The implementation must ensure that pools cannot over-allocate supply, preventing situations where more prizes are promised than tokens exist."},{type:"text",content:"The second function, setMinterAndAllocation, authorizes pool contracts to mint tokens and allocates specific supply amounts to them. When a pool is created with an external collection, the PoolDeployer calls this function to reserve the required supply and grant minting permissions. The implementation must verify the caller is authorizedi.e the PoolDeployer or collection ownercheck that sufficient supply exists, track the allocation per pool, and authorize the pool to call the mint function. This creates a permissioned minting system where only approved pools can mint from the collection."},{type:"text",content:"The third function, mint, performs the actual minting to winners. Pool contracts call this function when winners claim their NFTs, specifying the recipient address and quantity. The implementation must verify that the caller is an authorized pool contract before minting NFTs to winners. This design allows collections to maintain complete control over their minting process while enabling automated distribution through pool contracts."},{type:"text",content:"The fourth function, restoreMinterAllocation, handles the critical case of pool failures or deletions. When a pool is deleted before completion or doesn't receive sufficient engagement, its allocated supply must return to the collection's available supply pool for future use. This function allows pools or collection owners to restore allocations, preventing supply from being permanently locked to failed pools. The implementation must verify authorization, return the allocation to available supply, clear minting permissions, and enable the supply to be reallocated to new pools."}]},{id:"secure-prize-distribution",title:"Secure Prize Distribution",content:[{type:"text",content:"The final step in any fair distribution system is the actual delivery of prizes to winners. This seemingly straightforward process harbors numerous challenges that have plagued raffles throughout Web3 history. Winners have lost their slot/ticket fees to malicious contracts that fail during prize claims, creators have struggled with gas-inefficient distribution mechanisms, and participants have exploited token gating by dumping required tokens before prize claims. Dropr.fun addresses these challenges through a sophisticated prize distribution system that protects all parties."},{type:"text",content:"The protocol supports two fundamental prize distribution models, each optimized for different scenarios. The mintable prize model implements lazy minting where NFTs are minted on-demand. This approach is gas-efficient for creators, supports unlimited supply collections, and works seamlessly with protocol-deployed collections through the NFTFactory. Winners trigger minting by calling the claim function, which verifies their winning status and mints NFTs directly to their addresses."},{type:"text",content:"The escrowed prize model handles pre-existing NFTs that are transferred to the pool contract before activation. This approach supports unique one-of-one pieces, works with any existing NFT items, and provides upfront verification that prizes actually exist. Creators' NFT prizes are atomically transferred to the pool contract during creation, the contract holds them in escrow throughout the pool lifecycle, and winners claim by triggering transfers from the pool to their addresses."},{type:"text",content:"The critical innovation in prize distribution is comprehensive error handling through try-catch blocks that protect winners from malicious or buggy prize contracts. When a winner attempts to mint their NFT, the pool contract wraps the minting call in a try-catch structure. If minting succeeds, the claim completes normally and the winner receives their prize. If minting fails for any reasonwhether due to malicious contract behavior, implementation bugs, or unexpected conditionsthe catch block activates, marking the pool for full refunds and transitioning to a `Deleted` state."},{type:"text",content:"This protection mechanism ensures that winners never lose their slot fees because of faulty prize contracts. If any winner's claim fails, all participants become eligible for full refunds of their slot fees. The pool emits a MintingFailed event with details about the failure, providing transparency about what went wrong."},{type:"text",content:"Token gating re-verification adds another layer of security and fairness. For pools that require participants to hold specific tokens, the protocol verifies token ownership not just at slot purchase time but again at prize claim time. This prevents a sophisticated exploit where participants could purchase required tokens, participate in the pool, win prizes, sell the tokens, and then claim prizes without maintaining the community membership that token gating is meant to enforce."}]},{id:"diverse-pool-types",title:"Diverse Pool Types: Flexibility for Every Use Case",content:[{type:"text",content:"Dropr.fun recognizes that different distribution scenarios require different pool configurations. A paid NFT drop has fundamentally different economics than a free giveaway, and a whitelist raffle serves an entirely different purpose than a token distribution. Rather than forcing all use cases into a single rigid structure, the protocol implements five distinct pool types, each optimized for its specific scenario."},{type:"text",content:"Lucky NFT Sales represent the classic scenario where holders can sell their NFTs. Instead of a static listing on a marketplace, users can sell their illiquid NFTs using raffle pools where winners end up paying only a small fraction of the market value of such collectibles. For example, if a user wants to sell a rare collectible for a specific price (say 1 ETH). Instead of listing it on a marketplace, they create an NFT-prized raffle pool specifying a custom slot fee (0.0001 ETH) and a slot limit (1000 slots) to match their desired sale price. The collectible is then escrowed within the pool. If all slots sell out, the pool creator nets their full 1 ETH asking price. If the raffle pool doesn't sell enough slots, the creator can recover their NFT by deleting the pool before its duration elapses. Once the pool's duration elapses, deletion becomes impossible and the NFT goes to a lucky participant. If the creator deletes the pool, 100% slot fee refunds become avaliable to all participants."},{type:"text",content:"NFT Giveaways provide free or low-cost distribution of NFT prizes to community members. These pools use the protocol's global fee structure, refund 80% of fees to all participants, support multiple winners from a single pool, and work with both escrowed and mintable prizes. The economics favor participants who risk minimal fees for chances at valuable prizes while the protocol covers operational costs through the 20% fee retention."},{type:"text",content:"Whitelist Raffle pools distribute allowlist spots rather than NFTs themselves. These pools enforce exactly one slot per participant, use global fee pricing, refund 80% of slot fees to all participants, and provide winners whitelist/allowlist access in other projects."},{type:"text",content:"Token-Gated pools create exclusive experiences for existing token holders. These pools require specific token ownership for participation, implement re-verification at prize claim, support ERC721 token ID binding, and can combine with social engagement requirements. The token gating transforms passive token holdings into active utility, rewarding long-term holders with exclusive access to new opportunities."},{type:"text",content:"ERC20 Token Giveaways distribute fungible tokens to community members. These pools escrow ERC20 prizes before activation, support multiple winners with configurable amounts, use global fee pricing with 80% refunds, and provide transparent on-chain prize delivery. The model enables projects to distribute governance tokens, utility tokens, or reward tokens in a provably fair manner that benefits genuine community members rather than bot operators."}]},{id:"supply-management",title:"Advanced NFT Supply Management & Team Allocation Vesting",content:[{type:"text",content:"NFT creators need sophisticated tools to manage their collections while maintaining community trust. The challenge lies in balancing creator rights to reserve allocations for themselves with community expectations of fair distribution. Dropr.fun addresses this through a comprehensive supply management system that enables creator allocations with enforced vesting schedules."},{type:"text",content:"The creator allocation system allows collection owners to reserve up to 20% of total supply for themselves. This allocation is declared once and cannot be increased, providing certainty to the community about maximum team holdings. The 20% cap represents a carefully calibrated balancesufficient for teams to retain meaningful ownership and fund ongoing development, but constrained enough to ensure the majority of supply flows to the community through fair distribution mechanisms."},{type:"text",content:"Vesting schedules transform creator allocations from immediate access to time-locked gradual unlocks. Rather than allowing creators to mint their entire allocation instantlywhich could flood markets and harm community intereststhe protocol enforces vesting with cliff periods and regular unlock intervals. A cliff period prevents any minting for a minimum duration of 7 days ensuring creators demonstrate commitment before accessing their allocation."},{type:"text",content:"Supply cut mechanisms enable creators to voluntarily reduce their collections' maximum supply and their own allocations. This feature addresses market conditions where initial supply projections prove too optimistic. Creators can reduce unallocated supply that hasn't been assigned to pools, and they can reduce their own locked allocation that hasn't been claimed yet. The reduction is permanent and irreversible, providing certainty to the community that supply won't later be increased."},{type:"text",content:"The interaction between supply cuts and vesting requires sophisticated handling. When a creator reduces their allocation after configuring vesting, the protocol automatically recalculates the vesting schedule to reflect the new allocation size. The amount per unlock adjusts proportionally, and critically, already-unlocked amounts are never reducedthe protocol takes a snapshot at configuration time and preserves those unlocked amounts even if the total allocation decreases. This ensures creators aren't penalized for voluntary supply reductions."}]},{id:"kol-partnerships",title:"KOL Partnerships: Controlled Collaboration",content:[{type:"text",content:"Influencer partnerships represent a powerful growth strategy for NFT projects, but traditional approaches force one uncomfortable trade-offManual coordination requires extensive trust. Dropr.fun solves this challenge through the KOL Approval system, a controlled collaboration framework that enables seamless and trustless partnerships with NFT projects."},{type:"text",content:"The approval system allows collection owners to authorize specific influencersKey Opinion Leaders or KOLsto create 'Collab' pools using their collections. Each approval specifies precise parameters that constrain the KOL's activities. Pool limits control how many pools the KOL can create, preventing unlimited pool spam. Winner limits control the total number of NFTs the KOL can distribute across all their pools, ensuring their communities cannot mint the entire collection. Enforced slot fees specify the exact price KOLs use in their pools, or mandate free mints by setting the enforced slot fee to zero. These parameters helps to maintain brand consistency and control when partnering with KOLs."},{type:"text",content:"The approval structure creates a permission system where KOLs can promote collections and drive participation while collection owners retain ultimate control. When a KOL creates a pool, the protocol validates their approval status, checks that they haven't exceeded their pool or winner limits, verifies the slot fee matches the enforced amount, and increments their usage counters. If any validation fails, pool creation reverts, ensuring KOLs cannot game authorized parameters."},{type:"text",content:"Revenue flows in 'Collab' pools demonstrate the alignment of incentives. All revenue from KOL-created pools goes to the collection owner, not the KOL. The KOL benefits from exposure, community growth, and association with the project, while the collection owner receives the economic benefits. This model recognizes that KOLs are primarily marketing partners rather than revenue partners, aligning incentives around community building rather than extraction."}]}]},{id:"innovation-excellence",title:"Innovation & Operational Excellence",icon:"Cpu",subsections:[{id:"rewards-flywheel",title:"The Rewards Flywheel",content:[{type:"text",content:"Traditional raffles suffer from a fundamental problemnon-winners receive nothing, and creators receive no rewards for hosting successful events. This creates a zero-sum dynamic where participation feels like pure gambling rather than ecosystem engagement. Dropr.fun transforms this dynamic through the Rewards Flywheel, a dual incentive system that rewards both participants and creators, creating positive-sum outcomes that drive ecosystem growth."},{type:"text",content:"The participant reward system addresses the psychological and economic reality that losing feels bad, even with refunds. When participants purchase slots and don't win, they've invested time and attention even if they get their money back. The Rewards Flywheel compensates this investment by distributing additional rewards to raffle participants with non-winners prioritized. Anyone can deposit rewards for any poolprojects promoting their drops, community members supporting pools, or the protocol itself incentivizing participation. These rewards accumulate in a pool-specific allocation that gets distributed to participants based on their slot purchases and winning status."},{type:"text",content:"Creator rewards implement a tiered system that incentivizes pool creation. Creators of pools that have high engagements receive larger rewards. The protocol admin deposits creator rewards to the RewardsFlywheel contract, specifying reward amounts per pool and the token to distribute. When pools complete, creators can claim their rewards based on their pool's fill rate."},{type:"text",content:"The flexibility of reward tokens enables diverse incentive structures. Participant rewards can be deposited in ETH for simplicity or ERC20 tokens for branded rewards enabling projects to distribute their own tokens as participant incentives. This flexibility allows the protocol to adapt reward strategies to market conditions and community preferences."},{type:"text",content:"Withdrawal mechanisms protect depositors while ensuring reward distribution. Depositors can withdraw unclaimed rewards, preventing permanent lock of funds in pools. The protocol tracks claimed amounts separately from deposited amounts, enabling accurate accounting of what remains withdrawable. This balance ensures rewards reach participants while protecting depositors from permanent fund loss."},{type:"text",content:"The Rewards Flywheel creates positive feedback loops throughout the ecosystem. Participants are incentivized to try new pools. Creators are incentivized to promote their pools in order to achieve high fill rates. Projects are incentivized to deposit rewards to drive participation in their pools. The protocol benefits from increased activity and engagement."}]},{id:"gas-optimization",title:"Gas Optimization Excellence",content:[{type:"text",content:"Gas costs represent one of the most significant barriers to blockchain adoption. Every operation in a smart contract consumes gas, and these costs accumulate across thousands of transactions to create substantial economic friction. Dropr.fun addresses this through comprehensive gas optimization strategies that reduce costs significantly across different operations, making the protocol accessible and competitive."},{type:"text",content:"Storage optimization through struct packing minimizes the protocol's most expensive resource. Storage operations cost twenty thousand gas for initial writes and five thousand gas for updates, making storage the dominant cost in most contract operations. By carefully packing related data into structs and grouping multiple boolean flags together, the protocol minimizes storage slot usage."},{type:"text",content:"The storage strategy distinguishes between high-frequency and low-frequency access patterns. Variables like slot fee, start time, and pool state that are accessed in every transaction remain individual for optimal single-read performance. Configuration data, prize details, holder requirements, and revenue tracking that are accessed less frequently are grouped in structs for space efficiency. This hybrid approach optimizes for both gas cost and code clarity."},{type:"text",content:"Unchecked arithmetic blocks eliminate redundant overflow checks where overflow is mathematically impossible. Solidity version zero-point-eight and later automatically checks for arithmetic overflow and underflow, adding gas costs to every mathematical operation. In contexts where overflow cannot occurincrementing loop counters, adding validated quantities, calculating with bounded valuesunchecked blocks remove these checks, saving approximately twenty gas per operation."},{type:"text",content:"The EIP-1167 minimal proxy pattern achieves the protocol's most dramatic gas optimization. Deploying a full Pool contract costs approximately 3,000,000 due to the contract's size and complexity. The minimal proxy pattern deploys a tiny proxy that delegates all calls to a single implementation contract."},{type:"text",content:"The implementation uses OpenZeppelin's Clones library to create deterministic proxies with unique addresses. The PoolDeployer maintains a single Pool implementation contract and clones it for each new pool. The clone contains only the implementation address and delegation logic, while all actual code resides in the implementation. This pattern is applied to both Pool contracts and NFT collections, enabling unlimited pool creation without prohibitive gas costs."}]},{id:"security-architecture",title:"Security Architecture: Defense in Depth",content:[{type:"text",content:"Smart contract security requires multiple independent layers of protection. A single vulnerability can compromise an entire protocol, and the immutability of deployed contracts means mistakes cannot be easily corrected. Dropr.fun implements defense-in-depth security where multiple independent mechanisms protect against the same attack vectors."},{type:"text",content:"Access control forms the foundation of protocol security. The Ownable pattern from OpenZeppelin provides basic owner privileges for protocol configuration and emergency functions. The protocol extends this with role-based access control through an operators mapping that grants specific privileges to designated addresses. This separation ensures that routine operations like revenue withdrawal don't require owner keys, reducing the risk of key compromise."},{type:"text",content:"The access control hierarchy creates clear privilege separation. The protocol owner can configure all parameters, manage operators, and execute emergency functions. Operators can withdraw protocol revenue, manage VRF subscriptions, and perform administrative tasks. Pool creators can withdraw their revenue and manage their pools. Regular users can participate, claim prizes, and claim refunds. Each role has precisely the permissions it needs and no more."},{type:"text",content:"Reentrancy protection prevents one of the most dangerous attack vectors in smart contract systems. The ReentrancyGuard from OpenZeppelin uses a simple but effective mutex pattern that prevents recursive calls to protected functions. Every function that transfers value or makes external calls is marked nonReentrant, ensuring that even if a malicious contract attempts to recursively call back into the protocol, the call will revert."},{type:"text",content:"The Checks-Effects-Interactions pattern provides defense-in-depth alongside ReentrancyGuard. This pattern mandates that functions first validate all conditions, then update all state variables, and finally make external calls or transfers. By updating state before external interactions, the pattern ensures that even if an external call behaves maliciously or unexpectedly, the contract's internal state remains consistent and prevents exploitation."},{type:"text",content:"State machine security enforces valid lifecycle transitions. The Pool contract implements a sophisticated state machine with states for `Pending`, `Active`, `Ended`, `Drawing`, `Completed`, `AllPrizesClaimed`, `Deleted`, and `Unengaged`. Functions are restricted to valid states through modifiers that revert if called in inappropriate states. This prevents operations like claiming prizes before winner selection, withdrawing revenue before completion, or purchasing slots after the pool has ended."}]},{id:"production-readiness",title:"Production Readiness: Deployment & Operations",content:[{type:"text",content:"Deploying a complex multi-contract protocol requires careful orchestration and comprehensive operational procedures. Dropr.fun implements systematic deployment processes, thorough testing protocols, and ongoing maintenance procedures that ensure reliable operation across multiple blockchain networks."},{type:"text",content:"The deployment architecture recognizes the interdependencies between contracts and enforces correct deployment order. Core infrastructure contracts deploy firstRevenueManager, ProtocolManager, SocialEngagementManager, RewardsFlywheel. These provide the foundation that other contracts depend on. Factory contracts deploy nextNFTFactory and PoolDeployerinitially with placeholder addresses for implementations they'll reference. Implementation contracts deploy lastPool, DroprERC721A, DroprERC1155referencing the factory contracts. Finally, placeholder addresses are updated to point to the actual implementations."},{type:"text",content:"The deployment scripts implement comprehensive error handling and confirmation waiting. Each deployment waits for multiple block confirmations before proceeding, ensuring transactions are finalized before dependent deployments begin. The scripts track all deployed addresses and save them to configuration files for frontend integration and verification. Deployment progress is logged extensively, enabling troubleshooting if issues arise."},{type:"text",content:"Network-specific configuration handles the variations between different blockchains. Each network has different Chainlink VRF coordinators, LINK token addresses, key hashes, and recommended gas limits. The deployment scripts contain network-specific parameter sets that ensure correct VRF integration on each chain. The protocol supports eight mainnets and eight testnets, each with validated configurations."},{type:"text",content:"Post-deployment configuration links all contracts and sets operational parameters. The PoolDeployer receives the Pool implementation address, enabling it to clone pools. The NFTFactory receives ERC721 and ERC1155 implementation addresses, enabling it to clone collections. The ProtocolManager receives addresses for all other contracts and configuration for slot limits, fees, durations, and VRF parameters."},{type:"text",content:"Frontend integration requires careful coordination between smart contracts and user interfaces. Contract ABIs are copied to the frontend repository, enabling the interface to interact with deployed contracts. Environment variables configure contract addresses for each network. The frontend initializes contract instances using ethers.js, connecting to the appropriate network and contracts based on the user's wallet connection."},{type:"text",content:"Operational best practices ensure ongoing protocol health. Monitoring systems track contract events, VRF subscription balances, protocol revenue accumulation, and pool creation rates. Daily checks verify VRF subscriptions have sufficient LINK tokens, pools are completing successfully, and revenue is being collected properly. Weekly reviews analyze gas costs, user activity, and protocol metrics. Monthly audits examine security, performance, and opportunities for optimization."},{type:"text",content:"Maintenance procedures handle routine updates and emergency responses. VRF subscription management ensures continuous randomness availability. Revenue collection procedures transfer accumulated fees to the protocol treasury. Parameter adjustments respond to changing market conditions or user feedback. Emergency procedures provide clear escalation paths for critical issues, enabling rapid response to security concerns or operational problems."}]}]},{id:"conclusion",title:"Conclusion",icon:"BookOpen",subsections:[{id:"new-standard",title:"A New Standard for Fair Distribution",content:[{type:"text",content:"Dropr.fun represents a comprehensive reimagining of how NFT drops, token distributions, and whitelist allocations should function in Web3. By addressing the fundamental problems that have plagued these mechanisms since their inceptionbot exploitation, opaque selection processes, unreliable prize delivery, and lack of participant protectionthe protocol establishes new standards for fairness, transparency, and community engagement."},{type:"text",content:"The protocol's innovation extends across every dimension of the distribution problem. Cryptographic randomness through Chainlink VRF eliminates manipulation of winner selection. Multi-layered bot protection makes automated exploitation economically unviable. Social engagement verification rewards genuine community participation. Token gating with re-verification ensures exclusive access reaches actual community members. Comprehensive refund mechanisms protect participants when pools fail or they don't win. Transparent revenue distribution creates clear economic flows. External collection compatibility enables projects with existing NFT contracts to leverage the protocol's distribution infrastructure."},{type:"text",content:"The sophistication of the implementation demonstrates deep understanding of both blockchain technology and user needs. Gas optimizations make the protocol accessible and competitive. Security measures implementing defense-in-depth protect all participants. The rewards flywheel creates positive feedback loops that drive ecosystem growth. Advanced creator tools enable sophisticated collection management. KOL partnerships facilitate controlled collaborations. The entire system is designed for long-term operation at scale."},{type:"text",content:"Dropr.fun transforms NFT distribution from a trust-dependent, bot-vulnerable, zero-sum game into a transparent, fair, positive-sum ecosystem. Participants can engage with confidence knowing that randomness is provably fair, bots are economically deterred, and they're protected even if they don't win. Creators can launch drops knowing they have sophisticated tools for supply management, pricing flexibility, and community engagement. Projects can distribute tokens and NFTs knowing the process is transparent, auditable, and aligned with community interests."},{type:"text",content:"The protocol's impact extends beyond its immediate functionality. By establishing new standards for fairness and transparency, Dropr.fun raises expectations across the entire Web3 ecosystem. Projects using the protocol demonstrate commitment to their communities through provably fair distribution. Participants gain confidence that Web3 can deliver on its promises of transparency and fairness. The broader ecosystem benefits from reduced bot activity, increased genuine engagement, and stronger community alignment."},{type:"text",content:"As Web3 continues to evolve, the principles embodied in Dropr.funcryptographic fairness, comprehensive protection, transparent economics, and community alignmentwill become increasingly important. The protocol demonstrates that sophisticated technology can serve user needs while maintaining security and efficiency. It represents a new standard that future protocols will be measured against, and it provides a foundation for the next generation of fair distribution mechanisms that will power Web3's continued growth and adoption."}]}]}]},e0e=(t,e)=>{const n=pN.sections.find(r=>r.id===t);return n?e?n.subsections.find(s=>s.id===e)||null:n:null},t0e={Zap:cg,BookOpen:wh,Code:xQ,Shield:xs,Trophy:dl,Cpu:X6},n0e=()=>{const[t,e]=k.useState(""),[n,r]=k.useState(["executive-summary"]),[s,o]=k.useState("executive-summary"),[a,l]=k.useState("overview"),[c,u]=k.useState(null),[f,p]=k.useState(!1),m=(D,$)=>{navigator.clipboard.writeText(D).then(()=>{u($),setTimeout(()=>u(null),2e3)})},g=pN.sections.map(D=>({...D,subsections:D.subsections.filter($=>$.title.toLowerCase().includes(t.toLowerCase())||$.content.some(U=>U.type==="text"&&U.content.toLowerCase().includes(t.toLowerCase())))})).filter(D=>D.subsections.length>0||t===""),w=D=>{r($=>$.includes(D)?$.filter(U=>U!==D):[...$,D])},y=(D,$)=>{o(D),l($),p(!1)},T=e0e(s,a),j=()=>{const D=[];return pN.sections.forEach($=>{$.subsections.forEach(U=>{D.push({sectionId:$.id,subsectionId:U.id,sectionTitle:$.title,subsectionTitle:U.title})})}),D},_=()=>{const D=j(),$=D.findIndex(U=>U.sectionId===s&&U.subsectionId===a);return{currentIndex:$,total:D.length,previous:$>0?D[$-1]:null,next:$<D.length-1?D[$+1]:null}},v=D=>{const $=_(),U=D==="prev"?$.previous:$.next;U&&(o(U.sectionId),l(U.subsectionId),n.includes(U.sectionId)||r(K=>[...K,U.sectionId]),window.scrollTo({top:0,behavior:"smooth"}))},P=({content:D})=>i.jsx("div",{className:"space-y-5",children:D.map(($,U)=>{switch($.type){case"text":return i.jsx("p",{className:"text-foreground leading-relaxed text-[length:var(--text-base)] mb-4",children:$.content},U);case"heading":const K=`h${$.level||2}`;return i.jsx(K,{className:je("font-bold text-foreground",$.level===2&&"text-2xl mt-8 mb-4",$.level===3&&"text-xl mt-6 mb-3",$.level===4&&"text-lg mt-4 mb-2"),children:$.content},U);case"list":return i.jsx("ul",{className:"space-y-2 ml-4 sm:ml-6 mb-4",children:$.items.map((Y,G)=>i.jsxs("li",{className:"text-foreground leading-relaxed text-[length:var(--text-base)] flex items-start",children:[i.jsx("span",{className:"text-primary mr-3 mt-1.5 flex-shrink-0",children:""}),i.jsx("span",{children:Y})]},G))},U);case"ordered-list":return i.jsx("ol",{className:"space-y-3 ml-4 sm:ml-6 mb-4",children:$.items.map((Y,G)=>i.jsxs("li",{className:"text-foreground leading-relaxed text-[length:var(--text-base)] flex items-start",children:[i.jsxs("span",{className:"text-primary font-semibold mr-3 flex-shrink-0 min-w-[1.5rem]",children:[G+1,"."]}),i.jsx("span",{children:Y})]},G))},U);case"image":return i.jsxs("div",{className:"my-8",children:[i.jsx("img",{src:$.src,alt:$.alt,className:"rounded-lg border border-border w-full max-w-3xl"}),$.caption&&i.jsx("p",{className:"text-sm text-muted-foreground mt-2 text-center italic",children:$.caption})]},U);case"code":return i.jsxs("div",{className:"relative my-6 -mx-4 sm:mx-0",children:[i.jsx("pre",{className:"bg-muted/50 border-y sm:border border-border sm:rounded-lg p-3 sm:p-4 overflow-x-auto text-xs sm:text-sm",children:i.jsx("code",{className:$.language&&`language-${$.language}`,children:$.code})}),i.jsx(we,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 hover:bg-background/80",onClick:()=>m($.code,U),children:c===U?i.jsx(Bs,{className:"h-4 w-4 text-green-500"}):i.jsx(Wg,{className:"h-4 w-4"})})]},U);default:return null}})});return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx("section",{className:"relative bg-gradient-to-b from-primary/5 via-background/50 to-background",children:i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center max-w-3xl mx-auto",children:[i.jsx(ll,{className:"mb-3 bg-primary/10 text-primary border-primary/20",children:"Documentation"}),i.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3 leading-tight bg-gradient-to-r from-foreground to-primary/60 bg-clip-text text-transparent",style:{lineHeight:"1.2"},children:"Dropr Documentation"}),i.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"Comprehensive guides to help you build provably fair distributions"})]})})}),i.jsx("section",{className:"py-0",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("div",{className:"lg:hidden w-full mb-4",children:i.jsxs(we,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>p(!f),children:[f?i.jsx(vi,{className:"h-4 w-4"}):i.jsx(sD,{className:"h-4 w-4"}),f?"Hide Navigation":"Show Navigation"]})}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-0 lg:gap-8",children:[i.jsx(Jl,{children:(f||typeof window<"u")&&i.jsxs(Be.aside,{initial:!1,animate:{x:0,opacity:1},transition:{duration:.3},className:je("w-full lg:w-96 flex-shrink-0","lg:block lg:relative","fixed inset-0 z-50 lg:z-auto lg:inset-auto bg-background lg:bg-transparent",f?"block":"hidden lg:block"),children:[i.jsx("div",{className:"lg:hidden fixed inset-0 bg-background/80 backdrop-blur-sm",onClick:()=>p(!1)}),i.jsxs(ut,{className:"relative z-10 h-full lg:h-[calc(100vh-10rem)] flex flex-col m-4 lg:m-0",children:[i.jsx(Jr,{className:"pb-3 flex-shrink-0",children:i.jsxs("div",{className:"relative",children:[i.jsx(Xu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(gs,{placeholder:"Search docs...",value:t,onChange:D=>e(D.target.value),className:"pl-10"})]})}),i.jsx(It,{className:"p-0 flex-1 overflow-hidden",children:i.jsx(Gxe,{className:"h-full",children:i.jsx("nav",{className:"p-3 space-y-1 pb-6",children:g.map(D=>i.jsxs("div",{children:[i.jsxs(we,{variant:"ghost",className:"w-full justify-between p-2 h-auto font-semibold text-base text-left hover:bg-transparent active:bg-transparent",onClick:()=>w(D.id),children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0 pr-2",children:[Ae.createElement(t0e[D.icon],{className:"h-5 w-5 flex-shrink-0"}),i.jsx("span",{className:"whitespace-normal break-words",children:D.title})]}),n.includes(D.id)?i.jsx(Ii,{className:"h-5 w-5 flex-shrink-0"}):i.jsx(rg,{className:"h-5 w-5 flex-shrink-0"})]}),n.includes(D.id)&&i.jsx("div",{className:"ml-6 mt-1 space-y-1 mb-2",children:D.subsections.map($=>i.jsx(we,{variant:"ghost",className:je("w-full justify-start p-2 h-auto text-sm text-left whitespace-normal break-words leading-relaxed hover:bg-transparent active:bg-transparent",s===D.id&&a===$.id&&"bg-primary/10 text-primary font-medium"),onClick:()=>y(D.id,$.id),children:$.title},$.id))}),i.jsx(Zxe,{className:"my-2"})]},D.id))})})})]})]})}),i.jsx("div",{className:"flex-1 min-w-0 w-full lg:pl-8 pb-12 mt-4 lg:mt-0",children:T?i.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-4xl",children:[i.jsx("div",{className:"mb-6",children:i.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:T.title})}),i.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:i.jsx(P,{content:T.content})}),i.jsxs("div",{className:"mt-12 pt-8 border-t border-border",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-4",children:[i.jsx("div",{className:"flex-1 w-full sm:w-auto",children:_().previous&&i.jsxs(we,{variant:"outline",className:"w-full justify-start gap-2 h-auto py-3 px-3 sm:px-4 text-left",onClick:()=>v("prev"),children:[i.jsx(gQ,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),i.jsxs("div",{className:"flex flex-col items-start min-w-0",children:[i.jsx("span",{className:"text-xs text-muted-foreground mb-0.5 sm:mb-1",children:"Previous"}),i.jsx("span",{className:"font-medium text-xs sm:text-sm truncate w-full",children:_().previous.subsectionTitle})]})]})}),i.jsx("div",{className:"flex-1 w-full sm:w-auto",children:_().next&&i.jsxs(we,{variant:"outline",className:"w-full justify-end gap-2 h-auto py-3 px-3 sm:px-4 text-right",onClick:()=>v("next"),children:[i.jsxs("div",{className:"flex flex-col items-end min-w-0",children:[i.jsx("span",{className:"text-xs text-muted-foreground mb-0.5 sm:mb-1",children:"Next"}),i.jsx("span",{className:"font-medium text-xs sm:text-sm truncate w-full",children:_().next.subsectionTitle})]}),i.jsx(Lc,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"})]})})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("span",{className:"text-xs text-muted-foreground",children:[_().currentIndex+1," of ",_().total]})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:i.jsxs("div",{className:"text-center",children:[i.jsx(wh,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Select a section from the sidebar to view documentation"})]})})})]})]})})]})},r0e=()=>{const{isMobile:t,isInitialized:e}=Ln(),{component:n}=die();return k.useEffect(()=>{hie();const r=mie();return()=>{pie(),r&&r()}},[]),e?i.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[i.jsx(Ase,{}),i.jsx("main",{className:"flex-1 min-h-0 pt-20 pb-8",children:i.jsxs(w9,{children:[i.jsx(Js,{path:"/",element:i.jsx(whe,{})}),i.jsx(Js,{path:"/app",element:i.jsx(Yhe,{})}),i.jsx(Js,{path:"/docs",element:i.jsx(n0e,{})}),i.jsx(Js,{path:"/profile",element:i.jsx(ype,{})}),i.jsx(Js,{path:"/create-raffle",element:i.jsx(jme,{})}),i.jsx(Js,{path:"/deploy-collection",element:i.jsx(Eme,{})}),i.jsx(Js,{path:"/legacy/profile",element:i.jsx(bpe,{})}),i.jsx(Js,{path:"/legacy/create-raffle",element:i.jsx(ime,{})}),i.jsx(Js,{path:"/legacy/deploy-collection",element:i.jsx(Cme,{})}),i.jsx(Js,{path:"/raffle/:raffleAddress",element:i.jsx(FM,{})}),i.jsx(Js,{path:"/:chainSlug/raffle/:raffleAddress",element:i.jsx(FM,{})}),i.jsx(Js,{path:"/auth/callback/twitter",element:i.jsx(uT,{})}),i.jsx(Js,{path:"/auth/callback/discord",element:i.jsx(uT,{})}),i.jsx(Js,{path:"/auth/callback/telegram",element:i.jsx(uT,{})})]})}),i.jsx(Xse,{}),i.jsx(QH,{}),n]}):i.jsx("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold mb-2",style:{fontFamily:"Orbitron, monospace"},children:"Dropr"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading..."})]})})};function s0e(){return i.jsx(eie,{children:i.jsx(mG,{children:i.jsx(nH,{children:i.jsx(pG,{children:i.jsx(gG,{children:i.jsx(_9,{children:i.jsx(r0e,{})})})})})})})}const i0e=console.error;console.error=(...t)=>{const e=t.join(" ");e.includes("Invalid Sentry Dsn")||e.includes("Sentry")||i0e.apply(console,t)};console.log("main.jsx is executing...");const mN=document.getElementById("root");console.log("Root element found:",mN);if(mN){const t=A7.createRoot(mN);console.log("React root created"),t.render(i.jsx(s0e,{})),console.log("React app rendered")}else console.error("Root element not found!");
